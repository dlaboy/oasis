var o7=Object.defineProperty;var l7=(n,e,t)=>e in n?o7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var pt=(n,e,t)=>l7(n,typeof e!="symbol"?e+"":e,t);function c7(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function u7(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var GR={exports:{}},xx={},VR={exports:{}},On={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=Symbol.for("react.element"),d7=Symbol.for("react.portal"),f7=Symbol.for("react.fragment"),h7=Symbol.for("react.strict_mode"),p7=Symbol.for("react.profiler"),g7=Symbol.for("react.provider"),m7=Symbol.for("react.context"),y7=Symbol.for("react.forward_ref"),v7=Symbol.for("react.suspense"),x7=Symbol.for("react.memo"),b7=Symbol.for("react.lazy"),kA=Symbol.iterator;function S7(n){return n===null||typeof n!="object"?null:(n=kA&&n[kA]||n["@@iterator"],typeof n=="function"?n:null)}var YR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qR=Object.assign,KR={};function tg(n,e,t){this.props=n,this.context=e,this.refs=KR,this.updater=t||YR}tg.prototype.isReactComponent={};tg.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};tg.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function XR(){}XR.prototype=tg.prototype;function t5(n,e,t){this.props=n,this.context=e,this.refs=KR,this.updater=t||YR}var n5=t5.prototype=new XR;n5.constructor=t5;qR(n5,tg.prototype);n5.isPureReactComponent=!0;var RA=Array.isArray,QR=Object.prototype.hasOwnProperty,i5={current:null},JR={key:!0,ref:!0,__self:!0,__source:!0};function ZR(n,e,t){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)QR.call(e,i)&&!JR.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:k0,type:n,key:s,ref:a,props:r,_owner:i5.current}}function w7(n,e){return{$$typeof:k0,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function r5(n){return typeof n=="object"&&n!==null&&n.$$typeof===k0}function _7(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var PA=/\/+/g;function c2(n,e){return typeof n=="object"&&n!==null&&n.key!=null?_7(""+n.key):e.toString(36)}function Fv(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case k0:case d7:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+c2(a,0):i,RA(r)?(t="",n!=null&&(t=n.replace(PA,"$&/")+"/"),Fv(r,e,t,"",function(c){return c})):r!=null&&(r5(r)&&(r=w7(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(PA,"$&/")+"/")+n)),e.push(r)),1;if(a=0,i=i===""?".":i+":",RA(n))for(var o=0;o<n.length;o++){s=n[o];var l=i+c2(s,o);a+=Fv(s,e,t,l,r)}else if(l=S7(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=i+c2(s,o++),a+=Fv(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Py(n,e,t){if(n==null)return n;var i=[],r=0;return Fv(n,i,"","",function(s){return e.call(t,s,r++)}),i}function E7(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ha={current:null},jv={transition:null},T7={ReactCurrentDispatcher:ha,ReactCurrentBatchConfig:jv,ReactCurrentOwner:i5};function eP(){throw Error("act(...) is not supported in production builds of React.")}On.Children={map:Py,forEach:function(n,e,t){Py(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Py(n,function(){e++}),e},toArray:function(n){return Py(n,function(e){return e})||[]},only:function(n){if(!r5(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};On.Component=tg;On.Fragment=f7;On.Profiler=p7;On.PureComponent=t5;On.StrictMode=h7;On.Suspense=v7;On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T7;On.act=eP;On.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=qR({},n.props),r=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=i5.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)QR.call(e,l)&&!JR.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];i.children=o}return{$$typeof:k0,type:n.type,key:r,ref:s,props:i,_owner:a}};On.createContext=function(n){return n={$$typeof:m7,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:g7,_context:n},n.Consumer=n};On.createElement=ZR;On.createFactory=function(n){var e=ZR.bind(null,n);return e.type=n,e};On.createRef=function(){return{current:null}};On.forwardRef=function(n){return{$$typeof:y7,render:n}};On.isValidElement=r5;On.lazy=function(n){return{$$typeof:b7,_payload:{_status:-1,_result:n},_init:E7}};On.memo=function(n,e){return{$$typeof:x7,type:n,compare:e===void 0?null:e}};On.startTransition=function(n){var e=jv.transition;jv.transition={};try{n()}finally{jv.transition=e}};On.unstable_act=eP;On.useCallback=function(n,e){return ha.current.useCallback(n,e)};On.useContext=function(n){return ha.current.useContext(n)};On.useDebugValue=function(){};On.useDeferredValue=function(n){return ha.current.useDeferredValue(n)};On.useEffect=function(n,e){return ha.current.useEffect(n,e)};On.useId=function(){return ha.current.useId()};On.useImperativeHandle=function(n,e,t){return ha.current.useImperativeHandle(n,e,t)};On.useInsertionEffect=function(n,e){return ha.current.useInsertionEffect(n,e)};On.useLayoutEffect=function(n,e){return ha.current.useLayoutEffect(n,e)};On.useMemo=function(n,e){return ha.current.useMemo(n,e)};On.useReducer=function(n,e,t){return ha.current.useReducer(n,e,t)};On.useRef=function(n){return ha.current.useRef(n)};On.useState=function(n){return ha.current.useState(n)};On.useSyncExternalStore=function(n,e,t){return ha.current.useSyncExternalStore(n,e,t)};On.useTransition=function(){return ha.current.useTransition()};On.version="18.3.1";VR.exports=On;var B=VR.exports;const gl=I0(B),A7=c7({__proto__:null,default:gl},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L7=B,C7=Symbol.for("react.element"),I7=Symbol.for("react.fragment"),k7=Object.prototype.hasOwnProperty,R7=L7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P7={key:!0,ref:!0,__self:!0,__source:!0};function tP(n,e,t){var i,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)k7.call(e,i)&&!P7.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:C7,type:n,key:s,ref:a,props:r,_owner:R7.current}}xx.Fragment=I7;xx.jsx=tP;xx.jsxs=tP;GR.exports=xx;var _=GR.exports,GS={},nP={exports:{}},go={},iP={exports:{}},rP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(z,W){var te=z.length;z.push(W);e:for(;0<te;){var fe=te-1>>>1,F=z[fe];if(0<r(F,W))z[fe]=W,z[te]=F,te=fe;else break e}}function t(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var W=z[0],te=z.pop();if(te!==W){z[0]=te;e:for(var fe=0,F=z.length,K=F>>>1;fe<K;){var ee=2*(fe+1)-1,ae=z[ee],ce=ee+1,ye=z[ce];if(0>r(ae,te))ce<F&&0>r(ye,ae)?(z[fe]=ye,z[ce]=te,fe=ce):(z[fe]=ae,z[ee]=te,fe=ee);else if(ce<F&&0>r(ye,te))z[fe]=ye,z[ce]=te,fe=ce;else break e}}return W}function r(z,W){var te=z.sortIndex-W.sortIndex;return te!==0?te:z.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var W=t(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=z)i(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function A(z){if(v=!1,S(z),!m)if(t(l)!==null)m=!0,H(C);else{var W=t(c);W!==null&&V(A,W.startTime-z)}}function C(z,W){m=!1,v&&(v=!1,x(R),R=-1),p=!0;var te=h;try{for(S(W),d=t(l);d!==null&&(!(d.expirationTime>W)||z&&!D());){var fe=d.callback;if(typeof fe=="function"){d.callback=null,h=d.priorityLevel;var F=fe(d.expirationTime<=W);W=n.unstable_now(),typeof F=="function"?d.callback=F:d===t(l)&&i(l),S(W)}else i(l);d=t(l)}if(d!==null)var K=!0;else{var ee=t(c);ee!==null&&V(A,ee.startTime-W),K=!1}return K}finally{d=null,h=te,p=!1}}var N=!1,k=null,R=-1,U=5,j=-1;function D(){return!(n.unstable_now()-j<U)}function O(){if(k!==null){var z=n.unstable_now();j=z;var W=!0;try{W=k(!0,z)}finally{W?Z():(N=!1,k=null)}}else N=!1}var Z;if(typeof w=="function")Z=function(){w(O)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,le=J.port2;J.port1.onmessage=O,Z=function(){le.postMessage(null)}}else Z=function(){b(O,0)};function H(z){k=z,N||(N=!0,Z())}function V(z,W){R=b(function(){z(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,H(C))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(z){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var te=h;h=W;try{return z()}finally{h=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=h;h=z;try{return W()}finally{h=te}},n.unstable_scheduleCallback=function(z,W,te){var fe=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?fe+te:fe):te=fe,z){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=te+F,z={id:u++,callback:W,priorityLevel:z,startTime:te,expirationTime:F,sortIndex:-1},te>fe?(z.sortIndex=te,e(c,z),t(l)===null&&z===t(c)&&(v?(x(R),R=-1):v=!0,V(A,te-fe))):(z.sortIndex=F,e(l,z),m||p||(m=!0,H(C))),z},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(z){var W=h;return function(){var te=h;h=W;try{return z.apply(this,arguments)}finally{h=te}}}})(rP);iP.exports=rP;var N7=iP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D7=B,ho=N7;function st(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sP=new Set,jm={};function gh(n,e){$p(n,e),$p(n+"Capture",e)}function $p(n,e){for(jm[n]=e,n=0;n<e.length;n++)sP.add(e[n])}var fu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),VS=Object.prototype.hasOwnProperty,O7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NA={},DA={};function M7(n){return VS.call(DA,n)?!0:VS.call(NA,n)?!1:O7.test(n)?DA[n]=!0:(NA[n]=!0,!1)}function F7(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j7(n,e,t,i){if(e===null||typeof e>"u"||F7(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pa(n,e,t,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ns={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ns[n]=new pa(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ns[e]=new pa(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ns[n]=new pa(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ns[n]=new pa(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ns[n]=new pa(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ns[n]=new pa(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ns[n]=new pa(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ns[n]=new pa(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ns[n]=new pa(n,5,!1,n.toLowerCase(),null,!1,!1)});var s5=/[\-:]([a-z])/g;function a5(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(s5,a5);Ns[e]=new pa(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(s5,a5);Ns[e]=new pa(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(s5,a5);Ns[e]=new pa(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ns[n]=new pa(n,1,!1,n.toLowerCase(),null,!1,!1)});Ns.xlinkHref=new pa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ns[n]=new pa(n,1,!1,n.toLowerCase(),null,!0,!0)});function o5(n,e,t,i){var r=Ns.hasOwnProperty(e)?Ns[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j7(e,t,r,i)&&(t=null),i||r===null?M7(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var bu=D7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ny=Symbol.for("react.element"),fp=Symbol.for("react.portal"),hp=Symbol.for("react.fragment"),l5=Symbol.for("react.strict_mode"),YS=Symbol.for("react.profiler"),aP=Symbol.for("react.provider"),oP=Symbol.for("react.context"),c5=Symbol.for("react.forward_ref"),qS=Symbol.for("react.suspense"),KS=Symbol.for("react.suspense_list"),u5=Symbol.for("react.memo"),id=Symbol.for("react.lazy"),lP=Symbol.for("react.offscreen"),OA=Symbol.iterator;function Rg(n){return n===null||typeof n!="object"?null:(n=OA&&n[OA]||n["@@iterator"],typeof n=="function"?n:null)}var yr=Object.assign,u2;function Jg(n){if(u2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);u2=e&&e[1]||""}return`
`+u2+n}var d2=!1;function f2(n,e){if(!n||d2)return"";d2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{d2=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Jg(n):""}function B7(n){switch(n.tag){case 5:return Jg(n.type);case 16:return Jg("Lazy");case 13:return Jg("Suspense");case 19:return Jg("SuspenseList");case 0:case 2:case 15:return n=f2(n.type,!1),n;case 11:return n=f2(n.type.render,!1),n;case 1:return n=f2(n.type,!0),n;default:return""}}function XS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case hp:return"Fragment";case fp:return"Portal";case YS:return"Profiler";case l5:return"StrictMode";case qS:return"Suspense";case KS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case oP:return(n.displayName||"Context")+".Consumer";case aP:return(n._context.displayName||"Context")+".Provider";case c5:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case u5:return e=n.displayName||null,e!==null?e:XS(n.type)||"Memo";case id:e=n._payload,n=n._init;try{return XS(n(e))}catch{}}return null}function U7(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return XS(e);case 8:return e===l5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Od(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function cP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $7(n){var e=cP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Dy(n){n._valueTracker||(n._valueTracker=$7(n))}function uP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=cP(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function p1(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function QS(n,e){var t=e.checked;return yr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function MA(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Od(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dP(n,e){e=e.checked,e!=null&&o5(n,"checked",e,!1)}function JS(n,e){dP(n,e);var t=Od(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ZS(n,e.type,t):e.hasOwnProperty("defaultValue")&&ZS(n,e.type,Od(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function FA(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ZS(n,e,t){(e!=="number"||p1(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Zg=Array.isArray;function Lp(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Od(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function ew(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(st(91));return yr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function jA(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(st(92));if(Zg(t)){if(1<t.length)throw Error(st(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Od(t)}}function fP(n,e){var t=Od(e.value),i=Od(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function BA(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function hP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tw(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?hP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Oy,pP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Oy=Oy||document.createElement("div"),Oy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Bm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var um={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H7=["Webkit","ms","Moz","O"];Object.keys(um).forEach(function(n){H7.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),um[e]=um[n]})});function gP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||um.hasOwnProperty(n)&&um[n]?(""+e).trim():e+"px"}function mP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=gP(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var W7=yr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nw(n,e){if(e){if(W7[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(st(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(st(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(st(61))}if(e.style!=null&&typeof e.style!="object")throw Error(st(62))}}function iw(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rw=null;function d5(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var sw=null,Cp=null,Ip=null;function UA(n){if(n=N0(n)){if(typeof sw!="function")throw Error(st(280));var e=n.stateNode;e&&(e=Ex(e),sw(n.stateNode,n.type,e))}}function yP(n){Cp?Ip?Ip.push(n):Ip=[n]:Cp=n}function vP(){if(Cp){var n=Cp,e=Ip;if(Ip=Cp=null,UA(n),e)for(n=0;n<e.length;n++)UA(e[n])}}function xP(n,e){return n(e)}function bP(){}var h2=!1;function SP(n,e,t){if(h2)return n(e,t);h2=!0;try{return xP(n,e,t)}finally{h2=!1,(Cp!==null||Ip!==null)&&(bP(),vP())}}function Um(n,e){var t=n.stateNode;if(t===null)return null;var i=Ex(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(st(231,e,typeof t));return t}var aw=!1;if(fu)try{var Pg={};Object.defineProperty(Pg,"passive",{get:function(){aw=!0}}),window.addEventListener("test",Pg,Pg),window.removeEventListener("test",Pg,Pg)}catch{aw=!1}function z7(n,e,t,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var dm=!1,g1=null,m1=!1,ow=null,G7={onError:function(n){dm=!0,g1=n}};function V7(n,e,t,i,r,s,a,o,l){dm=!1,g1=null,z7.apply(G7,arguments)}function Y7(n,e,t,i,r,s,a,o,l){if(V7.apply(this,arguments),dm){if(dm){var c=g1;dm=!1,g1=null}else throw Error(st(198));m1||(m1=!0,ow=c)}}function mh(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function wP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function $A(n){if(mh(n)!==n)throw Error(st(188))}function q7(n){var e=n.alternate;if(!e){if(e=mh(n),e===null)throw Error(st(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return $A(r),n;if(s===i)return $A(r),e;s=s.sibling}throw Error(st(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error(st(189))}}if(t.alternate!==i)throw Error(st(190))}if(t.tag!==3)throw Error(st(188));return t.stateNode.current===t?n:e}function _P(n){return n=q7(n),n!==null?EP(n):null}function EP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=EP(n);if(e!==null)return e;n=n.sibling}return null}var TP=ho.unstable_scheduleCallback,HA=ho.unstable_cancelCallback,K7=ho.unstable_shouldYield,X7=ho.unstable_requestPaint,jr=ho.unstable_now,Q7=ho.unstable_getCurrentPriorityLevel,f5=ho.unstable_ImmediatePriority,AP=ho.unstable_UserBlockingPriority,y1=ho.unstable_NormalPriority,J7=ho.unstable_LowPriority,LP=ho.unstable_IdlePriority,bx=null,lc=null;function Z7(n){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(bx,n,void 0,(n.current.flags&128)===128)}catch{}}var vl=Math.clz32?Math.clz32:nU,eU=Math.log,tU=Math.LN2;function nU(n){return n>>>=0,n===0?32:31-(eU(n)/tU|0)|0}var My=64,Fy=4194304;function em(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function v1(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?i=em(o):(s&=a,s!==0&&(i=em(s)))}else a=t&~r,a!==0?i=em(a):s!==0&&(i=em(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-vl(e),r=1<<t,i|=n[t],e&=~r;return i}function iU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rU(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-vl(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&i)&&(r[a]=iU(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function lw(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function CP(){var n=My;return My<<=1,!(My&4194240)&&(My=64),n}function p2(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function R0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-vl(e),n[e]=t}function sU(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-vl(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function h5(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-vl(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Si=0;function IP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var kP,p5,RP,PP,NP,cw=!1,jy=[],_d=null,Ed=null,Td=null,$m=new Map,Hm=new Map,cd=[],aU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WA(n,e){switch(n){case"focusin":case"focusout":_d=null;break;case"dragenter":case"dragleave":Ed=null;break;case"mouseover":case"mouseout":Td=null;break;case"pointerover":case"pointerout":$m.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hm.delete(e.pointerId)}}function Ng(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=N0(e),e!==null&&p5(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function oU(n,e,t,i,r){switch(e){case"focusin":return _d=Ng(_d,n,e,t,i,r),!0;case"dragenter":return Ed=Ng(Ed,n,e,t,i,r),!0;case"mouseover":return Td=Ng(Td,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return $m.set(s,Ng($m.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Hm.set(s,Ng(Hm.get(s)||null,n,e,t,i,r)),!0}return!1}function DP(n){var e=Bf(n.target);if(e!==null){var t=mh(e);if(t!==null){if(e=t.tag,e===13){if(e=wP(t),e!==null){n.blockedOn=e,NP(n.priority,function(){RP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Bv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=uw(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);rw=i,t.target.dispatchEvent(i),rw=null}else return e=N0(t),e!==null&&p5(e),n.blockedOn=t,!1;e.shift()}return!0}function zA(n,e,t){Bv(n)&&t.delete(e)}function lU(){cw=!1,_d!==null&&Bv(_d)&&(_d=null),Ed!==null&&Bv(Ed)&&(Ed=null),Td!==null&&Bv(Td)&&(Td=null),$m.forEach(zA),Hm.forEach(zA)}function Dg(n,e){n.blockedOn===e&&(n.blockedOn=null,cw||(cw=!0,ho.unstable_scheduleCallback(ho.unstable_NormalPriority,lU)))}function Wm(n){function e(r){return Dg(r,n)}if(0<jy.length){Dg(jy[0],n);for(var t=1;t<jy.length;t++){var i=jy[t];i.blockedOn===n&&(i.blockedOn=null)}}for(_d!==null&&Dg(_d,n),Ed!==null&&Dg(Ed,n),Td!==null&&Dg(Td,n),$m.forEach(e),Hm.forEach(e),t=0;t<cd.length;t++)i=cd[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<cd.length&&(t=cd[0],t.blockedOn===null);)DP(t),t.blockedOn===null&&cd.shift()}var kp=bu.ReactCurrentBatchConfig,x1=!0;function cU(n,e,t,i){var r=Si,s=kp.transition;kp.transition=null;try{Si=1,g5(n,e,t,i)}finally{Si=r,kp.transition=s}}function uU(n,e,t,i){var r=Si,s=kp.transition;kp.transition=null;try{Si=4,g5(n,e,t,i)}finally{Si=r,kp.transition=s}}function g5(n,e,t,i){if(x1){var r=uw(n,e,t,i);if(r===null)E2(n,e,i,b1,t),WA(n,i);else if(oU(r,n,e,t,i))i.stopPropagation();else if(WA(n,i),e&4&&-1<aU.indexOf(n)){for(;r!==null;){var s=N0(r);if(s!==null&&kP(s),s=uw(n,e,t,i),s===null&&E2(n,e,i,b1,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else E2(n,e,i,null,t)}}var b1=null;function uw(n,e,t,i){if(b1=null,n=d5(i),n=Bf(n),n!==null)if(e=mh(n),e===null)n=null;else if(t=e.tag,t===13){if(n=wP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return b1=n,null}function OP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q7()){case f5:return 1;case AP:return 4;case y1:case J7:return 16;case LP:return 536870912;default:return 16}default:return 16}}var hd=null,m5=null,Uv=null;function MP(){if(Uv)return Uv;var n,e=m5,t=e.length,i,r="value"in hd?hd.value:hd.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return Uv=r.slice(n,1<i?1-i:void 0)}function $v(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function By(){return!0}function GA(){return!1}function mo(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?By:GA,this.isPropagationStopped=GA,this}return yr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=By)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=By)},persist:function(){},isPersistent:By}),e}var ng={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y5=mo(ng),P0=yr({},ng,{view:0,detail:0}),dU=mo(P0),g2,m2,Og,Sx=yr({},P0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:v5,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Og&&(Og&&n.type==="mousemove"?(g2=n.screenX-Og.screenX,m2=n.screenY-Og.screenY):m2=g2=0,Og=n),g2)},movementY:function(n){return"movementY"in n?n.movementY:m2}}),VA=mo(Sx),fU=yr({},Sx,{dataTransfer:0}),hU=mo(fU),pU=yr({},P0,{relatedTarget:0}),y2=mo(pU),gU=yr({},ng,{animationName:0,elapsedTime:0,pseudoElement:0}),mU=mo(gU),yU=yr({},ng,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),vU=mo(yU),xU=yr({},ng,{data:0}),YA=mo(xU),bU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _U(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=wU[n])?!!e[n]:!1}function v5(){return _U}var EU=yr({},P0,{key:function(n){if(n.key){var e=bU[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=$v(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?SU[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:v5,charCode:function(n){return n.type==="keypress"?$v(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$v(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),TU=mo(EU),AU=yr({},Sx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qA=mo(AU),LU=yr({},P0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:v5}),CU=mo(LU),IU=yr({},ng,{propertyName:0,elapsedTime:0,pseudoElement:0}),kU=mo(IU),RU=yr({},Sx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),PU=mo(RU),NU=[9,13,27,32],x5=fu&&"CompositionEvent"in window,fm=null;fu&&"documentMode"in document&&(fm=document.documentMode);var DU=fu&&"TextEvent"in window&&!fm,FP=fu&&(!x5||fm&&8<fm&&11>=fm),KA=" ",XA=!1;function jP(n,e){switch(n){case"keyup":return NU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var pp=!1;function OU(n,e){switch(n){case"compositionend":return BP(e);case"keypress":return e.which!==32?null:(XA=!0,KA);case"textInput":return n=e.data,n===KA&&XA?null:n;default:return null}}function MU(n,e){if(pp)return n==="compositionend"||!x5&&jP(n,e)?(n=MP(),Uv=m5=hd=null,pp=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FP&&e.locale!=="ko"?null:e.data;default:return null}}var FU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!FU[n.type]:e==="textarea"}function UP(n,e,t,i){yP(i),e=S1(e,"onChange"),0<e.length&&(t=new y5("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var hm=null,zm=null;function jU(n){QP(n,0)}function wx(n){var e=yp(n);if(uP(e))return n}function BU(n,e){if(n==="change")return e}var $P=!1;if(fu){var v2;if(fu){var x2="oninput"in document;if(!x2){var JA=document.createElement("div");JA.setAttribute("oninput","return;"),x2=typeof JA.oninput=="function"}v2=x2}else v2=!1;$P=v2&&(!document.documentMode||9<document.documentMode)}function ZA(){hm&&(hm.detachEvent("onpropertychange",HP),zm=hm=null)}function HP(n){if(n.propertyName==="value"&&wx(zm)){var e=[];UP(e,zm,n,d5(n)),SP(jU,e)}}function UU(n,e,t){n==="focusin"?(ZA(),hm=e,zm=t,hm.attachEvent("onpropertychange",HP)):n==="focusout"&&ZA()}function $U(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wx(zm)}function HU(n,e){if(n==="click")return wx(e)}function WU(n,e){if(n==="input"||n==="change")return wx(e)}function zU(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Sl=typeof Object.is=="function"?Object.is:zU;function Gm(n,e){if(Sl(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!VS.call(e,r)||!Sl(n[r],e[r]))return!1}return!0}function eL(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function tL(n,e){var t=eL(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=eL(t)}}function WP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?WP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function zP(){for(var n=window,e=p1();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=p1(n.document)}return e}function b5(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function GU(n){var e=zP(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&WP(t.ownerDocument.documentElement,t)){if(i!==null&&b5(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=tL(t,s);var a=tL(t,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var VU=fu&&"documentMode"in document&&11>=document.documentMode,gp=null,dw=null,pm=null,fw=!1;function nL(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;fw||gp==null||gp!==p1(i)||(i=gp,"selectionStart"in i&&b5(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pm&&Gm(pm,i)||(pm=i,i=S1(dw,"onSelect"),0<i.length&&(e=new y5("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=gp)))}function Uy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var mp={animationend:Uy("Animation","AnimationEnd"),animationiteration:Uy("Animation","AnimationIteration"),animationstart:Uy("Animation","AnimationStart"),transitionend:Uy("Transition","TransitionEnd")},b2={},GP={};fu&&(GP=document.createElement("div").style,"AnimationEvent"in window||(delete mp.animationend.animation,delete mp.animationiteration.animation,delete mp.animationstart.animation),"TransitionEvent"in window||delete mp.transitionend.transition);function _x(n){if(b2[n])return b2[n];if(!mp[n])return n;var e=mp[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in GP)return b2[n]=e[t];return n}var VP=_x("animationend"),YP=_x("animationiteration"),qP=_x("animationstart"),KP=_x("transitionend"),XP=new Map,iL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wd(n,e){XP.set(n,e),gh(e,[n])}for(var S2=0;S2<iL.length;S2++){var w2=iL[S2],YU=w2.toLowerCase(),qU=w2[0].toUpperCase()+w2.slice(1);Wd(YU,"on"+qU)}Wd(VP,"onAnimationEnd");Wd(YP,"onAnimationIteration");Wd(qP,"onAnimationStart");Wd("dblclick","onDoubleClick");Wd("focusin","onFocus");Wd("focusout","onBlur");Wd(KP,"onTransitionEnd");$p("onMouseEnter",["mouseout","mouseover"]);$p("onMouseLeave",["mouseout","mouseover"]);$p("onPointerEnter",["pointerout","pointerover"]);$p("onPointerLeave",["pointerout","pointerover"]);gh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gh("onBeforeInput",["compositionend","keypress","textInput","paste"]);gh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KU=new Set("cancel close invalid load scroll toggle".split(" ").concat(tm));function rL(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,Y7(i,e,void 0,n),n.currentTarget=null}function QP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;rL(r,o,c),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;rL(r,o,c),s=l}}}if(m1)throw n=ow,m1=!1,ow=null,n}function Hi(n,e){var t=e[yw];t===void 0&&(t=e[yw]=new Set);var i=n+"__bubble";t.has(i)||(JP(e,n,2,!1),t.add(i))}function _2(n,e,t){var i=0;e&&(i|=4),JP(t,n,i,e)}var $y="_reactListening"+Math.random().toString(36).slice(2);function Vm(n){if(!n[$y]){n[$y]=!0,sP.forEach(function(t){t!=="selectionchange"&&(KU.has(t)||_2(t,!1,n),_2(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[$y]||(e[$y]=!0,_2("selectionchange",!1,e))}}function JP(n,e,t,i){switch(OP(e)){case 1:var r=cU;break;case 4:r=uU;break;default:r=g5}t=r.bind(null,e,t,n),r=void 0,!aw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function E2(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=Bf(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}SP(function(){var c=s,u=d5(t),d=[];e:{var h=XP.get(n);if(h!==void 0){var p=y5,m=n;switch(n){case"keypress":if($v(t)===0)break e;case"keydown":case"keyup":p=TU;break;case"focusin":m="focus",p=y2;break;case"focusout":m="blur",p=y2;break;case"beforeblur":case"afterblur":p=y2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=VA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=CU;break;case VP:case YP:case qP:p=mU;break;case KP:p=kU;break;case"scroll":p=dU;break;case"wheel":p=PU;break;case"copy":case"cut":case"paste":p=vU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=qA}var v=(e&4)!==0,b=!v&&n==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var w=c,S;w!==null;){S=w;var A=S.stateNode;if(S.tag===5&&A!==null&&(S=A,x!==null&&(A=Um(w,x),A!=null&&v.push(Ym(w,A,S)))),b)break;w=w.return}0<v.length&&(h=new p(h,m,null,t,u),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",h&&t!==rw&&(m=t.relatedTarget||t.fromElement)&&(Bf(m)||m[hu]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=c,m=m?Bf(m):null,m!==null&&(b=mh(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(v=VA,A="onMouseLeave",x="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(v=qA,A="onPointerLeave",x="onPointerEnter",w="pointer"),b=p==null?h:yp(p),S=m==null?h:yp(m),h=new v(A,w+"leave",p,t,u),h.target=b,h.relatedTarget=S,A=null,Bf(u)===c&&(v=new v(x,w+"enter",m,t,u),v.target=S,v.relatedTarget=b,A=v),b=A,p&&m)t:{for(v=p,x=m,w=0,S=v;S;S=Kh(S))w++;for(S=0,A=x;A;A=Kh(A))S++;for(;0<w-S;)v=Kh(v),w--;for(;0<S-w;)x=Kh(x),S--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=Kh(v),x=Kh(x)}v=null}else v=null;p!==null&&sL(d,h,p,v,!1),m!==null&&b!==null&&sL(d,b,m,v,!0)}}e:{if(h=c?yp(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var C=BU;else if(QA(h))if($P)C=WU;else{C=$U;var N=UU}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=HU);if(C&&(C=C(n,c))){UP(d,C,t,u);break e}N&&N(n,h,c),n==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&ZS(h,"number",h.value)}switch(N=c?yp(c):window,n){case"focusin":(QA(N)||N.contentEditable==="true")&&(gp=N,dw=c,pm=null);break;case"focusout":pm=dw=gp=null;break;case"mousedown":fw=!0;break;case"contextmenu":case"mouseup":case"dragend":fw=!1,nL(d,t,u);break;case"selectionchange":if(VU)break;case"keydown":case"keyup":nL(d,t,u)}var k;if(x5)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else pp?jP(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(FP&&t.locale!=="ko"&&(pp||R!=="onCompositionStart"?R==="onCompositionEnd"&&pp&&(k=MP()):(hd=u,m5="value"in hd?hd.value:hd.textContent,pp=!0)),N=S1(c,R),0<N.length&&(R=new YA(R,n,null,t,u),d.push({event:R,listeners:N}),k?R.data=k:(k=BP(t),k!==null&&(R.data=k)))),(k=DU?OU(n,t):MU(n,t))&&(c=S1(c,"onBeforeInput"),0<c.length&&(u=new YA("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=k))}QP(d,e)})}function Ym(n,e,t){return{instance:n,listener:e,currentTarget:t}}function S1(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Um(n,t),s!=null&&i.unshift(Ym(n,s,r)),s=Um(n,e),s!=null&&i.push(Ym(n,s,r))),n=n.return}return i}function Kh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function sL(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&c!==null&&(o=c,r?(l=Um(t,s),l!=null&&a.unshift(Ym(t,l,o))):r||(l=Um(t,s),l!=null&&a.push(Ym(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var XU=/\r\n?/g,QU=/\u0000|\uFFFD/g;function aL(n){return(typeof n=="string"?n:""+n).replace(XU,`
`).replace(QU,"")}function Hy(n,e,t){if(e=aL(e),aL(n)!==e&&t)throw Error(st(425))}function w1(){}var hw=null,pw=null;function gw(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mw=typeof setTimeout=="function"?setTimeout:void 0,JU=typeof clearTimeout=="function"?clearTimeout:void 0,oL=typeof Promise=="function"?Promise:void 0,ZU=typeof queueMicrotask=="function"?queueMicrotask:typeof oL<"u"?function(n){return oL.resolve(null).then(n).catch(e$)}:mw;function e$(n){setTimeout(function(){throw n})}function T2(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Wm(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Wm(e)}function Ad(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function lL(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ig=Math.random().toString(36).slice(2),ec="__reactFiber$"+ig,qm="__reactProps$"+ig,hu="__reactContainer$"+ig,yw="__reactEvents$"+ig,t$="__reactListeners$"+ig,n$="__reactHandles$"+ig;function Bf(n){var e=n[ec];if(e)return e;for(var t=n.parentNode;t;){if(e=t[hu]||t[ec]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=lL(n);n!==null;){if(t=n[ec])return t;n=lL(n)}return e}n=t,t=n.parentNode}return null}function N0(n){return n=n[ec]||n[hu],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function yp(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(st(33))}function Ex(n){return n[qm]||null}var vw=[],vp=-1;function zd(n){return{current:n}}function zi(n){0>vp||(n.current=vw[vp],vw[vp]=null,vp--)}function ji(n,e){vp++,vw[vp]=n.current,n.current=e}var Md={},na=zd(Md),Fa=zd(!1),ah=Md;function Hp(n,e){var t=n.type.contextTypes;if(!t)return Md;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ja(n){return n=n.childContextTypes,n!=null}function _1(){zi(Fa),zi(na)}function cL(n,e,t){if(na.current!==Md)throw Error(st(168));ji(na,e),ji(Fa,t)}function ZP(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(st(108,U7(n)||"Unknown",r));return yr({},t,i)}function E1(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Md,ah=na.current,ji(na,n),ji(Fa,Fa.current),!0}function uL(n,e,t){var i=n.stateNode;if(!i)throw Error(st(169));t?(n=ZP(n,e,ah),i.__reactInternalMemoizedMergedChildContext=n,zi(Fa),zi(na),ji(na,n)):zi(Fa),ji(Fa,t)}var Xc=null,Tx=!1,A2=!1;function eN(n){Xc===null?Xc=[n]:Xc.push(n)}function i$(n){Tx=!0,eN(n)}function Gd(){if(!A2&&Xc!==null){A2=!0;var n=0,e=Si;try{var t=Xc;for(Si=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Xc=null,Tx=!1}catch(r){throw Xc!==null&&(Xc=Xc.slice(n+1)),TP(f5,Gd),r}finally{Si=e,A2=!1}}return null}var xp=[],bp=0,T1=null,A1=0,No=[],Do=0,oh=null,Zc=1,eu="";function If(n,e){xp[bp++]=A1,xp[bp++]=T1,T1=n,A1=e}function tN(n,e,t){No[Do++]=Zc,No[Do++]=eu,No[Do++]=oh,oh=n;var i=Zc;n=eu;var r=32-vl(i)-1;i&=~(1<<r),t+=1;var s=32-vl(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zc=1<<32-vl(e)+r|t<<r|i,eu=s+n}else Zc=1<<s|t<<r|i,eu=n}function S5(n){n.return!==null&&(If(n,1),tN(n,1,0))}function w5(n){for(;n===T1;)T1=xp[--bp],xp[bp]=null,A1=xp[--bp],xp[bp]=null;for(;n===oh;)oh=No[--Do],No[Do]=null,eu=No[--Do],No[Do]=null,Zc=No[--Do],No[Do]=null}var uo=null,lo=null,ir=!1,pl=null;function nN(n,e){var t=Fo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function dL(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,uo=n,lo=Ad(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,uo=n,lo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=oh!==null?{id:Zc,overflow:eu}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Fo(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,uo=n,lo=null,!0):!1;default:return!1}}function xw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function bw(n){if(ir){var e=lo;if(e){var t=e;if(!dL(n,e)){if(xw(n))throw Error(st(418));e=Ad(t.nextSibling);var i=uo;e&&dL(n,e)?nN(i,t):(n.flags=n.flags&-4097|2,ir=!1,uo=n)}}else{if(xw(n))throw Error(st(418));n.flags=n.flags&-4097|2,ir=!1,uo=n}}}function fL(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;uo=n}function Wy(n){if(n!==uo)return!1;if(!ir)return fL(n),ir=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!gw(n.type,n.memoizedProps)),e&&(e=lo)){if(xw(n))throw iN(),Error(st(418));for(;e;)nN(n,e),e=Ad(e.nextSibling)}if(fL(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(st(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){lo=Ad(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}lo=null}}else lo=uo?Ad(n.stateNode.nextSibling):null;return!0}function iN(){for(var n=lo;n;)n=Ad(n.nextSibling)}function Wp(){lo=uo=null,ir=!1}function _5(n){pl===null?pl=[n]:pl.push(n)}var r$=bu.ReactCurrentBatchConfig;function Mg(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(st(309));var i=t.stateNode}if(!i)throw Error(st(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(st(284));if(!t._owner)throw Error(st(290,n))}return n}function zy(n,e){throw n=Object.prototype.toString.call(e),Error(st(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function hL(n){var e=n._init;return e(n._payload)}function rN(n){function e(x,w){if(n){var S=x.deletions;S===null?(x.deletions=[w],x.flags|=16):S.push(w)}}function t(x,w){if(!n)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function i(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function r(x,w){return x=kd(x,w),x.index=0,x.sibling=null,x}function s(x,w,S){return x.index=S,n?(S=x.alternate,S!==null?(S=S.index,S<w?(x.flags|=2,w):S):(x.flags|=2,w)):(x.flags|=1048576,w)}function a(x){return n&&x.alternate===null&&(x.flags|=2),x}function o(x,w,S,A){return w===null||w.tag!==6?(w=N2(S,x.mode,A),w.return=x,w):(w=r(w,S),w.return=x,w)}function l(x,w,S,A){var C=S.type;return C===hp?u(x,w,S.props.children,A,S.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===id&&hL(C)===w.type)?(A=r(w,S.props),A.ref=Mg(x,w,S),A.return=x,A):(A=qv(S.type,S.key,S.props,null,x.mode,A),A.ref=Mg(x,w,S),A.return=x,A)}function c(x,w,S,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=D2(S,x.mode,A),w.return=x,w):(w=r(w,S.children||[]),w.return=x,w)}function u(x,w,S,A,C){return w===null||w.tag!==7?(w=Kf(S,x.mode,A,C),w.return=x,w):(w=r(w,S),w.return=x,w)}function d(x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=N2(""+w,x.mode,S),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ny:return S=qv(w.type,w.key,w.props,null,x.mode,S),S.ref=Mg(x,null,w),S.return=x,S;case fp:return w=D2(w,x.mode,S),w.return=x,w;case id:var A=w._init;return d(x,A(w._payload),S)}if(Zg(w)||Rg(w))return w=Kf(w,x.mode,S,null),w.return=x,w;zy(x,w)}return null}function h(x,w,S,A){var C=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:o(x,w,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ny:return S.key===C?l(x,w,S,A):null;case fp:return S.key===C?c(x,w,S,A):null;case id:return C=S._init,h(x,w,C(S._payload),A)}if(Zg(S)||Rg(S))return C!==null?null:u(x,w,S,A,null);zy(x,S)}return null}function p(x,w,S,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return x=x.get(S)||null,o(w,x,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ny:return x=x.get(A.key===null?S:A.key)||null,l(w,x,A,C);case fp:return x=x.get(A.key===null?S:A.key)||null,c(w,x,A,C);case id:var N=A._init;return p(x,w,S,N(A._payload),C)}if(Zg(A)||Rg(A))return x=x.get(S)||null,u(w,x,A,C,null);zy(w,A)}return null}function m(x,w,S,A){for(var C=null,N=null,k=w,R=w=0,U=null;k!==null&&R<S.length;R++){k.index>R?(U=k,k=null):U=k.sibling;var j=h(x,k,S[R],A);if(j===null){k===null&&(k=U);break}n&&k&&j.alternate===null&&e(x,k),w=s(j,w,R),N===null?C=j:N.sibling=j,N=j,k=U}if(R===S.length)return t(x,k),ir&&If(x,R),C;if(k===null){for(;R<S.length;R++)k=d(x,S[R],A),k!==null&&(w=s(k,w,R),N===null?C=k:N.sibling=k,N=k);return ir&&If(x,R),C}for(k=i(x,k);R<S.length;R++)U=p(k,x,R,S[R],A),U!==null&&(n&&U.alternate!==null&&k.delete(U.key===null?R:U.key),w=s(U,w,R),N===null?C=U:N.sibling=U,N=U);return n&&k.forEach(function(D){return e(x,D)}),ir&&If(x,R),C}function v(x,w,S,A){var C=Rg(S);if(typeof C!="function")throw Error(st(150));if(S=C.call(S),S==null)throw Error(st(151));for(var N=C=null,k=w,R=w=0,U=null,j=S.next();k!==null&&!j.done;R++,j=S.next()){k.index>R?(U=k,k=null):U=k.sibling;var D=h(x,k,j.value,A);if(D===null){k===null&&(k=U);break}n&&k&&D.alternate===null&&e(x,k),w=s(D,w,R),N===null?C=D:N.sibling=D,N=D,k=U}if(j.done)return t(x,k),ir&&If(x,R),C;if(k===null){for(;!j.done;R++,j=S.next())j=d(x,j.value,A),j!==null&&(w=s(j,w,R),N===null?C=j:N.sibling=j,N=j);return ir&&If(x,R),C}for(k=i(x,k);!j.done;R++,j=S.next())j=p(k,x,R,j.value,A),j!==null&&(n&&j.alternate!==null&&k.delete(j.key===null?R:j.key),w=s(j,w,R),N===null?C=j:N.sibling=j,N=j);return n&&k.forEach(function(O){return e(x,O)}),ir&&If(x,R),C}function b(x,w,S,A){if(typeof S=="object"&&S!==null&&S.type===hp&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ny:e:{for(var C=S.key,N=w;N!==null;){if(N.key===C){if(C=S.type,C===hp){if(N.tag===7){t(x,N.sibling),w=r(N,S.props.children),w.return=x,x=w;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===id&&hL(C)===N.type){t(x,N.sibling),w=r(N,S.props),w.ref=Mg(x,N,S),w.return=x,x=w;break e}t(x,N);break}else e(x,N);N=N.sibling}S.type===hp?(w=Kf(S.props.children,x.mode,A,S.key),w.return=x,x=w):(A=qv(S.type,S.key,S.props,null,x.mode,A),A.ref=Mg(x,w,S),A.return=x,x=A)}return a(x);case fp:e:{for(N=S.key;w!==null;){if(w.key===N)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){t(x,w.sibling),w=r(w,S.children||[]),w.return=x,x=w;break e}else{t(x,w);break}else e(x,w);w=w.sibling}w=D2(S,x.mode,A),w.return=x,x=w}return a(x);case id:return N=S._init,b(x,w,N(S._payload),A)}if(Zg(S))return m(x,w,S,A);if(Rg(S))return v(x,w,S,A);zy(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(t(x,w.sibling),w=r(w,S),w.return=x,x=w):(t(x,w),w=N2(S,x.mode,A),w.return=x,x=w),a(x)):t(x,w)}return b}var zp=rN(!0),sN=rN(!1),L1=zd(null),C1=null,Sp=null,E5=null;function T5(){E5=Sp=C1=null}function A5(n){var e=L1.current;zi(L1),n._currentValue=e}function Sw(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Rp(n,e){C1=n,E5=Sp=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ma=!0),n.firstContext=null)}function Bo(n){var e=n._currentValue;if(E5!==n)if(n={context:n,memoizedValue:e,next:null},Sp===null){if(C1===null)throw Error(st(308));Sp=n,C1.dependencies={lanes:0,firstContext:n}}else Sp=Sp.next=n;return e}var Uf=null;function L5(n){Uf===null?Uf=[n]:Uf.push(n)}function aN(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,L5(e)):(t.next=r.next,r.next=t),e.interleaved=t,pu(n,i)}function pu(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var rd=!1;function C5(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oN(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function lu(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ld(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Xn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,pu(n,t)}return r=i.interleaved,r===null?(e.next=e,L5(i)):(e.next=r.next,r.next=e),i.interleaved=e,pu(n,t)}function Hv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,h5(n,t)}}function pL(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function I1(n,e,t,i){var r=n.updateQueue;rd=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=n.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,u=c=l=null,o=s;do{var h=o.lane,p=o.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=n,v=o;switch(h=e,p=t,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=yr({},d,h);break e;case 2:rd=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,h=r.effects,h===null?r.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,a|=h;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;h=o,o=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ch|=a,n.lanes=a,n.memoizedState=d}}function gL(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(st(191,r));r.call(i)}}}var D0={},cc=zd(D0),Km=zd(D0),Xm=zd(D0);function $f(n){if(n===D0)throw Error(st(174));return n}function I5(n,e){switch(ji(Xm,e),ji(Km,n),ji(cc,D0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tw(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=tw(e,n)}zi(cc),ji(cc,e)}function Gp(){zi(cc),zi(Km),zi(Xm)}function lN(n){$f(Xm.current);var e=$f(cc.current),t=tw(e,n.type);e!==t&&(ji(Km,n),ji(cc,t))}function k5(n){Km.current===n&&(zi(cc),zi(Km))}var gr=zd(0);function k1(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var L2=[];function R5(){for(var n=0;n<L2.length;n++)L2[n]._workInProgressVersionPrimary=null;L2.length=0}var Wv=bu.ReactCurrentDispatcher,C2=bu.ReactCurrentBatchConfig,lh=0,mr=null,ss=null,ys=null,R1=!1,gm=!1,Qm=0,s$=0;function Ws(){throw Error(st(321))}function P5(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Sl(n[t],e[t]))return!1;return!0}function N5(n,e,t,i,r,s){if(lh=s,mr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wv.current=n===null||n.memoizedState===null?c$:u$,n=t(i,r),gm){s=0;do{if(gm=!1,Qm=0,25<=s)throw Error(st(301));s+=1,ys=ss=null,e.updateQueue=null,Wv.current=d$,n=t(i,r)}while(gm)}if(Wv.current=P1,e=ss!==null&&ss.next!==null,lh=0,ys=ss=mr=null,R1=!1,e)throw Error(st(300));return n}function D5(){var n=Qm!==0;return Qm=0,n}function Kl(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ys===null?mr.memoizedState=ys=n:ys=ys.next=n,ys}function Uo(){if(ss===null){var n=mr.alternate;n=n!==null?n.memoizedState:null}else n=ss.next;var e=ys===null?mr.memoizedState:ys.next;if(e!==null)ys=e,ss=n;else{if(n===null)throw Error(st(310));ss=n,n={memoizedState:ss.memoizedState,baseState:ss.baseState,baseQueue:ss.baseQueue,queue:ss.queue,next:null},ys===null?mr.memoizedState=ys=n:ys=ys.next=n}return ys}function Jm(n,e){return typeof e=="function"?e(n):e}function I2(n){var e=Uo(),t=e.queue;if(t===null)throw Error(st(311));t.lastRenderedReducer=n;var i=ss,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((lh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=i):l=l.next=d,mr.lanes|=u,ch|=u}c=c.next}while(c!==null&&c!==s);l===null?a=i:l.next=o,Sl(i,e.memoizedState)||(Ma=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,mr.lanes|=s,ch|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function k2(n){var e=Uo(),t=e.queue;if(t===null)throw Error(st(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);Sl(s,e.memoizedState)||(Ma=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function cN(){}function uN(n,e){var t=mr,i=Uo(),r=e(),s=!Sl(i.memoizedState,r);if(s&&(i.memoizedState=r,Ma=!0),i=i.queue,O5(hN.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||ys!==null&&ys.memoizedState.tag&1){if(t.flags|=2048,Zm(9,fN.bind(null,t,i,r,e),void 0,null),bs===null)throw Error(st(349));lh&30||dN(t,e,r)}return r}function dN(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=mr.updateQueue,e===null?(e={lastEffect:null,stores:null},mr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function fN(n,e,t,i){e.value=t,e.getSnapshot=i,pN(e)&&gN(n)}function hN(n,e,t){return t(function(){pN(e)&&gN(n)})}function pN(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Sl(n,t)}catch{return!0}}function gN(n){var e=pu(n,1);e!==null&&xl(e,n,1,-1)}function mL(n){var e=Kl();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jm,lastRenderedState:n},e.queue=n,n=n.dispatch=l$.bind(null,mr,n),[e.memoizedState,n]}function Zm(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=mr.updateQueue,e===null?(e={lastEffect:null,stores:null},mr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function mN(){return Uo().memoizedState}function zv(n,e,t,i){var r=Kl();mr.flags|=n,r.memoizedState=Zm(1|e,t,void 0,i===void 0?null:i)}function Ax(n,e,t,i){var r=Uo();i=i===void 0?null:i;var s=void 0;if(ss!==null){var a=ss.memoizedState;if(s=a.destroy,i!==null&&P5(i,a.deps)){r.memoizedState=Zm(e,t,s,i);return}}mr.flags|=n,r.memoizedState=Zm(1|e,t,s,i)}function yL(n,e){return zv(8390656,8,n,e)}function O5(n,e){return Ax(2048,8,n,e)}function yN(n,e){return Ax(4,2,n,e)}function vN(n,e){return Ax(4,4,n,e)}function xN(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function bN(n,e,t){return t=t!=null?t.concat([n]):null,Ax(4,4,xN.bind(null,e,n),t)}function M5(){}function SN(n,e){var t=Uo();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&P5(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function wN(n,e){var t=Uo();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&P5(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function _N(n,e,t){return lh&21?(Sl(t,e)||(t=CP(),mr.lanes|=t,ch|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ma=!0),n.memoizedState=t)}function a$(n,e){var t=Si;Si=t!==0&&4>t?t:4,n(!0);var i=C2.transition;C2.transition={};try{n(!1),e()}finally{Si=t,C2.transition=i}}function EN(){return Uo().memoizedState}function o$(n,e,t){var i=Id(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},TN(n))AN(e,t);else if(t=aN(n,e,t,i),t!==null){var r=fa();xl(t,n,i,r),LN(t,e,i)}}function l$(n,e,t){var i=Id(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(TN(n))AN(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,Sl(o,a)){var l=e.interleaved;l===null?(r.next=r,L5(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=aN(n,e,r,i),t!==null&&(r=fa(),xl(t,n,i,r),LN(t,e,i))}}function TN(n){var e=n.alternate;return n===mr||e!==null&&e===mr}function AN(n,e){gm=R1=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function LN(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,h5(n,t)}}var P1={readContext:Bo,useCallback:Ws,useContext:Ws,useEffect:Ws,useImperativeHandle:Ws,useInsertionEffect:Ws,useLayoutEffect:Ws,useMemo:Ws,useReducer:Ws,useRef:Ws,useState:Ws,useDebugValue:Ws,useDeferredValue:Ws,useTransition:Ws,useMutableSource:Ws,useSyncExternalStore:Ws,useId:Ws,unstable_isNewReconciler:!1},c$={readContext:Bo,useCallback:function(n,e){return Kl().memoizedState=[n,e===void 0?null:e],n},useContext:Bo,useEffect:yL,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,zv(4194308,4,xN.bind(null,e,n),t)},useLayoutEffect:function(n,e){return zv(4194308,4,n,e)},useInsertionEffect:function(n,e){return zv(4,2,n,e)},useMemo:function(n,e){var t=Kl();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Kl();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=o$.bind(null,mr,n),[i.memoizedState,n]},useRef:function(n){var e=Kl();return n={current:n},e.memoizedState=n},useState:mL,useDebugValue:M5,useDeferredValue:function(n){return Kl().memoizedState=n},useTransition:function(){var n=mL(!1),e=n[0];return n=a$.bind(null,n[1]),Kl().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=mr,r=Kl();if(ir){if(t===void 0)throw Error(st(407));t=t()}else{if(t=e(),bs===null)throw Error(st(349));lh&30||dN(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,yL(hN.bind(null,i,s,n),[n]),i.flags|=2048,Zm(9,fN.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Kl(),e=bs.identifierPrefix;if(ir){var t=eu,i=Zc;t=(i&~(1<<32-vl(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Qm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=s$++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},u$={readContext:Bo,useCallback:SN,useContext:Bo,useEffect:O5,useImperativeHandle:bN,useInsertionEffect:yN,useLayoutEffect:vN,useMemo:wN,useReducer:I2,useRef:mN,useState:function(){return I2(Jm)},useDebugValue:M5,useDeferredValue:function(n){var e=Uo();return _N(e,ss.memoizedState,n)},useTransition:function(){var n=I2(Jm)[0],e=Uo().memoizedState;return[n,e]},useMutableSource:cN,useSyncExternalStore:uN,useId:EN,unstable_isNewReconciler:!1},d$={readContext:Bo,useCallback:SN,useContext:Bo,useEffect:O5,useImperativeHandle:bN,useInsertionEffect:yN,useLayoutEffect:vN,useMemo:wN,useReducer:k2,useRef:mN,useState:function(){return k2(Jm)},useDebugValue:M5,useDeferredValue:function(n){var e=Uo();return ss===null?e.memoizedState=n:_N(e,ss.memoizedState,n)},useTransition:function(){var n=k2(Jm)[0],e=Uo().memoizedState;return[n,e]},useMutableSource:cN,useSyncExternalStore:uN,useId:EN,unstable_isNewReconciler:!1};function ul(n,e){if(n&&n.defaultProps){e=yr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function ww(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:yr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Lx={isMounted:function(n){return(n=n._reactInternals)?mh(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=fa(),r=Id(n),s=lu(i,r);s.payload=e,t!=null&&(s.callback=t),e=Ld(n,s,r),e!==null&&(xl(e,n,r,i),Hv(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=fa(),r=Id(n),s=lu(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ld(n,s,r),e!==null&&(xl(e,n,r,i),Hv(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=fa(),i=Id(n),r=lu(t,i);r.tag=2,e!=null&&(r.callback=e),e=Ld(n,r,i),e!==null&&(xl(e,n,i,t),Hv(e,n,i))}};function vL(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Gm(t,i)||!Gm(r,s):!0}function CN(n,e,t){var i=!1,r=Md,s=e.contextType;return typeof s=="object"&&s!==null?s=Bo(s):(r=ja(e)?ah:na.current,i=e.contextTypes,s=(i=i!=null)?Hp(n,r):Md),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Lx,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function xL(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Lx.enqueueReplaceState(e,e.state,null)}function _w(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},C5(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Bo(s):(s=ja(e)?ah:na.current,r.context=Hp(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ww(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Lx.enqueueReplaceState(r,r.state,null),I1(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Vp(n,e){try{var t="",i=e;do t+=B7(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function R2(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Ew(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var f$=typeof WeakMap=="function"?WeakMap:Map;function IN(n,e,t){t=lu(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){D1||(D1=!0,Dw=i),Ew(n,e)},t}function kN(n,e,t){t=lu(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Ew(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Ew(n,e),typeof i!="function"&&(Cd===null?Cd=new Set([this]):Cd.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function bL(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new f$;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=A$.bind(null,n,e,t),e.then(n,n))}function SL(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function wL(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=lu(-1,1),e.tag=2,Ld(t,e,1))),t.lanes|=1),n)}var h$=bu.ReactCurrentOwner,Ma=!1;function da(n,e,t,i){e.child=n===null?sN(e,null,t,i):zp(e,n.child,t,i)}function _L(n,e,t,i,r){t=t.render;var s=e.ref;return Rp(e,r),i=N5(n,e,t,i,s,r),t=D5(),n!==null&&!Ma?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,gu(n,e,r)):(ir&&t&&S5(e),e.flags|=1,da(n,e,i,r),e.child)}function EL(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!z5(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,RN(n,e,s,i,r)):(n=qv(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:Gm,t(a,i)&&n.ref===e.ref)return gu(n,e,r)}return e.flags|=1,n=kd(s,i),n.ref=e.ref,n.return=e,e.child=n}function RN(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Gm(s,i)&&n.ref===e.ref)if(Ma=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Ma=!0);else return e.lanes=n.lanes,gu(n,e,r)}return Tw(n,e,t,i,r)}function PN(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ji(_p,io),io|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ji(_p,io),io|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,ji(_p,io),io|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,ji(_p,io),io|=i;return da(n,e,r,t),e.child}function NN(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Tw(n,e,t,i,r){var s=ja(t)?ah:na.current;return s=Hp(e,s),Rp(e,r),t=N5(n,e,t,i,s,r),i=D5(),n!==null&&!Ma?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,gu(n,e,r)):(ir&&i&&S5(e),e.flags|=1,da(n,e,t,r),e.child)}function TL(n,e,t,i,r){if(ja(t)){var s=!0;E1(e)}else s=!1;if(Rp(e,r),e.stateNode===null)Gv(n,e),CN(e,t,i),_w(e,t,i,r),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=Bo(c):(c=ja(t)?ah:na.current,c=Hp(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==c)&&xL(e,a,i,c),rd=!1;var h=e.memoizedState;a.state=h,I1(e,i,a,r),l=e.memoizedState,o!==i||h!==l||Fa.current||rd?(typeof u=="function"&&(ww(e,t,u,i),l=e.memoizedState),(o=rd||vL(e,t,o,i,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,oN(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:ul(e.type,o),a.props=c,d=e.pendingProps,h=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Bo(l):(l=ja(t)?ah:na.current,l=Hp(e,l));var p=t.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&xL(e,a,i,l),rd=!1,h=e.memoizedState,a.state=h,I1(e,i,a,r);var m=e.memoizedState;o!==d||h!==m||Fa.current||rd?(typeof p=="function"&&(ww(e,t,p,i),m=e.memoizedState),(c=rd||vL(e,t,c,i,h,m,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),a.props=i,a.state=m,a.context=l,i=c):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return Aw(n,e,t,i,s,r)}function Aw(n,e,t,i,r,s){NN(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&uL(e,t,!1),gu(n,e,s);i=e.stateNode,h$.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=zp(e,n.child,null,s),e.child=zp(e,null,o,s)):da(n,e,o,s),e.memoizedState=i.state,r&&uL(e,t,!0),e.child}function DN(n){var e=n.stateNode;e.pendingContext?cL(n,e.pendingContext,e.pendingContext!==e.context):e.context&&cL(n,e.context,!1),I5(n,e.containerInfo)}function AL(n,e,t,i,r){return Wp(),_5(r),e.flags|=256,da(n,e,t,i),e.child}var Lw={dehydrated:null,treeContext:null,retryLane:0};function Cw(n){return{baseLanes:n,cachePool:null,transitions:null}}function ON(n,e,t){var i=e.pendingProps,r=gr.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),ji(gr,r&1),n===null)return bw(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=kx(a,i,0,null),n=Kf(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Cw(t),e.memoizedState=Lw,n):F5(e,a));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return p$(n,e,a,i,o,r,t);if(s){s=i.fallback,a=e.mode,r=n.child,o=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=kd(r,l),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=kd(o,s):(s=Kf(s,a,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?Cw(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=Lw,i}return s=n.child,n=s.sibling,i=kd(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function F5(n,e){return e=kx({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Gy(n,e,t,i){return i!==null&&_5(i),zp(e,n.child,null,t),n=F5(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function p$(n,e,t,i,r,s,a){if(t)return e.flags&256?(e.flags&=-257,i=R2(Error(st(422))),Gy(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=kx({mode:"visible",children:i.children},r,0,null),s=Kf(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&zp(e,n.child,null,a),e.child.memoizedState=Cw(a),e.memoizedState=Lw,s);if(!(e.mode&1))return Gy(n,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(st(419)),i=R2(s,i,void 0),Gy(n,e,a,i)}if(o=(a&n.childLanes)!==0,Ma||o){if(i=bs,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,pu(n,r),xl(i,n,r,-1))}return W5(),i=R2(Error(st(421))),Gy(n,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=L$.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,lo=Ad(r.nextSibling),uo=e,ir=!0,pl=null,n!==null&&(No[Do++]=Zc,No[Do++]=eu,No[Do++]=oh,Zc=n.id,eu=n.overflow,oh=e),e=F5(e,i.children),e.flags|=4096,e)}function LL(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Sw(n.return,e,t)}function P2(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function MN(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(da(n,e,i.children,t),i=gr.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&LL(n,t,e);else if(n.tag===19)LL(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(ji(gr,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&k1(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),P2(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&k1(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}P2(e,!0,t,null,s);break;case"together":P2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function gu(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ch|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(st(153));if(e.child!==null){for(n=e.child,t=kd(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=kd(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function g$(n,e,t){switch(e.tag){case 3:DN(e),Wp();break;case 5:lN(e);break;case 1:ja(e.type)&&E1(e);break;case 4:I5(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ji(L1,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ji(gr,gr.current&1),e.flags|=128,null):t&e.child.childLanes?ON(n,e,t):(ji(gr,gr.current&1),n=gu(n,e,t),n!==null?n.sibling:null);ji(gr,gr.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return MN(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ji(gr,gr.current),i)break;return null;case 22:case 23:return e.lanes=0,PN(n,e,t)}return gu(n,e,t)}var FN,Iw,jN,BN;FN=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Iw=function(){};jN=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,$f(cc.current);var s=null;switch(t){case"input":r=QS(n,r),i=QS(n,i),s=[];break;case"select":r=yr({},r,{value:void 0}),i=yr({},i,{value:void 0}),s=[];break;case"textarea":r=ew(n,r),i=ew(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=w1)}nw(t,i);var a;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var o=r[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(jm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(o=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(jm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Hi("scroll",n),s||o===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};BN=function(n,e,t,i){t!==i&&(e.flags|=4)};function Fg(n,e){if(!ir)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function zs(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function m$(n,e,t){var i=e.pendingProps;switch(w5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zs(e),null;case 1:return ja(e.type)&&_1(),zs(e),null;case 3:return i=e.stateNode,Gp(),zi(Fa),zi(na),R5(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Wy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pl!==null&&(Fw(pl),pl=null))),Iw(n,e),zs(e),null;case 5:k5(e);var r=$f(Xm.current);if(t=e.type,n!==null&&e.stateNode!=null)jN(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(st(166));return zs(e),null}if(n=$f(cc.current),Wy(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[ec]=e,i[qm]=s,n=(e.mode&1)!==0,t){case"dialog":Hi("cancel",i),Hi("close",i);break;case"iframe":case"object":case"embed":Hi("load",i);break;case"video":case"audio":for(r=0;r<tm.length;r++)Hi(tm[r],i);break;case"source":Hi("error",i);break;case"img":case"image":case"link":Hi("error",i),Hi("load",i);break;case"details":Hi("toggle",i);break;case"input":MA(i,s),Hi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Hi("invalid",i);break;case"textarea":jA(i,s),Hi("invalid",i)}nw(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&Hy(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Hy(i.textContent,o,n),r=["children",""+o]):jm.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Hi("scroll",i)}switch(t){case"input":Dy(i),FA(i,s,!0);break;case"textarea":Dy(i),BA(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=w1)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=hP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[ec]=e,n[qm]=i,FN(n,e,!1,!1),e.stateNode=n;e:{switch(a=iw(t,i),t){case"dialog":Hi("cancel",n),Hi("close",n),r=i;break;case"iframe":case"object":case"embed":Hi("load",n),r=i;break;case"video":case"audio":for(r=0;r<tm.length;r++)Hi(tm[r],n);r=i;break;case"source":Hi("error",n),r=i;break;case"img":case"image":case"link":Hi("error",n),Hi("load",n),r=i;break;case"details":Hi("toggle",n),r=i;break;case"input":MA(n,i),r=QS(n,i),Hi("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=yr({},i,{value:void 0}),Hi("invalid",n);break;case"textarea":jA(n,i),r=ew(n,i),Hi("invalid",n);break;default:r=i}nw(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?mP(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pP(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Bm(n,l):typeof l=="number"&&Bm(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(jm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Hi("scroll",n):l!=null&&o5(n,s,l,a))}switch(t){case"input":Dy(n),FA(n,i,!1);break;case"textarea":Dy(n),BA(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Od(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Lp(n,!!i.multiple,s,!1):i.defaultValue!=null&&Lp(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=w1)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zs(e),null;case 6:if(n&&e.stateNode!=null)BN(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(st(166));if(t=$f(Xm.current),$f(cc.current),Wy(e)){if(i=e.stateNode,t=e.memoizedProps,i[ec]=e,(s=i.nodeValue!==t)&&(n=uo,n!==null))switch(n.tag){case 3:Hy(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Hy(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ec]=e,e.stateNode=i}return zs(e),null;case 13:if(zi(gr),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ir&&lo!==null&&e.mode&1&&!(e.flags&128))iN(),Wp(),e.flags|=98560,s=!1;else if(s=Wy(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(st(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(st(317));s[ec]=e}else Wp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zs(e),s=!1}else pl!==null&&(Fw(pl),pl=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||gr.current&1?ls===0&&(ls=3):W5())),e.updateQueue!==null&&(e.flags|=4),zs(e),null);case 4:return Gp(),Iw(n,e),n===null&&Vm(e.stateNode.containerInfo),zs(e),null;case 10:return A5(e.type._context),zs(e),null;case 17:return ja(e.type)&&_1(),zs(e),null;case 19:if(zi(gr),s=e.memoizedState,s===null)return zs(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Fg(s,!1);else{if(ls!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=k1(n),a!==null){for(e.flags|=128,Fg(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ji(gr,gr.current&1|2),e.child}n=n.sibling}s.tail!==null&&jr()>Yp&&(e.flags|=128,i=!0,Fg(s,!1),e.lanes=4194304)}else{if(!i)if(n=k1(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Fg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ir)return zs(e),null}else 2*jr()-s.renderingStartTime>Yp&&t!==1073741824&&(e.flags|=128,i=!0,Fg(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=jr(),e.sibling=null,t=gr.current,ji(gr,i?t&1|2:t&1),e):(zs(e),null);case 22:case 23:return H5(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?io&1073741824&&(zs(e),e.subtreeFlags&6&&(e.flags|=8192)):zs(e),null;case 24:return null;case 25:return null}throw Error(st(156,e.tag))}function y$(n,e){switch(w5(e),e.tag){case 1:return ja(e.type)&&_1(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Gp(),zi(Fa),zi(na),R5(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return k5(e),null;case 13:if(zi(gr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(st(340));Wp()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return zi(gr),null;case 4:return Gp(),null;case 10:return A5(e.type._context),null;case 22:case 23:return H5(),null;case 24:return null;default:return null}}var Vy=!1,Qs=!1,v$=typeof WeakSet=="function"?WeakSet:Set,At=null;function wp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Cr(n,e,i)}else t.current=null}function kw(n,e,t){try{t()}catch(i){Cr(n,e,i)}}var CL=!1;function x$(n,e){if(hw=x1,n=zP(),b5(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var p;d!==t||r!==0&&d.nodeType!==3||(o=a+r),d!==s||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===n)break t;if(h===t&&++c===r&&(o=a),h===s&&++u===i&&(l=a),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(pw={focusedElem:n,selectionRange:t},x1=!1,At=e;At!==null;)if(e=At,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,At=n;else for(;At!==null;){e=At;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:ul(e.type,v),b);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(st(163))}}catch(A){Cr(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,At=n;break}At=e.return}return m=CL,CL=!1,m}function mm(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&kw(e,t,s)}r=r.next}while(r!==i)}}function Cx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Rw(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function UN(n){var e=n.alternate;e!==null&&(n.alternate=null,UN(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ec],delete e[qm],delete e[yw],delete e[t$],delete e[n$])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function $N(n){return n.tag===5||n.tag===3||n.tag===4}function IL(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$N(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Pw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=w1));else if(i!==4&&(n=n.child,n!==null))for(Pw(n,e,t),n=n.sibling;n!==null;)Pw(n,e,t),n=n.sibling}function Nw(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Nw(n,e,t),n=n.sibling;n!==null;)Nw(n,e,t),n=n.sibling}var Rs=null,hl=!1;function Xu(n,e,t){for(t=t.child;t!==null;)HN(n,e,t),t=t.sibling}function HN(n,e,t){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(bx,t)}catch{}switch(t.tag){case 5:Qs||wp(t,e);case 6:var i=Rs,r=hl;Rs=null,Xu(n,e,t),Rs=i,hl=r,Rs!==null&&(hl?(n=Rs,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Rs.removeChild(t.stateNode));break;case 18:Rs!==null&&(hl?(n=Rs,t=t.stateNode,n.nodeType===8?T2(n.parentNode,t):n.nodeType===1&&T2(n,t),Wm(n)):T2(Rs,t.stateNode));break;case 4:i=Rs,r=hl,Rs=t.stateNode.containerInfo,hl=!0,Xu(n,e,t),Rs=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Qs&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&kw(t,e,a),r=r.next}while(r!==i)}Xu(n,e,t);break;case 1:if(!Qs&&(wp(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){Cr(t,e,o)}Xu(n,e,t);break;case 21:Xu(n,e,t);break;case 22:t.mode&1?(Qs=(i=Qs)||t.memoizedState!==null,Xu(n,e,t),Qs=i):Xu(n,e,t);break;default:Xu(n,e,t)}}function kL(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new v$),e.forEach(function(i){var r=C$.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function sl(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Rs=o.stateNode,hl=!1;break e;case 3:Rs=o.stateNode.containerInfo,hl=!0;break e;case 4:Rs=o.stateNode.containerInfo,hl=!0;break e}o=o.return}if(Rs===null)throw Error(st(160));HN(s,a,r),Rs=null,hl=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Cr(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WN(e,n),e=e.sibling}function WN(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(sl(e,n),Hl(n),i&4){try{mm(3,n,n.return),Cx(3,n)}catch(v){Cr(n,n.return,v)}try{mm(5,n,n.return)}catch(v){Cr(n,n.return,v)}}break;case 1:sl(e,n),Hl(n),i&512&&t!==null&&wp(t,t.return);break;case 5:if(sl(e,n),Hl(n),i&512&&t!==null&&wp(t,t.return),n.flags&32){var r=n.stateNode;try{Bm(r,"")}catch(v){Cr(n,n.return,v)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&dP(r,s),iw(o,a);var c=iw(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?mP(r,d):u==="dangerouslySetInnerHTML"?pP(r,d):u==="children"?Bm(r,d):o5(r,u,d,c)}switch(o){case"input":JS(r,s);break;case"textarea":fP(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Lp(r,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?Lp(r,!!s.multiple,s.defaultValue,!0):Lp(r,!!s.multiple,s.multiple?[]:"",!1))}r[qm]=s}catch(v){Cr(n,n.return,v)}}break;case 6:if(sl(e,n),Hl(n),i&4){if(n.stateNode===null)throw Error(st(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(v){Cr(n,n.return,v)}}break;case 3:if(sl(e,n),Hl(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Wm(e.containerInfo)}catch(v){Cr(n,n.return,v)}break;case 4:sl(e,n),Hl(n);break;case 13:sl(e,n),Hl(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(U5=jr())),i&4&&kL(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Qs=(c=Qs)||u,sl(e,n),Qs=c):sl(e,n),Hl(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(At=n,u=n.child;u!==null;){for(d=At=u;At!==null;){switch(h=At,p=h.child,h.tag){case 0:case 11:case 14:case 15:mm(4,h,h.return);break;case 1:wp(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Cr(i,t,v)}}break;case 5:wp(h,h.return);break;case 22:if(h.memoizedState!==null){PL(d);continue}}p!==null?(p.return=h,At=p):PL(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=gP("display",a))}catch(v){Cr(n,n.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Cr(n,n.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sl(e,n),Hl(n),i&4&&kL(n);break;case 21:break;default:sl(e,n),Hl(n)}}function Hl(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if($N(t)){var i=t;break e}t=t.return}throw Error(st(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Bm(r,""),i.flags&=-33);var s=IL(n);Nw(n,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=IL(n);Pw(n,o,a);break;default:throw Error(st(161))}}catch(l){Cr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function b$(n,e,t){At=n,zN(n)}function zN(n,e,t){for(var i=(n.mode&1)!==0;At!==null;){var r=At,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||Vy;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||Qs;o=Vy;var c=Qs;if(Vy=a,(Qs=l)&&!c)for(At=r;At!==null;)a=At,l=a.child,a.tag===22&&a.memoizedState!==null?NL(r):l!==null?(l.return=a,At=l):NL(r);for(;s!==null;)At=s,zN(s),s=s.sibling;At=r,Vy=o,Qs=c}RL(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,At=s):RL(n)}}function RL(n){for(;At!==null;){var e=At;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qs||Cx(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Qs)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ul(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gL(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}gL(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Wm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(st(163))}Qs||e.flags&512&&Rw(e)}catch(h){Cr(e,e.return,h)}}if(e===n){At=null;break}if(t=e.sibling,t!==null){t.return=e.return,At=t;break}At=e.return}}function PL(n){for(;At!==null;){var e=At;if(e===n){At=null;break}var t=e.sibling;if(t!==null){t.return=e.return,At=t;break}At=e.return}}function NL(n){for(;At!==null;){var e=At;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Cx(4,e)}catch(l){Cr(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Cr(e,r,l)}}var s=e.return;try{Rw(e)}catch(l){Cr(e,s,l)}break;case 5:var a=e.return;try{Rw(e)}catch(l){Cr(e,a,l)}}}catch(l){Cr(e,e.return,l)}if(e===n){At=null;break}var o=e.sibling;if(o!==null){o.return=e.return,At=o;break}At=e.return}}var S$=Math.ceil,N1=bu.ReactCurrentDispatcher,j5=bu.ReactCurrentOwner,jo=bu.ReactCurrentBatchConfig,Xn=0,bs=null,Xr=null,Ps=0,io=0,_p=zd(0),ls=0,e0=null,ch=0,Ix=0,B5=0,ym=null,Na=null,U5=0,Yp=1/0,Vc=null,D1=!1,Dw=null,Cd=null,Yy=!1,pd=null,O1=0,vm=0,Ow=null,Vv=-1,Yv=0;function fa(){return Xn&6?jr():Vv!==-1?Vv:Vv=jr()}function Id(n){return n.mode&1?Xn&2&&Ps!==0?Ps&-Ps:r$.transition!==null?(Yv===0&&(Yv=CP()),Yv):(n=Si,n!==0||(n=window.event,n=n===void 0?16:OP(n.type)),n):1}function xl(n,e,t,i){if(50<vm)throw vm=0,Ow=null,Error(st(185));R0(n,t,i),(!(Xn&2)||n!==bs)&&(n===bs&&(!(Xn&2)&&(Ix|=t),ls===4&&ud(n,Ps)),Ba(n,i),t===1&&Xn===0&&!(e.mode&1)&&(Yp=jr()+500,Tx&&Gd()))}function Ba(n,e){var t=n.callbackNode;rU(n,e);var i=v1(n,n===bs?Ps:0);if(i===0)t!==null&&HA(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&HA(t),e===1)n.tag===0?i$(DL.bind(null,n)):eN(DL.bind(null,n)),ZU(function(){!(Xn&6)&&Gd()}),t=null;else{switch(IP(i)){case 1:t=f5;break;case 4:t=AP;break;case 16:t=y1;break;case 536870912:t=LP;break;default:t=y1}t=JN(t,GN.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function GN(n,e){if(Vv=-1,Yv=0,Xn&6)throw Error(st(327));var t=n.callbackNode;if(Pp()&&n.callbackNode!==t)return null;var i=v1(n,n===bs?Ps:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=M1(n,i);else{e=i;var r=Xn;Xn|=2;var s=YN();(bs!==n||Ps!==e)&&(Vc=null,Yp=jr()+500,qf(n,e));do try{E$();break}catch(o){VN(n,o)}while(!0);T5(),N1.current=s,Xn=r,Xr!==null?e=0:(bs=null,Ps=0,e=ls)}if(e!==0){if(e===2&&(r=lw(n),r!==0&&(i=r,e=Mw(n,r))),e===1)throw t=e0,qf(n,0),ud(n,i),Ba(n,jr()),t;if(e===6)ud(n,i);else{if(r=n.current.alternate,!(i&30)&&!w$(r)&&(e=M1(n,i),e===2&&(s=lw(n),s!==0&&(i=s,e=Mw(n,s))),e===1))throw t=e0,qf(n,0),ud(n,i),Ba(n,jr()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(st(345));case 2:kf(n,Na,Vc);break;case 3:if(ud(n,i),(i&130023424)===i&&(e=U5+500-jr(),10<e)){if(v1(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){fa(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=mw(kf.bind(null,n,Na,Vc),e);break}kf(n,Na,Vc);break;case 4:if(ud(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var a=31-vl(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=jr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*S$(i/1960))-i,10<i){n.timeoutHandle=mw(kf.bind(null,n,Na,Vc),i);break}kf(n,Na,Vc);break;case 5:kf(n,Na,Vc);break;default:throw Error(st(329))}}}return Ba(n,jr()),n.callbackNode===t?GN.bind(null,n):null}function Mw(n,e){var t=ym;return n.current.memoizedState.isDehydrated&&(qf(n,e).flags|=256),n=M1(n,e),n!==2&&(e=Na,Na=t,e!==null&&Fw(e)),n}function Fw(n){Na===null?Na=n:Na.push.apply(Na,n)}function w$(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Sl(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ud(n,e){for(e&=~B5,e&=~Ix,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-vl(e),i=1<<t;n[t]=-1,e&=~i}}function DL(n){if(Xn&6)throw Error(st(327));Pp();var e=v1(n,0);if(!(e&1))return Ba(n,jr()),null;var t=M1(n,e);if(n.tag!==0&&t===2){var i=lw(n);i!==0&&(e=i,t=Mw(n,i))}if(t===1)throw t=e0,qf(n,0),ud(n,e),Ba(n,jr()),t;if(t===6)throw Error(st(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,kf(n,Na,Vc),Ba(n,jr()),null}function $5(n,e){var t=Xn;Xn|=1;try{return n(e)}finally{Xn=t,Xn===0&&(Yp=jr()+500,Tx&&Gd())}}function uh(n){pd!==null&&pd.tag===0&&!(Xn&6)&&Pp();var e=Xn;Xn|=1;var t=jo.transition,i=Si;try{if(jo.transition=null,Si=1,n)return n()}finally{Si=i,jo.transition=t,Xn=e,!(Xn&6)&&Gd()}}function H5(){io=_p.current,zi(_p)}function qf(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,JU(t)),Xr!==null)for(t=Xr.return;t!==null;){var i=t;switch(w5(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&_1();break;case 3:Gp(),zi(Fa),zi(na),R5();break;case 5:k5(i);break;case 4:Gp();break;case 13:zi(gr);break;case 19:zi(gr);break;case 10:A5(i.type._context);break;case 22:case 23:H5()}t=t.return}if(bs=n,Xr=n=kd(n.current,null),Ps=io=e,ls=0,e0=null,B5=Ix=ch=0,Na=ym=null,Uf!==null){for(e=0;e<Uf.length;e++)if(t=Uf[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}t.pending=i}Uf=null}return n}function VN(n,e){do{var t=Xr;try{if(T5(),Wv.current=P1,R1){for(var i=mr.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}R1=!1}if(lh=0,ys=ss=mr=null,gm=!1,Qm=0,j5.current=null,t===null||t.return===null){ls=1,e0=e,Xr=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=Ps,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=SL(a);if(p!==null){p.flags&=-257,wL(p,a,o,s,e),p.mode&1&&bL(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){bL(s,c,e),W5();break e}l=Error(st(426))}}else if(ir&&o.mode&1){var b=SL(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),wL(b,a,o,s,e),_5(Vp(l,o));break e}}s=l=Vp(l,o),ls!==4&&(ls=2),ym===null?ym=[s]:ym.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=IN(s,l,e);pL(s,x);break e;case 1:o=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Cd===null||!Cd.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=kN(s,o,e);pL(s,A);break e}}s=s.return}while(s!==null)}KN(t)}catch(C){e=C,Xr===t&&t!==null&&(Xr=t=t.return);continue}break}while(!0)}function YN(){var n=N1.current;return N1.current=P1,n===null?P1:n}function W5(){(ls===0||ls===3||ls===2)&&(ls=4),bs===null||!(ch&268435455)&&!(Ix&268435455)||ud(bs,Ps)}function M1(n,e){var t=Xn;Xn|=2;var i=YN();(bs!==n||Ps!==e)&&(Vc=null,qf(n,e));do try{_$();break}catch(r){VN(n,r)}while(!0);if(T5(),Xn=t,N1.current=i,Xr!==null)throw Error(st(261));return bs=null,Ps=0,ls}function _$(){for(;Xr!==null;)qN(Xr)}function E$(){for(;Xr!==null&&!K7();)qN(Xr)}function qN(n){var e=QN(n.alternate,n,io);n.memoizedProps=n.pendingProps,e===null?KN(n):Xr=e,j5.current=null}function KN(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=y$(t,e),t!==null){t.flags&=32767,Xr=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ls=6,Xr=null;return}}else if(t=m$(t,e,io),t!==null){Xr=t;return}if(e=e.sibling,e!==null){Xr=e;return}Xr=e=n}while(e!==null);ls===0&&(ls=5)}function kf(n,e,t){var i=Si,r=jo.transition;try{jo.transition=null,Si=1,T$(n,e,t,i)}finally{jo.transition=r,Si=i}return null}function T$(n,e,t,i){do Pp();while(pd!==null);if(Xn&6)throw Error(st(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(st(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(sU(n,s),n===bs&&(Xr=bs=null,Ps=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Yy||(Yy=!0,JN(y1,function(){return Pp(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=jo.transition,jo.transition=null;var a=Si;Si=1;var o=Xn;Xn|=4,j5.current=null,x$(n,t),WN(t,n),GU(pw),x1=!!hw,pw=hw=null,n.current=t,b$(t),X7(),Xn=o,Si=a,jo.transition=s}else n.current=t;if(Yy&&(Yy=!1,pd=n,O1=r),s=n.pendingLanes,s===0&&(Cd=null),Z7(t.stateNode),Ba(n,jr()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(D1)throw D1=!1,n=Dw,Dw=null,n;return O1&1&&n.tag!==0&&Pp(),s=n.pendingLanes,s&1?n===Ow?vm++:(vm=0,Ow=n):vm=0,Gd(),null}function Pp(){if(pd!==null){var n=IP(O1),e=jo.transition,t=Si;try{if(jo.transition=null,Si=16>n?16:n,pd===null)var i=!1;else{if(n=pd,pd=null,O1=0,Xn&6)throw Error(st(331));var r=Xn;for(Xn|=4,At=n.current;At!==null;){var s=At,a=s.child;if(At.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(At=c;At!==null;){var u=At;switch(u.tag){case 0:case 11:case 15:mm(8,u,s)}var d=u.child;if(d!==null)d.return=u,At=d;else for(;At!==null;){u=At;var h=u.sibling,p=u.return;if(UN(u),u===c){At=null;break}if(h!==null){h.return=p,At=h;break}At=p}}}var m=s.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}At=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,At=a;else e:for(;At!==null;){if(s=At,s.flags&2048)switch(s.tag){case 0:case 11:case 15:mm(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,At=x;break e}At=s.return}}var w=n.current;for(At=w;At!==null;){a=At;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,At=S;else e:for(a=w;At!==null;){if(o=At,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Cx(9,o)}}catch(C){Cr(o,o.return,C)}if(o===a){At=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,At=A;break e}At=o.return}}if(Xn=r,Gd(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(bx,n)}catch{}i=!0}return i}finally{Si=t,jo.transition=e}}return!1}function OL(n,e,t){e=Vp(t,e),e=IN(n,e,1),n=Ld(n,e,1),e=fa(),n!==null&&(R0(n,1,e),Ba(n,e))}function Cr(n,e,t){if(n.tag===3)OL(n,n,t);else for(;e!==null;){if(e.tag===3){OL(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Cd===null||!Cd.has(i))){n=Vp(t,n),n=kN(e,n,1),e=Ld(e,n,1),n=fa(),e!==null&&(R0(e,1,n),Ba(e,n));break}}e=e.return}}function A$(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=fa(),n.pingedLanes|=n.suspendedLanes&t,bs===n&&(Ps&t)===t&&(ls===4||ls===3&&(Ps&130023424)===Ps&&500>jr()-U5?qf(n,0):B5|=t),Ba(n,e)}function XN(n,e){e===0&&(n.mode&1?(e=Fy,Fy<<=1,!(Fy&130023424)&&(Fy=4194304)):e=1);var t=fa();n=pu(n,e),n!==null&&(R0(n,e,t),Ba(n,t))}function L$(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),XN(n,t)}function C$(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(st(314))}i!==null&&i.delete(e),XN(n,t)}var QN;QN=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Fa.current)Ma=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ma=!1,g$(n,e,t);Ma=!!(n.flags&131072)}else Ma=!1,ir&&e.flags&1048576&&tN(e,A1,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Gv(n,e),n=e.pendingProps;var r=Hp(e,na.current);Rp(e,t),r=N5(null,e,i,n,r,t);var s=D5();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ja(i)?(s=!0,E1(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,C5(e),r.updater=Lx,e.stateNode=r,r._reactInternals=e,_w(e,i,n,t),e=Aw(null,e,i,!0,s,t)):(e.tag=0,ir&&s&&S5(e),da(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Gv(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=k$(i),n=ul(i,n),r){case 0:e=Tw(null,e,i,n,t);break e;case 1:e=TL(null,e,i,n,t);break e;case 11:e=_L(null,e,i,n,t);break e;case 14:e=EL(null,e,i,ul(i.type,n),t);break e}throw Error(st(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ul(i,r),Tw(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ul(i,r),TL(n,e,i,r,t);case 3:e:{if(DN(e),n===null)throw Error(st(387));i=e.pendingProps,s=e.memoizedState,r=s.element,oN(n,e),I1(e,i,null,t);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Vp(Error(st(423)),e),e=AL(n,e,i,t,r);break e}else if(i!==r){r=Vp(Error(st(424)),e),e=AL(n,e,i,t,r);break e}else for(lo=Ad(e.stateNode.containerInfo.firstChild),uo=e,ir=!0,pl=null,t=sN(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Wp(),i===r){e=gu(n,e,t);break e}da(n,e,i,t)}e=e.child}return e;case 5:return lN(e),n===null&&bw(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,a=r.children,gw(i,r)?a=null:s!==null&&gw(i,s)&&(e.flags|=32),NN(n,e),da(n,e,a,t),e.child;case 6:return n===null&&bw(e),null;case 13:return ON(n,e,t);case 4:return I5(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=zp(e,null,i,t):da(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ul(i,r),_L(n,e,i,r,t);case 7:return da(n,e,e.pendingProps,t),e.child;case 8:return da(n,e,e.pendingProps.children,t),e.child;case 12:return da(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,ji(L1,i._currentValue),i._currentValue=a,s!==null)if(Sl(s.value,a)){if(s.children===r.children&&!Fa.current){e=gu(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=lu(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Sw(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(st(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Sw(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}da(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Rp(e,t),r=Bo(r),i=i(r),e.flags|=1,da(n,e,i,t),e.child;case 14:return i=e.type,r=ul(i,e.pendingProps),r=ul(i.type,r),EL(n,e,i,r,t);case 15:return RN(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ul(i,r),Gv(n,e),e.tag=1,ja(i)?(n=!0,E1(e)):n=!1,Rp(e,t),CN(e,i,r),_w(e,i,r,t),Aw(null,e,i,!0,n,t);case 19:return MN(n,e,t);case 22:return PN(n,e,t)}throw Error(st(156,e.tag))};function JN(n,e){return TP(n,e)}function I$(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fo(n,e,t,i){return new I$(n,e,t,i)}function z5(n){return n=n.prototype,!(!n||!n.isReactComponent)}function k$(n){if(typeof n=="function")return z5(n)?1:0;if(n!=null){if(n=n.$$typeof,n===c5)return 11;if(n===u5)return 14}return 2}function kd(n,e){var t=n.alternate;return t===null?(t=Fo(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function qv(n,e,t,i,r,s){var a=2;if(i=n,typeof n=="function")z5(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case hp:return Kf(t.children,r,s,e);case l5:a=8,r|=8;break;case YS:return n=Fo(12,t,e,r|2),n.elementType=YS,n.lanes=s,n;case qS:return n=Fo(13,t,e,r),n.elementType=qS,n.lanes=s,n;case KS:return n=Fo(19,t,e,r),n.elementType=KS,n.lanes=s,n;case lP:return kx(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case aP:a=10;break e;case oP:a=9;break e;case c5:a=11;break e;case u5:a=14;break e;case id:a=16,i=null;break e}throw Error(st(130,n==null?n:typeof n,""))}return e=Fo(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Kf(n,e,t,i){return n=Fo(7,n,i,e),n.lanes=t,n}function kx(n,e,t,i){return n=Fo(22,n,i,e),n.elementType=lP,n.lanes=t,n.stateNode={isHidden:!1},n}function N2(n,e,t){return n=Fo(6,n,null,e),n.lanes=t,n}function D2(n,e,t){return e=Fo(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function R$(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=p2(0),this.expirationTimes=p2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p2(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function G5(n,e,t,i,r,s,a,o,l){return n=new R$(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Fo(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},C5(s),n}function P$(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fp,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function ZN(n){if(!n)return Md;n=n._reactInternals;e:{if(mh(n)!==n||n.tag!==1)throw Error(st(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ja(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(st(171))}if(n.tag===1){var t=n.type;if(ja(t))return ZP(n,t,e)}return e}function eD(n,e,t,i,r,s,a,o,l){return n=G5(t,i,!0,n,r,s,a,o,l),n.context=ZN(null),t=n.current,i=fa(),r=Id(t),s=lu(i,r),s.callback=e??null,Ld(t,s,r),n.current.lanes=r,R0(n,r,i),Ba(n,i),n}function Rx(n,e,t,i){var r=e.current,s=fa(),a=Id(r);return t=ZN(t),e.context===null?e.context=t:e.pendingContext=t,e=lu(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ld(r,e,a),n!==null&&(xl(n,r,a,s),Hv(n,r,a)),a}function F1(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ML(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function V5(n,e){ML(n,e),(n=n.alternate)&&ML(n,e)}function N$(){return null}var tD=typeof reportError=="function"?reportError:function(n){console.error(n)};function Y5(n){this._internalRoot=n}Px.prototype.render=Y5.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(st(409));Rx(n,e,null,null)};Px.prototype.unmount=Y5.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;uh(function(){Rx(null,n,null,null)}),e[hu]=null}};function Px(n){this._internalRoot=n}Px.prototype.unstable_scheduleHydration=function(n){if(n){var e=PP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<cd.length&&e!==0&&e<cd[t].priority;t++);cd.splice(t,0,n),t===0&&DP(n)}};function q5(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Nx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function FL(){}function D$(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=F1(a);s.call(c)}}var a=eD(e,i,n,0,null,!1,!1,"",FL);return n._reactRootContainer=a,n[hu]=a.current,Vm(n.nodeType===8?n.parentNode:n),uh(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var c=F1(l);o.call(c)}}var l=G5(n,0,!1,null,null,!1,!1,"",FL);return n._reactRootContainer=l,n[hu]=l.current,Vm(n.nodeType===8?n.parentNode:n),uh(function(){Rx(e,l,t,i)}),l}function Dx(n,e,t,i,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=F1(a);o.call(l)}}Rx(e,a,n,r)}else a=D$(t,e,n,r,i);return F1(a)}kP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=em(e.pendingLanes);t!==0&&(h5(e,t|1),Ba(e,jr()),!(Xn&6)&&(Yp=jr()+500,Gd()))}break;case 13:uh(function(){var i=pu(n,1);if(i!==null){var r=fa();xl(i,n,1,r)}}),V5(n,1)}};p5=function(n){if(n.tag===13){var e=pu(n,134217728);if(e!==null){var t=fa();xl(e,n,134217728,t)}V5(n,134217728)}};RP=function(n){if(n.tag===13){var e=Id(n),t=pu(n,e);if(t!==null){var i=fa();xl(t,n,e,i)}V5(n,e)}};PP=function(){return Si};NP=function(n,e){var t=Si;try{return Si=n,e()}finally{Si=t}};sw=function(n,e,t){switch(e){case"input":if(JS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Ex(i);if(!r)throw Error(st(90));uP(i),JS(i,r)}}}break;case"textarea":fP(n,t);break;case"select":e=t.value,e!=null&&Lp(n,!!t.multiple,e,!1)}};xP=$5;bP=uh;var O$={usingClientEntryPoint:!1,Events:[N0,yp,Ex,yP,vP,$5]},jg={findFiberByHostInstance:Bf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M$={bundleType:jg.bundleType,version:jg.version,rendererPackageName:jg.rendererPackageName,rendererConfig:jg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bu.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_P(n),n===null?null:n.stateNode},findFiberByHostInstance:jg.findFiberByHostInstance||N$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qy.isDisabled&&qy.supportsFiber)try{bx=qy.inject(M$),lc=qy}catch{}}go.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O$;go.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q5(e))throw Error(st(200));return P$(n,e,null,t)};go.createRoot=function(n,e){if(!q5(n))throw Error(st(299));var t=!1,i="",r=tD;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=G5(n,1,!1,null,null,t,!1,i,r),n[hu]=e.current,Vm(n.nodeType===8?n.parentNode:n),new Y5(e)};go.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(st(188)):(n=Object.keys(n).join(","),Error(st(268,n)));return n=_P(e),n=n===null?null:n.stateNode,n};go.flushSync=function(n){return uh(n)};go.hydrate=function(n,e,t){if(!Nx(e))throw Error(st(200));return Dx(null,n,e,!0,t)};go.hydrateRoot=function(n,e,t){if(!q5(n))throw Error(st(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",a=tD;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=eD(e,null,n,1,t??null,r,!1,s,a),n[hu]=e.current,Vm(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Px(e)};go.render=function(n,e,t){if(!Nx(e))throw Error(st(200));return Dx(null,n,e,!1,t)};go.unmountComponentAtNode=function(n){if(!Nx(n))throw Error(st(40));return n._reactRootContainer?(uh(function(){Dx(null,null,n,!1,function(){n._reactRootContainer=null,n[hu]=null})}),!0):!1};go.unstable_batchedUpdates=$5;go.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Nx(t))throw Error(st(200));if(n==null||n._reactInternals===void 0)throw Error(st(38));return Dx(n,e,t,!1,i)};go.version="18.3.1-next-f1338f8080-20240426";function nD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nD)}catch(n){console.error(n)}}nD(),nP.exports=go;var iD=nP.exports;const Ep=I0(iD);var jL=iD;GS.createRoot=jL.createRoot,GS.hydrateRoot=jL.hydrateRoot;function rD(n,e){return function(){return n.apply(e,arguments)}}const{toString:F$}=Object.prototype,{getPrototypeOf:K5}=Object,{iterator:Ox,toStringTag:sD}=Symbol,Mx=(n=>e=>{const t=F$.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Tl=n=>(n=n.toLowerCase(),e=>Mx(e)===n),Fx=n=>e=>typeof e===n,{isArray:rg}=Array,t0=Fx("undefined");function j$(n){return n!==null&&!t0(n)&&n.constructor!==null&&!t0(n.constructor)&&Ua(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const aD=Tl("ArrayBuffer");function B$(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&aD(n.buffer),e}const U$=Fx("string"),Ua=Fx("function"),oD=Fx("number"),jx=n=>n!==null&&typeof n=="object",$$=n=>n===!0||n===!1,Kv=n=>{if(Mx(n)!=="object")return!1;const e=K5(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(sD in n)&&!(Ox in n)},H$=Tl("Date"),W$=Tl("File"),z$=Tl("Blob"),G$=Tl("FileList"),V$=n=>jx(n)&&Ua(n.pipe),Y$=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Ua(n.append)&&((e=Mx(n))==="formdata"||e==="object"&&Ua(n.toString)&&n.toString()==="[object FormData]"))},q$=Tl("URLSearchParams"),[K$,X$,Q$,J$]=["ReadableStream","Request","Response","Headers"].map(Tl),Z$=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function O0(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),rg(n))for(i=0,r=n.length;i<r;i++)e.call(null,n[i],i,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length;let o;for(i=0;i<a;i++)o=s[i],e.call(null,n[o],o,n)}}function lD(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,r;for(;i-- >0;)if(r=t[i],e===r.toLowerCase())return r;return null}const Hf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cD=n=>!t0(n)&&n!==Hf;function jw(){const{caseless:n}=cD(this)&&this||{},e={},t=(i,r)=>{const s=n&&lD(e,r)||r;Kv(e[s])&&Kv(i)?e[s]=jw(e[s],i):Kv(i)?e[s]=jw({},i):rg(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&O0(arguments[i],t);return e}const e9=(n,e,t,{allOwnKeys:i}={})=>(O0(e,(r,s)=>{t&&Ua(r)?n[s]=rD(r,t):n[s]=r},{allOwnKeys:i}),n),t9=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),n9=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},i9=(n,e,t,i)=>{let r,s,a;const o={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)a=r[s],(!i||i(a,n,e))&&!o[a]&&(e[a]=n[a],o[a]=!0);n=t!==!1&&K5(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},r9=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},s9=n=>{if(!n)return null;if(rg(n))return n;let e=n.length;if(!oD(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},a9=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&K5(Uint8Array)),o9=(n,e)=>{const i=(n&&n[Ox]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(n,s[0],s[1])}},l9=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},c9=Tl("HTMLFormElement"),u9=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,r){return i.toUpperCase()+r}),BL=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),d9=Tl("RegExp"),uD=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};O0(t,(r,s)=>{let a;(a=e(r,s,n))!==!1&&(i[s]=a||r)}),Object.defineProperties(n,i)},f9=n=>{uD(n,(e,t)=>{if(Ua(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(Ua(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},h9=(n,e)=>{const t={},i=r=>{r.forEach(s=>{t[s]=!0})};return rg(n)?i(n):i(String(n).split(e)),t},p9=()=>{},g9=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function m9(n){return!!(n&&Ua(n.append)&&n[sD]==="FormData"&&n[Ox])}const y9=n=>{const e=new Array(10),t=(i,r)=>{if(jx(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=rg(i)?[]:{};return O0(i,(a,o)=>{const l=t(a,r+1);!t0(l)&&(s[o]=l)}),e[r]=void 0,s}}return i};return t(n,0)},v9=Tl("AsyncFunction"),x9=n=>n&&(jx(n)||Ua(n))&&Ua(n.then)&&Ua(n.catch),dD=((n,e)=>n?setImmediate:e?((t,i)=>(Hf.addEventListener("message",({source:r,data:s})=>{r===Hf&&s===t&&i.length&&i.shift()()},!1),r=>{i.push(r),Hf.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ua(Hf.postMessage)),b9=typeof queueMicrotask<"u"?queueMicrotask.bind(Hf):typeof process<"u"&&process.nextTick||dD,S9=n=>n!=null&&Ua(n[Ox]),Fe={isArray:rg,isArrayBuffer:aD,isBuffer:j$,isFormData:Y$,isArrayBufferView:B$,isString:U$,isNumber:oD,isBoolean:$$,isObject:jx,isPlainObject:Kv,isReadableStream:K$,isRequest:X$,isResponse:Q$,isHeaders:J$,isUndefined:t0,isDate:H$,isFile:W$,isBlob:z$,isRegExp:d9,isFunction:Ua,isStream:V$,isURLSearchParams:q$,isTypedArray:a9,isFileList:G$,forEach:O0,merge:jw,extend:e9,trim:Z$,stripBOM:t9,inherits:n9,toFlatObject:i9,kindOf:Mx,kindOfTest:Tl,endsWith:r9,toArray:s9,forEachEntry:o9,matchAll:l9,isHTMLForm:c9,hasOwnProperty:BL,hasOwnProp:BL,reduceDescriptors:uD,freezeMethods:f9,toObjectSet:h9,toCamelCase:u9,noop:p9,toFiniteNumber:g9,findKey:lD,global:Hf,isContextDefined:cD,isSpecCompliantForm:m9,toJSONObject:y9,isAsyncFn:v9,isThenable:x9,setImmediate:dD,asap:b9,isIterable:S9};function vn(n,e,t,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}Fe.inherits(vn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fe.toJSONObject(this.config),code:this.code,status:this.status}}});const fD=vn.prototype,hD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{hD[n]={value:n}});Object.defineProperties(vn,hD);Object.defineProperty(fD,"isAxiosError",{value:!0});vn.from=(n,e,t,i,r,s)=>{const a=Object.create(fD);return Fe.toFlatObject(n,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),vn.call(a,n.message,e,t,i,r),a.cause=n,a.name=n.name,s&&Object.assign(a,s),a};const w9=null;function Bw(n){return Fe.isPlainObject(n)||Fe.isArray(n)}function pD(n){return Fe.endsWith(n,"[]")?n.slice(0,-2):n}function UL(n,e,t){return n?n.concat(e).map(function(r,s){return r=pD(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function _9(n){return Fe.isArray(n)&&!n.some(Bw)}const E9=Fe.toFlatObject(Fe,{},null,function(e){return/^is[A-Z]/.test(e)});function Bx(n,e,t){if(!Fe.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Fe.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!Fe.isUndefined(b[v])});const i=t.metaTokens,r=t.visitor||u,s=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Fe.isSpecCompliantForm(e);if(!Fe.isFunction(r))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(Fe.isDate(m))return m.toISOString();if(!l&&Fe.isBlob(m))throw new vn("Blob is not supported. Use a Buffer instead.");return Fe.isArrayBuffer(m)||Fe.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,v,b){let x=m;if(m&&!b&&typeof m=="object"){if(Fe.endsWith(v,"{}"))v=i?v:v.slice(0,-2),m=JSON.stringify(m);else if(Fe.isArray(m)&&_9(m)||(Fe.isFileList(m)||Fe.endsWith(v,"[]"))&&(x=Fe.toArray(m)))return v=pD(v),x.forEach(function(S,A){!(Fe.isUndefined(S)||S===null)&&e.append(a===!0?UL([v],A,s):a===null?v:v+"[]",c(S))}),!1}return Bw(m)?!0:(e.append(UL(b,v,s),c(m)),!1)}const d=[],h=Object.assign(E9,{defaultVisitor:u,convertValue:c,isVisitable:Bw});function p(m,v){if(!Fe.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(m),Fe.forEach(m,function(x,w){(!(Fe.isUndefined(x)||x===null)&&r.call(e,x,Fe.isString(w)?w.trim():w,v,h))===!0&&p(x,v?v.concat(w):[w])}),d.pop()}}if(!Fe.isObject(n))throw new TypeError("data must be an object");return p(n),e}function $L(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function X5(n,e){this._pairs=[],n&&Bx(n,this,e)}const gD=X5.prototype;gD.append=function(e,t){this._pairs.push([e,t])};gD.toString=function(e){const t=e?function(i){return e.call(this,i,$L)}:$L;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function T9(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function mD(n,e,t){if(!e)return n;const i=t&&t.encode||T9;Fe.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let s;if(r?s=r(e,t):s=Fe.isURLSearchParams(e)?e.toString():new X5(e,t).toString(i),s){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class HL{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fe.forEach(this.handlers,function(i){i!==null&&e(i)})}}const yD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},A9=typeof URLSearchParams<"u"?URLSearchParams:X5,L9=typeof FormData<"u"?FormData:null,C9=typeof Blob<"u"?Blob:null,I9={isBrowser:!0,classes:{URLSearchParams:A9,FormData:L9,Blob:C9},protocols:["http","https","file","blob","url","data"]},Q5=typeof window<"u"&&typeof document<"u",Uw=typeof navigator=="object"&&navigator||void 0,k9=Q5&&(!Uw||["ReactNative","NativeScript","NS"].indexOf(Uw.product)<0),R9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",P9=Q5&&window.location.href||"http://localhost",N9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Q5,hasStandardBrowserEnv:k9,hasStandardBrowserWebWorkerEnv:R9,navigator:Uw,origin:P9},Symbol.toStringTag,{value:"Module"})),Js={...N9,...I9};function D9(n,e){return Bx(n,new Js.classes.URLSearchParams,Object.assign({visitor:function(t,i,r,s){return Js.isNode&&Fe.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function O9(n){return Fe.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function M9(n){const e={},t=Object.keys(n);let i;const r=t.length;let s;for(i=0;i<r;i++)s=t[i],e[s]=n[s];return e}function vD(n){function e(t,i,r,s){let a=t[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=t.length;return a=!a&&Fe.isArray(r)?r.length:a,l?(Fe.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!o):((!r[a]||!Fe.isObject(r[a]))&&(r[a]=[]),e(t,i,r[a],s)&&Fe.isArray(r[a])&&(r[a]=M9(r[a])),!o)}if(Fe.isFormData(n)&&Fe.isFunction(n.entries)){const t={};return Fe.forEachEntry(n,(i,r)=>{e(O9(i),r,t,0)}),t}return null}function F9(n,e,t){if(Fe.isString(n))try{return(e||JSON.parse)(n),Fe.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const M0={transitional:yD,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,s=Fe.isObject(e);if(s&&Fe.isHTMLForm(e)&&(e=new FormData(e)),Fe.isFormData(e))return r?JSON.stringify(vD(e)):e;if(Fe.isArrayBuffer(e)||Fe.isBuffer(e)||Fe.isStream(e)||Fe.isFile(e)||Fe.isBlob(e)||Fe.isReadableStream(e))return e;if(Fe.isArrayBufferView(e))return e.buffer;if(Fe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return D9(e,this.formSerializer).toString();if((o=Fe.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Bx(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),F9(e)):e}],transformResponse:[function(e){const t=this.transitional||M0.transitional,i=t&&t.forcedJSONParsing,r=this.responseType==="json";if(Fe.isResponse(e)||Fe.isReadableStream(e))return e;if(e&&Fe.isString(e)&&(i&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?vn.from(o,vn.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Js.classes.FormData,Blob:Js.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fe.forEach(["delete","get","head","post","put","patch"],n=>{M0.headers[n]={}});const j9=Fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),B9=n=>{const e={};let t,i,r;return n&&n.split(`
`).forEach(function(a){r=a.indexOf(":"),t=a.substring(0,r).trim().toLowerCase(),i=a.substring(r+1).trim(),!(!t||e[t]&&j9[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},WL=Symbol("internals");function Bg(n){return n&&String(n).trim().toLowerCase()}function Xv(n){return n===!1||n==null?n:Fe.isArray(n)?n.map(Xv):String(n)}function U9(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const $9=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function O2(n,e,t,i,r){if(Fe.isFunction(i))return i.call(this,e,t);if(r&&(e=t),!!Fe.isString(e)){if(Fe.isString(i))return e.indexOf(i)!==-1;if(Fe.isRegExp(i))return i.test(e)}}function H9(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function W9(n,e){const t=Fe.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(r,s,a){return this[i].call(this,e,r,s,a)},configurable:!0})})}let $a=class{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function s(o,l,c){const u=Bg(l);if(!u)throw new Error("header name must be a non-empty string");const d=Fe.findKey(r,u);(!d||r[d]===void 0||c===!0||c===void 0&&r[d]!==!1)&&(r[d||l]=Xv(o))}const a=(o,l)=>Fe.forEach(o,(c,u)=>s(c,u,l));if(Fe.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Fe.isString(e)&&(e=e.trim())&&!$9(e))a(B9(e),t);else if(Fe.isObject(e)&&Fe.isIterable(e)){let o={},l,c;for(const u of e){if(!Fe.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[c=u[0]]=(l=o[c])?Fe.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}a(o,t)}else e!=null&&s(t,e,i);return this}get(e,t){if(e=Bg(e),e){const i=Fe.findKey(this,e);if(i){const r=this[i];if(!t)return r;if(t===!0)return U9(r);if(Fe.isFunction(t))return t.call(this,r,i);if(Fe.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Bg(e),e){const i=Fe.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||O2(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let r=!1;function s(a){if(a=Bg(a),a){const o=Fe.findKey(i,a);o&&(!t||O2(i,i[o],o,t))&&(delete i[o],r=!0)}}return Fe.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const s=t[i];(!e||O2(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,i={};return Fe.forEach(this,(r,s)=>{const a=Fe.findKey(i,s);if(a){t[a]=Xv(r),delete t[s];return}const o=e?H9(s):String(s).trim();o!==s&&delete t[s],t[o]=Xv(r),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Fe.forEach(this,(i,r)=>{i!=null&&i!==!1&&(t[r]=e&&Fe.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[WL]=this[WL]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=Bg(a);i[o]||(W9(r,a),i[o]=!0)}return Fe.isArray(e)?e.forEach(s):s(e),this}};$a.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fe.reduceDescriptors($a.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});Fe.freezeMethods($a);function M2(n,e){const t=this||M0,i=e||t,r=$a.from(i.headers);let s=i.data;return Fe.forEach(n,function(o){s=o.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function xD(n){return!!(n&&n.__CANCEL__)}function sg(n,e,t){vn.call(this,n??"canceled",vn.ERR_CANCELED,e,t),this.name="CanceledError"}Fe.inherits(sg,vn,{__CANCEL__:!0});function bD(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new vn("Request failed with status code "+t.status,[vn.ERR_BAD_REQUEST,vn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function z9(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function G9(n,e){n=n||10;const t=new Array(n),i=new Array(n);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[s];a||(a=c),t[r]=l,i[r]=c;let d=s,h=0;for(;d!==r;)h+=t[d++],d=d%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),c-a<e)return;const p=u&&c-u;return p?Math.round(h*1e3/p):void 0}}function V9(n,e){let t=0,i=1e3/e,r,s;const a=(c,u=Date.now())=>{t=u,r=null,s&&(clearTimeout(s),s=null),n.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=i?a(c,u):(r=c,s||(s=setTimeout(()=>{s=null,a(r)},i-d)))},()=>r&&a(r)]}const j1=(n,e,t=3)=>{let i=0;const r=G9(50,250);return V9(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-i,c=r(l),u=a<=o;i=a;const d={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-a)/c:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};n(d)},t)},zL=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},GL=n=>(...e)=>Fe.asap(()=>n(...e)),Y9=Js.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Js.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Js.origin),Js.navigator&&/(msie|trident)/i.test(Js.navigator.userAgent)):()=>!0,q9=Js.hasStandardBrowserEnv?{write(n,e,t,i,r,s){const a=[n+"="+encodeURIComponent(e)];Fe.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),Fe.isString(i)&&a.push("path="+i),Fe.isString(r)&&a.push("domain="+r),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function K9(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function X9(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function SD(n,e,t){let i=!K9(e);return n&&(i||t==!1)?X9(n,e):e}const VL=n=>n instanceof $a?{...n}:n;function dh(n,e){e=e||{};const t={};function i(c,u,d,h){return Fe.isPlainObject(c)&&Fe.isPlainObject(u)?Fe.merge.call({caseless:h},c,u):Fe.isPlainObject(u)?Fe.merge({},u):Fe.isArray(u)?u.slice():u}function r(c,u,d,h){if(Fe.isUndefined(u)){if(!Fe.isUndefined(c))return i(void 0,c,d,h)}else return i(c,u,d,h)}function s(c,u){if(!Fe.isUndefined(u))return i(void 0,u)}function a(c,u){if(Fe.isUndefined(u)){if(!Fe.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function o(c,u,d){if(d in e)return i(c,u);if(d in n)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u,d)=>r(VL(c),VL(u),d,!0)};return Fe.forEach(Object.keys(Object.assign({},n,e)),function(u){const d=l[u]||r,h=d(n[u],e[u],u);Fe.isUndefined(h)&&d!==o||(t[u]=h)}),t}const wD=n=>{const e=dh({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:a,auth:o}=e;e.headers=a=$a.from(a),e.url=mD(SD(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(Fe.isFormData(t)){if(Js.hasStandardBrowserEnv||Js.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Js.hasStandardBrowserEnv&&(i&&Fe.isFunction(i)&&(i=i(e)),i||i!==!1&&Y9(e.url))){const c=r&&s&&q9.read(s);c&&a.set(r,c)}return e},Q9=typeof XMLHttpRequest<"u",J9=Q9&&function(n){return new Promise(function(t,i){const r=wD(n);let s=r.data;const a=$a.from(r.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=r,u,d,h,p,m;function v(){p&&p(),m&&m(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function x(){if(!b)return;const S=$a.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),C={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:n,request:b};bD(function(k){t(k),v()},function(k){i(k),v()},C),b=null}"onloadend"in b?b.onloadend=x:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(x)},b.onabort=function(){b&&(i(new vn("Request aborted",vn.ECONNABORTED,n,b)),b=null)},b.onerror=function(){i(new vn("Network Error",vn.ERR_NETWORK,n,b)),b=null},b.ontimeout=function(){let A=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const C=r.transitional||yD;r.timeoutErrorMessage&&(A=r.timeoutErrorMessage),i(new vn(A,C.clarifyTimeoutError?vn.ETIMEDOUT:vn.ECONNABORTED,n,b)),b=null},s===void 0&&a.setContentType(null),"setRequestHeader"in b&&Fe.forEach(a.toJSON(),function(A,C){b.setRequestHeader(C,A)}),Fe.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),o&&o!=="json"&&(b.responseType=r.responseType),c&&([h,m]=j1(c,!0),b.addEventListener("progress",h)),l&&b.upload&&([d,p]=j1(l),b.upload.addEventListener("progress",d),b.upload.addEventListener("loadend",p)),(r.cancelToken||r.signal)&&(u=S=>{b&&(i(!S||S.type?new sg(null,n,b):S),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const w=z9(r.url);if(w&&Js.protocols.indexOf(w)===-1){i(new vn("Unsupported protocol "+w+":",vn.ERR_BAD_REQUEST,n));return}b.send(s||null)})},Z9=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,r;const s=function(c){if(!r){r=!0,o();const u=c instanceof Error?c:this.reason;i.abort(u instanceof vn?u:new sg(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,s(new vn(`timeout ${e} of ms exceeded`,vn.ETIMEDOUT))},e);const o=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:l}=i;return l.unsubscribe=()=>Fe.asap(o),l}},eH=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,r;for(;i<t;)r=i+e,yield n.slice(i,r),i=r},tH=async function*(n,e){for await(const t of nH(n))yield*eH(t,e)},nH=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},YL=(n,e,t,i)=>{const r=tH(n,e);let s=0,a,o=l=>{a||(a=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await r.next();if(c){o(),l.close();return}let d=u.byteLength;if(t){let h=s+=d;t(h)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),r.return()}},{highWaterMark:2})},Ux=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_D=Ux&&typeof ReadableStream=="function",iH=Ux&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),ED=(n,...e)=>{try{return!!n(...e)}catch{return!1}},rH=_D&&ED(()=>{let n=!1;const e=new Request(Js.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),qL=64*1024,$w=_D&&ED(()=>Fe.isReadableStream(new Response("").body)),B1={stream:$w&&(n=>n.body)};Ux&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!B1[e]&&(B1[e]=Fe.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new vn(`Response type '${e}' is not supported`,vn.ERR_NOT_SUPPORT,i)})})})(new Response);const sH=async n=>{if(n==null)return 0;if(Fe.isBlob(n))return n.size;if(Fe.isSpecCompliantForm(n))return(await new Request(Js.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Fe.isArrayBufferView(n)||Fe.isArrayBuffer(n))return n.byteLength;if(Fe.isURLSearchParams(n)&&(n=n+""),Fe.isString(n))return(await iH(n)).byteLength},aH=async(n,e)=>{const t=Fe.toFiniteNumber(n.getContentLength());return t??sH(e)},oH=Ux&&(async n=>{let{url:e,method:t,data:i,signal:r,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=wD(n);c=c?(c+"").toLowerCase():"text";let p=Z9([r,s&&s.toAbortSignal()],a),m;const v=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(l&&rH&&t!=="get"&&t!=="head"&&(b=await aH(u,i))!==0){let C=new Request(e,{method:"POST",body:i,duplex:"half"}),N;if(Fe.isFormData(i)&&(N=C.headers.get("content-type"))&&u.setContentType(N),C.body){const[k,R]=zL(b,j1(GL(l)));i=YL(C.body,qL,k,R)}}Fe.isString(d)||(d=d?"include":"omit");const x="credentials"in Request.prototype;m=new Request(e,{...h,signal:p,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:x?d:void 0});let w=await fetch(m);const S=$w&&(c==="stream"||c==="response");if($w&&(o||S&&v)){const C={};["status","statusText","headers"].forEach(U=>{C[U]=w[U]});const N=Fe.toFiniteNumber(w.headers.get("content-length")),[k,R]=o&&zL(N,j1(GL(o),!0))||[];w=new Response(YL(w.body,qL,k,()=>{R&&R(),v&&v()}),C)}c=c||"text";let A=await B1[Fe.findKey(B1,c)||"text"](w,n);return!S&&v&&v(),await new Promise((C,N)=>{bD(C,N,{data:A,headers:$a.from(w.headers),status:w.status,statusText:w.statusText,config:n,request:m})})}catch(x){throw v&&v(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new vn("Network Error",vn.ERR_NETWORK,n,m),{cause:x.cause||x}):vn.from(x,x&&x.code,n,m)}}),Hw={http:w9,xhr:J9,fetch:oH};Fe.forEach(Hw,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const KL=n=>`- ${n}`,lH=n=>Fe.isFunction(n)||n===null||n===!1,TD={getAdapter:n=>{n=Fe.isArray(n)?n:[n];const{length:e}=n;let t,i;const r={};for(let s=0;s<e;s++){t=n[s];let a;if(i=t,!lH(t)&&(i=Hw[(a=String(t)).toLowerCase()],i===void 0))throw new vn(`Unknown adapter '${a}'`);if(i)break;r[a||"#"+s]=i}if(!i){const s=Object.entries(r).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(KL).join(`
`):" "+KL(s[0]):"as no adapter specified";throw new vn("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:Hw};function F2(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new sg(null,n)}function XL(n){return F2(n),n.headers=$a.from(n.headers),n.data=M2.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),TD.getAdapter(n.adapter||M0.adapter)(n).then(function(i){return F2(n),i.data=M2.call(n,n.transformResponse,i),i.headers=$a.from(i.headers),i},function(i){return xD(i)||(F2(n),i&&i.response&&(i.response.data=M2.call(n,n.transformResponse,i.response),i.response.headers=$a.from(i.response.headers))),Promise.reject(i)})}const AD="1.9.0",$x={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{$x[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const QL={};$x.transitional=function(e,t,i){function r(s,a){return"[Axios v"+AD+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,o)=>{if(e===!1)throw new vn(r(a," has been removed"+(t?" in "+t:"")),vn.ERR_DEPRECATED);return t&&!QL[a]&&(QL[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,o):!0}};$x.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function cH(n,e,t){if(typeof n!="object")throw new vn("options must be an object",vn.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],a=e[s];if(a){const o=n[s],l=o===void 0||a(o,s,n);if(l!==!0)throw new vn("option "+s+" must be "+l,vn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new vn("Unknown option "+s,vn.ERR_BAD_OPTION)}}const Qv={assertOptions:cH,validators:$x},Wl=Qv.validators;let Xf=class{constructor(e){this.defaults=e||{},this.interceptors={request:new HL,response:new HL}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=dh(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:s}=t;i!==void 0&&Qv.assertOptions(i,{silentJSONParsing:Wl.transitional(Wl.boolean),forcedJSONParsing:Wl.transitional(Wl.boolean),clarifyTimeoutError:Wl.transitional(Wl.boolean)},!1),r!=null&&(Fe.isFunction(r)?t.paramsSerializer={serialize:r}:Qv.assertOptions(r,{encode:Wl.function,serialize:Wl.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Qv.assertOptions(t,{baseUrl:Wl.spelling("baseURL"),withXsrfToken:Wl.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&Fe.merge(s.common,s[t.method]);s&&Fe.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),t.headers=$a.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,d=0,h;if(!l){const m=[XL.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,c),h=m.length,u=Promise.resolve(t);d<h;)u=u.then(m[d++],m[d++]);return u}h=o.length;let p=t;for(d=0;d<h;){const m=o[d++],v=o[d++];try{p=m(p)}catch(b){v.call(this,b);break}}try{u=XL.call(this,p)}catch(m){return Promise.reject(m)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=dh(this.defaults,e);const t=SD(e.baseURL,e.url,e.allowAbsoluteUrls);return mD(t,e.params,e.paramsSerializer)}};Fe.forEach(["delete","get","head","options"],function(e){Xf.prototype[e]=function(t,i){return this.request(dh(i||{},{method:e,url:t,data:(i||{}).data}))}});Fe.forEach(["post","put","patch"],function(e){function t(i){return function(s,a,o){return this.request(dh(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Xf.prototype[e]=t(),Xf.prototype[e+"Form"]=t(!0)});let uH=class LD{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{i.subscribe(o),s=o}).then(r);return a.cancel=function(){i.unsubscribe(s)},a},e(function(s,a,o){i.reason||(i.reason=new sg(s,a,o),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new LD(function(r){e=r}),cancel:e}}};function dH(n){return function(t){return n.apply(null,t)}}function fH(n){return Fe.isObject(n)&&n.isAxiosError===!0}const Ww={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ww).forEach(([n,e])=>{Ww[e]=n});function CD(n){const e=new Xf(n),t=rD(Xf.prototype.request,e);return Fe.extend(t,Xf.prototype,e,{allOwnKeys:!0}),Fe.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return CD(dh(n,r))},t}const Et=CD(M0);Et.Axios=Xf;Et.CanceledError=sg;Et.CancelToken=uH;Et.isCancel=xD;Et.VERSION=AD;Et.toFormData=Bx;Et.AxiosError=vn;Et.Cancel=Et.CanceledError;Et.all=function(e){return Promise.all(e)};Et.spread=dH;Et.isAxiosError=fH;Et.mergeConfig=dh;Et.AxiosHeaders=$a;Et.formToJSON=n=>vD(Fe.isHTMLForm(n)?new FormData(n):n);Et.getAdapter=TD.getAdapter;Et.HttpStatusCode=Ww;Et.default=Et;const{Axios:mce,AxiosError:yce,CanceledError:vce,isCancel:xce,CancelToken:bce,VERSION:Sce,all:wce,Cancel:_ce,isAxiosError:Ece,spread:Tce,toFormData:Ace,AxiosHeaders:Lce,HttpStatusCode:Cce,formToJSON:Ice,getAdapter:kce,mergeConfig:Rce}=Et,hi=B.createContext({});var ID={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=r(s,i(o)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=r(a,o));return a}function r(s,a){return a?s?s+" "+a:s+a:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(ID);var hH=ID.exports;const mi=I0(hH);function zw(){return zw=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},zw.apply(null,arguments)}function kD(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function JL(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function pH(n){var e=gH(n,"string");return typeof e=="symbol"?e:String(e)}function gH(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function mH(n,e,t){var i=B.useRef(n!==void 0),r=B.useState(e),s=r[0],a=r[1],o=n!==void 0,l=i.current;return i.current=o,!o&&l&&s!==e&&a(e),[o?n:s,B.useCallback(function(c){for(var u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];t&&t.apply(void 0,[c].concat(d)),a(c)},[t])]}function yH(n,e){return Object.keys(e).reduce(function(t,i){var r,s=t,a=s[JL(i)],o=s[i],l=kD(s,[JL(i),i].map(pH)),c=e[i],u=mH(o,a,n[c]),d=u[0],h=u[1];return zw({},l,(r={},r[i]=d,r[c]=h,r))},n)}function Gw(n,e){return Gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},Gw(n,e)}function vH(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Gw(n,e)}const xH=["xxl","xl","lg","md","sm","xs"],bH="xs",F0=B.createContext({prefixes:{},breakpoints:xH,minBreakpoint:bH}),{Consumer:Pce,Provider:Nce}=F0;function vr(n,e){const{prefixes:t}=B.useContext(F0);return n||t[e]||e}function SH(){const{breakpoints:n}=B.useContext(F0);return n}function wH(){const{minBreakpoint:n}=B.useContext(F0);return n}function _H(){const{dir:n}=B.useContext(F0);return n==="rtl"}function Hx(n){return n&&n.ownerDocument||document}function EH(n){var e=Hx(n);return e&&e.defaultView||window}function TH(n,e){return EH(n).getComputedStyle(n,e)}var AH=/([A-Z])/g;function LH(n){return n.replace(AH,"-$1").toLowerCase()}var CH=/^ms-/;function Ky(n){return LH(n).replace(CH,"-ms-")}var IH=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function kH(n){return!!(n&&IH.test(n))}function Qf(n,e){var t="",i="";if(typeof e=="string")return n.style.getPropertyValue(Ky(e))||TH(n).getPropertyValue(Ky(e));Object.keys(e).forEach(function(r){var s=e[r];!s&&s!==0?n.style.removeProperty(Ky(r)):kH(r)?i+=r+"("+s+") ":t+=Ky(r)+": "+s+";"}),i&&(t+="transform: "+i+";"),n.style.cssText+=";"+t}var RD={exports:{}},RH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",PH=RH,NH=PH;function PD(){}function ND(){}ND.resetWarningCache=PD;var DH=function(){function n(i,r,s,a,o,l){if(l!==NH){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ND,resetWarningCache:PD};return t.PropTypes=t,t};RD.exports=DH();var OH=RD.exports;const cu=I0(OH),ZL={disabled:!1},DD=gl.createContext(null);var MH=function(e){return e.scrollTop},nm="unmounted",Rf="exited",sd="entering",jf="entered",Vw="exiting",Su=function(n){vH(e,n);function e(i,r){var s;s=n.call(this,i,r)||this;var a=r,o=a&&!a.isMounting?i.enter:i.appear,l;return s.appearStatus=null,i.in?o?(l=Rf,s.appearStatus=sd):l=jf:i.unmountOnExit||i.mountOnEnter?l=nm:l=Rf,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(r,s){var a=r.in;return a&&s.status===nm?{status:Rf}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(r){var s=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==sd&&a!==jf&&(s=sd):(a===sd||a===jf)&&(s=Vw)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var r=this.props.timeout,s,a,o;return s=a=o=r,r!=null&&typeof r!="number"&&(s=r.exit,a=r.enter,o=r.appear!==void 0?r.appear:a),{exit:s,enter:a,appear:o}},t.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===sd){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Ep.findDOMNode(this);a&&MH(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Rf&&this.setState({status:nm})},t.performEnter=function(r){var s=this,a=this.props.enter,o=this.context?this.context.isMounting:r,l=this.props.nodeRef?[o]:[Ep.findDOMNode(this),o],c=l[0],u=l[1],d=this.getTimeouts(),h=o?d.appear:d.enter;if(!r&&!a||ZL.disabled){this.safeSetState({status:jf},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:sd},function(){s.props.onEntering(c,u),s.onTransitionEnd(h,function(){s.safeSetState({status:jf},function(){s.props.onEntered(c,u)})})})},t.performExit=function(){var r=this,s=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:Ep.findDOMNode(this);if(!s||ZL.disabled){this.safeSetState({status:Rf},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Vw},function(){r.props.onExiting(o),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:Rf},function(){r.props.onExited(o)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},t.setNextCallback=function(r){var s=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,s.nextCallback=null,r(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.onTransitionEnd=function(r,s){this.setNextCallback(s);var a=this.props.nodeRef?this.props.nodeRef.current:Ep.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}r!=null&&setTimeout(this.nextCallback,r)},t.render=function(){var r=this.state.status;if(r===nm)return null;var s=this.props,a=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var o=kD(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return gl.createElement(DD.Provider,{value:null},typeof a=="function"?a(r,o):gl.cloneElement(gl.Children.only(a),o))},e}(gl.Component);Su.contextType=DD;Su.propTypes={};function Xh(){}Su.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Xh,onEntering:Xh,onEntered:Xh,onExit:Xh,onExiting:Xh,onExited:Xh};Su.UNMOUNTED=nm;Su.EXITED=Rf;Su.ENTERING=sd;Su.ENTERED=jf;Su.EXITING=Vw;function FH(n){return n.code==="Escape"||n.keyCode===27}function jH(){const n=B.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function Wx(n){if(!n||typeof n=="function")return null;const{major:e}=jH();return e>=19?n.props.ref:n.ref}const ag=!!(typeof window<"u"&&window.document&&window.document.createElement);var Yw=!1,qw=!1;try{var j2={get passive(){return Yw=!0},get once(){return qw=Yw=!0}};ag&&(window.addEventListener("test",j2,j2),window.removeEventListener("test",j2,!0))}catch{}function OD(n,e,t,i){if(i&&typeof i!="boolean"&&!qw){var r=i.once,s=i.capture,a=t;!qw&&r&&(a=t.__once||function o(l){this.removeEventListener(e,o,s),t.call(this,l)},t.__once=a),n.addEventListener(e,a,Yw?i:s)}n.addEventListener(e,t,i)}function Kw(n,e,t,i){var r=i&&typeof i!="boolean"?i.capture:i;n.removeEventListener(e,t,r),t.__once&&n.removeEventListener(e,t.__once,r)}function U1(n,e,t,i){return OD(n,e,t,i),function(){Kw(n,e,t,i)}}function BH(n,e,t,i){if(i===void 0&&(i=!0),n){var r=document.createEvent("HTMLEvents");r.initEvent(e,t,i),n.dispatchEvent(r)}}function UH(n){var e=Qf(n,"transitionDuration")||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function $H(n,e,t){t===void 0&&(t=5);var i=!1,r=setTimeout(function(){i||BH(n,"transitionend",!0)},e+t),s=U1(n,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),s()}}function MD(n,e,t,i){t==null&&(t=UH(n)||0);var r=$H(n,t,i),s=U1(n,"transitionend",e);return function(){r(),s()}}function eC(n,e){const t=Qf(n,e)||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function HH(n,e){const t=eC(n,"transitionDuration"),i=eC(n,"transitionDelay"),r=MD(n,s=>{s.target===n&&(r(),e(s))},t+i)}function WH(n){n.offsetHeight}const tC=n=>!n||typeof n=="function"?n:e=>{n.current=e};function zH(n,e){const t=tC(n),i=tC(e);return r=>{t&&t(r),i&&i(r)}}function FD(n,e){return B.useMemo(()=>zH(n,e),[n,e])}function GH(n){return n&&"setState"in n?Ep.findDOMNode(n):n??null}const VH=gl.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:i,onExiting:r,onExited:s,addEndListener:a,children:o,childRef:l,...c},u)=>{const d=B.useRef(null),h=FD(d,l),p=N=>{h(GH(N))},m=N=>k=>{N&&d.current&&N(d.current,k)},v=B.useCallback(m(n),[n]),b=B.useCallback(m(e),[e]),x=B.useCallback(m(t),[t]),w=B.useCallback(m(i),[i]),S=B.useCallback(m(r),[r]),A=B.useCallback(m(s),[s]),C=B.useCallback(m(a),[a]);return _.jsx(Su,{ref:u,...c,onEnter:v,onEntered:x,onEntering:b,onExit:w,onExited:A,onExiting:S,addEndListener:C,nodeRef:d,children:typeof o=="function"?(N,k)=>o(N,{...k,ref:p}):gl.cloneElement(o,{ref:p})})});function YH(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n},[n]),e}function Xw(n){const e=YH(n);return B.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const qH=n=>B.forwardRef((e,t)=>_.jsx("div",{...e,ref:t,className:mi(e.className,n)}));function KH(n){const e=B.useRef(n);return B.useEffect(()=>{e.current=n},[n]),e}function Jc(n){const e=KH(n);return B.useCallback(function(...t){return e.current&&e.current(...t)},[e])}function XH(){const n=B.useRef(!0),e=B.useRef(()=>n.current);return B.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function QH(n){const e=B.useRef(null);return B.useEffect(()=>{e.current=n}),e.current}const JH=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",ZH=typeof document<"u",nC=ZH||JH?B.useLayoutEffect:B.useEffect,eW=["as","disabled"];function tW(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function nW(n){return!n||n.trim()==="#"}function J5({tagName:n,disabled:e,href:t,target:i,rel:r,role:s,onClick:a,tabIndex:o=0,type:l}){n||(t!=null||i!=null||r!=null?n="a":n="button");const c={tagName:n};if(n==="button")return[{type:l||"button",disabled:e},c];const u=h=>{if((e||n==="a"&&nW(t))&&h.preventDefault(),e){h.stopPropagation();return}a==null||a(h)},d=h=>{h.key===" "&&(h.preventDefault(),u(h))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:o,href:t,target:n==="a"?i:void 0,"aria-disabled":e||void 0,rel:n==="a"?r:void 0,onClick:u,onKeyDown:d},c]}const jD=B.forwardRef((n,e)=>{let{as:t,disabled:i}=n,r=tW(n,eW);const[s,{tagName:a}]=J5(Object.assign({tagName:t,disabled:i},r));return _.jsx(a,Object.assign({},r,s,{ref:e}))});jD.displayName="Button";const iW=["onKeyDown"];function rW(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function sW(n){return!n||n.trim()==="#"}const BD=B.forwardRef((n,e)=>{let{onKeyDown:t}=n,i=rW(n,iW);const[r]=J5(Object.assign({tagName:"a"},i)),s=Jc(a=>{r.onKeyDown(a),t==null||t(a)});return sW(i.href)||i.role==="button"?_.jsx("a",Object.assign({ref:e},i,r,{onKeyDown:s})):_.jsx("a",Object.assign({ref:e},i,{onKeyDown:t}))});BD.displayName="Anchor";const aW={[sd]:"show",[jf]:"show"},Z5=B.forwardRef(({className:n,children:e,transitionClasses:t={},onEnter:i,...r},s)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},o=B.useCallback((l,c)=>{WH(l),i==null||i(l,c)},[i]);return _.jsx(VH,{ref:s,addEndListener:HH,...a,onEnter:o,childRef:Wx(e),children:(l,c)=>B.cloneElement(e,{...c,className:mi("fade",n,e.props.className,aW[l],t[l])})})});Z5.displayName="Fade";const oW={"aria-label":cu.string,onClick:cu.func,variant:cu.oneOf(["white"])},eE=B.forwardRef(({className:n,variant:e,"aria-label":t="Close",...i},r)=>_.jsx("button",{ref:r,type:"button",className:mi("btn-close",e&&`btn-close-${e}`,n),"aria-label":t,...i}));eE.displayName="CloseButton";eE.propTypes=oW;const so=B.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:i,active:r=!1,disabled:s=!1,className:a,...o},l)=>{const c=vr(e,"btn"),[u,{tagName:d}]=J5({tagName:n,disabled:s,...o}),h=d;return _.jsx(h,{...u,...o,ref:l,disabled:s,className:mi(a,c,r&&"active",t&&`${c}-${t}`,i&&`${c}-${i}`,o.href&&s&&"disabled")})});so.displayName="Button";const UD=B.createContext(null);UD.displayName="CardHeaderContext";function lW(n){const e=B.useRef(n);return e.current=n,e}function cW(n){const e=lW(n);B.useEffect(()=>()=>e.current(),[])}function uW(n,e){return B.Children.toArray(n).some(t=>B.isValidElement(t)&&t.type===e)}function dW({as:n,bsPrefix:e,className:t,...i}){e=vr(e,"col");const r=SH(),s=wH(),a=[],o=[];return r.forEach(l=>{const c=i[l];delete i[l];let u,d,h;typeof c=="object"&&c!=null?{span:u,offset:d,order:h}=c:u=c;const p=l!==s?`-${l}`:"";u&&a.push(u===!0?`${e}${p}`:`${e}${p}-${u}`),h!=null&&o.push(`order${p}-${h}`),d!=null&&o.push(`offset${p}-${d}`)}),[{...i,className:mi(t,...a,...o)},{as:n,bsPrefix:e,spans:a}]}const $D=B.forwardRef((n,e)=>{const[{className:t,...i},{as:r="div",bsPrefix:s,spans:a}]=dW(n);return _.jsx(r,{...i,ref:e,className:mi(t,!a.length&&s)})});$D.displayName="Col";var fW=Function.prototype.bind.call(Function.prototype.call,[].slice);function Pf(n,e){return fW(n.querySelectorAll(e))}function hW(){const[,n]=B.useReducer(e=>e+1,0);return n}function iC(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}const Qw=B.createContext(null),tE=(n,e=null)=>n!=null?String(n):e||null,nE=B.createContext(null);nE.displayName="NavContext";const pW="data-rr-ui-",gW="rrUi";function zx(n){return`${pW}${n}`}function mW(n){return`${gW}${n}`}const HD=B.createContext(ag?window:void 0);HD.Provider;function iE(){return B.useContext(HD)}const WD=B.createContext(null);WD.displayName="NavbarContext";const yW={type:cu.string,tooltip:cu.bool,as:cu.elementType},Gx=B.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:i=!1,...r},s)=>_.jsx(n,{...r,ref:s,className:mi(e,`${t}-${i?"tooltip":"feedback"}`)}));Gx.displayName="Feedback";Gx.propTypes=yW;const mu=B.createContext({}),rE=B.forwardRef(({id:n,bsPrefix:e,className:t,type:i="checkbox",isValid:r=!1,isInvalid:s=!1,as:a="input",...o},l)=>{const{controlId:c}=B.useContext(mu);return e=vr(e,"form-check-input"),_.jsx(a,{...o,ref:l,type:i,id:n||c,className:mi(t,e,r&&"is-valid",s&&"is-invalid")})});rE.displayName="FormCheckInput";const $1=B.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...i},r)=>{const{controlId:s}=B.useContext(mu);return n=vr(n,"form-check-label"),_.jsx("label",{...i,ref:r,htmlFor:t||s,className:mi(e,n)})});$1.displayName="FormCheckLabel";const zD=B.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:i=!1,reverse:r=!1,disabled:s=!1,isValid:a=!1,isInvalid:o=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:u,className:d,style:h,title:p="",type:m="checkbox",label:v,children:b,as:x="input",...w},S)=>{e=vr(e,"form-check"),t=vr(t,"form-switch");const{controlId:A}=B.useContext(mu),C=B.useMemo(()=>({controlId:n||A}),[A,n]),N=!b&&v!=null&&v!==!1||uW(b,$1),k=_.jsx(rE,{...w,type:m==="switch"?"checkbox":m,ref:S,isValid:a,isInvalid:o,disabled:s,as:x});return _.jsx(mu.Provider,{value:C,children:_.jsx("div",{style:h,className:mi(d,N&&e,i&&`${e}-inline`,r&&`${e}-reverse`,m==="switch"&&t),children:b||_.jsxs(_.Fragment,{children:[k,N&&_.jsx($1,{title:p,children:v}),c&&_.jsx(Gx,{type:u,tooltip:l,children:c})]})})})});zD.displayName="FormCheck";const H1=Object.assign(zD,{Input:rE,Label:$1}),GD=B.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:i,id:r,className:s,isValid:a=!1,isInvalid:o=!1,plaintext:l,readOnly:c,as:u="input",...d},h)=>{const{controlId:p}=B.useContext(mu);return n=vr(n,"form-control"),_.jsx(u,{...d,type:e,size:i,ref:h,readOnly:c,id:r||p,className:mi(s,l?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,a&&"is-valid",o&&"is-invalid")})});GD.displayName="FormControl";const vW=Object.assign(GD,{Feedback:Gx}),VD=B.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},r)=>(e=vr(e,"form-floating"),_.jsx(t,{ref:r,className:mi(n,e),...i})));VD.displayName="FormFloating";const sE=B.forwardRef(({controlId:n,as:e="div",...t},i)=>{const r=B.useMemo(()=>({controlId:n}),[n]);return _.jsx(mu.Provider,{value:r,children:_.jsx(e,{...t,ref:i})})});sE.displayName="FormGroup";const YD=B.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:i=!1,className:r,htmlFor:s,...a},o)=>{const{controlId:l}=B.useContext(mu);e=vr(e,"form-label");let c="col-form-label";typeof t=="string"&&(c=`${c} ${c}-${t}`);const u=mi(r,e,i&&"visually-hidden",t&&c);return s=s||l,t?_.jsx($D,{ref:o,as:"label",className:u,htmlFor:s,...a}):_.jsx(n,{ref:o,className:u,htmlFor:s,...a})});YD.displayName="FormLabel";const qD=B.forwardRef(({bsPrefix:n,className:e,id:t,...i},r)=>{const{controlId:s}=B.useContext(mu);return n=vr(n,"form-range"),_.jsx("input",{...i,type:"range",ref:r,className:mi(e,n),id:t||s})});qD.displayName="FormRange";const KD=B.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:i,isValid:r=!1,isInvalid:s=!1,id:a,...o},l)=>{const{controlId:c}=B.useContext(mu);return n=vr(n,"form-select"),_.jsx("select",{...o,size:t,ref:l,className:mi(i,n,e&&`${n}-${e}`,r&&"is-valid",s&&"is-invalid"),id:a||c})});KD.displayName="FormSelect";const XD=B.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:i,...r},s)=>(n=vr(n,"form-text"),_.jsx(t,{...r,ref:s,className:mi(e,n,i&&"text-muted")})));XD.displayName="FormText";const QD=B.forwardRef((n,e)=>_.jsx(H1,{...n,ref:e,type:"switch"}));QD.displayName="Switch";const xW=Object.assign(QD,{Input:H1.Input,Label:H1.Label}),JD=B.forwardRef(({bsPrefix:n,className:e,children:t,controlId:i,label:r,...s},a)=>(n=vr(n,"form-floating"),_.jsxs(sE,{ref:a,className:mi(e,n),controlId:i,...s,children:[t,_.jsx("label",{htmlFor:i,children:r})]})));JD.displayName="FloatingLabel";const bW={_ref:cu.any,validated:cu.bool,as:cu.elementType},aE=B.forwardRef(({className:n,validated:e,as:t="form",...i},r)=>_.jsx(t,{...i,ref:r,className:mi(n,e&&"was-validated")}));aE.displayName="Form";aE.propTypes=bW;const al=Object.assign(aE,{Group:sE,Control:vW,Floating:VD,Check:H1,Switch:xW,Label:YD,Text:XD,Range:qD,Select:KD,FloatingLabel:JD}),rC=n=>!n||typeof n=="function"?n:e=>{n.current=e};function SW(n,e){const t=rC(n),i=rC(e);return r=>{t&&t(r),i&&i(r)}}function Vx(n,e){return B.useMemo(()=>SW(n,e),[n,e])}const ZD=B.createContext(null),wW=["as","active","eventKey"];function _W(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function e3({key:n,onClick:e,active:t,id:i,role:r,disabled:s}){const a=B.useContext(Qw),o=B.useContext(nE),l=B.useContext(ZD);let c=t;const u={role:r};if(o){!r&&o.role==="tablist"&&(u.role="tab");const d=o.getControllerId(n??null),h=o.getControlledId(n??null);u[zx("event-key")]=n,u.id=d||i,c=t==null&&n!=null?o.activeKey===n:t,(c||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(u["aria-controls"]=h)}return u.role==="tab"&&(u["aria-selected"]=c,c||(u.tabIndex=-1),s&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=Jc(d=>{s||(e==null||e(d),n!=null&&a&&!d.isPropagationStopped()&&a(n,d))}),[u,{isActive:c}]}const t3=B.forwardRef((n,e)=>{let{as:t=jD,active:i,eventKey:r}=n,s=_W(n,wW);const[a,o]=e3(Object.assign({key:tE(r,s.href),active:i},s));return a[zx("active")]=o.isActive,_.jsx(t,Object.assign({},s,a,{ref:e}))});t3.displayName="NavItem";const EW=["as","onSelect","activeKey","role","onKeyDown"];function TW(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}const sC=()=>{},aC=zx("event-key"),n3=B.forwardRef((n,e)=>{let{as:t="div",onSelect:i,activeKey:r,role:s,onKeyDown:a}=n,o=TW(n,EW);const l=hW(),c=B.useRef(!1),u=B.useContext(Qw),d=B.useContext(ZD);let h,p;d&&(s=s||"tablist",r=d.activeKey,h=d.getControlledId,p=d.getControllerId);const m=B.useRef(null),v=S=>{const A=m.current;if(!A)return null;const C=Pf(A,`[${aC}]:not([aria-disabled=true])`),N=A.querySelector("[aria-selected=true]");if(!N||N!==document.activeElement)return null;const k=C.indexOf(N);if(k===-1)return null;let R=k+S;return R>=C.length&&(R=0),R<0&&(R=C.length-1),C[R]},b=(S,A)=>{S!=null&&(i==null||i(S,A),u==null||u(S,A))},x=S=>{if(a==null||a(S),!d)return;let A;switch(S.key){case"ArrowLeft":case"ArrowUp":A=v(-1);break;case"ArrowRight":case"ArrowDown":A=v(1);break;default:return}A&&(S.preventDefault(),b(A.dataset[mW("EventKey")]||null,S),c.current=!0,l())};B.useEffect(()=>{if(m.current&&c.current){const S=m.current.querySelector(`[${aC}][aria-selected=true]`);S==null||S.focus()}c.current=!1});const w=Vx(e,m);return _.jsx(Qw.Provider,{value:b,children:_.jsx(nE.Provider,{value:{role:s,activeKey:tE(r),getControlledId:h||sC,getControllerId:p||sC},children:_.jsx(t,Object.assign({},o,{onKeyDown:x,ref:w,role:s}))})})});n3.displayName="Nav";const AW=Object.assign(n3,{Item:t3});var Xy;function oC(n){if((!Xy&&Xy!==0||n)&&ag){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Xy=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Xy}function LW(){return B.useState(null)}function B2(n){n===void 0&&(n=Hx());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch{return n.body}}function CW(n){const e=B.useRef(n);return e.current=n,e}function IW(n){const e=CW(n);B.useEffect(()=>()=>e.current(),[])}function kW(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const lC=zx("modal-open");class oE{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:i=!1}={}){this.handleContainerOverflow=t,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return kW(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[i]:r.style[i]},e.scrollBarWidth&&(t[i]=`${parseInt(Qf(r,i)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(lC,""),Qf(r,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(lC),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const U2=(n,e)=>ag?n==null?(e||Hx()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function RW(n,e){const t=iE(),[i,r]=B.useState(()=>U2(n,t==null?void 0:t.document));if(!i){const s=U2(n);s&&r(s)}return B.useEffect(()=>{},[e,i]),B.useEffect(()=>{const s=U2(n);s!==i&&r(s)},[n,i]),i}function PW({children:n,in:e,onExited:t,mountOnEnter:i,unmountOnExit:r}){const s=B.useRef(null),a=B.useRef(e),o=Jc(t);B.useEffect(()=>{e?a.current=!0:o(s.current)},[e,o]);const l=Vx(s,Wx(n)),c=B.cloneElement(n,{ref:l});return e?c:r||!a.current&&i?null:c}const NW=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function DW(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function OW(n){let{onEnter:e,onEntering:t,onEntered:i,onExit:r,onExiting:s,onExited:a,addEndListener:o,children:l}=n,c=DW(n,NW);const u=B.useRef(null),d=Vx(u,Wx(l)),h=A=>C=>{A&&u.current&&A(u.current,C)},p=B.useCallback(h(e),[e]),m=B.useCallback(h(t),[t]),v=B.useCallback(h(i),[i]),b=B.useCallback(h(r),[r]),x=B.useCallback(h(s),[s]),w=B.useCallback(h(a),[a]),S=B.useCallback(h(o),[o]);return Object.assign({},c,{nodeRef:u},e&&{onEnter:p},t&&{onEntering:m},i&&{onEntered:v},r&&{onExit:b},s&&{onExiting:x},a&&{onExited:w},o&&{addEndListener:S},{children:typeof l=="function"?(A,C)=>l(A,Object.assign({},C,{ref:d})):B.cloneElement(l,{ref:d})})}const MW=["component"];function FW(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}const jW=B.forwardRef((n,e)=>{let{component:t}=n,i=FW(n,MW);const r=OW(i);return _.jsx(t,Object.assign({ref:e},r))});function BW({in:n,onTransition:e}){const t=B.useRef(null),i=B.useRef(!0),r=Jc(e);return nC(()=>{if(!t.current)return;let s=!1;return r({in:n,element:t.current,initial:i.current,isStale:()=>s}),()=>{s=!0}},[n,r]),nC(()=>(i.current=!1,()=>{i.current=!0}),[]),t}function UW({children:n,in:e,onExited:t,onEntered:i,transition:r}){const[s,a]=B.useState(!e);e&&s&&a(!1);const o=BW({in:!!e,onTransition:c=>{const u=()=>{c.isStale()||(c.in?i==null||i(c.element,c.initial):(a(!0),t==null||t(c.element)))};Promise.resolve(r(c)).then(u,d=>{throw c.in||a(!0),d})}}),l=Vx(o,Wx(n));return s&&!e?null:B.cloneElement(n,{ref:l})}function cC(n,e,t){return n?_.jsx(jW,Object.assign({},t,{component:n})):e?_.jsx(UW,Object.assign({},t,{transition:e})):_.jsx(PW,Object.assign({},t))}const $W=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function HW(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}let $2;function WW(n){return $2||($2=new oE({ownerDocument:n==null?void 0:n.document})),$2}function zW(n){const e=iE(),t=n||WW(e),i=B.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>t.add(i.current),remove:()=>t.remove(i.current),isTopModal:()=>t.isTopModal(i.current),setDialogRef:B.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:B.useCallback(r=>{i.current.backdrop=r},[])})}const i3=B.forwardRef((n,e)=>{let{show:t=!1,role:i="dialog",className:r,style:s,children:a,backdrop:o=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:d,runTransition:h,backdropTransition:p,runBackdropTransition:m,autoFocus:v=!0,enforceFocus:b=!0,restoreFocus:x=!0,restoreFocusOptions:w,renderDialog:S,renderBackdrop:A=Ie=>_.jsx("div",Object.assign({},Ie)),manager:C,container:N,onShow:k,onHide:R=()=>{},onExit:U,onExited:j,onExiting:D,onEnter:O,onEntering:Z,onEntered:J}=n,le=HW(n,$W);const H=iE(),V=RW(N),z=zW(C),W=XH(),te=QH(t),[fe,F]=B.useState(!t),K=B.useRef(null);B.useImperativeHandle(e,()=>z,[z]),ag&&!te&&t&&(K.current=B2(H==null?void 0:H.document)),t&&fe&&F(!1);const ee=Jc(()=>{if(z.add(),Xe.current=U1(document,"keydown",be),Te.current=U1(document,"focus",()=>setTimeout(ce),!0),k&&k(),v){var Ie,oe;const ut=B2((Ie=(oe=z.dialog)==null?void 0:oe.ownerDocument)!=null?Ie:H==null?void 0:H.document);z.dialog&&ut&&!iC(z.dialog,ut)&&(K.current=ut,z.dialog.focus())}}),ae=Jc(()=>{if(z.remove(),Xe.current==null||Xe.current(),Te.current==null||Te.current(),x){var Ie;(Ie=K.current)==null||Ie.focus==null||Ie.focus(w),K.current=null}});B.useEffect(()=>{!t||!V||ee()},[t,V,ee]),B.useEffect(()=>{fe&&ae()},[fe,ae]),IW(()=>{ae()});const ce=Jc(()=>{if(!b||!W()||!z.isTopModal())return;const Ie=B2(H==null?void 0:H.document);z.dialog&&Ie&&!iC(z.dialog,Ie)&&z.dialog.focus()}),ye=Jc(Ie=>{Ie.target===Ie.currentTarget&&(c==null||c(Ie),o===!0&&R())}),be=Jc(Ie=>{l&&FH(Ie)&&z.isTopModal()&&(u==null||u(Ie),Ie.defaultPrevented||R())}),Te=B.useRef(),Xe=B.useRef(),ze=(...Ie)=>{F(!0),j==null||j(...Ie)};if(!V)return null;const He=Object.assign({role:i,ref:z.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},le,{style:s,className:r,tabIndex:-1});let rt=S?S(He):_.jsx("div",Object.assign({},He,{children:B.cloneElement(a,{role:"document"})}));rt=cC(d,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:U,onExiting:D,onExited:ze,onEnter:O,onEntering:Z,onEntered:J,children:rt});let ft=null;return o&&(ft=A({ref:z.setBackdropRef,onClick:ye}),ft=cC(p,m,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ft})),_.jsx(_.Fragment,{children:Ep.createPortal(_.jsxs(_.Fragment,{children:[ft,rt]}),V)})});i3.displayName="Modal";const GW=Object.assign(i3,{Manager:oE});function VW(n,e){return n.classList?n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function YW(n,e){n.classList?n.classList.add(e):VW(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function uC(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function qW(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=uC(n.className,e):n.setAttribute("class",uC(n.className&&n.className.baseVal||"",e))}const Qh={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class KW extends oE{adjustAndStore(e,t,i){const r=t.style[e];t.dataset[e]=r,Qf(t,{[e]:`${parseFloat(Qf(t,e))+i}px`})}restore(e,t){const i=t.dataset[e];i!==void 0&&(delete t.dataset[e],Qf(t,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(YW(t,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Pf(t,Qh.FIXED_CONTENT).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth)),Pf(t,Qh.STICKY_CONTENT).forEach(s=>this.adjustAndStore(r,s,-e.scrollBarWidth)),Pf(t,Qh.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();qW(t,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Pf(t,Qh.FIXED_CONTENT).forEach(s=>this.restore(i,s)),Pf(t,Qh.STICKY_CONTENT).forEach(s=>this.restore(r,s)),Pf(t,Qh.NAVBAR_TOGGLER).forEach(s=>this.restore(r,s))}}let H2;function XW(n){return H2||(H2=new KW(n)),H2}const r3=B.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},r)=>(e=vr(e,"modal-body"),_.jsx(t,{ref:r,className:mi(n,e),...i})));r3.displayName="ModalBody";const s3=B.createContext({onHide(){}}),lE=B.forwardRef(({bsPrefix:n,className:e,contentClassName:t,centered:i,size:r,fullscreen:s,children:a,scrollable:o,...l},c)=>{n=vr(n,"modal");const u=`${n}-dialog`,d=typeof s=="string"?`${n}-fullscreen-${s}`:`${n}-fullscreen`;return _.jsx("div",{...l,ref:c,className:mi(u,e,r&&`${n}-${r}`,i&&`${u}-centered`,o&&`${u}-scrollable`,s&&d),children:_.jsx("div",{className:mi(`${n}-content`,t),children:a})})});lE.displayName="ModalDialog";const a3=B.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},r)=>(e=vr(e,"modal-footer"),_.jsx(t,{ref:r,className:mi(n,e),...i})));a3.displayName="ModalFooter";const QW=B.forwardRef(({closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:i,children:r,...s},a)=>{const o=B.useContext(s3),l=Xw(()=>{o==null||o.onHide(),i==null||i()});return _.jsxs("div",{ref:a,...s,children:[r,t&&_.jsx(eE,{"aria-label":n,variant:e,onClick:l})]})}),o3=B.forwardRef(({bsPrefix:n,className:e,closeLabel:t="Close",closeButton:i=!1,...r},s)=>(n=vr(n,"modal-header"),_.jsx(QW,{ref:s,...r,className:mi(e,n),closeLabel:t,closeButton:i})));o3.displayName="ModalHeader";const JW=qH("h4"),l3=B.forwardRef(({className:n,bsPrefix:e,as:t=JW,...i},r)=>(e=vr(e,"modal-title"),_.jsx(t,{ref:r,className:mi(n,e),...i})));l3.displayName="ModalTitle";function ZW(n){return _.jsx(Z5,{...n,timeout:null})}function ez(n){return _.jsx(Z5,{...n,timeout:null})}const c3=B.forwardRef(({bsPrefix:n,className:e,style:t,dialogClassName:i,contentClassName:r,children:s,dialogAs:a=lE,"data-bs-theme":o,"aria-labelledby":l,"aria-describedby":c,"aria-label":u,show:d=!1,animation:h=!0,backdrop:p=!0,keyboard:m=!0,onEscapeKeyDown:v,onShow:b,onHide:x,container:w,autoFocus:S=!0,enforceFocus:A=!0,restoreFocus:C=!0,restoreFocusOptions:N,onEntered:k,onExit:R,onExiting:U,onEnter:j,onEntering:D,onExited:O,backdropClassName:Z,manager:J,...le},H)=>{const[V,z]=B.useState({}),[W,te]=B.useState(!1),fe=B.useRef(!1),F=B.useRef(!1),K=B.useRef(null),[ee,ae]=LW(),ce=FD(H,ae),ye=Xw(x),be=_H();n=vr(n,"modal");const Te=B.useMemo(()=>({onHide:ye}),[ye]);function Xe(){return J||XW({isRTL:be})}function ze(at){if(!ag)return;const $t=Xe().getScrollbarWidth()>0,en=at.scrollHeight>Hx(at).documentElement.clientHeight;z({paddingRight:$t&&!en?oC():void 0,paddingLeft:!$t&&en?oC():void 0})}const He=Xw(()=>{ee&&ze(ee.dialog)});cW(()=>{Kw(window,"resize",He),K.current==null||K.current()});const rt=()=>{fe.current=!0},ft=at=>{fe.current&&ee&&at.target===ee.dialog&&(F.current=!0),fe.current=!1},Ie=()=>{te(!0),K.current=MD(ee.dialog,()=>{te(!1)})},oe=at=>{at.target===at.currentTarget&&Ie()},ut=at=>{if(p==="static"){oe(at);return}if(F.current||at.target!==at.currentTarget){F.current=!1;return}x==null||x()},dt=at=>{m?v==null||v(at):(at.preventDefault(),p==="static"&&Ie())},Se=(at,$t)=>{at&&ze(at),j==null||j(at,$t)},Qe=at=>{K.current==null||K.current(),R==null||R(at)},Ze=(at,$t)=>{D==null||D(at,$t),OD(window,"resize",He)},it=at=>{at&&(at.style.display=""),O==null||O(at),Kw(window,"resize",He)},et=B.useCallback(at=>_.jsx("div",{...at,className:mi(`${n}-backdrop`,Z,!h&&"show")}),[h,Z,n]),mt={...t,...V};mt.display="block";const Rt=at=>_.jsx("div",{role:"dialog",...at,style:mt,className:mi(e,n,W&&`${n}-static`,!h&&"show"),onClick:p?ut:void 0,onMouseUp:ft,"data-bs-theme":o,"aria-label":u,"aria-labelledby":l,"aria-describedby":c,children:_.jsx(a,{...le,onMouseDown:rt,className:i,contentClassName:r,children:s})});return _.jsx(s3.Provider,{value:Te,children:_.jsx(GW,{show:d,ref:ce,backdrop:p,container:w,keyboard:!0,autoFocus:S,enforceFocus:A,restoreFocus:C,restoreFocusOptions:N,onEscapeKeyDown:dt,onShow:b,onHide:x,onEnter:Se,onEntering:Ze,onEntered:k,onExit:Qe,onExiting:U,onExited:it,manager:Xe(),transition:h?ZW:void 0,backdropTransition:h?ez:void 0,renderBackdrop:et,renderDialog:Rt})})});c3.displayName="Modal";const Wt=Object.assign(c3,{Body:r3,Header:o3,Title:l3,Footer:a3,Dialog:lE,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),u3=B.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},r)=>(e=vr(e,"nav-item"),_.jsx(t,{ref:r,className:mi(n,e),...i})));u3.displayName="NavItem";const d3=B.forwardRef(({bsPrefix:n,className:e,as:t=BD,active:i,eventKey:r,disabled:s=!1,...a},o)=>{n=vr(n,"nav-link");const[l,c]=e3({key:tE(r,a.href),active:i,disabled:s,...a});return _.jsx(t,{...a,...l,ref:o,disabled:s,className:mi(e,n,s&&"disabled",c.isActive&&"active")})});d3.displayName="NavLink";const f3=B.forwardRef((n,e)=>{const{as:t="div",bsPrefix:i,variant:r,fill:s=!1,justify:a=!1,navbar:o,navbarScroll:l,className:c,activeKey:u,...d}=yH(n,{activeKey:"onSelect"}),h=vr(i,"nav");let p,m,v=!1;const b=B.useContext(WD),x=B.useContext(UD);return b?(p=b.bsPrefix,v=o??!0):x&&({cardHeaderBsPrefix:m}=x),_.jsx(AW,{as:t,ref:e,activeKey:u,className:mi(c,{[h]:!v,[`${p}-nav`]:v,[`${p}-nav-scroll`]:v&&l,[`${m}-${r}`]:!!m,[`${h}-${r}`]:!!r,[`${h}-fill`]:s,[`${h}-justified`]:a}),...d})});f3.displayName="Nav";const oo=Object.assign(f3,{Item:u3,Link:d3}),dC=B.forwardRef(({bsPrefix:n,className:e,striped:t,bordered:i,borderless:r,hover:s,size:a,variant:o,responsive:l,...c},u)=>{const d=vr(n,"table"),h=mi(e,d,o&&`${d}-${o}`,a&&`${d}-${a}`,t&&`${d}-${typeof t=="string"?`striped-${t}`:"striped"}`,i&&`${d}-bordered`,r&&`${d}-borderless`,s&&`${d}-hover`),p=_.jsx("table",{...c,className:h,ref:u});if(l){let m=`${d}-responsive`;return typeof l=="string"&&(m=`${m}-${l}`),_.jsx("div",{className:m,children:p})}return p});/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function n0(){return n0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},n0.apply(this,arguments)}var gd;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(gd||(gd={}));const fC="popstate";function tz(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:a,hash:o}=i.location;return Jw("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:W1(r)}return iz(e,t,null,n)}function kr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function h3(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nz(){return Math.random().toString(36).substr(2,8)}function hC(n,e){return{usr:n.state,key:n.key,idx:e}}function Jw(n,e,t,i){return t===void 0&&(t=null),n0({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?og(e):e,{state:t,key:e&&e.key||i||nz()})}function W1(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function og(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function iz(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o=gd.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(n0({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=gd.Pop;let b=u(),x=b==null?null:b-c;c=b,l&&l({action:o,location:v.location,delta:x})}function h(b,x){o=gd.Push;let w=Jw(v.location,b,x);c=u()+1;let S=hC(w,c),A=v.createHref(w);try{a.pushState(S,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(A)}s&&l&&l({action:o,location:v.location,delta:1})}function p(b,x){o=gd.Replace;let w=Jw(v.location,b,x);c=u();let S=hC(w,c),A=v.createHref(w);a.replaceState(S,"",A),s&&l&&l({action:o,location:v.location,delta:0})}function m(b){let x=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof b=="string"?b:W1(b);return w=w.replace(/ $/,"%20"),kr(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let v={get action(){return o},get location(){return n(r,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(fC,d),l=b,()=>{r.removeEventListener(fC,d),l=null}},createHref(b){return e(r,b)},createURL:m,encodeLocation(b){let x=m(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(b){return a.go(b)}};return v}var pC;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(pC||(pC={}));function rz(n,e,t){return t===void 0&&(t="/"),sz(n,e,t)}function sz(n,e,t,i){let r=typeof e=="string"?og(e):e,s=qp(r.pathname||"/",t);if(s==null)return null;let a=p3(n);az(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=yz(s);o=gz(a[l],c)}return o}function p3(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(kr(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Rd([i,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(kr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),p3(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:hz(c,s.index),routesMeta:u})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let l of g3(s.path))r(s,a,l)}),e}function g3(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=g3(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function az(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:pz(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const oz=/^:[\w-]+$/,lz=3,cz=2,uz=1,dz=10,fz=-2,gC=n=>n==="*";function hz(n,e){let t=n.split("/"),i=t.length;return t.some(gC)&&(i+=fz),e&&(i+=cz),t.filter(r=>!gC(r)).reduce((r,s)=>r+(oz.test(s)?lz:s===""?uz:dz),i)}function pz(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function gz(n,e,t){let{routesMeta:i}=n,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=Zw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:Rd([s,d.pathname]),pathnameBase:Sz(Rd([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=Rd([s,d.pathnameBase]))}return a}function Zw(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=mz(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let v=o[d]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const m=o[d];return p&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:n}}function mz(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),h3(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function yz(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return h3(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function qp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function vz(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?og(n):n;return{pathname:t?t.startsWith("/")?t:xz(t,e):e,search:wz(i),hash:_z(r)}}function xz(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function W2(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function m3(n,e){let t=bz(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function y3(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=og(n):(r=n0({},n),kr(!r.pathname||!r.pathname.includes("?"),W2("?","pathname","search",r)),kr(!r.pathname||!r.pathname.includes("#"),W2("#","pathname","hash",r)),kr(!r.search||!r.search.includes("#"),W2("#","search","hash",r)));let s=n===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!i&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=vz(r,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Rd=n=>n.join("/").replace(/\/\/+/g,"/"),Sz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_z=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ez(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const v3=["post","put","patch","delete"];new Set(v3);const Tz=["get",...v3];new Set(Tz);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function i0(){return i0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},i0.apply(this,arguments)}const Yx=B.createContext(null),x3=B.createContext(null),Vd=B.createContext(null),qx=B.createContext(null),yh=B.createContext({outlet:null,matches:[],isDataRoute:!1}),b3=B.createContext(null);function Az(n,e){let{relative:t}=e===void 0?{}:e;j0()||kr(!1);let{basename:i,navigator:r}=B.useContext(Vd),{hash:s,pathname:a,search:o}=Kx(n,{relative:t}),l=a;return i!=="/"&&(l=a==="/"?i:Rd([i,a])),r.createHref({pathname:l,search:o,hash:s})}function j0(){return B.useContext(qx)!=null}function B0(){return j0()||kr(!1),B.useContext(qx).location}function S3(n){B.useContext(Vd).static||B.useLayoutEffect(n)}function Lz(){let{isDataRoute:n}=B.useContext(yh);return n?Uz():Cz()}function Cz(){j0()||kr(!1);let n=B.useContext(Yx),{basename:e,future:t,navigator:i}=B.useContext(Vd),{matches:r}=B.useContext(yh),{pathname:s}=B0(),a=JSON.stringify(m3(r,t.v7_relativeSplatPath)),o=B.useRef(!1);return S3(()=>{o.current=!0}),B.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){i.go(c);return}let d=y3(c,JSON.parse(a),s,u.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Rd([e,d.pathname])),(u.replace?i.replace:i.push)(d,u.state,u)},[e,i,a,s,n])}function Kx(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=B.useContext(Vd),{matches:r}=B.useContext(yh),{pathname:s}=B0(),a=JSON.stringify(m3(r,i.v7_relativeSplatPath));return B.useMemo(()=>y3(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function Iz(n,e){return kz(n,e)}function kz(n,e,t,i){j0()||kr(!1);let{navigator:r,static:s}=B.useContext(Vd),{matches:a}=B.useContext(yh),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=B0(),d;if(e){var h;let x=typeof e=="string"?og(e):e;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||kr(!1),d=x}else d=u;let p=d.pathname||"/",m=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=rz(n,{pathname:m}),b=Oz(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Rd([c,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Rd([c,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,t,i);return e&&b?B.createElement(qx.Provider,{value:{location:i0({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:gd.Pop}},b):b}function Rz(){let n=Bz(),e=Ez(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:r},t):null,null)}const Pz=B.createElement(Rz,null);class Nz extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?B.createElement(yh.Provider,{value:this.props.routeContext},B.createElement(b3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dz(n){let{routeContext:e,match:t,children:i}=n,r=B.useContext(Yx);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(yh.Provider,{value:e},i)}function Oz(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(r=t)==null?void 0:r.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||kr(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=t,m=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let p,m=!1,v=null,b=null;t&&(p=o&&d.route.id?o[d.route.id]:void 0,v=d.route.errorElement||Pz,l&&(c<0&&h===0?($z("route-fallback"),m=!0,b=null):c===h&&(m=!0,b=d.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,h+1)),w=()=>{let S;return p?S=v:m?S=b:d.route.Component?S=B.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,B.createElement(Dz,{match:d,routeContext:{outlet:u,matches:x,isDataRoute:t!=null},children:S})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?B.createElement(Nz,{location:t.location,revalidation:t.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var w3=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(w3||{}),_3=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(_3||{});function Mz(n){let e=B.useContext(Yx);return e||kr(!1),e}function Fz(n){let e=B.useContext(x3);return e||kr(!1),e}function jz(n){let e=B.useContext(yh);return e||kr(!1),e}function E3(n){let e=jz(),t=e.matches[e.matches.length-1];return t.route.id||kr(!1),t.route.id}function Bz(){var n;let e=B.useContext(b3),t=Fz(),i=E3();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function Uz(){let{router:n}=Mz(w3.UseNavigateStable),e=E3(_3.UseNavigateStable),t=B.useRef(!1);return S3(()=>{t.current=!0}),B.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,i0({fromRouteId:e},s)))},[n,e])}const mC={};function $z(n,e,t){mC[n]||(mC[n]=!0)}function Hz(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Vl(n){kr(!1)}function Wz(n){let{basename:e="/",children:t=null,location:i,navigationType:r=gd.Pop,navigator:s,static:a=!1,future:o}=n;j0()&&kr(!1);let l=e.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:l,navigator:s,static:a,future:i0({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof i=="string"&&(i=og(i));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:m="default"}=i,v=B.useMemo(()=>{let b=qp(u,l);return b==null?null:{location:{pathname:b,search:d,hash:h,state:p,key:m},navigationType:r}},[l,u,d,h,p,m,r]);return v==null?null:B.createElement(Vd.Provider,{value:c},B.createElement(qx.Provider,{children:t,value:v}))}function zz(n){let{children:e,location:t}=n;return Iz(e_(e),t)}new Promise(()=>{});function e_(n,e){e===void 0&&(e=[]);let t=[];return B.Children.forEach(n,(i,r)=>{if(!B.isValidElement(i))return;let s=[...e,r];if(i.type===B.Fragment){t.push.apply(t,e_(i.props.children,s));return}i.type!==Vl&&kr(!1),!i.props.index||!i.props.children||kr(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=e_(i.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function z1(){return z1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},z1.apply(this,arguments)}function T3(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Gz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Vz(n,e){return n.button===0&&(!e||e==="_self")&&!Gz(n)}const Yz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qz=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Kz="6";try{window.__reactRouterVersion=Kz}catch{}const Xz=B.createContext({isTransitioning:!1}),Qz="startTransition",yC=A7[Qz];function Jz(n){let{basename:e,children:t,future:i,window:r}=n,s=B.useRef();s.current==null&&(s.current=tz({window:r,v5Compat:!0}));let a=s.current,[o,l]=B.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},u=B.useCallback(d=>{c&&yC?yC(()=>l(d)):l(d)},[l,c]);return B.useLayoutEffect(()=>a.listen(u),[a,u]),B.useEffect(()=>Hz(i),[i]),B.createElement(Wz,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:i})}const Zz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eG=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tG=B.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=T3(e,Yz),{basename:p}=B.useContext(Vd),m,v=!1;if(typeof c=="string"&&eG.test(c)&&(m=c,Zz))try{let S=new URL(window.location.href),A=c.startsWith("//")?new URL(S.protocol+c):new URL(c),C=qp(A.pathname,p);A.origin===S.origin&&C!=null?c=C+A.search+A.hash:v=!0}catch{}let b=Az(c,{relative:r}),x=iG(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:r,viewTransition:d});function w(S){i&&i(S),S.defaultPrevented||x(S)}return B.createElement("a",z1({},h,{href:m||b,onClick:v||s?i:w,ref:t,target:l}))}),md=B.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:c,children:u}=e,d=T3(e,qz),h=Kx(l,{relative:d.relative}),p=B0(),m=B.useContext(x3),{navigator:v,basename:b}=B.useContext(Vd),x=m!=null&&rG(h)&&c===!0,w=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,S=p.pathname,A=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(S=S.toLowerCase(),A=A?A.toLowerCase():null,w=w.toLowerCase()),A&&b&&(A=qp(A,b)||A);const C=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let N=S===w||!a&&S.startsWith(w)&&S.charAt(C)==="/",k=A!=null&&(A===w||!a&&A.startsWith(w)&&A.charAt(w.length)==="/"),R={isActive:N,isPending:k,isTransitioning:x},U=N?i:void 0,j;typeof s=="function"?j=s(R):j=[s,N?"active":null,k?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(R):o;return B.createElement(tG,z1({},d,{"aria-current":U,className:j,ref:t,style:D,to:l,viewTransition:c}),typeof u=="function"?u(R):u)});var t_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(t_||(t_={}));var vC;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(vC||(vC={}));function nG(n){let e=B.useContext(Yx);return e||kr(!1),e}function iG(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=Lz(),c=B0(),u=Kx(n,{relative:a});return B.useCallback(d=>{if(Vz(d,t)){d.preventDefault();let h=i!==void 0?i:W1(c)===W1(u);l(n,{replace:h,state:r,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,i,r,t,n,s,a,o])}function rG(n,e){e===void 0&&(e={});let t=B.useContext(Xz);t==null&&kr(!1);let{basename:i}=nG(t_.useViewTransitionState),r=Kx(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=qp(t.currentLocation.pathname,i)||t.currentLocation.pathname,a=qp(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Zw(r.pathname,a)!=null||Zw(r.pathname,s)!=null}function Wf({value:n,currency:e="USD",locale:t="en-US"}){console.log("Type of number to be converted",typeof n);const r=new Intl.NumberFormat(t,{style:"currency",currency:e}).format(parseFloat(n));return _.jsx("span",{children:r})}let sG={data:""},aG=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||sG,oG=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lG=/\/\*[^]*?\*\/|  +/g,xC=/\n+/g,dd=(n,e)=>{let t="",i="",r="";for(let s in n){let a=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+a+";":i+=s[1]=="f"?dd(a,s):s+"{"+dd(a,s[1]=="k"?"":e)+"}":typeof a=="object"?i+=dd(a,e?e.replace(/([^,])+/g,o=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):s):a!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=dd.p?dd.p(s,a):s+":"+a+";")}return t+(e&&r?e+"{"+r+"}":r)+i},jc={},A3=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+A3(n[t]);return e}return n},cG=(n,e,t,i,r)=>{let s=A3(n),a=jc[s]||(jc[s]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(s));if(!jc[a]){let l=s!==n?n:(c=>{let u,d,h=[{}];for(;u=oG.exec(c.replace(lG,""));)u[4]?h.shift():u[3]?(d=u[3].replace(xC," ").trim(),h.unshift(h[0][d]=h[0][d]||{})):h[0][u[1]]=u[2].replace(xC," ").trim();return h[0]})(n);jc[a]=dd(r?{["@keyframes "+a]:l}:l,t?"":"."+a)}let o=t&&jc.g?jc.g:null;return t&&(jc.g=jc[a]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(jc[a],e,i,o),a},uG=(n,e,t)=>n.reduce((i,r,s)=>{let a=e[s];if(a&&a.call){let o=a(t),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":dd(o,""):o===!1?"":o}return i+r+(a??"")},"");function Xx(n){let e=this||{},t=n.call?n(e.p):n;return cG(t.unshift?t.raw?uG(t,[].slice.call(arguments,1),e.p):t.reduce((i,r)=>Object.assign(i,r&&r.call?r(e.p):r),{}):t,aG(e.target),e.g,e.o,e.k)}let L3,n_,i_;Xx.bind({g:1});let yu=Xx.bind({k:1});function dG(n,e,t,i){dd.p=e,L3=n,n_=t,i_=i}function Yd(n,e){let t=this||{};return function(){let i=arguments;function r(s,a){let o=Object.assign({},s),l=o.className||r.className;t.p=Object.assign({theme:n_&&n_()},o),t.o=/ *go\d+/.test(l),o.className=Xx.apply(t,i)+(l?" "+l:"");let c=n;return n[0]&&(c=o.as||n,delete o.as),i_&&c[0]&&i_(o),L3(c,o)}return r}}var fG=n=>typeof n=="function",G1=(n,e)=>fG(n)?n(e):n,hG=(()=>{let n=0;return()=>(++n).toString()})(),C3=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),pG=20,I3=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,pG)};case 1:return{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return I3(n,{type:n.toasts.find(s=>s.id===t.id)?1:0,toast:t});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let r=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+r}))}}},Jv=[],zf={toasts:[],pausedAt:void 0},vh=n=>{zf=I3(zf,n),Jv.forEach(e=>{e(zf)})},gG={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},mG=(n={})=>{let[e,t]=B.useState(zf),i=B.useRef(zf);B.useEffect(()=>(i.current!==zf&&t(zf),Jv.push(t),()=>{let s=Jv.indexOf(t);s>-1&&Jv.splice(s,1)}),[]);let r=e.toasts.map(s=>{var a,o,l;return{...n,...n[s.type],...s,removeDelay:s.removeDelay||((a=n[s.type])==null?void 0:a.removeDelay)||(n==null?void 0:n.removeDelay),duration:s.duration||((o=n[s.type])==null?void 0:o.duration)||(n==null?void 0:n.duration)||gG[s.type],style:{...n.style,...(l=n[s.type])==null?void 0:l.style,...s.style}}});return{...e,toasts:r}},yG=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||hG()}),U0=n=>(e,t)=>{let i=yG(e,n,t);return vh({type:2,toast:i}),i.id},Kn=(n,e)=>U0("blank")(n,e);Kn.error=U0("error");Kn.success=U0("success");Kn.loading=U0("loading");Kn.custom=U0("custom");Kn.dismiss=n=>{vh({type:3,toastId:n})};Kn.remove=n=>vh({type:4,toastId:n});Kn.promise=(n,e,t)=>{let i=Kn.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(r=>{let s=e.success?G1(e.success,r):void 0;return s?Kn.success(s,{id:i,...t,...t==null?void 0:t.success}):Kn.dismiss(i),r}).catch(r=>{let s=e.error?G1(e.error,r):void 0;s?Kn.error(s,{id:i,...t,...t==null?void 0:t.error}):Kn.dismiss(i)}),n};var vG=(n,e)=>{vh({type:1,toast:{id:n,height:e}})},xG=()=>{vh({type:5,time:Date.now()})},xm=new Map,bG=1e3,SG=(n,e=bG)=>{if(xm.has(n))return;let t=setTimeout(()=>{xm.delete(n),vh({type:4,toastId:n})},e);xm.set(n,t)},wG=n=>{let{toasts:e,pausedAt:t}=mG(n);B.useEffect(()=>{if(t)return;let s=Date.now(),a=e.map(o=>{if(o.duration===1/0)return;let l=(o.duration||0)+o.pauseDuration-(s-o.createdAt);if(l<0){o.visible&&Kn.dismiss(o.id);return}return setTimeout(()=>Kn.dismiss(o.id),l)});return()=>{a.forEach(o=>o&&clearTimeout(o))}},[e,t]);let i=B.useCallback(()=>{t&&vh({type:6,time:Date.now()})},[t]),r=B.useCallback((s,a)=>{let{reverseOrder:o=!1,gutter:l=8,defaultPosition:c}=a||{},u=e.filter(p=>(p.position||c)===(s.position||c)&&p.height),d=u.findIndex(p=>p.id===s.id),h=u.filter((p,m)=>m<d&&p.visible).length;return u.filter(p=>p.visible).slice(...o?[h+1]:[0,h]).reduce((p,m)=>p+(m.height||0)+l,0)},[e]);return B.useEffect(()=>{e.forEach(s=>{if(s.dismissed)SG(s.id,s.removeDelay);else{let a=xm.get(s.id);a&&(clearTimeout(a),xm.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:vG,startPause:xG,endPause:i,calculateOffset:r}}},_G=yu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,EG=yu`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,TG=yu`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,AG=Yd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_G} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${EG} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${TG} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,LG=yu`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,CG=Yd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${LG} 1s linear infinite;
`,IG=yu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,kG=yu`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,RG=Yd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${IG} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${kG} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,PG=Yd("div")`
  position: absolute;
`,NG=Yd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,DG=yu`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OG=Yd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${DG} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,MG=({toast:n})=>{let{icon:e,type:t,iconTheme:i}=n;return e!==void 0?typeof e=="string"?B.createElement(OG,null,e):e:t==="blank"?null:B.createElement(NG,null,B.createElement(CG,{...i}),t!=="loading"&&B.createElement(PG,null,t==="error"?B.createElement(AG,{...i}):B.createElement(RG,{...i})))},FG=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,jG=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,BG="0%{opacity:0;} 100%{opacity:1;}",UG="0%{opacity:1;} 100%{opacity:0;}",$G=Yd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,HG=Yd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,WG=(n,e)=>{let t=n.includes("top")?1:-1,[i,r]=C3()?[BG,UG]:[FG(t),jG(t)];return{animation:e?`${yu(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${yu(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},zG=B.memo(({toast:n,position:e,style:t,children:i})=>{let r=n.height?WG(n.position||e||"top-center",n.visible):{opacity:0},s=B.createElement(MG,{toast:n}),a=B.createElement(HG,{...n.ariaProps},G1(n.message,n));return B.createElement($G,{className:n.className,style:{...r,...t,...n.style}},typeof i=="function"?i({icon:s,message:a}):B.createElement(B.Fragment,null,s,a))});dG(B.createElement);var GG=({id:n,className:e,style:t,onHeightUpdate:i,children:r})=>{let s=B.useCallback(a=>{if(a){let o=()=>{let l=a.getBoundingClientRect().height;i(n,l)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[n,i]);return B.createElement("div",{ref:s,className:e,style:t},r)},VG=(n,e)=>{let t=n.includes("top"),i=t?{top:0}:{bottom:0},r=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:C3()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...i,...r}},YG=Xx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Qy=16,$0=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:i,children:r,containerStyle:s,containerClassName:a})=>{let{toasts:o,handlers:l}=wG(t);return B.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Qy,left:Qy,right:Qy,bottom:Qy,pointerEvents:"none",...s},className:a,onMouseEnter:l.startPause,onMouseLeave:l.endPause},o.map(c=>{let u=c.position||e,d=l.calculateOffset(c,{reverseOrder:n,gutter:i,defaultPosition:e}),h=VG(u,d);return B.createElement(GG,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?YG:"",style:h},c.type==="custom"?G1(c.message,c):r?r(c):B.createElement(zG,{toast:c,position:u}))}))};const Jy="name;",Jh="items;",qG="order;",Zy="pm;",KG="total;";function XG(){const[n,e]=B.useState(null),[t,i]=B.useState(!1),[r,s]=B.useState(!1),[a,o]=B.useState({}),[l,c]=B.useState({}),[u,d]=B.useState(!1),h={rolls:5,shakes:5,banana:6,puppy:5,drinks:1},[p,m]=B.useState({rolls:!1,shakes:!1,banana:!1,puppy:!1,drinks:!1}),[v,b]=B.useState({VainillaIng:!1,ChocolateIng:!1,FresaIng:!1,NutellaIng:!1,OreoIng:!1,ManíIng:!1,AlmendraIng:!1,CocoIng:!1,BizcochoDeVainillaIng:!1,PistachioIng:!1,AmaretoIng:!1,GranolaIng:!1,ParchaIng:!1,MangoIng:!1,CanelaIng:!1,AnísIng:!1,LimónIng:!1,CaféIng:!1,BrownieIng:!1,GuineoIng:!1,CameoIng:!1,TronkyIng:!1,ChipsIng:!1,CheesecakeIng:!1,ChocolateBlancoIng:!1,FruityPebblesIng:!1,CocoaPebblesIng:!1,QuesoIng:!1,UvaIng:!1,ChinaIng:!1,GuanabanaIng:!1,ChipsAhoyIng:!1,KitKatIng:!1,BlueberryIng:!1,RedVelvettIng:!1,NuecesIng:!1,CarameloIng:!1,CherryIng:!1,BrandyIng:!1,PinaIng:!1,PinaColadaIng:!1,ManzanaIng:!1,GuayabaIng:!1,BizcochoDeZanahoriaIng:!1,FerreroIng:!1,CrackersIng:!1,MarshmellowIng:!1}),{order:x,setOrder:w}=B.useContext(hi),{name:S,setName:A}=B.useContext(hi),{renderOrdersKey:C,setRenderOrdersKey:N}=B.useContext(hi),{itemCounter:k,setItemCounter:R}=B.useContext(hi),{metodo:U,setMetodo:j}=B.useContext(hi),{newItem:D,setNewItem:O}=B.useContext(hi),{totalToPay:Z,setTotalToPay:J}=B.useContext(hi),{type:le,setType:H}=B.useContext(hi),{typeCounter:V,setTypeCounter:z}=B.useContext(hi),{favCounter:W,setFavCounter:te}=B.useContext(hi),{sumToSubstract:fe,setSumtoSubstract:F}=B.useContext(hi),{newOrderCounter:K,increaseNewOrderCounter:ee}=B.useContext(hi),ae=()=>i(!0),ce=()=>i(!1),ye=()=>s(!0),be=()=>s(!1),Te=Ae=>{Ae.target.value==="ATH"?j("ATH"):j("CASH")};B.useEffect(()=>{const Ae=setInterval(()=>{Et.get("/orders").then(Ke=>{e(Ke.data)}).catch(Ke=>{console.log("Error",Ke)})},500);return()=>clearInterval(Ae)},[C]),B.useEffect(()=>{R(k+1)},[D]),B.useEffect(()=>{if(u==!0){O({}),w({}),A(""),d(!1);const Ae=["username","password"];for(let Ke=localStorage.length-1;Ke>=0;Ke--){const Nt=localStorage.key(Ke);Ae.includes(Nt)||localStorage.removeItem(Nt)}}},[u]);const Xe=async Ae=>{try{console.log(Ae);const Ke=await Et.delete("/orders",{data:{id:Ae}});console.log("Item deleted:",Ke.data),Kn.success("Orden borrada")}catch(Ke){Kn.error("Order failed to delete!"),console.log("error:",Ke)}Qe(!1),N(Ke=>Ke+1),reloadChannel.postMessage({action:"reload"})},[ze,He]=B.useState(""),rt=()=>{new Audio("/sounds/success.mp3").play()},ft=async Ae=>{w(an=>({...an,name:JSON.parse(localStorage.getItem(Jy)),metodo:JSON.parse(localStorage.getItem(Zy))}));var Ke=JSON.parse(localStorage.getItem(qG)),Nt=Ke.items;if(JSON.parse(localStorage.getItem(Jy))==null||JSON.parse(localStorage.getItem(Jy))=="")console.log("Order needs to be under a name"),Kn.error("Orden debe estar bajo un nombre");else if(JSON.parse(localStorage.getItem(Zy))==null||JSON.parse(localStorage.getItem(Zy))=="")Kn.error("Orden debe tener método de pago");else{He("");try{const an=await Et.post("/orders",{name:JSON.parse(localStorage.getItem(Jy)),items:Nt,payment_method:JSON.parse(localStorage.getItem(Zy)),total:Z});Kn.success("Orden añadida a la cola"),rt(),i(!1),J(0),j(""),z(V-1),te(W-1),d(!0),N(Bt=>Bt+1),ee(Bt=>Bt+1),console.log("Response:",an.headers)}catch(an){console.error("Error",an)}}},Ie=Ae=>{console.log(x.items),x.items.map(Ke=>{if(Ke.item_id===Ae){console.log("deleting item from "+x.name+"order");const Nt=x.items.filter(an=>an.item_id!==Ae);w(an=>({...an,items:Nt})),localStorage.setItem(Jh,JSON.stringify({})),F(h[Ke.type]*Ke.qty),console.log("Total Updated"),Kn.success("Item borrado")}else console.log("item not found")})},oe=()=>{Kn.success("Orden limpia!"),O({}),localStorage.setItem(Jh,JSON.stringify({})),w({}),R(0),J(0),H(""),A(""),z(V-1),te(W-1),N(Ae=>Ae+1),location.reload()},[ut,dt]=B.useState(0),[Se,Qe]=B.useState(!1),Ze=()=>Qe(!1),it=Ae=>{Qe(!0),dt(Ae)},[et,mt]=B.useState(0),[Rt,at]=B.useState(!1),$t=()=>at(!0),en=()=>at(!1),Pt=Ae=>{mt(Ae.target.value)},qt=()=>{mt(et+.25)},lt=()=>{mt(et-.25)},Ii=()=>{Kn.success("Cargo añadido"),console.log("Total",parseFloat(Z,10)),console.log("Charge",et),console.log("Total To Pay",parseFloat(Z,10)+et),J(parseFloat(Z,10)+et),localStorage.setItem(KG,parseFloat(Z,10)+et),mt(0),at(!1)},[pn,or]=B.useState(!1),[gn,zn]=B.useState({}),Wr=Ae=>{or(!0),zn(Ae)},rn=()=>or(!1),{hideOrders:Ss,toggleHideOrders:Un}=B.useContext(hi),zr=()=>{Un(Ae=>!Ae)},[ws,si]=B.useState(!1);B.useEffect(()=>{window.matchMedia("(max-width: 768px)");const Ae=new WebSocket(`wss://${window.location.hostname}:${window.location.port}`);return()=>{Ae.close()}},[]);const[Ht,Ln]=B.useState(!1),[_s,ai]=B.useState(!1),[xr,Gr]=B.useState(!1),[Dt,Bi]=B.useState(!1),[Qr,Ui]=B.useState(!1),[_i,Ei]=B.useState(""),[Cn,Pi]=B.useState(0),[lr,Jr]=B.useState(!0),[cr,Ki]=B.useState(()=>{const Ae=localStorage.getItem("items");return Ae?JSON.parse(Ae):[{}]}),Xi=(Ae,Ke)=>{Ke=="type"?(Ln(Nt=>!Nt),Pi(Cn===Ae?0:Ae)):Ke=="ings"?(ai(Nt=>!Nt),Pi(Cn===Ae?0:Ae)):Ke=="tops"?(Gr(Nt=>!Nt),Pi(Cn===Ae?0:Ae)):Ke=="qty"?(Bi(Nt=>!Nt),Pi(Cn===Ae?0:Ae)):Ke=="comments"&&(Ui(Nt=>!Nt),Pi(Cn===Ae?0:Ae)),console.log("ID of item to edit",Cn)},Rr=()=>{li(ra+1)},ds=()=>{ra>0&&li(ra-1)},Zr=(Ae,Ke,Nt,an,Bt,Ct)=>{if(Kn.success("Cambio guardado!"),Ct!=0){const Qn=Ae.map(In=>In.item_id===Ke?{...In,[Nt]:Ct}:In);Ki(Qn),x.items.map(In=>{if(In.item_id===Ke){if(w(hs=>({...hs,items:Qn})),localStorage.setItem(Jh,JSON.stringify({})),Nt==="qty"){console.log("Past value's cost",h[Bt]*In.qty),console.log("Type of nQ",typeof Ct),console.log("New value's cost",h[Bt]*Ct);var As=h[Bt]*Ct-h[Bt]*In.qty;console.log("Sum to substract",As),F(As),console.log("Total Updated")}}else console.log("item not found")}),Ln(!1),ai(!1),Gr(!1),Bi(!1),Pi(0),p.rolls=!1,p.shakes=!1,p.banana=!1,p.puppy=!1,p.drinks=!1,oi(""),br([]),Vr([]),li(0)}else{if(Nt==="type"){const Qn=Ae.map(In=>In.item_id===Ke?{...In,[Nt]:an}:In);Ki(Qn),x.items.map(In=>{if(In.item_id===Ke){w(hs=>({...hs,items:Qn})),localStorage.setItem(Jh,JSON.stringify({})),console.log("Past value",Bt),console.log("New value",an),console.log("Past value's cost",h[Bt]*In.qty),console.log("New value's cost",h[an]*In.qty);var As=h[an]*In.qty-h[Bt]*In.qty;console.log("Sum to substract",As),F(As),console.log("Total Updated")}else console.log("item not found")})}else if(Nt=="comments"||Nt==="ings"||Nt==="tops"){const Qn=Ae.map(In=>In.item_id===Ke?{...In,[Nt]:an}:In);Ki(Qn),x.items.map(In=>{In.item_id===Ke?(w(As=>({...As,items:Qn})),localStorage.setItem(Jh,JSON.stringify({}))):console.log("item not found")})}Ln(!1),ai(!1),Gr(!1),Bi(!1),Ui(!1),Pi(0),p.rolls=!1,p.shakes=!1,p.banana=!1,p.puppy=!1,p.drinks=!1,oi(""),br([]),Vr([]),li(0),Ts("")}};B.useEffect(()=>{localStorage.setItem(Jh,JSON.stringify(cr)),console.log("Updated Items",cr)},[cr]);const[Es,oi]=B.useState(""),[fs,br]=B.useState([]),[Pr,Vr]=B.useState([]),[ra,li]=B.useState(0),[Wa,Ts]=B.useState(""),Ti=Ae=>{var Ke=Ae.target.value;Ke=="rolls"?p.rolls==!0?(p.rolls=!1,oi("")):(p.rolls=!0,oi(Ke)):Ke=="shakes"?p.shakes===!0?(p.shakes=!1,oi("")):(p.shakes=!0,oi(Ke)):Ke=="banana"?p.banana===!0?(p.banana=!1,oi("")):(p.banana=!0,oi(Ke)):Ke=="puppy"?p.puppy===!0?(p.puppy=!1,oi("")):(p.puppy=!0,oi(Ke)):Ke=="drinks"&&(p.drinks===!0?(p.drinks=!1,oi("")):(p.drinks=!0,oi(Ke)))},[Oe,Kt]=B.useState([]),[ln,Ai]=B.useState(""),[yt,_e]=B.useState(""),[Ue,vt]=B.useState([]);B.useEffect(()=>{Et.get("/topping").then(Ae=>{const Ke=Ae.data;vt(Ke)}).catch(Ae=>{console.log("Error",Ae)}),Et.get("/ingrediente").then(Ae=>{const Ke=Ae.data;Kt(Ke)}).catch(Ae=>{console.log("Error",Ae)})},[]),B.useEffect(()=>{if(ln!==""){console.log("Ingrediente a Buscar",ln);const Ae={nombre:ln};Et.get("/ingrediente",{params:Ae}).then(Ke=>{console.log("Ingredientes encontrados",Ke.data),Kt(Ke.data)}).catch(Ke=>{console.log("Error",Ke)})}else ln===""&&(console.log("Ingrediente a Buscar",ln),Et.get("/ingrediente").then(Ae=>{console.log("Ingredientes encontrados",Ae.data),Kt(Ae.data)}).catch(Ae=>{console.log("Error",Ae)}))},[ln]),B.useEffect(()=>{if(yt!==""){const Ae={nombre:yt};Et.get("/topping",{params:Ae}).then(Ke=>{vt(Ke.data)}).catch(Ke=>{console.log("Error",Ke)})}else yt===""&&Et.get("/topping").then(Ae=>{vt(Ae.data)}).catch(Ae=>{console.log("Error",Ae)})},[yt]);const Lt=Ae=>{Ai(Ae.target.value)},Gt=Ae=>{_e(Ae.target.value)},bn=Ae=>{Ts(Ae.target.value)},Sn=Ae=>{if(Ae.target.classList.contains("active")){if(Ae.target.classList.remove("active"),Ae.target.classList.contains("ingredients")){const Ke=fs.filter(Nt=>Nt!==Ae.target.value);br(Ke)}else if(Ae.target.classList.contains("toppings"))if(Ae.target.value!="No toppings"){const Ke=Pr.filter(Nt=>Nt!==Ae.target.value);Vr(Ke)}else Vr([])}else Ae.target.classList.contains("active")||(Ae.target.classList.add("active"),Ae.target.classList.contains("ingredients")?br(Ke=>[...Ke,Ae.target.value]):Ae.target.classList.contains("toppings")&&(Ae.target.value!="No toppings"?Vr(Ke=>[...Ke,Ae.target.value]):Vr([])))};return _.jsxs("div",{className:Ss?"bg-dark order-container shadow-lg":"d-none bg-dark order-container",style:{height:"100vh",zIndex:"1000"},children:[_.jsxs(Wt,{show:pn,onHide:rn,children:[_.jsx(Wt.Header,{closeButton:!0,children:_.jsx(Wt.Title,{children:"Detalles de la Orden"})}),_.jsx(Wt.Body,{className:"overflow-scroll detalles-body",children:_.jsxs("div",{className:a[gn._id]?"detalle-de-orden d-flex flex-column bg-primary-subtle p-2":"d-flex  flex-column",children:[_.jsx("div",{className:"d-flex flex-column overflow-scroll bg-secondary-subtle",children:(gn==null?void 0:gn.items)&&gn.items.map((Ae,Ke)=>{var Nt;return _.jsxs("div",{className:"border-bottom border-dark p-3",children:[_.jsxs("div",{className:"d-flex flex-column mb-2",children:[_.jsx("div",{className:"fw-bold",children:"Tipo:"}),_.jsxs("div",{children:[Ae.type==="rolls"&&"Rolls",Ae.type==="banana"&&"Banana Split",Ae.type==="shakes"&&"Shakes",Ae.type==="puppy"&&"Puppy Rolls",Ae.type==="drinks"&&"Drinks"]})]}),Ae.type!=="drinks"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"d-flex flex-column mb-2",children:[_.jsx("div",{className:"fw-bold",children:"Ingredientes:"}),_.jsx("ul",{className:"list-group list-group-flush",children:(Nt=Ae.ings)==null?void 0:Nt.map((an,Bt)=>_.jsx("li",{className:"list-group-item bg-transparent ps-0",children:an},Bt))})]}),_.jsxs("div",{className:"d-flex flex-column mb-2",children:[_.jsx("div",{className:"fw-bold",children:"Toppings por helado:"}),_.jsx("ul",{className:"list-group list-group-flush",children:Object.entries(Ae.tops||{}).map(([an,Bt])=>_.jsxs("li",{className:"list-group-item bg-transparent ps-0",children:[_.jsxs("strong",{children:["Helado #",parseInt(an)+1,":"]}),Bt.length>0?_.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:Bt.map((Ct,Qn)=>_.jsx("span",{className:"badge bg-primary p-2 fs-6 rounded-pill",children:Ct},Qn))}):_.jsx("span",{className:"text-muted ms-2",children:"Ninguno"})]},an))})]})]}),_.jsxs("div",{className:"d-flex flex-column mb-2",children:[_.jsx("div",{className:"fw-bold",children:"Cantidad:"}),_.jsx("div",{children:Ae.qty})]}),_.jsxs("div",{className:"d-flex flex-column",children:[_.jsx("div",{className:"fw-bold",children:"Comentarios:"}),_.jsx("div",{children:Ae.comments||_.jsx("span",{className:"text-muted",children:"Ninguno"})})]})]},Ke)})}),_.jsx("div",{className:"d-flex flex-column bg-light",children:_.jsxs("div",{className:"fw-bold d-flex flex-row",children:[_.jsx("div",{className:"",children:"Payment Method:"}),_.jsx("div",{className:"fw-normal d-flex justify-content-center align-items-center",children:gn.payment_method})]})}),_.jsxs("div",{className:"fw-bold d-flex flex-row bg-light",children:[_.jsx("div",{className:"",children:"Total to Pay:"}),_.jsx("div",{className:"fw-normal d-flex justify-content-center align-items-center",children:_.jsx(Wf,{value:gn.total})})]})]})}),_.jsx(Wt.Footer,{children:_.jsx(so,{variant:"secondary",onClick:rn,children:"Close"})})]}),_.jsxs(Wt,{show:Se,onHide:Ze,children:[_.jsx(Wt.Header,{closeButton:!0,children:_.jsx(Wt.Title,{children:"Deleting Order"})}),_.jsx(Wt.Body,{children:"Warning, you're about to delete an order!"}),_.jsxs(Wt.Footer,{children:[_.jsx(so,{variant:"secondary",onClick:Ze,children:"Cancel"}),_.jsx("button",{className:"btn btn-primary",onClick:()=>Xe(ut),children:"Delete"})]})]}),_.jsxs("div",{className:"",children:[_.jsxs("div",{className:"d-flex flex-column text-center",style:{height:"15vh"},children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between",children:[_.jsx(oo,{children:_.jsx(oo.Link,{to:"/",as:md,className:"btn text-light p-3 w-100 text-center",children:"Home"})}),_.jsx("button",{className:"p-3 btn btn-outline-primary closeShowOrders text-light",onClick:zr,children:"Close"})]}),_.jsx("div",{className:"d-flex flex-row w-100 justify-content-between p-3 text-start text-light",children:_.jsx("div",{className:"",children:"Órdenes Pendientes"})})]}),_.jsx("div",{className:"ordenes-esperando overflow-scroll rounded-3",children:n&&n.length>0?_.jsx("div",{className:"list-group",children:n.map(Ae=>_.jsx("div",{children:_.jsxs("div",{className:Ae.status=="done"?"bg-success-subtle list-group-item list-group-item-action p-3 d-flex flex-row justify-content-between":" list-group-item list-group-item-action p-3 d-flex flex-row justify-content-between",children:[_.jsx("button",{className:"btn",onClick:()=>Wr(Ae),children:Ae.client_name}),_.jsx("div",{className:"",children:_.jsx("button",{className:"btn text-secondary",onClick:()=>it(Ae._id),children:"Delete"})})]})},Ae._id))}):_.jsx("div",{className:"text-secondary text-center h-100 w-100 d-flex bg-dark justify-content-center align-items-center",children:"No Hay Órdenes"})})]}),_.jsxs("div",{className:"d-flex flex-column",children:[_.jsxs("div",{className:"p-3 d-flex justify-content-between",children:[_.jsx("div",{className:"text-light",children:"Current Order"}),_.jsx("button",{className:"rounded-3 bg-light border-light border-top-0 border-end-0 border-start-0 border-bottom-1 p-2",onClick:oe,children:"Clear"})]}),_.jsxs("div",{className:" w-100  p-3 d-flex flex-row justify-content-between",style:{zIndex:"1"},children:[_.jsxs("div",{className:"",children:[_.jsxs("div",{className:"text-light",children:["Client: ",S]}),_.jsxs("div",{className:"text-light",children:["Total: ",_.jsx(Wf,{value:Z,currency:"USD"})]})]}),_.jsx("button",{className:"rounded-3 bg-light border-light border-top-0 border-end-0 border-start-0 border-bottom-1 p-2",onClick:ye,children:"Edit Order"})]}),_.jsxs("div",{children:[_.jsx("div",{className:"orden-de-ahora overflow-auto mt-3 text-light",style:{height:"30vh"},children:x.items&&x.items.length>0?x.items.map(Ae=>{var Ke;return _.jsx("div",{className:"border border-light d-flex flex-row p-3 ",children:_.jsxs("div",{className:"w-100 pe-3 ",children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center mb-2",children:[_.jsxs("h5",{className:"mb-2 text-warning",children:[Ae.type==="rolls"&&"Rollitos",Ae.type==="banana"&&"Banana Split",Ae.type==="shakes"&&"Batidas",Ae.type==="puppy"&&"Puppy Rolls",Ae.type==="drinks"&&"Bebidas"]}),_.jsx("div",{className:"d-flex justify-content-center align-items-center w-25",children:_.jsx("button",{className:"btn btn-outline-danger",onClick:()=>Ie(Ae.item_id),children:"Eliminar"})})]}),Ae.type!=="drinks"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"mb-2",children:[_.jsx("strong",{className:"text-success-subtle",children:"Ingredientes:"}),_.jsx("ul",{className:"list-group list-group-flush mt-1 text-light",children:(Ke=Ae.ings)==null?void 0:Ke.map((Nt,an)=>_.jsx("li",{className:"list-group-item bg-transparent ps-0",children:_.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:_.jsx("span",{className:"badge bg-success fs-6 p-2 rounded-pill",children:Nt},an)})},an))})]}),_.jsxs("div",{className:"mb-2",children:[_.jsx("strong",{className:"",children:"Toppings por helado:"}),_.jsx("ul",{className:"list-group list-group-flush mt-1",children:Object.entries(Ae.tops||{}).map(([Nt,an])=>_.jsxs("li",{className:"list-group-item bg-transparent ps-0",children:[_.jsxs("strong",{className:"text-light",children:["Helado #",parseInt(Nt)+1,":"]})," ",an.length>0?_.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:an.map((Bt,Ct)=>_.jsx("span",{className:"badge bg-primary fs-6 p-2 rounded-pill",children:Bt},Ct))}):_.jsx("span",{className:"text-muted ms-2",children:"Ninguno"})]},Nt))})]})]}),_.jsxs("div",{className:"mb-2",children:[_.jsx("strong",{children:"Cantidad:"}),_.jsx("div",{className:"text-danger",children:_.jsx("span",{className:"badge bg-danger fs-6 p-2 rounded-pill",children:Ae.qty})})]}),Ae.comments&&_.jsxs("div",{className:"mb-2",children:[_.jsx("strong",{children:"Comentarios:"})," ",Ae.comments]})]})},Ae.item_id)}):_.jsx("div",{className:"text-secondary text-center h-100 w-100 d-flex bg-dark justify-content-center align-items-center",children:"No Hay Items en la Orden"})}),_.jsx("div",{className:"botones-actiones d-flex align-items-center justify-content-around flex-column gap-3 bg-dark",children:_.jsxs("div",{className:"d-flex flex-row w-100 justify-content-around align-items-center",children:[_.jsx("button",{type:"button",onClick:$t,className:"d-flex btn btn-primary rounded-pill p-3",children:" Additional Charge"}),_.jsx("button",{type:"button",onClick:ae,className:"btn btn-success p-3 rounded-pill",children:"Send Order"})]})})]})]}),_.jsxs(Wt,{show:r,onHide:be,centered:!0,size:"xl",children:[_.jsxs(Wt.Header,{closeButton:!0,children:[_.jsx(Wt.Title,{children:"Editando Orden"}),_.jsx("div",{className:"text-danger",children:ze})]}),_.jsx(Wt.Body,{className:"overflow-scroll detalles-body",children:_.jsx("div",{className:" bg-secondary-subtle overflow-scroll",children:x?(x==null?void 0:x.items)&&x.items.map(Ae=>_.jsx("div",{className:"border-bottom border-dark d-flex flex-row ",children:_.jsxs("div",{className:"w-100 p-3",children:[_.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Xi(Ae.item_id,"type"),children:[_.jsx("div",{className:"",children:"Type:"}),_.jsxs("ul",{className:"",children:[Ae.type==="rolls"&&"Rolls",Ae.type==="banana"&&"Banana Split",Ae.type==="shakes"&&"Shakes",Ae.type==="puppy"&&"Puppy Rolls",Ae.type==="drinks"&&"Drinks"]})]}),_.jsxs("div",{style:Ht&&Cn===Ae.item_id?{display:"flex"}:{display:"none"},className:"mt-3 mb-3 flex-column  w-100 justify-content-center align-items-center bg-primary-subtle",children:[_.jsxs("div",{className:" d-flex flex-row w-100 justify-content-around align-items-center ",style:{pointerEvents:"none"},children:[_.jsx("div",{className:" me-1",children:_.jsx("button",{style:{pointerEvents:"auto"},className:p.rolls?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"rolls",onClick:Ti,children:"Rolls"})}),_.jsx("div",{className:" ms-1 me-1",children:_.jsx("button",{style:{pointerEvents:"auto"},className:p.shakes?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"shakes",onClick:Ti,children:"Shakes"})}),_.jsx("div",{className:" ms-1 me-1",children:_.jsx("button",{style:{pointerEvents:"auto"},className:p.banana?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"banana",onClick:Ti,children:"Banana"})}),_.jsx("div",{className:" ms-1 me-1",children:_.jsx("button",{style:{pointerEvents:"auto"},className:p.puppy?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"puppy",onClick:Ti,children:"Puppy"})}),_.jsx("div",{className:" ms-1 me-1",children:_.jsx("button",{style:{pointerEvents:"auto"},className:p.drinks?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"drinks",onClick:Ti,children:"Drinks"})})]}),_.jsx("button",{className:Es??Es!=Ae.type??Es!=""?"btn btn-primary p-2 mt-1 w-100":"btn btn-outline-secondary p-2 mt-1 w-100 disabled",onClick:()=>Zr(x.items,Ae.item_id,"type",Es,Ae.type,0),children:"Guardar"})]}),_.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Xi(Ae.item_id,"ings"),children:[Ae&&Ae.type!=="drinks"&&_.jsx("div",{className:"",children:"Ingredients:"}),_.jsx("ul",{className:"d-flex flex-column justify-content-start align-items-start",children:Ae&&Ae.type!=="drinks"&&Ae.ings.map(Ke=>_.jsx("li",{children:Ke}))})]}),_.jsxs("div",{style:_s&&Cn===Ae.item_id?{display:"flex"}:{display:"none"},className:" flex-column bg-primary-subtle",children:[_.jsx("div",{className:"w-100",children:_.jsx("input",{type:"text",className:"p-1 w-100",onChange:Lt,placeholder:"Buscar ingrediente"})}),_.jsx("div",{className:"d-flex flex-row overflow-scroll",children:Oe.map(Ke=>_.jsx("button",{className:"btn btn-outline-secondary m-1 ingredients p-3",value:Ke.nombre,onClick:Sn,children:Ke.nombre}))}),_.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[_.jsx("div",{className:"",children:"Ingredientes nuevos para este item"}),_.jsx("ul",{className:"d-flex flex-row justify-content-around align-items-center w-100",children:fs&&fs.length!=0&&fs.map(Ke=>_.jsx("li",{children:Ke}))})]}),_.jsx("button",{className:fs.length!==0?"btn btn-primary p-2 mt-1 w-100":"btn btn-outline-secondary p-2 mt-1 w-100 disabled",onClick:()=>Zr(x.items,Ae.item_id,"ings",fs,Ae.ings,0),children:"Guardar"})]}),_.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Xi(Ae.item_id,"tops"),children:[Ae&&Ae.type!=="drinks"&&_.jsx("div",{className:"",children:"Toppings:"}),"                        ",_.jsx("ul",{children:Ae&&Ae.type!=="drinks"&&Ae.tops.map(Ke=>_.jsx("li",{className:"",children:Ke}))})]}),_.jsxs("div",{style:xr&&Cn===Ae.item_id?{display:"flex"}:{display:"none"},className:" flex-column bg-primary-subtle",children:[_.jsx("div",{className:"w-100",children:_.jsx("input",{type:"text",className:"p-1 w-100",onChange:Gt,placeholder:"Buscar topping"})}),_.jsxs("div",{className:"d-flex flex-row overflow-scroll",children:[_.jsx("button",{className:"btn btn-outline-secondary m-1 toppings p-3",value:"No toppings",onClick:Sn,children:"No toppings"}),Ue.map(Ke=>_.jsx("button",{className:"btn btn-outline-secondary m-1 toppings p-3",value:Ke.nombre,onClick:Sn,children:Ke.nombre}))]}),_.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[_.jsx("div",{className:"",children:"Toppings nuevos para este item"}),_.jsx("ul",{className:"d-flex flex-row justify-content-around align-items-center w-100",children:Pr&&Pr.length!=0&&Pr.map(Ke=>_.jsx("li",{children:Ke}))})]}),_.jsx("button",{className:"btn btn-primary p-2 mt-1 w-100",onClick:()=>Zr(x.items,Ae.item_id,"tops",Pr,Ae.tops,0),children:"Guardar"})]}),_.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Xi(Ae.item_id,"qty"),children:[_.jsx("div",{className:"",children:"Qty:"}),_.jsx("ul",{className:"",children:Ae.qty})]}),_.jsxs("div",{style:Dt&&Cn===Ae.item_id?{display:"flex"}:{display:"none"},className:" flex-column bg-primary-subtle justify-content-center align-items-center w-100",children:[_.jsxs("div",{className:" d-flex flex-row w-100 justify-content-around p-2",children:[_.jsx("div",{className:"",children:_.jsx("button",{className:"btn btn-outline-primary rounded-pill",onClick:ds,children:"-"})}),_.jsx("div",{className:"",children:ra}),_.jsx("div",{className:"",children:_.jsx("button",{className:"btn btn-outline-primary rounded-pill",onClick:Rr,children:"+"})})]}),_.jsx("button",{className:"btn btn-primary p-2 mt-1 w-100",onClick:()=>Zr(x.items,Ae.item_id,"qty",Es,Ae.type,ra),children:"Guardar"})]}),_.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Xi(Ae.item_id,"comments"),children:[_.jsx("div",{className:"",children:"Comments:"}),_.jsx("ul",{className:"",children:Ae.comments})]}),_.jsxs("div",{style:Qr&&Cn===Ae.item_id?{display:"flex"}:{display:"none"},className:"p-2 flex-column bg-primary-subtle align-items-center justify-content-center",children:[_.jsx("div",{className:"",children:_.jsx("textarea",{name:"",id:"",cols:"60",rows:"4",defaultValue:Wa,onChange:bn,className:"rounded-3"})}),_.jsx("button",{className:"btn btn-primary p-2 mt-1 w-100",onClick:()=>Zr(x.items,Ae.item_id,"comments",Wa,Ae.comments,0),children:"Guardar"})]})]})},Ae.item_id)):_.jsx("div",{className:""})})}),_.jsx(Wt.Footer,{})]}),_.jsxs(Wt,{show:t,onHide:ce,centered:!0,children:[_.jsxs(Wt.Header,{closeButton:!0,children:[_.jsx(Wt.Title,{children:"Método de Pago"}),_.jsx("div",{className:"text-danger",children:ze})]}),_.jsxs(Wt.Body,{className:"w-100",children:[_.jsx("button",{className:"btn btn-warning w-50",onClick:Te,value:"ATH",children:"ATH Móvil"}),_.jsx("button",{className:"btn btn-success w-50",onClick:Te,value:"CASH",children:"CASH"})]}),_.jsxs(Wt.Footer,{children:[_.jsxs("div",{className:"",children:["Método de pago: ",U]}),_.jsx(so,{variant:"secondary",onClick:ce,children:"Close"}),_.jsx(so,{variant:"primary",onClick:ft,children:"Send Order"})]})]}),_.jsxs(Wt,{show:Rt,onHide:en,centered:!0,children:[_.jsx(Wt.Header,{closeButton:!0,children:_.jsx(Wt.Title,{children:"Cargo Adicional"})}),_.jsxs(Wt.Body,{className:"w-100 d-flex flex-row justify-content-between",children:[_.jsx("div",{className:"",children:_.jsx("button",{className:"btn btn-outline-primary rounded-pill p-3",onClick:lt,children:"-"})}),_.jsxs("div",{className:" d-flex flex-row justify-content-center align-items-center",children:[_.jsx("span",{class:"p-3",children:"$"}),_.jsx("input",{type:"number",min:-100,onChange:Pt,id:"charge",value:et,className:"increment-charge bg-secondary-subtle rounded-3 p-3 border-0"})]}),_.jsx("div",{className:"",children:_.jsx("button",{className:"btn btn-outline-primary rounded-pill p-3",onClick:qt,children:"+"})})]}),_.jsxs(Wt.Footer,{children:[_.jsx(so,{variant:"secondary",onClick:en,children:"Cerrar"}),_.jsx(so,{variant:"primary",onClick:Ii,children:"Añadir Cargo"})]})]})]})}var V1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */V1.exports;(function(n,e){(function(){var t,i="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",d=1,h=2,p=4,m=1,v=2,b=1,x=2,w=4,S=8,A=16,C=32,N=64,k=128,R=256,U=512,j=30,D="...",O=800,Z=16,J=1,le=2,H=3,V=1/0,z=9007199254740991,W=17976931348623157e292,te=NaN,fe=4294967295,F=fe-1,K=fe>>>1,ee=[["ary",k],["bind",b],["bindKey",x],["curry",S],["curryRight",A],["flip",U],["partial",C],["partialRight",N],["rearg",R]],ae="[object Arguments]",ce="[object Array]",ye="[object AsyncFunction]",be="[object Boolean]",Te="[object Date]",Xe="[object DOMException]",ze="[object Error]",He="[object Function]",rt="[object GeneratorFunction]",ft="[object Map]",Ie="[object Number]",oe="[object Null]",ut="[object Object]",dt="[object Promise]",Se="[object Proxy]",Qe="[object RegExp]",Ze="[object Set]",it="[object String]",et="[object Symbol]",mt="[object Undefined]",Rt="[object WeakMap]",at="[object WeakSet]",$t="[object ArrayBuffer]",en="[object DataView]",Pt="[object Float32Array]",qt="[object Float64Array]",lt="[object Int8Array]",Ii="[object Int16Array]",pn="[object Int32Array]",or="[object Uint8Array]",gn="[object Uint8ClampedArray]",zn="[object Uint16Array]",Wr="[object Uint32Array]",rn=/\b__p \+= '';/g,Ss=/\b(__p \+=) '' \+/g,Un=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zr=/&(?:amp|lt|gt|quot|#39);/g,ws=/[&<>"']/g,si=RegExp(zr.source),Ht=RegExp(ws.source),Ln=/<%-([\s\S]+?)%>/g,_s=/<%([\s\S]+?)%>/g,ai=/<%=([\s\S]+?)%>/g,xr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gr=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bi=/[\\^$.*+?()[\]{}|]/g,Qr=RegExp(Bi.source),Ui=/^\s+/,_i=/\s/,Ei=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Cn=/\{\n\/\* \[wrapped with (.+)\] \*/,Pi=/,? & /,lr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jr=/[()=,{}\[\]\/\s]/,cr=/\\(\\)?/g,Ki=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xi=/\w*$/,Rr=/^[-+]0x[0-9a-f]+$/i,ds=/^0b[01]+$/i,Zr=/^\[object .+?Constructor\]$/,Es=/^0o[0-7]+$/i,oi=/^(?:0|[1-9]\d*)$/,fs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,br=/($^)/,Pr=/['\n\r\u2028\u2029\\]/g,Vr="\\ud800-\\udfff",ra="\\u0300-\\u036f",li="\\ufe20-\\ufe2f",Wa="\\u20d0-\\u20ff",Ts=ra+li+Wa,Ti="\\u2700-\\u27bf",Oe="a-z\\xdf-\\xf6\\xf8-\\xff",Kt="\\xac\\xb1\\xd7\\xf7",ln="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ai="\\u2000-\\u206f",yt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_e="A-Z\\xc0-\\xd6\\xd8-\\xde",Ue="\\ufe0e\\ufe0f",vt=Kt+ln+Ai+yt,Lt="['’]",Gt="["+Vr+"]",bn="["+vt+"]",Sn="["+Ts+"]",Ae="\\d+",Ke="["+Ti+"]",Nt="["+Oe+"]",an="[^"+Vr+vt+Ae+Ti+Oe+_e+"]",Bt="\\ud83c[\\udffb-\\udfff]",Ct="(?:"+Sn+"|"+Bt+")",Qn="[^"+Vr+"]",In="(?:\\ud83c[\\udde6-\\uddff]){2}",As="[\\ud800-\\udbff][\\udc00-\\udfff]",hs="["+_e+"]",on="\\u200d",Jn="(?:"+Nt+"|"+an+")",cn="(?:"+hs+"|"+an+")",Ni="(?:"+Lt+"(?:d|ll|m|re|s|t|ve))?",za="(?:"+Lt+"(?:D|LL|M|RE|S|T|VE))?",Ds=Ct+"?",es="["+Ue+"]?",Sr="(?:"+on+"(?:"+[Qn,In,As].join("|")+")"+es+Ds+")*",fg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tn=es+Ds+Sr,hg="(?:"+[Ke,In,As].join("|")+")"+tn,pg="(?:"+[Qn+Sn+"?",Sn,In,As,Gt].join("|")+")",vo=RegExp(Lt,"g"),_h=RegExp(Sn,"g"),Tu=RegExp(Bt+"(?="+Bt+")|"+pg+tn,"g"),Au=RegExp([hs+"?"+Nt+"+"+Ni+"(?="+[bn,hs,"$"].join("|")+")",cn+"+"+za+"(?="+[bn,hs+Jn,"$"].join("|")+")",hs+"?"+Jn+"+"+Ni,hs+"+"+za,wh,fg,Ae,hg].join("|"),"g"),Kd=RegExp("["+on+Vr+Ts+Ue+"]"),gg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yg=-1,ci={};ci[Pt]=ci[qt]=ci[lt]=ci[Ii]=ci[pn]=ci[or]=ci[gn]=ci[zn]=ci[Wr]=!0,ci[ae]=ci[ce]=ci[$t]=ci[be]=ci[en]=ci[Te]=ci[ze]=ci[He]=ci[ft]=ci[Ie]=ci[ut]=ci[Qe]=ci[Ze]=ci[it]=ci[Rt]=!1;var Gn={};Gn[ae]=Gn[ce]=Gn[$t]=Gn[en]=Gn[be]=Gn[Te]=Gn[Pt]=Gn[qt]=Gn[lt]=Gn[Ii]=Gn[pn]=Gn[ft]=Gn[Ie]=Gn[ut]=Gn[Qe]=Gn[Ze]=Gn[it]=Gn[et]=Gn[or]=Gn[gn]=Gn[zn]=Gn[Wr]=!0,Gn[ze]=Gn[He]=Gn[Rt]=!1;var Il={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},vg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Lu=parseFloat,Eh=parseInt,Qd=typeof ld=="object"&&ld&&ld.Object===Object&&ld,Th=typeof self=="object"&&self&&self.Object===Object&&self,wr=Qd||Th||Function("return this")(),ga=e&&!e.nodeType&&e,Ls=ga&&!0&&n&&!n.nodeType&&n,Ah=Ls&&Ls.exports===ga,xo=Ah&&Qd.process,Qi=function(){try{var we=Ls&&Ls.require&&Ls.require("util").types;return we||xo&&xo.binding&&xo.binding("util")}catch{}}(),Cu=Qi&&Qi.isArrayBuffer,kl=Qi&&Qi.isDate,Lh=Qi&&Qi.isMap,vc=Qi&&Qi.isRegExp,Ch=Qi&&Qi.isSet,Iu=Qi&&Qi.isTypedArray;function ts(we,Be,Re){switch(Re.length){case 0:return we.call(Be);case 1:return we.call(Be,Re[0]);case 2:return we.call(Be,Re[0],Re[1]);case 3:return we.call(Be,Re[0],Re[1],Re[2])}return we.apply(Be,Re)}function Ih(we,Be,Re,St){for(var Ot=-1,un=we==null?0:we.length;++Ot<un;){var Oi=we[Ot];Be(St,Oi,Re(Oi),we)}return St}function ns(we,Be){for(var Re=-1,St=we==null?0:we.length;++Re<St&&Be(we[Re],Re,we)!==!1;);return we}function Jd(we,Be){for(var Re=we==null?0:we.length;Re--&&Be(we[Re],Re,we)!==!1;);return we}function ku(we,Be){for(var Re=-1,St=we==null?0:we.length;++Re<St;)if(!Be(we[Re],Re,we))return!1;return!0}function Ga(we,Be){for(var Re=-1,St=we==null?0:we.length,Ot=0,un=[];++Re<St;){var Oi=we[Re];Be(Oi,Re,we)&&(un[Ot++]=Oi)}return un}function Ru(we,Be){var Re=we==null?0:we.length;return!!Re&&tt(we,Be,0)>-1}function Rl(we,Be,Re){for(var St=-1,Ot=we==null?0:we.length;++St<Ot;)if(Re(Be,we[St]))return!0;return!1}function Zn(we,Be){for(var Re=-1,St=we==null?0:we.length,Ot=Array(St);++Re<St;)Ot[Re]=Be(we[Re],Re,we);return Ot}function ma(we,Be){for(var Re=-1,St=Be.length,Ot=we.length;++Re<St;)we[Ot+Re]=Be[Re];return we}function bo(we,Be,Re,St){var Ot=-1,un=we==null?0:we.length;for(St&&un&&(Re=we[++Ot]);++Ot<un;)Re=Be(Re,we[Ot],Ot,we);return Re}function Zd(we,Be,Re,St){var Ot=we==null?0:we.length;for(St&&Ot&&(Re=we[--Ot]);Ot--;)Re=Be(Re,we[Ot],Ot,we);return Re}function L(we,Be){for(var Re=-1,St=we==null?0:we.length;++Re<St;)if(Be(we[Re],Re,we))return!0;return!1}var Y=nn("length");function de(we){return we.split("")}function pe(we){return we.match(lr)||[]}function Ce(we,Be,Re){var St;return Re(we,function(Ot,un,Oi){if(Be(Ot,un,Oi))return St=un,!1}),St}function je(we,Be,Re,St){for(var Ot=we.length,un=Re+(St?1:-1);St?un--:++un<Ot;)if(Be(we[un],un,we))return un;return-1}function tt(we,Be,Re){return Be===Be?xa(we,Be,Re):je(we,Ut,Re)}function bt(we,Be,Re,St){for(var Ot=Re-1,un=we.length;++Ot<un;)if(St(we[Ot],Be))return Ot;return-1}function Ut(we){return we!==we}function sn(we,Be){var Re=we==null?0:we.length;return Re?Zi(we,Be)/Re:te}function nn(we){return function(Be){return Be==null?t:Be[we]}}function Rn(we){return function(Be){return we==null?t:we[Be]}}function Di(we,Be,Re,St,Ot){return Ot(we,function(un,Oi,ei){Re=St?(St=!1,un):Be(Re,un,Oi,ei)}),Re}function Ji(we,Be){var Re=we.length;for(we.sort(Be);Re--;)we[Re]=we[Re].value;return we}function Zi(we,Be){for(var Re,St=-1,Ot=we.length;++St<Ot;){var un=Be(we[St]);un!==t&&(Re=Re===t?un:Re+un)}return Re}function Yr(we,Be){for(var Re=-1,St=Array(we);++Re<we;)St[Re]=Be(Re);return St}function qr(we,Be){return Zn(Be,function(Re){return[Re,we[Re]]})}function ya(we){return we&&we.slice(0,Go(we)+1).replace(Ui,"")}function ki(we){return function(Be){return we(Be)}}function va(we,Be){return Zn(Be,function(Re){return we[Re]})}function Pl(we,Be){return we.has(Be)}function Pu(we,Be){for(var Re=-1,St=we.length;++Re<St&&tt(Be,we[Re],0)>-1;);return Re}function Nu(we,Be){for(var Re=we.length;Re--&&tt(Be,we[Re],0)>-1;);return Re}function Du(we,Be){for(var Re=we.length,St=0;Re--;)we[Re]===Be&&++St;return St}var ef=Rn(Il),tf=Rn(vg);function Ou(we){return"\\"+Xd[we]}function is(we,Be){return we==null?t:we[Be]}function Va(we){return Kd.test(we)}function Mu(we){return gg.test(we)}function Fu(we){for(var Be,Re=[];!(Be=we.next()).done;)Re.push(Be.value);return Re}function xc(we){var Be=-1,Re=Array(we.size);return we.forEach(function(St,Ot){Re[++Be]=[Ot,St]}),Re}function Cs(we,Be){return function(Re){return we(Be(Re))}}function So(we,Be){for(var Re=-1,St=we.length,Ot=0,un=[];++Re<St;){var Oi=we[Re];(Oi===Be||Oi===u)&&(we[Re]=u,un[Ot++]=Re)}return un}function Nl(we){var Be=-1,Re=Array(we.size);return we.forEach(function(St){Re[++Be]=St}),Re}function kh(we){var Be=-1,Re=Array(we.size);return we.forEach(function(St){Re[++Be]=[St,St]}),Re}function xa(we,Be,Re){for(var St=Re-1,Ot=we.length;++St<Ot;)if(we[St]===Be)return St;return-1}function ju(we,Be,Re){for(var St=Re+1;St--;)if(we[St]===Be)return St;return St}function zo(we){return Va(we)?Ms(we):Y(we)}function Os(we){return Va(we)?Is(we):de(we)}function Go(we){for(var Be=we.length;Be--&&_i.test(we.charAt(Be)););return Be}var bc=Rn(yc);function Ms(we){for(var Be=Tu.lastIndex=0;Tu.test(we);)++Be;return Be}function Is(we){return we.match(Tu)||[]}function Dl(we){return we.match(Au)||[]}var Vo=function we(Be){Be=Be==null?wr:Fs.defaults(wr.Object(),Be,Fs.pick(wr,mg));var Re=Be.Array,St=Be.Date,Ot=Be.Error,un=Be.Function,Oi=Be.Math,ei=Be.Object,Sc=Be.RegExp,wc=Be.String,Kr=Be.TypeError,Ya=Re.prototype,_c=un.prototype,qa=ei.prototype,wo=Be["__core-js_shared__"],Ka=_c.toString,$n=qa.hasOwnProperty,ba=0,sa=function(){var f=/[^.]+$/.exec(wo&&wo.keys&&wo.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),ui=qa.toString,Li=Ka.call(ei),ur=wr._,Nr=Sc("^"+Ka.call($n).replace(Bi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sa=Ah?Be.Buffer:t,wa=Be.Symbol,Yo=Be.Uint8Array,nf=Sa?Sa.allocUnsafe:t,Bu=Cs(ei.getPrototypeOf,ei),rf=ei.create,js=qa.propertyIsEnumerable,ks=Ya.splice,sf=wa?wa.isConcatSpreadable:t,Ol=wa?wa.iterator:t,Ml=wa?wa.toStringTag:t,Ec=function(){try{var f=vf(ei,"defineProperty");return f({},"",{}),f}catch{}}(),Rh=Be.clearTimeout!==wr.clearTimeout&&Be.clearTimeout,xg=St&&St.now!==wr.Date.now&&St.now,q0=Be.setTimeout!==wr.setTimeout&&Be.setTimeout,Uu=Oi.ceil,$u=Oi.floor,Hu=ei.getOwnPropertySymbols,bg=Sa?Sa.isBuffer:t,K0=Be.isFinite,bb=Ya.join,X0=Cs(ei.keys,ei),Dr=Oi.max,ps=Oi.min,Sb=St.now,wb=Be.parseInt,Q0=Oi.random,Sg=Ya.reverse,af=vf(Be,"DataView"),qo=vf(Be,"Map"),wg=vf(Be,"Promise"),Wu=vf(Be,"Set"),zu=vf(Be,"WeakMap"),of=vf(ei,"create"),Ph=zu&&new zu,Gu={},_b=xf(af),Fl=xf(qo),Xa=xf(wg),Ko=xf(Wu),Eb=xf(zu),lf=wa?wa.prototype:t,_a=lf?lf.valueOf:t,aa=lf?lf.toString:t;function ie(f){if(Ar(f)&&!mn(f)&&!(f instanceof kn)){if(f instanceof oa)return f;if($n.call(f,"__wrapped__"))return KT(f)}return new oa(f)}var Vu=function(){function f(){}return function(g){if(!hr(g))return{};if(rf)return rf(g);f.prototype=g;var T=new f;return f.prototype=t,T}}();function cf(){}function oa(f,g){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=t}ie.templateSettings={escape:Ln,evaluate:_s,interpolate:ai,variable:"",imports:{_:ie}},ie.prototype=cf.prototype,ie.prototype.constructor=ie,oa.prototype=Vu(cf.prototype),oa.prototype.constructor=oa;function kn(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fe,this.__views__=[]}function J0(){var f=new kn(this.__wrapped__);return f.__actions__=Aa(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Aa(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Aa(this.__views__),f}function Tb(){if(this.__filtered__){var f=new kn(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Nh(){var f=this.__wrapped__.value(),g=this.__dir__,T=mn(f),P=g<0,q=T?f.length:0,se=DF(0,q,this.__views__),he=se.start,me=se.end,Le=me-he,Ye=P?me:he-1,qe=this.__iteratees__,nt=qe.length,xt=0,Ft=ps(Le,this.__takeCount__);if(!T||!P&&q==Le&&Ft==Le)return To(f,this.__actions__);var Qt=[];e:for(;Le--&&xt<Ft;){Ye+=g;for(var An=-1,Jt=f[Ye];++An<nt;){var Nn=qe[An],Hn=Nn.iteratee,eo=Nn.type,ua=Hn(Jt);if(eo==le)Jt=ua;else if(!ua){if(eo==J)continue e;break e}}Qt[xt++]=Jt}return Qt}kn.prototype=Vu(cf.prototype),kn.prototype.constructor=kn;function _o(f){var g=-1,T=f==null?0:f.length;for(this.clear();++g<T;){var P=f[g];this.set(P[0],P[1])}}function uf(){this.__data__=of?of(null):{},this.size=0}function _g(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g}function Ab(f){var g=this.__data__;if(of){var T=g[f];return T===l?t:T}return $n.call(g,f)?g[f]:t}function Z0(f){var g=this.__data__;return of?g[f]!==t:$n.call(g,f)}function Lb(f,g){var T=this.__data__;return this.size+=this.has(f)?0:1,T[f]=of&&g===t?l:g,this}_o.prototype.clear=uf,_o.prototype.delete=_g,_o.prototype.get=Ab,_o.prototype.has=Z0,_o.prototype.set=Lb;function Xo(f){var g=-1,T=f==null?0:f.length;for(this.clear();++g<T;){var P=f[g];this.set(P[0],P[1])}}function Cb(){this.__data__=[],this.size=0}function Ib(f){var g=this.__data__,T=xe(g,f);if(T<0)return!1;var P=g.length-1;return T==P?g.pop():ks.call(g,T,1),--this.size,!0}function kb(f){var g=this.__data__,T=xe(g,f);return T<0?t:g[T][1]}function Rb(f){return xe(this.__data__,f)>-1}function ey(f,g){var T=this.__data__,P=xe(T,f);return P<0?(++this.size,T.push([f,g])):T[P][1]=g,this}Xo.prototype.clear=Cb,Xo.prototype.delete=Ib,Xo.prototype.get=kb,Xo.prototype.has=Rb,Xo.prototype.set=ey;function Ea(f){var g=-1,T=f==null?0:f.length;for(this.clear();++g<T;){var P=f[g];this.set(P[0],P[1])}}function Pb(){this.size=0,this.__data__={hash:new _o,map:new(qo||Xo),string:new _o}}function Nb(f){var g=wy(this,f).delete(f);return this.size-=g?1:0,g}function ty(f){return wy(this,f).get(f)}function y(f){return wy(this,f).has(f)}function E(f,g){var T=wy(this,f),P=T.size;return T.set(f,g),this.size+=T.size==P?0:1,this}Ea.prototype.clear=Pb,Ea.prototype.delete=Nb,Ea.prototype.get=ty,Ea.prototype.has=y,Ea.prototype.set=E;function I(f){var g=-1,T=f==null?0:f.length;for(this.__data__=new Ea;++g<T;)this.add(f[g])}function M(f){return this.__data__.set(f,l),this}function G(f){return this.__data__.has(f)}I.prototype.add=I.prototype.push=M,I.prototype.has=G;function X(f){var g=this.__data__=new Xo(f);this.size=g.size}function Q(){this.__data__=new Xo,this.size=0}function ne(f){var g=this.__data__,T=g.delete(f);return this.size=g.size,T}function re(f){return this.__data__.get(f)}function ue(f){return this.__data__.has(f)}function ve(f,g){var T=this.__data__;if(T instanceof Xo){var P=T.__data__;if(!qo||P.length<r-1)return P.push([f,g]),this.size=++T.size,this;T=this.__data__=new Ea(P)}return T.set(f,g),this.size=T.size,this}X.prototype.clear=Q,X.prototype.delete=ne,X.prototype.get=re,X.prototype.has=ue,X.prototype.set=ve;function Pe(f,g){var T=mn(f),P=!T&&bf(f),q=!T&&!P&&Ku(f),se=!T&&!P&&!q&&Yh(f),he=T||P||q||se,me=he?Yr(f.length,wc):[],Le=me.length;for(var Ye in f)(g||$n.call(f,Ye))&&!(he&&(Ye=="length"||q&&(Ye=="offset"||Ye=="parent")||se&&(Ye=="buffer"||Ye=="byteLength"||Ye=="byteOffset")||Dc(Ye,Le)))&&me.push(Ye);return me}function Ne(f){var g=f.length;return g?f[gf(0,g-1)]:t}function Ee(f,g){return _y(Aa(f),Mt(g,0,f.length))}function Ve(f){return _y(Aa(f))}function Me(f,g,T){(T!==t&&!il(f[g],T)||T===t&&!(g in f))&&gt(f,g,T)}function ge(f,g,T){var P=f[g];(!($n.call(f,g)&&il(P,T))||T===t&&!(g in f))&&gt(f,g,T)}function xe(f,g){for(var T=f.length;T--;)if(il(f[T][0],g))return T;return-1}function We(f,g,T,P){return Fn(f,function(q,se,he){g(P,q,T(q),he)}),P}function Je(f,g){return f&&Ul(g,gs(g),f)}function Ge(f,g){return f&&Ul(g,Ca(g),f)}function gt(f,g,T){g=="__proto__"&&Ec?Ec(f,g,{configurable:!0,enumerable:!0,value:T,writable:!0}):f[g]=T}function ht(f,g){for(var T=-1,P=g.length,q=Re(P),se=f==null;++T<P;)q[T]=se?t:e2(f,g[T]);return q}function Mt(f,g,T){return f===f&&(T!==t&&(f=f<=T?f:T),g!==t&&(f=f>=g?f:g)),f}function ct(f,g,T,P,q,se){var he,me=g&d,Le=g&h,Ye=g&p;if(T&&(he=q?T(f,P,q,se):T(f)),he!==t)return he;if(!hr(f))return f;var qe=mn(f);if(qe){if(he=MF(f),!me)return Aa(f,he)}else{var nt=Hs(f),xt=nt==He||nt==rt;if(Ku(f))return ST(f,me);if(nt==ut||nt==ae||xt&&!q){if(he=Le||xt?{}:UT(f),!me)return Le?TF(f,Ge(he,f)):EF(f,Je(he,f))}else{if(!Gn[nt])return q?f:{};he=FF(f,nt,me)}}se||(se=new X);var Ft=se.get(f);if(Ft)return Ft;se.set(f,he),gA(f)?f.forEach(function(Jt){he.add(ct(Jt,g,T,Jt,f,se))}):hA(f)&&f.forEach(function(Jt,Nn){he.set(Nn,ct(Jt,g,T,Nn,f,se))});var Qt=Ye?Le?Ub:Bb:Le?Ca:gs,An=qe?t:Qt(f);return ns(An||f,function(Jt,Nn){An&&(Nn=Jt,Jt=f[Nn]),ge(he,Nn,ct(Jt,g,T,Nn,f,se))}),he}function Yn(f){var g=gs(f);return function(T){return ti(T,f,g)}}function ti(f,g,T){var P=T.length;if(f==null)return!P;for(f=ei(f);P--;){var q=T[P],se=g[q],he=f[q];if(he===t&&!(q in f)||!se(he))return!1}return!0}function Mn(f,g,T){if(typeof f!="function")throw new Kr(a);return Ig(function(){f.apply(t,T)},g)}function yn(f,g,T,P){var q=-1,se=Ru,he=!0,me=f.length,Le=[],Ye=g.length;if(!me)return Le;T&&(g=Zn(g,ki(T))),P?(se=Rl,he=!1):g.length>=r&&(se=Pl,he=!1,g=new I(g));e:for(;++q<me;){var qe=f[q],nt=T==null?qe:T(qe);if(qe=P||qe!==0?qe:0,he&&nt===nt){for(var xt=Ye;xt--;)if(g[xt]===nt)continue e;Le.push(qe)}else se(g,nt,P)||Le.push(qe)}return Le}var Fn=AT(er),di=AT(_r,!0);function dn(f,g){var T=!0;return Fn(f,function(P,q,se){return T=!!g(P,q,se),T}),T}function $i(f,g,T){for(var P=-1,q=f.length;++P<q;){var se=f[P],he=g(se);if(he!=null&&(me===t?he===he&&!Za(he):T(he,me)))var me=he,Le=se}return Le}function Bs(f,g,T,P){var q=f.length;for(T=_n(T),T<0&&(T=-T>q?0:q+T),P=P===t||P>q?q:_n(P),P<0&&(P+=q),P=T>P?0:yA(P);T<P;)f[T++]=g;return f}function dr(f,g){var T=[];return Fn(f,function(P,q,se){g(P,q,se)&&T.push(P)}),T}function ni(f,g,T,P,q){var se=-1,he=f.length;for(T||(T=BF),q||(q=[]);++se<he;){var me=f[se];g>0&&T(me)?g>1?ni(me,g-1,T,P,q):ma(q,me):P||(q[q.length]=me)}return q}var qn=LT(),Us=LT(!0);function er(f,g){return f&&qn(f,g,gs)}function _r(f,g){return f&&Us(f,g,gs)}function Er(f,g){return Ga(g,function(T){return Oc(f[T])})}function fr(f,g){g=nl(g,f);for(var T=0,P=g.length;f!=null&&T<P;)f=f[$l(g[T++])];return T&&T==P?f:t}function la(f,g,T){var P=g(f);return mn(f)?P:ma(P,T(f))}function Mi(f){return f==null?f===t?mt:oe:Ml&&Ml in ei(f)?NF(f):VF(f)}function Tr(f,g){return f>g}function Qo(f,g){return f!=null&&$n.call(f,g)}function Tc(f,g){return f!=null&&g in ei(f)}function Yu(f,g,T){return f>=ps(g,T)&&f<Dr(g,T)}function Eo(f,g,T){for(var P=T?Rl:Ru,q=f[0].length,se=f.length,he=se,me=Re(se),Le=1/0,Ye=[];he--;){var qe=f[he];he&&g&&(qe=Zn(qe,ki(g))),Le=ps(qe.length,Le),me[he]=!T&&(g||q>=120&&qe.length>=120)?new I(he&&qe):t}qe=f[0];var nt=-1,xt=me[0];e:for(;++nt<q&&Ye.length<Le;){var Ft=qe[nt],Qt=g?g(Ft):Ft;if(Ft=T||Ft!==0?Ft:0,!(xt?Pl(xt,Qt):P(Ye,Qt,T))){for(he=se;--he;){var An=me[he];if(!(An?Pl(An,Qt):P(f[he],Qt,T)))continue e}xt&&xt.push(Qt),Ye.push(Ft)}}return Ye}function tr(f,g,T,P){return er(f,function(q,se,he){g(P,T(q),se,he)}),P}function Ac(f,g,T){g=nl(g,f),f=zT(f,g);var P=f==null?f:f[$l(Co(g))];return P==null?t:ts(P,f,T)}function Eg(f){return Ar(f)&&Mi(f)==ae}function ny(f){return Ar(f)&&Mi(f)==$t}function Dh(f){return Ar(f)&&Mi(f)==Te}function Jo(f,g,T,P,q){return f===g?!0:f==null||g==null||!Ar(f)&&!Ar(g)?f!==f&&g!==g:Oh(f,g,T,P,Jo,q)}function Oh(f,g,T,P,q,se){var he=mn(f),me=mn(g),Le=he?ce:Hs(f),Ye=me?ce:Hs(g);Le=Le==ae?ut:Le,Ye=Ye==ae?ut:Ye;var qe=Le==ut,nt=Ye==ut,xt=Le==Ye;if(xt&&Ku(f)){if(!Ku(g))return!1;he=!0,qe=!1}if(xt&&!qe)return se||(se=new X),he||Yh(f)?FT(f,g,T,P,q,se):RF(f,g,Le,T,P,q,se);if(!(T&m)){var Ft=qe&&$n.call(f,"__wrapped__"),Qt=nt&&$n.call(g,"__wrapped__");if(Ft||Qt){var An=Ft?f.value():f,Jt=Qt?g.value():g;return se||(se=new X),q(An,Jt,T,P,se)}}return xt?(se||(se=new X),PF(f,g,T,P,q,se)):!1}function Qa(f){return Ar(f)&&Hs(f)==ft}function jl(f,g,T,P){var q=T.length,se=q,he=!P;if(f==null)return!se;for(f=ei(f);q--;){var me=T[q];if(he&&me[2]?me[1]!==f[me[0]]:!(me[0]in f))return!1}for(;++q<se;){me=T[q];var Le=me[0],Ye=f[Le],qe=me[1];if(he&&me[2]){if(Ye===t&&!(Le in f))return!1}else{var nt=new X;if(P)var xt=P(Ye,qe,Le,f,g,nt);if(!(xt===t?Jo(qe,Ye,m|v,P,nt):xt))return!1}}return!0}function Lc(f){if(!hr(f)||$F(f))return!1;var g=Oc(f)?Nr:Zr;return g.test(xf(f))}function iy(f){return Ar(f)&&Mi(f)==Qe}function Mh(f){return Ar(f)&&Hs(f)==Ze}function ry(f){return Ar(f)&&Iy(f.length)&&!!ci[Mi(f)]}function df(f){return typeof f=="function"?f:f==null?Ia:typeof f=="object"?mn(f)?jh(f[0],f[1]):ay(f):CA(f)}function ff(f){if(!Cg(f))return X0(f);var g=[];for(var T in ei(f))$n.call(f,T)&&T!="constructor"&&g.push(T);return g}function Fh(f){if(!hr(f))return GF(f);var g=Cg(f),T=[];for(var P in f)P=="constructor"&&(g||!$n.call(f,P))||T.push(P);return T}function Cc(f,g){return f<g}function sy(f,g){var T=-1,P=La(f)?Re(f.length):[];return Fn(f,function(q,se,he){P[++T]=g(q,se,he)}),P}function ay(f){var g=Hb(f);return g.length==1&&g[0][2]?HT(g[0][0],g[0][1]):function(T){return T===f||jl(T,f,g)}}function jh(f,g){return zb(f)&&$T(g)?HT($l(f),g):function(T){var P=e2(T,f);return P===t&&P===g?t2(T,f):Jo(g,P,m|v)}}function Ja(f,g,T,P,q){f!==g&&qn(g,function(se,he){if(q||(q=new X),hr(se))Db(f,g,he,T,Ja,P,q);else{var me=P?P(Vb(f,he),se,he+"",f,g,q):t;me===t&&(me=se),Me(f,he,me)}},Ca)}function Db(f,g,T,P,q,se,he){var me=Vb(f,T),Le=Vb(g,T),Ye=he.get(Le);if(Ye){Me(f,T,Ye);return}var qe=se?se(me,Le,T+"",f,g,he):t,nt=qe===t;if(nt){var xt=mn(Le),Ft=!xt&&Ku(Le),Qt=!xt&&!Ft&&Yh(Le);qe=Le,xt||Ft||Qt?mn(me)?qe=me:Or(me)?qe=Aa(me):Ft?(nt=!1,qe=ST(Le,!0)):Qt?(nt=!1,qe=wT(Le,!0)):qe=[]:kg(Le)||bf(Le)?(qe=me,bf(me)?qe=vA(me):(!hr(me)||Oc(me))&&(qe=UT(Le))):nt=!1}nt&&(he.set(Le,qe),q(qe,Le,P,se,he),he.delete(Le)),Me(f,T,qe)}function oy(f,g){var T=f.length;if(T)return g+=g<0?T:0,Dc(g,T)?f[g]:t}function ly(f,g,T){g.length?g=Zn(g,function(se){return mn(se)?function(he){return fr(he,se.length===1?se[0]:se)}:se}):g=[Ia];var P=-1;g=Zn(g,ki(Xt()));var q=sy(f,function(se,he,me){var Le=Zn(g,function(Ye){return Ye(se)});return{criteria:Le,index:++P,value:se}});return Ji(q,function(se,he){return _F(se,he,T)})}function cy(f,g){return hf(f,g,function(T,P){return t2(f,P)})}function hf(f,g,T){for(var P=-1,q=g.length,se={};++P<q;){var he=g[P],me=fr(f,he);T(me,he)&&Ic(se,nl(he,f),me)}return se}function uy(f){return function(g){return fr(g,f)}}function Bh(f,g,T,P){var q=P?bt:tt,se=-1,he=g.length,me=f;for(f===g&&(g=Aa(g)),T&&(me=Zn(f,ki(T)));++se<he;)for(var Le=0,Ye=g[se],qe=T?T(Ye):Ye;(Le=q(me,qe,Le,P))>-1;)me!==f&&ks.call(me,Le,1),ks.call(f,Le,1);return f}function pf(f,g){for(var T=f?g.length:0,P=T-1;T--;){var q=g[T];if(T==P||q!==se){var se=q;Dc(q)?ks.call(f,q,1):kc(f,q)}}return f}function gf(f,g){return f+$u(Q0()*(g-f+1))}function mf(f,g,T,P){for(var q=-1,se=Dr(Uu((g-f)/(T||1)),0),he=Re(se);se--;)he[P?se:++q]=f,f+=T;return he}function Uh(f,g){var T="";if(!f||g<1||g>z)return T;do g%2&&(T+=f),g=$u(g/2),g&&(f+=f);while(g);return T}function wn(f,g){return Yb(WT(f,g,Ia),f+"")}function $h(f){return Ne(qh(f))}function dy(f,g){var T=qh(f);return _y(T,Mt(g,0,T.length))}function Ic(f,g,T,P){if(!hr(f))return f;g=nl(g,f);for(var q=-1,se=g.length,he=se-1,me=f;me!=null&&++q<se;){var Le=$l(g[q]),Ye=T;if(Le==="__proto__"||Le==="constructor"||Le==="prototype")return f;if(q!=he){var qe=me[Le];Ye=P?P(qe,Le,me):t,Ye===t&&(Ye=hr(qe)?qe:Dc(g[q+1])?[]:{})}ge(me,Le,Ye),me=me[Le]}return f}var Zo=Ph?function(f,g){return Ph.set(f,g),f}:Ia,fy=Ec?function(f,g){return Ec(f,"toString",{configurable:!0,enumerable:!1,value:i2(g),writable:!0})}:Ia;function hy(f){return _y(qh(f))}function Ta(f,g,T){var P=-1,q=f.length;g<0&&(g=-g>q?0:q+g),T=T>q?q:T,T<0&&(T+=q),q=g>T?0:T-g>>>0,g>>>=0;for(var se=Re(q);++P<q;)se[P]=f[P+g];return se}function py(f,g){var T;return Fn(f,function(P,q,se){return T=g(P,q,se),!T}),!!T}function el(f,g,T){var P=0,q=f==null?P:f.length;if(typeof g=="number"&&g===g&&q<=K){for(;P<q;){var se=P+q>>>1,he=f[se];he!==null&&!Za(he)&&(T?he<=g:he<g)?P=se+1:q=se}return q}return Tg(f,g,Ia,T)}function Tg(f,g,T,P){var q=0,se=f==null?0:f.length;if(se===0)return 0;g=T(g);for(var he=g!==g,me=g===null,Le=Za(g),Ye=g===t;q<se;){var qe=$u((q+se)/2),nt=T(f[qe]),xt=nt!==t,Ft=nt===null,Qt=nt===nt,An=Za(nt);if(he)var Jt=P||Qt;else Ye?Jt=Qt&&(P||xt):me?Jt=Qt&&xt&&(P||!Ft):Le?Jt=Qt&&xt&&!Ft&&(P||!An):Ft||An?Jt=!1:Jt=P?nt<=g:nt<g;Jt?q=qe+1:se=qe}return ps(se,F)}function Ag(f,g){for(var T=-1,P=f.length,q=0,se=[];++T<P;){var he=f[T],me=g?g(he):he;if(!T||!il(me,Le)){var Le=me;se[q++]=he===0?0:he}}return se}function gy(f){return typeof f=="number"?f:Za(f)?te:+f}function $s(f){if(typeof f=="string")return f;if(mn(f))return Zn(f,$s)+"";if(Za(f))return aa?aa.call(f):"";var g=f+"";return g=="0"&&1/f==-1/0?"-0":g}function Bl(f,g,T){var P=-1,q=Ru,se=f.length,he=!0,me=[],Le=me;if(T)he=!1,q=Rl;else if(se>=r){var Ye=g?null:IF(f);if(Ye)return Nl(Ye);he=!1,q=Pl,Le=new I}else Le=g?[]:me;e:for(;++P<se;){var qe=f[P],nt=g?g(qe):qe;if(qe=T||qe!==0?qe:0,he&&nt===nt){for(var xt=Le.length;xt--;)if(Le[xt]===nt)continue e;g&&Le.push(nt),me.push(qe)}else q(Le,nt,T)||(Le!==me&&Le.push(nt),me.push(qe))}return me}function kc(f,g){return g=nl(g,f),f=zT(f,g),f==null||delete f[$l(Co(g))]}function Hh(f,g,T,P){return Ic(f,g,T(fr(f,g)),P)}function Rc(f,g,T,P){for(var q=f.length,se=P?q:-1;(P?se--:++se<q)&&g(f[se],se,f););return T?Ta(f,P?0:se,P?se+1:q):Ta(f,P?se+1:0,P?q:se)}function To(f,g){var T=f;return T instanceof kn&&(T=T.value()),bo(g,function(P,q){return q.func.apply(q.thisArg,ma([P],q.args))},T)}function Ao(f,g,T){var P=f.length;if(P<2)return P?Bl(f[0]):[];for(var q=-1,se=Re(P);++q<P;)for(var he=f[q],me=-1;++me<P;)me!=q&&(se[q]=yn(se[q]||he,f[me],g,T));return Bl(ni(se,1),g,T)}function tl(f,g,T){for(var P=-1,q=f.length,se=g.length,he={};++P<q;){var me=P<se?g[P]:t;T(he,f[P],me)}return he}function qu(f){return Or(f)?f:[]}function yf(f){return typeof f=="function"?f:Ia}function nl(f,g){return mn(f)?f:zb(f,g)?[f]:qT(fi(f))}var Ob=wn;function Lo(f,g,T){var P=f.length;return T=T===t?P:T,!g&&T>=P?f:Ta(f,g,T)}var Wh=Rh||function(f){return wr.clearTimeout(f)};function ST(f,g){if(g)return f.slice();var T=f.length,P=nf?nf(T):new f.constructor(T);return f.copy(P),P}function Mb(f){var g=new f.constructor(f.byteLength);return new Yo(g).set(new Yo(f)),g}function bF(f,g){var T=g?Mb(f.buffer):f.buffer;return new f.constructor(T,f.byteOffset,f.byteLength)}function SF(f){var g=new f.constructor(f.source,Xi.exec(f));return g.lastIndex=f.lastIndex,g}function wF(f){return _a?ei(_a.call(f)):{}}function wT(f,g){var T=g?Mb(f.buffer):f.buffer;return new f.constructor(T,f.byteOffset,f.length)}function _T(f,g){if(f!==g){var T=f!==t,P=f===null,q=f===f,se=Za(f),he=g!==t,me=g===null,Le=g===g,Ye=Za(g);if(!me&&!Ye&&!se&&f>g||se&&he&&Le&&!me&&!Ye||P&&he&&Le||!T&&Le||!q)return 1;if(!P&&!se&&!Ye&&f<g||Ye&&T&&q&&!P&&!se||me&&T&&q||!he&&q||!Le)return-1}return 0}function _F(f,g,T){for(var P=-1,q=f.criteria,se=g.criteria,he=q.length,me=T.length;++P<he;){var Le=_T(q[P],se[P]);if(Le){if(P>=me)return Le;var Ye=T[P];return Le*(Ye=="desc"?-1:1)}}return f.index-g.index}function ET(f,g,T,P){for(var q=-1,se=f.length,he=T.length,me=-1,Le=g.length,Ye=Dr(se-he,0),qe=Re(Le+Ye),nt=!P;++me<Le;)qe[me]=g[me];for(;++q<he;)(nt||q<se)&&(qe[T[q]]=f[q]);for(;Ye--;)qe[me++]=f[q++];return qe}function TT(f,g,T,P){for(var q=-1,se=f.length,he=-1,me=T.length,Le=-1,Ye=g.length,qe=Dr(se-me,0),nt=Re(qe+Ye),xt=!P;++q<qe;)nt[q]=f[q];for(var Ft=q;++Le<Ye;)nt[Ft+Le]=g[Le];for(;++he<me;)(xt||q<se)&&(nt[Ft+T[he]]=f[q++]);return nt}function Aa(f,g){var T=-1,P=f.length;for(g||(g=Re(P));++T<P;)g[T]=f[T];return g}function Ul(f,g,T,P){var q=!T;T||(T={});for(var se=-1,he=g.length;++se<he;){var me=g[se],Le=P?P(T[me],f[me],me,T,f):t;Le===t&&(Le=f[me]),q?gt(T,me,Le):ge(T,me,Le)}return T}function EF(f,g){return Ul(f,Wb(f),g)}function TF(f,g){return Ul(f,jT(f),g)}function my(f,g){return function(T,P){var q=mn(T)?Ih:We,se=g?g():{};return q(T,f,Xt(P,2),se)}}function zh(f){return wn(function(g,T){var P=-1,q=T.length,se=q>1?T[q-1]:t,he=q>2?T[2]:t;for(se=f.length>3&&typeof se=="function"?(q--,se):t,he&&ca(T[0],T[1],he)&&(se=q<3?t:se,q=1),g=ei(g);++P<q;){var me=T[P];me&&f(g,me,P,se)}return g})}function AT(f,g){return function(T,P){if(T==null)return T;if(!La(T))return f(T,P);for(var q=T.length,se=g?q:-1,he=ei(T);(g?se--:++se<q)&&P(he[se],se,he)!==!1;);return T}}function LT(f){return function(g,T,P){for(var q=-1,se=ei(g),he=P(g),me=he.length;me--;){var Le=he[f?me:++q];if(T(se[Le],Le,se)===!1)break}return g}}function AF(f,g,T){var P=g&b,q=Lg(f);function se(){var he=this&&this!==wr&&this instanceof se?q:f;return he.apply(P?T:this,arguments)}return se}function CT(f){return function(g){g=fi(g);var T=Va(g)?Os(g):t,P=T?T[0]:g.charAt(0),q=T?Lo(T,1).join(""):g.slice(1);return P[f]()+q}}function Gh(f){return function(g){return bo(AA(TA(g).replace(vo,"")),f,"")}}function Lg(f){return function(){var g=arguments;switch(g.length){case 0:return new f;case 1:return new f(g[0]);case 2:return new f(g[0],g[1]);case 3:return new f(g[0],g[1],g[2]);case 4:return new f(g[0],g[1],g[2],g[3]);case 5:return new f(g[0],g[1],g[2],g[3],g[4]);case 6:return new f(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new f(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var T=Vu(f.prototype),P=f.apply(T,g);return hr(P)?P:T}}function LF(f,g,T){var P=Lg(f);function q(){for(var se=arguments.length,he=Re(se),me=se,Le=Vh(q);me--;)he[me]=arguments[me];var Ye=se<3&&he[0]!==Le&&he[se-1]!==Le?[]:So(he,Le);if(se-=Ye.length,se<T)return NT(f,g,yy,q.placeholder,t,he,Ye,t,t,T-se);var qe=this&&this!==wr&&this instanceof q?P:f;return ts(qe,this,he)}return q}function IT(f){return function(g,T,P){var q=ei(g);if(!La(g)){var se=Xt(T,3);g=gs(g),T=function(me){return se(q[me],me,q)}}var he=f(g,T,P);return he>-1?q[se?g[he]:he]:t}}function kT(f){return Nc(function(g){var T=g.length,P=T,q=oa.prototype.thru;for(f&&g.reverse();P--;){var se=g[P];if(typeof se!="function")throw new Kr(a);if(q&&!he&&Sy(se)=="wrapper")var he=new oa([],!0)}for(P=he?P:T;++P<T;){se=g[P];var me=Sy(se),Le=me=="wrapper"?$b(se):t;Le&&Gb(Le[0])&&Le[1]==(k|S|C|R)&&!Le[4].length&&Le[9]==1?he=he[Sy(Le[0])].apply(he,Le[3]):he=se.length==1&&Gb(se)?he[me]():he.thru(se)}return function(){var Ye=arguments,qe=Ye[0];if(he&&Ye.length==1&&mn(qe))return he.plant(qe).value();for(var nt=0,xt=T?g[nt].apply(this,Ye):qe;++nt<T;)xt=g[nt].call(this,xt);return xt}})}function yy(f,g,T,P,q,se,he,me,Le,Ye){var qe=g&k,nt=g&b,xt=g&x,Ft=g&(S|A),Qt=g&U,An=xt?t:Lg(f);function Jt(){for(var Nn=arguments.length,Hn=Re(Nn),eo=Nn;eo--;)Hn[eo]=arguments[eo];if(Ft)var ua=Vh(Jt),to=Du(Hn,ua);if(P&&(Hn=ET(Hn,P,q,Ft)),se&&(Hn=TT(Hn,se,he,Ft)),Nn-=to,Ft&&Nn<Ye){var Mr=So(Hn,ua);return NT(f,g,yy,Jt.placeholder,T,Hn,Mr,me,Le,Ye-Nn)}var rl=nt?T:this,Fc=xt?rl[f]:f;return Nn=Hn.length,me?Hn=YF(Hn,me):Qt&&Nn>1&&Hn.reverse(),qe&&Le<Nn&&(Hn.length=Le),this&&this!==wr&&this instanceof Jt&&(Fc=An||Lg(Fc)),Fc.apply(rl,Hn)}return Jt}function RT(f,g){return function(T,P){return tr(T,f,g(P),{})}}function vy(f,g){return function(T,P){var q;if(T===t&&P===t)return g;if(T!==t&&(q=T),P!==t){if(q===t)return P;typeof T=="string"||typeof P=="string"?(T=$s(T),P=$s(P)):(T=gy(T),P=gy(P)),q=f(T,P)}return q}}function Fb(f){return Nc(function(g){return g=Zn(g,ki(Xt())),wn(function(T){var P=this;return f(g,function(q){return ts(q,P,T)})})})}function xy(f,g){g=g===t?" ":$s(g);var T=g.length;if(T<2)return T?Uh(g,f):g;var P=Uh(g,Uu(f/zo(g)));return Va(g)?Lo(Os(P),0,f).join(""):P.slice(0,f)}function CF(f,g,T,P){var q=g&b,se=Lg(f);function he(){for(var me=-1,Le=arguments.length,Ye=-1,qe=P.length,nt=Re(qe+Le),xt=this&&this!==wr&&this instanceof he?se:f;++Ye<qe;)nt[Ye]=P[Ye];for(;Le--;)nt[Ye++]=arguments[++me];return ts(xt,q?T:this,nt)}return he}function PT(f){return function(g,T,P){return P&&typeof P!="number"&&ca(g,T,P)&&(T=P=t),g=Mc(g),T===t?(T=g,g=0):T=Mc(T),P=P===t?g<T?1:-1:Mc(P),mf(g,T,P,f)}}function by(f){return function(g,T){return typeof g=="string"&&typeof T=="string"||(g=Io(g),T=Io(T)),f(g,T)}}function NT(f,g,T,P,q,se,he,me,Le,Ye){var qe=g&S,nt=qe?he:t,xt=qe?t:he,Ft=qe?se:t,Qt=qe?t:se;g|=qe?C:N,g&=~(qe?N:C),g&w||(g&=-4);var An=[f,g,q,Ft,nt,Qt,xt,me,Le,Ye],Jt=T.apply(t,An);return Gb(f)&&GT(Jt,An),Jt.placeholder=P,VT(Jt,f,g)}function jb(f){var g=Oi[f];return function(T,P){if(T=Io(T),P=P==null?0:ps(_n(P),292),P&&K0(T)){var q=(fi(T)+"e").split("e"),se=g(q[0]+"e"+(+q[1]+P));return q=(fi(se)+"e").split("e"),+(q[0]+"e"+(+q[1]-P))}return g(T)}}var IF=Wu&&1/Nl(new Wu([,-0]))[1]==V?function(f){return new Wu(f)}:a2;function DT(f){return function(g){var T=Hs(g);return T==ft?xc(g):T==Ze?kh(g):qr(g,f(g))}}function Pc(f,g,T,P,q,se,he,me){var Le=g&x;if(!Le&&typeof f!="function")throw new Kr(a);var Ye=P?P.length:0;if(Ye||(g&=-97,P=q=t),he=he===t?he:Dr(_n(he),0),me=me===t?me:_n(me),Ye-=q?q.length:0,g&N){var qe=P,nt=q;P=q=t}var xt=Le?t:$b(f),Ft=[f,g,T,P,q,qe,nt,se,he,me];if(xt&&zF(Ft,xt),f=Ft[0],g=Ft[1],T=Ft[2],P=Ft[3],q=Ft[4],me=Ft[9]=Ft[9]===t?Le?0:f.length:Dr(Ft[9]-Ye,0),!me&&g&(S|A)&&(g&=-25),!g||g==b)var Qt=AF(f,g,T);else g==S||g==A?Qt=LF(f,g,me):(g==C||g==(b|C))&&!q.length?Qt=CF(f,g,T,P):Qt=yy.apply(t,Ft);var An=xt?Zo:GT;return VT(An(Qt,Ft),f,g)}function OT(f,g,T,P){return f===t||il(f,qa[T])&&!$n.call(P,T)?g:f}function MT(f,g,T,P,q,se){return hr(f)&&hr(g)&&(se.set(g,f),Ja(f,g,t,MT,se),se.delete(g)),f}function kF(f){return kg(f)?t:f}function FT(f,g,T,P,q,se){var he=T&m,me=f.length,Le=g.length;if(me!=Le&&!(he&&Le>me))return!1;var Ye=se.get(f),qe=se.get(g);if(Ye&&qe)return Ye==g&&qe==f;var nt=-1,xt=!0,Ft=T&v?new I:t;for(se.set(f,g),se.set(g,f);++nt<me;){var Qt=f[nt],An=g[nt];if(P)var Jt=he?P(An,Qt,nt,g,f,se):P(Qt,An,nt,f,g,se);if(Jt!==t){if(Jt)continue;xt=!1;break}if(Ft){if(!L(g,function(Nn,Hn){if(!Pl(Ft,Hn)&&(Qt===Nn||q(Qt,Nn,T,P,se)))return Ft.push(Hn)})){xt=!1;break}}else if(!(Qt===An||q(Qt,An,T,P,se))){xt=!1;break}}return se.delete(f),se.delete(g),xt}function RF(f,g,T,P,q,se,he){switch(T){case en:if(f.byteLength!=g.byteLength||f.byteOffset!=g.byteOffset)return!1;f=f.buffer,g=g.buffer;case $t:return!(f.byteLength!=g.byteLength||!se(new Yo(f),new Yo(g)));case be:case Te:case Ie:return il(+f,+g);case ze:return f.name==g.name&&f.message==g.message;case Qe:case it:return f==g+"";case ft:var me=xc;case Ze:var Le=P&m;if(me||(me=Nl),f.size!=g.size&&!Le)return!1;var Ye=he.get(f);if(Ye)return Ye==g;P|=v,he.set(f,g);var qe=FT(me(f),me(g),P,q,se,he);return he.delete(f),qe;case et:if(_a)return _a.call(f)==_a.call(g)}return!1}function PF(f,g,T,P,q,se){var he=T&m,me=Bb(f),Le=me.length,Ye=Bb(g),qe=Ye.length;if(Le!=qe&&!he)return!1;for(var nt=Le;nt--;){var xt=me[nt];if(!(he?xt in g:$n.call(g,xt)))return!1}var Ft=se.get(f),Qt=se.get(g);if(Ft&&Qt)return Ft==g&&Qt==f;var An=!0;se.set(f,g),se.set(g,f);for(var Jt=he;++nt<Le;){xt=me[nt];var Nn=f[xt],Hn=g[xt];if(P)var eo=he?P(Hn,Nn,xt,g,f,se):P(Nn,Hn,xt,f,g,se);if(!(eo===t?Nn===Hn||q(Nn,Hn,T,P,se):eo)){An=!1;break}Jt||(Jt=xt=="constructor")}if(An&&!Jt){var ua=f.constructor,to=g.constructor;ua!=to&&"constructor"in f&&"constructor"in g&&!(typeof ua=="function"&&ua instanceof ua&&typeof to=="function"&&to instanceof to)&&(An=!1)}return se.delete(f),se.delete(g),An}function Nc(f){return Yb(WT(f,t,JT),f+"")}function Bb(f){return la(f,gs,Wb)}function Ub(f){return la(f,Ca,jT)}var $b=Ph?function(f){return Ph.get(f)}:a2;function Sy(f){for(var g=f.name+"",T=Gu[g],P=$n.call(Gu,g)?T.length:0;P--;){var q=T[P],se=q.func;if(se==null||se==f)return q.name}return g}function Vh(f){var g=$n.call(ie,"placeholder")?ie:f;return g.placeholder}function Xt(){var f=ie.iteratee||r2;return f=f===r2?df:f,arguments.length?f(arguments[0],arguments[1]):f}function wy(f,g){var T=f.__data__;return UF(g)?T[typeof g=="string"?"string":"hash"]:T.map}function Hb(f){for(var g=gs(f),T=g.length;T--;){var P=g[T],q=f[P];g[T]=[P,q,$T(q)]}return g}function vf(f,g){var T=is(f,g);return Lc(T)?T:t}function NF(f){var g=$n.call(f,Ml),T=f[Ml];try{f[Ml]=t;var P=!0}catch{}var q=ui.call(f);return P&&(g?f[Ml]=T:delete f[Ml]),q}var Wb=Hu?function(f){return f==null?[]:(f=ei(f),Ga(Hu(f),function(g){return js.call(f,g)}))}:o2,jT=Hu?function(f){for(var g=[];f;)ma(g,Wb(f)),f=Bu(f);return g}:o2,Hs=Mi;(af&&Hs(new af(new ArrayBuffer(1)))!=en||qo&&Hs(new qo)!=ft||wg&&Hs(wg.resolve())!=dt||Wu&&Hs(new Wu)!=Ze||zu&&Hs(new zu)!=Rt)&&(Hs=function(f){var g=Mi(f),T=g==ut?f.constructor:t,P=T?xf(T):"";if(P)switch(P){case _b:return en;case Fl:return ft;case Xa:return dt;case Ko:return Ze;case Eb:return Rt}return g});function DF(f,g,T){for(var P=-1,q=T.length;++P<q;){var se=T[P],he=se.size;switch(se.type){case"drop":f+=he;break;case"dropRight":g-=he;break;case"take":g=ps(g,f+he);break;case"takeRight":f=Dr(f,g-he);break}}return{start:f,end:g}}function OF(f){var g=f.match(Cn);return g?g[1].split(Pi):[]}function BT(f,g,T){g=nl(g,f);for(var P=-1,q=g.length,se=!1;++P<q;){var he=$l(g[P]);if(!(se=f!=null&&T(f,he)))break;f=f[he]}return se||++P!=q?se:(q=f==null?0:f.length,!!q&&Iy(q)&&Dc(he,q)&&(mn(f)||bf(f)))}function MF(f){var g=f.length,T=new f.constructor(g);return g&&typeof f[0]=="string"&&$n.call(f,"index")&&(T.index=f.index,T.input=f.input),T}function UT(f){return typeof f.constructor=="function"&&!Cg(f)?Vu(Bu(f)):{}}function FF(f,g,T){var P=f.constructor;switch(g){case $t:return Mb(f);case be:case Te:return new P(+f);case en:return bF(f,T);case Pt:case qt:case lt:case Ii:case pn:case or:case gn:case zn:case Wr:return wT(f,T);case ft:return new P;case Ie:case it:return new P(f);case Qe:return SF(f);case Ze:return new P;case et:return wF(f)}}function jF(f,g){var T=g.length;if(!T)return f;var P=T-1;return g[P]=(T>1?"& ":"")+g[P],g=g.join(T>2?", ":" "),f.replace(Ei,`{
/* [wrapped with `+g+`] */
`)}function BF(f){return mn(f)||bf(f)||!!(sf&&f&&f[sf])}function Dc(f,g){var T=typeof f;return g=g??z,!!g&&(T=="number"||T!="symbol"&&oi.test(f))&&f>-1&&f%1==0&&f<g}function ca(f,g,T){if(!hr(T))return!1;var P=typeof g;return(P=="number"?La(T)&&Dc(g,T.length):P=="string"&&g in T)?il(T[g],f):!1}function zb(f,g){if(mn(f))return!1;var T=typeof f;return T=="number"||T=="symbol"||T=="boolean"||f==null||Za(f)?!0:Gr.test(f)||!xr.test(f)||g!=null&&f in ei(g)}function UF(f){var g=typeof f;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?f!=="__proto__":f===null}function Gb(f){var g=Sy(f),T=ie[g];if(typeof T!="function"||!(g in kn.prototype))return!1;if(f===T)return!0;var P=$b(T);return!!P&&f===P[0]}function $F(f){return!!sa&&sa in f}var HF=wo?Oc:l2;function Cg(f){var g=f&&f.constructor,T=typeof g=="function"&&g.prototype||qa;return f===T}function $T(f){return f===f&&!hr(f)}function HT(f,g){return function(T){return T==null?!1:T[f]===g&&(g!==t||f in ei(T))}}function WF(f){var g=Ly(f,function(P){return T.size===c&&T.clear(),P}),T=g.cache;return g}function zF(f,g){var T=f[1],P=g[1],q=T|P,se=q<(b|x|k),he=P==k&&T==S||P==k&&T==R&&f[7].length<=g[8]||P==(k|R)&&g[7].length<=g[8]&&T==S;if(!(se||he))return f;P&b&&(f[2]=g[2],q|=T&b?0:w);var me=g[3];if(me){var Le=f[3];f[3]=Le?ET(Le,me,g[4]):me,f[4]=Le?So(f[3],u):g[4]}return me=g[5],me&&(Le=f[5],f[5]=Le?TT(Le,me,g[6]):me,f[6]=Le?So(f[5],u):g[6]),me=g[7],me&&(f[7]=me),P&k&&(f[8]=f[8]==null?g[8]:ps(f[8],g[8])),f[9]==null&&(f[9]=g[9]),f[0]=g[0],f[1]=q,f}function GF(f){var g=[];if(f!=null)for(var T in ei(f))g.push(T);return g}function VF(f){return ui.call(f)}function WT(f,g,T){return g=Dr(g===t?f.length-1:g,0),function(){for(var P=arguments,q=-1,se=Dr(P.length-g,0),he=Re(se);++q<se;)he[q]=P[g+q];q=-1;for(var me=Re(g+1);++q<g;)me[q]=P[q];return me[g]=T(he),ts(f,this,me)}}function zT(f,g){return g.length<2?f:fr(f,Ta(g,0,-1))}function YF(f,g){for(var T=f.length,P=ps(g.length,T),q=Aa(f);P--;){var se=g[P];f[P]=Dc(se,T)?q[se]:t}return f}function Vb(f,g){if(!(g==="constructor"&&typeof f[g]=="function")&&g!="__proto__")return f[g]}var GT=YT(Zo),Ig=q0||function(f,g){return wr.setTimeout(f,g)},Yb=YT(fy);function VT(f,g,T){var P=g+"";return Yb(f,jF(P,qF(OF(P),T)))}function YT(f){var g=0,T=0;return function(){var P=Sb(),q=Z-(P-T);if(T=P,q>0){if(++g>=O)return arguments[0]}else g=0;return f.apply(t,arguments)}}function _y(f,g){var T=-1,P=f.length,q=P-1;for(g=g===t?P:g;++T<g;){var se=gf(T,q),he=f[se];f[se]=f[T],f[T]=he}return f.length=g,f}var qT=WF(function(f){var g=[];return f.charCodeAt(0)===46&&g.push(""),f.replace(Dt,function(T,P,q,se){g.push(q?se.replace(cr,"$1"):P||T)}),g});function $l(f){if(typeof f=="string"||Za(f))return f;var g=f+"";return g=="0"&&1/f==-1/0?"-0":g}function xf(f){if(f!=null){try{return Ka.call(f)}catch{}try{return f+""}catch{}}return""}function qF(f,g){return ns(ee,function(T){var P="_."+T[0];g&T[1]&&!Ru(f,P)&&f.push(P)}),f.sort()}function KT(f){if(f instanceof kn)return f.clone();var g=new oa(f.__wrapped__,f.__chain__);return g.__actions__=Aa(f.__actions__),g.__index__=f.__index__,g.__values__=f.__values__,g}function KF(f,g,T){(T?ca(f,g,T):g===t)?g=1:g=Dr(_n(g),0);var P=f==null?0:f.length;if(!P||g<1)return[];for(var q=0,se=0,he=Re(Uu(P/g));q<P;)he[se++]=Ta(f,q,q+=g);return he}function XF(f){for(var g=-1,T=f==null?0:f.length,P=0,q=[];++g<T;){var se=f[g];se&&(q[P++]=se)}return q}function QF(){var f=arguments.length;if(!f)return[];for(var g=Re(f-1),T=arguments[0],P=f;P--;)g[P-1]=arguments[P];return ma(mn(T)?Aa(T):[T],ni(g,1))}var JF=wn(function(f,g){return Or(f)?yn(f,ni(g,1,Or,!0)):[]}),ZF=wn(function(f,g){var T=Co(g);return Or(T)&&(T=t),Or(f)?yn(f,ni(g,1,Or,!0),Xt(T,2)):[]}),e6=wn(function(f,g){var T=Co(g);return Or(T)&&(T=t),Or(f)?yn(f,ni(g,1,Or,!0),t,T):[]});function t6(f,g,T){var P=f==null?0:f.length;return P?(g=T||g===t?1:_n(g),Ta(f,g<0?0:g,P)):[]}function n6(f,g,T){var P=f==null?0:f.length;return P?(g=T||g===t?1:_n(g),g=P-g,Ta(f,0,g<0?0:g)):[]}function i6(f,g){return f&&f.length?Rc(f,Xt(g,3),!0,!0):[]}function r6(f,g){return f&&f.length?Rc(f,Xt(g,3),!0):[]}function s6(f,g,T,P){var q=f==null?0:f.length;return q?(T&&typeof T!="number"&&ca(f,g,T)&&(T=0,P=q),Bs(f,g,T,P)):[]}function XT(f,g,T){var P=f==null?0:f.length;if(!P)return-1;var q=T==null?0:_n(T);return q<0&&(q=Dr(P+q,0)),je(f,Xt(g,3),q)}function QT(f,g,T){var P=f==null?0:f.length;if(!P)return-1;var q=P-1;return T!==t&&(q=_n(T),q=T<0?Dr(P+q,0):ps(q,P-1)),je(f,Xt(g,3),q,!0)}function JT(f){var g=f==null?0:f.length;return g?ni(f,1):[]}function a6(f){var g=f==null?0:f.length;return g?ni(f,V):[]}function o6(f,g){var T=f==null?0:f.length;return T?(g=g===t?1:_n(g),ni(f,g)):[]}function l6(f){for(var g=-1,T=f==null?0:f.length,P={};++g<T;){var q=f[g];P[q[0]]=q[1]}return P}function ZT(f){return f&&f.length?f[0]:t}function c6(f,g,T){var P=f==null?0:f.length;if(!P)return-1;var q=T==null?0:_n(T);return q<0&&(q=Dr(P+q,0)),tt(f,g,q)}function u6(f){var g=f==null?0:f.length;return g?Ta(f,0,-1):[]}var d6=wn(function(f){var g=Zn(f,qu);return g.length&&g[0]===f[0]?Eo(g):[]}),f6=wn(function(f){var g=Co(f),T=Zn(f,qu);return g===Co(T)?g=t:T.pop(),T.length&&T[0]===f[0]?Eo(T,Xt(g,2)):[]}),h6=wn(function(f){var g=Co(f),T=Zn(f,qu);return g=typeof g=="function"?g:t,g&&T.pop(),T.length&&T[0]===f[0]?Eo(T,t,g):[]});function p6(f,g){return f==null?"":bb.call(f,g)}function Co(f){var g=f==null?0:f.length;return g?f[g-1]:t}function g6(f,g,T){var P=f==null?0:f.length;if(!P)return-1;var q=P;return T!==t&&(q=_n(T),q=q<0?Dr(P+q,0):ps(q,P-1)),g===g?ju(f,g,q):je(f,Ut,q,!0)}function m6(f,g){return f&&f.length?oy(f,_n(g)):t}var y6=wn(eA);function eA(f,g){return f&&f.length&&g&&g.length?Bh(f,g):f}function v6(f,g,T){return f&&f.length&&g&&g.length?Bh(f,g,Xt(T,2)):f}function x6(f,g,T){return f&&f.length&&g&&g.length?Bh(f,g,t,T):f}var b6=Nc(function(f,g){var T=f==null?0:f.length,P=ht(f,g);return pf(f,Zn(g,function(q){return Dc(q,T)?+q:q}).sort(_T)),P});function S6(f,g){var T=[];if(!(f&&f.length))return T;var P=-1,q=[],se=f.length;for(g=Xt(g,3);++P<se;){var he=f[P];g(he,P,f)&&(T.push(he),q.push(P))}return pf(f,q),T}function qb(f){return f==null?f:Sg.call(f)}function w6(f,g,T){var P=f==null?0:f.length;return P?(T&&typeof T!="number"&&ca(f,g,T)?(g=0,T=P):(g=g==null?0:_n(g),T=T===t?P:_n(T)),Ta(f,g,T)):[]}function _6(f,g){return el(f,g)}function E6(f,g,T){return Tg(f,g,Xt(T,2))}function T6(f,g){var T=f==null?0:f.length;if(T){var P=el(f,g);if(P<T&&il(f[P],g))return P}return-1}function A6(f,g){return el(f,g,!0)}function L6(f,g,T){return Tg(f,g,Xt(T,2),!0)}function C6(f,g){var T=f==null?0:f.length;if(T){var P=el(f,g,!0)-1;if(il(f[P],g))return P}return-1}function I6(f){return f&&f.length?Ag(f):[]}function k6(f,g){return f&&f.length?Ag(f,Xt(g,2)):[]}function R6(f){var g=f==null?0:f.length;return g?Ta(f,1,g):[]}function P6(f,g,T){return f&&f.length?(g=T||g===t?1:_n(g),Ta(f,0,g<0?0:g)):[]}function N6(f,g,T){var P=f==null?0:f.length;return P?(g=T||g===t?1:_n(g),g=P-g,Ta(f,g<0?0:g,P)):[]}function D6(f,g){return f&&f.length?Rc(f,Xt(g,3),!1,!0):[]}function O6(f,g){return f&&f.length?Rc(f,Xt(g,3)):[]}var M6=wn(function(f){return Bl(ni(f,1,Or,!0))}),F6=wn(function(f){var g=Co(f);return Or(g)&&(g=t),Bl(ni(f,1,Or,!0),Xt(g,2))}),j6=wn(function(f){var g=Co(f);return g=typeof g=="function"?g:t,Bl(ni(f,1,Or,!0),t,g)});function B6(f){return f&&f.length?Bl(f):[]}function U6(f,g){return f&&f.length?Bl(f,Xt(g,2)):[]}function $6(f,g){return g=typeof g=="function"?g:t,f&&f.length?Bl(f,t,g):[]}function Kb(f){if(!(f&&f.length))return[];var g=0;return f=Ga(f,function(T){if(Or(T))return g=Dr(T.length,g),!0}),Yr(g,function(T){return Zn(f,nn(T))})}function tA(f,g){if(!(f&&f.length))return[];var T=Kb(f);return g==null?T:Zn(T,function(P){return ts(g,t,P)})}var H6=wn(function(f,g){return Or(f)?yn(f,g):[]}),W6=wn(function(f){return Ao(Ga(f,Or))}),z6=wn(function(f){var g=Co(f);return Or(g)&&(g=t),Ao(Ga(f,Or),Xt(g,2))}),G6=wn(function(f){var g=Co(f);return g=typeof g=="function"?g:t,Ao(Ga(f,Or),t,g)}),V6=wn(Kb);function Y6(f,g){return tl(f||[],g||[],ge)}function q6(f,g){return tl(f||[],g||[],Ic)}var K6=wn(function(f){var g=f.length,T=g>1?f[g-1]:t;return T=typeof T=="function"?(f.pop(),T):t,tA(f,T)});function nA(f){var g=ie(f);return g.__chain__=!0,g}function X6(f,g){return g(f),f}function Ey(f,g){return g(f)}var Q6=Nc(function(f){var g=f.length,T=g?f[0]:0,P=this.__wrapped__,q=function(se){return ht(se,f)};return g>1||this.__actions__.length||!(P instanceof kn)||!Dc(T)?this.thru(q):(P=P.slice(T,+T+(g?1:0)),P.__actions__.push({func:Ey,args:[q],thisArg:t}),new oa(P,this.__chain__).thru(function(se){return g&&!se.length&&se.push(t),se}))});function J6(){return nA(this)}function Z6(){return new oa(this.value(),this.__chain__)}function e8(){this.__values__===t&&(this.__values__=mA(this.value()));var f=this.__index__>=this.__values__.length,g=f?t:this.__values__[this.__index__++];return{done:f,value:g}}function t8(){return this}function n8(f){for(var g,T=this;T instanceof cf;){var P=KT(T);P.__index__=0,P.__values__=t,g?q.__wrapped__=P:g=P;var q=P;T=T.__wrapped__}return q.__wrapped__=f,g}function i8(){var f=this.__wrapped__;if(f instanceof kn){var g=f;return this.__actions__.length&&(g=new kn(this)),g=g.reverse(),g.__actions__.push({func:Ey,args:[qb],thisArg:t}),new oa(g,this.__chain__)}return this.thru(qb)}function r8(){return To(this.__wrapped__,this.__actions__)}var s8=my(function(f,g,T){$n.call(f,T)?++f[T]:gt(f,T,1)});function a8(f,g,T){var P=mn(f)?ku:dn;return T&&ca(f,g,T)&&(g=t),P(f,Xt(g,3))}function o8(f,g){var T=mn(f)?Ga:dr;return T(f,Xt(g,3))}var l8=IT(XT),c8=IT(QT);function u8(f,g){return ni(Ty(f,g),1)}function d8(f,g){return ni(Ty(f,g),V)}function f8(f,g,T){return T=T===t?1:_n(T),ni(Ty(f,g),T)}function iA(f,g){var T=mn(f)?ns:Fn;return T(f,Xt(g,3))}function rA(f,g){var T=mn(f)?Jd:di;return T(f,Xt(g,3))}var h8=my(function(f,g,T){$n.call(f,T)?f[T].push(g):gt(f,T,[g])});function p8(f,g,T,P){f=La(f)?f:qh(f),T=T&&!P?_n(T):0;var q=f.length;return T<0&&(T=Dr(q+T,0)),ky(f)?T<=q&&f.indexOf(g,T)>-1:!!q&&tt(f,g,T)>-1}var g8=wn(function(f,g,T){var P=-1,q=typeof g=="function",se=La(f)?Re(f.length):[];return Fn(f,function(he){se[++P]=q?ts(g,he,T):Ac(he,g,T)}),se}),m8=my(function(f,g,T){gt(f,T,g)});function Ty(f,g){var T=mn(f)?Zn:sy;return T(f,Xt(g,3))}function y8(f,g,T,P){return f==null?[]:(mn(g)||(g=g==null?[]:[g]),T=P?t:T,mn(T)||(T=T==null?[]:[T]),ly(f,g,T))}var v8=my(function(f,g,T){f[T?0:1].push(g)},function(){return[[],[]]});function x8(f,g,T){var P=mn(f)?bo:Di,q=arguments.length<3;return P(f,Xt(g,4),T,q,Fn)}function b8(f,g,T){var P=mn(f)?Zd:Di,q=arguments.length<3;return P(f,Xt(g,4),T,q,di)}function S8(f,g){var T=mn(f)?Ga:dr;return T(f,Cy(Xt(g,3)))}function w8(f){var g=mn(f)?Ne:$h;return g(f)}function _8(f,g,T){(T?ca(f,g,T):g===t)?g=1:g=_n(g);var P=mn(f)?Ee:dy;return P(f,g)}function E8(f){var g=mn(f)?Ve:hy;return g(f)}function T8(f){if(f==null)return 0;if(La(f))return ky(f)?zo(f):f.length;var g=Hs(f);return g==ft||g==Ze?f.size:ff(f).length}function A8(f,g,T){var P=mn(f)?L:py;return T&&ca(f,g,T)&&(g=t),P(f,Xt(g,3))}var L8=wn(function(f,g){if(f==null)return[];var T=g.length;return T>1&&ca(f,g[0],g[1])?g=[]:T>2&&ca(g[0],g[1],g[2])&&(g=[g[0]]),ly(f,ni(g,1),[])}),Ay=xg||function(){return wr.Date.now()};function C8(f,g){if(typeof g!="function")throw new Kr(a);return f=_n(f),function(){if(--f<1)return g.apply(this,arguments)}}function sA(f,g,T){return g=T?t:g,g=f&&g==null?f.length:g,Pc(f,k,t,t,t,t,g)}function aA(f,g){var T;if(typeof g!="function")throw new Kr(a);return f=_n(f),function(){return--f>0&&(T=g.apply(this,arguments)),f<=1&&(g=t),T}}var Xb=wn(function(f,g,T){var P=b;if(T.length){var q=So(T,Vh(Xb));P|=C}return Pc(f,P,g,T,q)}),oA=wn(function(f,g,T){var P=b|x;if(T.length){var q=So(T,Vh(oA));P|=C}return Pc(g,P,f,T,q)});function lA(f,g,T){g=T?t:g;var P=Pc(f,S,t,t,t,t,t,g);return P.placeholder=lA.placeholder,P}function cA(f,g,T){g=T?t:g;var P=Pc(f,A,t,t,t,t,t,g);return P.placeholder=cA.placeholder,P}function uA(f,g,T){var P,q,se,he,me,Le,Ye=0,qe=!1,nt=!1,xt=!0;if(typeof f!="function")throw new Kr(a);g=Io(g)||0,hr(T)&&(qe=!!T.leading,nt="maxWait"in T,se=nt?Dr(Io(T.maxWait)||0,g):se,xt="trailing"in T?!!T.trailing:xt);function Ft(Mr){var rl=P,Fc=q;return P=q=t,Ye=Mr,he=f.apply(Fc,rl),he}function Qt(Mr){return Ye=Mr,me=Ig(Nn,g),qe?Ft(Mr):he}function An(Mr){var rl=Mr-Le,Fc=Mr-Ye,IA=g-rl;return nt?ps(IA,se-Fc):IA}function Jt(Mr){var rl=Mr-Le,Fc=Mr-Ye;return Le===t||rl>=g||rl<0||nt&&Fc>=se}function Nn(){var Mr=Ay();if(Jt(Mr))return Hn(Mr);me=Ig(Nn,An(Mr))}function Hn(Mr){return me=t,xt&&P?Ft(Mr):(P=q=t,he)}function eo(){me!==t&&Wh(me),Ye=0,P=Le=q=me=t}function ua(){return me===t?he:Hn(Ay())}function to(){var Mr=Ay(),rl=Jt(Mr);if(P=arguments,q=this,Le=Mr,rl){if(me===t)return Qt(Le);if(nt)return Wh(me),me=Ig(Nn,g),Ft(Le)}return me===t&&(me=Ig(Nn,g)),he}return to.cancel=eo,to.flush=ua,to}var I8=wn(function(f,g){return Mn(f,1,g)}),k8=wn(function(f,g,T){return Mn(f,Io(g)||0,T)});function R8(f){return Pc(f,U)}function Ly(f,g){if(typeof f!="function"||g!=null&&typeof g!="function")throw new Kr(a);var T=function(){var P=arguments,q=g?g.apply(this,P):P[0],se=T.cache;if(se.has(q))return se.get(q);var he=f.apply(this,P);return T.cache=se.set(q,he)||se,he};return T.cache=new(Ly.Cache||Ea),T}Ly.Cache=Ea;function Cy(f){if(typeof f!="function")throw new Kr(a);return function(){var g=arguments;switch(g.length){case 0:return!f.call(this);case 1:return!f.call(this,g[0]);case 2:return!f.call(this,g[0],g[1]);case 3:return!f.call(this,g[0],g[1],g[2])}return!f.apply(this,g)}}function P8(f){return aA(2,f)}var N8=Ob(function(f,g){g=g.length==1&&mn(g[0])?Zn(g[0],ki(Xt())):Zn(ni(g,1),ki(Xt()));var T=g.length;return wn(function(P){for(var q=-1,se=ps(P.length,T);++q<se;)P[q]=g[q].call(this,P[q]);return ts(f,this,P)})}),Qb=wn(function(f,g){var T=So(g,Vh(Qb));return Pc(f,C,t,g,T)}),dA=wn(function(f,g){var T=So(g,Vh(dA));return Pc(f,N,t,g,T)}),D8=Nc(function(f,g){return Pc(f,R,t,t,t,g)});function O8(f,g){if(typeof f!="function")throw new Kr(a);return g=g===t?g:_n(g),wn(f,g)}function M8(f,g){if(typeof f!="function")throw new Kr(a);return g=g==null?0:Dr(_n(g),0),wn(function(T){var P=T[g],q=Lo(T,0,g);return P&&ma(q,P),ts(f,this,q)})}function F8(f,g,T){var P=!0,q=!0;if(typeof f!="function")throw new Kr(a);return hr(T)&&(P="leading"in T?!!T.leading:P,q="trailing"in T?!!T.trailing:q),uA(f,g,{leading:P,maxWait:g,trailing:q})}function j8(f){return sA(f,1)}function B8(f,g){return Qb(yf(g),f)}function U8(){if(!arguments.length)return[];var f=arguments[0];return mn(f)?f:[f]}function $8(f){return ct(f,p)}function H8(f,g){return g=typeof g=="function"?g:t,ct(f,p,g)}function W8(f){return ct(f,d|p)}function z8(f,g){return g=typeof g=="function"?g:t,ct(f,d|p,g)}function G8(f,g){return g==null||ti(f,g,gs(g))}function il(f,g){return f===g||f!==f&&g!==g}var V8=by(Tr),Y8=by(function(f,g){return f>=g}),bf=Eg(function(){return arguments}())?Eg:function(f){return Ar(f)&&$n.call(f,"callee")&&!js.call(f,"callee")},mn=Re.isArray,q8=Cu?ki(Cu):ny;function La(f){return f!=null&&Iy(f.length)&&!Oc(f)}function Or(f){return Ar(f)&&La(f)}function K8(f){return f===!0||f===!1||Ar(f)&&Mi(f)==be}var Ku=bg||l2,X8=kl?ki(kl):Dh;function Q8(f){return Ar(f)&&f.nodeType===1&&!kg(f)}function J8(f){if(f==null)return!0;if(La(f)&&(mn(f)||typeof f=="string"||typeof f.splice=="function"||Ku(f)||Yh(f)||bf(f)))return!f.length;var g=Hs(f);if(g==ft||g==Ze)return!f.size;if(Cg(f))return!ff(f).length;for(var T in f)if($n.call(f,T))return!1;return!0}function Z8(f,g){return Jo(f,g)}function ej(f,g,T){T=typeof T=="function"?T:t;var P=T?T(f,g):t;return P===t?Jo(f,g,t,T):!!P}function Jb(f){if(!Ar(f))return!1;var g=Mi(f);return g==ze||g==Xe||typeof f.message=="string"&&typeof f.name=="string"&&!kg(f)}function tj(f){return typeof f=="number"&&K0(f)}function Oc(f){if(!hr(f))return!1;var g=Mi(f);return g==He||g==rt||g==ye||g==Se}function fA(f){return typeof f=="number"&&f==_n(f)}function Iy(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=z}function hr(f){var g=typeof f;return f!=null&&(g=="object"||g=="function")}function Ar(f){return f!=null&&typeof f=="object"}var hA=Lh?ki(Lh):Qa;function nj(f,g){return f===g||jl(f,g,Hb(g))}function ij(f,g,T){return T=typeof T=="function"?T:t,jl(f,g,Hb(g),T)}function rj(f){return pA(f)&&f!=+f}function sj(f){if(HF(f))throw new Ot(s);return Lc(f)}function aj(f){return f===null}function oj(f){return f==null}function pA(f){return typeof f=="number"||Ar(f)&&Mi(f)==Ie}function kg(f){if(!Ar(f)||Mi(f)!=ut)return!1;var g=Bu(f);if(g===null)return!0;var T=$n.call(g,"constructor")&&g.constructor;return typeof T=="function"&&T instanceof T&&Ka.call(T)==Li}var Zb=vc?ki(vc):iy;function lj(f){return fA(f)&&f>=-9007199254740991&&f<=z}var gA=Ch?ki(Ch):Mh;function ky(f){return typeof f=="string"||!mn(f)&&Ar(f)&&Mi(f)==it}function Za(f){return typeof f=="symbol"||Ar(f)&&Mi(f)==et}var Yh=Iu?ki(Iu):ry;function cj(f){return f===t}function uj(f){return Ar(f)&&Hs(f)==Rt}function dj(f){return Ar(f)&&Mi(f)==at}var fj=by(Cc),hj=by(function(f,g){return f<=g});function mA(f){if(!f)return[];if(La(f))return ky(f)?Os(f):Aa(f);if(Ol&&f[Ol])return Fu(f[Ol]());var g=Hs(f),T=g==ft?xc:g==Ze?Nl:qh;return T(f)}function Mc(f){if(!f)return f===0?f:0;if(f=Io(f),f===V||f===-1/0){var g=f<0?-1:1;return g*W}return f===f?f:0}function _n(f){var g=Mc(f),T=g%1;return g===g?T?g-T:g:0}function yA(f){return f?Mt(_n(f),0,fe):0}function Io(f){if(typeof f=="number")return f;if(Za(f))return te;if(hr(f)){var g=typeof f.valueOf=="function"?f.valueOf():f;f=hr(g)?g+"":g}if(typeof f!="string")return f===0?f:+f;f=ya(f);var T=ds.test(f);return T||Es.test(f)?Eh(f.slice(2),T?2:8):Rr.test(f)?te:+f}function vA(f){return Ul(f,Ca(f))}function pj(f){return f?Mt(_n(f),-9007199254740991,z):f===0?f:0}function fi(f){return f==null?"":$s(f)}var gj=zh(function(f,g){if(Cg(g)||La(g)){Ul(g,gs(g),f);return}for(var T in g)$n.call(g,T)&&ge(f,T,g[T])}),xA=zh(function(f,g){Ul(g,Ca(g),f)}),Ry=zh(function(f,g,T,P){Ul(g,Ca(g),f,P)}),mj=zh(function(f,g,T,P){Ul(g,gs(g),f,P)}),yj=Nc(ht);function vj(f,g){var T=Vu(f);return g==null?T:Je(T,g)}var xj=wn(function(f,g){f=ei(f);var T=-1,P=g.length,q=P>2?g[2]:t;for(q&&ca(g[0],g[1],q)&&(P=1);++T<P;)for(var se=g[T],he=Ca(se),me=-1,Le=he.length;++me<Le;){var Ye=he[me],qe=f[Ye];(qe===t||il(qe,qa[Ye])&&!$n.call(f,Ye))&&(f[Ye]=se[Ye])}return f}),bj=wn(function(f){return f.push(t,MT),ts(bA,t,f)});function Sj(f,g){return Ce(f,Xt(g,3),er)}function wj(f,g){return Ce(f,Xt(g,3),_r)}function _j(f,g){return f==null?f:qn(f,Xt(g,3),Ca)}function Ej(f,g){return f==null?f:Us(f,Xt(g,3),Ca)}function Tj(f,g){return f&&er(f,Xt(g,3))}function Aj(f,g){return f&&_r(f,Xt(g,3))}function Lj(f){return f==null?[]:Er(f,gs(f))}function Cj(f){return f==null?[]:Er(f,Ca(f))}function e2(f,g,T){var P=f==null?t:fr(f,g);return P===t?T:P}function Ij(f,g){return f!=null&&BT(f,g,Qo)}function t2(f,g){return f!=null&&BT(f,g,Tc)}var kj=RT(function(f,g,T){g!=null&&typeof g.toString!="function"&&(g=ui.call(g)),f[g]=T},i2(Ia)),Rj=RT(function(f,g,T){g!=null&&typeof g.toString!="function"&&(g=ui.call(g)),$n.call(f,g)?f[g].push(T):f[g]=[T]},Xt),Pj=wn(Ac);function gs(f){return La(f)?Pe(f):ff(f)}function Ca(f){return La(f)?Pe(f,!0):Fh(f)}function Nj(f,g){var T={};return g=Xt(g,3),er(f,function(P,q,se){gt(T,g(P,q,se),P)}),T}function Dj(f,g){var T={};return g=Xt(g,3),er(f,function(P,q,se){gt(T,q,g(P,q,se))}),T}var Oj=zh(function(f,g,T){Ja(f,g,T)}),bA=zh(function(f,g,T,P){Ja(f,g,T,P)}),Mj=Nc(function(f,g){var T={};if(f==null)return T;var P=!1;g=Zn(g,function(se){return se=nl(se,f),P||(P=se.length>1),se}),Ul(f,Ub(f),T),P&&(T=ct(T,d|h|p,kF));for(var q=g.length;q--;)kc(T,g[q]);return T});function Fj(f,g){return SA(f,Cy(Xt(g)))}var jj=Nc(function(f,g){return f==null?{}:cy(f,g)});function SA(f,g){if(f==null)return{};var T=Zn(Ub(f),function(P){return[P]});return g=Xt(g),hf(f,T,function(P,q){return g(P,q[0])})}function Bj(f,g,T){g=nl(g,f);var P=-1,q=g.length;for(q||(q=1,f=t);++P<q;){var se=f==null?t:f[$l(g[P])];se===t&&(P=q,se=T),f=Oc(se)?se.call(f):se}return f}function Uj(f,g,T){return f==null?f:Ic(f,g,T)}function $j(f,g,T,P){return P=typeof P=="function"?P:t,f==null?f:Ic(f,g,T,P)}var wA=DT(gs),_A=DT(Ca);function Hj(f,g,T){var P=mn(f),q=P||Ku(f)||Yh(f);if(g=Xt(g,4),T==null){var se=f&&f.constructor;q?T=P?new se:[]:hr(f)?T=Oc(se)?Vu(Bu(f)):{}:T={}}return(q?ns:er)(f,function(he,me,Le){return g(T,he,me,Le)}),T}function Wj(f,g){return f==null?!0:kc(f,g)}function zj(f,g,T){return f==null?f:Hh(f,g,yf(T))}function Gj(f,g,T,P){return P=typeof P=="function"?P:t,f==null?f:Hh(f,g,yf(T),P)}function qh(f){return f==null?[]:va(f,gs(f))}function Vj(f){return f==null?[]:va(f,Ca(f))}function Yj(f,g,T){return T===t&&(T=g,g=t),T!==t&&(T=Io(T),T=T===T?T:0),g!==t&&(g=Io(g),g=g===g?g:0),Mt(Io(f),g,T)}function qj(f,g,T){return g=Mc(g),T===t?(T=g,g=0):T=Mc(T),f=Io(f),Yu(f,g,T)}function Kj(f,g,T){if(T&&typeof T!="boolean"&&ca(f,g,T)&&(g=T=t),T===t&&(typeof g=="boolean"?(T=g,g=t):typeof f=="boolean"&&(T=f,f=t)),f===t&&g===t?(f=0,g=1):(f=Mc(f),g===t?(g=f,f=0):g=Mc(g)),f>g){var P=f;f=g,g=P}if(T||f%1||g%1){var q=Q0();return ps(f+q*(g-f+Lu("1e-"+((q+"").length-1))),g)}return gf(f,g)}var Xj=Gh(function(f,g,T){return g=g.toLowerCase(),f+(T?EA(g):g)});function EA(f){return n2(fi(f).toLowerCase())}function TA(f){return f=fi(f),f&&f.replace(fs,ef).replace(_h,"")}function Qj(f,g,T){f=fi(f),g=$s(g);var P=f.length;T=T===t?P:Mt(_n(T),0,P);var q=T;return T-=g.length,T>=0&&f.slice(T,q)==g}function Jj(f){return f=fi(f),f&&Ht.test(f)?f.replace(ws,tf):f}function Zj(f){return f=fi(f),f&&Qr.test(f)?f.replace(Bi,"\\$&"):f}var eB=Gh(function(f,g,T){return f+(T?"-":"")+g.toLowerCase()}),tB=Gh(function(f,g,T){return f+(T?" ":"")+g.toLowerCase()}),nB=CT("toLowerCase");function iB(f,g,T){f=fi(f),g=_n(g);var P=g?zo(f):0;if(!g||P>=g)return f;var q=(g-P)/2;return xy($u(q),T)+f+xy(Uu(q),T)}function rB(f,g,T){f=fi(f),g=_n(g);var P=g?zo(f):0;return g&&P<g?f+xy(g-P,T):f}function sB(f,g,T){f=fi(f),g=_n(g);var P=g?zo(f):0;return g&&P<g?xy(g-P,T)+f:f}function aB(f,g,T){return T||g==null?g=0:g&&(g=+g),wb(fi(f).replace(Ui,""),g||0)}function oB(f,g,T){return(T?ca(f,g,T):g===t)?g=1:g=_n(g),Uh(fi(f),g)}function lB(){var f=arguments,g=fi(f[0]);return f.length<3?g:g.replace(f[1],f[2])}var cB=Gh(function(f,g,T){return f+(T?"_":"")+g.toLowerCase()});function uB(f,g,T){return T&&typeof T!="number"&&ca(f,g,T)&&(g=T=t),T=T===t?fe:T>>>0,T?(f=fi(f),f&&(typeof g=="string"||g!=null&&!Zb(g))&&(g=$s(g),!g&&Va(f))?Lo(Os(f),0,T):f.split(g,T)):[]}var dB=Gh(function(f,g,T){return f+(T?" ":"")+n2(g)});function fB(f,g,T){return f=fi(f),T=T==null?0:Mt(_n(T),0,f.length),g=$s(g),f.slice(T,T+g.length)==g}function hB(f,g,T){var P=ie.templateSettings;T&&ca(f,g,T)&&(g=t),f=fi(f),g=Ry({},g,P,OT);var q=Ry({},g.imports,P.imports,OT),se=gs(q),he=va(q,se),me,Le,Ye=0,qe=g.interpolate||br,nt="__p += '",xt=Sc((g.escape||br).source+"|"+qe.source+"|"+(qe===ai?Ki:br).source+"|"+(g.evaluate||br).source+"|$","g"),Ft="//# sourceURL="+($n.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yg+"]")+`
`;f.replace(xt,function(Jt,Nn,Hn,eo,ua,to){return Hn||(Hn=eo),nt+=f.slice(Ye,to).replace(Pr,Ou),Nn&&(me=!0,nt+=`' +
__e(`+Nn+`) +
'`),ua&&(Le=!0,nt+=`';
`+ua+`;
__p += '`),Hn&&(nt+=`' +
((__t = (`+Hn+`)) == null ? '' : __t) +
'`),Ye=to+Jt.length,Jt}),nt+=`';
`;var Qt=$n.call(g,"variable")&&g.variable;if(!Qt)nt=`with (obj) {
`+nt+`
}
`;else if(Jr.test(Qt))throw new Ot(o);nt=(Le?nt.replace(rn,""):nt).replace(Ss,"$1").replace(Un,"$1;"),nt="function("+(Qt||"obj")+`) {
`+(Qt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(me?", __e = _.escape":"")+(Le?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+nt+`return __p
}`;var An=LA(function(){return un(se,Ft+"return "+nt).apply(t,he)});if(An.source=nt,Jb(An))throw An;return An}function pB(f){return fi(f).toLowerCase()}function gB(f){return fi(f).toUpperCase()}function mB(f,g,T){if(f=fi(f),f&&(T||g===t))return ya(f);if(!f||!(g=$s(g)))return f;var P=Os(f),q=Os(g),se=Pu(P,q),he=Nu(P,q)+1;return Lo(P,se,he).join("")}function yB(f,g,T){if(f=fi(f),f&&(T||g===t))return f.slice(0,Go(f)+1);if(!f||!(g=$s(g)))return f;var P=Os(f),q=Nu(P,Os(g))+1;return Lo(P,0,q).join("")}function vB(f,g,T){if(f=fi(f),f&&(T||g===t))return f.replace(Ui,"");if(!f||!(g=$s(g)))return f;var P=Os(f),q=Pu(P,Os(g));return Lo(P,q).join("")}function xB(f,g){var T=j,P=D;if(hr(g)){var q="separator"in g?g.separator:q;T="length"in g?_n(g.length):T,P="omission"in g?$s(g.omission):P}f=fi(f);var se=f.length;if(Va(f)){var he=Os(f);se=he.length}if(T>=se)return f;var me=T-zo(P);if(me<1)return P;var Le=he?Lo(he,0,me).join(""):f.slice(0,me);if(q===t)return Le+P;if(he&&(me+=Le.length-me),Zb(q)){if(f.slice(me).search(q)){var Ye,qe=Le;for(q.global||(q=Sc(q.source,fi(Xi.exec(q))+"g")),q.lastIndex=0;Ye=q.exec(qe);)var nt=Ye.index;Le=Le.slice(0,nt===t?me:nt)}}else if(f.indexOf($s(q),me)!=me){var xt=Le.lastIndexOf(q);xt>-1&&(Le=Le.slice(0,xt))}return Le+P}function bB(f){return f=fi(f),f&&si.test(f)?f.replace(zr,bc):f}var SB=Gh(function(f,g,T){return f+(T?" ":"")+g.toUpperCase()}),n2=CT("toUpperCase");function AA(f,g,T){return f=fi(f),g=T?t:g,g===t?Mu(f)?Dl(f):pe(f):f.match(g)||[]}var LA=wn(function(f,g){try{return ts(f,t,g)}catch(T){return Jb(T)?T:new Ot(T)}}),wB=Nc(function(f,g){return ns(g,function(T){T=$l(T),gt(f,T,Xb(f[T],f))}),f});function _B(f){var g=f==null?0:f.length,T=Xt();return f=g?Zn(f,function(P){if(typeof P[1]!="function")throw new Kr(a);return[T(P[0]),P[1]]}):[],wn(function(P){for(var q=-1;++q<g;){var se=f[q];if(ts(se[0],this,P))return ts(se[1],this,P)}})}function EB(f){return Yn(ct(f,d))}function i2(f){return function(){return f}}function TB(f,g){return f==null||f!==f?g:f}var AB=kT(),LB=kT(!0);function Ia(f){return f}function r2(f){return df(typeof f=="function"?f:ct(f,d))}function CB(f){return ay(ct(f,d))}function IB(f,g){return jh(f,ct(g,d))}var kB=wn(function(f,g){return function(T){return Ac(T,f,g)}}),RB=wn(function(f,g){return function(T){return Ac(f,T,g)}});function s2(f,g,T){var P=gs(g),q=Er(g,P);T==null&&!(hr(g)&&(q.length||!P.length))&&(T=g,g=f,f=this,q=Er(g,gs(g)));var se=!(hr(T)&&"chain"in T)||!!T.chain,he=Oc(f);return ns(q,function(me){var Le=g[me];f[me]=Le,he&&(f.prototype[me]=function(){var Ye=this.__chain__;if(se||Ye){var qe=f(this.__wrapped__),nt=qe.__actions__=Aa(this.__actions__);return nt.push({func:Le,args:arguments,thisArg:f}),qe.__chain__=Ye,qe}return Le.apply(f,ma([this.value()],arguments))})}),f}function PB(){return wr._===this&&(wr._=ur),this}function a2(){}function NB(f){return f=_n(f),wn(function(g){return oy(g,f)})}var DB=Fb(Zn),OB=Fb(ku),MB=Fb(L);function CA(f){return zb(f)?nn($l(f)):uy(f)}function FB(f){return function(g){return f==null?t:fr(f,g)}}var jB=PT(),BB=PT(!0);function o2(){return[]}function l2(){return!1}function UB(){return{}}function $B(){return""}function HB(){return!0}function WB(f,g){if(f=_n(f),f<1||f>z)return[];var T=fe,P=ps(f,fe);g=Xt(g),f-=fe;for(var q=Yr(P,g);++T<f;)g(T);return q}function zB(f){return mn(f)?Zn(f,$l):Za(f)?[f]:Aa(qT(fi(f)))}function GB(f){var g=++ba;return fi(f)+g}var VB=vy(function(f,g){return f+g},0),YB=jb("ceil"),qB=vy(function(f,g){return f/g},1),KB=jb("floor");function XB(f){return f&&f.length?$i(f,Ia,Tr):t}function QB(f,g){return f&&f.length?$i(f,Xt(g,2),Tr):t}function JB(f){return sn(f,Ia)}function ZB(f,g){return sn(f,Xt(g,2))}function e7(f){return f&&f.length?$i(f,Ia,Cc):t}function t7(f,g){return f&&f.length?$i(f,Xt(g,2),Cc):t}var n7=vy(function(f,g){return f*g},1),i7=jb("round"),r7=vy(function(f,g){return f-g},0);function s7(f){return f&&f.length?Zi(f,Ia):0}function a7(f,g){return f&&f.length?Zi(f,Xt(g,2)):0}return ie.after=C8,ie.ary=sA,ie.assign=gj,ie.assignIn=xA,ie.assignInWith=Ry,ie.assignWith=mj,ie.at=yj,ie.before=aA,ie.bind=Xb,ie.bindAll=wB,ie.bindKey=oA,ie.castArray=U8,ie.chain=nA,ie.chunk=KF,ie.compact=XF,ie.concat=QF,ie.cond=_B,ie.conforms=EB,ie.constant=i2,ie.countBy=s8,ie.create=vj,ie.curry=lA,ie.curryRight=cA,ie.debounce=uA,ie.defaults=xj,ie.defaultsDeep=bj,ie.defer=I8,ie.delay=k8,ie.difference=JF,ie.differenceBy=ZF,ie.differenceWith=e6,ie.drop=t6,ie.dropRight=n6,ie.dropRightWhile=i6,ie.dropWhile=r6,ie.fill=s6,ie.filter=o8,ie.flatMap=u8,ie.flatMapDeep=d8,ie.flatMapDepth=f8,ie.flatten=JT,ie.flattenDeep=a6,ie.flattenDepth=o6,ie.flip=R8,ie.flow=AB,ie.flowRight=LB,ie.fromPairs=l6,ie.functions=Lj,ie.functionsIn=Cj,ie.groupBy=h8,ie.initial=u6,ie.intersection=d6,ie.intersectionBy=f6,ie.intersectionWith=h6,ie.invert=kj,ie.invertBy=Rj,ie.invokeMap=g8,ie.iteratee=r2,ie.keyBy=m8,ie.keys=gs,ie.keysIn=Ca,ie.map=Ty,ie.mapKeys=Nj,ie.mapValues=Dj,ie.matches=CB,ie.matchesProperty=IB,ie.memoize=Ly,ie.merge=Oj,ie.mergeWith=bA,ie.method=kB,ie.methodOf=RB,ie.mixin=s2,ie.negate=Cy,ie.nthArg=NB,ie.omit=Mj,ie.omitBy=Fj,ie.once=P8,ie.orderBy=y8,ie.over=DB,ie.overArgs=N8,ie.overEvery=OB,ie.overSome=MB,ie.partial=Qb,ie.partialRight=dA,ie.partition=v8,ie.pick=jj,ie.pickBy=SA,ie.property=CA,ie.propertyOf=FB,ie.pull=y6,ie.pullAll=eA,ie.pullAllBy=v6,ie.pullAllWith=x6,ie.pullAt=b6,ie.range=jB,ie.rangeRight=BB,ie.rearg=D8,ie.reject=S8,ie.remove=S6,ie.rest=O8,ie.reverse=qb,ie.sampleSize=_8,ie.set=Uj,ie.setWith=$j,ie.shuffle=E8,ie.slice=w6,ie.sortBy=L8,ie.sortedUniq=I6,ie.sortedUniqBy=k6,ie.split=uB,ie.spread=M8,ie.tail=R6,ie.take=P6,ie.takeRight=N6,ie.takeRightWhile=D6,ie.takeWhile=O6,ie.tap=X6,ie.throttle=F8,ie.thru=Ey,ie.toArray=mA,ie.toPairs=wA,ie.toPairsIn=_A,ie.toPath=zB,ie.toPlainObject=vA,ie.transform=Hj,ie.unary=j8,ie.union=M6,ie.unionBy=F6,ie.unionWith=j6,ie.uniq=B6,ie.uniqBy=U6,ie.uniqWith=$6,ie.unset=Wj,ie.unzip=Kb,ie.unzipWith=tA,ie.update=zj,ie.updateWith=Gj,ie.values=qh,ie.valuesIn=Vj,ie.without=H6,ie.words=AA,ie.wrap=B8,ie.xor=W6,ie.xorBy=z6,ie.xorWith=G6,ie.zip=V6,ie.zipObject=Y6,ie.zipObjectDeep=q6,ie.zipWith=K6,ie.entries=wA,ie.entriesIn=_A,ie.extend=xA,ie.extendWith=Ry,s2(ie,ie),ie.add=VB,ie.attempt=LA,ie.camelCase=Xj,ie.capitalize=EA,ie.ceil=YB,ie.clamp=Yj,ie.clone=$8,ie.cloneDeep=W8,ie.cloneDeepWith=z8,ie.cloneWith=H8,ie.conformsTo=G8,ie.deburr=TA,ie.defaultTo=TB,ie.divide=qB,ie.endsWith=Qj,ie.eq=il,ie.escape=Jj,ie.escapeRegExp=Zj,ie.every=a8,ie.find=l8,ie.findIndex=XT,ie.findKey=Sj,ie.findLast=c8,ie.findLastIndex=QT,ie.findLastKey=wj,ie.floor=KB,ie.forEach=iA,ie.forEachRight=rA,ie.forIn=_j,ie.forInRight=Ej,ie.forOwn=Tj,ie.forOwnRight=Aj,ie.get=e2,ie.gt=V8,ie.gte=Y8,ie.has=Ij,ie.hasIn=t2,ie.head=ZT,ie.identity=Ia,ie.includes=p8,ie.indexOf=c6,ie.inRange=qj,ie.invoke=Pj,ie.isArguments=bf,ie.isArray=mn,ie.isArrayBuffer=q8,ie.isArrayLike=La,ie.isArrayLikeObject=Or,ie.isBoolean=K8,ie.isBuffer=Ku,ie.isDate=X8,ie.isElement=Q8,ie.isEmpty=J8,ie.isEqual=Z8,ie.isEqualWith=ej,ie.isError=Jb,ie.isFinite=tj,ie.isFunction=Oc,ie.isInteger=fA,ie.isLength=Iy,ie.isMap=hA,ie.isMatch=nj,ie.isMatchWith=ij,ie.isNaN=rj,ie.isNative=sj,ie.isNil=oj,ie.isNull=aj,ie.isNumber=pA,ie.isObject=hr,ie.isObjectLike=Ar,ie.isPlainObject=kg,ie.isRegExp=Zb,ie.isSafeInteger=lj,ie.isSet=gA,ie.isString=ky,ie.isSymbol=Za,ie.isTypedArray=Yh,ie.isUndefined=cj,ie.isWeakMap=uj,ie.isWeakSet=dj,ie.join=p6,ie.kebabCase=eB,ie.last=Co,ie.lastIndexOf=g6,ie.lowerCase=tB,ie.lowerFirst=nB,ie.lt=fj,ie.lte=hj,ie.max=XB,ie.maxBy=QB,ie.mean=JB,ie.meanBy=ZB,ie.min=e7,ie.minBy=t7,ie.stubArray=o2,ie.stubFalse=l2,ie.stubObject=UB,ie.stubString=$B,ie.stubTrue=HB,ie.multiply=n7,ie.nth=m6,ie.noConflict=PB,ie.noop=a2,ie.now=Ay,ie.pad=iB,ie.padEnd=rB,ie.padStart=sB,ie.parseInt=aB,ie.random=Kj,ie.reduce=x8,ie.reduceRight=b8,ie.repeat=oB,ie.replace=lB,ie.result=Bj,ie.round=i7,ie.runInContext=we,ie.sample=w8,ie.size=T8,ie.snakeCase=cB,ie.some=A8,ie.sortedIndex=_6,ie.sortedIndexBy=E6,ie.sortedIndexOf=T6,ie.sortedLastIndex=A6,ie.sortedLastIndexBy=L6,ie.sortedLastIndexOf=C6,ie.startCase=dB,ie.startsWith=fB,ie.subtract=r7,ie.sum=s7,ie.sumBy=a7,ie.template=hB,ie.times=WB,ie.toFinite=Mc,ie.toInteger=_n,ie.toLength=yA,ie.toLower=pB,ie.toNumber=Io,ie.toSafeInteger=pj,ie.toString=fi,ie.toUpper=gB,ie.trim=mB,ie.trimEnd=yB,ie.trimStart=vB,ie.truncate=xB,ie.unescape=bB,ie.uniqueId=GB,ie.upperCase=SB,ie.upperFirst=n2,ie.each=iA,ie.eachRight=rA,ie.first=ZT,s2(ie,function(){var f={};return er(ie,function(g,T){$n.call(ie.prototype,T)||(f[T]=g)}),f}(),{chain:!1}),ie.VERSION=i,ns(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){ie[f].placeholder=ie}),ns(["drop","take"],function(f,g){kn.prototype[f]=function(T){T=T===t?1:Dr(_n(T),0);var P=this.__filtered__&&!g?new kn(this):this.clone();return P.__filtered__?P.__takeCount__=ps(T,P.__takeCount__):P.__views__.push({size:ps(T,fe),type:f+(P.__dir__<0?"Right":"")}),P},kn.prototype[f+"Right"]=function(T){return this.reverse()[f](T).reverse()}}),ns(["filter","map","takeWhile"],function(f,g){var T=g+1,P=T==J||T==H;kn.prototype[f]=function(q){var se=this.clone();return se.__iteratees__.push({iteratee:Xt(q,3),type:T}),se.__filtered__=se.__filtered__||P,se}}),ns(["head","last"],function(f,g){var T="take"+(g?"Right":"");kn.prototype[f]=function(){return this[T](1).value()[0]}}),ns(["initial","tail"],function(f,g){var T="drop"+(g?"":"Right");kn.prototype[f]=function(){return this.__filtered__?new kn(this):this[T](1)}}),kn.prototype.compact=function(){return this.filter(Ia)},kn.prototype.find=function(f){return this.filter(f).head()},kn.prototype.findLast=function(f){return this.reverse().find(f)},kn.prototype.invokeMap=wn(function(f,g){return typeof f=="function"?new kn(this):this.map(function(T){return Ac(T,f,g)})}),kn.prototype.reject=function(f){return this.filter(Cy(Xt(f)))},kn.prototype.slice=function(f,g){f=_n(f);var T=this;return T.__filtered__&&(f>0||g<0)?new kn(T):(f<0?T=T.takeRight(-f):f&&(T=T.drop(f)),g!==t&&(g=_n(g),T=g<0?T.dropRight(-g):T.take(g-f)),T)},kn.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},kn.prototype.toArray=function(){return this.take(fe)},er(kn.prototype,function(f,g){var T=/^(?:filter|find|map|reject)|While$/.test(g),P=/^(?:head|last)$/.test(g),q=ie[P?"take"+(g=="last"?"Right":""):g],se=P||/^find/.test(g);q&&(ie.prototype[g]=function(){var he=this.__wrapped__,me=P?[1]:arguments,Le=he instanceof kn,Ye=me[0],qe=Le||mn(he),nt=function(Nn){var Hn=q.apply(ie,ma([Nn],me));return P&&xt?Hn[0]:Hn};qe&&T&&typeof Ye=="function"&&Ye.length!=1&&(Le=qe=!1);var xt=this.__chain__,Ft=!!this.__actions__.length,Qt=se&&!xt,An=Le&&!Ft;if(!se&&qe){he=An?he:new kn(this);var Jt=f.apply(he,me);return Jt.__actions__.push({func:Ey,args:[nt],thisArg:t}),new oa(Jt,xt)}return Qt&&An?f.apply(this,me):(Jt=this.thru(nt),Qt?P?Jt.value()[0]:Jt.value():Jt)})}),ns(["pop","push","shift","sort","splice","unshift"],function(f){var g=Ya[f],T=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",P=/^(?:pop|shift)$/.test(f);ie.prototype[f]=function(){var q=arguments;if(P&&!this.__chain__){var se=this.value();return g.apply(mn(se)?se:[],q)}return this[T](function(he){return g.apply(mn(he)?he:[],q)})}}),er(kn.prototype,function(f,g){var T=ie[g];if(T){var P=T.name+"";$n.call(Gu,P)||(Gu[P]=[]),Gu[P].push({name:g,func:T})}}),Gu[yy(t,x).name]=[{name:"wrapper",func:t}],kn.prototype.clone=J0,kn.prototype.reverse=Tb,kn.prototype.value=Nh,ie.prototype.at=Q6,ie.prototype.chain=J6,ie.prototype.commit=Z6,ie.prototype.next=e8,ie.prototype.plant=n8,ie.prototype.reverse=i8,ie.prototype.toJSON=ie.prototype.valueOf=ie.prototype.value=r8,ie.prototype.first=ie.prototype.head,Ol&&(ie.prototype[Ol]=t8),ie},Fs=Vo();Ls?((Ls.exports=Fs)._=Fs,ga._=Fs):wr._=Fs}).call(ld)})(V1,V1.exports);V1.exports;const bC="name;",SC="type;",z2="ings;",wC="tops;",_C="qty;",EC="cmts;",ev="items;",Ug="order;",TC="pm;",Sf="total;";function QG(){const[n,e]=B.useState(!1),[t,i]=B.useState(!1),[r,s]=B.useState(!1),[a,o]=B.useState(!1),[l,c]=B.useState(!1),[u,d]=B.useState(!1),[h,p]=B.useState(!1),[m,v]=B.useState([]),[b,x]=B.useState({}),[w,S]=B.useState(0),[A,C]=B.useState(0),[N,k]=B.useState(""),[R,U]=B.useState(1),[j,D]=B.useState(!0),[O,Z]=B.useState({rolls:!1,shakes:!1,banana:!1,puppy:!1,drinks:!1}),[J,le]=B.useState({CookiesAndCream:!1,CocoNut:!1,ILoveCoffee:!1,Smores:!1,CinnamonAndCarrot:!1,StrawberryShortcake:!1}),[H,V]=B.useState({VainillaIng:!1,ChocolateIng:!1,FresaIng:!1,NutellaIng:!1,OreoIng:!1,ManíIng:!1,AlmendraIng:!1,CocoIng:!1,BizcochoDeVainillaIng:!1,PistachioIng:!1,AmaretoIng:!1,GranolaIng:!1,ParchaIng:!1,MangoIng:!1,CanelaIng:!1,AnísIng:!1,LimónIng:!1,CaféIng:!1,BrownieIng:!1,GuineoIng:!1,CameoIng:!1,TronkyIng:!1,ChipsIng:!1,CheesecakeIng:!1,ChocolateBlancoIng:!1,FruityPebblesIng:!1,CocoaPebblesIng:!1,QuesoIng:!1,UvaIng:!1,ChinaIng:!1,GuanabanaIng:!1,ChipsAhoyIng:!1,KitKatIng:!1,BlueberryIng:!1,RedVelvettIng:!1,NuecesIng:!1,CarameloIng:!1,CherryIng:!1,BrandyIng:!1,PinaIng:!1,PinaColadaIng:!1,ManzanaIng:!1,GuayabaIng:!1,BizcochoDeZanahoriaIng:!1,FerreroIng:!1,CrackersIng:!1,MarshmellowIng:!1}),[z,W]=B.useState({WhippedCreamTop:!1,FresaTop:!1,NutellaTop:!1,OreoTop:!1,ManíTop:!1,AlmendraTop:!1,CherryTop:!1,CarameloTop:!1,CanelaTop:!1,NuecesTop:!1,CocoRayadoTop:!1,PiñaTop:!1,CaféTop:!1,ChipsTop:!1,SprinkesDeColoresTop:!1,SprinkesDeChocolateTop:!1,ChocolateTop:!1,GummiesTop:!1,GranolaTop:!1,MielTop:!1,GuineoTop:!1,CocoaPebblesTop:!1,FruityPebblesTop:!1,MyMTop:!1,MarshmellowTop:!1}),{name:te,setName:fe}=B.useContext(hi),{metodo:F,setMetodo:K}=B.useContext(hi),{newItem:ee,setNewItem:ae}=B.useContext(hi),{newDrinkItem:ce,setNewDrinkItem:ye}=B.useContext(hi),{renderOrdersKey:be,setRenderOrdersKey:Te}=B.useContext(hi),{itemCounter:Xe,setItemCounter:ze}=B.useContext(hi),{order:He,setOrder:rt}=B.useContext(hi),{totalToPay:ft,setTotalToPay:Ie}=B.useContext(hi),{type:oe,setType:ut}=B.useContext(hi),{typeCounter:dt,setTypeCounter:Se}=B.useContext(hi),{favCounter:Qe,setFavCounter:Ze}=B.useContext(hi),{sumToSubstract:it,setSumtoSubstract:et}=B.useContext(hi),[mt,Rt]=B.useState(!1),[at,$t]=B.useState(!1),en=B.useRef(!1),Pt=B.useRef(!1),qt=B.useRef(!1),lt=B.useRef(!1),Ii=B.useRef(!1),pn=B.useRef(!1),or=B.useRef(!1),gn=B.useRef(!1),zn=B.useRef(!1),Wr=B.useRef(!0),[rn,Ss]=B.useState([]),[Un,zr]=B.useState(""),[ws,si]=B.useState([]),[Ht,Ln]=B.useState(""),[_s,ai]=B.useState([]),[xr,Gr]=B.useState(""),Dt={rolls:5,shakes:5,banana:6,puppy:5,drinks:1};B.useEffect(()=>{console.log("Current state of ingsFlag:",H)},[rn]),B.useEffect(()=>{const _e=Object.values(J).some(Ue=>Ue===!0);Rt(_e)},[J]),B.useEffect(()=>{var _e=JSON.parse(localStorage.getItem("FavFlag")),Ue=JSON.parse(localStorage.getItem("AGUA")),vt=JSON.parse(localStorage.getItem(bC)),Lt=JSON.parse(localStorage.getItem(SC)),Gt=JSON.parse(localStorage.getItem(z2)),bn=JSON.parse(localStorage.getItem(wC)),Sn=JSON.parse(localStorage.getItem(_C)),Ae=JSON.parse(localStorage.getItem(EC)),Ke=JSON.parse(localStorage.getItem(ev)),Nt=JSON.parse(localStorage.getItem(Ug)),an=JSON.parse(localStorage.getItem(TC));Wr&&(_e&&le(_e),vt&&fe(vt),Gt&&(v(Gt),Object.keys(Gt).length>0&&oi(Bt=>Bt.map(Ct=>Ct.ruta==="ingredientes"?{...Ct,selected:!0}:Ct)),Gt.forEach(function(Bt){var Ct=Bt+"Ing";if(console.log(Ct),localStorage.getItem(Ct)!==null)for(const Qn in H)Qn===Ct?localStorage.getItem(Ct)==="1"?(console.log(),H[Ct]=!0,console.log("Key set to true",H[Ct])):(H[Ct]=!1,console.log("Key set to false",H[Ct])):console.log("No key found");else console.log("NULL")})),bn&&(x(bn),Object.keys(bn).length>0&&oi(Bt=>Bt.map(Ct=>Ct.ruta==="toppings"?{...Ct,selected:!0}:Ct)),Object.values(bn).forEach(Bt=>{Bt.forEach(Ct=>{const Qn=Ct+"Top";localStorage.getItem(Qn)&&W(In=>({...In,[Qn]:localStorage.getItem(Qn)==="1"}))})})),Lt&&(oi(Bt=>Bt.map(Ct=>Ct.ruta==="tipo"?{...Ct,selected:!0}:Ct)),Ue>0?(C(Ue),console.log("Store Qty is greater than 0"),oi(Bt=>Bt.map(Ct=>Ct.ruta==="bebidas"?{...Ct,selected:!0}:Ct))):console.log("Store Qty in Else:",Ue),Lt!=oe&&ut(Lt),Lt==="rolls"?O.rolls=!0:Lt==="banana"?O.banana=!0:Lt==="shakes"?O.shakes=!0:Lt==="puppy"?O.puppy=!0:Lt==="drinks"&&(O.drinks=!0,console.log("DRINKS"))),Sn&&(oi(Bt=>Bt.map(Ct=>Ct.ruta==="cantidad"?{...Ct,selected:!0}:Ct)),Sn!=w&&S(Sn)),Ae&&(oi(Bt=>Bt.map(Ct=>Ct.ruta==="comentarios"?{...Ct,selected:!0}:Ct)),Ae!=N&&k(Ae)),Ke&&Ke!=ee&&(console.log("Item Type",Ke.type),ae(Ke)),Nt&&Nt!=He&&rt(Nt),an&&an!=F&&K(an)),Et.get("/ingrediente").then(Bt=>{const Ct=Bt.data;Ss(Ct)}).catch(Bt=>{console.log("Error",Bt)}),Et.get("/topping").then(Bt=>{const Ct=Bt.data;si(Ct)}).catch(Bt=>{console.log("Error",Bt)}),Et.get("/favorite").then(Bt=>{const Ct=Bt.data;ai(Ct)}).catch(Bt=>{console.log("Error",Bt)}),br(!1)},[]);const Bi=_e=>{zr(_e.target.value)},Qr=_e=>{Gr(_e.target.value)};B.useEffect(()=>{if(Un!==""){console.log("Ingrediente a Buscar",Un);const _e={nombre:Un};Et.get("/ingrediente",{params:_e}).then(Ue=>{console.log("Ingredientes encontrados",Ue.data),Ss(Ue.data)}).catch(Ue=>{console.log("Error",Ue)})}else Un===""&&(console.log("Ingrediente a Buscar",Un),Et.get("/ingrediente").then(_e=>{console.log("Ingredientes encontrados",_e.data),Ss(_e.data)}).catch(_e=>{console.log("Error",_e)}))},[Un]),B.useEffect(()=>{if(Ht!==""){const _e={nombre:Ht};Et.get("/topping",{params:_e}).then(Ue=>{si(Ue.data)}).catch(Ue=>{console.log("Error",Ue)})}else Ht===""&&Et.get("/topping").then(_e=>{si(_e.data)}).catch(_e=>{console.log("Error",_e)})},[Ht]),B.useEffect(()=>{if(xr!==""){const _e={nombre:xr};Et.get("/favorite",{params:_e}).then(Ue=>{ai(Ue.data)}).catch(Ue=>{console.log("Error",Ue)})}else xr===""&&Et.get("/favorite").then(_e=>{ai(_e.data)}).catch(_e=>{console.log("Error",_e)})},[xr]),B.useEffect(()=>{en.current?localStorage.setItem(bC,JSON.stringify(te)):en.current=!0},[te]),B.useEffect(()=>{Pt.current?localStorage.setItem(SC,JSON.stringify(oe)):Pt.current=!0},[oe]),B.useEffect(()=>{qt.current?localStorage.setItem(z2,JSON.stringify(m)):qt.current=!0},[m]),B.useEffect(()=>{const _e=Object.values(H).some(Ue=>Ue===!0);$t(_e)},[H]),B.useEffect(()=>{lt.current?localStorage.setItem(wC,JSON.stringify(b)):lt.current=!0},[b]),B.useEffect(()=>{Ii.current?localStorage.setItem(_C,JSON.stringify(w)):Ii.current=!0},[w]),B.useEffect(()=>{pn.current?localStorage.setItem(EC,JSON.stringify(N)):pn.current=!0},[N]),B.useEffect(()=>{if(or.current){if(ee.ings!=null||ee.type=="drinks"){localStorage.setItem(ev,JSON.stringify(ee));var _e=JSON.parse(localStorage.getItem(ev));if(_e!={})if(console.log("storeNewItem is not empty"),He.items!=null){console.log("order.Items is not undefined");var Ue=!1;He.items.map(vt=>{vt.item_id==_e.item_id&&(Ue=!0)}),Ue==!1&&(console.log("Adding Item"),rt(vt=>({...vt,items:[...vt.items,_e]})))}else rt(vt=>({...vt,items:[JSON.parse(localStorage.getItem(ev))]}))}}else or.current=!0},[Xe]),B.useEffect(()=>{et(0)},[ft]),B.useEffect(()=>{var Ke;var _e=!1,Ue=!1,vt=!1;if(localStorage.getItem(Sf)==null&&localStorage.setItem(Sf,0),gn.current){if(((Ke=JSON.parse(localStorage.getItem(Ug)))==null?void 0:Ke.items)!=null&&(He==null?void 0:He.items)!=null){var Lt=JSON.parse(localStorage.getItem(Ug));console.log("Are the items the same in both variables?",(He==null?void 0:He.items.length)===Lt.items.length),console.log("Order State Variable Items: ",He==null?void 0:He.items),console.log("Order LS Variable Items: ",Lt.items),(He==null?void 0:He.items.length)===Lt.items.length&&(JSON.stringify(He==null?void 0:He.items)===JSON.stringify(Lt.items)?(console.log("Mismos"),_e=!0):(console.log("No son los mismos"),_e=!1,vt=!0)),(He==null?void 0:He.items.length)<Lt.items.length&&(Ue=!0)}localStorage.setItem(Ug,JSON.stringify(He));var Gt=JSON.parse(localStorage.getItem(Ug)),bn=Gt.items;for(const Nt in bn)if(bn.hasOwnProperty(Nt)){for(const an in bn[Nt])if(bn[Nt].hasOwnProperty(an)&&an=="type"){var Sn=bn[Nt].qty,Ae=Dt[bn[Nt][an]]*Sn;_e==!1&&Ue==!1?vt==!1?(Ie(parseFloat(ft)+Ae),localStorage.setItem(Sf,parseFloat(ft)+Ae),console.log("Summed Quantity")):(Ie(parseFloat(ft)+it),localStorage.setItem(Sf,parseFloat(ft)+it),console.log("Substracted Quantity",it)):_e==!1&&Ue==!0?(Ie(parseFloat(ft)-it),localStorage.setItem(Sf,parseFloat(ft)-it),console.log("Substracted Quantity",it)):_e==!0&&(console.log("SAMMMEEEEEE"),console.log("TOTAL to Pay in LS",localStorage.getItem(Sf)),Ie(localStorage.getItem(Sf)))}}}else gn.current=!0},[He]),B.useEffect(()=>{zn.current?localStorage.setItem(TC,JSON.stringify(F)):zn.current=!0},[F]);const Ui=_e=>{fe(_e.target.value)},_i=_e=>{i(Ue=>!Ue)},Ei=_e=>{o(Ue=>!Ue)},Cn=_e=>{var Ue=_e.target.classList;if(Ue.contains("ingredients"))if(Ue.contains("favorite"))p(!1),_e.target.classList.add("active"),le(Lt=>{const Gt={};for(const bn in Lt)Gt[bn]=bn===_e.target.value;return localStorage.setItem("FavFlag",JSON.stringify(Gt)),Gt}),_e.target.value=="CookiesAndCream"?v(["Oreo","Chips","Queso"]):_e.target.value=="CocoNut"?v(["Coco","Nutella","Almendra"]):_e.target.value=="CinnamonAndCarrot"?v(["BizcochoDeZanahoria","Canela","Queso"]):_e.target.value=="ILoveCoffee"?v(["Caramelo","Café","Almendra"]):_e.target.value=="Smores"?v(["Marshmellow","Crackers","Chocolate"]):_e.target.value=="StrawberryShortcake"&&v(["Fresa","BizcochoDeVainilla","Queso"]);else if(m.includes(_e.target.value)){const Lt=m.filter(Gt=>Gt!==_e.target.value);v(Lt),console.log("removed "+_e.target.value+" from ingredient"),_e.target.classList.remove("active");var vt=_e.target.value+"Ing";localStorage.setItem(vt,"0"),V(Gt=>({...Gt,[vt]:!1}))}else{v(Gt=>[...Gt,_e.target.value]),console.log("added "+_e.target.value+" to ingredient"),_e.target.classList.add("active");var vt=_e.target.value+"Ing";localStorage.setItem(vt,"1"),V(Gt=>({...Gt,[vt]:!0}))}else if(Ue.contains("toppings"))if(b.includes(_e.target.value)){const Lt=b.filter(bn=>bn!==_e.target.value);x(Lt),console.log("removed "+_e.target.value+" from toppings"),_e.target.classList.remove("active");var vt=_e.target.value+"Top";localStorage.setItem(vt,"0"),W(bn=>({...bn,[vt]:!1}))}else{x(Gt=>[...Gt,_e.target.value]),console.log("added "+_e.target.value+" to toppings"),_e.target.classList.add("active");var vt=_e.target.value+"Top";localStorage.setItem(vt,"1"),W(Gt=>({...Gt,[vt]:!0}))}else Ue.contains("type")&&(d(!1),ut(_e.target.value),_e.target.classList.add("active"),Z(Lt=>{const Gt={};for(const bn in Lt)Gt[bn]=bn===_e.target.value;return Gt}))},Pi=()=>{S(w+1)},lr=()=>{w>0&&S(w-1)},Jr=()=>{C(A+1)},cr=()=>{A>0&&C(A-1)};function Ki(_e,Ue){return _e=Math.ceil(_e),Ue=Math.floor(Ue),Math.floor(Math.random()*(Ue-_e+1))+_e}const Xi=_e=>{oe==""?(e(!0),Kn.error("Escoge un Type (Rolls, Shakes, Banana, Puppy o Drinks")):w==0&&oe!="drinks"?(e(!0),w==0&&Kn.error("Cantidad no puede ser cero")):(oe=="drinks"?(console.log("Different Item"),ae({item_id:Ki(0,1e8),type:oe,nombre:"Agua",qty:A}),C(0),ut(""),Se(dt-1),v([]),x([]),e(!1),S(0),k(""),U(Ue=>Ue+1)):(console.log("EVENT"),ae({item_id:Ki(0,1e8),type:oe,ings:m,tops:Object.values(b),qty:w,comments:N}),ut(""),Se(dt-1),v([]),x({}),e(!1),S(0),k(""),U(Ue=>Ue+1),V(Ue=>{const vt={};return Object.keys(Ue).forEach(Lt=>{vt[Lt]=!1}),vt}),W(Ue=>{const vt={};return Object.keys(Ue).forEach(Lt=>{vt[Lt]=!1}),vt}),le(Ue=>{const vt={};return Object.keys(Ue).forEach(Lt=>{vt[Lt]=!1}),vt}),localStorage.setItem("FavFlag",JSON.stringify({CookiesAndCream:!1,CocoNut:!1,ILoveCoffee:!1,Smores:!1,CinnamonAndCarrot:!1,StrawberryShortcake:!1})),oi(Ue=>Ue.map(vt=>({...vt,selected:!1}))),window.location.reload()),Kn.success("Item añadido a la orden!"))};new BroadcastChannel("reload-channel");const{hideOrders:Rr,toggleHideOrders:ds}=B.useContext(hi),Zr=()=>{ds(_e=>!_e)},[Es,oi]=B.useState([{label:"Tipo",ruta:"tipo",selected:!1},{label:"Bebidas",ruta:"bebidas",selected:!1},{label:"Ingredientes",ruta:"ingredientes",selected:!1},{label:"Cantidad",ruta:"cantidad",selected:!1},{label:"Toppings",ruta:"toppings",selected:!1}]),[fs,br]=B.useState(!1),[Pr,Vr]=B.useState(""),ra=_e=>{console.log(_e),Vr(_e),br(!0),setTimeout(()=>{br(!1)},500)},[li,Wa]=B.useState(!1),Ts=()=>{Wa(!0),oe=="drinks"&&localStorage.setItem("AGUA",JSON.stringify(A))},Ti=()=>{window.location.href="/terminal"},Oe=B.useRef(null),Kt=()=>{Oe.current&&(Oe.current.scrollLeft-=150)},ln=()=>{Oe.current&&(Oe.current.scrollLeft+=150)},[Ai,yt]=B.useState(!1);return fs?_.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center vh-100 w-100",children:[_.jsx("span",{className:"spinner-border spinner-border-lg ms-2",role:"status","aria-hidden":"true"}),_.jsx("span",{className:"display-3 mt-4 fw-bold",children:"Cargando..."})]}):Pr=="tipo"?_.jsxs("div",{className:"container mt-4",children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[_.jsx("button",{className:"btn btn-outline-dark me-2",onClick:Ti,children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("h2",{className:"mb-4",children:"Elige un Tipo"})]}),_.jsxs("div",{className:"d-flex flex-wrap gap-3 justify-content-center align-items-center",children:[u&&_.jsx("div",{className:"text-danger text-center",children:"Only One Type per Item"}),_.jsxs("div",{className:"mt-3 mb-3 d-flex flex-wrap w-100 justify-content-center align-items-center ",style:{height:"80vh"},children:[_.jsxs("div",{className:" d-flex flex-wrap w-100 justify-content-around align-items-center gap-3",children:[_.jsxs("button",{style:{width:"300px",height:"175px"},className:O.rolls?"btn btn-outline-secondary rounded-pill type active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"rolls",onClick:Cn,children:[" ",_.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Rolls"})," "]}),_.jsxs("button",{style:{width:"300px",height:"175px"},className:O.shakes?"btn btn-outline-secondary type rounded-pill active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"shakes",onClick:Cn,children:[" ",_.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Shakes"})," "]}),_.jsxs("button",{style:{width:"300px",height:"175px"},className:O.banana?"btn btn-outline-secondary rounded-pill type active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"banana",onClick:Cn,children:[" ",_.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Banana"})," "]}),_.jsxs("button",{style:{width:"300px",height:"175px"},className:O.puppy?"btn btn-outline-secondary rounded-pill type active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"puppy",onClick:Cn,children:[" ",_.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Puppy"})," "]}),_.jsxs("button",{style:{width:"300px",height:"175px"},className:O.drinks?"btn btn-outline-secondary rounded-pill type active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"drinks",onClick:Cn,children:[" ",_.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Drinks"})," "]})]}),_.jsxs("div",{className:"d-flex flex-row align-items-center gap-4 mt-5",children:[_.jsx("button",{className:`btn ${li?"btn-success":"btn-primary"} rounded-pill p-4 d-flex align-items-center justify-content-center gap-3`,onClick:Ts,children:li?_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"bi bi-check-circle-fill text-white display-5"}),_.jsx("h4",{className:"display-4  p-4",children:"Guardado"})]}):_.jsx("h4",{className:"display-4  p-4",children:"Guardar"})}),li&&_.jsx("button",{className:"btn btn-outline-dark rounded-pill px-5 py-3",onClick:Ti,children:_.jsx("h4",{className:" display-4 p-4",children:"Volver"})})]})]})]})]}):Pr=="ingredientes"?_.jsxs("div",{className:"container mt-4 d-flew flex-column justify-content-center align-items-center gap-4",style:{maxHeight:"100vh",maxWidth:"90vw"},children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",style:{maxWidth:"90vw",minWidth:"90vw"},children:[_.jsx("button",{className:"btn btn-outline-dark",onClick:Ti,children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("h2",{className:"",children:"Elige Ingredientes"})]}),_.jsx("div",{className:" d-flex flex-column align-items-center justify-content-center",children:_.jsxs("div",{className:"",style:{minWidth:"90vw"},children:[_.jsxs("div",{className:"",children:[_.jsxs("button",{className:`rounded-3 w-100 col d-flex flex-row text-start justify-content-between border border-light p-4 ${at?"bg-secondary-subtle":"bg-light"}`,disabled:at,children:[_.jsx("div",{className:"lead",onClick:at?void 0:Ei,children:"Favorites"}),mt&&_.jsx("button",{className:"btn btn-outline-danger p-3 rounded-pill",onClick:()=>{le({CookiesAndCream:!1,CocoNut:!1,ILoveCoffee:!1,Smores:!1,CinnamonAndCarrot:!1,StrawberryShortcake:!1}),v([]),localStorage.setItem("FavFlag",JSON.stringify({CookiesAndCream:!1,CocoNut:!1,ILoveCoffee:!1,Smores:!1,CinnamonAndCarrot:!1,StrawberryShortcake:!1})),localStorage.setItem(z2,JSON.stringify([]))},children:"Quitar selección"}),_.jsxs("div",{className:"d-flex align-items-center gap-2",children:[_.jsx("i",{className:"bi bi-search"}),_.jsx("input",{type:"text",className:"form-control form-control-md",style:{maxWidth:"150px"},onChange:at?void 0:Qr,placeholder:"Search",disabled:at})]})]}),_.jsx("div",{className:"overflow-scroll d-flex flex-wrap",style:{opacity:at?.5:1,pointerEvents:at?"none":"auto"},children:_s.map(_e=>_.jsx("button",{className:J[_e.nombre]?"btn btn-outline-secondary m-1 ingredients rounded-pill favorite active p-4":"rounded-pill btn btn-outline-secondary m-1 favorite ingredients p-4",value:_e.nombre,onClick:Cn,disabled:at,children:_e.nombre},_e.nombre))})]}),_.jsxs("div",{className:" d-flex flex-column align-items-center justify-content-center",children:[_.jsxs("button",{className:`rounded-3 w-100 col d-flex flex-row text-start justify-content-between border align-items-center border-light p-4 m-2 ${mt?"bg-secondary-subtle":"bg-light"}`,disabled:mt,children:[_.jsx("div",{className:"lead",onClick:mt?void 0:_i,children:"Ingredients"}),_.jsxs("div",{className:"d-flex align-items-center gap-2",children:[_.jsx("i",{className:"bi bi-search"}),_.jsx("input",{type:"text",className:"form-control form-control-md",style:{maxWidth:"150px"},onChange:mt?void 0:Bi,placeholder:"Search",disabled:mt})]})]}),_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center w-100 mt-3 mb-3 m-2",children:[_.jsx("button",{className:"btn btn-outline-dark",onClick:mt?void 0:Kt,disabled:mt,children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("button",{className:"btn btn-outline-dark",onClick:mt?void 0:ln,disabled:mt,children:_.jsx("i",{className:"bi bi-chevron-right"})})]}),_.jsx("div",{className:"d-flex align-items-center",children:_.jsx("div",{className:"overflow-scroll d-flex flex-row flex-nowrap",ref:Oe,style:{maxWidth:"90vw",maxHeight:"30vh",opacity:mt?.5:1,pointerEvents:mt?"none":"auto"},children:rn.map(_e=>_.jsx("button",{className:H[`${_e.nombre}Ing`]?"btn btn-outline-secondary m-1 ingredients active p-4 rounded-pill w-100":"btn btn-outline-secondary m-1 ingredients p-4 rounded-pill w-100",value:_e.nombre,onClick:Cn,disabled:mt,children:_e.nombre},_e.nombre))})}),_.jsx("div",{className:"",style:{maxWidth:"90vw",minWidth:"90vw",maxHeight:"30vh",overflowY:"auto"},children:m.length>0&&_.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[_.jsx("div",{className:" position-fixed  bottom-0 m-4",style:{zIndex:1e3},children:_.jsxs("div",{className:"d-flex flex-row align-items-center gap-4",children:[_.jsx("button",{className:`btn ${li?"btn-success":"btn-dark"} rounded-pill p-4 d-flex align-items-center justify-content-center gap-3`,onClick:Ts,children:li?_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"bi bi-check-circle-fill text-white lead"}),_.jsx("h4",{className:"lead",children:"Guardado"})]}):_.jsx("h4",{className:"lead",children:"Guardar"})}),li&&_.jsx("button",{className:"btn btn-dark rounded-pill px-5 py-3",onClick:Ti,children:_.jsx("h4",{className:"lead",children:"Volver"})})]})}),_.jsxs("div",{className:"mt-3 bg-primary p-4 rounded-5 ",style:{maxWidth:"90vw",minWidth:"90vw",maxHeight:"30vh",overflowY:"auto"},children:[_.jsx("h4",{className:"text-center text-light lead fw-bold",children:"Ingredientes Seleccionados"}),_.jsx("ul",{className:"list-group d-flex flex-row flex-wrap justify-content-around w-100",children:m.map((_e,Ue)=>_.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center p-4 mb-1 rounded-5 bg-light",children:[_.jsx("div",{className:"lead",children:_e}),!mt&&_.jsx("button",{className:"btn btn-danger btn-md ms-4",onClick:()=>{const vt=m.filter(Gt=>Gt!==_e);v(vt);var Lt=_e+"Ing";localStorage.setItem(Lt,"0"),V(Gt=>({...Gt,[Lt]:!1}))},children:_.jsx("i",{className:"bi bi-x"})})]},Ue))})]})]})})]})]})})]}):Pr=="toppings"?_.jsxs("div",{className:"container mt-4",children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[_.jsx("button",{className:"btn btn-outline-dark me-2",onClick:Ti,children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("h2",{className:"mb-4",children:"Elige Toppings"})]}),_.jsxs("div",{className:"d-flex flex-wrap gap-3 justify-content-center",children:[w>=1&&_.jsxs(_.Fragment,{children:[_.jsx("h4",{className:"text-secondary mb-3",children:"Toppings por helado"}),Array.from({length:w},(_e,Ue)=>{const vt=Ue,Lt=b[vt]||[];return _.jsxs("div",{className:"mb-4",children:[_.jsx("div",{className:"",children:_.jsxs("h5",{children:["Helado #",vt+1]})}),_.jsx("div",{className:"d-flex flex-wrap gap-3 mt-2 justify-content-center",children:ws.map((Gt,bn)=>_.jsx("button",{type:"button",className:`btn btn-outline-primary fw-bold px-4 py-3 fs-5 rounded-3 ${Lt.includes(Gt.nombre)?"active":""}`,onClick:()=>{const Sn=[...Lt],Ae=Sn.indexOf(Gt.nombre);Ae>-1?Sn.splice(Ae,1):Sn.length<3&&Sn.push(Gt.nombre),x(Ke=>({...Ke,[vt]:Sn}))},children:Gt.nombre},bn))})]},vt)})]}),w>=1&&_.jsxs("div",{className:"mt-4 bg-light p-4 rounded-4 shadow-sm d-flex flex-column justify-content-center align-items-center",style:{maxWidth:"90vw",minWidth:"90vw"},children:[_.jsx("h4",{className:"text-secondary",children:"Tu selección"}),_.jsxs("ul",{className:"list-group mt-3",children:[Object.entries(b).map(([_e,Ue])=>_.jsxs("li",{className:"list-group-item fs-5",children:[_.jsxs("strong",{children:["Toppings Helado #",parseInt(_e)+1,":"]}),_.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:Ue.length>0?Ue.map((vt,Lt)=>_.jsxs("span",{className:"badge bg-primary fs-6 p-3 rounded-pill",children:[vt,_.jsx("button",{type:"button",className:"btn btn-sm btn-light ms-2 py-0 px-2",onClick:()=>{const Gt=[...Ue];Gt.splice(Lt,1),x(bn=>({...bn,[_e]:Gt}))},children:"✕"})]},Lt)):_.jsx("span",{className:"text-muted",children:"Ninguno"})})]},_e)),_.jsxs("li",{className:"list-group-item fs-5",children:[_.jsx("strong",{children:"Cantidad de helados:"})," ",w]})]}),_.jsx("div",{className:"d-flex align-items-center justify-content-center m-4",style:{zIndex:1e3},children:_.jsxs("div",{className:"d-flex flex-row align-items-center gap-4",children:[_.jsx("button",{className:`btn ${li?"btn-success":"btn-dark"} rounded-pill p-4 d-flex align-items-center justify-content-center gap-3`,onClick:Ts,children:li?_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"bi bi-check-circle-fill text-white lead"}),_.jsx("h4",{className:"lead",children:"Guardado"})]}):_.jsx("h4",{className:"lead",children:"Guardar"})}),li&&_.jsx("button",{className:"btn btn-dark rounded-pill px-5 py-3",onClick:Ti,children:_.jsx("h4",{className:"lead",children:"Volver"})})]})})]})]})]}):Pr=="bebidas"?_.jsxs("div",{className:"container mt-4 d-flew flex-column justify-content-center align-items-center gap-4",style:{maxHeight:"100vh",maxWidth:"90vw"},children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[_.jsx("button",{className:"btn btn-outline-dark me-2",onClick:Ti,children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("h2",{className:"mb-4",children:"Elige Bebida"})]}),_.jsxs("div",{className:" d-flex flex-column m-2 p-3 lead justify-content-center align-items-center ",style:{width:"90vw"},children:[_.jsx("div",{className:"lead",children:"Agua"}),_.jsxs("div",{className:"d-flex flex-row justify-content-around align-items-center gap-3 w-100",children:[_.jsx("button",{className:"btn btn-outline-primary rounded-pill lead",onClick:cr,children:"-"}),_.jsx("div",{className:"lead",children:A}),_.jsx("button",{className:"btn btn-outline-primary rounded-pill lead",onClick:Jr,children:"+"})]})]}),_.jsxs("div",{className:"d-flex flex-row align-items-center justify-content-center gap-4 mt-5",children:[_.jsx("button",{className:`btn ${li?"btn-success":"btn-primary"} rounded-pill p-4 d-flex align-items-center justify-content-center gap-3`,onClick:Ts,children:li?_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"bi bi-check-circle-fill text-white display-5"}),_.jsx("h4",{className:"display-4  p-4",children:"Guardado"})]}):_.jsx("h4",{className:"display-4  p-4",children:"Guardar"})}),li&&_.jsx("button",{className:"btn btn-outline-dark rounded-pill px-5 py-3",onClick:Ti,children:_.jsx("h4",{className:" display-4 p-4",children:"Volver"})})]})]}):Pr=="cantidad"?_.jsxs("div",{className:"container mt-4",children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[_.jsx("button",{className:"btn btn-outline-dark me-2",onClick:Ti,children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("h2",{className:"mb-4",children:"Elige Cantidad"})]}),_.jsxs("div",{className:"d-flex flex-wrap gap-3 justify-content-center",children:[_.jsxs("div",{className:" d-flex flex-column m-2 p-3  justify-content-center align-items-center gap-3",style:{width:"90vw"},children:[_.jsx("div",{className:" display-6",children:"Cantidad"}),_.jsxs("div",{className:" d-flex flex-row w-100 justify-content-around align-items-center",children:[_.jsx("button",{className:"btn btn-primary rounded-pill display-6",onClick:lr,children:_.jsx("p",{className:"display-6",children:"-"})}),_.jsx("div",{className:" display-6 ",children:w}),_.jsx("button",{className:"btn btn-primary rounded-pill display-6",onClick:Pi,children:_.jsx("p",{className:"display-6",children:"+"})})]})]}),_.jsxs("div",{className:"d-flex flex-row align-items-center gap-4 mt-5",children:[_.jsx("button",{className:`btn ${li?"btn-success":"btn-primary"} rounded-pill p-4 d-flex align-items-center justify-content-center gap-3`,onClick:Ts,children:li?_.jsxs(_.Fragment,{children:[_.jsx("i",{className:"bi bi-check-circle-fill text-white display-5"}),_.jsx("h4",{className:"display-4  p-4",children:"Guardado"})]}):_.jsx("h4",{className:"display-4  p-4",children:"Guardar"})}),li&&_.jsx("button",{className:"btn btn-outline-dark rounded-pill px-5 py-3",onClick:Ti,children:_.jsx("h4",{className:" display-4 p-4",children:"Volver"})})]})]})]}):Pr=="comentarios"?_.jsxs("div",{className:"container mt-4",children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[_.jsx("button",{className:"btn btn-outline-dark me-2",onClick:Ti,children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("h2",{className:"mb-4",children:"Escribe Comentarios"})]}),_.jsx("div",{className:"d-flex flex-wrap gap-3 justify-content-center"})]}):_.jsxs("div",{className:"bg-light terminal-screen container-fluid py-4",style:{minHeight:"100vh"},children:[_.jsxs("div",{className:"row justify-content-center mb-4",children:[_.jsx("div",{className:"col-12 col-md-4 mb-3 d-flex justify-content-center",children:_.jsx("div",{className:"btn btn-outline-primary rounded-pill px-4 py-3 w-100 text-center",onClick:Zr,children:_.jsx("span",{className:"lead",children:"Orders Screen"})})}),_.jsx("div",{className:"col-12 col-md-6",children:_.jsx("input",{type:"text",name:"cliente",className:"form-control border border-dark rounded-3 fs-4 py-3",placeholder:"Nombre del Cliente",value:te,onChange:Ui})})]}),_.jsx("div",{className:"row justify-content-center",children:_.jsx("div",{className:"col-12 d-flex flex-wrap justify-content-center gap-4",children:Es.filter(_e=>!(_e.ruta==="bebidas"&&oe!=="drinks"||(_e.ruta==="ingredientes"||_e.ruta==="toppings"||_e.ruta==="cantidad")&&oe==="drinks")).map(_e=>{let Ue=!1;return(_e.ruta==="ingredientes"&&oe===0||oe==="")&&(Ue=!0),_e.ruta==="cantidad"&&m.length===0&&(Ue=!0),_e.ruta==="toppings"&&w===0&&(Ue=!0),_.jsxs("button",{className:`btn btn-outline-dark rounded d-flex flex-column align-items-center justify-content-center text-center ${_e.ruta}`,style:{width:"100%",maxWidth:"400px",height:"180px",backgroundColor:Ue?"#dee2e6":"transparent",color:Ue?"#6c757d":"inherit",cursor:Ue?"not-allowed":"pointer"},onClick:()=>ra(_e.ruta),disabled:Ue,children:[_e.selected&&_.jsx("i",{className:"bi bi-check-circle-fill text-success display-4 mb-2"}),_.jsx("h4",{className:"display-6 m-0",children:_e.label})]},_e.ruta)})})}),_.jsx("div",{className:"row mt-5 justify-content-center",children:_.jsxs("div",{className:"col-12 col-md-6 text-center",children:[_.jsx("button",{className:"btn btn-primary p-4 rounded-pill w-100 fs-3",onClick:Xi,children:"Añadir Item a la Orden"}),_.jsx($0,{position:"top-right"})]})}),_.jsx("div",{className:"text-end me-4 mt-3",children:_.jsx("button",{className:"btn btn-outline-primary rounded-circle p-3",onClick:()=>yt(_e=>!_e),title:"Tu selección",children:_.jsx("i",{className:"bi bi-info-lg fs-4"})})}),Ai&&_.jsxs("div",{className:"position-fixed end-0 bottom-0 bg-light border p-4 rounded shadow",style:{width:"50vw",height:"50vh",zIndex:999,overflowY:"auto"},children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center mb-3",children:[_.jsx("h5",{className:"fw-bold",children:"Tu selección"}),_.jsx("button",{className:"btn btn-sm btn-outline-danger rounded-circle p-3",onClick:()=>yt(_e=>!_e),title:"Tu selección",children:_.jsx("i",{className:"bi bi-x-lg"})})]}),_.jsxs("ul",{className:"list-group mt-3",children:[_.jsxs("li",{className:"list-group-item d-flex flex-row",children:[_.jsx("strong",{children:"Tipo:"}),_.jsx("div",{className:"",children:_.jsxs("span",{className:"badge bg-dark p-2 fs-6 rounded-pill",children:[oe==="rolls"&&"Rollitos",oe==="banana"&&"Banana Split",oe==="shakes"&&"Batidas",oe==="puppy"&&"Puppy Rolls",oe==="drinks"&&"Bebidas"]})})]}),oe!=="drinks"&&_.jsxs(_.Fragment,{children:[_.jsxs("li",{className:"list-group-item",children:[_.jsx("strong",{children:"Ingredientes:"}),_.jsx("div",{className:"mt-2",children:Array.isArray(m)&&m.length>0?_.jsx("ul",{className:"list-group d-flex flex-row flex-wrap list-unstyled",children:m.map((_e,Ue)=>_.jsx("span",{className:"badge bg-success p-2 fs-6 rounded-pill",children:_.jsx("li",{className:"text-light bg-success p-1",children:_e},Ue)},Ue))}):_.jsx("span",{className:"text-muted",children:"Ninguno"})})]}),_.jsxs("li",{className:"list-group-item",children:[_.jsx("strong",{children:"Toppings por helado:"}),_.jsx("div",{className:"mt-2",children:Object.entries(b).length>0?_.jsx("ul",{className:"list-group",children:Object.entries(b).map(([_e,Ue])=>_.jsxs("li",{className:"list-group-item",children:[_.jsxs("strong",{children:["Helado #",parseInt(_e)+1,":"]}),_.jsx("ul",{className:"mt-1",children:Ue.length>0?Ue.map((vt,Lt)=>_.jsx("span",{className:"badge bg-primary p-2 fs-6 rounded-pill",children:_.jsx("li",{className:"p-1",children:vt},Lt)},Lt)):_.jsx("li",{className:"text-muted ps-3",children:"Ninguno"})})]},_e))}):_.jsx("span",{className:"text-muted",children:"Ninguno"})})]})]}),_.jsxs("li",{className:"list-group-item",children:[_.jsx("strong",{children:"Cantidad:"})," ",_.jsx("span",{className:"badge bg-danger p-2 fs-6 rounded-pill",children:A>0&&w==0?`${A} (agua)`:w>0?`${w} (helados)`:"No asignada"})]})]})]})]})}function JG(){return _.jsxs("div",{className:"d-flex flex-row",children:[_.jsx(XG,{}),_.jsx(QG,{})]})}const ZG="admin",eV="admin",tV="employee",nV="employee",G2="username",V2="password";function iV(){const[n,e]=B.useState(!1),[t,i]=B.useState(""),[r,s]=B.useState(""),[a,o]=B.useState(!1),[l,c]=B.useState(!1);B.useEffect(()=>{var S=localStorage.getItem(G2),A=localStorage.getItem(V2);S!=null&&A!=null&&(i(S),s(A),e(!0),S=="admin"&&A=="admin"&&c(!0))},[]);const u=S=>{S.preventDefault(),t==ZG&&r==eV?(c(!0),e(!0),localStorage.setItem(G2,t),localStorage.setItem(V2,r)):t==tV&&r==nV?(c(!1),e(!0),localStorage.setItem(G2,t),localStorage.setItem(V2,r)):(o(!0),e(!1))},d=S=>{S.preventDefault(),e(!1)},h=S=>{i(S.target.value)},p=S=>{s(S.target.value)},[m,v]=B.useState(!1),b=()=>v(!1),x=()=>v(!0),w=async S=>{S.preventDefault();const A=S.target,C=new FormData(A),N=C.get("name"),k=C.get("message");console.log({name:N,message:k}),console.log("Form submitted!"),Kn.success("Mensaje sometido, Puedes cerrar el menu");const R=await Et.post("/sales",{nombre:N,mensaje:k});console.log(R),b()};return _.jsxs("div",{className:"  justify-content-center  align-items-center d-flex flex-column home",style:{height:"100vh"},children:[_.jsx("div",{className:"",children:_.jsx("h1",{className:"fw-bold text-light",children:"Oasis POS System"})}),n?_.jsxs("div",{className:"d-flex flex-column text-center",children:[_.jsxs(oo,{children:[_.jsx(oo.Link,{to:"/terminal",as:md,className:"btn btn-outline-primary text-light m-3",children:"Terminal"}),_.jsx(oo.Link,{to:"/queue",as:md,className:"btn btn-outline-primary text-light m-3",children:"Queue"}),_.jsx(oo.Link,{to:"https://oasis-i2.herokuapp.com",as:md,className:"btn btn-outline-primary text-light m-3",children:"Inventory"}),l&&_.jsx(oo.Link,{to:"/ventas",as:md,className:"btn btn-outline-primary text-light m-3",children:"Sales"})]}),_.jsx("button",{className:"btn rounded-pill btn-outline-light",onClick:d,children:"Sign Out"}),l&&_.jsxs("div",{className:"mt-5",style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",zIndex:1050},children:[_.jsx(so,{variant:"primary",onClick:x,children:"No vas a abrir hoy? Deja registrado porque"}),_.jsxs(Wt,{show:m,onHide:b,children:[_.jsx($0,{position:"top-right"}),_.jsx(Wt.Header,{closeButton:!0,children:_.jsx(Wt.Title,{children:"Motivo de cierre"})}),_.jsx(Wt.Body,{children:_.jsxs(al,{onSubmit:w,children:[_.jsxs(al.Group,{className:"mb-3",controlId:"formName",children:[_.jsx(al.Label,{children:"Nombre"}),_.jsx(al.Control,{name:"name",type:"text",placeholder:"Nombre",required:!0})]}),_.jsxs(al.Group,{name:"name",className:"mb-3",controlId:"formMessage",children:[_.jsx(al.Label,{children:"Mensaje"}),_.jsx(al.Control,{name:"message",type:"text",placeholder:"Mensaje",required:!0})]}),_.jsx(so,{variant:"primary",type:"submit",children:"Someter"})]})})]})]})]}):_.jsxs("div",{className:"d-flex flex-column",children:[a&&_.jsx("div",{className:"text-danger text-center",children:"Incorrect Credentials"}),_.jsxs(al,{children:[_.jsxs(al.Group,{className:"mb-3",controlId:"formBasicEmail",children:[_.jsx(al.Control,{type:"text",placeholder:"Username",className:"m-1",value:t,onChange:h}),_.jsx(al.Control,{type:"password",placeholder:"Password",className:"m-1",value:r,onChange:p})]}),_.jsx("button",{className:"btn btn-outline-primary rounded-pill p-2 w-100",onClick:u,children:"Login"})]})]})]})}function rV(){const[n,e]=B.useState(null);new BroadcastChannel("reload-channel");const{renderOrdersKey:t,setRenderOrdersKey:i}=B.useContext(hi),{newOrderCounter:r,increaseNewOrderCounter:s}=B.useContext(hi),a=async()=>{const H=await Et.get("/orders/pending_orders");k(H.data)};B.useEffect(()=>{const H=setInterval(()=>{console.log("This will run every 5 seconds"),a(),Et.get("/orders").then(V=>{console.log("Response",V.data),e(V.data)}).catch(V=>{console.log("Error",V)})},500);return()=>clearInterval(H)},[t]);const o=async H=>{try{console.log(H);const V=await Et.delete("/orders",{data:{id:H}});console.log("Item deleted:",V.data)}catch(V){console.log("error:",V)}i(V=>V+1),x(!1),location.reload()},l=async H=>{var V;if(H.status=="done")V={id:H._id,updated_record:{client_name:H.client_name,items:H.items,payment_method:H.payment_method,total:H.total,status:"in progress"}};else if(H.status=="in progress")var V={id:H._id,updated_record:{client_name:H.client_name,items:H.items,payment_method:H.payment_method,total:H.total,status:"done"}};try{const z=await Et.put("/orders/",V);console.log("Order status updated successfully:",z.data),location.reload()}catch(z){console.error("Failed to update order status:",z)}location.reload()},[c,u]=B.useState({}),[d,h]=B.useState({}),p=H=>{u(V=>({...V,[H]:!V[H]}))},[m,v]=B.useState(0),[b,x]=B.useState(!1),w=()=>x(!1),S=H=>{x(!0),v(H)},[A,C]=B.useState(!1),[N,k]=B.useState([]),R=async H=>{await Et.patch(`/orders/pending_orders/${H}/confirm`),a(),C(!1)},[U,j]=B.useState(null),[D,O]=B.useState(null);console.log(N);const Z=N==null?void 0:N.filter(H=>H.paymentConfirmed!==void 0&&H.paymentConfirmed===!1),[J,le]=B.useState({});return _.jsxs("div",{children:[_.jsxs(Wt,{show:b,onHide:w,children:[_.jsx(Wt.Header,{closeButton:!0,children:_.jsx(Wt.Title,{children:"Deleting Order"})}),_.jsx(Wt.Body,{children:"Warning, you're about to delete an order!"}),_.jsxs(Wt.Footer,{children:[_.jsx(so,{variant:"secondary",onClick:w,children:"Cancel"}),_.jsx(so,{variant:"primary",onClick:()=>o(m),children:"Delete"})]})]}),_.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between m-2",children:[_.jsx("div",{className:"d-flex pt-3 w-25 pb-3 text-center align-items-center justify-content-center",children:_.jsx(oo,{children:_.jsx(oo.Link,{to:"/",as:md,className:"btn ",style:{fontSize:"1rem"},children:"Home"})})}),_.jsx("div",{className:"pt-3 pb-3 d-flex w-75 text-center justify-content-center align-items-center display-6",children:"Órdenes Pendientes"}),_.jsxs("button",{className:"btn btn-dark w-25 rounded-pill shadow-sm py-3 px-4 fw-semibold text-white d-flex align-items-center justify-content-center gap-2",style:{maxWidth:"400px",fontSize:"1rem",letterSpacing:"0.3px"},onClick:()=>C(!0),children:[Z.length>0&&_.jsx("span",{className:"badge rounded-pill bg-danger",style:{fontSize:"1rem"},children:Z.length}),"Órdenes de Kiosko"]}),_.jsxs(Wt,{show:A,onHide:()=>C(!1),centered:!0,size:"lg",children:[_.jsx(Wt.Header,{closeButton:!0,children:_.jsx(Wt.Title,{children:"Órdenes Pendientes"})}),_.jsx(Wt.Body,{style:{maxHeight:"60vh",overflowY:"auto"},children:N.map(H=>{var V;return _.jsxs("div",{className:"border rounded p-3 mb-3",children:[_.jsxs("p",{children:[_.jsx("strong",{children:"Cliente:"})," ",H.client_name]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Total:"})," $",H.total]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Pago:"})," ",H.payment_method]}),_.jsxs("div",{className:"mt-2",children:[_.jsx("strong",{children:"Helados:"}),(V=H.items)==null?void 0:V.map((z,W)=>{var te,fe;return _.jsxs("div",{className:"border rounded p-2 mt-2",children:[_.jsxs("p",{children:[_.jsxs("strong",{children:["#",W+1,":"]})," ",z.combination||"Helado"]}),_.jsxs("p",{children:[_.jsx("strong",{children:"Toppings:"})," ",U===H._id?_.jsx("input",{className:"form-control",type:"text",value:((fe=(te=D==null?void 0:D.items[W])==null?void 0:te.toppings)==null?void 0:fe.join(", "))||"",onChange:F=>{const K=F.target.value.split(",").map(ae=>ae.trim()),ee=[...D.items];ee[W].toppings=K,O({...D,items:ee})}}):z.toppings&&z.toppings.length>0?z.toppings.join(", "):"Ninguno"]})]},W)})]}),_.jsxs("p",{children:[_.jsx("strong",{children:"¿Confirmado?:"})," ",H.paymentConfirmed?"Sí":"No"]}),!H.paymentConfirmed&&U===H._id?_.jsx(_.Fragment,{children:_.jsxs("div",{className:"d-flex gap-2 mt-3",children:[_.jsxs("select",{className:"form-select",value:D.payment_method,onChange:z=>O({...D,payment_method:z.target.value}),children:[_.jsx("option",{value:"ATH",children:"ATH"}),_.jsx("option",{value:"CASH",children:"CASH"})]}),_.jsx("button",{className:"btn btn-success",onClick:async()=>{await Et.patch(`/orders/pending_orders/${H._id}/edit`,D),j(null),a()},children:"Guardar cambios"}),_.jsx("button",{className:"btn btn-secondary",onClick:()=>j(null),children:"Cancelar"})]})}):!H.paymentConfirmed&&_.jsxs("div",{className:"d-flex gap-2 mt-3",children:[_.jsx("button",{className:"btn btn-primary",onClick:()=>R(H._id),children:"Confirmar"}),_.jsx("button",{className:"btn btn-warning",onClick:()=>{j(H._id),O(JSON.parse(JSON.stringify(H)))},children:"Modificar"})]})]},H._id)})}),_.jsx(Wt.Footer,{children:_.jsx("button",{className:"btn btn-secondary",onClick:()=>C(!1),children:"Cerrar"})})]}),_.jsxs("div",{className:"",children:[_.jsx("img",{src:"",alt:""}),_.jsx("div",{className:"container mt-5"})]})]}),n?_.jsx("div",{className:"list-group h-100",children:n.map(H=>_.jsxs("div",{className:`d-flex justify-content-center align-items-center flex-column list-group-item list-group-item-action p-3 border rounded-2 m-2 ${H.status==="done"?"bg-success-subtle":""}`,children:[_.jsxs("div",{className:"d-flex flex-row w-100 justify-content-between align-items-center",children:[_.jsx("button",{className:"btn fs-4",style:{width:"100px"},children:H.client_name},H._id),_.jsx("button",{className:"btn fs-4",onClick:()=>p(H._id),children:_.jsx("i",{className:`bi ${c[H._id]==!0?"bi-eye-slash":"bi-eye"}`})},H._id),_.jsxs("button",{className:"btn text-secondary fs-4",onClick:()=>S(H._id),children:["  ",_.jsx("i",{className:"bi bi-trash"})]}),_.jsxs("button",{className:`btn fs-5 px-3 py-2 fw-semibold d-flex align-items-center gap-2 
                        ${H.status==="done"?"btn-success text-white":"btn-outline-secondary"}`,onClick:()=>l(H),children:[_.jsx("i",{className:`bi ${H.status==="done"?"bi-check-circle-fill":"bi-hourglass-split"}`}),H.status==="done"?"Done":"In Progress"]})]}),_.jsxs("div",{className:c[H._id]?"d-flex flex-column bg-secondary-subtle p-3 w-100":"d-none bg-secondary-subtle ",children:[_.jsx("div",{className:"d-flex flex-column w-100 ",children:H.items.map((V,z)=>_.jsxs("div",{className:"border-bottom border-dark w-100",children:[_.jsxs("div",{className:"d-flex flex-row bg-warning-subtle p-3",children:[_.jsx("div",{className:"fw-bold fs-4",children:"Tipo:"}),_.jsx("div",{className:"fs-4 ms-3",children:_.jsxs("span",{className:"badge bg-dark fs-5 p-2 rounded-pill",children:[V.type==="rolls"&&"Rollitos",V.type==="banana"&&"Banana Split",V.type==="shakes"&&"Batidas",V.type==="puppy"&&"Puppy Rolls",V.type==="drinks"&&"Bebidas"]})})]}),V.type!=="drinks"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"d-flex flex-column bg-success-subtle p-3",children:[_.jsx("div",{className:"fw-bold fs-4",children:"Ingredientes:"}),_.jsx("ul",{className:"d-flex flex-column",children:V.ings.map((W,te)=>_.jsx("li",{className:"fs-4",children:_.jsx("span",{className:"badge bg-success fs-5 p-2 rounded-pill",children:W})},te))})]}),_.jsxs("div",{className:"d-flex flex-column bg-primary-subtle p-3",children:[_.jsx("div",{className:"fw-bold fs-4",children:"Toppings por helado:"}),_.jsx("ul",{className:"d-flex flex-column",children:Object.entries(V.tops||{}).map(([W,te])=>_.jsxs("li",{className:"fs-4 mb-2",children:[_.jsxs("strong",{children:["Helado #",parseInt(W)+1,":"]}),te.length>0?_.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:te.map((fe,F)=>_.jsx("span",{className:"badge bg-primary fs-5 p-2 rounded-pill",children:fe},F))}):_.jsx("span",{className:"text-muted ms-2",children:"Ninguno"})]},W))})]})]}),_.jsxs("div",{className:"d-flex flex-column bg-danger-subtle p-3",children:[_.jsx("div",{className:"fw-bold fs-4",children:"Cantidad:"}),_.jsx("div",{className:"fs-4",children:_.jsx("span",{className:"badge bg-danger fs-5 p-2 rounded-pill",children:V.qty})})]}),_.jsxs("div",{className:"d-flex flex-column pb-2 bg-light-subtle p-3",children:[_.jsx("div",{className:"fw-bold fs-4",children:"Comentarios:"}),_.jsx("div",{className:"fs-4",children:V.comments||_.jsx("span",{className:"text-muted",children:"Ninguno"})})]})]},z))}),_.jsxs("div",{className:"d-flex flex-column",children:[_.jsxs("div",{className:"fw-bold d-flex flex-row w-100",children:[_.jsx("div",{className:"fs-4",children:"Método de Pago:"}),_.jsx("div",{className:"fw-normal d-flex justify-content-center align-items-center fs-4",children:H.payment_method})]}),_.jsxs("div",{className:"fw-bold d-flex flex-row w-100",children:[_.jsx("div",{className:"fs-4",children:"Total:"}),_.jsx("div",{className:"fw-normal d-flex justify-content-center align-items-cente fs-4",children:_.jsx(Wf,{value:H.total})})]}),_.jsx("div",{className:d[H._id]?"d-flex justify-content-center align-items-center h-100":"d-none",children:_.jsx("div",{className:"",children:_.jsx("button",{className:"btn btn-primary",onClick:()=>handleUpdate(H._id,H.name,H.items,H.payment_method),children:"Save"})})})]})]})]}))}):_.jsx("p",{children:"No hay órdenes"})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function H0(n){return n+.5|0}const yd=(n,e,t)=>Math.max(Math.min(n,t),e);function im(n){return yd(H0(n*2.55),0,255)}function Pd(n){return yd(H0(n*255),0,255)}function Qc(n){return yd(H0(n/2.55)/100,0,1)}function AC(n){return yd(H0(n*100),0,100)}const ko={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},r_=[..."0123456789ABCDEF"],sV=n=>r_[n&15],aV=n=>r_[(n&240)>>4]+r_[n&15],tv=n=>(n&240)>>4===(n&15),oV=n=>tv(n.r)&&tv(n.g)&&tv(n.b)&&tv(n.a);function lV(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&ko[n[1]]*17,g:255&ko[n[2]]*17,b:255&ko[n[3]]*17,a:e===5?ko[n[4]]*17:255}:(e===7||e===9)&&(t={r:ko[n[1]]<<4|ko[n[2]],g:ko[n[3]]<<4|ko[n[4]],b:ko[n[5]]<<4|ko[n[6]],a:e===9?ko[n[7]]<<4|ko[n[8]]:255})),t}const cV=(n,e)=>n<255?e(n):"";function uV(n){var e=oV(n)?sV:aV;return n?"#"+e(n.r)+e(n.g)+e(n.b)+cV(n.a,e):void 0}const dV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function k3(n,e,t){const i=e*Math.min(t,1-t),r=(s,a=(s+n/30)%12)=>t-i*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function fV(n,e,t){const i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function hV(n,e,t){const i=k3(n,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function pV(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function cE(n){const t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),a=Math.min(t,i,r),o=(s+a)/2;let l,c,u;return s!==a&&(u=s-a,c=o>.5?u/(2-s-a):u/(s+a),l=pV(t,i,r,u,s),l=l*60+.5),[l|0,c||0,o]}function uE(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Pd)}function dE(n,e,t){return uE(k3,n,e,t)}function gV(n,e,t){return uE(hV,n,e,t)}function mV(n,e,t){return uE(fV,n,e,t)}function R3(n){return(n%360+360)%360}function yV(n){const e=dV.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?im(+e[5]):Pd(+e[5]));const r=R3(+e[2]),s=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?i=gV(r,s,a):e[1]==="hsv"?i=mV(r,s,a):i=dE(r,s,a),{r:i[0],g:i[1],b:i[2],a:t}}function vV(n,e){var t=cE(n);t[0]=R3(t[0]+e),t=dE(t),n.r=t[0],n.g=t[1],n.b=t[2]}function xV(n){if(!n)return;const e=cE(n),t=e[0],i=AC(e[1]),r=AC(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${Qc(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}const LC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},CC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function bV(){const n={},e=Object.keys(CC),t=Object.keys(LC);let i,r,s,a,o;for(i=0;i<e.length;i++){for(a=o=e[i],r=0;r<t.length;r++)s=t[r],o=o.replace(s,LC[s]);s=parseInt(CC[a],16),n[o]=[s>>16&255,s>>8&255,s&255]}return n}let nv;function SV(n){nv||(nv=bV(),nv.transparent=[0,0,0,0]);const e=nv[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const wV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function _V(n){const e=wV.exec(n);let t=255,i,r,s;if(e){if(e[7]!==i){const a=+e[7];t=e[8]?im(a):yd(a*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?im(i):yd(i,0,255)),r=255&(e[4]?im(r):yd(r,0,255)),s=255&(e[6]?im(s):yd(s,0,255)),{r:i,g:r,b:s,a:t}}}function EV(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Qc(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Y2=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Zh=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function TV(n,e,t){const i=Zh(Qc(n.r)),r=Zh(Qc(n.g)),s=Zh(Qc(n.b));return{r:Pd(Y2(i+t*(Zh(Qc(e.r))-i))),g:Pd(Y2(r+t*(Zh(Qc(e.g))-r))),b:Pd(Y2(s+t*(Zh(Qc(e.b))-s))),a:n.a+t*(e.a-n.a)}}function iv(n,e,t){if(n){let i=cE(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=dE(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function P3(n,e){return n&&Object.assign(e||{},n)}function IC(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Pd(n[3]))):(e=P3(n,{r:0,g:0,b:0,a:1}),e.a=Pd(e.a)),e}function AV(n){return n.charAt(0)==="r"?_V(n):yV(n)}class r0{constructor(e){if(e instanceof r0)return e;const t=typeof e;let i;t==="object"?i=IC(e):t==="string"&&(i=lV(e)||SV(e)||AV(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=P3(this._rgb);return e&&(e.a=Qc(e.a)),e}set rgb(e){this._rgb=IC(e)}rgbString(){return this._valid?EV(this._rgb):void 0}hexString(){return this._valid?uV(this._rgb):void 0}hslString(){return this._valid?xV(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,r=e.rgb;let s;const a=t===s?.5:t,o=2*a-1,l=i.a-r.a,c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=a*i.a+(1-a)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=TV(this._rgb,e._rgb,t)),this}clone(){return new r0(this.rgb)}alpha(e){return this._rgb.a=Pd(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=H0(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return iv(this._rgb,2,e),this}darken(e){return iv(this._rgb,2,-e),this}saturate(e){return iv(this._rgb,1,e),this}desaturate(e){return iv(this._rgb,1,-e),this}rotate(e){return vV(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Bc(){}const LV=(()=>{let n=0;return()=>n++})();function Dn(n){return n==null}function rr(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function jn(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ir(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function no(n,e){return Ir(n)?n:e}function xn(n,e){return typeof n>"u"?e:n}const CV=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,N3=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Fi(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function vi(n,e,t,i){let r,s,a;if(rr(n))for(s=n.length,r=0;r<s;r++)e.call(t,n[r],r);else if(jn(n))for(a=Object.keys(n),s=a.length,r=0;r<s;r++)e.call(t,n[a[r]],a[r])}function Y1(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function q1(n){if(rr(n))return n.map(q1);if(jn(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let r=0;for(;r<i;++r)e[t[r]]=q1(n[t[r]]);return e}return n}function D3(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function IV(n,e,t,i){if(!D3(n))return;const r=e[n],s=t[n];jn(r)&&jn(s)?s0(r,s,i):e[n]=q1(s)}function s0(n,e,t){const i=rr(e)?e:[e],r=i.length;if(!jn(n))return n;t=t||{};const s=t.merger||IV;let a;for(let o=0;o<r;++o){if(a=i[o],!jn(a))continue;const l=Object.keys(a);for(let c=0,u=l.length;c<u;++c)s(l[c],n,a,t)}return n}function bm(n,e){return s0(n,e,{merger:kV})}function kV(n,e,t){if(!D3(n))return;const i=e[n],r=t[n];jn(i)&&jn(r)?bm(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=q1(r))}const kC={"":n=>n,x:n=>n.x,y:n=>n.y};function RV(n){const e=n.split("."),t=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function PV(n){const e=RV(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Fd(n,e){return(kC[e]||(kC[e]=PV(e)))(n)}function fE(n){return n.charAt(0).toUpperCase()+n.slice(1)}const a0=n=>typeof n<"u",jd=n=>typeof n=="function",RC=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function NV(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Vi=Math.PI,Gi=2*Vi,DV=Gi+Vi,K1=Number.POSITIVE_INFINITY,OV=Vi/180,Hr=Vi/2,wf=Vi/4,PC=Vi*2/3,vd=Math.log10,uc=Math.sign;function Sm(n,e,t){return Math.abs(n-e)<t}function NC(n){const e=Math.round(n);n=Sm(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(vd(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function MV(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function FV(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Kp(n){return!FV(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function jV(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function O3(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ml(n){return n*(Vi/180)}function hE(n){return n*(180/Vi)}function DC(n){if(!Ir(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function M3(n,e){const t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i);let s=Math.atan2(i,t);return s<-.5*Vi&&(s+=Gi),{angle:s,distance:r}}function s_(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function BV(n,e){return(n-e+DV)%Gi-Vi}function ro(n){return(n%Gi+Gi)%Gi}function o0(n,e,t,i){const r=ro(n),s=ro(e),a=ro(t),o=ro(s-r),l=ro(a-r),c=ro(r-s),u=ro(r-a);return r===s||r===a||i&&s===a||o>l&&c<u}function xs(n,e,t){return Math.max(e,Math.min(t,n))}function UV(n){return xs(n,-32768,32767)}function tu(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function pE(n,e,t){t=t||(a=>n[a]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}const nu=(n,e,t,i)=>pE(n,t,i?r=>{const s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),$V=(n,e,t)=>pE(n,t,i=>n[i][e]>=t);function HV(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}const F3=["push","pop","shift","splice","unshift"];function WV(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),F3.forEach(t=>{const i="_onData"+fE(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const a=r.apply(this,s);return n._chartjs.listeners.forEach(o=>{typeof o[i]=="function"&&o[i](...s)}),a}})})}function OC(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(F3.forEach(s=>{delete n[s]}),delete n._chartjs)}function j3(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const B3=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function U3(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,B3.call(window,()=>{i=!1,n.apply(e,t)}))}}function zV(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const gE=n=>n==="start"?"left":n==="end"?"right":"center",Ks=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,GV=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function $3(n,e,t){const i=e.length;let r=0,s=i;if(n._sorted){const{iScale:a,vScale:o,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:p,maxDefined:m}=a.getUserBounds();if(p){if(r=Math.min(nu(l,u,d).lo,t?i:nu(e,u,a.getPixelForValue(d)).lo),c){const v=l.slice(0,r+1).reverse().findIndex(b=>!Dn(b[o.axis]));r-=Math.max(0,v)}r=xs(r,0,i-1)}if(m){let v=Math.max(nu(l,a.axis,h,!0).hi+1,t?0:nu(e,u,a.getPixelForValue(h),!0).hi+1);if(c){const b=l.slice(v-1).findIndex(x=>!Dn(x[o.axis]));v+=Math.max(0,b)}s=xs(v,r,i)-r}else s=i-r}return{start:r,count:s}}function H3(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}const rv=n=>n===0||n===1,MC=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Gi/t)),FC=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Gi/t)+1,wm={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Hr)+1,easeOutSine:n=>Math.sin(n*Hr),easeInOutSine:n=>-.5*(Math.cos(Vi*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>rv(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>rv(n)?n:MC(n,.075,.3),easeOutElastic:n=>rv(n)?n:FC(n,.075,.3),easeInOutElastic(n){return rv(n)?n:n<.5?.5*MC(n*2,.1125,.45):.5+.5*FC(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-wm.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?wm.easeInBounce(n*2)*.5:wm.easeOutBounce(n*2-1)*.5+.5};function mE(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function jC(n){return mE(n)?n:new r0(n)}function q2(n){return mE(n)?n:new r0(n).saturate(.5).darken(.1).hexString()}const VV=["x","y","borderWidth","radius","tension"],YV=["color","borderColor","backgroundColor"];function qV(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:YV},numbers:{type:"number",properties:VV}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function KV(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const BC=new Map;function XV(n,e){e=e||{};const t=n+JSON.stringify(e);let i=BC.get(t);return i||(i=new Intl.NumberFormat(n,e),BC.set(t,i)),i}function W0(n,e,t){return XV(e,t).format(n)}const W3={values(n){return rr(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let r,s=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=QV(n,t)}const a=vd(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),W0(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(vd(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?W3.numeric.call(this,n,e,t):""}};function QV(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Qx={formatters:W3};function JV(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const fh=Object.create(null),a_=Object.create(null);function _m(n,e){if(!e)return n;const t=e.split(".");for(let i=0,r=t.length;i<r;++i){const s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function K2(n,e,t){return typeof e=="string"?s0(_m(n,e),t):s0(_m(n,""),e)}class ZV{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>q2(r.backgroundColor),this.hoverBorderColor=(i,r)=>q2(r.borderColor),this.hoverColor=(i,r)=>q2(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return K2(this,e,t)}get(e){return _m(this,e)}describe(e,t){return K2(a_,e,t)}override(e,t){return K2(fh,e,t)}route(e,t,i,r){const s=_m(this,e),a=_m(this,i),o="_"+t;Object.defineProperties(s,{[o]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[o],c=a[r];return jn(l)?Object.assign({},c,l):xn(l,c)},set(l){this[o]=l}}})}apply(e){e.forEach(t=>t(this))}}var sr=new ZV({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qV,KV,JV]);function eY(n){return!n||Dn(n.size)||Dn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function X1(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function tY(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let a=0;const o=t.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=t[l],d!=null&&!rr(d))a=X1(n,r,s,a,d);else if(rr(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!rr(h)&&(a=X1(n,r,s,a,h));n.restore();const p=s.length/2;if(p>t.length){for(l=0;l<p;l++)delete r[s[l]];s.splice(0,p)}return a}function _f(n,e,t){const i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function UC(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function o_(n,e,t,i){z3(n,e,t,i,null)}function z3(n,e,t,i,r){let s,a,o,l,c,u,d,h;const p=e.pointStyle,m=e.rotation,v=e.radius;let b=(m||0)*OV;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(b),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(v)||v<=0)){switch(n.beginPath(),p){default:r?n.ellipse(t,i,r/2,v,0,0,Gi):n.arc(t,i,v,0,Gi),n.closePath();break;case"triangle":u=r?r/2:v,n.moveTo(t+Math.sin(b)*u,i-Math.cos(b)*v),b+=PC,n.lineTo(t+Math.sin(b)*u,i-Math.cos(b)*v),b+=PC,n.lineTo(t+Math.sin(b)*u,i-Math.cos(b)*v),n.closePath();break;case"rectRounded":c=v*.516,l=v-c,a=Math.cos(b+wf)*l,d=Math.cos(b+wf)*(r?r/2-c:l),o=Math.sin(b+wf)*l,h=Math.sin(b+wf)*(r?r/2-c:l),n.arc(t-d,i-o,c,b-Vi,b-Hr),n.arc(t+h,i-a,c,b-Hr,b),n.arc(t+d,i+o,c,b,b+Hr),n.arc(t-h,i+a,c,b+Hr,b+Vi),n.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*v,u=r?r/2:l,n.rect(t-u,i-l,2*u,2*l);break}b+=wf;case"rectRot":d=Math.cos(b)*(r?r/2:v),a=Math.cos(b)*v,o=Math.sin(b)*v,h=Math.sin(b)*(r?r/2:v),n.moveTo(t-d,i-o),n.lineTo(t+h,i-a),n.lineTo(t+d,i+o),n.lineTo(t-h,i+a),n.closePath();break;case"crossRot":b+=wf;case"cross":d=Math.cos(b)*(r?r/2:v),a=Math.cos(b)*v,o=Math.sin(b)*v,h=Math.sin(b)*(r?r/2:v),n.moveTo(t-d,i-o),n.lineTo(t+d,i+o),n.moveTo(t+h,i-a),n.lineTo(t-h,i+a);break;case"star":d=Math.cos(b)*(r?r/2:v),a=Math.cos(b)*v,o=Math.sin(b)*v,h=Math.sin(b)*(r?r/2:v),n.moveTo(t-d,i-o),n.lineTo(t+d,i+o),n.moveTo(t+h,i-a),n.lineTo(t-h,i+a),b+=wf,d=Math.cos(b)*(r?r/2:v),a=Math.cos(b)*v,o=Math.sin(b)*v,h=Math.sin(b)*(r?r/2:v),n.moveTo(t-d,i-o),n.lineTo(t+d,i+o),n.moveTo(t+h,i-a),n.lineTo(t-h,i+a);break;case"line":a=r?r/2:Math.cos(b)*v,o=Math.sin(b)*v,n.moveTo(t-a,i-o),n.lineTo(t+a,i+o);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(b)*(r?r/2:v),i+Math.sin(b)*v);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function iu(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Jx(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Zx(n){n.restore()}function nY(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function iY(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function rY(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Dn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function sY(n,e,t,i,r){if(r.strikethrough||r.underline){const s=n.measureText(i),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(a,u),n.lineTo(o,u),n.stroke()}}function aY(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function hh(n,e,t,i,r,s={}){const a=rr(e)?e:[e],o=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(n.save(),n.font=r.string,rY(n,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&aY(n,s.backdrop),o&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Dn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,i,s.maxWidth)),n.fillText(c,t,i,s.maxWidth),sY(n,t,i,c,s),i+=Number(r.lineHeight);n.restore()}function l0(n,e){const{x:t,y:i,w:r,h:s,radius:a}=e;n.arc(t+a.topLeft,i+a.topLeft,a.topLeft,1.5*Vi,Vi,!0),n.lineTo(t,i+s-a.bottomLeft),n.arc(t+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,Vi,Hr,!0),n.lineTo(t+r-a.bottomRight,i+s),n.arc(t+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,Hr,0,!0),n.lineTo(t+r,i+a.topRight),n.arc(t+r-a.topRight,i+a.topRight,a.topRight,0,-Hr,!0),n.lineTo(t+a.topLeft,i)}const oY=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,lY=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function cY(n,e){const t=(""+n).match(oY);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const uY=n=>+n||0;function yE(n,e){const t={},i=jn(e),r=i?Object.keys(e):e,s=jn(n)?i?a=>xn(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of r)t[a]=uY(s(a));return t}function G3(n){return yE(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Jf(n){return yE(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ia(n){const e=G3(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function cs(n,e){n=n||{},e=e||sr.font;let t=xn(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=xn(n.style,e.style);i&&!(""+i).match(lY)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:xn(n.family,e.family),lineHeight:cY(xn(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:xn(n.weight,e.weight),string:""};return r.string=eY(r),r}function rm(n,e,t,i){let r,s,a;for(r=0,s=n.length;r<s;++r)if(a=n[r],a!==void 0&&a!==void 0)return a}function dY(n,e,t){const{min:i,max:r}=n,s=N3(e,(r-i)/2),a=(o,l)=>t&&o===0?0:o+l;return{min:a(i,-Math.abs(s)),max:a(r,s)}}function qd(n,e){return Object.assign(Object.create(n),e)}function vE(n,e=[""],t,i,r=()=>n[0]){const s=t||n;typeof i>"u"&&(i=K3("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:o=>vE([o,...n],e,s,i)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return Y3(o,l,()=>xY(l,e,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return HC(o).includes(l)},ownKeys(o){return HC(o)},set(o,l,c){const u=o._storage||(o._storage=r());return o[l]=u[l]=c,delete o._keys,!0}})}function Xp(n,e,t,i){const r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:V3(n,i),setContext:s=>Xp(n,s,t,i),override:s=>Xp(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,o){return Y3(s,a,()=>hY(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,o){return n[a]=o,delete s[a],!0}})}function V3(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:jd(t)?t:()=>t,isIndexable:jd(i)?i:()=>i}}const fY=(n,e)=>n?n+fE(e):e,xE=(n,e)=>jn(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Y3(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function hY(n,e,t){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=n;let o=i[e];return jd(o)&&a.isScriptable(e)&&(o=pY(e,o,n,t)),rr(o)&&o.length&&(o=gY(e,o,n,a.isIndexable)),xE(e,o)&&(o=Xp(o,r,s&&s[e],a)),o}function pY(n,e,t,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=t;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let l=e(s,a||i);return o.delete(n),xE(n,l)&&(l=bE(r._scopes,r,n,l)),l}function gY(n,e,t,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(jn(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=bE(c,r,n,u);e.push(Xp(d,s,a&&a[n],o))}}return e}function q3(n,e,t){return jd(n)?n(e,t):n}const mY=(n,e)=>n===!0?e:typeof n=="string"?Fd(e,n):void 0;function yY(n,e,t,i,r){for(const s of e){const a=mY(t,s);if(a){n.add(a);const o=q3(a._fallback,t,r);if(typeof o<"u"&&o!==t&&o!==i)return o}else if(a===!1&&typeof i<"u"&&t!==i)return null}return!1}function bE(n,e,t,i){const r=e._rootScopes,s=q3(e._fallback,t,i),a=[...n,...r],o=new Set;o.add(i);let l=$C(o,a,t,s||t,i);return l===null||typeof s<"u"&&s!==t&&(l=$C(o,a,s,l,i),l===null)?!1:vE(Array.from(o),[""],r,s,()=>vY(e,t,i))}function $C(n,e,t,i,r){for(;t;)t=yY(n,e,t,i,r);return t}function vY(n,e,t){const i=n._getTarget();e in i||(i[e]={});const r=i[e];return rr(r)&&jn(t)?t:r||{}}function xY(n,e,t,i){let r;for(const s of e)if(r=K3(fY(s,n),t),typeof r<"u")return xE(n,r)?bE(t,i,n,r):r}function K3(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function HC(n){let e=n._keys;return e||(e=n._keys=bY(n._scopes)),e}function bY(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function X3(n,e,t,i){const{iScale:r}=n,{key:s="r"}=this._parsing,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+t,u=e[c],a[o]={r:r.parse(Fd(u,s),c)};return a}const SY=Number.EPSILON||1e-14,Qp=(n,e)=>e<n.length&&!n[e].skip&&n[e],Q3=n=>n==="x"?"y":"x";function wY(n,e,t,i){const r=n.skip?e:n,s=e,a=t.skip?e:t,o=s_(s,r),l=s_(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:s.x-d*(a.x-r.x),y:s.y-d*(a.y-r.y)},next:{x:s.x+h*(a.x-r.x),y:s.y+h*(a.y-r.y)}}}function _Y(n,e,t){const i=n.length;let r,s,a,o,l,c=Qp(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Qp(n,u+1),!(!l||!c)){if(Sm(e[u],0,SY)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],o=Math.pow(r,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),t[u]=r*a*e[u],t[u+1]=s*a*e[u])}}function EY(n,e,t="x"){const i=Q3(t),r=n.length;let s,a,o,l=Qp(n,0);for(let c=0;c<r;++c){if(a=o,o=l,l=Qp(n,c+1),!o)continue;const u=o[t],d=o[i];a&&(s=(u-a[t])/3,o[`cp1${t}`]=u-s,o[`cp1${i}`]=d-s*e[c]),l&&(s=(l[t]-u)/3,o[`cp2${t}`]=u+s,o[`cp2${i}`]=d+s*e[c])}}function TY(n,e="x"){const t=Q3(e),i=n.length,r=Array(i).fill(0),s=Array(i);let a,o,l,c=Qp(n,0);for(a=0;a<i;++a)if(o=l,l=c,c=Qp(n,a+1),!!l){if(c){const u=c[e]-l[e];r[a]=u!==0?(c[t]-l[t])/u:0}s[a]=o?c?uc(r[a-1])!==uc(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}_Y(n,r,s),EY(n,s,e)}function sv(n,e,t){return Math.max(Math.min(n,t),e)}function AY(n,e){let t,i,r,s,a,o=iu(n[0],e);for(t=0,i=n.length;t<i;++t)a=s,s=o,o=t<i-1&&iu(n[t+1],e),s&&(r=n[t],a&&(r.cp1x=sv(r.cp1x,e.left,e.right),r.cp1y=sv(r.cp1y,e.top,e.bottom)),o&&(r.cp2x=sv(r.cp2x,e.left,e.right),r.cp2y=sv(r.cp2y,e.top,e.bottom)))}function LY(n,e,t,i,r){let s,a,o,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")TY(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)o=n[s],l=wY(c,o,n[Math.min(s+1,a-(i?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,c=o}e.capBezierPoints&&AY(n,t)}function SE(){return typeof window<"u"&&typeof document<"u"}function wE(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Q1(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const eb=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function CY(n,e){return eb(n).getPropertyValue(e)}const IY=["top","right","bottom","left"];function Zf(n,e,t){const i={};t=t?"-"+t:"";for(let r=0;r<4;r++){const s=IY[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const kY=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function RY(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i;let a=!1,o,l;if(kY(r,s,n.target))o=r,l=s;else{const c=e.getBoundingClientRect();o=i.clientX-c.left,l=i.clientY-c.top,a=!0}return{x:o,y:l,box:a}}function Nf(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,r=eb(t),s=r.boxSizing==="border-box",a=Zf(r,"padding"),o=Zf(r,"border","width"),{x:l,y:c,box:u}=RY(n,t),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:p,height:m}=e;return s&&(p-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-d)/p*t.width/i),y:Math.round((c-h)/m*t.height/i)}}function PY(n,e,t){let i,r;if(e===void 0||t===void 0){const s=n&&wE(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const a=s.getBoundingClientRect(),o=eb(s),l=Zf(o,"border","width"),c=Zf(o,"padding");e=a.width-c.width-l.width,t=a.height-c.height-l.height,i=Q1(o.maxWidth,s,"clientWidth"),r=Q1(o.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||K1,maxHeight:r||K1}}const av=n=>Math.round(n*10)/10;function NY(n,e,t,i){const r=eb(n),s=Zf(r,"margin"),a=Q1(r.maxWidth,n,"clientWidth")||K1,o=Q1(r.maxHeight,n,"clientHeight")||K1,l=PY(n,e,t);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const h=Zf(r,"border","width"),p=Zf(r,"padding");c-=p.width+h.width,u-=p.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=av(Math.min(c,a,l.maxWidth)),u=av(Math.min(u,o,l.maxHeight)),c&&!u&&(u=av(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=av(Math.floor(u*i))),{width:c,height:u}}function WC(n,e,t){const i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||a.height!==r||a.width!==s?(n.currentDevicePixelRatio=i,a.height=r,a.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const DY=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};SE()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function zC(n,e){const t=CY(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Df(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function OY(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function MY(n,e,t,i){const r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},a=Df(n,r,t),o=Df(r,s,t),l=Df(s,e,t),c=Df(a,o,t),u=Df(o,l,t);return Df(c,u,t)}const FY=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},jY=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Np(n,e,t){return n?FY(e,t):jY()}function J3(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function Z3(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function eO(n){return n==="angle"?{between:o0,compare:BV,normalize:ro}:{between:tu,compare:(e,t)=>e-t,normalize:e=>e}}function GC({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function BY(n,e,t){const{property:i,start:r,end:s}=t,{between:a,normalize:o}=eO(i),l=e.length;let{start:c,end:u,loop:d}=n,h,p;if(d){for(c+=l,u+=l,h=0,p=l;h<p&&a(o(e[c%l][i]),r,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function tO(n,e,t){if(!t)return[n];const{property:i,start:r,end:s}=t,a=e.length,{compare:o,between:l,normalize:c}=eO(i),{start:u,end:d,loop:h,style:p}=BY(n,e,t),m=[];let v=!1,b=null,x,w,S;const A=()=>l(r,S,x)&&o(r,S)!==0,C=()=>o(s,x)===0||l(s,S,x),N=()=>v||A(),k=()=>!v||C();for(let R=u,U=u;R<=d;++R)w=e[R%a],!w.skip&&(x=c(w[i]),x!==S&&(v=l(x,r,s),b===null&&N()&&(b=o(x,r)===0?R:U),b!==null&&k()&&(m.push(GC({start:b,end:R,loop:h,count:a,style:p})),b=null),U=R,S=x));return b!==null&&m.push(GC({start:b,end:d,loop:h,count:a,style:p})),m}function nO(n,e){const t=[],i=n.segments;for(let r=0;r<i.length;r++){const s=tO(i[r],n.points,e);s.length&&t.push(...s)}return t}function UY(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function $Y(n,e,t,i){const r=n.length,s=[];let a=e,o=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%r];c.skip||c.stop?o.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=a=c.stop?l:null):(a=l,o.skip&&(e=l)),o=c}return a!==null&&s.push({start:e%r,end:a%r,loop:i}),s}function HY(n,e){const t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];const s=!!n._loop,{start:a,end:o}=UY(t,r,s,i);if(i===!0)return VC(n,[{start:a,end:o,loop:s}],t,e);const l=o<a?o+r:o,c=!!n._fullLoop&&a===0&&o===r-1;return VC(n,$Y(t,a,l,c),t,e)}function VC(n,e,t,i){return!i||!i.setContext||!t?e:WY(n,e,t,i)}function WY(n,e,t,i){const r=n._chart.getContext(),s=YC(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,l=t.length,c=[];let u=s,d=e[0].start,h=d;function p(m,v,b,x){const w=o?-1:1;if(m!==v){for(m+=l;t[m%l].skip;)m-=w;for(;t[v%l].skip;)v+=w;m%l!==v%l&&(c.push({start:m%l,end:v%l,loop:b,style:x}),u=x,d=v%l)}}for(const m of e){d=o?d:m.start;let v=t[d%l],b;for(h=d+1;h<=m.end;h++){const x=t[h%l];b=YC(i.setContext(qd(r,{type:"segment",p0:v,p1:x,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),zY(b,u)&&p(d,h-1,m.loop,u),v=x,u=b}d<h-1&&p(d,h-1,m.loop,u)}return c}function YC(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function zY(n,e){if(!e)return!1;const t=[],i=function(r,s){return mE(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function ov(n,e,t){return n.options.clip?n[t]:e[t]}function GY(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:ov(t,e,"left"),right:ov(t,e,"right"),top:ov(i,e,"top"),bottom:ov(i,e,"bottom")}:e}function iO(n,e){const t=e._clip;if(t.disabled)return!1;const i=GY(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class VY{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){const s=t.listeners[r],a=t.duration;s.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(i-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=B3.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var zc=new VY;const qC="transparent",YY={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=jC(n||qC),r=i.valid&&jC(e||qC);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class qY{constructor(e,t,i,r){const s=t[i];r=rm([e.to,r,s,e.from]);const a=rm([e.from,s,r]);this._active=!0,this._fn=e.fn||YY[e.type||typeof a],this._easing=wm[e.easing]||wm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,a=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=rm([e.to,t,r,e.from]),this._from=rm([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,r=this._prop,s=this._from,a=this._loop,o=this._to;let l;if(this._active=s!==o&&(a||t<i),!this._active){this._target[r]=o,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/i%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}}class rO{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!jn(e))return;const t=Object.keys(sr.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!jn(s))return;const a={};for(const o of t)a[o]=s[o];(rr(s.properties)&&s.properties||[r]).forEach(o=>{(o===r||!i.has(o))&&i.set(o,a)})})}_animateOptions(e,t){const i=t.options,r=XY(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&KY(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,t));continue}const u=t[c];let d=s[c];const h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,o);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new qY(h,e,c,u),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return zc.add(this._chart,i),!0}}function KY(n,e){const t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function XY(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function KC(n,e){const t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function QY(n,e,t){if(t===!1)return!1;const i=KC(n,t),r=KC(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function JY(n){let e,t,i,r;return jn(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function sO(n,e){const t=[],i=n._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function XC(n,e,t,i={}){const r=n.keys,s=i.mode==="single";let a,o,l,c;if(e===null)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===t){if(u=!0,i.all)continue;break}c=n.values[l],Ir(c)&&(s||e===0||uc(e)===uc(c))&&(e+=c)}return!u&&!i.all?0:e}function ZY(n,e){const{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[s]:n[u]};return o}function X2(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function eq(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function tq(n){const{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function nq(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function QC(n,e,t,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function JC(n,e){const{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,u=eq(s,a,i),d=e.length;let h;for(let p=0;p<d;++p){const m=e[p],{[l]:v,[c]:b}=m,x=m._stacks||(m._stacks={});h=x[c]=nq(r,u,v),h[o]=b,h._top=QC(h,a,!0,i.type),h._bottom=QC(h,a,!1,i.type);const w=h._visualValues||(h._visualValues={});w[o]=b}}function Q2(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function iq(n,e){return qd(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function rq(n,e,t){return qd(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function $g(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}const J2=n=>n==="reset"||n==="none",ZC=(n,e)=>e?n:Object.assign({},n),sq=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:sO(t,!0),values:null};class bl{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=X2(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&$g(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),r=(d,h,p,m)=>d==="x"?h:d==="r"?m:p,s=t.xAxisID=xn(i.xAxisID,Q2(e,"x")),a=t.yAxisID=xn(i.yAxisID,Q2(e,"y")),o=t.rAxisID=xn(i.rAxisID,Q2(e,"r")),l=t.indexAxis,c=t.iAxisID=r(l,s,a,o),u=t.vAxisID=r(l,a,s,o);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&OC(this._data,this),e._stacked&&$g(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(jn(t)){const r=this._cachedMeta;this._data=ZY(t,r)}else if(i!==t){if(i){OC(i,this);const r=this._cachedMeta;$g(r),r._parsed=[]}t&&Object.isExtensible(t)&&WV(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=t._stacked;t._stacked=X2(t.vScale,t),t.stack!==i.stack&&(r=!0,$g(t),t.stack=i.stack),this._resyncElements(e),(r||s!==t._stacked)&&(JC(this,t._parsed),t._stacked=X2(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:a}=i,o=s.axis;let l=e===0&&t===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,h;if(this._parsing===!1)i._parsed=r,i._sorted=!0,h=r;else{rr(r[e])?h=this.parseArrayData(i,r,e,t):jn(r[e])?h=this.parseObjectData(i,r,e,t):h=this.parsePrimitiveData(i,r,e,t);const p=()=>d[o]===null||c&&d[o]<c[o];for(u=0;u<t;++u)i._parsed[u+e]=d=h[u],l&&(p()&&(l=!1),c=d);i._sorted=l}a&&JC(this,h)}parsePrimitiveData(e,t,i,r){const{iScale:s,vScale:a}=e,o=s.axis,l=a.axis,c=s.getLabels(),u=s===a,d=new Array(r);let h,p,m;for(h=0,p=r;h<p;++h)m=h+i,d[h]={[o]:u||s.parse(c[m],m),[l]:a.parse(t[m],m)};return d}parseArrayData(e,t,i,r){const{xScale:s,yScale:a}=e,o=new Array(r);let l,c,u,d;for(l=0,c=r;l<c;++l)u=l+i,d=t[u],o[l]={x:s.parse(d[0],u),y:a.parse(d[1],u)};return o}parseObjectData(e,t,i,r){const{xScale:s,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,d,h,p;for(u=0,d=r;u<d;++u)h=u+i,p=t[h],c[u]={x:s.parse(Fd(p,o),h),y:a.parse(Fd(p,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const r=this.chart,s=this._cachedMeta,a=t[e.axis],o={keys:sO(r,!0),values:t._stacks[e.axis]._visualValues};return XC(o,a,s.index,{mode:i})}updateRangeFromParsed(e,t,i,r){const s=i[t.axis];let a=s===null?NaN:s;const o=r&&i._stacks[t.axis];r&&o&&(r.values=o,a=XC(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,a=r.length,o=this._getOtherScale(e),l=sq(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=tq(o);let h,p;function m(){p=r[h];const v=p[o.axis];return!Ir(p[e.axis])||u>v||d<v}for(h=0;h<a&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),s));++h);if(s){for(h=a-1;h>=0;--h)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let r,s,a;for(r=0,s=t.length;r<s;++r)a=t[r][e.axis],Ir(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,r=t.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=JY(xn(this.options.clip,QY(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,r=i.data||[],s=t.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||r.length-o,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,o,l),u=o;u<o+l;++u){const d=r[u];d.hidden||(d.active&&c?a.push(d):d.draw(e,s))}for(u=0;u<a.length;++u)a[u].draw(e,s)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];s=a.$context||(a.$context=rq(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=iq(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const r=t==="active",s=this._cachedDataOpts,a=e+"-"+t,o=s[a],l=this.enableOptionSharing&&a0(i);if(o)return ZC(o,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),p=Object.keys(sr.elements[e]),m=()=>this.getContext(i,r,t),v=c.resolveNamedOptions(h,p,m,d);return v.$shared&&(v.$shared=l,s[a]=Object.freeze(ZC(v,l))),v}_resolveAnimations(e,t,i){const r=this.chart,s=this._cachedDataOpts,a=`animation-${t}`,o=s[a];if(o)return o;let l;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,t),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,i,t))}const c=new rO(r,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||J2(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),r=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(t,s)||s!==r;return this.updateSharedOptions(s,t,i),{sharedOptions:s,includeOptions:a}}updateElement(e,t,i,r){J2(r)?Object.assign(e,i):this._resolveAnimations(t,r).update(e,i)}updateSharedOptions(e,t,i){e&&!J2(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,r){e.active=r;const s=this.getStyle(t,r);this._resolveAnimations(t,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[o,l,c]of this._syncList)this[o](l,c);this._syncList=[];const r=i.length,s=t.length,a=Math.min(s,r);a&&this.parse(0,a),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,t,i=!0){const r=this._cachedMeta,s=r.data,a=e+t;let o;const l=c=>{for(c.length+=t,o=c.length-1;o>=a;o--)c[o]=c[o-t]};for(l(s),o=e;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,t),i&&this.updateElements(s,e,t,"reset")}updateElements(e,t,i,r){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,t);i._stacked&&$g(i,r)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,r]=e;this[t](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}pt(bl,"defaults",{}),pt(bl,"datasetElementType",null),pt(bl,"dataElementType",null);function aq(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=j3(i.sort((r,s)=>r-s))}return n._cache.$bar}function oq(n){const e=n.iScale,t=aq(e,n.type);let i=e._length,r,s,a,o;const l=()=>{a===32767||a===-32768||(a0(o)&&(i=Math.min(i,Math.abs(a-o)||i)),o=a)};for(r=0,s=t.length;r<s;++r)a=e.getPixelForValue(t[r]),l();for(o=void 0,r=0,s=e.ticks.length;r<s;++r)a=e.getPixelForTick(r),l();return i}function lq(n,e,t,i){const r=t.barThickness;let s,a;return Dn(r)?(s=e.min*t.categoryPercentage,a=t.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:e.pixels[n]-s/2}}function cq(n,e,t,i){const r=e.pixels,s=r[n];let a=n>0?r[n-1]:null,o=n<r.length-1?r[n+1]:null;const l=t.categoryPercentage;a===null&&(a=s-(o===null?e.end-e.start:o-s)),o===null&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:t.barPercentage,start:c}}function uq(n,e,t,i){const r=t.parse(n[0],i),s=t.parse(n[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}function aO(n,e,t,i){return rr(n)?uq(n,e,t,i):e[t.axis]=t.parse(n,i),e}function eI(n,e,t,i){const r=n.iScale,s=n.vScale,a=r.getLabels(),o=r===s,l=[];let c,u,d,h;for(c=t,u=t+i;c<u;++c)h=e[c],d={},d[r.axis]=o||r.parse(a[c],c),l.push(aO(h,d,s,c));return l}function Z2(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function dq(n,e,t){return n!==0?uc(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function fq(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function hq(n,e,t,i){let r=e.borderSkipped;const s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:c,bottom:u}=fq(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=c:(t._bottom||0)===i?r=u:(s[tI(u,a,o,l)]=!0,r=c)),s[tI(r,a,o,l)]=!0,n.borderSkipped=s}function tI(n,e,t,i){return i?(n=pq(n,e,t),n=nI(n,t,e)):n=nI(n,e,t),n}function pq(n,e,t){return n===e?t:n===t?e:n}function nI(n,e,t){return n==="start"?e:n==="end"?t:n}function gq(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class Em extends bl{parsePrimitiveData(e,t,i,r){return eI(e,t,i,r)}parseArrayData(e,t,i,r){return eI(e,t,i,r)}parseObjectData(e,t,i,r){const{iScale:s,vScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?o:l,u=a.axis==="x"?o:l,d=[];let h,p,m,v;for(h=i,p=i+r;h<p;++h)v=t[h],m={},m[s.axis]=s.parse(Fd(v,c),h),d.push(aO(Fd(v,u),m,a,h));return d}updateRangeFromParsed(e,t,i,r){super.updateRangeFromParsed(e,t,i,r);const s=i._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:r}=t,s=this.getParsed(e),a=s._custom,o=Z2(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,r){const s=r==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),c=o.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(t,r);for(let p=t;p<t+i;p++){const m=this.getParsed(p),v=s||Dn(m[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),b=this._calculateBarIndexPixels(p,u),x=(m._stacks||{})[o.axis],w={horizontal:c,base:v.base,enableBorderRadius:!x||Z2(m._custom)||a===x._top||a===x._bottom,x:c?v.head:b.center,y:c?b.center:v.head,height:c?b.size:Math.abs(v.size),width:c?Math.abs(v.size):b.size};h&&(w.options=d||this.resolveDataElementOptions(p,e[p].active?"active":r));const S=w.options||e[p].options;hq(w,S,x,a),gq(w,S,u.ratio),this.updateElement(e[p],p,w,r)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(t),l=o&&o[i.axis],c=u=>{const d=u._parsed.find(p=>p[i.axis]===l),h=d&&d[u.vScale.axis];if(Dn(h)||isNaN(h))return!0};for(const u of r)if(!(t!==void 0&&c(u))&&((s===!1||a.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const r=this._getStacks(e,i),s=t!==void 0?r.indexOf(t):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,r=[];let s,a;for(s=0,a=t.data.length;s<a;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const o=e.barThickness;return{min:o||oq(t),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:r},options:{base:s,minBarLength:a}}=this,o=s||0,l=this.getParsed(e),c=l._custom,u=Z2(c);let d=l[t.axis],h=0,p=i?this.applyStack(t,l,i):d,m,v;p!==d&&(h=p-d,p=d),u&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&uc(d)!==uc(c.barEnd)&&(h=0),h+=d);const b=!Dn(s)&&!u?s:h;let x=t.getPixelForValue(b);if(this.chart.getDataVisibility(e)?m=t.getPixelForValue(h+p):m=x,v=m-x,Math.abs(v)<a){v=dq(v,t,o)*a,d===o&&(x-=v/2);const w=t.getPixelForDecimal(0),S=t.getPixelForDecimal(1),A=Math.min(w,S),C=Math.max(w,S);x=Math.max(Math.min(x,C),A),m=x+v,i&&!u&&(l._stacks[t.axis]._visualValues[r]=t.getValueForPixel(m)-t.getValueForPixel(x))}if(x===t.getPixelForValue(o)){const w=uc(v)*t.getLineWidthForValue(o)/2;x+=w,v-=w}return{size:v,base:x,head:m,center:m+v/2}}_calculateBarIndexPixels(e,t){const i=t.scale,r=this.options,s=r.skipNull,a=xn(r.maxBarThickness,1/0);let o,l;if(t.grouped){const c=s?this._getStackCount(e):t.stackCount,u=r.barThickness==="flex"?cq(e,t,r,c):lq(e,t,r,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);o=u.start+u.chunk*d+u.chunk/2,l=Math.min(a,u.chunk*u.ratio)}else o=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(a,t.min*t.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[t.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}pt(Em,"id","bar"),pt(Em,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),pt(Em,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Zv extends bl{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,r){const s=super.parsePrimitiveData(e,t,i,r);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+i).radius;return s}parseArrayData(e,t,i,r){const s=super.parseArrayData(e,t,i,r);for(let a=0;a<s.length;a++){const o=t[i+a];s[a]._custom=xn(o[2],this.resolveDataElementOptions(a+i).radius)}return s}parseObjectData(e,t,i,r){const s=super.parseObjectData(e,t,i,r);for(let a=0;a<s.length;a++){const o=t[i+a];s[a]._custom=xn(o&&o.r&&+o.r,this.resolveDataElementOptions(a+i).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=t,a=this.getParsed(e),o=r.getLabelForValue(a.x),l=s.getLabelForValue(a.y),c=a._custom;return{label:i[e]||"",value:"("+o+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,r),u=a.axis,d=o.axis;for(let h=t;h<t+i;h++){const p=e[h],m=!s&&this.getParsed(h),v={},b=v[u]=s?a.getPixelForDecimal(.5):a.getPixelForValue(m[u]),x=v[d]=s?o.getBasePixel():o.getPixelForValue(m[d]);v.skip=isNaN(b)||isNaN(x),c&&(v.options=l||this.resolveDataElementOptions(h,p.active?"active":r),s&&(v.options.radius=0)),this.updateElement(p,h,v,r)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const s=r.radius;return t!=="active"&&(r.radius=0),r.radius+=xn(i&&i._custom,s),r}}pt(Zv,"id","bubble"),pt(Zv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),pt(Zv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function mq(n,e,t){let i=1,r=1,s=0,a=0;if(e<Gi){const o=n,l=o+e,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),p=(S,A,C)=>o0(S,o,l,!0)?1:Math.max(A,A*t,C,C*t),m=(S,A,C)=>o0(S,o,l,!0)?-1:Math.min(A,A*t,C,C*t),v=p(0,c,d),b=p(Hr,u,h),x=m(Vi,c,d),w=m(Vi+Hr,u,h);i=(v-x)/2,r=(b-w)/2,s=-(v+x)/2,a=-(b+w)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}class Gf extends bl{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let s=l=>+i[l];if(jn(i[e])){const{key:l="value"}=this._parsing;s=c=>+Fd(i[c],l)}let a,o;for(a=e,o=e+t;a<o;++a)r._parsed[a]=s(a)}}_getRotation(){return ml(this.options.rotation-90)}_getCircumference(){return ml(this.options.circumference)}_getRotationExtents(){let e=Gi,t=-Gi;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,s=r._getRotation(),a=r._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,r=this._cachedMeta,s=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(CV(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:p,offsetX:m,offsetY:v}=mq(d,u,l),b=(i.width-a)/h,x=(i.height-a)/p,w=Math.max(Math.min(b,x)/2,0),S=N3(this.options.radius,w),A=Math.max(S*l,0),C=(S-A)/this._getVisibleDatasetWeightTotal();this.offsetX=m*S,this.offsetY=v*S,r.total=this.calculateTotal(),this.outerRadius=S-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const i=this.options,r=this._cachedMeta,s=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Gi)}updateElements(e,t,i,r){const s=r==="reset",a=this.chart,o=a.chartArea,c=a.options.animation,u=(o.left+o.right)/2,d=(o.top+o.bottom)/2,h=s&&c.animateScale,p=h?0:this.innerRadius,m=h?0:this.outerRadius,{sharedOptions:v,includeOptions:b}=this._getSharedOptions(t,r);let x=this._getRotation(),w;for(w=0;w<t;++w)x+=this._circumference(w,s);for(w=t;w<t+i;++w){const S=this._circumference(w,s),A=e[w],C={x:u+this.offsetX,y:d+this.offsetY,startAngle:x,endAngle:x+S,circumference:S,outerRadius:m,innerRadius:p};b&&(C.options=v||this.resolveDataElementOptions(w,A.active?"active":r)),x+=S,this.updateElement(A,w,C,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,r;for(r=0;r<t.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Gi*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=W0(t._parsed[e],i.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const i=this.chart;let r,s,a,o,l;if(!e){for(r=0,s=i.data.datasets.length;r<s;++r)if(i.isDatasetVisible(r)){a=i.getDatasetMeta(r),e=a.data,o=a.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)l=o.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,r=e.length;i<r;++i){const s=this.resolveDataElementOptions(i);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(xn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}pt(Gf,"id","doughnut"),pt(Gf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),pt(Gf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),pt(Gf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return t.labels.map((s,a)=>{const l=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class e1 extends bl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=t,a=this.chart._animationsDisabled;let{start:o,count:l}=$3(t,r,a);this._drawStart=o,this._drawCount=l,H3(t)&&(o=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:c},e),this.updateElements(r,o,l,e)}updateElements(e,t,i,r){const s=r==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r),h=a.axis,p=o.axis,{spanGaps:m,segment:v}=this.options,b=Kp(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||r==="none",w=t+i,S=e.length;let A=t>0&&this.getParsed(t-1);for(let C=0;C<S;++C){const N=e[C],k=x?N:{};if(C<t||C>=w){k.skip=!0;continue}const R=this.getParsed(C),U=Dn(R[p]),j=k[h]=a.getPixelForValue(R[h],C),D=k[p]=s||U?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,R,l):R[p],C);k.skip=isNaN(j)||isNaN(D)||U,k.stop=C>0&&Math.abs(R[h]-A[h])>b,v&&(k.parsed=R,k.raw=c.data[C]),d&&(k.options=u||this.resolveDataElementOptions(C,N.active?"active":r)),x||this.updateElement(N,C,k,r),A=R}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}pt(e1,"id","line"),pt(e1,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),pt(e1,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Tm extends bl{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,r=i.data.labels||[],s=W0(t._parsed[e].r,i.options.locale);return{label:r[e]||"",value:s}}parseObjectData(e,t,i,r){return X3.bind(this)(e,t,i,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,r)=>{const s=this.getParsed(r).r;!isNaN(s)&&this.chart.getDataVisibility(r)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(r/2,0),a=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),o=(s-a)/e.getVisibleDatasetCount();this.outerRadius=s-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,i,r){const s=r==="reset",a=this.chart,l=a.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,h=c.getIndexAngle(0)-.5*Vi;let p=h,m;const v=360/this.countVisibleElements();for(m=0;m<t;++m)p+=this._computeAngle(m,r,v);for(m=t;m<t+i;m++){const b=e[m];let x=p,w=p+this._computeAngle(m,r,v),S=a.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=w,s&&(l.animateScale&&(S=0),l.animateRotate&&(x=w=h));const A={x:u,y:d,innerRadius:0,outerRadius:S,startAngle:x,endAngle:w,options:this.resolveDataElementOptions(m,b.active?"active":r)};this.updateElement(b,m,A,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?ml(this.resolveDataElementOptions(e,t).angle||i):0}}pt(Tm,"id","polarArea"),pt(Tm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),pt(Tm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:r}}=e.legend.options;return t.labels.map((s,a)=>{const l=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class l_ extends Gf{}pt(l_,"id","pie"),pt(l_,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class t1 extends bl{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,r){return X3.bind(this)(e,t,i,r)}update(e){const t=this._cachedMeta,i=t.dataset,r=t.data||[],s=t.iScale.getLabels();if(i.points=r,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:s.length===r.length,options:a};this.updateElement(i,void 0,o,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,i,r){const s=this._cachedMeta.rScale,a=r==="reset";for(let o=t;o<t+i;o++){const l=e[o],c=this.resolveDataElementOptions(o,l.active?"active":r),u=s.getPointPositionForValue(o,this.getParsed(o).r),d=a?s.xCenter:u.x,h=a?s.yCenter:u.y,p={x:d,y:h,angle:u.angle,skip:isNaN(d)||isNaN(h),options:c};this.updateElement(l,o,p,r)}}}pt(t1,"id","radar"),pt(t1,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),pt(t1,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Am extends bl{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:s}=t,a=this.getParsed(e),o=r.getLabelForValue(a.x),l=s.getLabelForValue(a.y);return{label:i[e]||"",value:"("+o+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,r=this.chart._animationsDisabled;let{start:s,count:a}=$3(t,i,r);if(this._drawStart=s,this._drawCount=a,H3(t)&&(s=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:l}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!l._decimated,o.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(o,void 0,{animated:!r,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,s,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,r){const s=r==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(u),h=this.includeOptions(r,d),p=a.axis,m=o.axis,{spanGaps:v,segment:b}=this.options,x=Kp(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||r==="none";let S=t>0&&this.getParsed(t-1);for(let A=t;A<t+i;++A){const C=e[A],N=this.getParsed(A),k=w?C:{},R=Dn(N[m]),U=k[p]=a.getPixelForValue(N[p],A),j=k[m]=s||R?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,N,l):N[m],A);k.skip=isNaN(U)||isNaN(j)||R,k.stop=A>0&&Math.abs(N[p]-S[p])>x,b&&(k.parsed=N,k.raw=c.data[A]),h&&(k.options=d||this.resolveDataElementOptions(A,C.active?"active":r)),w||this.updateElement(C,A,k,r),S=N}this.updateSharedOptions(d,r,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let o=0;for(let l=t.length-1;l>=0;--l)o=Math.max(o,t[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}const i=e.dataset,r=i.options&&i.options.borderWidth||0;if(!t.length)return r;const s=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,s,a)/2}}pt(Am,"id","scatter"),pt(Am,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),pt(Am,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var yq=Object.freeze({__proto__:null,BarController:Em,BubbleController:Zv,DoughnutController:Gf,LineController:e1,PieController:l_,PolarAreaController:Tm,RadarController:t1,ScatterController:Am});function Ef(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _E{constructor(e){pt(this,"options");this.options=e||{}}static override(e){Object.assign(_E.prototype,e)}init(){}formats(){return Ef()}parse(){return Ef()}format(){return Ef()}add(){return Ef()}diff(){return Ef()}startOf(){return Ef()}endOf(){return Ef()}}var vq={_date:_E};function xq(n,e,t,i){const{controller:r,data:s,_sorted:a}=n,o=r._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&s.length){const c=o._reversePixels?$V:nu;if(i){if(r._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(s,e,t-d),p=c(s,e,t+d);return{lo:h.lo,hi:p.hi}}}}else{const u=c(s,e,t);if(l){const{vScale:d}=r._cachedMeta,{_parsed:h}=n,p=h.slice(0,u.lo+1).reverse().findIndex(v=>!Dn(v[d.axis]));u.lo-=Math.max(0,p);const m=h.slice(u.hi).findIndex(v=>!Dn(v[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:s.length-1}}function tb(n,e,t,i,r){const s=n.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,l=s.length;o<l;++o){const{index:c,data:u}=s[o],{lo:d,hi:h}=xq(s[o],e,a,r);for(let p=d;p<=h;++p){const m=u[p];m.skip||i(m,c,p)}}}function bq(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,a=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function eS(n,e,t,i,r){const s=[];return!r&&!n.isPointInArea(e)||tb(n,t,e,function(o,l,c){!r&&!iu(o,n.chartArea,0)||o.inRange(e.x,e.y,i)&&s.push({element:o,datasetIndex:l,index:c})},!0),s}function Sq(n,e,t,i){let r=[];function s(a,o,l){const{startAngle:c,endAngle:u}=a.getProps(["startAngle","endAngle"],i),{angle:d}=M3(a,{x:e.x,y:e.y});o0(d,c,u)&&r.push({element:a,datasetIndex:o,index:l})}return tb(n,t,e,s),r}function wq(n,e,t,i,r,s){let a=[];const o=bq(t);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const p=u.inRange(e.x,e.y,r);if(i&&!p)return;const m=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(m))&&!p)return;const b=o(e,m);b<l?(a=[{element:u,datasetIndex:d,index:h}],l=b):b===l&&a.push({element:u,datasetIndex:d,index:h})}return tb(n,t,e,c),a}function tS(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?Sq(n,e,t,r):wq(n,e,t,i,r,s)}function iI(n,e,t,i,r){const s=[],a=t==="x"?"inXRange":"inYRange";let o=!1;return tb(n,t,e,(l,c,u)=>{l[a]&&l[a](e[t],r)&&(s.push({element:l,datasetIndex:c,index:u}),o=o||l.inRange(e.x,e.y,r))}),i&&!o?[]:s}var _q={modes:{index(n,e,t,i){const r=Nf(e,n),s=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?eS(n,r,s,i,a):tS(n,r,s,!1,i,a),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=o[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const r=Nf(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;let o=t.intersect?eS(n,r,s,i,a):tS(n,r,s,!1,i,a);if(o.length>0){const l=o[0].datasetIndex,c=n.getDatasetMeta(l).data;o=[];for(let u=0;u<c.length;++u)o.push({element:c[u],datasetIndex:l,index:u})}return o},point(n,e,t,i){const r=Nf(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;return eS(n,r,s,i,a)},nearest(n,e,t,i){const r=Nf(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;return tS(n,r,s,t.intersect,i,a)},x(n,e,t,i){const r=Nf(e,n);return iI(n,r,"x",t.intersect,i)},y(n,e,t,i){const r=Nf(e,n);return iI(n,r,"y",t.intersect,i)}}};const oO=["left","top","right","bottom"];function Hg(n,e){return n.filter(t=>t.pos===e)}function rI(n,e){return n.filter(t=>oO.indexOf(t.pos)===-1&&t.box.axis===e)}function Wg(n,e){return n.sort((t,i)=>{const r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Eq(n){const e=[];let t,i,r,s,a,o;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:a,stackWeight:o=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return e}function Tq(n){const e={};for(const t of n){const{stack:i,pos:r,stackWeight:s}=t;if(!i||!oO.includes(r))continue;const a=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function Aq(n,e){const t=Tq(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,a,o;for(s=0,a=n.length;s<a;++s){o=n[s];const{fullSize:l}=o.box,c=t[o.stack],u=c&&o.stackWeight/c.weight;o.horizontal?(o.width=u?u*i:l&&e.availableWidth,o.height=r):(o.width=i,o.height=u?u*r:l&&e.availableHeight)}return t}function Lq(n){const e=Eq(n),t=Wg(e.filter(c=>c.box.fullSize),!0),i=Wg(Hg(e,"left"),!0),r=Wg(Hg(e,"right")),s=Wg(Hg(e,"top"),!0),a=Wg(Hg(e,"bottom")),o=rI(e,"x"),l=rI(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:Hg(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}function sI(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function lO(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Cq(n,e,t,i){const{pos:r,box:s}=t,a=n.maxPadding;if(!jn(r)){t.size&&(n[r]-=t.size);const d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&lO(a,s.getPadding());const o=Math.max(0,e.outerWidth-sI(a,n,"left","right")),l=Math.max(0,e.outerHeight-sI(a,n,"top","bottom")),c=o!==n.w,u=l!==n.h;return n.w=o,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function Iq(n){const e=n.maxPadding;function t(i){const r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function kq(n,e){const t=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{s[a]=Math.max(e[a],t[a])}),s}return i(n?["left","right"]:["top","bottom"])}function sm(n,e,t,i){const r=[];let s,a,o,l,c,u;for(s=0,a=n.length,c=0;s<a;++s){o=n[s],l=o.box,l.update(o.width||e.w,o.height||e.h,kq(o.horizontal,e));const{same:d,other:h}=Cq(e,t,o,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(o)}return c&&sm(r,e,t,i)||u}function lv(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function aI(n,e,t,i){const r=t.padding;let{x:s,y:a}=e;for(const o of n){const l=o.box,c=i[o.stack]||{placed:0,weight:1},u=o.stackWeight/c.weight||1;if(o.horizontal){const d=e.w*u,h=c.size||l.height;a0(c.start)&&(a=c.start),l.fullSize?lv(l,r.left,a,t.outerWidth-r.right-r.left,h):lv(l,e.left+c.placed,a,d,h),c.start=a,c.placed+=d,a=l.bottom}else{const d=e.h*u,h=c.size||l.width;a0(c.start)&&(s=c.start),l.fullSize?lv(l,s,r.top,h,t.outerHeight-r.bottom-r.top):lv(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=a}var ea={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const r=ia(n.options.layout.padding),s=Math.max(e-r.width,0),a=Math.max(t-r.height,0),o=Lq(n.boxes),l=o.vertical,c=o.horizontal;vi(n.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,b)=>b.box.options&&b.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},r);lO(h,ia(i));const p=Object.assign({maxPadding:h,w:s,h:a,x:r.left,y:r.top},r),m=Aq(l.concat(c),d);sm(o.fullSize,p,d,m),sm(l,p,d,m),sm(c,p,d,m)&&sm(l,p,d,m),Iq(p),aI(o.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,aI(o.rightAndBottom,p,d,m),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},vi(o.chartArea,v=>{const b=v.box;Object.assign(b,n.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class cO{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Rq extends cO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const n1="$chartjs",Pq={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},oI=n=>n===null||n==="";function Nq(n,e){const t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[n1]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",oI(r)){const s=zC(n,"width");s!==void 0&&(n.width=s)}if(oI(i))if(n.style.height==="")n.height=n.width/(e||2);else{const s=zC(n,"height");s!==void 0&&(n.height=s)}return n}const uO=DY?{passive:!0}:!1;function Dq(n,e,t){n&&n.addEventListener(e,t,uO)}function Oq(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,uO)}function Mq(n,e){const t=Pq[n.type]||n.type,{x:i,y:r}=Nf(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function J1(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function Fq(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||J1(o.addedNodes,i),a=a&&!J1(o.removedNodes,i);a&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function jq(n,e,t){const i=n.canvas,r=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||J1(o.removedNodes,i),a=a&&!J1(o.addedNodes,i);a&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const c0=new Map;let lI=0;function dO(){const n=window.devicePixelRatio;n!==lI&&(lI=n,c0.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Bq(n,e){c0.size||window.addEventListener("resize",dO),c0.set(n,e)}function Uq(n){c0.delete(n),c0.size||window.removeEventListener("resize",dO)}function $q(n,e,t){const i=n.canvas,r=i&&wE(i);if(!r)return;const s=U3((o,l)=>{const c=r.clientWidth;t(o,l),c<r.clientWidth&&t()},window),a=new ResizeObserver(o=>{const l=o[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return a.observe(r),Bq(n,s),a}function nS(n,e,t){t&&t.disconnect(),e==="resize"&&Uq(n)}function Hq(n,e,t){const i=n.canvas,r=U3(s=>{n.ctx!==null&&t(Mq(s,n))},n);return Dq(i,e,r),r}class Wq extends cO{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Nq(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[n1])return!1;const i=t[n1].initial;["height","width"].forEach(s=>{const a=i[s];Dn(a)?t.removeAttribute(s):t.setAttribute(s,a)});const r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[n1],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),a={attach:Fq,detach:jq,resize:$q}[t]||Hq;r[t]=a(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:nS,detach:nS,resize:nS}[t]||Oq)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return NY(e,t,i,r)}isAttached(e){const t=e&&wE(e);return!!(t&&t.isConnected)}}function zq(n){return!SE()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Rq:Wq}class wl{constructor(){pt(this,"x");pt(this,"y");pt(this,"active",!1);pt(this,"options");pt(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Kp(this.x)&&Kp(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}pt(wl,"defaults",{}),pt(wl,"defaultRoutes");function Gq(n,e){const t=n.options.ticks,i=Vq(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?qq(e):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>r)return Kq(e,c,s,a/r),c;const u=Yq(s,e,r);if(a>0){let d,h;const p=a>1?Math.round((l-o)/(a-1)):null;for(cv(e,c,u,Dn(p)?0:o-p,o),d=0,h=a-1;d<h;d++)cv(e,c,u,s[d],s[d+1]);return cv(e,c,u,l,Dn(p)?e.length:l+p),c}return cv(e,c,u),c}function Vq(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function Yq(n,e,t){const i=Xq(n),r=e.length/t;if(!i)return Math.max(r,1);const s=MV(i);for(let a=0,o=s.length-1;a<o;a++){const l=s[a];if(l>r)return l}return Math.max(r,1)}function qq(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function Kq(n,e,t,i){let r=0,s=t[0],a;for(i=Math.ceil(i),a=0;a<n.length;a++)a===s&&(e.push(n[a]),r++,s=t[r*i])}function cv(n,e,t,i,r){const s=xn(i,0),a=Math.min(xn(r,n.length),n.length);let o=0,l,c,u;for(t=Math.ceil(t),r&&(l=r-i,t=l/Math.floor(l/t)),u=s;u<0;)o++,u=Math.round(s+o*t);for(c=Math.max(s,0);c<a;c++)c===u&&(e.push(n[c]),o++,u=Math.round(s+o*t))}function Xq(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const Qq=n=>n==="left"?"right":n==="right"?"left":n,cI=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,uI=(n,e)=>Math.min(e||n,n);function dI(n,e){const t=[],i=n.length/e,r=n.length;let s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function Jq(n,e,t){const i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,a=n._endPixel,o=1e-6;let l=n.getPixelForTick(r),c;if(!(t&&(i===1?c=Math.max(l-s,a-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-o||l>a+o)))return l}function Zq(n,e){vi(n,t=>{const i=t.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function zg(n){return n.drawTicks?n.tickLength:0}function fI(n,e){if(!n.display)return 0;const t=cs(n.font,e),i=ia(n.padding);return(rr(n.text)?n.text.length:1)*t.lineHeight+i.height}function eK(n,e){return qd(n,{scale:e,type:"scale"})}function tK(n,e,t){return qd(n,{tick:t,index:e,type:"tick"})}function nK(n,e,t){let i=gE(n);return(t&&e!=="right"||!t&&e==="right")&&(i=Qq(i)),i}function iK(n,e,t,i){const{top:r,left:s,bottom:a,right:o,chart:l}=n,{chartArea:c,scales:u}=l;let d=0,h,p,m;const v=a-r,b=o-s;if(n.isHorizontal()){if(p=Ks(i,s,o),jn(t)){const x=Object.keys(t)[0],w=t[x];m=u[x].getPixelForValue(w)+v-e}else t==="center"?m=(c.bottom+c.top)/2+v-e:m=cI(n,t,e);h=o-s}else{if(jn(t)){const x=Object.keys(t)[0],w=t[x];p=u[x].getPixelForValue(w)-b+e}else t==="center"?p=(c.left+c.right)/2-b+e:p=cI(n,t,e);m=Ks(i,a,r),d=t==="left"?-Hr:Hr}return{titleX:p,titleY:m,maxWidth:h,rotation:d}}class xh extends wl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=no(e,Number.POSITIVE_INFINITY),t=no(t,Number.NEGATIVE_INFINITY),i=no(i,Number.POSITIVE_INFINITY),r=no(r,Number.NEGATIVE_INFINITY),{min:no(e,i),max:no(t,r),minDefined:Ir(e),maxDefined:Ir(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),a;if(r&&s)return{min:t,max:i};const o=this.getMatchingVisibleMetas();for(let l=0,c=o.length;l<c;++l)a=o[l].controller.getMinMax(this,e),r||(t=Math.min(t,a.min)),s||(i=Math.max(i,a.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:no(t,no(i,t)),max:no(i,no(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Fi(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:r,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=dY(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?dI(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Gq(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Fi(this.options.afterUpdate,[this])}beforeSetDimensions(){Fi(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Fi(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Fi(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Fi(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Fi(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Fi(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Fi(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=uI(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation;let a=r,o,l,c;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=xs(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/i:p/(i-1),d+6>o&&(o=p/(i-(e.offset?.5:1)),l=this.maxHeight-zg(e.grid)-t.padding-fI(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),a=hE(Math.min(Math.asin(xs((u.highest.height+6)/o,-1,1)),Math.asin(xs(l/c,-1,1))-Math.asin(xs(h/c,-1,1)))),a=Math.max(r,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){Fi(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Fi(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=fI(r,t.options.font);if(o?(e.width=this.maxWidth,e.height=zg(s)+l):(e.height=this.maxHeight,e.width=zg(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=i.padding*2,m=ml(this.labelRotation),v=Math.cos(m),b=Math.sin(m);if(o){const x=i.mirror?0:b*d.width+v*h.height;e.height=Math.min(this.maxHeight,e.height+x+p)}else{const x=i.mirror?0:v*d.width+b*h.height;e.width=Math.min(this.maxWidth,e.width+x+p)}this._calculatePadding(c,u,b,v)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){const{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;l?c?(h=r*e.width,p=i*t.height):(h=i*e.height,p=r*t.width):s==="start"?p=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,p=t.width/2),this.paddingLeft=Math.max((h-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+a)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+a,this.paddingBottom=d+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Fi(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Dn(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=dI(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:r,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(t/uI(t,i));let c=0,u=0,d,h,p,m,v,b,x,w,S,A,C;for(d=0;d<t;d+=l){if(m=e[d].label,v=this._resolveTickFontOptions(d),r.font=b=v.string,x=s[b]=s[b]||{data:{},gc:[]},w=v.lineHeight,S=A=0,!Dn(m)&&!rr(m))S=X1(r,x.data,x.gc,S,m),A=w;else if(rr(m))for(h=0,p=m.length;h<p;++h)C=m[h],!Dn(C)&&!rr(C)&&(S=X1(r,x.data,x.gc,S,C),A+=w);a.push(S),o.push(A),c=Math.max(S,c),u=Math.max(A,u)}Zq(s,t);const N=a.indexOf(c),k=o.indexOf(u),R=U=>({width:a[U]||0,height:o[U]||0});return{first:R(0),last:R(t-1),widest:R(N),highest:R(k),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return UV(this._alignToPixels?_f(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=tK(this.getContext(),e,i))}return this.$context||(this.$context=eK(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=ml(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*i>o*r?o/i:l/r:l*r<o*i?l/i:o/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,r=this.options,{grid:s,position:a,border:o}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=zg(s),p=[],m=o.setContext(this.getContext()),v=m.display?m.width:0,b=v/2,x=function(H){return _f(i,H,v)};let w,S,A,C,N,k,R,U,j,D,O,Z;if(a==="top")w=x(this.bottom),k=this.bottom-h,U=w-b,D=x(e.top)+b,Z=e.bottom;else if(a==="bottom")w=x(this.top),D=e.top,Z=x(e.bottom)-b,k=w+b,U=this.top+h;else if(a==="left")w=x(this.right),N=this.right-h,R=w-b,j=x(e.left)+b,O=e.right;else if(a==="right")w=x(this.left),j=e.left,O=x(e.right)-b,N=w+b,R=this.left+h;else if(t==="x"){if(a==="center")w=x((e.top+e.bottom)/2+.5);else if(jn(a)){const H=Object.keys(a)[0],V=a[H];w=x(this.chart.scales[H].getPixelForValue(V))}D=e.top,Z=e.bottom,k=w+b,U=k+h}else if(t==="y"){if(a==="center")w=x((e.left+e.right)/2);else if(jn(a)){const H=Object.keys(a)[0],V=a[H];w=x(this.chart.scales[H].getPixelForValue(V))}N=w-b,R=N-h,j=e.left,O=e.right}const J=xn(r.ticks.maxTicksLimit,d),le=Math.max(1,Math.ceil(d/J));for(S=0;S<d;S+=le){const H=this.getContext(S),V=s.setContext(H),z=o.setContext(H),W=V.lineWidth,te=V.color,fe=z.dash||[],F=z.dashOffset,K=V.tickWidth,ee=V.tickColor,ae=V.tickBorderDash||[],ce=V.tickBorderDashOffset;A=Jq(this,S,l),A!==void 0&&(C=_f(i,A,W),c?N=R=j=O=C:k=U=D=Z=C,p.push({tx1:N,ty1:k,tx2:R,ty2:U,x1:j,y1:D,x2:O,y2:Z,width:W,color:te,borderDash:fe,borderDashOffset:F,tickWidth:K,tickColor:ee,tickBorderDash:ae,tickBorderDashOffset:ce}))}return this._ticksLength=d,this._borderValue=w,p}_computeLabelItems(e){const t=this.axis,i=this.options,{position:r,ticks:s}=i,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=zg(i.grid),p=h+u,m=d?-u:p,v=-ml(this.labelRotation),b=[];let x,w,S,A,C,N,k,R,U,j,D,O,Z="middle";if(r==="top")N=this.bottom-m,k=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+m,k=this._getXAxisLabelAlignment();else if(r==="left"){const le=this._getYAxisLabelAlignment(h);k=le.textAlign,C=le.x}else if(r==="right"){const le=this._getYAxisLabelAlignment(h);k=le.textAlign,C=le.x}else if(t==="x"){if(r==="center")N=(e.top+e.bottom)/2+p;else if(jn(r)){const le=Object.keys(r)[0],H=r[le];N=this.chart.scales[le].getPixelForValue(H)+p}k=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")C=(e.left+e.right)/2-p;else if(jn(r)){const le=Object.keys(r)[0],H=r[le];C=this.chart.scales[le].getPixelForValue(H)}k=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(l==="start"?Z="top":l==="end"&&(Z="bottom"));const J=this._getLabelSizes();for(x=0,w=o.length;x<w;++x){S=o[x],A=S.label;const le=s.setContext(this.getContext(x));R=this.getPixelForTick(x)+s.labelOffset,U=this._resolveTickFontOptions(x),j=U.lineHeight,D=rr(A)?A.length:1;const H=D/2,V=le.color,z=le.textStrokeColor,W=le.textStrokeWidth;let te=k;a?(C=R,k==="inner"&&(x===w-1?te=this.options.reverse?"left":"right":x===0?te=this.options.reverse?"right":"left":te="center"),r==="top"?c==="near"||v!==0?O=-D*j+j/2:c==="center"?O=-J.highest.height/2-H*j+j:O=-J.highest.height+j/2:c==="near"||v!==0?O=j/2:c==="center"?O=J.highest.height/2-H*j:O=J.highest.height-D*j,d&&(O*=-1),v!==0&&!le.showLabelBackdrop&&(C+=j/2*Math.sin(v))):(N=R,O=(1-D)*j/2);let fe;if(le.showLabelBackdrop){const F=ia(le.backdropPadding),K=J.heights[x],ee=J.widths[x];let ae=O-F.top,ce=0-F.left;switch(Z){case"middle":ae-=K/2;break;case"bottom":ae-=K;break}switch(k){case"center":ce-=ee/2;break;case"right":ce-=ee;break;case"inner":x===w-1?ce-=ee:x>0&&(ce-=ee/2);break}fe={left:ce,top:ae,width:ee+F.width,height:K+F.height,color:le.backdropColor}}b.push({label:A,font:U,textOffset:O,options:{rotation:v,color:V,strokeColor:z,strokeWidth:W,textAlign:te,textBaseline:Z,translation:[C,N],backdrop:fe}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ml(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,a=this._getLabelSizes(),o=e+s,l=a.widest.width;let c,u;return t==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-o,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+o,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const o=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(s=0,a=r.length;s<a;++s){const l=r[s];t.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),a=i.display?s.width:0;if(!a)return;const o=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=_f(e,this.left,a)-a/2,u=_f(e,this.right,o)+o/2,d=h=l):(d=_f(e,this.top,a)-a/2,h=_f(e,this.bottom,o)+o/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Jx(i,r);const s=this.getLabelItems(e);for(const a of s){const o=a.options,l=a.font,c=a.label,u=a.textOffset;hh(i,c,0,u,l,o)}r&&Zx(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;const s=cs(i.font),a=ia(i.padding),o=i.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||jn(t)?(l+=a.bottom,rr(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=a.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=iK(this,l,t,o);hh(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:nK(o,t,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=xn(e.grid&&e.grid.z,-1),r=xn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==xh.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,a;for(s=0,a=t.length;s<a;++s){const o=t[s];o[i]===this.id&&(!e||o.type===e)&&r.push(o)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return cs(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class uv{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;aK(t)&&(i=this.register(t));const r=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,rK(e,a,i),this.override&&sr.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in sr[r]&&(delete sr[r][i],this.override&&delete fh[i])}}function rK(n,e,t){const i=s0(Object.create(null),[t?sr.get(t):{},sr.get(e),n.defaults]);sr.set(e,i),n.defaultRoutes&&sK(e,n.defaultRoutes),n.descriptors&&sr.describe(e,n.descriptors)}function sK(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),a=e[t].split("."),o=a.pop(),l=a.join(".");sr.route(s,r,l,o)})}function aK(n){return"id"in n&&"defaults"in n}class oK{constructor(){this.controllers=new uv(bl,"datasets",!0),this.elements=new uv(wl,"elements"),this.plugins=new uv(Object,"plugins"),this.scales=new uv(xh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):vi(r,a=>{const o=i||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,i){const r=fE(e);Fi(i["before"+r],[],i),t[e](i),Fi(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var Xl=new oK;class lK{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,i,r){r=r||{};for(const s of e){const a=s.plugin,o=a[i],l=[t,r,s.options];if(Fi(o,l,a)===!1&&r.cancelable)return!1}return!0}invalidate(){Dn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,r=xn(i.options&&i.options.plugins,{}),s=cK(i);return r===!1&&!t?[]:dK(e,s,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,r=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}}function cK(n){const e={},t=[],i=Object.keys(Xl.plugins.items);for(let s=0;s<i.length;s++)t.push(Xl.getPlugin(i[s]));const r=n.plugins||[];for(let s=0;s<r.length;s++){const a=r[s];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function uK(n,e){return!e&&n===!1?null:n===!0?{}:n}function dK(n,{plugins:e,localIds:t},i,r){const s=[],a=n.getContext();for(const o of e){const l=o.id,c=uK(i[l],r);c!==null&&s.push({plugin:o,options:fK(n.config,{plugin:o,local:t[l]},c,a)})}return s}function fK(n,{plugin:e,local:t},i,r){const s=n.pluginScopeKeys(e),a=n.getOptionScopes(i,s);return t&&e.defaults&&a.push(e.defaults),n.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function c_(n,e){const t=sr.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function hK(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function pK(n,e){return n===e?"_index_":"_value_"}function hI(n){if(n==="x"||n==="y"||n==="r")return n}function gK(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function u_(n,...e){if(hI(n))return n;for(const t of e){const i=t.axis||gK(t.position)||n.length>1&&hI(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function pI(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function mK(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return pI(n,"x",t[0])||pI(n,"y",t[0])}return{}}function yK(n,e){const t=fh[n.type]||{scales:{}},i=e.scales||{},r=c_(n.type,e),s=Object.create(null);return Object.keys(i).forEach(a=>{const o=i[a];if(!jn(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=u_(a,o,mK(a,n),sr.scales[o.type]),c=pK(l,r),u=t.scales||{};s[a]=bm(Object.create(null),[{axis:l},o,u[l],u[c]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,l=a.indexAxis||c_(o,e),u=(fh[o]||{}).scales||{};Object.keys(u).forEach(d=>{const h=hK(d,l),p=a[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),bm(s[p],[{axis:h},i[p],u[d]])})}),Object.keys(s).forEach(a=>{const o=s[a];bm(o,[sr.scales[o.type],sr.scale])}),s}function fO(n){const e=n.options||(n.options={});e.plugins=xn(e.plugins,{}),e.scales=yK(n,e)}function hO(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function vK(n){return n=n||{},n.data=hO(n.data),fO(n),n}const gI=new Map,pO=new Set;function dv(n,e){let t=gI.get(n);return t||(t=e(),gI.set(n,t),pO.add(t)),t}const Gg=(n,e,t)=>{const i=Fd(e,t);i!==void 0&&n.add(i)};class xK{constructor(e){this._config=vK(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hO(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),fO(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return dv(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return dv(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return dv(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return dv(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){const{options:r,type:s}=this,a=this._cachedScopes(e,i),o=a.get(t);if(o)return o;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(d=>Gg(l,e,d))),u.forEach(d=>Gg(l,r,d)),u.forEach(d=>Gg(l,fh[s]||{},d)),u.forEach(d=>Gg(l,sr,d)),u.forEach(d=>Gg(l,a_,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),pO.has(t)&&a.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,fh[t]||{},sr.datasets[t]||{},{type:t},sr,a_]}resolveNamedOptions(e,t,i,r=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=mI(this._resolverCache,e,r);let l=a;if(SK(a,t)){s.$shared=!1,i=jd(i)?i():i;const c=this.createResolver(e,i,o);l=Xp(a,i,c)}for(const c of t)s[c]=l[c];return s}createResolver(e,t,i=[""],r){const{resolver:s}=mI(this._resolverCache,e,i);return jn(t)?Xp(s,t,void 0,r):s}}function mI(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const r=t.join();let s=i.get(r);return s||(s={resolver:vE(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},i.set(r,s)),s}const bK=n=>jn(n)&&Object.getOwnPropertyNames(n).some(e=>jd(n[e]));function SK(n,e){const{isScriptable:t,isIndexable:i}=V3(n);for(const r of e){const s=t(r),a=i(r),o=(a||s)&&n[r];if(s&&(jd(o)||bK(o))||a&&rr(o))return!0}return!1}var wK="4.4.9";const _K=["top","bottom","left","right","chartArea"];function yI(n,e){return n==="top"||n==="bottom"||_K.indexOf(n)===-1&&e==="x"}function vI(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function xI(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Fi(t&&t.onComplete,[n],e)}function EK(n){const e=n.chart,t=e.options.animation;Fi(t&&t.onProgress,[n],e)}function gO(n){return SE()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const i1={},bI=n=>{const e=gO(n);return Object.values(i1).filter(t=>t.canvas===e).pop()};function TK(n,e,t){const i=Object.keys(n);for(const r of i){const s=+r;if(s>=e){const a=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=a)}}}function AK(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var nd;let lg=(nd=class{static register(...e){Xl.add(...e),SI()}static unregister(...e){Xl.remove(...e),SI()}constructor(e,t){const i=this.config=new xK(t),r=gO(e),s=bI(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||zq(r)),this.platform.updateConfig(i);const o=this.platform.acquireContext(r,a.aspectRatio),l=o&&o.canvas,c=l&&l.height,u=l&&l.width;if(this.id=LV(),this.ctx=o,this.canvas=l,this.width=u,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new lK,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=zV(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],i1[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}zc.listen(this,"complete",xI),zc.listen(this,"progress",EK),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:r,_aspectRatio:s}=this;return Dn(e)?t&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Xl}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():WC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return UC(this.canvas,this.ctx),this}stop(){return zc.stop(this),this}resize(e,t){zc.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,s),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,WC(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Fi(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};vi(t,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,r=Object.keys(i).reduce((a,o)=>(a[o]=!1,a),{});let s=[];t&&(s=s.concat(Object.keys(t).map(a=>{const o=t[a],l=u_(a,o),c=l==="r",u=l==="x";return{options:o,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),vi(s,a=>{const o=a.options,l=o.id,c=u_(l,o),u=xn(o.type,a.dtype);(o.position===void 0||yI(o.position,c)!==yI(a.dposition))&&(o.position=a.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const h=Xl.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(o,e)}),vi(r,(a,o)=>{a||delete i[o]}),vi(i,a=>{ea.configure(this,a,a.options),ea.addBox(this,a)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>t){for(let r=t;r<i;++r)this._destroyDatasetMeta(r);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(vI("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,r)=>{t.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=t.length;i<r;i++){const s=t[i];let a=this.getDatasetMeta(i);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=o,a.indexAxis=s.indexAxis||c_(o,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const l=Xl.getController(o),{datasetElementType:c,dataElementType:u}=sr.datasets[o];Object.assign(l,{dataElementType:Xl.getElement(u),datasetElementType:c&&Xl.getElement(c)}),a.controller=new l(this,i),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){vi(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),r||vi(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(vI("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){vi(this.scales,e=>{ea.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!RC(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of t){const a=i==="_removeElements"?-s:s;TK(e,r,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=s=>new Set(e.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),r=i(0);for(let s=1;s<t;s++)if(!RC(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ea.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],vi(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,jd(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(zc.has(this)?this.attached&&!zc.running(this)&&zc.start(this):(this.draw(),xI({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let r,s;for(r=0,s=t.length;r<s;++r){const a=t[r];(!e||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=iO(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Jx(t,r),e.controller.draw(),r&&Zx(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return iu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,r){const s=_q.modes[t];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=qd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,r);a0(t)?(s.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),a.update(s,{visible:i}),this.update(o=>o.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),zc.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),UC(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete i1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(s,a)=>{t.addEventListener(this,s,a),e[s]=a},r=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};vi(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const o=()=>{r("attach",o),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){vi(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},vi(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const r=i?"set":"remove";let s,a,o,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!Y1(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),a=s(t,e),o=i?e:s(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:r=[],options:s}=this,a=t,o=this._getActiveElements(e,r,i,a),l=NV(e),c=AK(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Fi(s.onHover,[e,o,this],this),l&&Fi(s.onClick,[e,o,this],this));const u=!Y1(o,r);return(u||t)&&(this._active=o,this._updateHoverStyles(o,r,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,r){if(e.type==="mouseout")return[];if(!i)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},pt(nd,"defaults",sr),pt(nd,"instances",i1),pt(nd,"overrides",fh),pt(nd,"registry",Xl),pt(nd,"version",wK),pt(nd,"getChart",bI),nd);function SI(){return vi(lg.instances,n=>n._plugins.invalidate())}function LK(n,e,t){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=e;let c=r/o;n.beginPath(),n.arc(s,a,o,i-c,t+c),l>r?(c=r/l,n.arc(s,a,l,t+c,i-c,!0)):n.arc(s,a,r,t+Hr,i-Hr),n.closePath(),n.clip()}function CK(n){return yE(n,["outerStart","outerEnd","innerStart","innerEnd"])}function IK(n,e,t,i){const r=CK(n.options.borderRadius),s=(t-e)/2,a=Math.min(s,i*e/2),o=l=>{const c=(t-Math.min(s,l))*i/2;return xs(l,0,Math.min(s,c))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:xs(r.innerStart,0,a),innerEnd:xs(r.innerEnd,0,a)}}function ep(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function Z1(n,e,t,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-c,0),h=u>0?u+i+t+c:0;let p=0;const m=r-l;if(i){const le=u>0?u-i:0,H=d>0?d-i:0,V=(le+H)/2,z=V!==0?m*V/(V+i):m;p=(m-z)/2}const v=Math.max(.001,m*d-t/Vi)/d,b=(m-v)/2,x=l+b+p,w=r-b-p,{outerStart:S,outerEnd:A,innerStart:C,innerEnd:N}=IK(e,h,d,w-x),k=d-S,R=d-A,U=x+S/k,j=w-A/R,D=h+C,O=h+N,Z=x+C/D,J=w-N/O;if(n.beginPath(),s){const le=(U+j)/2;if(n.arc(a,o,d,U,le),n.arc(a,o,d,le,j),A>0){const W=ep(R,j,a,o);n.arc(W.x,W.y,A,j,w+Hr)}const H=ep(O,w,a,o);if(n.lineTo(H.x,H.y),N>0){const W=ep(O,J,a,o);n.arc(W.x,W.y,N,w+Hr,J+Math.PI)}const V=(w-N/h+(x+C/h))/2;if(n.arc(a,o,h,w-N/h,V,!0),n.arc(a,o,h,V,x+C/h,!0),C>0){const W=ep(D,Z,a,o);n.arc(W.x,W.y,C,Z+Math.PI,x-Hr)}const z=ep(k,x,a,o);if(n.lineTo(z.x,z.y),S>0){const W=ep(k,U,a,o);n.arc(W.x,W.y,S,x-Hr,U)}}else{n.moveTo(a,o);const le=Math.cos(U)*d+a,H=Math.sin(U)*d+o;n.lineTo(le,H);const V=Math.cos(j)*d+a,z=Math.sin(j)*d+o;n.lineTo(V,z)}n.closePath()}function kK(n,e,t,i,r){const{fullCircles:s,startAngle:a,circumference:o}=e;let l=e.endAngle;if(s){Z1(n,e,t,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(o)||(l=a+(o%Gi||Gi))}return Z1(n,e,t,i,l,r),n.fill(),l}function RK(n,e,t,i,r){const{fullCircles:s,startAngle:a,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,p=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,p?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let m=e.endAngle;if(s){Z1(n,e,t,i,m,r);for(let v=0;v<s;++v)n.stroke();isNaN(o)||(m=a+(o%Gi||Gi))}p&&LK(n,e,m),s||(Z1(n,e,t,i,m,r),n.stroke())}class am extends wl{constructor(t){super();pt(this,"circumference");pt(this,"endAngle");pt(this,"fullCircles");pt(this,"innerRadius");pt(this,"outerRadius");pt(this,"pixelMargin");pt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,r){const s=this.getProps(["x","y"],r),{angle:a,distance:o}=M3(s,{x:t,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),p=(this.options.spacing+this.options.borderWidth)/2,m=xn(h,c-l),v=o0(a,l,c)&&l!==c,b=m>=Gi||v,x=tu(o,u+p,d+p);return b&&x}getCenterPoint(t){const{x:i,y:r,startAngle:s,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,d=(s+a)/2,h=(o+l+u+c)/2;return{x:i+Math.cos(d)*h,y:r+Math.sin(d)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:r}=this,s=(i.offset||0)/4,a=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>Gi?Math.floor(r/Gi):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Vi,r||0)),u=s*c;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,kK(t,this,u,a,o),RK(t,this,u,a,o),t.restore()}}pt(am,"id","arc"),pt(am,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),pt(am,"defaultRoutes",{backgroundColor:"backgroundColor"}),pt(am,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function mO(n,e,t=e){n.lineCap=xn(t.borderCapStyle,e.borderCapStyle),n.setLineDash(xn(t.borderDash,e.borderDash)),n.lineDashOffset=xn(t.borderDashOffset,e.borderDashOffset),n.lineJoin=xn(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=xn(t.borderWidth,e.borderWidth),n.strokeStyle=xn(t.borderColor,e.borderColor)}function PK(n,e,t){n.lineTo(t.x,t.y)}function NK(n){return n.stepped?nY:n.tension||n.cubicInterpolationMode==="monotone"?iY:PK}function yO(n,e,t={}){const i=n.length,{start:r=0,end:s=i-1}=t,{start:a,end:o}=e,l=Math.max(r,a),c=Math.min(s,o),u=r<a&&s<a||r>o&&s>o;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function DK(n,e,t,i){const{points:r,options:s}=e,{count:a,start:o,loop:l,ilen:c}=yO(r,t,i),u=NK(s);let{move:d=!0,reverse:h}=i||{},p,m,v;for(p=0;p<=c;++p)m=r[(o+(h?c-p:p))%a],!m.skip&&(d?(n.moveTo(m.x,m.y),d=!1):u(n,v,m,h,s.stepped),v=m);return l&&(m=r[(o+(h?c:0))%a],u(n,v,m,h,s.stepped)),!!l}function OK(n,e,t,i){const r=e.points,{count:s,start:a,ilen:o}=yO(r,t,i),{move:l=!0,reverse:c}=i||{};let u=0,d=0,h,p,m,v,b,x;const w=A=>(a+(c?o-A:A))%s,S=()=>{v!==b&&(n.lineTo(u,b),n.lineTo(u,v),n.lineTo(u,x))};for(l&&(p=r[w(0)],n.moveTo(p.x,p.y)),h=0;h<=o;++h){if(p=r[w(h)],p.skip)continue;const A=p.x,C=p.y,N=A|0;N===m?(C<v?v=C:C>b&&(b=C),u=(d*u+A)/++d):(S(),n.lineTo(A,C),m=N,d=0,v=b=C),x=C}S()}function d_(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?OK:DK}function MK(n){return n.stepped?OY:n.tension||n.cubicInterpolationMode==="monotone"?MY:Df}function FK(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),mO(n,e.options),n.stroke(r)}function jK(n,e,t,i){const{segments:r,options:s}=e,a=d_(e);for(const o of r)mO(n,s,o.style),n.beginPath(),a(n,e,o,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const BK=typeof Path2D=="function";function UK(n,e,t,i){BK&&!e.options.segment?FK(n,e,t,i):jK(n,e,t,i)}class ru extends wl{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;LY(this._points,i,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=HY(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,r=e[t],s=this.points,a=nO(this,{property:t,start:r,end:r});if(!a.length)return;const o=[],l=MK(i);let c,u;for(c=0,u=a.length;c<u;++c){const{start:d,end:h}=a[c],p=s[d],m=s[h];if(p===m){o.push(p);continue}const v=Math.abs((r-p[t])/(m[t]-p[t])),b=l(p,m,v,i.stepped);b[t]=e[t],o.push(b)}return o.length===1?o[0]:o}pathSegment(e,t,i){return d_(this)(e,this,t,i)}path(e,t,i){const r=this.segments,s=d_(this);let a=this._loop;t=t||0,i=i||this.points.length-t;for(const o of r)a&=s(e,this,o,{start:t,end:t+i-1});return!!a}draw(e,t,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),UK(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}pt(ru,"id","line"),pt(ru,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),pt(ru,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),pt(ru,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function wI(n,e,t,i){const r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Lm extends wl{constructor(t){super();pt(this,"parsed");pt(this,"skip");pt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],r);return Math.pow(t-a,2)+Math.pow(i-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return wI(this,t,"x",i)}inYRange(t,i){return wI(this,t,"y",i)}getCenterPoint(t){const{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){const r=this.options;this.skip||r.radius<.1||!iu(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,o_(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}pt(Lm,"id","point"),pt(Lm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),pt(Lm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function vO(n,e){const{x:t,y:i,base:r,width:s,height:a}=n.getProps(["x","y","base","width","height"],e);let o,l,c,u,d;return n.horizontal?(d=a/2,o=Math.min(t,r),l=Math.max(t,r),c=i-d,u=i+d):(d=s/2,o=t-d,l=t+d,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function xd(n,e,t,i){return n?0:xs(e,t,i)}function $K(n,e,t){const i=n.options.borderWidth,r=n.borderSkipped,s=G3(i);return{t:xd(r.top,s.top,0,t),r:xd(r.right,s.right,0,e),b:xd(r.bottom,s.bottom,0,t),l:xd(r.left,s.left,0,e)}}function HK(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Jf(r),a=Math.min(e,t),o=n.borderSkipped,l=i||jn(r);return{topLeft:xd(!l||o.top||o.left,s.topLeft,0,a),topRight:xd(!l||o.top||o.right,s.topRight,0,a),bottomLeft:xd(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:xd(!l||o.bottom||o.right,s.bottomRight,0,a)}}function WK(n){const e=vO(n),t=e.right-e.left,i=e.bottom-e.top,r=$K(n,t/2,i/2),s=HK(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function iS(n,e,t,i){const r=e===null,s=t===null,o=n&&!(r&&s)&&vO(n,i);return o&&(r||tu(e,o.left,o.right))&&(s||tu(t,o.top,o.bottom))}function zK(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function GK(n,e){n.rect(e.x,e.y,e.w,e.h)}function rS(n,e,t={}){const i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,a=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+a,radius:n.radius}}class Cm extends wl{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:a}=WK(this),o=zK(a.radius)?l0:GK;e.save(),(a.w!==s.w||a.h!==s.h)&&(e.beginPath(),o(e,rS(a,t,s)),e.clip(),o(e,rS(s,-t,a)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),o(e,rS(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return iS(this,e,t,i)}inXRange(e,t){return iS(this,e,null,t)}inYRange(e,t){return iS(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}pt(Cm,"id","bar"),pt(Cm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),pt(Cm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var VK=Object.freeze({__proto__:null,ArcElement:am,BarElement:Cm,LineElement:ru,PointElement:Lm});const f_=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],_I=f_.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function xO(n){return f_[n%f_.length]}function bO(n){return _I[n%_I.length]}function YK(n,e){return n.borderColor=xO(e),n.backgroundColor=bO(e),++e}function qK(n,e){return n.backgroundColor=n.data.map(()=>xO(e++)),e}function KK(n,e){return n.backgroundColor=n.data.map(()=>bO(e++)),e}function XK(n){let e=0;return(t,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof Gf?e=qK(t,e):r instanceof Tm?e=KK(t,e):r&&(e=YK(t,e))}}function EI(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function QK(n){return n&&(n.borderColor||n.backgroundColor)}function JK(){return sr.borderColor!=="rgba(0,0,0,0.1)"||sr.backgroundColor!=="rgba(0,0,0,0.1)"}var ZK={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:s}=r,a=EI(i)||QK(r)||s&&EI(s)||JK();if(!t.forceOverride&&a)return;const o=XK(n);i.forEach(o)}};function eX(n,e,t,i,r){const s=r.samples||i;if(s>=t)return n.slice(e,e+t);const a=[],o=(t-2)/(s-2);let l=0;const c=e+t-1;let u=e,d,h,p,m,v;for(a[l++]=n[u],d=0;d<s-2;d++){let b=0,x=0,w;const S=Math.floor((d+1)*o)+1+e,A=Math.min(Math.floor((d+2)*o)+1,t)+e,C=A-S;for(w=S;w<A;w++)b+=n[w].x,x+=n[w].y;b/=C,x/=C;const N=Math.floor(d*o)+1+e,k=Math.min(Math.floor((d+1)*o)+1,t)+e,{x:R,y:U}=n[u];for(p=m=-1,w=N;w<k;w++)m=.5*Math.abs((R-b)*(n[w].y-U)-(R-n[w].x)*(x-U)),m>p&&(p=m,h=n[w],v=w);a[l++]=h,u=v}return a[l++]=n[c],a}function tX(n,e,t,i){let r=0,s=0,a,o,l,c,u,d,h,p,m,v;const b=[],x=e+t-1,w=n[e].x,A=n[x].x-w;for(a=e;a<e+t;++a){o=n[a],l=(o.x-w)/A*i,c=o.y;const C=l|0;if(C===u)c<m?(m=c,d=a):c>v&&(v=c,h=a),r=(s*r+o.x)/++s;else{const N=a-1;if(!Dn(d)&&!Dn(h)){const k=Math.min(d,h),R=Math.max(d,h);k!==p&&k!==N&&b.push({...n[k],x:r}),R!==p&&R!==N&&b.push({...n[R],x:r})}a>0&&N!==p&&b.push(n[N]),b.push(o),u=C,s=0,m=v=c,d=h=p=a}}return b}function SO(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function TI(n){n.data.datasets.forEach(e=>{SO(e)})}function nX(n,e){const t=e.length;let i=0,r;const{iScale:s}=n,{min:a,max:o,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=xs(nu(e,s.axis,a).lo,0,t-1)),c?r=xs(nu(e,s.axis,o).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var iX={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){TI(n);return}const i=n.width;n.data.datasets.forEach((r,s)=>{const{_data:a,indexAxis:o}=r,l=n.getDatasetMeta(s),c=a||r.data;if(rm([o,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=nX(l,c);const p=t.threshold||4*i;if(h<=p){SO(r);return}Dn(a)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let m;switch(t.algorithm){case"lttb":m=eX(c,d,h,i,t);break;case"min-max":m=tX(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=m})},destroy(n){TI(n)}};function rX(n,e,t){const i=n.segments,r=n.points,s=e.points,a=[];for(const o of i){let{start:l,end:c}=o;c=EE(l,c,r);const u=h_(t,r[l],r[c],o.loop);if(!e.segments){a.push({source:o,target:u,start:r[l],end:r[c]});continue}const d=nO(e,u);for(const h of d){const p=h_(t,s[h.start],s[h.end],h.loop),m=tO(o,r,p);for(const v of m)a.push({source:v,target:h,start:{[t]:AI(u,p,"start",Math.max)},end:{[t]:AI(u,p,"end",Math.min)}})}}return a}function h_(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=ro(r),s=ro(s)),{property:n,start:r,end:s}}function sX(n,e){const{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:a,end:o})=>{o=EE(a,o,r);const l=r[a],c=r[o];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:c.y}))}),s}function EE(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function AI(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function wO(n,e){let t=[],i=!1;return rr(n)?(i=!0,t=n):t=sX(n,e),t.length?new ru({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function LI(n){return n&&n.fill!==!1}function aX(n,e,t){let r=n[e].fill;const s=[e];let a;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Ir(r))return r;if(a=n[r],!a)return!1;if(a.visible)return r;s.push(r),r=a.fill}return!1}function oX(n,e,t){const i=dX(n);if(jn(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ir(r)&&Math.floor(r)===r?lX(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function lX(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function cX(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:jn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function uX(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:jn(n)?i=n.value:i=e.getBaseValue(),i}function dX(n){const e=n.options,t=e.fill;let i=xn(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function fX(n){const{scale:e,index:t,line:i}=n,r=[],s=i.segments,a=i.points,o=hX(e,t);o.push(wO({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)pX(r,a[u],o)}return new ru({points:r,options:{}})}function hX(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function pX(n,e,t){const i=[];for(let r=0;r<t.length;r++){const s=t[r],{first:a,last:o,point:l}=gX(s,e,"x");if(!(!l||a&&o)){if(a)i.unshift(l);else if(n.push(l),!o)break}}n.push(...i)}function gX(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const r=i[t],s=n.segments,a=n.points;let o=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=a[u.start][t],h=a[u.end][t];if(tu(r,d,h)){o=r===d,l=r===h;break}}return{first:o,last:l,point:i}}class _O{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:r,y:s,radius:a}=this;return t=t||{start:0,end:Gi},e.arc(r,s,a,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function mX(n){const{chart:e,fill:t,line:i}=n;if(Ir(t))return yX(e,t);if(t==="stack")return fX(n);if(t==="shape")return!0;const r=vX(n);return r instanceof _O?r:wO(r,i)}function yX(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function vX(n){return(n.scale||{}).getPointPositionForValue?bX(n):xX(n)}function xX(n){const{scale:e={},fill:t}=n,i=cX(t,e);if(Ir(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function bX(n){const{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,a=uX(t,e,s),o=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new _O({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(a)})}for(let l=0;l<r;++l)o.push(e.getPointPositionForValue(l,a));return o}function sS(n,e,t){const i=mX(e),{chart:r,index:s,line:a,scale:o,axis:l}=e,c=a.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:p=d}=u||{},m=r.getDatasetMeta(s),v=iO(r,m);i&&a.points.length&&(Jx(n,t),SX(n,{line:a,target:i,above:h,below:p,area:t,scale:o,axis:l,clip:v}),Zx(n))}function SX(n,e){const{line:t,target:i,above:r,below:s,area:a,scale:o,clip:l}=e,c=t._loop?"angle":e.axis;n.save(),c==="x"&&s!==r&&(CI(n,i,a.top),II(n,{line:t,target:i,color:r,scale:o,property:c,clip:l}),n.restore(),n.save(),CI(n,i,a.bottom)),II(n,{line:t,target:i,color:s,scale:o,property:c,clip:l}),n.restore()}function CI(n,e,t){const{segments:i,points:r}=e;let s=!0,a=!1;n.beginPath();for(const o of i){const{start:l,end:c}=o,u=r[l],d=r[EE(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),a=!!e.pathSegment(n,o,{move:a}),a?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function II(n,e){const{line:t,target:i,property:r,color:s,scale:a,clip:o}=e,l=rX(t,i,r);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:p=s}={}}=c,m=i!==!0;n.save(),n.fillStyle=p,wX(n,a,o,m&&h_(r,d,h)),n.beginPath();const v=!!t.pathSegment(n,c);let b;if(m){v?n.closePath():kI(n,i,h,r);const x=!!i.pathSegment(n,u,{move:v,reverse:!0});b=v&&x,b||kI(n,i,d,r)}n.closePath(),n.fill(b?"evenodd":"nonzero"),n.restore()}}function wX(n,e,t,i){const r=e.chart.chartArea,{property:s,start:a,end:o}=i||{};if(s==="x"||s==="y"){let l,c,u,d;s==="x"?(l=a,c=r.top,u=o,d=r.bottom):(l=r.left,c=a,u=r.right,d=o),n.beginPath(),t&&(l=Math.max(l,t.left),u=Math.min(u,t.right),c=Math.max(c,t.top),d=Math.min(d,t.bottom)),n.rect(l,c,u-l,d-c),n.clip()}}function kI(n,e,t,i){const r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var _X={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,r=[];let s,a,o,l;for(a=0;a<i;++a)s=n.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof ru&&(l={visible:n.isDatasetVisible(a),index:a,fill:oX(o,a,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,r.push(l);for(a=0;a<i;++a)l=r[a],!(!l||l.fill===!1)&&(l.fill=aX(r,a,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let a=r.length-1;a>=0;--a){const o=r[a].$filler;o&&(o.line.updateControlPoints(s,o.axis),i&&o.fill&&sS(n.ctx,o,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;LI(s)&&sS(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!LI(i)||t.drawTime!=="beforeDatasetDraw"||sS(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const RI=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},EX=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class PI extends wl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Fi(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=cs(i.font),s=r.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=RI(i,s);let c,u;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(a,s,o,l)+10):(u=this.maxHeight,c=this._fitCols(a,r,o,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+o;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((m,v)=>{const b=i+t/2+s.measureText(m.text).width;(v===0||c[c.length-1]+b+2*o>a)&&(d+=u,c[c.length-(v>0?0:1)]=0,p+=u,h++),l[v]={left:0,top:p,row:h,width:b,height:r},c[c.length-1]+=b+o}),d}_fitCols(e,t,i,r){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=a-e;let d=o,h=0,p=0,m=0,v=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:w,itemHeight:S}=TX(i,t,s,b,r);x>0&&p+S+2*o>u&&(d+=h+o,c.push({width:h,height:p}),m+=h+o,v++,h=p=0),l[x]={left:m,top:p,col:v,width:w,height:S},h=Math.max(h,w),p+=S+o}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,a=Np(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=Ks(i,this.left+r,this.right-this.lineWidths[o]);for(const c of t)o!==c.row&&(o=c.row,l=Ks(i,this.left+r,this.right-this.lineWidths[o])),c.top+=this.top+e+r,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+r}else{let o=0,l=Ks(i,this.top+e+r,this.bottom-this.columnSizes[o].height);for(const c of t)c.col!==o&&(o=c.col,l=Ks(i,this.top+e+r,this.bottom-this.columnSizes[o].height)),c.top=l,c.left+=this.left+r,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Jx(e,this),this._draw(),Zx(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:a}=e,o=sr.color,l=Np(e.rtl,this.left,this.width),c=cs(a.font),{padding:u}=a,d=c.size,h=d/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:m,boxHeight:v,itemHeight:b}=RI(a,d),x=function(N,k,R){if(isNaN(m)||m<=0||isNaN(v)||v<0)return;r.save();const U=xn(R.lineWidth,1);if(r.fillStyle=xn(R.fillStyle,o),r.lineCap=xn(R.lineCap,"butt"),r.lineDashOffset=xn(R.lineDashOffset,0),r.lineJoin=xn(R.lineJoin,"miter"),r.lineWidth=U,r.strokeStyle=xn(R.strokeStyle,o),r.setLineDash(xn(R.lineDash,[])),a.usePointStyle){const j={radius:v*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:U},D=l.xPlus(N,m/2),O=k+h;z3(r,j,D,O,a.pointStyleWidth&&m)}else{const j=k+Math.max((d-v)/2,0),D=l.leftForLtr(N,m),O=Jf(R.borderRadius);r.beginPath(),Object.values(O).some(Z=>Z!==0)?l0(r,{x:D,y:j,w:m,h:v,radius:O}):r.rect(D,j,m,v),r.fill(),U!==0&&r.stroke()}r.restore()},w=function(N,k,R){hh(r,R.text,N,k+b/2,c,{strikethrough:R.hidden,textAlign:l.textAlign(R.textAlign)})},S=this.isHorizontal(),A=this._computeTitleHeight();S?p={x:Ks(s,this.left+u,this.right-i[0]),y:this.top+u+A,line:0}:p={x:this.left+u,y:Ks(s,this.top+A+u,this.bottom-t[0].height),line:0},J3(this.ctx,e.textDirection);const C=b+u;this.legendItems.forEach((N,k)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const R=r.measureText(N.text).width,U=l.textAlign(N.textAlign||(N.textAlign=a.textAlign)),j=m+h+R;let D=p.x,O=p.y;l.setWidth(this.width),S?k>0&&D+j+u>this.right&&(O=p.y+=C,p.line++,D=p.x=Ks(s,this.left+u,this.right-i[p.line])):k>0&&O+C>this.bottom&&(D=p.x=D+t[p.line].width+u,p.line++,O=p.y=Ks(s,this.top+A+u,this.bottom-t[p.line].height));const Z=l.x(D);if(x(Z,O,N),D=GV(U,D+m+h,S?D+j:this.right,e.rtl),w(l.x(D),O,N),S)p.x+=j+u;else if(typeof N.text!="string"){const J=c.lineHeight;p.y+=EO(N,J)+u}else p.y+=C}),Z3(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=cs(t.font),r=ia(t.padding);if(!t.display)return;const s=Np(e.rtl,this.left,this.width),a=this.ctx,o=t.position,l=i.size/2,c=r.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Ks(e.align,d,this.right-h);else{const m=this.columnSizes.reduce((v,b)=>Math.max(v,b.height),0);u=c+Ks(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=Ks(o,d,d+h);a.textAlign=s.textAlign(gE(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=i.string,hh(a,t.text,p,u,i)}_computeTitleHeight(){const e=this.options.title,t=cs(e.font),i=ia(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(tu(e,this.left,this.right)&&tu(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],tu(e,r.left,r.left+r.width)&&tu(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!CX(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=EX(r,i);r&&!s&&Fi(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Fi(t.onHover,[e,i,this],this)}else i&&Fi(t.onClick,[e,i,this],this)}}function TX(n,e,t,i,r){const s=AX(i,n,e,t),a=LX(r,i,e.lineHeight);return{itemWidth:s,itemHeight:a}}function AX(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,a)=>s.length>a.length?s:a)),e+t.size/2+i.measureText(r).width}function LX(n,e,t){let i=n;return typeof e.text!="string"&&(i=EO(e,t)),i}function EO(n,e){const t=n.text?n.text.length:0;return e*t}function CX(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var TE={id:"legend",_element:PI,start(n,e,t){const i=n.legend=new PI({ctx:n.ctx,options:t,chart:n});ea.configure(n,i,t),ea.addBox(n,i)},stop(n){ea.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;ea.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=ia(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:a&&(o||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class AE extends wl{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=rr(i.text)?i.text.length:1;this._padding=ia(i.padding);const s=r*cs(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:r,right:s,options:a}=this,o=a.align;let l=0,c,u,d;return this.isHorizontal()?(u=Ks(o,i,s),d=t+e,c=s-i):(a.position==="left"?(u=i+e,d=Ks(o,r,t),l=Vi*-.5):(u=s-e,d=Ks(o,t,r),l=Vi*.5),c=r-t),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=cs(t.font),s=i.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:c}=this._drawArgs(s);hh(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:gE(t.align),textBaseline:"middle",translation:[a,o]})}}function IX(n,e){const t=new AE({ctx:n.ctx,options:e,chart:n});ea.configure(n,t,e),ea.addBox(n,t),n.titleBlock=t}var TO={id:"title",_element:AE,start(n,e,t){IX(n,t)},stop(n){const e=n.titleBlock;ea.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;ea.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fv=new WeakMap;var kX={id:"subtitle",start(n,e,t){const i=new AE({ctx:n.ctx,options:t,chart:n});ea.configure(n,i,t),ea.addBox(n,i),fv.set(n,i)},stop(n){ea.removeBox(n,fv.get(n)),fv.delete(n)},beforeUpdate(n,e,t){const i=fv.get(n);ea.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const om={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((o,l)=>o+l)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=n.length;s<a;++s){const l=n[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=s_(e,c);u<r&&(r=u,o=l)}}if(o){const l=o.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Yl(n,e){return e&&(rr(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Gc(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function RX(n,e){const{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:n,label:a,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function NI(n,e){const t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:a,boxHeight:o}=e,l=cs(e.bodyFont),c=cs(e.titleFont),u=cs(e.footerFont),d=s.length,h=r.length,p=i.length,m=ia(e.padding);let v=m.height,b=0,x=i.reduce((A,C)=>A+C.before.length+C.lines.length+C.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),x){const A=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;v+=p*A+(x-p)*l.lineHeight+(x-1)*e.bodySpacing}h&&(v+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let w=0;const S=function(A){b=Math.max(b,t.measureText(A).width+w)};return t.save(),t.font=c.string,vi(n.title,S),t.font=l.string,vi(n.beforeBody.concat(n.afterBody),S),w=e.displayColors?a+2+e.boxPadding:0,vi(i,A=>{vi(A.before,S),vi(A.lines,S),vi(A.after,S)}),w=0,t.font=u.string,vi(n.footer,S),t.restore(),b+=m.width,{width:b,height:v}}function PX(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function NX(n,e,t,i){const{x:r,width:s}=i,a=t.caretSize+t.caretPadding;if(n==="left"&&r+s+a>e.width||n==="right"&&r-s-a<0)return!0}function DX(n,e,t,i){const{x:r,width:s}=t,{width:a,chartArea:{left:o,right:l}}=n;let c="center";return i==="center"?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),NX(c,n,e,t)&&(c="center"),c}function DI(n,e,t){const i=t.yAlign||e.yAlign||PX(n,t);return{xAlign:t.xAlign||e.xAlign||DX(n,e,t,i),yAlign:i}}function OX(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function MX(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function OI(n,e,t,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=n,{xAlign:o,yAlign:l}=t,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=Jf(a);let m=OX(e,o);const v=MX(e,l,c);return l==="center"?o==="left"?m+=c:o==="right"&&(m-=c):o==="left"?m-=Math.max(u,h)+r:o==="right"&&(m+=Math.max(d,p)+r),{x:xs(m,0,i.width-e.width),y:xs(v,0,i.height-e.height)}}function hv(n,e,t){const i=ia(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function MI(n){return Yl([],Gc(n))}function FX(n,e,t){return qd(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function FI(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const AO={beforeTitle:Bc,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Bc,beforeBody:Bc,beforeLabel:Bc,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Dn(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Bc,afterBody:Bc,beforeFooter:Bc,footer:Bc,afterFooter:Bc};function ka(n,e,t,i){const r=n[e].call(t,i);return typeof r>"u"?AO[e].call(t,i):r}class p_ extends wl{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&t.options.animation&&i.animations,s=new rO(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=FX(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,r=ka(i,"beforeTitle",this,e),s=ka(i,"title",this,e),a=ka(i,"afterTitle",this,e);let o=[];return o=Yl(o,Gc(r)),o=Yl(o,Gc(s)),o=Yl(o,Gc(a)),o}getBeforeBody(e,t){return MI(ka(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,r=[];return vi(e,s=>{const a={before:[],lines:[],after:[]},o=FI(i,s);Yl(a.before,Gc(ka(o,"beforeLabel",this,s))),Yl(a.lines,ka(o,"label",this,s)),Yl(a.after,Gc(ka(o,"afterLabel",this,s))),r.push(a)}),r}getAfterBody(e,t){return MI(ka(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,r=ka(i,"beforeFooter",this,e),s=ka(i,"footer",this,e),a=ka(i,"afterFooter",this,e);let o=[];return o=Yl(o,Gc(r)),o=Yl(o,Gc(s)),o=Yl(o,Gc(a)),o}_createItems(e){const t=this._active,i=this.chart.data,r=[],s=[],a=[];let o=[],l,c;for(l=0,c=t.length;l<c;++l)o.push(RX(this.chart,t[l]));return e.filter&&(o=o.filter((u,d,h)=>e.filter(u,d,h,i))),e.itemSort&&(o=o.sort((u,d)=>e.itemSort(u,d,i))),vi(o,u=>{const d=FI(e.callbacks,u);r.push(ka(d,"labelColor",this,u)),s.push(ka(d,"labelPointStyle",this,u)),a.push(ka(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(e,t){const i=this.options.setContext(this.getContext()),r=this._active;let s,a=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const o=om[i.position].call(this,r,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const l=this._size=NI(this,i),c=Object.assign({},o,l),u=DI(this.chart,i,c),d=OI(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,r){const s=this.getCaretPosition(e,i,r);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,i){const{xAlign:r,yAlign:s}=this,{caretSize:a,cornerRadius:o}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=Jf(o),{x:h,y:p}=e,{width:m,height:v}=t;let b,x,w,S,A,C;return s==="center"?(A=p+v/2,r==="left"?(b=h,x=b-a,S=A+a,C=A-a):(b=h+m,x=b+a,S=A-a,C=A+a),w=b):(r==="left"?x=h+Math.max(l,u)+a:r==="right"?x=h+m-Math.max(c,d)-a:x=this.caretX,s==="top"?(S=p,A=S-a,b=x-a,w=x+a):(S=p+v,A=S+a,b=x+a,w=x-a),C=S),{x1:b,x2:x,x3:w,y1:S,y2:A,y3:C}}drawTitle(e,t,i){const r=this.title,s=r.length;let a,o,l;if(s){const c=Np(i.rtl,this.x,this.width);for(e.x=hv(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",a=cs(i.titleFont),o=i.titleSpacing,t.fillStyle=i.titleColor,t.font=a.string,l=0;l<s;++l)t.fillText(r[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===s&&(e.y+=i.titleMarginBottom-o)}}_drawColorBox(e,t,i,r,s){const a=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=cs(s.bodyFont),d=hv(this,"left",s),h=r.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,m=t.y+p;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},b=r.leftForLtr(h,c)+c/2,x=m+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,o_(e,v,b,x),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,o_(e,v,b,x)}else{e.lineWidth=jn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const v=r.leftForLtr(h,c),b=r.leftForLtr(r.xPlus(h,1),c-2),x=Jf(a.borderRadius);Object.values(x).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,l0(e,{x:v,y:m,w:c,h:l,radius:x}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),l0(e,{x:b,y:m+1,w:c-2,h:l-2,radius:x}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,m,c,l),e.strokeRect(v,m,c,l),e.fillStyle=a.backgroundColor,e.fillRect(b,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:r}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=cs(i.bodyFont);let h=d.lineHeight,p=0;const m=Np(i.rtl,this.x,this.width),v=function(R){t.fillText(R,m.x(e.x+p),e.y+h/2),e.y+=h+s},b=m.textAlign(a);let x,w,S,A,C,N,k;for(t.textAlign=a,t.textBaseline="middle",t.font=d.string,e.x=hv(this,b,i),t.fillStyle=i.bodyColor,vi(this.beforeBody,v),p=o&&b!=="right"?a==="center"?c/2+u:c+2+u:0,A=0,N=r.length;A<N;++A){for(x=r[A],w=this.labelTextColors[A],t.fillStyle=w,vi(x.before,v),S=x.lines,o&&S.length&&(this._drawColorBox(t,e,A,m,i),h=Math.max(d.lineHeight,l)),C=0,k=S.length;C<k;++C)v(S[C]),h=d.lineHeight;vi(x.after,v)}p=0,h=d.lineHeight,vi(this.afterBody,v),e.y-=s}drawFooter(e,t,i){const r=this.footer,s=r.length;let a,o;if(s){const l=Np(i.rtl,this.x,this.width);for(e.x=hv(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",a=cs(i.footerFont),t.fillStyle=i.footerColor,t.font=a.string,o=0;o<s;++o)t.fillText(r[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+i.footerSpacing}}drawBackground(e,t,i,r){const{xAlign:s,yAlign:a}=this,{x:o,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:m}=Jf(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+d,l),a==="top"&&this.drawCaret(e,t,i,r),t.lineTo(o+c-h,l),t.quadraticCurveTo(o+c,l,o+c,l+h),a==="center"&&s==="right"&&this.drawCaret(e,t,i,r),t.lineTo(o+c,l+u-m),t.quadraticCurveTo(o+c,l+u,o+c-m,l+u),a==="bottom"&&this.drawCaret(e,t,i,r),t.lineTo(o+p,l+u),t.quadraticCurveTo(o,l+u,o,l+u-p),a==="center"&&s==="left"&&this.drawCaret(e,t,i,r),t.lineTo(o,l+d),t.quadraticCurveTo(o,l,o+d,l),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const a=om[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=NI(this,e),l=Object.assign({},a,this._size),c=DI(t,e,l),u=OI(e,l,c,t);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=ia(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,t),J3(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),Z3(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,r=e.map(({datasetIndex:o,index:l})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[l],index:l}}),s=!Y1(i,r),a=this._positionChanged(r,t);(s||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,i),o=this._positionChanged(a,e),l=t||!Y1(a,s)||o;return l&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:i,caretY:r,options:s}=this,a=om[s.position].call(this,e,t);return a!==!1&&(i!==a.x||r!==a.y)}}pt(p_,"positioners",om);var LE={id:"tooltip",_element:p_,positioners:om,afterInit(n,e,t){t&&(n.tooltip=new p_({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:AO},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},jX=Object.freeze({__proto__:null,Colors:ZK,Decimation:iX,Filler:_X,Legend:TE,SubTitle:kX,Title:TO,Tooltip:LE});const BX=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function UX(n,e,t,i){const r=n.indexOf(e);if(r===-1)return BX(n,e,t,i);const s=n.lastIndexOf(e);return r!==s?t:r}const $X=(n,e)=>n===null?null:xs(Math.round(n),0,e);function jI(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class u0 extends xh{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:r,label:s}of t)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Dn(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:UX(i,e,xn(t,e),this._addedLabels),$X(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){return jI.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}pt(u0,"id","category"),pt(u0,"defaults",{ticks:{callback:jI}});function HX(n,e){const t=[],{bounds:r,step:s,min:a,max:o,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,p=s||1,m=u-1,{min:v,max:b}=e,x=!Dn(a),w=!Dn(o),S=!Dn(c),A=(b-v)/(d+1);let C=NC((b-v)/m/p)*p,N,k,R,U;if(C<1e-14&&!x&&!w)return[{value:v},{value:b}];U=Math.ceil(b/C)-Math.floor(v/C),U>m&&(C=NC(U*C/m/p)*p),Dn(l)||(N=Math.pow(10,l),C=Math.ceil(C*N)/N),r==="ticks"?(k=Math.floor(v/C)*C,R=Math.ceil(b/C)*C):(k=v,R=b),x&&w&&s&&jV((o-a)/s,C/1e3)?(U=Math.round(Math.min((o-a)/C,u)),C=(o-a)/U,k=a,R=o):S?(k=x?a:k,R=w?o:R,U=c-1,C=(R-k)/U):(U=(R-k)/C,Sm(U,Math.round(U),C/1e3)?U=Math.round(U):U=Math.ceil(U));const j=Math.max(DC(C),DC(k));N=Math.pow(10,Dn(l)?j:l),k=Math.round(k*N)/N,R=Math.round(R*N)/N;let D=0;for(x&&(h&&k!==a?(t.push({value:a}),k<a&&D++,Sm(Math.round((k+D*C)*N)/N,a,BI(a,A,n))&&D++):k<a&&D++);D<U;++D){const O=Math.round((k+D*C)*N)/N;if(w&&O>o)break;t.push({value:O})}return w&&h&&R!==o?t.length&&Sm(t[t.length-1].value,o,BI(o,A,n))?t[t.length-1].value=o:t.push({value:o}):(!w||R===o)&&t.push({value:R}),t}function BI(n,e,{horizontal:t,minRotation:i}){const r=ml(i),s=(t?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+n).length;return Math.min(e/s,a)}class ex extends xh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Dn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const a=l=>r=t?r:l,o=l=>s=i?s:l;if(e){const l=uc(r),c=uc(s);l<0&&c<0?o(0):l>0&&c>0&&a(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);o(s+l),e||a(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,a=HX(r,s);return e.bounds==="ticks"&&O3(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return W0(e,this.chart.options.locale,this.options.ticks.format)}}class d0 extends ex{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ir(e)?e:0,this.max=Ir(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=ml(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}pt(d0,"id","linear"),pt(d0,"defaults",{ticks:{callback:Qx.formatters.numeric}});const f0=n=>Math.floor(vd(n)),Tf=(n,e)=>Math.pow(10,f0(n)+e);function UI(n){return n/Math.pow(10,f0(n))===1}function $I(n,e,t){const i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function WX(n,e){const t=e-n;let i=f0(t);for(;$I(n,e,i)>10;)i++;for(;$I(n,e,i)<10;)i--;return Math.min(i,f0(n))}function zX(n,{min:e,max:t}){e=no(n.min,e);const i=[],r=f0(e);let s=WX(e,t),a=s<0?Math.pow(10,Math.abs(s)):1;const o=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*a)/a,u=Math.floor((e-l)/o/10)*o*10;let d=Math.floor((c-u)/Math.pow(10,s)),h=no(n.min,Math.round((l+u+d*Math.pow(10,s))*a)/a);for(;h<t;)i.push({value:h,major:UI(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,a=s>=0?1:a),h=Math.round((l+u+d*Math.pow(10,s))*a)/a;const p=no(n.max,h);return i.push({value:p,major:UI(p),significand:d}),i}class g_ extends xh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=ex.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Ir(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ir(e)?Math.max(0,e):null,this.max=Ir(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ir(this._userMin)&&(this.min=e===Tf(this.min,0)?Tf(this.min,-1):Tf(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,r=this.max;const s=o=>i=e?i:o,a=o=>r=t?r:o;i===r&&(i<=0?(s(1),a(10)):(s(Tf(i,-1)),a(Tf(r,1)))),i<=0&&s(Tf(r,-1)),r<=0&&a(Tf(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=zX(t,this);return e.bounds==="ticks"&&O3(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":W0(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=vd(e),this._valueRange=vd(this.max)-vd(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(vd(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}pt(g_,"id","logarithmic"),pt(g_,"defaults",{ticks:{callback:Qx.formatters.logarithmic,major:{enabled:!0}}});function m_(n){const e=n.ticks;if(e.display&&n.display){const t=ia(e.backdropPadding);return xn(e.font&&e.font.size,sr.font.size)+t.height}return 0}function GX(n,e,t){return t=rr(t)?t:[t],{w:tY(n,e.string,t),h:t.length*e.lineHeight}}function HI(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function VX(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,a=n.options.pointLabels,o=a.centerPointLabels?Vi/s:0;for(let l=0;l<s;l++){const c=a.setContext(n.getPointLabelContext(l));r[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+r[l],o),d=cs(c.font),h=GX(n.ctx,d,n._pointLabels[l]);i[l]=h;const p=ro(n.getIndexAngle(l)+o),m=Math.round(hE(p)),v=HI(m,u.x,h.w,0,180),b=HI(m,u.y,h.h,90,270);YX(t,e,p,v,b)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=XX(n,i,r)}function YX(n,e,t,i,r){const s=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));let o=0,l=0;i.start<e.l?(o=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-o)):i.end>e.r&&(o=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+o)),r.start<e.t?(l=(e.t-r.start)/a,n.t=Math.min(n.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/a,n.b=Math.max(n.b,e.b+l))}function qX(n,e,t){const i=n.drawingArea,{extra:r,additionalAngle:s,padding:a,size:o}=t,l=n.getPointPosition(e,i+r+a,s),c=Math.round(hE(ro(l.angle+Hr))),u=ZX(l.y,o.h,c),d=QX(c),h=JX(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function KX(n,e){if(!e)return!0;const{left:t,top:i,right:r,bottom:s}=n;return!(iu({x:t,y:i},e)||iu({x:t,y:s},e)||iu({x:r,y:i},e)||iu({x:r,y:s},e))}function XX(n,e,t){const i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:m_(s)/2,additionalAngle:a?Vi/r:0};let c;for(let u=0;u<r;u++){l.padding=t[u],l.size=e[u];const d=qX(n,u,l);i.push(d),o==="auto"&&(d.visible=KX(d,c),d.visible&&(c=d))}return i}function QX(n){return n===0||n===180?"center":n<180?"left":"right"}function JX(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function ZX(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function eQ(n,e,t){const{left:i,top:r,right:s,bottom:a}=t,{backdropColor:o}=e;if(!Dn(o)){const l=Jf(e.borderRadius),c=ia(e.backdropPadding);n.fillStyle=o;const u=i-c.left,d=r-c.top,h=s-i+c.width,p=a-r+c.height;Object.values(l).some(m=>m!==0)?(n.beginPath(),l0(n,{x:u,y:d,w:h,h:p,radius:l}),n.fill()):n.fillRect(u,d,h,p)}}function tQ(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){const s=n._pointLabelItems[r];if(!s.visible)continue;const a=i.setContext(n.getPointLabelContext(r));eQ(t,a,s);const o=cs(a.font),{x:l,y:c,textAlign:u}=s;hh(t,n._pointLabels[r],l,c+o.lineHeight/2,o,{color:a.color,textAlign:u,textBaseline:"middle"})}}function LO(n,e,t,i){const{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,Gi);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let a=1;a<i;a++)s=n.getPointPosition(a,e),r.lineTo(s.x,s.y)}}function nQ(n,e,t,i,r){const s=n.ctx,a=e.circular,{color:o,lineWidth:l}=e;!a&&!i||!o||!l||t<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),LO(n,t,a,i),s.closePath(),s.stroke(),s.restore())}function iQ(n,e,t){return qd(n,{label:t,index:e,type:"pointLabel"})}class lm extends ex{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ia(m_(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Ir(e)&&!isNaN(e)?e:0,this.max=Ir(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/m_(this.options))}generateTickLabels(e){ex.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const r=Fi(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?VX(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){const t=Gi/(this._pointLabels.length||1),i=this.options.startAngle||0;return ro(e*t+ml(i))}getDistanceFromCenterForValue(e){if(Dn(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Dn(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return iQ(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const r=this.getIndexAngle(e)-Hr+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),LO(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,a=this._pointLabels.length;let o,l,c;if(t.pointLabels.display&&tQ(this,a),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),p=r.setContext(h),m=s.setContext(h);nQ(this,p,l,a,m)}}),i.display){for(e.save(),o=a-1;o>=0;o--){const u=i.setContext(this.getPointLabelContext(o)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=cs(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,a=e.measureText(o.label).width,e.fillStyle=c.backdropColor;const d=ia(c.backdropPadding);e.fillRect(-a/2-d.left,-s-u.size/2-d.top,a+d.width,u.size+d.height)}hh(e,o.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}pt(lm,"id","radialLinear"),pt(lm,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Qx.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),pt(lm,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),pt(lm,"descriptors",{angleLines:{_fallback:"grid"}});const nb={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Oa=Object.keys(nb);function WI(n,e){return n-e}function zI(n,e){if(Dn(e))return null;const t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts;let a=e;return typeof i=="function"&&(a=i(a)),Ir(a)||(a=typeof i=="string"?t.parse(a,i):t.parse(a)),a===null?null:(r&&(a=r==="week"&&(Kp(s)||s===!0)?t.startOf(a,"isoWeek",s):t.startOf(a,r)),+a)}function GI(n,e,t,i){const r=Oa.length;for(let s=Oa.indexOf(n);s<r-1;++s){const a=nb[Oa[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=i)return Oa[s]}return Oa[r-1]}function rQ(n,e,t,i,r){for(let s=Oa.length-1;s>=Oa.indexOf(t);s--){const a=Oa[s];if(nb[a].common&&n._adapter.diff(r,i,a)>=e-1)return a}return Oa[t?Oa.indexOf(t):0]}function sQ(n){for(let e=Oa.indexOf(n)+1,t=Oa.length;e<t;++e)if(nb[Oa[e]].common)return Oa[e]}function VI(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:r}=pE(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function aQ(n,e,t,i){const r=n._adapter,s=+r.startOf(e[0].value,i),a=e[e.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=t[o],l>=0&&(e[l].major=!0);return e}function YI(n,e,t){const i=[],r={},s=e.length;let a,o;for(a=0;a<s;++a)o=e[a],r[o]=a,i.push({value:o,major:!1});return s===0||!t?i:aQ(n,i,r,t)}class h0 extends xh{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),r=this._adapter=new vq._date(e.adapters.date);r.init(t),bm(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:zI(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!o&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Ir(r)&&!isNaN(r)?r:+t.startOf(Date.now(),i),s=Ir(s)&&!isNaN(s)?s:+t.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,a=this.max,o=HV(r,s,a);return this._unit=t.unit||(i.autoSkip?GI(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):rQ(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:sQ(this._unit),this.initOffsets(r),e.reverse&&o.reverse(),YI(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;t=xs(t,0,a),i=xs(i,0,a),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,r=this.options,s=r.time,a=s.unit||GI(s.minUnit,t,i,this._getLabelCapacity(t)),o=xn(r.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,c=Kp(l)||l===!0,u={};let d=t,h,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":a),e.diff(i,t,a)>1e5*o)throw new Error(t+" and "+i+" are too far apart with stepSize of "+o+" "+a);const m=r.ticks.source==="data"&&this.getDataTimestamps();for(h=d,p=0;h<i;h=+e.add(h,o,a),p++)VI(u,h,m);return(h===i||r.bounds==="ticks"||p===1)&&VI(u,h,m),Object.keys(u).sort(WI).map(v=>+v)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const r=this.options.time.displayFormats,s=this._unit,a=t||r[s];return this._adapter.format(e,a)}_tickFormatFunction(e,t,i,r){const s=this.options,a=s.ticks.callback;if(a)return Fi(a,[e,t,i],this);const o=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&o[l],d=c&&o[c],h=i[t],p=c&&d&&h&&h.major;return this._adapter.format(e,r||(p?d:u))}generateTickLabels(e){let t,i,r;for(t=0,i=e.length;t<i;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,r=ml(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:i*s+o*a,h:i*a+o*s}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,r=i[t.unit]||i.millisecond,s=this._tickFormatFunction(e,0,YI(this,[e],this._majorUnit),r),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,i=r.length;t<i;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const r=this.getLabels();for(t=0,i=r.length;t<i;++t)e.push(zI(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return j3(e.sort(WI))}}pt(h0,"id","time"),pt(h0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function pv(n,e,t){let i=0,r=n.length-1,s,a,o,l;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=nu(n,"pos",e)),{pos:s,time:o}=n[i],{pos:a,time:l}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=nu(n,"time",e)),{time:s,pos:o}=n[i],{time:a,pos:l}=n[r]);const c=a-s;return c?o+(l-o)*(e-s)/c:o}class y_ extends h0{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=pv(t,this.min),this._tableRange=pv(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,r=[],s=[];let a,o,l,c,u;for(a=0,o=e.length;a<o;++a)c=e[a],c>=t&&c<=i&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(a=0,o=r.length;a<o;++a)u=r[a+1],l=r[a-1],c=r[a],Math.round((u+l)/2)!==c&&s.push({time:c,pos:a/(o-1)});return s}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(pv(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return pv(this._table,i*this._tableRange+this._minPos,!0)}}pt(y_,"id","timeseries"),pt(y_,"defaults",h0.defaults);var oQ=Object.freeze({__proto__:null,CategoryScale:u0,LinearScale:d0,LogarithmicScale:g_,RadialLinearScale:lm,TimeScale:h0,TimeSeriesScale:y_});const lQ=[yq,VK,jX,oQ],CO="label";function qI(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function cQ(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function IO(n,e){n.labels=e}function kO(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:CO;const i=[];n.datasets=e.map(r=>{const s=n.datasets.find(a=>a[t]===r[t]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function uQ(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:CO;const t={labels:[],datasets:[]};return IO(t,n.labels),kO(t,n.datasets,e),t}function dQ(n,e){const{height:t=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:a,data:o,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=n,p=B.useRef(null),m=B.useRef(null),v=()=>{p.current&&(m.current=new lg(p.current,{type:a,data:uQ(o,s),options:l&&{...l},plugins:c}),qI(e,m.current))},b=()=>{qI(e,null),m.current&&(m.current.destroy(),m.current=null)};return B.useEffect(()=>{!r&&m.current&&l&&cQ(m.current,l)},[r,l]),B.useEffect(()=>{!r&&m.current&&IO(m.current.config.data,o.labels)},[r,o.labels]),B.useEffect(()=>{!r&&m.current&&o.datasets&&kO(m.current.config.data,o.datasets,s)},[r,o.datasets]),B.useEffect(()=>{m.current&&(r?(b(),setTimeout(v)):m.current.update(d))},[r,l,o.labels,o.datasets,d]),B.useEffect(()=>{m.current&&(b(),setTimeout(v))},[a]),B.useEffect(()=>(v(),()=>b()),[]),gl.createElement("canvas",{ref:p,role:"img",height:t,width:i,...h},u)}const fQ=B.forwardRef(dQ);function RO(n,e){return lg.register(e),B.forwardRef((t,i)=>gl.createElement(fQ,{...t,ref:i,type:n}))}const hQ=RO("bar",Em),pQ=RO("scatter",Am);lg.register(u0,d0,Cm,TO,LE,TE);function Af({keys:n,values:e}){const t={labels:n,datasets:[{data:e,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]},i={responsive:!0,scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}};return _.jsx(hQ,{data:t,options:i})}lg.register(u0,d0,Lm,ru,LE,TE);function gQ({dataPoints:n}){const e=["02 PM","03 PM","04 PM","05 PM","06 PM","07 PM","08 PM","09 PM"],t=n.reduce((o,l)=>(o[l.day]||(o[l.day]=[]),o[l.day].push({x:l.hour,y:l.avg}),o),{});Object.keys(t).forEach(o=>{t[o].sort((l,c)=>e.indexOf(l.x)-e.indexOf(c.x))});const i=["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 159, 64, 0.7)","rgba(201, 203, 207, 0.7)"],s={labels:e,datasets:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((o,l)=>({label:o,data:t[o]||[],backgroundColor:i[l%i.length],pointRadius:6,pointHoverRadius:8}))},a={responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"category",title:{display:!0,text:"Hora"},ticks:{padding:10}},y:{beginAtZero:!0,title:{display:!0,text:"Promedio"},ticks:{callback:o=>o.toFixed(2)}}},plugins:{legend:{display:!0}}};return _.jsx("div",{style:{width:"100%",height:"500px"},children:_.jsx(pQ,{data:s,options:a})})}const mQ="modulepreload",yQ=function(n){return"/"+n},KI={},v_=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=yQ(l),l in KI)return;KI[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":mQ,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function bi(n){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bi(n)}var Zs=Uint8Array,co=Uint16Array,CE=Int32Array,ib=new Zs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rb=new Zs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),x_=new Zs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),PO=function(n,e){for(var t=new co(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new CE(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return{b:t,r}},NO=PO(ib,2),DO=NO.b,b_=NO.r;DO[28]=258,b_[258]=28;var OO=PO(rb,0),vQ=OO.b,XI=OO.r,S_=new co(32768);for(var Wi=0;Wi<32768;++Wi){var Qu=(Wi&43690)>>1|(Wi&21845)<<1;Qu=(Qu&52428)>>2|(Qu&13107)<<2,Qu=(Qu&61680)>>4|(Qu&3855)<<4,S_[Wi]=((Qu&65280)>>8|(Qu&255)<<8)>>1}var dc=function(n,e,t){for(var i=n.length,r=0,s=new co(e);r<i;++r)n[r]&&++s[n[r]-1];var a=new co(e);for(r=1;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(t){o=new co(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],d=a[n[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[S_[d]>>l]=c}else for(o=new co(i),r=0;r<i;++r)n[r]&&(o[r]=S_[a[n[r]-1]++]>>15-n[r]);return o},Bd=new Zs(288);for(var Wi=0;Wi<144;++Wi)Bd[Wi]=8;for(var Wi=144;Wi<256;++Wi)Bd[Wi]=9;for(var Wi=256;Wi<280;++Wi)Bd[Wi]=7;for(var Wi=280;Wi<288;++Wi)Bd[Wi]=8;var p0=new Zs(32);for(var Wi=0;Wi<32;++Wi)p0[Wi]=5;var xQ=dc(Bd,9,0),bQ=dc(Bd,9,1),SQ=dc(p0,5,0),wQ=dc(p0,5,1),aS=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ol=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},oS=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},IE=function(n){return(n+7)/8|0},MO=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Zs(n.subarray(e,t))},_Q=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],dl=function(n,e,t){var i=new Error(e||_Q[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,dl),!t)throw i;return i},EQ=function(n,e,t,i){var r=n.length,s=0;if(!r||e.f&&!e.l)return t||new Zs(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new Zs(r*3));var c=function(ze){var He=t.length;if(ze>He){var rt=new Zs(Math.max(He*2,ze));rt.set(t),t=rt}},u=e.f||0,d=e.p||0,h=e.b||0,p=e.l,m=e.d,v=e.m,b=e.n,x=r*8;do{if(!p){u=ol(n,d,1);var w=ol(n,d+1,3);if(d+=3,w)if(w==1)p=bQ,m=wQ,v=9,b=5;else if(w==2){var N=ol(n,d,31)+257,k=ol(n,d+10,15)+4,R=N+ol(n,d+5,31)+1;d+=14;for(var U=new Zs(R),j=new Zs(19),D=0;D<k;++D)j[x_[D]]=ol(n,d+D*3,7);d+=k*3;for(var O=aS(j),Z=(1<<O)-1,J=dc(j,O,1),D=0;D<R;){var le=J[ol(n,d,Z)];d+=le&15;var S=le>>4;if(S<16)U[D++]=S;else{var H=0,V=0;for(S==16?(V=3+ol(n,d,3),d+=2,H=U[D-1]):S==17?(V=3+ol(n,d,7),d+=3):S==18&&(V=11+ol(n,d,127),d+=7);V--;)U[D++]=H}}var z=U.subarray(0,N),W=U.subarray(N);v=aS(z),b=aS(W),p=dc(z,v,1),m=dc(W,b,1)}else dl(1);else{var S=IE(d)+4,A=n[S-4]|n[S-3]<<8,C=S+A;if(C>r){l&&dl(0);break}o&&c(h+A),t.set(n.subarray(S,C),h),e.b=h+=A,e.p=d=C*8,e.f=u;continue}if(d>x){l&&dl(0);break}}o&&c(h+131072);for(var te=(1<<v)-1,fe=(1<<b)-1,F=d;;F=d){var H=p[oS(n,d)&te],K=H>>4;if(d+=H&15,d>x){l&&dl(0);break}if(H||dl(2),K<256)t[h++]=K;else if(K==256){F=d,p=null;break}else{var ee=K-254;if(K>264){var D=K-257,ae=ib[D];ee=ol(n,d,(1<<ae)-1)+DO[D],d+=ae}var ce=m[oS(n,d)&fe],ye=ce>>4;ce||dl(3),d+=ce&15;var W=vQ[ye];if(ye>3){var ae=rb[ye];W+=oS(n,d)&(1<<ae)-1,d+=ae}if(d>x){l&&dl(0);break}o&&c(h+131072);var be=h+ee;if(h<W){var Te=s-W,Xe=Math.min(W,be);for(Te+h<0&&dl(3);h<Xe;++h)t[h]=i[Te+h]}for(;h<be;++h)t[h]=t[h-W]}}e.l=p,e.p=F,e.b=h,e.f=u,p&&(u=1,e.m=v,e.d=m,e.n=b)}while(!u);return h!=t.length&&a?MO(t,0,h):t.subarray(0,h)},Uc=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},Vg=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},lS=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,s=t.slice();if(!r)return{t:jO,l:0};if(r==1){var a=new Zs(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(C,N){return C.f-N.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=r-1;)o=t[t[c].f<t[d].f?c++:d++],l=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=s[0].s,i=1;i<r;++i)s[i].s>h&&(h=s[i].s);var p=new co(h+1),m=w_(t[u-1],p,0);if(m>e){var i=0,v=0,b=m-e,x=1<<b;for(s.sort(function(N,k){return p[k.s]-p[N.s]||N.f-k.f});i<r;++i){var w=s[i].s;if(p[w]>e)v+=x-(1<<m-p[w]),p[w]=e;else break}for(v>>=b;v>0;){var S=s[i].s;p[S]<e?v-=1<<e-p[S]++-1:++i}for(;i>=0&&v;--i){var A=s[i].s;p[A]==e&&(--p[A],++v)}m=e}return{t:new Zs(p),l:m}},w_=function(n,e,t){return n.s==-1?Math.max(w_(n.l,e,t+1),w_(n.r,e,t+1)):e[n.s]=t},QI=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new co(++e),i=0,r=n[0],s=1,a=function(l){t[i++]=l},o=1;o<=e;++o)if(n[o]==r&&o!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=n[o]}return{c:t.subarray(0,i),n:e}},Yg=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},FO=function(n,e,t){var i=t.length,r=IE(e+2);n[r]=i&255,n[r+1]=i>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=t[s];return(r+4+i)*8},JI=function(n,e,t,i,r,s,a,o,l,c,u){Uc(e,u++,t),++r[256];for(var d=lS(r,15),h=d.t,p=d.l,m=lS(s,15),v=m.t,b=m.l,x=QI(h),w=x.c,S=x.n,A=QI(v),C=A.c,N=A.n,k=new co(19),R=0;R<w.length;++R)++k[w[R]&31];for(var R=0;R<C.length;++R)++k[C[R]&31];for(var U=lS(k,7),j=U.t,D=U.l,O=19;O>4&&!j[x_[O-1]];--O);var Z=c+5<<3,J=Yg(r,Bd)+Yg(s,p0)+a,le=Yg(r,h)+Yg(s,v)+a+14+3*O+Yg(k,j)+2*k[16]+3*k[17]+7*k[18];if(l>=0&&Z<=J&&Z<=le)return FO(e,u,n.subarray(l,l+c));var H,V,z,W;if(Uc(e,u,1+(le<J)),u+=2,le<J){H=dc(h,p,0),V=h,z=dc(v,b,0),W=v;var te=dc(j,D,0);Uc(e,u,S-257),Uc(e,u+5,N-1),Uc(e,u+10,O-4),u+=14;for(var R=0;R<O;++R)Uc(e,u+3*R,j[x_[R]]);u+=3*O;for(var fe=[w,C],F=0;F<2;++F)for(var K=fe[F],R=0;R<K.length;++R){var ee=K[R]&31;Uc(e,u,te[ee]),u+=j[ee],ee>15&&(Uc(e,u,K[R]>>5&127),u+=K[R]>>12)}}else H=xQ,V=Bd,z=SQ,W=p0;for(var R=0;R<o;++R){var ae=i[R];if(ae>255){var ee=ae>>18&31;Vg(e,u,H[ee+257]),u+=V[ee+257],ee>7&&(Uc(e,u,ae>>23&31),u+=ib[ee]);var ce=ae&31;Vg(e,u,z[ce]),u+=W[ce],ce>3&&(Vg(e,u,ae>>5&8191),u+=rb[ce])}else Vg(e,u,H[ae]),u+=V[ae]}return Vg(e,u,H[256]),u+V[256]},TQ=new CE([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),jO=new Zs(0),AQ=function(n,e,t,i,r,s){var a=s.z||n.length,o=new Zs(i+a+5*(1+Math.ceil(a/7e3))+r),l=o.subarray(i,o.length-r),c=s.l,u=(s.r||0)&7;if(e){u&&(l[0]=s.r>>3);for(var d=TQ[e-1],h=d>>13,p=d&8191,m=(1<<t)-1,v=s.p||new co(32768),b=s.h||new co(m+1),x=Math.ceil(t/3),w=2*x,S=function(ft){return(n[ft]^n[ft+1]<<x^n[ft+2]<<w)&m},A=new CE(25e3),C=new co(288),N=new co(32),k=0,R=0,U=s.i||0,j=0,D=s.w||0,O=0;U+2<a;++U){var Z=S(U),J=U&32767,le=b[Z];if(v[J]=le,b[Z]=J,D<=U){var H=a-U;if((k>7e3||j>24576)&&(H>423||!c)){u=JI(n,l,0,A,C,N,R,j,O,U-O,u),j=k=R=0,O=U;for(var V=0;V<286;++V)C[V]=0;for(var V=0;V<30;++V)N[V]=0}var z=2,W=0,te=p,fe=J-le&32767;if(H>2&&Z==S(U-fe))for(var F=Math.min(h,H)-1,K=Math.min(32767,U),ee=Math.min(258,H);fe<=K&&--te&&J!=le;){if(n[U+z]==n[U+z-fe]){for(var ae=0;ae<ee&&n[U+ae]==n[U+ae-fe];++ae);if(ae>z){if(z=ae,W=fe,ae>F)break;for(var ce=Math.min(fe,ae-2),ye=0,V=0;V<ce;++V){var be=U-fe+V&32767,Te=v[be],Xe=be-Te&32767;Xe>ye&&(ye=Xe,le=be)}}}J=le,le=v[J],fe+=J-le&32767}if(W){A[j++]=268435456|b_[z]<<18|XI[W];var ze=b_[z]&31,He=XI[W]&31;R+=ib[ze]+rb[He],++C[257+ze],++N[He],D=U+z,++k}else A[j++]=n[U],++C[n[U]]}}for(U=Math.max(U,D);U<a;++U)A[j++]=n[U],++C[n[U]];u=JI(n,l,c,A,C,N,R,j,O,U-O,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=b,s.p=v,s.i=U,s.w=D)}else{for(var U=s.w||0;U<a+c;U+=65535){var rt=U+65535;rt>=a&&(l[u/8|0]=c,rt=a),u=FO(l,u+1,n.subarray(U,rt))}s.i=a}return MO(o,0,i+IE(u)+r)},BO=function(){var n=1,e=0;return{p:function(t){for(var i=n,r=e,s=t.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)r+=i+=t[a];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,e=r},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},LQ=function(n,e,t,i,r){if(!r&&(r={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Zs(s.length+n.length);a.set(s),a.set(n,s.length),n=a,r.w=s.length}return AQ(n,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,r)},UO=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},CQ=function(n,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=i<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var r=BO();r.p(e.dictionary),UO(n,2,r.d())}},IQ=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&dl(6,"invalid zlib data"),(n[1]>>5&1)==1&&dl(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function __(n,e){e||(e={});var t=BO();t.p(n);var i=LQ(n,e,e.dictionary?6:2,4);return CQ(i,e),UO(i,i.length-4,t.d()),i}function kQ(n,e){return EQ(n.subarray(IQ(n),-4),{i:2},e,e)}var RQ=typeof TextDecoder<"u"&&new TextDecoder,PQ=0;try{RQ.decode(jO,{stream:!0}),PQ=1}catch{}var Zt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function cS(){Zt.console&&typeof Zt.console.log=="function"&&Zt.console.log.apply(Zt.console,arguments)}var Ri={log:cS,warn:function(n){Zt.console&&(typeof Zt.console.warn=="function"?Zt.console.warn.apply(Zt.console,arguments):cS.call(null,arguments))},error:function(n){Zt.console&&(typeof Zt.console.error=="function"?Zt.console.error.apply(Zt.console,arguments):cS(n))}};function uS(n,e,t){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){Of(i.response,e,t)},i.onerror=function(){Ri.error("could not download file")},i.send()}function ZI(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function gv(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Im,E_,Of=Zt.saveAs||((typeof window>"u"?"undefined":bi(window))!=="object"||window!==Zt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var i=Zt.URL||Zt.webkitURL,r=document.createElement("a");e=e||n.name||"download",r.download=e,r.rel="noopener",typeof n=="string"?(r.href=n,r.origin!==location.origin?ZI(r.href)?uS(n,e,t):gv(r,r.target="_blank"):gv(r)):(r.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){gv(r)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(ZI(n))uS(n,e,t);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){gv(i)})}else navigator.msSaveOrOpenBlob(function(r,s){return s===void 0?s={autoBom:!1}:bi(s)!=="object"&&(Ri.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}(n,t),e)}:function(n,e,t,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return uS(n,e,t);var r=n.type==="application/octet-stream",s=/constructor/i.test(Zt.HTMLElement)||Zt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&s)&&(typeof FileReader>"u"?"undefined":bi(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=u:location=u,i=null},o.readAsDataURL(n)}else{var l=Zt.URL||Zt.webkitURL,c=l.createObjectURL(n);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $O(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<t.length;i++){var r=t[i].re,s=t[i].process,a=r.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function dS(n,e){var t=n[0],i=n[1],r=n[2],s=n[3];t=Gs(t,i,r,s,e[0],7,-680876936),s=Gs(s,t,i,r,e[1],12,-389564586),r=Gs(r,s,t,i,e[2],17,606105819),i=Gs(i,r,s,t,e[3],22,-1044525330),t=Gs(t,i,r,s,e[4],7,-176418897),s=Gs(s,t,i,r,e[5],12,1200080426),r=Gs(r,s,t,i,e[6],17,-1473231341),i=Gs(i,r,s,t,e[7],22,-45705983),t=Gs(t,i,r,s,e[8],7,1770035416),s=Gs(s,t,i,r,e[9],12,-1958414417),r=Gs(r,s,t,i,e[10],17,-42063),i=Gs(i,r,s,t,e[11],22,-1990404162),t=Gs(t,i,r,s,e[12],7,1804603682),s=Gs(s,t,i,r,e[13],12,-40341101),r=Gs(r,s,t,i,e[14],17,-1502002290),t=Vs(t,i=Gs(i,r,s,t,e[15],22,1236535329),r,s,e[1],5,-165796510),s=Vs(s,t,i,r,e[6],9,-1069501632),r=Vs(r,s,t,i,e[11],14,643717713),i=Vs(i,r,s,t,e[0],20,-373897302),t=Vs(t,i,r,s,e[5],5,-701558691),s=Vs(s,t,i,r,e[10],9,38016083),r=Vs(r,s,t,i,e[15],14,-660478335),i=Vs(i,r,s,t,e[4],20,-405537848),t=Vs(t,i,r,s,e[9],5,568446438),s=Vs(s,t,i,r,e[14],9,-1019803690),r=Vs(r,s,t,i,e[3],14,-187363961),i=Vs(i,r,s,t,e[8],20,1163531501),t=Vs(t,i,r,s,e[13],5,-1444681467),s=Vs(s,t,i,r,e[2],9,-51403784),r=Vs(r,s,t,i,e[7],14,1735328473),t=Ys(t,i=Vs(i,r,s,t,e[12],20,-1926607734),r,s,e[5],4,-378558),s=Ys(s,t,i,r,e[8],11,-2022574463),r=Ys(r,s,t,i,e[11],16,1839030562),i=Ys(i,r,s,t,e[14],23,-35309556),t=Ys(t,i,r,s,e[1],4,-1530992060),s=Ys(s,t,i,r,e[4],11,1272893353),r=Ys(r,s,t,i,e[7],16,-155497632),i=Ys(i,r,s,t,e[10],23,-1094730640),t=Ys(t,i,r,s,e[13],4,681279174),s=Ys(s,t,i,r,e[0],11,-358537222),r=Ys(r,s,t,i,e[3],16,-722521979),i=Ys(i,r,s,t,e[6],23,76029189),t=Ys(t,i,r,s,e[9],4,-640364487),s=Ys(s,t,i,r,e[12],11,-421815835),r=Ys(r,s,t,i,e[15],16,530742520),t=qs(t,i=Ys(i,r,s,t,e[2],23,-995338651),r,s,e[0],6,-198630844),s=qs(s,t,i,r,e[7],10,1126891415),r=qs(r,s,t,i,e[14],15,-1416354905),i=qs(i,r,s,t,e[5],21,-57434055),t=qs(t,i,r,s,e[12],6,1700485571),s=qs(s,t,i,r,e[3],10,-1894986606),r=qs(r,s,t,i,e[10],15,-1051523),i=qs(i,r,s,t,e[1],21,-2054922799),t=qs(t,i,r,s,e[8],6,1873313359),s=qs(s,t,i,r,e[15],10,-30611744),r=qs(r,s,t,i,e[6],15,-1560198380),i=qs(i,r,s,t,e[13],21,1309151649),t=qs(t,i,r,s,e[4],6,-145523070),s=qs(s,t,i,r,e[11],10,-1120210379),r=qs(r,s,t,i,e[2],15,718787259),i=qs(i,r,s,t,e[9],21,-343485551),n[0]=bd(t,n[0]),n[1]=bd(i,n[1]),n[2]=bd(r,n[2]),n[3]=bd(s,n[3])}function sb(n,e,t,i,r,s){return e=bd(bd(e,n),bd(i,s)),bd(e<<r|e>>>32-r,t)}function Gs(n,e,t,i,r,s,a){return sb(e&t|~e&i,n,e,r,s,a)}function Vs(n,e,t,i,r,s,a){return sb(e&i|t&~i,n,e,r,s,a)}function Ys(n,e,t,i,r,s,a){return sb(e^t^i,n,e,r,s,a)}function qs(n,e,t,i,r,s,a){return sb(t^(e|~i),n,e,r,s,a)}function HO(n){var e,t=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)dS(i,NQ(n.substring(e-64,e)));n=n.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)r[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(dS(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*t,dS(i,r),i}function NQ(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Im=Zt.atob.bind(Zt),E_=Zt.btoa.bind(Zt);var ek="0123456789abcdef".split("");function DQ(n){for(var e="",t=0;t<4;t++)e+=ek[n>>8*t+4&15]+ek[n>>8*t&15];return e}function OQ(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function T_(n){return HO(n).map(OQ).join("")}var MQ=function(n){for(var e=0;e<n.length;e++)n[e]=DQ(n[e]);return n.join("")}(HO("hello"))!="5d41402abc4b2a76b9719d911017c592";function bd(n,e){if(MQ){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function A_(n,e){var t,i,r,s;if(n!==t){for(var a=(r=n,s=1+(256/n.length>>0),new Array(s+1).join(r)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+a.charCodeAt(l))%256,o[l]=o[c],o[c]=u}t=n,i=o}else o=i;var d=e.length,h=0,p=0,m="";for(l=0;l<d;l++)p=(p+(u=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=u,a=o[(o[h]+o[p])%256],m+=String.fromCharCode(e.charCodeAt(l)^a);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var tk={print:4,modify:8,copy:16,"annot-forms":32};function cp(n,e,t,i){this.v=1,this.r=2;var r=192;n.forEach(function(o){if(tk.perm!==void 0)throw new Error("Invalid permission: "+o);r+=tk[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^r)),this.encryptionKey=T_(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=A_(this.encryptionKey,this.padding)}function up(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,i=0;i<t;i++){var r=n.charCodeAt(i);r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?e+="#"+("0"+r.toString(16)).slice(-2):e+=n[i]}return e}function nk(n){if(bi(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,i,r){if(r=r||!1,typeof t!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[i,!!r],s},this.unsubscribe=function(t){for(var i in e)if(e[i][t])return delete e[i][t],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,i)}catch(o){Zt.console&&Ri.error("jsPDF PubSub Error",o.message,o)}a[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function g0(n){if(!(this instanceof g0))return new g0(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function WO(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function fd(n,e,t,i,r){if(!(this instanceof fd))return new fd(n,e,t,i,r);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,WO.call(this,i,r)}function Vf(n,e,t,i,r){if(!(this instanceof Vf))return new Vf(n,e,t,i,r);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,WO.call(this,i,r)}function Vt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",u=null;bi(n=n||{})==="object"&&(t=n.orientation,i=n.unit||i,r=n.format||r,s=n.compress||n.compressPdf||s,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),i=i||"mm",t=(""+(t||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=nk;var m="1.3",v=p.__private__.getPdfVersion=function(){return m};p.__private__.setPdfVersion=function(L){m=L};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var x=p.__private__.getPageFormat=function(L){return b[L]};r=r||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},S=w.COMPAT;function A(){this.saveGraphicsState(),oe(new Dt(lt,0,0,-lt,0,bo()*lt).toString()+" cm"),this.setFontSize(this.getFontSize()/lt),c="n",S=w.ADVANCED}function C(){this.restoreGraphicsState(),c="S",S=w.COMPAT}var N=p.__private__.combineFontStyleAndFontWeight=function(L,Y){if(L=="bold"&&Y=="normal"||L=="bold"&&Y==400||L=="normal"&&Y=="italic"||L=="bold"&&Y=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Y&&(L=Y==400||Y==="normal"?L==="italic"?"italic":"normal":Y!=700&&Y!=="bold"||L!=="normal"?(Y==700?"bold":Y)+""+L:"bold"),L};p.advancedAPI=function(L){var Y=S===w.COMPAT;return Y&&A.call(this),typeof L!="function"||(L(this),Y&&C.call(this)),this},p.compatAPI=function(L){var Y=S===w.ADVANCED;return Y&&C.call(this),typeof L!="function"||(L(this),Y&&A.call(this)),this},p.isAdvancedAPI=function(){return S===w.ADVANCED};var k,R=function(L){if(S!==w.ADVANCED)throw new Error(L+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=p.roundToPrecision=p.__private__.roundToPrecision=function(L,Y){var de=e||Y;if(isNaN(L)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return L.toFixed(de).replace(/0+$/,"")};k=p.hpf=p.__private__.hpf=typeof l=="number"?function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return U(L,l)}:l==="smart"?function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return U(L,L>-1&&L<1?16:5)}:function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.hpf");return U(L,16)};var j=p.f2=p.__private__.f2=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.f2");return U(L,2)},D=p.__private__.f3=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.f3");return U(L,3)},O=p.scale=p.__private__.scale=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.scale");return S===w.COMPAT?L*lt:S===w.ADVANCED?L:void 0},Z=function(L){return S===w.COMPAT?bo()-L:S===w.ADVANCED?L:void 0},J=function(L){return O(Z(L))};p.__private__.setPrecision=p.setPrecision=function(L){typeof parseInt(L,10)=="number"&&(e=parseInt(L,10))};var le,H="00000000000000000000000000000000",V=p.__private__.getFileId=function(){return H},z=p.__private__.setFileId=function(L){return H=L!==void 0&&/^[a-fA-F0-9]{32}$/.test(L)?L.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Sr=new cp(u.userPermissions,u.userPassword,u.ownerPassword,H)),H};p.setFileId=function(L){return z(L),this},p.getFileId=function(){return V()};var W=p.__private__.convertDateToPDFDate=function(L){var Y=L.getTimezoneOffset(),de=Y<0?"+":"-",pe=Math.floor(Math.abs(Y/60)),Ce=Math.abs(Y%60),je=[de,ee(pe),"'",ee(Ce),"'"].join("");return["D:",L.getFullYear(),ee(L.getMonth()+1),ee(L.getDate()),ee(L.getHours()),ee(L.getMinutes()),ee(L.getSeconds()),je].join("")},te=p.__private__.convertPDFDateToDate=function(L){var Y=parseInt(L.substr(2,4),10),de=parseInt(L.substr(6,2),10)-1,pe=parseInt(L.substr(8,2),10),Ce=parseInt(L.substr(10,2),10),je=parseInt(L.substr(12,2),10),tt=parseInt(L.substr(14,2),10);return new Date(Y,de,pe,Ce,je,tt,0)},fe=p.__private__.setCreationDate=function(L){var Y;if(L===void 0&&(L=new Date),L instanceof Date)Y=W(L);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(L))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Y=L}return le=Y},F=p.__private__.getCreationDate=function(L){var Y=le;return L==="jsDate"&&(Y=te(le)),Y};p.setCreationDate=function(L){return fe(L),this},p.getCreationDate=function(L){return F(L)};var K,ee=p.__private__.padd2=function(L){return("0"+parseInt(L)).slice(-2)},ae=p.__private__.padd2Hex=function(L){return("00"+(L=L.toString())).substr(L.length)},ce=0,ye=[],be=[],Te=0,Xe=[],ze=[],He=!1,rt=be,ft=function(){ce=0,Te=0,be=[],ye=[],Xe=[],lr=Ei(),Jr=Ei()};p.__private__.setCustomOutputDestination=function(L){He=!0,rt=L};var Ie=function(L){He||(rt=L)};p.__private__.resetCustomOutputDestination=function(){He=!1,rt=be};var oe=p.__private__.out=function(L){return L=L.toString(),Te+=L.length+1,rt.push(L),rt},ut=p.__private__.write=function(L){return oe(arguments.length===1?L.toString():Array.prototype.join.call(arguments," "))},dt=p.__private__.getArrayBuffer=function(L){for(var Y=L.length,de=new ArrayBuffer(Y),pe=new Uint8Array(de);Y--;)pe[Y]=L.charCodeAt(Y);return de},Se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Se};var Qe=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(L){return Qe=S===w.ADVANCED?L/lt:L,this};var Ze,it=p.__private__.getFontSize=p.getFontSize=function(){return S===w.COMPAT?Qe:Qe*lt},et=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(L){return et=L,this},p.__private__.getR2L=p.getR2L=function(){return et};var mt,Rt=p.__private__.setZoomMode=function(L){var Y=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(L))Ze=L;else if(isNaN(L)){if(Y.indexOf(L)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+L+'" is not recognized.');Ze=L}else Ze=parseInt(L,10)};p.__private__.getZoomMode=function(){return Ze};var at,$t=p.__private__.setPageMode=function(L){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(L)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+L+'" is not recognized.');mt=L};p.__private__.getPageMode=function(){return mt};var en=p.__private__.setLayoutMode=function(L){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(L)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+L+'" is not recognized.');at=L};p.__private__.getLayoutMode=function(){return at},p.__private__.setDisplayMode=p.setDisplayMode=function(L,Y,de){return Rt(L),en(Y),$t(de),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(L){if(Object.keys(Pt).indexOf(L)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[L]},p.__private__.getDocumentProperties=function(){return Pt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(L){for(var Y in Pt)Pt.hasOwnProperty(Y)&&L[Y]&&(Pt[Y]=L[Y]);return this},p.__private__.setDocumentProperty=function(L,Y){if(Object.keys(Pt).indexOf(L)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[L]=Y};var qt,lt,Ii,pn,or,gn={},zn={},Wr=[],rn={},Ss={},Un={},zr={},ws=null,si=0,Ht=[],Ln=new nk(p),_s=n.hotfixes||[],ai={},xr={},Gr=[],Dt=function L(Y,de,pe,Ce,je,tt){if(!(this instanceof L))return new L(Y,de,pe,Ce,je,tt);isNaN(Y)&&(Y=1),isNaN(de)&&(de=0),isNaN(pe)&&(pe=0),isNaN(Ce)&&(Ce=1),isNaN(je)&&(je=0),isNaN(tt)&&(tt=0),this._matrix=[Y,de,pe,Ce,je,tt]};Object.defineProperty(Dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(L){this._matrix[0]=L}}),Object.defineProperty(Dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(L){this._matrix[1]=L}}),Object.defineProperty(Dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(L){this._matrix[2]=L}}),Object.defineProperty(Dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(L){this._matrix[3]=L}}),Object.defineProperty(Dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(L){this._matrix[4]=L}}),Object.defineProperty(Dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(L){this._matrix[5]=L}}),Object.defineProperty(Dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(L){this._matrix[0]=L}}),Object.defineProperty(Dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(L){this._matrix[1]=L}}),Object.defineProperty(Dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(L){this._matrix[2]=L}}),Object.defineProperty(Dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(L){this._matrix[3]=L}}),Object.defineProperty(Dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(L){this._matrix[4]=L}}),Object.defineProperty(Dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(L){this._matrix[5]=L}}),Object.defineProperty(Dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dt.prototype.join=function(L){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(L)},Dt.prototype.multiply=function(L){var Y=L.sx*this.sx+L.shy*this.shx,de=L.sx*this.shy+L.shy*this.sy,pe=L.shx*this.sx+L.sy*this.shx,Ce=L.shx*this.shy+L.sy*this.sy,je=L.tx*this.sx+L.ty*this.shx+this.tx,tt=L.tx*this.shy+L.ty*this.sy+this.ty;return new Dt(Y,de,pe,Ce,je,tt)},Dt.prototype.decompose=function(){var L=this.sx,Y=this.shy,de=this.shx,pe=this.sy,Ce=this.tx,je=this.ty,tt=Math.sqrt(L*L+Y*Y),bt=(L/=tt)*de+(Y/=tt)*pe;de-=L*bt,pe-=Y*bt;var Ut=Math.sqrt(de*de+pe*pe);return bt/=Ut,L*(pe/=Ut)<Y*(de/=Ut)&&(L=-L,Y=-Y,bt=-bt,tt=-tt),{scale:new Dt(tt,0,0,Ut,0,0),translate:new Dt(1,0,0,1,Ce,je),rotate:new Dt(L,Y,-Y,L,0,0),skew:new Dt(1,0,bt,1,0,0)}},Dt.prototype.toString=function(L){return this.join(" ")},Dt.prototype.inversed=function(){var L=this.sx,Y=this.shy,de=this.shx,pe=this.sy,Ce=this.tx,je=this.ty,tt=1/(L*pe-Y*de),bt=pe*tt,Ut=-Y*tt,sn=-de*tt,nn=L*tt;return new Dt(bt,Ut,sn,nn,-bt*Ce-sn*je,-Ut*Ce-nn*je)},Dt.prototype.applyToPoint=function(L){var Y=L.x*this.sx+L.y*this.shx+this.tx,de=L.x*this.shy+L.y*this.sy+this.ty;return new ns(Y,de)},Dt.prototype.applyToRectangle=function(L){var Y=this.applyToPoint(L),de=this.applyToPoint(new ns(L.x+L.w,L.y+L.h));return new Jd(Y.x,Y.y,de.x-Y.x,de.y-Y.y)},Dt.prototype.clone=function(){var L=this.sx,Y=this.shy,de=this.shx,pe=this.sy,Ce=this.tx,je=this.ty;return new Dt(L,Y,de,pe,Ce,je)},p.Matrix=Dt;var Bi=p.matrixMult=function(L,Y){return Y.multiply(L)},Qr=new Dt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Qr;var Ui=function(L,Y){if(!Ss[L]){var de=(Y instanceof fd?"Sh":"P")+(Object.keys(rn).length+1).toString(10);Y.id=de,Ss[L]=de,rn[de]=Y,Ln.publish("addPattern",Y)}};p.ShadingPattern=fd,p.TilingPattern=Vf,p.addShadingPattern=function(L,Y){return R("addShadingPattern()"),Ui(L,Y),this},p.beginTilingPattern=function(L){R("beginTilingPattern()"),Ga(L.boundingBox[0],L.boundingBox[1],L.boundingBox[2]-L.boundingBox[0],L.boundingBox[3]-L.boundingBox[1],L.matrix)},p.endTilingPattern=function(L,Y){R("endTilingPattern()"),Y.stream=ze[K].join(`
`),Ui(L,Y),Ln.publish("endTilingPattern",Y),Gr.pop().restore()};var _i=p.__private__.newObject=function(){var L=Ei();return Cn(L,!0),L},Ei=p.__private__.newObjectDeferred=function(){return ce++,ye[ce]=function(){return Te},ce},Cn=function(L,Y){return Y=typeof Y=="boolean"&&Y,ye[L]=Te,Y&&oe(L+" 0 obj"),L},Pi=p.__private__.newAdditionalObject=function(){var L={objId:Ei(),content:""};return Xe.push(L),L},lr=Ei(),Jr=Ei(),cr=p.__private__.decodeColorString=function(L){var Y=L.split(" ");if(Y.length!==2||Y[1]!=="g"&&Y[1]!=="G")Y.length===5&&(Y[4]==="k"||Y[4]==="K")&&(Y=[(1-Y[0])*(1-Y[3]),(1-Y[1])*(1-Y[3]),(1-Y[2])*(1-Y[3]),"r"]);else{var de=parseFloat(Y[0]);Y=[de,de,de,"r"]}for(var pe="#",Ce=0;Ce<3;Ce++)pe+=("0"+Math.floor(255*parseFloat(Y[Ce])).toString(16)).slice(-2);return pe},Ki=p.__private__.encodeColorString=function(L){var Y;typeof L=="string"&&(L={ch1:L});var de=L.ch1,pe=L.ch2,Ce=L.ch3,je=L.ch4,tt=L.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var bt=new $O(de);if(bt.ok)de=bt.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var Ut=parseInt(de.substr(1),16);de=Ut>>16&255,pe=Ut>>8&255,Ce=255&Ut}if(pe===void 0||je===void 0&&de===pe&&pe===Ce)if(typeof de=="string")Y=de+" "+tt[0];else switch(L.precision){case 2:Y=j(de/255)+" "+tt[0];break;case 3:default:Y=D(de/255)+" "+tt[0]}else if(je===void 0||bi(je)==="object"){if(je&&!isNaN(je.a)&&je.a===0)return Y=["1.","1.","1.",tt[1]].join(" ");if(typeof de=="string")Y=[de,pe,Ce,tt[1]].join(" ");else switch(L.precision){case 2:Y=[j(de/255),j(pe/255),j(Ce/255),tt[1]].join(" ");break;default:case 3:Y=[D(de/255),D(pe/255),D(Ce/255),tt[1]].join(" ")}}else if(typeof de=="string")Y=[de,pe,Ce,je,tt[2]].join(" ");else switch(L.precision){case 2:Y=[j(de),j(pe),j(Ce),j(je),tt[2]].join(" ");break;case 3:default:Y=[D(de),D(pe),D(Ce),D(je),tt[2]].join(" ")}return Y},Xi=p.__private__.getFilters=function(){return a},Rr=p.__private__.putStream=function(L){var Y=(L=L||{}).data||"",de=L.filters||Xi(),pe=L.alreadyAppliedFilters||[],Ce=L.addLength1||!1,je=Y.length,tt=L.objectId,bt=function(Yr){return Yr};if(u!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(bt=Sr.encryptor(tt,0));var Ut={};de===!0&&(de=["FlateEncode"]);var sn=L.additionalKeyValues||[],nn=(Ut=Vt.API.processDataByFilters!==void 0?Vt.API.processDataByFilters(Y,de):{data:Y,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(Ut.data.length!==0&&(sn.push({key:"Length",value:Ut.data.length}),Ce===!0&&sn.push({key:"Length1",value:je})),nn.length!=0)if(nn.split("/").length-1==1)sn.push({key:"Filter",value:nn});else{sn.push({key:"Filter",value:"["+nn+"]"});for(var Rn=0;Rn<sn.length;Rn+=1)if(sn[Rn].key==="DecodeParms"){for(var Di=[],Ji=0;Ji<Ut.reverseChain.split("/").length-1;Ji+=1)Di.push("null");Di.push(sn[Rn].value),sn[Rn].value="["+Di.join(" ")+"]"}}oe("<<");for(var Zi=0;Zi<sn.length;Zi++)oe("/"+sn[Zi].key+" "+sn[Zi].value);oe(">>"),Ut.data.length!==0&&(oe("stream"),oe(bt(Ut.data)),oe("endstream"))},ds=p.__private__.putPage=function(L){var Y=L.number,de=L.data,pe=L.objId,Ce=L.contentsObjId;Cn(pe,!0),oe("<</Type /Page"),oe("/Parent "+L.rootDictionaryObjId+" 0 R"),oe("/Resources "+L.resourceDictionaryObjId+" 0 R"),oe("/MediaBox ["+parseFloat(k(L.mediaBox.bottomLeftX))+" "+parseFloat(k(L.mediaBox.bottomLeftY))+" "+k(L.mediaBox.topRightX)+" "+k(L.mediaBox.topRightY)+"]"),L.cropBox!==null&&oe("/CropBox ["+k(L.cropBox.bottomLeftX)+" "+k(L.cropBox.bottomLeftY)+" "+k(L.cropBox.topRightX)+" "+k(L.cropBox.topRightY)+"]"),L.bleedBox!==null&&oe("/BleedBox ["+k(L.bleedBox.bottomLeftX)+" "+k(L.bleedBox.bottomLeftY)+" "+k(L.bleedBox.topRightX)+" "+k(L.bleedBox.topRightY)+"]"),L.trimBox!==null&&oe("/TrimBox ["+k(L.trimBox.bottomLeftX)+" "+k(L.trimBox.bottomLeftY)+" "+k(L.trimBox.topRightX)+" "+k(L.trimBox.topRightY)+"]"),L.artBox!==null&&oe("/ArtBox ["+k(L.artBox.bottomLeftX)+" "+k(L.artBox.bottomLeftY)+" "+k(L.artBox.topRightX)+" "+k(L.artBox.topRightY)+"]"),typeof L.userUnit=="number"&&L.userUnit!==1&&oe("/UserUnit "+L.userUnit),Ln.publish("putPage",{objId:pe,pageContext:Ht[Y],pageNumber:Y,page:de}),oe("/Contents "+Ce+" 0 R"),oe(">>"),oe("endobj");var je=de.join(`
`);return S===w.ADVANCED&&(je+=`
Q`),Cn(Ce,!0),Rr({data:je,filters:Xi(),objectId:Ce}),oe("endobj"),pe},Zr=p.__private__.putPages=function(){var L,Y,de=[];for(L=1;L<=si;L++)Ht[L].objId=Ei(),Ht[L].contentsObjId=Ei();for(L=1;L<=si;L++)de.push(ds({number:L,data:ze[L],objId:Ht[L].objId,contentsObjId:Ht[L].contentsObjId,mediaBox:Ht[L].mediaBox,cropBox:Ht[L].cropBox,bleedBox:Ht[L].bleedBox,trimBox:Ht[L].trimBox,artBox:Ht[L].artBox,userUnit:Ht[L].userUnit,rootDictionaryObjId:lr,resourceDictionaryObjId:Jr}));Cn(lr,!0),oe("<</Type /Pages");var pe="/Kids [";for(Y=0;Y<si;Y++)pe+=de[Y]+" 0 R ";oe(pe+"]"),oe("/Count "+si),oe(">>"),oe("endobj"),Ln.publish("postPutPages")},Es=function(L){Ln.publish("putFont",{font:L,out:oe,newObject:_i,putStream:Rr}),L.isAlreadyPutted!==!0&&(L.objectNumber=_i(),oe("<<"),oe("/Type /Font"),oe("/BaseFont /"+up(L.postScriptName)),oe("/Subtype /Type1"),typeof L.encoding=="string"&&oe("/Encoding /"+L.encoding),oe("/FirstChar 32"),oe("/LastChar 255"),oe(">>"),oe("endobj"))},oi=function(){for(var L in gn)gn.hasOwnProperty(L)&&(d===!1||d===!0&&h.hasOwnProperty(L))&&Es(gn[L])},fs=function(L){L.objectNumber=_i();var Y=[];Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Form"}),Y.push({key:"BBox",value:"["+[k(L.x),k(L.y),k(L.x+L.width),k(L.y+L.height)].join(" ")+"]"}),Y.push({key:"Matrix",value:"["+L.matrix.toString()+"]"});var de=L.pages[1].join(`
`);Rr({data:de,additionalKeyValues:Y,objectId:L.objectNumber}),oe("endobj")},br=function(){for(var L in ai)ai.hasOwnProperty(L)&&fs(ai[L])},Pr=function(L,Y){var de,pe=[],Ce=1/(Y-1);for(de=0;de<1;de+=Ce)pe.push(de);if(pe.push(1),L[0].offset!=0){var je={offset:0,color:L[0].color};L.unshift(je)}if(L[L.length-1].offset!=1){var tt={offset:1,color:L[L.length-1].color};L.push(tt)}for(var bt="",Ut=0,sn=0;sn<pe.length;sn++){for(de=pe[sn];de>L[Ut+1].offset;)Ut++;var nn=L[Ut].offset,Rn=(de-nn)/(L[Ut+1].offset-nn),Di=L[Ut].color,Ji=L[Ut+1].color;bt+=ae(Math.round((1-Rn)*Di[0]+Rn*Ji[0]).toString(16))+ae(Math.round((1-Rn)*Di[1]+Rn*Ji[1]).toString(16))+ae(Math.round((1-Rn)*Di[2]+Rn*Ji[2]).toString(16))}return bt.trim()},Vr=function(L,Y){Y||(Y=21);var de=_i(),pe=Pr(L.colors,Y),Ce=[];Ce.push({key:"FunctionType",value:"0"}),Ce.push({key:"Domain",value:"[0.0 1.0]"}),Ce.push({key:"Size",value:"["+Y+"]"}),Ce.push({key:"BitsPerSample",value:"8"}),Ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rr({data:pe,additionalKeyValues:Ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),oe("endobj"),L.objectNumber=_i(),oe("<< /ShadingType "+L.type),oe("/ColorSpace /DeviceRGB");var je="/Coords ["+k(parseFloat(L.coords[0]))+" "+k(parseFloat(L.coords[1]))+" ";L.type===2?je+=k(parseFloat(L.coords[2]))+" "+k(parseFloat(L.coords[3])):je+=k(parseFloat(L.coords[2]))+" "+k(parseFloat(L.coords[3]))+" "+k(parseFloat(L.coords[4]))+" "+k(parseFloat(L.coords[5])),oe(je+="]"),L.matrix&&oe("/Matrix ["+L.matrix.toString()+"]"),oe("/Function "+de+" 0 R"),oe("/Extend [true true]"),oe(">>"),oe("endobj")},ra=function(L,Y){var de=Ei(),pe=_i();Y.push({resourcesOid:de,objectOid:pe}),L.objectNumber=pe;var Ce=[];Ce.push({key:"Type",value:"/Pattern"}),Ce.push({key:"PatternType",value:"1"}),Ce.push({key:"PaintType",value:"1"}),Ce.push({key:"TilingType",value:"1"}),Ce.push({key:"BBox",value:"["+L.boundingBox.map(k).join(" ")+"]"}),Ce.push({key:"XStep",value:k(L.xStep)}),Ce.push({key:"YStep",value:k(L.yStep)}),Ce.push({key:"Resources",value:de+" 0 R"}),L.matrix&&Ce.push({key:"Matrix",value:"["+L.matrix.toString()+"]"}),Rr({data:L.stream,additionalKeyValues:Ce,objectId:L.objectNumber}),oe("endobj")},li=function(L){var Y;for(Y in rn)rn.hasOwnProperty(Y)&&(rn[Y]instanceof fd?Vr(rn[Y]):rn[Y]instanceof Vf&&ra(rn[Y],L))},Wa=function(L){for(var Y in L.objectNumber=_i(),oe("<<"),L)switch(Y){case"opacity":oe("/ca "+j(L[Y]));break;case"stroke-opacity":oe("/CA "+j(L[Y]))}oe(">>"),oe("endobj")},Ts=function(){var L;for(L in Un)Un.hasOwnProperty(L)&&Wa(Un[L])},Ti=function(){for(var L in oe("/XObject <<"),ai)ai.hasOwnProperty(L)&&ai[L].objectNumber>=0&&oe("/"+L+" "+ai[L].objectNumber+" 0 R");Ln.publish("putXobjectDict"),oe(">>")},Oe=function(){Sr.oid=_i(),oe("<<"),oe("/Filter /Standard"),oe("/V "+Sr.v),oe("/R "+Sr.r),oe("/U <"+Sr.toHexString(Sr.U)+">"),oe("/O <"+Sr.toHexString(Sr.O)+">"),oe("/P "+Sr.P),oe(">>"),oe("endobj")},Kt=function(){for(var L in oe("/Font <<"),gn)gn.hasOwnProperty(L)&&(d===!1||d===!0&&h.hasOwnProperty(L))&&oe("/"+L+" "+gn[L].objectNumber+" 0 R");oe(">>")},ln=function(){if(Object.keys(rn).length>0){for(var L in oe("/Shading <<"),rn)rn.hasOwnProperty(L)&&rn[L]instanceof fd&&rn[L].objectNumber>=0&&oe("/"+L+" "+rn[L].objectNumber+" 0 R");Ln.publish("putShadingPatternDict"),oe(">>")}},Ai=function(L){if(Object.keys(rn).length>0){for(var Y in oe("/Pattern <<"),rn)rn.hasOwnProperty(Y)&&rn[Y]instanceof p.TilingPattern&&rn[Y].objectNumber>=0&&rn[Y].objectNumber<L&&oe("/"+Y+" "+rn[Y].objectNumber+" 0 R");Ln.publish("putTilingPatternDict"),oe(">>")}},yt=function(){if(Object.keys(Un).length>0){var L;for(L in oe("/ExtGState <<"),Un)Un.hasOwnProperty(L)&&Un[L].objectNumber>=0&&oe("/"+L+" "+Un[L].objectNumber+" 0 R");Ln.publish("putGStateDict"),oe(">>")}},_e=function(L){Cn(L.resourcesOid,!0),oe("<<"),oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Kt(),ln(),Ai(L.objectOid),yt(),Ti(),oe(">>"),oe("endobj")},Ue=function(){var L=[];oi(),Ts(),br(),li(L),Ln.publish("putResources"),L.forEach(_e),_e({resourcesOid:Jr,objectOid:Number.MAX_SAFE_INTEGER}),Ln.publish("postPutResources")},vt=function(){Ln.publish("putAdditionalObjects");for(var L=0;L<Xe.length;L++){var Y=Xe[L];Cn(Y.objId,!0),oe(Y.content),oe("endobj")}Ln.publish("postPutAdditionalObjects")},Lt=function(L){zn[L.fontName]=zn[L.fontName]||{},zn[L.fontName][L.fontStyle]=L.id},Gt=function(L,Y,de,pe,Ce){var je={id:"F"+(Object.keys(gn).length+1).toString(10),postScriptName:L,fontName:Y,fontStyle:de,encoding:pe,isStandardFont:Ce||!1,metadata:{}};return Ln.publish("addFont",{font:je,instance:this}),gn[je.id]=je,Lt(je),je.id},bn=function(L){for(var Y=0,de=Se.length;Y<de;Y++){var pe=Gt.call(this,L[Y][0],L[Y][1],L[Y][2],Se[Y][3],!0);d===!1&&(h[pe]=!0);var Ce=L[Y][0].split("-");Lt({id:pe,fontName:Ce[0],fontStyle:Ce[1]||""})}Ln.publish("addFonts",{fonts:gn,dictionary:zn})},Sn=function(L){return L.foo=function(){try{return L.apply(this,arguments)}catch(pe){var Y=pe.stack||"";~Y.indexOf(" at ")&&(Y=Y.split(" at ")[1]);var de="Error in function "+Y.split(`
`)[0].split("<")[0]+": "+pe.message;if(!Zt.console)throw new Error(de);Zt.console.error(de,pe),Zt.alert&&alert(de)}},L.foo.bar=L,L.foo},Ae=function(L,Y){var de,pe,Ce,je,tt,bt,Ut,sn,nn;if(Ce=(Y=Y||{}).sourceEncoding||"Unicode",tt=Y.outputEncoding,(Y.autoencode||tt)&&gn[qt].metadata&&gn[qt].metadata[Ce]&&gn[qt].metadata[Ce].encoding&&(je=gn[qt].metadata[Ce].encoding,!tt&&gn[qt].encoding&&(tt=gn[qt].encoding),!tt&&je.codePages&&(tt=je.codePages[0]),typeof tt=="string"&&(tt=je[tt]),tt)){for(Ut=!1,bt=[],de=0,pe=L.length;de<pe;de++)(sn=tt[L.charCodeAt(de)])?bt.push(String.fromCharCode(sn)):bt.push(L[de]),bt[de].charCodeAt(0)>>8&&(Ut=!0);L=bt.join("")}for(de=L.length;Ut===void 0&&de!==0;)L.charCodeAt(de-1)>>8&&(Ut=!0),de--;if(!Ut)return L;for(bt=Y.noBOM?[]:[254,255],de=0,pe=L.length;de<pe;de++){if((nn=(sn=L.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+L+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");bt.push(nn),bt.push(sn-(nn<<8))}return String.fromCharCode.apply(void 0,bt)},Ke=p.__private__.pdfEscape=p.pdfEscape=function(L,Y){return Ae(L,Y).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nt=p.__private__.beginPage=function(L){ze[++si]=[],Ht[si]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(L[0]),topRightY:Number(L[1])}},Ct(si),Ie(ze[K])},an=function(L,Y){var de,pe,Ce;switch(t=Y||t,typeof L=="string"&&(de=x(L.toLowerCase()),Array.isArray(de)&&(pe=de[0],Ce=de[1])),Array.isArray(L)&&(pe=L[0]*lt,Ce=L[1]*lt),isNaN(pe)&&(pe=r[0],Ce=r[1]),(pe>14400||Ce>14400)&&(Ri.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),Ce=Math.min(14400,Ce)),r=[pe,Ce],t.substr(0,1)){case"l":Ce>pe&&(r=[Ce,pe]);break;case"p":pe>Ce&&(r=[Ce,pe])}Nt(r),Eh(Xd),oe(Qi),Iu!==0&&oe(Iu+" J"),ts!==0&&oe(ts+" j"),Ln.publish("addPage",{pageNumber:si})},Bt=function(L){L>0&&L<=si&&(ze.splice(L,1),Ht.splice(L,1),si--,K>si&&(K=si),this.setPage(K))},Ct=function(L){L>0&&L<=si&&(K=L)},Qn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ze.length-1},In=function(L,Y,de){var pe,Ce=void 0;return de=de||{},L=L!==void 0?L:gn[qt].fontName,Y=Y!==void 0?Y:gn[qt].fontStyle,pe=L.toLowerCase(),zn[pe]!==void 0&&zn[pe][Y]!==void 0?Ce=zn[pe][Y]:zn[L]!==void 0&&zn[L][Y]!==void 0?Ce=zn[L][Y]:de.disableWarning===!1&&Ri.warn("Unable to look up font label for font '"+L+"', '"+Y+"'. Refer to getFontList() for available fonts."),Ce||de.noFallback||(Ce=zn.times[Y])==null&&(Ce=zn.times.normal),Ce},As=p.__private__.putInfo=function(){var L=_i(),Y=function(pe){return pe};for(var de in u!==null&&(Y=Sr.encryptor(L,0)),oe("<<"),oe("/Producer ("+Ke(Y("jsPDF "+Vt.version))+")"),Pt)Pt.hasOwnProperty(de)&&Pt[de]&&oe("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+Ke(Y(Pt[de]))+")");oe("/CreationDate ("+Ke(Y(le))+")"),oe(">>"),oe("endobj")},hs=p.__private__.putCatalog=function(L){var Y=(L=L||{}).rootDictionaryObjId||lr;switch(_i(),oe("<<"),oe("/Type /Catalog"),oe("/Pages "+Y+" 0 R"),Ze||(Ze="fullwidth"),Ze){case"fullwidth":oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":oe("/OpenAction [3 0 R /Fit]");break;case"original":oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+Ze;de.substr(de.length-1)==="%"&&(Ze=parseInt(Ze)/100),typeof Ze=="number"&&oe("/OpenAction [3 0 R /XYZ null null "+j(Ze)+"]")}switch(at||(at="continuous"),at){case"continuous":oe("/PageLayout /OneColumn");break;case"single":oe("/PageLayout /SinglePage");break;case"two":case"twoleft":oe("/PageLayout /TwoColumnLeft");break;case"tworight":oe("/PageLayout /TwoColumnRight")}mt&&oe("/PageMode /"+mt),Ln.publish("putCatalog"),oe(">>"),oe("endobj")},on=p.__private__.putTrailer=function(){oe("trailer"),oe("<<"),oe("/Size "+(ce+1)),oe("/Root "+ce+" 0 R"),oe("/Info "+(ce-1)+" 0 R"),u!==null&&oe("/Encrypt "+Sr.oid+" 0 R"),oe("/ID [ <"+H+"> <"+H+"> ]"),oe(">>")},Jn=p.__private__.putHeader=function(){oe("%PDF-"+m),oe("%ºß¬à")},cn=p.__private__.putXRef=function(){var L="0000000000";oe("xref"),oe("0 "+(ce+1)),oe("0000000000 65535 f ");for(var Y=1;Y<=ce;Y++)typeof ye[Y]=="function"?oe((L+ye[Y]()).slice(-10)+" 00000 n "):ye[Y]!==void 0?oe((L+ye[Y]).slice(-10)+" 00000 n "):oe("0000000000 00000 n ")},Ni=p.__private__.buildDocument=function(){ft(),Ie(be),Ln.publish("buildDocument"),Jn(),Zr(),vt(),Ue(),u!==null&&Oe(),As(),hs();var L=Te;return cn(),on(),oe("startxref"),oe(""+L),oe("%%EOF"),Ie(ze[K]),be.join(`
`)},za=p.__private__.getBlob=function(L){return new Blob([dt(L)],{type:"application/pdf"})},Ds=p.output=p.__private__.output=Sn(function(L,Y){switch(typeof(Y=Y||{})=="string"?Y={filename:Y}:Y.filename=Y.filename||"generated.pdf",L){case void 0:return Ni();case"save":p.save(Y.filename);break;case"arraybuffer":return dt(Ni());case"blob":return za(Ni());case"bloburi":case"bloburl":if(Zt.URL!==void 0&&typeof Zt.URL.createObjectURL=="function")return Zt.URL&&Zt.URL.createObjectURL(za(Ni()))||void 0;Ri.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",pe=Ni();try{de=E_(pe)}catch{de=E_(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+Y.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var Ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Y.pdfObjectUrl&&(Ce=Y.pdfObjectUrl,je="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ce+'"'+je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Y)+");<\/script></body></html>",bt=Zt.open();return bt!==null&&bt.document.write(tt),bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Zt)==="[object Window]"){var Ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Y.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Y.filename+'" width="500px" height="400px" /></body></html>',sn=Zt.open();if(sn!==null){sn.document.write(Ut);var nn=this;sn.document.documentElement.querySelector("#pdfViewer").onload=function(){sn.document.title=Y.filename,sn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(nn.output("bloburl"))}}return sn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Zt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Y)+'"></iframe></body></html>',Di=Zt.open();if(Di!==null&&(Di.document.write(Rn),Di.document.title=Y.filename),Di||typeof safari>"u")return Di;break;case"datauri":case"dataurl":return Zt.document.location.href=this.output("datauristring",Y);default:return null}}),es=function(L){return Array.isArray(_s)===!0&&_s.indexOf(L)>-1};switch(i){case"pt":lt=1;break;case"mm":lt=72/25.4;break;case"cm":lt=72/2.54;break;case"in":lt=72;break;case"px":lt=es("px_scaling")==1?.75:96/72;break;case"pc":case"em":lt=12;break;case"ex":lt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);lt=i}var Sr=null;fe(),z();var fg=function(L){return u!==null?Sr.encryptor(L,0):function(Y){return Y}},wh=p.__private__.getPageInfo=p.getPageInfo=function(L){if(isNaN(L)||L%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ht[L].objId,pageNumber:L,pageContext:Ht[L]}},tn=p.__private__.getPageInfoByObjId=function(L){if(isNaN(L)||L%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Y in Ht)if(Ht[Y].objId===L)break;return wh(Y)},hg=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ht[K].objId,pageNumber:K,pageContext:Ht[K]}};p.addPage=function(){return an.apply(this,arguments),this},p.setPage=function(){return Ct.apply(this,arguments),Ie.call(this,ze[K]),this},p.insertPage=function(L){return this.addPage(),this.movePage(K,L),this},p.movePage=function(L,Y){var de,pe;if(L>Y){de=ze[L],pe=Ht[L];for(var Ce=L;Ce>Y;Ce--)ze[Ce]=ze[Ce-1],Ht[Ce]=Ht[Ce-1];ze[Y]=de,Ht[Y]=pe,this.setPage(Y)}else if(L<Y){de=ze[L],pe=Ht[L];for(var je=L;je<Y;je++)ze[je]=ze[je+1],Ht[je]=Ht[je+1];ze[Y]=de,Ht[Y]=pe,this.setPage(Y)}return this},p.deletePage=function(){return Bt.apply(this,arguments),this},p.__private__.text=p.text=function(L,Y,de,pe,Ce){var je,tt,bt,Ut,sn,nn,Rn,Di,Ji,Zi=(pe=pe||{}).scope||this;if(typeof L=="number"&&typeof Y=="number"&&(typeof de=="string"||Array.isArray(de))){var Yr=de;de=Y,Y=L,L=Yr}if(arguments[3]instanceof Dt?(R("The transform parameter of text() with a Matrix value"),Ji=Ce):(bt=arguments[4],Ut=arguments[5],bi(Rn=arguments[3])==="object"&&Rn!==null||(typeof bt=="string"&&(Ut=bt,bt=null),typeof Rn=="string"&&(Ut=Rn,Rn=null),typeof Rn=="number"&&(bt=Rn,Rn=null),pe={flags:Rn,angle:bt,align:Ut})),isNaN(Y)||isNaN(de)||L==null)throw new Error("Invalid arguments passed to jsPDF.text");if(L.length===0)return Zi;var qr="",ya=!1,ki=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:yc,va=Zi.internal.scaleFactor;function Pl(ui){return ui=ui.split("	").join(Array(pe.TabLen||9).join(" ")),Ke(ui,Rn)}function Pu(ui){for(var Li,ur=ui.concat(),Nr=[],Sa=ur.length;Sa--;)typeof(Li=ur.shift())=="string"?Nr.push(Li):Array.isArray(ui)&&(Li.length===1||Li[1]===void 0&&Li[2]===void 0)?Nr.push(Li[0]):Nr.push([Li[0],Li[1],Li[2]]);return Nr}function Nu(ui,Li){var ur;if(typeof ui=="string")ur=Li(ui)[0];else if(Array.isArray(ui)){for(var Nr,Sa,wa=ui.concat(),Yo=[],nf=wa.length;nf--;)typeof(Nr=wa.shift())=="string"?Yo.push(Li(Nr)[0]):Array.isArray(Nr)&&typeof Nr[0]=="string"&&(Sa=Li(Nr[0],Nr[1],Nr[2]),Yo.push([Sa[0],Sa[1],Sa[2]]));ur=Yo}return ur}var Du=!1,ef=!0;if(typeof L=="string")Du=!0;else if(Array.isArray(L)){var tf=L.concat();tt=[];for(var Ou,is=tf.length;is--;)(typeof(Ou=tf.shift())!="string"||Array.isArray(Ou)&&typeof Ou[0]!="string")&&(ef=!1);Du=ef}if(Du===!1)throw new Error('Type of text must be string or Array. "'+L+'" is not recognized.');typeof L=="string"&&(L=L.match(/[\r?\n]/)?L.split(/\r\n|\r|\n/g):[L]);var Va=Qe/Zi.internal.scaleFactor,Mu=Va*(ki-1);switch(pe.baseline){case"bottom":de-=Mu;break;case"top":de+=Va-Mu;break;case"hanging":de+=Va-2*Mu;break;case"middle":de+=Va/2-Mu}if((nn=pe.maxWidth||0)>0&&(typeof L=="string"?L=Zi.splitTextToSize(L,nn):Object.prototype.toString.call(L)==="[object Array]"&&(L=L.reduce(function(ui,Li){return ui.concat(Zi.splitTextToSize(Li,nn))},[]))),je={text:L,x:Y,y:de,options:pe,mutex:{pdfEscape:Ke,activeFontKey:qt,fonts:gn,activeFontSize:Qe}},Ln.publish("preProcessText",je),L=je.text,bt=(pe=je.options).angle,!(Ji instanceof Dt)&&bt&&typeof bt=="number"){bt*=Math.PI/180,pe.rotationDirection===0&&(bt=-bt),S===w.ADVANCED&&(bt=-bt);var Fu=Math.cos(bt),xc=Math.sin(bt);Ji=new Dt(Fu,xc,-xc,Fu,0,0)}else bt&&bt instanceof Dt&&(Ji=bt);S!==w.ADVANCED||Ji||(Ji=Qr),(sn=pe.charSpace||vc)!==void 0&&(qr+=k(O(sn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Di=pe.horizontalScale)!==void 0&&(qr+=k(100*Di)+` Tz
`),pe.lang;var Cs=-1,So=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,Nl=Zi.internal.getCurrentPageInfo().pageContext;switch(So){case 0:case!1:case"fill":Cs=0;break;case 1:case!0:case"stroke":Cs=1;break;case 2:case"fillThenStroke":Cs=2;break;case 3:case"invisible":Cs=3;break;case 4:case"fillAndAddForClipping":Cs=4;break;case 5:case"strokeAndAddPathForClipping":Cs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Cs=6;break;case 7:case"addToPathForClipping":Cs=7}var kh=Nl.usedRenderingMode!==void 0?Nl.usedRenderingMode:-1;Cs!==-1?qr+=Cs+` Tr
`:kh!==-1&&(qr+=`0 Tr
`),Cs!==-1&&(Nl.usedRenderingMode=Cs),Ut=pe.align||"left";var xa,ju=Qe*ki,zo=Zi.internal.pageSize.getWidth(),Os=gn[qt];sn=pe.charSpace||vc,nn=pe.maxWidth||0,Rn=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var Go=[],bc=function(ui){return Zi.getStringUnitWidth(ui,{font:Os,charSpace:sn,fontSize:Qe,doKerning:!1})*Qe/va};if(Object.prototype.toString.call(L)==="[object Array]"){var Ms;tt=Pu(L),Ut!=="left"&&(xa=tt.map(bc));var Is,Dl=0;if(Ut==="right"){Y-=xa[0],L=[],is=tt.length;for(var Vo=0;Vo<is;Vo++)Vo===0?(Is=ga(Y),Ms=Ls(de)):(Is=O(Dl-xa[Vo]),Ms=-ju),L.push([tt[Vo],Is,Ms]),Dl=xa[Vo]}else if(Ut==="center"){Y-=xa[0]/2,L=[],is=tt.length;for(var Fs=0;Fs<is;Fs++)Fs===0?(Is=ga(Y),Ms=Ls(de)):(Is=O((Dl-xa[Fs])/2),Ms=-ju),L.push([tt[Fs],Is,Ms]),Dl=xa[Fs]}else if(Ut==="left"){L=[],is=tt.length;for(var we=0;we<is;we++)L.push(tt[we])}else if(Ut==="justify"&&Os.encoding==="Identity-H"){L=[],is=tt.length,nn=nn!==0?nn:zo;for(var Be=0,Re=0;Re<is;Re++)if(Ms=Re===0?Ls(de):-ju,Is=Re===0?ga(Y):Be,Re<is-1){var St=O((nn-xa[Re])/(tt[Re].split(" ").length-1)),Ot=tt[Re].split(" ");L.push([Ot[0]+" ",Is,Ms]),Be=0;for(var un=1;un<Ot.length;un++){var Oi=(bc(Ot[un-1]+" "+Ot[un])-bc(Ot[un]))*va+St;un==Ot.length-1?L.push([Ot[un],Oi,0]):L.push([Ot[un]+" ",Oi,0]),Be-=Oi}}else L.push([tt[Re],Is,Ms]);L.push(["",Be,0])}else{if(Ut!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(L=[],is=tt.length,nn=nn!==0?nn:zo,Re=0;Re<is;Re++)Ms=Re===0?Ls(de):-ju,Is=Re===0?ga(Y):0,Re<is-1?Go.push(k(O((nn-xa[Re])/(tt[Re].split(" ").length-1)))):Go.push(0),L.push([tt[Re],Is,Ms])}}var ei=typeof pe.R2L=="boolean"?pe.R2L:et;ei===!0&&(L=Nu(L,function(ui,Li,ur){return[ui.split("").reverse().join(""),Li,ur]})),je={text:L,x:Y,y:de,options:pe,mutex:{pdfEscape:Ke,activeFontKey:qt,fonts:gn,activeFontSize:Qe}},Ln.publish("postProcessText",je),L=je.text,ya=je.mutex.isHex||!1;var Sc=gn[qt].encoding;Sc!=="WinAnsiEncoding"&&Sc!=="StandardEncoding"||(L=Nu(L,function(ui,Li,ur){return[Pl(ui),Li,ur]})),tt=Pu(L),L=[];for(var wc,Kr,Ya,_c=0,qa=1,wo=Array.isArray(tt[0])?qa:_c,Ka="",$n=function(ui,Li,ur){var Nr="";return ur instanceof Dt?(ur=typeof pe.angle=="number"?Bi(ur,new Dt(1,0,0,1,ui,Li)):Bi(new Dt(1,0,0,1,ui,Li),ur),S===w.ADVANCED&&(ur=Bi(new Dt(1,0,0,-1,0,0),ur)),Nr=ur.join(" ")+` Tm
`):Nr=k(ui)+" "+k(Li)+` Td
`,Nr},ba=0;ba<tt.length;ba++){switch(Ka="",wo){case qa:Ya=(ya?"<":"(")+tt[ba][0]+(ya?">":")"),wc=parseFloat(tt[ba][1]),Kr=parseFloat(tt[ba][2]);break;case _c:Ya=(ya?"<":"(")+tt[ba]+(ya?">":")"),wc=ga(Y),Kr=Ls(de)}Go!==void 0&&Go[ba]!==void 0&&(Ka=Go[ba]+` Tw
`),ba===0?L.push(Ka+$n(wc,Kr,Ji)+Ya):wo===_c?L.push(Ka+Ya):wo===qa&&L.push(Ka+$n(wc,Kr,Ji)+Ya)}L=wo===_c?L.join(` Tj
T* `):L.join(` Tj
`),L+=` Tj
`;var sa=`BT
/`;return sa+=qt+" "+Qe+` Tf
`,sa+=k(Qe*ki)+` TL
`,sa+=kl+`
`,sa+=qr,sa+=L,oe(sa+="ET"),h[qt]=!0,Zi};var pg=p.__private__.clip=p.clip=function(L){return oe(L==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return pg("evenodd")},p.__private__.discardPath=p.discardPath=function(){return oe("n"),this};var vo=p.__private__.isValidStyle=function(L){var Y=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(L)!==-1&&(Y=!0),Y};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(L){return vo(L)&&(c=L),this};var _h=p.__private__.getStyle=p.getStyle=function(L){var Y=c;switch(L){case"D":case"S":Y="S";break;case"F":Y="f";break;case"FD":case"DF":Y="B";break;case"f":case"f*":case"B":case"B*":Y=L}return Y},Tu=p.close=function(){return oe("h"),this};p.stroke=function(){return oe("S"),this},p.fill=function(L){return Au("f",L),this},p.fillEvenOdd=function(L){return Au("f*",L),this},p.fillStroke=function(L){return Au("B",L),this},p.fillStrokeEvenOdd=function(L){return Au("B*",L),this};var Au=function(L,Y){bi(Y)==="object"?mg(Y,L):oe(L)},Kd=function(L){L===null||S===w.ADVANCED&&L===void 0||(L=_h(L),oe(L))};function gg(L,Y,de,pe,Ce){var je=new Vf(Y||this.boundingBox,de||this.xStep,pe||this.yStep,this.gState,Ce||this.matrix);je.stream=this.stream;var tt=L+"$$"+this.cloneIndex+++"$$";return Ui(tt,je),je}var mg=function(L,Y){var de=Ss[L.key],pe=rn[de];if(pe instanceof fd)oe("q"),oe(yg(Y)),pe.gState&&p.setGState(pe.gState),oe(L.matrix.toString()+" cm"),oe("/"+de+" sh"),oe("Q");else if(pe instanceof Vf){var Ce=new Dt(1,0,0,-1,0,bo());L.matrix&&(Ce=Ce.multiply(L.matrix||Qr),de=gg.call(pe,L.key,L.boundingBox,L.xStep,L.yStep,Ce).id),oe("q"),oe("/Pattern cs"),oe("/"+de+" scn"),pe.gState&&p.setGState(pe.gState),oe(Y),oe("Q")}},yg=function(L){switch(L){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ci=p.moveTo=function(L,Y){return oe(k(O(L))+" "+k(J(Y))+" m"),this},Gn=p.lineTo=function(L,Y){return oe(k(O(L))+" "+k(J(Y))+" l"),this},Il=p.curveTo=function(L,Y,de,pe,Ce,je){return oe([k(O(L)),k(J(Y)),k(O(de)),k(J(pe)),k(O(Ce)),k(J(je)),"c"].join(" ")),this};p.__private__.line=p.line=function(L,Y,de,pe,Ce){if(isNaN(L)||isNaN(Y)||isNaN(de)||isNaN(pe)||!vo(Ce))throw new Error("Invalid arguments passed to jsPDF.line");return S===w.COMPAT?this.lines([[de-L,pe-Y]],L,Y,[1,1],Ce||"S"):this.lines([[de-L,pe-Y]],L,Y,[1,1]).stroke()},p.__private__.lines=p.lines=function(L,Y,de,pe,Ce,je){var tt,bt,Ut,sn,nn,Rn,Di,Ji,Zi,Yr,qr,ya;if(typeof L=="number"&&(ya=de,de=Y,Y=L,L=ya),pe=pe||[1,1],je=je||!1,isNaN(Y)||isNaN(de)||!Array.isArray(L)||!Array.isArray(pe)||!vo(Ce)||typeof je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ci(Y,de),tt=pe[0],bt=pe[1],sn=L.length,Yr=Y,qr=de,Ut=0;Ut<sn;Ut++)(nn=L[Ut]).length===2?(Yr=nn[0]*tt+Yr,qr=nn[1]*bt+qr,Gn(Yr,qr)):(Rn=nn[0]*tt+Yr,Di=nn[1]*bt+qr,Ji=nn[2]*tt+Yr,Zi=nn[3]*bt+qr,Yr=nn[4]*tt+Yr,qr=nn[5]*bt+qr,Il(Rn,Di,Ji,Zi,Yr,qr));return je&&Tu(),Kd(Ce),this},p.path=function(L){for(var Y=0;Y<L.length;Y++){var de=L[Y],pe=de.c;switch(de.op){case"m":ci(pe[0],pe[1]);break;case"l":Gn(pe[0],pe[1]);break;case"c":Il.apply(this,pe);break;case"h":Tu()}}return this},p.__private__.rect=p.rect=function(L,Y,de,pe,Ce){if(isNaN(L)||isNaN(Y)||isNaN(de)||isNaN(pe)||!vo(Ce))throw new Error("Invalid arguments passed to jsPDF.rect");return S===w.COMPAT&&(pe=-pe),oe([k(O(L)),k(J(Y)),k(O(de)),k(O(pe)),"re"].join(" ")),Kd(Ce),this},p.__private__.triangle=p.triangle=function(L,Y,de,pe,Ce,je,tt){if(isNaN(L)||isNaN(Y)||isNaN(de)||isNaN(pe)||isNaN(Ce)||isNaN(je)||!vo(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-L,pe-Y],[Ce-de,je-pe],[L-Ce,Y-je]],L,Y,[1,1],tt,!0),this},p.__private__.roundedRect=p.roundedRect=function(L,Y,de,pe,Ce,je,tt){if(isNaN(L)||isNaN(Y)||isNaN(de)||isNaN(pe)||isNaN(Ce)||isNaN(je)||!vo(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var bt=4/3*(Math.SQRT2-1);return Ce=Math.min(Ce,.5*de),je=Math.min(je,.5*pe),this.lines([[de-2*Ce,0],[Ce*bt,0,Ce,je-je*bt,Ce,je],[0,pe-2*je],[0,je*bt,-Ce*bt,je,-Ce,je],[2*Ce-de,0],[-Ce*bt,0,-Ce,-je*bt,-Ce,-je],[0,2*je-pe],[0,-je*bt,Ce*bt,-je,Ce,-je]],L+Ce,Y,[1,1],tt,!0),this},p.__private__.ellipse=p.ellipse=function(L,Y,de,pe,Ce){if(isNaN(L)||isNaN(Y)||isNaN(de)||isNaN(pe)||!vo(Ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var je=4/3*(Math.SQRT2-1)*de,tt=4/3*(Math.SQRT2-1)*pe;return ci(L+de,Y),Il(L+de,Y-tt,L+je,Y-pe,L,Y-pe),Il(L-je,Y-pe,L-de,Y-tt,L-de,Y),Il(L-de,Y+tt,L-je,Y+pe,L,Y+pe),Il(L+je,Y+pe,L+de,Y+tt,L+de,Y),Kd(Ce),this},p.__private__.circle=p.circle=function(L,Y,de,pe){if(isNaN(L)||isNaN(Y)||isNaN(de)||!vo(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(L,Y,de,de,pe)},p.setFont=function(L,Y,de){return de&&(Y=N(Y,de)),qt=In(L,Y,{disableWarning:!1}),this};var vg=p.__private__.getFont=p.getFont=function(){return gn[In.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var L,Y,de={};for(L in zn)if(zn.hasOwnProperty(L))for(Y in de[L]=[],zn[L])zn[L].hasOwnProperty(Y)&&de[L].push(Y);return de},p.addFont=function(L,Y,de,pe,Ce){var je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&je.indexOf(arguments[3])!==-1?Ce=arguments[3]:arguments[3]&&je.indexOf(arguments[3])==-1&&(de=N(de,pe)),Ce=Ce||"Identity-H",Gt.call(this,L,Y,de,Ce)};var yc,Xd=n.lineWidth||.200025,Lu=p.__private__.getLineWidth=p.getLineWidth=function(){return Xd},Eh=p.__private__.setLineWidth=p.setLineWidth=function(L){return Xd=L,oe(k(O(L))+" w"),this};p.__private__.setLineDash=Vt.API.setLineDash=Vt.API.setLineDashPattern=function(L,Y){if(L=L||[],Y=Y||0,isNaN(Y)||!Array.isArray(L))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return L=L.map(function(de){return k(O(de))}).join(" "),Y=k(O(Y)),oe("["+L+"] "+Y+" d"),this};var Qd=p.__private__.getLineHeight=p.getLineHeight=function(){return Qe*yc};p.__private__.getLineHeight=p.getLineHeight=function(){return Qe*yc};var Th=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(L){return typeof(L=L||1.15)=="number"&&(yc=L),this},wr=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return yc};Th(n.lineHeight);var ga=p.__private__.getHorizontalCoordinate=function(L){return O(L)},Ls=p.__private__.getVerticalCoordinate=function(L){return S===w.ADVANCED?L:Ht[K].mediaBox.topRightY-Ht[K].mediaBox.bottomLeftY-O(L)},Ah=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(L){return k(ga(L))},xo=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(L){return k(Ls(L))},Qi=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return cr(Qi)},p.__private__.setStrokeColor=p.setDrawColor=function(L,Y,de,pe){return Qi=Ki({ch1:L,ch2:Y,ch3:de,ch4:pe,pdfColorType:"draw",precision:2}),oe(Qi),this};var Cu=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return cr(Cu)},p.__private__.setFillColor=p.setFillColor=function(L,Y,de,pe){return Cu=Ki({ch1:L,ch2:Y,ch3:de,ch4:pe,pdfColorType:"fill",precision:2}),oe(Cu),this};var kl=n.textColor||"0 g",Lh=p.__private__.getTextColor=p.getTextColor=function(){return cr(kl)};p.__private__.setTextColor=p.setTextColor=function(L,Y,de,pe){return kl=Ki({ch1:L,ch2:Y,ch3:de,ch4:pe,pdfColorType:"text",precision:3}),this};var vc=n.charSpace,Ch=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(vc||0)};p.__private__.setCharSpace=p.setCharSpace=function(L){if(isNaN(L))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vc=L,this};var Iu=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(L){var Y=p.CapJoinStyles[L];if(Y===void 0)throw new Error("Line cap style of '"+L+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Iu=Y,oe(Y+" J"),this};var ts=0;p.__private__.setLineJoin=p.setLineJoin=function(L){var Y=p.CapJoinStyles[L];if(Y===void 0)throw new Error("Line join style of '"+L+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ts=Y,oe(Y+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(L){if(L=L||0,isNaN(L))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return oe(k(O(L))+" M"),this},p.GState=g0,p.setGState=function(L){(L=typeof L=="string"?Un[zr[L]]:Ih(null,L)).equals(ws)||(oe("/"+L.id+" gs"),ws=L)};var Ih=function(L,Y){if(!L||!zr[L]){var de=!1;for(var pe in Un)if(Un.hasOwnProperty(pe)&&Un[pe].equals(Y)){de=!0;break}if(de)Y=Un[pe];else{var Ce="GS"+(Object.keys(Un).length+1).toString(10);Un[Ce]=Y,Y.id=Ce}return L&&(zr[L]=Y.id),Ln.publish("addGState",Y),Y}};p.addGState=function(L,Y){return Ih(L,Y),this},p.saveGraphicsState=function(){return oe("q"),Wr.push({key:qt,size:Qe,color:kl}),this},p.restoreGraphicsState=function(){oe("Q");var L=Wr.pop();return qt=L.key,Qe=L.size,kl=L.color,ws=null,this},p.setCurrentTransformationMatrix=function(L){return oe(L.toString()+" cm"),this},p.comment=function(L){return oe("#"+L),this};var ns=function(L,Y){var de=L||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(je){isNaN(je)||(de=parseFloat(je))}});var pe=Y||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(je){isNaN(je)||(pe=parseFloat(je))}});var Ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ce},set:function(je){Ce=je.toString()}}),this},Jd=function(L,Y,de,pe){ns.call(this,L,Y),this.type="rect";var Ce=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ce},set:function(tt){isNaN(tt)||(Ce=parseFloat(tt))}});var je=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return je},set:function(tt){isNaN(tt)||(je=parseFloat(tt))}}),this},ku=function(){this.page=si,this.currentPage=K,this.pages=ze.slice(0),this.pagesContext=Ht.slice(0),this.x=Ii,this.y=pn,this.matrix=or,this.width=Zn(K),this.height=bo(K),this.outputDestination=rt,this.id="",this.objectNumber=-1};ku.prototype.restore=function(){si=this.page,K=this.currentPage,Ht=this.pagesContext,ze=this.pages,Ii=this.x,pn=this.y,or=this.matrix,ma(K,this.width),Zd(K,this.height),rt=this.outputDestination};var Ga=function(L,Y,de,pe,Ce){Gr.push(new ku),si=K=0,ze=[],Ii=L,pn=Y,or=Ce,Nt([de,pe])},Ru=function(L){if(xr[L])Gr.pop().restore();else{var Y=new ku,de="Xo"+(Object.keys(ai).length+1).toString(10);Y.id=de,xr[L]=de,ai[de]=Y,Ln.publish("addFormObject",Y),Gr.pop().restore()}};for(var Rl in p.beginFormObject=function(L,Y,de,pe,Ce){return Ga(L,Y,de,pe,Ce),this},p.endFormObject=function(L){return Ru(L),this},p.doFormObject=function(L,Y){var de=ai[xr[L]];return oe("q"),oe(Y.toString()+" cm"),oe("/"+de.id+" Do"),oe("Q"),this},p.getFormObject=function(L){var Y=ai[xr[L]];return{x:Y.x,y:Y.y,width:Y.width,height:Y.height,matrix:Y.matrix}},p.save=function(L,Y){return L=L||"generated.pdf",(Y=Y||{}).returnPromise=Y.returnPromise||!1,Y.returnPromise===!1?(Of(za(Ni()),L),typeof Of.unload=="function"&&Zt.setTimeout&&setTimeout(Of.unload,911),this):new Promise(function(de,pe){try{var Ce=Of(za(Ni()),L);typeof Of.unload=="function"&&Zt.setTimeout&&setTimeout(Of.unload,911),de(Ce)}catch(je){pe(je.message)}})},Vt.API)Vt.API.hasOwnProperty(Rl)&&(Rl==="events"&&Vt.API.events.length?function(L,Y){var de,pe,Ce;for(Ce=Y.length-1;Ce!==-1;Ce--)de=Y[Ce][0],pe=Y[Ce][1],L.subscribe.apply(L,[de].concat(typeof pe=="function"?[pe]:pe))}(Ln,Vt.API.events):p[Rl]=Vt.API[Rl]);var Zn=p.getPageWidth=function(L){return(Ht[L=L||K].mediaBox.topRightX-Ht[L].mediaBox.bottomLeftX)/lt},ma=p.setPageWidth=function(L,Y){Ht[L].mediaBox.topRightX=Y*lt+Ht[L].mediaBox.bottomLeftX},bo=p.getPageHeight=function(L){return(Ht[L=L||K].mediaBox.topRightY-Ht[L].mediaBox.bottomLeftY)/lt},Zd=p.setPageHeight=function(L,Y){Ht[L].mediaBox.topRightY=Y*lt+Ht[L].mediaBox.bottomLeftY};return p.internal={pdfEscape:Ke,getStyle:_h,getFont:vg,getFontSize:it,getCharSpace:Ch,getTextColor:Lh,getLineHeight:Qd,getLineHeightFactor:wr,getLineWidth:Lu,write:ut,getHorizontalCoordinate:ga,getVerticalCoordinate:Ls,getCoordinateString:Ah,getVerticalCoordinateString:xo,collections:{},newObject:_i,newAdditionalObject:Pi,newObjectDeferred:Ei,newObjectDeferredBegin:Cn,getFilters:Xi,putStream:Rr,events:Ln,scaleFactor:lt,pageSize:{getWidth:function(){return Zn(K)},setWidth:function(L){ma(K,L)},getHeight:function(){return bo(K)},setHeight:function(L){Zd(K,L)}},encryptionOptions:u,encryption:Sr,getEncryptor:fg,output:Ds,getNumberOfPages:Qn,pages:ze,out:oe,f2:j,f3:D,getPageInfo:wh,getPageInfoByObjId:tn,getCurrentPageInfo:hg,getPDFVersion:v,Point:ns,Rectangle:Jd,Matrix:Dt,hasHotfix:es},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Zn(K)},set:function(L){ma(K,L)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return bo(K)},set:function(L){Zd(K,L)},enumerable:!0,configurable:!0}),bn.call(p,Se),qt="F1",an(r,t),Ln.publish("initialized"),p}cp.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},cp.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},cp.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},cp.prototype.processOwnerPassword=function(n,e){return A_(T_(e).substr(0,5),n)},cp.prototype.encryptor=function(n,e){var t=T_(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return A_(t,i)}},g0.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||bi(n)!==bi(this))return!1;var i=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;i++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&i--;return i===0},Vt.API={events:[]},Vt.version="2.5.2";var Lr=Vt.API,kE=1,bh=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tp=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},fn=function(n){return n.toFixed(2)},Ju=function(n){return n.toFixed(5)};Lr.__acroform__={};var Ha=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},ik=function(n){return n*kE},ql=function(n){var e=new GO,t=It.internal.getHeight(n)||0,i=It.internal.getWidth(n)||0;return e.BBox=[0,0,Number(fn(i)),Number(fn(t))],e},FQ=Lr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},jQ=Lr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},BQ=Lr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Br=Lr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return BQ(n,e-1)},Ur=Lr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return FQ(n,e-1)},$r=Lr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return jQ(n,e-1)},UQ=Lr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=n[0],s=n[1],a=n[2],o=n[3],l={};return l.lowerLeft_X=t(r)||0,l.lowerLeft_Y=i(s+o)||0,l.upperRight_X=t(r+a)||0,l.upperRight_Y=i(s)||0,[Number(fn(l.lowerLeft_X)),Number(fn(l.lowerLeft_Y)),Number(fn(l.upperRight_X)),Number(fn(l.upperRight_Y))]},$Q=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,i=L_(n,t),r=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+r+" "+fn(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ql(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},L_=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=n.multiline?r.map(function(D){return D.split(`
`)}):r.map(function(D){return[D]});var s=t,a=It.internal.getHeight(n)||0;a=a<0?-a:a;var o=It.internal.getWidth(n)||0;o=o<0?-o:o;var l=function(D,O,Z){if(D+1<r.length){var J=O+" "+r[D+1][0];return mv(J,n,Z).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,d=mv("3",n,s).height,h=n.multiline?a-s:(a-d)/2,p=h+=2,m=0,v=0,b=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+mv(e,n,s=12).width+", FieldWidth:"+o+`
`;break}for(var x="",w=0,S=0;S<r.length;S++)if(r.hasOwnProperty(S)){var A=!1;if(r[S].length!==1&&b!==r[S].length-1){if((d+2)*(w+2)+2>a)continue e;x+=r[S][b],A=!0,v=S,S--}else{x=(x+=r[S][b]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var C=parseInt(S),N=l(C,x,s),k=S>=r.length-1;if(N&&!k){x+=" ",b=0;continue}if(N||k){if(k)v=C;else if(n.multiline&&(d+2)*(w+2)+2>a)continue e}else{if(!n.multiline||(d+2)*(w+2)+2>a)continue e;v=C}}for(var R="",U=m;U<=v;U++){var j=r[U];if(n.multiline){if(U===v){R+=j[b]+" ",b=(b+1)%j.length;continue}if(U===m){R+=j[j.length-1]+" ";continue}}R+=j[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,u=mv(R,n,s).width,n.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}e+=fn(c)+" "+fn(p)+` Td
`,e+="("+bh(R)+`) Tj
`,e+=-fn(c)+` 0 Td
`,p=-(s+2),u=0,m=A?v:v+1,w++,x=""}break}return i.text=e,i.fontSize=s,i},mv=function(n,e,t){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:r}},HQ={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},WQ=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===t.type&&i.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},zQ=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var i=t,r=n[t];e.internal.newObjectDeferredBegin(r.objId,!0),bi(r)==="object"&&typeof r.putStream=="function"&&r.putStream(),delete n[i]}},GQ=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Al.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(HQ)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");kE=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new VO,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];s.objId=void 0,s.hasAnnotation&&WQ(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(i,r){var s=!i;for(var a in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var o=i[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=UQ(o.Rect,r)),r.internal.newObjectDeferredBegin(o.objId,!0),o.DA=It.createDefaultAppearanceStream(o),bi(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=$Q(o);l.push({key:"AP",value:"<</N "+u+">>"}),r.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var d="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var m=p[a];typeof m=="function"&&(m=m.call(r,o)),d+="/"+a+" "+m+" ",r.internal.acroformPlugin.xForms.indexOf(m)>=0||r.internal.acroformPlugin.xForms.push(m)}}else typeof(m=p)=="function"&&(m=m.call(r,o)),d+="/"+a+" "+m,r.internal.acroformPlugin.xForms.indexOf(m)>=0||r.internal.acroformPlugin.xForms.push(m);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}r.internal.putStream({additionalKeyValues:l,objectId:o.objId}),r.internal.out("endobj")}s&&zQ(r.internal.acroformPlugin.xForms,r)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},zO=Lr.__acroform__.arrayToPdfArray=function(n,e,t){var i=function(a){return a};if(Array.isArray(n)){for(var r="[",s=0;s<n.length;s++)switch(s!==0&&(r+=" "),bi(n[s])){case"boolean":case"number":case"object":r+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(i=t.internal.getEncryptor(e)),r+="("+bh(i(n[s].toString()))+")"):r+=n[s].toString()}return r+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},fS=function(n,e,t){var i=function(r){return r};return e!==void 0&&t&&(i=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+bh(i(n))+")"},rc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};rc.prototype.toString=function(){return this.objId+" 0 R"},rc.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},rc.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var i=e[t],r=this[i];r&&(Array.isArray(r)?n.push({key:i,value:zO(r,this.objId,this.scope)}):r instanceof rc?(r.scope=this.scope,n.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&n.push({key:i,value:r}))}return n};var GO=function(){rc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ha(GO,rc);var VO=function(){rc.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(i){return i};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+bh(t(n))+")"}},set:function(t){n=t}})};Ha(VO,rc);var Al=function n(){rc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Br(e,3)},set:function(x){x?this.F=Ur(e,3):this.F=$r(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');t=x}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(x){i=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(x){i[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(x){i[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(x){i[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(x){i[3]=x}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof tx)return;s="FieldObject"+n.FieldNum++}var x=function(w){return w};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+bh(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/kE:c},set:function(x){c=x}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof tx||this instanceof Nd))return fS(d,this.objId,this.scope)},set:function(x){x=x.toString(),d=x}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof as?h:fS(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=this instanceof as?x:x.substr(0,1)==="("?tp(x.substr(1,x.length-2)):tp(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof as?tp(h.substr(1,h.length-1)):h},set:function(x){x=x.toString(),h=this instanceof as?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof as?p:fS(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=this instanceof as?x:x.substr(0,1)==="("?tp(x.substr(1,x.length-2)):tp(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof as?tp(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof as?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(x){x=!!x,v=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(x){m=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,1)},set:function(x){x?this.Ff=Ur(this.Ff,1):this.Ff=$r(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,2)},set:function(x){x?this.Ff=Ur(this.Ff,2):this.Ff=$r(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,3)},set:function(x){x?this.Ff=Ur(this.Ff,3):this.Ff=$r(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');b=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(b){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};Ha(Al,rc);var eh=function(){Al.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return zO(e,this.objId,this.scope)},set:function(t){var i,r;r=[],typeof(i=t)=="string"&&(r=function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c}(i,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,18)},set:function(t){t?this.Ff=Ur(this.Ff,18):this.Ff=$r(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ur(this.Ff,19):this.Ff=$r(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,20)},set:function(t){t?(this.Ff=Ur(this.Ff,20),e.sort()):this.Ff=$r(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,22)},set:function(t){t?this.Ff=Ur(this.Ff,22):this.Ff=$r(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,23)},set:function(t){t?this.Ff=Ur(this.Ff,23):this.Ff=$r(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,27)},set:function(t){t?this.Ff=Ur(this.Ff,27):this.Ff=$r(this.Ff,27)}}),this.hasAppearanceStream=!1};Ha(eh,Al);var th=function(){eh.call(this),this.fontName="helvetica",this.combo=!1};Ha(th,eh);var nh=function(){th.call(this),this.combo=!0};Ha(nh,th);var km=function(){nh.call(this),this.edit=!0};Ha(km,nh);var as=function(){Al.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,15)},set:function(t){t?this.Ff=Ur(this.Ff,15):this.Ff=$r(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,16)},set:function(t){t?this.Ff=Ur(this.Ff,16):this.Ff=$r(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,17)},set:function(t){t?this.Ff=Ur(this.Ff,17):this.Ff=$r(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,26)},set:function(t){t?this.Ff=Ur(this.Ff,26):this.Ff=$r(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,r=[];for(i in r.push("<<"),e)r.push("/"+i+" ("+bh(t(e[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(t){bi(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ha(as,Al);var Rm=function(){as.call(this),this.pushButton=!0};Ha(Rm,as);var ih=function(){as.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Ha(ih,as);var tx=function(){var n,e;Al.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var t,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),i)a.push("/"+s+" ("+bh(r(i[s]))+")");return a.push(">>"),a.join(`
`)},set:function(r){bi(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=It.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ha(tx,Al),ih.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},ih.prototype.createOption=function(n){var e=new tx;return e.Parent=this,e.optionName=n,this.Kids.push(e),VQ.call(this.scope,e),e};var Pm=function(){as.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=It.CheckBox.createAppearanceStream()};Ha(Pm,as);var Nd=function(){Al.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,13)},set:function(e){e?this.Ff=Ur(this.Ff,13):this.Ff=$r(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,21)},set:function(e){e?this.Ff=Ur(this.Ff,21):this.Ff=$r(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,23)},set:function(e){e?this.Ff=Ur(this.Ff,23):this.Ff=$r(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,24)},set:function(e){e?this.Ff=Ur(this.Ff,24):this.Ff=$r(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,25)},set:function(e){e?this.Ff=Ur(this.Ff,25):this.Ff=$r(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,26)},set:function(e){e?this.Ff=Ur(this.Ff,26):this.Ff=$r(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ha(Nd,Al);var Nm=function(){Nd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Br(this.Ff,14)},set:function(n){n?this.Ff=Ur(this.Ff,14):this.Ff=$r(this.Ff,14)}}),this.password=!0};Ha(Nm,Nd);var It={CheckBox:{createAppearanceStream:function(){return{N:{On:It.CheckBox.YesNormal},D:{On:It.CheckBox.YesPushDown,Off:It.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=ql(n);e.scope=n.scope;var t=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=L_(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+fn(It.internal.getWidth(n))+" "+fn(It.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+i+" "+fn(s.fontSize)+" Tf "+r),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=ql(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),r=[],s=It.internal.getHeight(n),a=It.internal.getWidth(n),o=L_(n,n.caption);return r.push("1 g"),r.push("0 0 "+fn(a)+" "+fn(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+fn(a-1)+" "+fn(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+t+" "+fn(o.fontSize)+" Tf "+i),r.push(o.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=ql(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+fn(It.internal.getWidth(n))+" "+fn(It.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:It.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=It.RadioButton.Circle.YesNormal,e.D[n]=It.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=ql(n);e.scope=n.scope;var t=[],i=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=It.internal.Bezier_C,s=Number((i*r).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ju(It.internal.getWidth(n)/2)+" "+Ju(It.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ql(n);e.scope=n.scope;var t=[],i=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*It.internal.Bezier_C).toFixed(5)),a=Number((i*It.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ju(It.internal.getWidth(n)/2)+" "+Ju(It.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ju(It.internal.getWidth(n)/2)+" "+Ju(It.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=ql(n);e.scope=n.scope;var t=[],i=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*It.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ju(It.internal.getWidth(n)/2)+" "+Ju(It.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:It.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=It.RadioButton.Cross.YesNormal,e.D[n]=It.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=ql(n);e.scope=n.scope;var t=[],i=It.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+fn(It.internal.getWidth(n)-2)+" "+fn(It.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(fn(i.x1.x)+" "+fn(i.x1.y)+" m"),t.push(fn(i.x2.x)+" "+fn(i.x2.y)+" l"),t.push(fn(i.x4.x)+" "+fn(i.x4.y)+" m"),t.push(fn(i.x3.x)+" "+fn(i.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ql(n);e.scope=n.scope;var t=It.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+fn(It.internal.getWidth(n))+" "+fn(It.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+fn(It.internal.getWidth(n)-2)+" "+fn(It.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(fn(t.x1.x)+" "+fn(t.x1.y)+" m"),i.push(fn(t.x2.x)+" "+fn(t.x2.y)+" l"),i.push(fn(t.x4.x)+" "+fn(t.x4.y)+" m"),i.push(fn(t.x3.x)+" "+fn(t.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=ql(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+fn(It.internal.getWidth(n))+" "+fn(It.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};It.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=It.internal.getWidth(n),t=It.internal.getHeight(n),i=Math.min(e,t);return{x1:{x:(e-i)/2,y:(t-i)/2+i},x2:{x:(e-i)/2+i,y:(t-i)/2},x3:{x:(e-i)/2,y:(t-i)/2},x4:{x:(e-i)/2+i,y:(t-i)/2+i}}}},It.internal.getWidth=function(n){var e=0;return bi(n)==="object"&&(e=ik(n.Rect[2])),e},It.internal.getHeight=function(n){var e=0;return bi(n)==="object"&&(e=ik(n.Rect[3])),e};var VQ=Lr.addField=function(n){if(GQ(this,n),!(n instanceof Al))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Lr.AcroFormChoiceField=eh,Lr.AcroFormListBox=th,Lr.AcroFormComboBox=nh,Lr.AcroFormEditBox=km,Lr.AcroFormButton=as,Lr.AcroFormPushButton=Rm,Lr.AcroFormRadioButton=ih,Lr.AcroFormCheckBox=Pm,Lr.AcroFormTextField=Nd,Lr.AcroFormPasswordField=Nm,Lr.AcroFormAppearance=It,Lr.AcroForm={ChoiceField:eh,ListBox:th,ComboBox:nh,EditBox:km,Button:as,PushButton:Rm,RadioButton:ih,CheckBox:Pm,TextField:Nd,PasswordField:Nm,Appearance:It},Vt.AcroForm={ChoiceField:eh,ListBox:th,ComboBox:nh,EditBox:km,Button:as,PushButton:Rm,RadioButton:ih,CheckBox:Pm,TextField:Nd,PasswordField:Nm,Appearance:It};var YQ=Vt.AcroForm;function YO(n){return n.reduce(function(e,t,i){return e[t]=i,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(D,O){var Z,J,le,H,V,z=e;if((O=O||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(N(D))for(V in t)for(le=t[V],Z=0;Z<le.length;Z+=1){for(H=!0,J=0;J<le[Z].length;J+=1)if(le[Z][J]!==void 0&&le[Z][J]!==D[J]){H=!1;break}if(H===!0){z=V;break}}else for(V in t)for(le=t[V],Z=0;Z<le.length;Z+=1){for(H=!0,J=0;J<le[Z].length;J+=1)if(le[Z][J]!==void 0&&le[Z][J]!==D.charCodeAt(J)){H=!1;break}if(H===!0){z=V;break}}return z===e&&O!==e&&(z=O),z},r=function D(O){for(var Z=this.internal.write,J=this.internal.putStream,le=(0,this.internal.getFilters)();le.indexOf("FlateEncode")!==-1;)le.splice(le.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:O.width}),H.push({key:"Height",value:O.height}),O.colorSpace===b.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===b.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var V="",z=0,W=O.transparency.length;z<W;z++)V+=O.transparency[z]+" "+O.transparency[z]+" ";H.push({key:"Mask",value:"["+V+"]"})}O.sMask!==void 0&&H.push({key:"SMask",value:O.objectId+1+" 0 R"});var te=O.filter!==void 0?["/"+O.filter]:void 0;if(J({data:O.data,additionalKeyValues:H,alreadyAppliedFilters:te,objectId:O.objectId}),Z("endobj"),"sMask"in O&&O.sMask!==void 0){var fe="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,F={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:fe,data:O.sMask};"filter"in O&&(F.filter=O.filter),D.call(this,F)}if(O.colorSpace===b.INDEXED){var K=this.internal.newObject();J({data:R(new Uint8Array(O.palette)),objectId:K}),Z("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var O in D)r.call(this,D[O])},a=function(){var D,O=this.internal.collections.addImage_images,Z=this.internal.write;for(var J in O)Z("/I"+(D=O[J]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(D){return typeof n["process"+D.toUpperCase()]=="function"},d=function(D){return bi(D)==="object"&&D.nodeType===1},h=function(D,O){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var Z=""+D.getAttribute("src");if(Z.indexOf("data:image/")===0)return Im(unescape(Z).split("base64,").pop());var J=n.loadFile(Z,!0);if(J!==void 0)return J}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var le;switch(O){case"PNG":le="image/png";break;case"WEBP":le="image/webp";break;case"JPEG":case"JPG":default:le="image/jpeg"}return Im(D.toDataURL(le,1).split("base64,").pop())}},p=function(D){var O=this.internal.collections.addImage_images;if(O){for(var Z in O)if(D===O[Z].alias)return O[Z]}},m=function(D,O,Z){return D||O||(D=-96,O=-96),D<0&&(D=-1*Z.width*72/D/this.internal.scaleFactor),O<0&&(O=-1*Z.height*72/O/this.internal.scaleFactor),D===0&&(D=O*Z.width/Z.height),O===0&&(O=D*Z.height/Z.width),[D,O]},v=function(D,O,Z,J,le,H){var V=m.call(this,Z,J,le),z=this.internal.getCoordinateString,W=this.internal.getVerticalCoordinateString,te=l.call(this);if(Z=V[0],J=V[1],te[le.index]=le,H){H*=Math.PI/180;var fe=Math.cos(H),F=Math.sin(H),K=function(ae){return ae.toFixed(4)},ee=[K(fe),K(F),K(-1*F),K(fe),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,z(D),W(O+J),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([z(Z),"0","0",z(J),"0","0","cm"].join(" "))):this.internal.write([z(Z),"0","0",z(J),z(D),W(O+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+le.index+" Do"),this.internal.write("Q")},b=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=n.__addimage__.sHashCode=function(D){var O,Z,J=0;if(typeof D=="string")for(Z=D.length,O=0;O<Z;O++)J=(J<<5)-J+D.charCodeAt(O),J|=0;else if(N(D))for(Z=D.byteLength/2,O=0;O<Z;O++)J=(J<<5)-J+D[O],J|=0;return J},S=n.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var O=!0;return D.length===0&&(O=!1),D.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(O=!1),O},A=n.__addimage__.extractImageFromDataUrl=function(D){var O=(D=D||"").split("base64,"),Z=null;if(O.length===2){var J=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(J)&&(Z={mimeType:J[1],charset:J[2],data:O[1]})}return Z},C=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(D){return C()&&D instanceof ArrayBuffer};var N=n.__addimage__.isArrayBufferView=function(D){return C()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},k=n.__addimage__.binaryStringToUint8Array=function(D){for(var O=D.length,Z=new Uint8Array(O),J=0;J<O;J++)Z[J]=D.charCodeAt(J);return Z},R=n.__addimage__.arrayBufferToBinaryString=function(D){for(var O="",Z=N(D)?D:new Uint8Array(D),J=0;J<Z.length;J+=8192)O+=String.fromCharCode.apply(null,Z.subarray(J,J+8192));return O};n.addImage=function(){var D,O,Z,J,le,H,V,z,W;if(typeof arguments[1]=="number"?(O=e,Z=arguments[1],J=arguments[2],le=arguments[3],H=arguments[4],V=arguments[5],z=arguments[6],W=arguments[7]):(O=arguments[1],Z=arguments[2],J=arguments[3],le=arguments[4],H=arguments[5],V=arguments[6],z=arguments[7],W=arguments[8]),bi(D=arguments[0])==="object"&&!d(D)&&"imageData"in D){var te=D;D=te.imageData,O=te.format||O||e,Z=te.x||Z||0,J=te.y||J||0,le=te.w||te.width||le,H=te.h||te.height||H,V=te.alias||V,z=te.compression||z,W=te.rotation||te.angle||W}var fe=this.internal.getFilters();if(z===void 0&&fe.indexOf("FlateEncode")!==-1&&(z="SLOW"),isNaN(Z)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var F=U.call(this,D,O,V,z);return v.call(this,Z,J,le,H,F,W),this};var U=function(D,O,Z,J){var le,H,V;if(typeof D=="string"&&i(D)===e){D=unescape(D);var z=j(D,!1);(z!==""||(z=n.loadFile(D,!0))!==void 0)&&(D=z)}if(d(D)&&(D=h(D,O)),O=i(D,O),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((V=Z)==null||V.length===0)&&(Z=function(W){return typeof W=="string"||N(W)?w(W):N(W.data)?w(W.data):null}(D)),(le=p.call(this,Z))||(C()&&(D instanceof Uint8Array||O==="RGBA"||(H=D,D=k(D))),le=this["process"+O.toUpperCase()](D,c.call(this),Z,function(W){return W&&typeof W=="string"&&(W=W.toUpperCase()),W in n.image_compression?W:x.NONE}(J),H)),!le)throw new Error("An unknown error occurred whilst processing the image.");return le},j=n.__addimage__.convertBase64ToBinaryString=function(D,O){var Z;O=typeof O!="boolean"||O;var J,le="";if(typeof D=="string"){J=(Z=A(D))!==null?Z.data:D;try{le=Im(J)}catch(H){if(O)throw S(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return le};n.getImageProperties=function(D){var O,Z,J="";if(d(D)&&(D=h(D)),typeof D=="string"&&i(D)===e&&((J=j(D,!1))===""&&(J=n.loadFile(D)||""),D=J),Z=i(D),!u(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(!C()||D instanceof Uint8Array||(D=k(D)),!(O=this["process"+Z.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=Z,O}})(Vt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Vt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var i,r,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((i=c[d]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){i=c[h];var p=this.internal.pdfEscape,m=this.internal.getEncryptor(t.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(v.objId),w=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+p(x(i.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(x(w))+") >>",v.content=s;var S=v.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+S,i.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":r="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var A=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+p(m(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+A+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var C=this.annotations._nameMap[i.options.name];i.options.pageNumber=C.page,i.options.top=C.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+p(m(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var N=o(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+N+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var i=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":i.pageContext.annotations.push(t)}},n.link=function(t,i,r,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:c(i),w:l(t+r),h:c(i+s)},options:a,type:"link"})},n.textWithLink=function(t,i,r,s){var a,o,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var u=this.splitTextToSize(t,o).length;a=Math.ceil(c*u)}else o=l,a=c;return this.text(t,i,r,s),r+=.2*c,s.align==="center"&&(i-=l/2),s.align==="right"&&(i-=l),this.link(i,r-c,o,a,s),l},n.getTextWidth=function(t){var i=this.internal.getFontSize();return this.getStringUnitWidth(t)*i/this.internal.scaleFactor}}(Vt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=n.__arabicParser__.isArabicEndLetter=function(v){return a(v)&&s(v)&&e[v.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(v){return a(v)&&r.indexOf(v.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return a(v)&&s(v)&&e[v.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(v){return a(v)&&s(v)&&e[v.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(v){return a(v)&&s(v)&&e[v.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(v){return a(v)&&s(v)&&e[v.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(v){var b=0,x=t,w="",S=0;for(b=0;b<v.length;b+=1)x[v.charCodeAt(b)]!==void 0?(S++,typeof(x=x[v.charCodeAt(b)])=="number"&&(w+=String.fromCharCode(x),x=t,S=0),b===v.length-1&&(x=t,w+=v.charAt(b-(S-1)),b-=S-1,S=0)):(x=t,w+=v.charAt(b-S),b-=S,S=0);return w};n.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&i[v.charCodeAt(0)]!==void 0};var h=n.__arabicParser__.getCorrectForm=function(v,b,x){return a(v)?s(v)===!1?-1:!c(v)||!a(b)&&!a(x)||!a(x)&&o(b)||o(v)&&!a(b)||o(v)&&l(b)||o(v)&&o(b)?0:u(v)&&a(b)&&!o(b)&&a(x)&&c(x)?3:o(v)||!a(x)?1:2:-1},p=function(v){var b=0,x=0,w=0,S="",A="",C="",N=(v=v||"").split("\\s+"),k=[];for(b=0;b<N.length;b+=1){for(k.push(""),x=0;x<N[b].length;x+=1)S=N[b][x],A=N[b][x-1],C=N[b][x+1],a(S)?(w=h(S,A,C),k[b]+=w!==-1?String.fromCharCode(e[S.charCodeAt(0)][w]):S):k[b]+=S;k[b]=d(k[b])}return k.join(" ")},m=n.__arabicParser__.processArabic=n.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(b)){var w=0;for(x=[],w=0;w<b.length;w+=1)Array.isArray(b[w])?x.push([p(b[w][0]),b[w][1],b[w][2]]):x.push([p(b[w])]);v=x}else v=p(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};n.events.push(["preProcessText",m])}(Vt.API),Vt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,i){var r;if((t=t||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Vt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(v){l=v}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(v){m=v}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){i.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,p=0,m=0,v=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=c.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(S,A){return S.concat(b.splitTextToSize(A,x))},[])):l=Array.isArray(l)?l:[l];for(var w=0;w<l.length;w++)p<(v=this.getStringUnitWidth(l[w],{font:d})*u)&&(p=v);return p!==0&&(m=l.length),{w:p/=h,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,u,d,h){if(i.call(this),!u)throw new Error("No data for PDF table.");var p,m,v,b,x=[],w=[],S=[],A={},C={},N=[],k=[],R=(h=h||{}).autoSize||!1,U=h.printHeaders!==!1,j=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},e),O=typeof h.padding=="number"?h.padding:3,Z=h.headerBackgroundColor||"#c8c8c8",J=h.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=Z,this.internal.__cell__.headerTextColor=J,this.setFontSize(j),d==null)w=x=Object.keys(u[0]),S=x.map(function(){return"left"});else if(Array.isArray(d)&&bi(d[0])==="object")for(x=d.map(function(te){return te.name}),w=d.map(function(te){return te.prompt||te.name||""}),S=d.map(function(te){return te.align||"left"}),p=0;p<d.length;p+=1)C[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(w=x=d,S=x.map(function(){return"left"}));if(R||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<x.length;p+=1){for(A[b=x[p]]=u.map(function(te){return te[b]}),this.setFont(void 0,"bold"),N.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=A[b],this.setFont(void 0,"normal"),v=0;v<m.length;v+=1)N.push(this.getTextDimensions(m[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[b]=Math.max.apply(null,N)+O+O,N=[]}if(U){var le={};for(p=0;p<x.length;p+=1)le[x[p]]={},le[x[p]].text=w[p],le[x[p]].align=S[p];var H=o.call(this,le,C);k=x.map(function(te){return new s(l,c,C[te],H,le[te].text,void 0,le[te].align)}),this.setTableHeaderRow(k),this.printHeaderRow(1,!1)}var V=d.reduce(function(te,fe){return te[fe.name]=fe.align,te},{});for(p=0;p<u.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:u[p]},this);var z=o.call(this,u[p],C);for(v=0;v<x.length;v+=1){var W=u[p][x[v]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:v,data:W},this),a.call(this,new s(l,c,C[x[v]],z,W,p+2,V[x[v]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(p){var m=l[p];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/h+u+u},this).reduce(function(p,m){return Math.max(p,m)},0)};n.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(m)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}}(Vt.API);var qO={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},KO=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],C_=YO(KO),XO=[100,200,300,400,500,600,700,800,900],qQ=YO(XO);function I_(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return qO[s=s||"normal"]?s:"normal"}(n.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),r=function(s){return typeof C_[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:i,stretch:r,src:n.src||[],ref:n.ref||{name:e,style:[r,t,i].join(" ")}}}function rk(n,e,t,i){var r;for(r=t;r>=0&&r<e.length;r+=i)if(n[e[r]])return n[e[r]];for(r=t;r>=0&&r<e.length;r-=i)if(n[e[r]])return n[e[r]]}var KQ={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},sk={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ak(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function XQ(n,e,t){for(var i=(t=t||{}).defaultFontFamily||"times",r=Object.assign({},KQ,t.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(r[(s=I_(e[o])).family]&&(s.family=r[s.family]),n.hasOwnProperty(s.family)){a=n[s.family];break}if(!(a=a||n[i]))throw new Error("Could not find a font-family for the rule '"+ak(s)+"' and default family '"+i+"'.");if(a=function(l,c){if(c[l])return c[l];var u=C_[l],d=u<=C_.normal?-1:1,h=rk(c,KO,u,d);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(s.stretch,a),a=function(l,c){if(c[l])return c[l];for(var u=qO[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=qQ[l],d=rk(c,XO,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+ak(s)+"'.");return a}function ok(n){return n.trimLeft()}function QQ(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function JQ(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var yv,lk,ck,hS=["times"];(function(n){var e,t,i,r,s,a,o,l,c,u=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new a,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new a,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=F;Object.defineProperty(this,"pdf",{get:function(){return K}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(Ie){ee=!!Ie}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(Ie){ae=!!Ie}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Ie){isNaN(Ie)||(ce=Ie)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(Ie){isNaN(Ie)||(ye=Ie)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ie){var oe;typeof Ie=="number"?oe=[Ie,Ie,Ie,Ie]:((oe=new Array(4))[0]=Ie[0],oe[1]=Ie.length>=2?Ie[1]:oe[0],oe[2]=Ie.length>=3?Ie[2]:oe[0],oe[3]=Ie.length>=4?Ie[3]:oe[1]),c.margin=oe}});var be=!1;Object.defineProperty(this,"autoPaging",{get:function(){return be},set:function(Ie){be=Ie}});var Te=0;Object.defineProperty(this,"lastBreak",{get:function(){return Te},set:function(Ie){Te=Ie}});var Xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Xe},set:function(Ie){Xe=Ie}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ie){Ie instanceof u&&(c=Ie)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ie){c.path=Ie}});var ze=[];Object.defineProperty(this,"ctxStack",{get:function(){return ze},set:function(Ie){ze=Ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ie){var oe;oe=h(Ie),this.ctx.fillStyle=oe.style,this.ctx.isFillTransparent=oe.a===0,this.ctx.fillOpacity=oe.a,this.pdf.setFillColor(oe.r,oe.g,oe.b,{a:oe.a}),this.pdf.setTextColor(oe.r,oe.g,oe.b,{a:oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ie){var oe=h(Ie);this.ctx.strokeStyle=oe.style,this.ctx.isStrokeTransparent=oe.a===0,this.ctx.strokeOpacity=oe.a,oe.a===0?this.pdf.setDrawColor(255,255,255):(oe.a,this.pdf.setDrawColor(oe.r,oe.g,oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ie){["butt","round","square"].indexOf(Ie)!==-1&&(this.ctx.lineCap=Ie,this.pdf.setLineCap(Ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ie){isNaN(Ie)||(this.ctx.lineWidth=Ie,this.pdf.setLineWidth(Ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ie){["bevel","round","miter"].indexOf(Ie)!==-1&&(this.ctx.lineJoin=Ie,this.pdf.setLineJoin(Ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ie){isNaN(Ie)||(this.ctx.miterLimit=Ie,this.pdf.setMiterLimit(Ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ie){this.ctx.textBaseline=Ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ie){["right","end","center","left","start"].indexOf(Ie)!==-1&&(this.ctx.textAlign=Ie)}});var He=null;function rt(Ie,oe){if(He===null){var ut=function(dt){var Se=[];return Object.keys(dt).forEach(function(Qe){dt[Qe].forEach(function(Ze){var it=null;switch(Ze){case"bold":it={family:Qe,weight:"bold"};break;case"italic":it={family:Qe,style:"italic"};break;case"bolditalic":it={family:Qe,weight:"bold",style:"italic"};break;case"":case"normal":it={family:Qe}}it!==null&&(it.ref={name:Qe,style:Ze},Se.push(it))})}),Se}(Ie.getFontList());He=function(dt){for(var Se={},Qe=0;Qe<dt.length;++Qe){var Ze=I_(dt[Qe]),it=Ze.family,et=Ze.stretch,mt=Ze.style,Rt=Ze.weight;Se[it]=Se[it]||{},Se[it][et]=Se[it][et]||{},Se[it][et][mt]=Se[it][et][mt]||{},Se[it][et][mt][Rt]=Ze}return Se}(ut.concat(oe))}return He}var ft=null;Object.defineProperty(this,"fontFaces",{get:function(){return ft},set:function(Ie){He=null,ft=Ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ie){var oe;if(this.ctx.font=Ie,(oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ie))!==null){var ut=oe[1],dt=(oe[2],oe[3]),Se=oe[4],Qe=(oe[5],oe[6]),Ze=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Se)[2];Se=Math.floor(Ze==="px"?parseFloat(Se)*this.pdf.internal.scaleFactor:Ze==="em"?parseFloat(Se)*this.pdf.getFontSize():parseFloat(Se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Se);var it=function(Pt){var qt,lt,Ii=[],pn=Pt.trim();if(pn==="")return hS;if(pn in sk)return[sk[pn]];for(;pn!=="";){switch(lt=null,qt=(pn=ok(pn)).charAt(0)){case'"':case"'":lt=QQ(pn.substring(1),qt);break;default:lt=JQ(pn)}if(lt===null||(Ii.push(lt[0]),(pn=ok(lt[1]))!==""&&pn.charAt(0)!==","))return hS;pn=pn.replace(/^,/,"")}return Ii}(Qe);if(this.fontFaces){var et=XQ(rt(this.pdf,this.fontFaces),it.map(function(Pt){return{family:Pt,stretch:"normal",weight:dt,style:ut}}));this.pdf.setFont(et.ref.name,et.ref.style)}else{var mt="";(dt==="bold"||parseInt(dt,10)>=700||ut==="bold")&&(mt="bold"),ut==="italic"&&(mt+="italic"),mt.length===0&&(mt="normal");for(var Rt="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},$t=0;$t<it.length;$t++){if(this.pdf.internal.getFont(it[$t],mt,{noFallback:!0,disableWarning:!0})!==void 0){Rt=it[$t];break}if(mt==="bolditalic"&&this.pdf.internal.getFont(it[$t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rt=it[$t],mt="bold";else if(this.pdf.internal.getFont(it[$t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rt=it[$t],mt="normal";break}}if(Rt===""){for(var en=0;en<it.length;en++)if(at[it[en]]){Rt=at[it[en]];break}}Rt=Rt===""?"Times":Rt,this.pdf.setFont(Rt,mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ie){this.ctx.globalCompositeOperation=Ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ie){this.ctx.globalAlpha=Ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ie){this.ctx.lineDashOffset=Ie,fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ie){this.ctx.lineDash=Ie,fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ie){this.ctx.ignoreClearRect=!!Ie}})};d.prototype.setLineDash=function(F){this.lineDash=F},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){A.call(this,"fill",!1)},d.prototype.stroke=function(){A.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(F,K){if(isNaN(F)||isNaN(K))throw Ri.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new a(F,K));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new a(F,K)},d.prototype.closePath=function(){var F=new a(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&bi(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){F=new a(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(F.x,F.y)},d.prototype.lineTo=function(F,K){if(isNaN(F)||isNaN(K))throw Ri.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new a(F,K));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new a(ee.x,ee.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},d.prototype.quadraticCurveTo=function(F,K,ee,ae){if(isNaN(ee)||isNaN(ae)||isNaN(F)||isNaN(K))throw Ri.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new a(ee,ae)),ye=this.ctx.transform.applyToPoint(new a(F,K));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new a(ce.x,ce.y)},d.prototype.bezierCurveTo=function(F,K,ee,ae,ce,ye){if(isNaN(ce)||isNaN(ye)||isNaN(F)||isNaN(K)||isNaN(ee)||isNaN(ae))throw Ri.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var be=this.ctx.transform.applyToPoint(new a(ce,ye)),Te=this.ctx.transform.applyToPoint(new a(F,K)),Xe=this.ctx.transform.applyToPoint(new a(ee,ae));this.path.push({type:"bct",x1:Te.x,y1:Te.y,x2:Xe.x,y2:Xe.y,x:be.x,y:be.y}),this.ctx.lastPoint=new a(be.x,be.y)},d.prototype.arc=function(F,K,ee,ae,ce,ye){if(isNaN(F)||isNaN(K)||isNaN(ee)||isNaN(ae)||isNaN(ce))throw Ri.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var be=this.ctx.transform.applyToPoint(new a(F,K));F=be.x,K=be.y;var Te=this.ctx.transform.applyToPoint(new a(0,ee)),Xe=this.ctx.transform.applyToPoint(new a(0,0));ee=Math.sqrt(Math.pow(Te.x-Xe.x,2)+Math.pow(Te.y-Xe.y,2))}Math.abs(ce-ae)>=2*Math.PI&&(ae=0,ce=2*Math.PI),this.path.push({type:"arc",x:F,y:K,radius:ee,startAngle:ae,endAngle:ce,counterclockwise:ye})},d.prototype.arcTo=function(F,K,ee,ae,ce){throw new Error("arcTo not implemented.")},d.prototype.rect=function(F,K,ee,ae){if(isNaN(F)||isNaN(K)||isNaN(ee)||isNaN(ae))throw Ri.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,K),this.lineTo(F+ee,K),this.lineTo(F+ee,K+ae),this.lineTo(F,K+ae),this.lineTo(F,K),this.lineTo(F+ee,K),this.lineTo(F,K)},d.prototype.fillRect=function(F,K,ee,ae){if(isNaN(F)||isNaN(K)||isNaN(ee)||isNaN(ae))throw Ri.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,K,ee,ae),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},d.prototype.strokeRect=function(F,K,ee,ae){if(isNaN(F)||isNaN(K)||isNaN(ee)||isNaN(ae))throw Ri.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(F,K,ee,ae),this.stroke())},d.prototype.clearRect=function(F,K,ee,ae){if(isNaN(F)||isNaN(K)||isNaN(ee)||isNaN(ae))throw Ri.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,K,ee,ae))},d.prototype.save=function(F){F=typeof F!="boolean"||F;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},d.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(K),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(F){var K,ee,ae,ce;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))K=0,ee=0,ae=0,ce=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(ye!==null)K=parseInt(ye[1]),ee=parseInt(ye[2]),ae=parseInt(ye[3]),ce=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)K=parseInt(ye[1]),ee=parseInt(ye[2]),ae=parseInt(ye[3]),ce=parseFloat(ye[4]);else{if(ce=1,typeof F=="string"&&F.charAt(0)!=="#"){var be=new $O(F);F=be.ok?be.toHex():"#000000"}F.length===4?(K=F.substring(1,2),K+=K,ee=F.substring(2,3),ee+=ee,ae=F.substring(3,4),ae+=ae):(K=F.substring(1,3),ee=F.substring(3,5),ae=F.substring(5,7)),K=parseInt(K,16),ee=parseInt(ee,16),ae=parseInt(ae,16)}}return{r:K,g:ee,b:ae,a:ce,style:F}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(F,K,ee,ae){if(isNaN(K)||isNaN(ee)||typeof F!="string")throw Ri.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!p.call(this)){var ce=z(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;O.call(this,{text:F,x:K,y:ee,scale:ye,angle:ce,align:this.textAlign,maxWidth:ae})}},d.prototype.strokeText=function(F,K,ee,ae){if(isNaN(K)||isNaN(ee)||typeof F!="string")throw Ri.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){ae=isNaN(ae)?void 0:ae;var ce=z(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;O.call(this,{text:F,x:K,y:ee,scale:ye,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:ae})}},d.prototype.measureText=function(F){if(typeof F!="string")throw Ri.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,ee=this.pdf.internal.scaleFactor,ae=K.internal.getFontSize(),ce=K.getStringUnitWidth(F)*ae/K.internal.scaleFactor,ye=function(be){var Te=(be=be||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Te}}),this};return new ye({width:ce*=Math.round(96*ee/72*1e4)/1e4})},d.prototype.scale=function(F,K){if(isNaN(F)||isNaN(K))throw Ri.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new l(F,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},d.prototype.rotate=function(F){if(isNaN(F))throw Ri.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.translate=function(F,K){if(isNaN(F)||isNaN(K))throw Ri.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new l(1,0,0,1,F,K);this.ctx.transform=this.ctx.transform.multiply(ee)},d.prototype.transform=function(F,K,ee,ae,ce,ye){if(isNaN(F)||isNaN(K)||isNaN(ee)||isNaN(ae)||isNaN(ce)||isNaN(ye))throw Ri.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var be=new l(F,K,ee,ae,ce,ye);this.ctx.transform=this.ctx.transform.multiply(be)},d.prototype.setTransform=function(F,K,ee,ae,ce,ye){F=isNaN(F)?1:F,K=isNaN(K)?0:K,ee=isNaN(ee)?0:ee,ae=isNaN(ae)?1:ae,ce=isNaN(ce)?0:ce,ye=isNaN(ye)?0:ye,this.ctx.transform=new l(F,K,ee,ae,ce,ye)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(F,K,ee,ae,ce,ye,be,Te,Xe){var ze=this.pdf.getImageProperties(F),He=1,rt=1,ft=1,Ie=1;ae!==void 0&&Te!==void 0&&(ft=Te/ae,Ie=Xe/ce,He=ze.width/ae*Te/ae,rt=ze.height/ce*Xe/ce),ye===void 0&&(ye=K,be=ee,K=0,ee=0),ae!==void 0&&Te===void 0&&(Te=ae,Xe=ce),ae===void 0&&Te===void 0&&(Te=ze.width,Xe=ze.height);for(var oe,ut=this.ctx.transform.decompose(),dt=z(ut.rotate.shx),Se=new l,Qe=(Se=(Se=(Se=Se.multiply(ut.translate)).multiply(ut.skew)).multiply(ut.scale)).applyToRectangle(new o(ye-K*ft,be-ee*Ie,ae*He,ce*rt)),Ze=b.call(this,Qe),it=[],et=0;et<Ze.length;et+=1)it.indexOf(Ze[et])===-1&&it.push(Ze[et]);if(S(it),this.autoPaging)for(var mt=it[0],Rt=it[it.length-1],at=mt;at<Rt+1;at++){this.pdf.setPage(at);var $t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],en=at===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=at===1?0:Pt+(at-2)*qt;if(this.ctx.clip_path.length!==0){var Ii=this.path;oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(oe,this.posX+this.margin[3],-lt+en+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=Ii}var pn=JSON.parse(JSON.stringify(Qe));pn=w([pn],this.posX+this.margin[3],-lt+en+this.ctx.prevPageLastElemOffset)[0];var or=(at>mt||at<Rt)&&v.call(this);or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,qt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",pn.x,pn.y,pn.w,pn.h,null,null,dt),or&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,dt)};var b=function(F,K,ee){var ae=[];K=K||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":ae.push(Math.floor((F.y+ce)/ee)+1);break;case"arc":ae.push(Math.floor((F.y+ce-F.radius)/ee)+1),ae.push(Math.floor((F.y+ce+F.radius)/ee)+1);break;case"qct":var ye=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);ae.push(Math.floor((ye.y+ce)/ee)+1),ae.push(Math.floor((ye.y+ye.h+ce)/ee)+1);break;case"bct":var be=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);ae.push(Math.floor((be.y+ce)/ee)+1),ae.push(Math.floor((be.y+be.h+ce)/ee)+1);break;case"rect":ae.push(Math.floor((F.y+ce)/ee)+1),ae.push(Math.floor((F.y+F.h+ce)/ee)+1)}for(var Te=0;Te<ae.length;Te+=1)for(;this.pdf.internal.getNumberOfPages()<ae[Te];)x.call(this);return ae},x=function(){var F=this.fillStyle,K=this.strokeStyle,ee=this.font,ae=this.lineCap,ce=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=K,this.font=ee,this.lineCap=ae,this.lineWidth=ce,this.lineJoin=ye},w=function(F,K,ee){for(var ae=0;ae<F.length;ae++)switch(F[ae].type){case"bct":F[ae].x2+=K,F[ae].y2+=ee;case"qct":F[ae].x1+=K,F[ae].y1+=ee;case"mt":case"lt":case"arc":default:F[ae].x+=K,F[ae].y+=ee}return F},S=function(F){return F.sort(function(K,ee){return K-ee})},A=function(F,K){for(var ee,ae,ce=this.fillStyle,ye=this.strokeStyle,be=this.lineCap,Te=this.lineWidth,Xe=Math.abs(Te*this.ctx.transform.scaleX),ze=this.lineJoin,He=JSON.parse(JSON.stringify(this.path)),rt=JSON.parse(JSON.stringify(this.path)),ft=[],Ie=0;Ie<rt.length;Ie++)if(rt[Ie].x!==void 0)for(var oe=b.call(this,rt[Ie]),ut=0;ut<oe.length;ut+=1)ft.indexOf(oe[ut])===-1&&ft.push(oe[ut]);for(var dt=0;dt<ft.length;dt++)for(;this.pdf.internal.getNumberOfPages()<ft[dt];)x.call(this);if(S(ft),this.autoPaging)for(var Se=ft[0],Qe=ft[ft.length-1],Ze=Se;Ze<Qe+1;Ze++){this.pdf.setPage(Ze),this.fillStyle=ce,this.strokeStyle=ye,this.lineCap=be,this.lineWidth=Xe,this.lineJoin=ze;var it=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],et=Ze===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=Ze===1?0:mt+(Ze-2)*Rt;if(this.ctx.clip_path.length!==0){var $t=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(ee,this.posX+this.margin[3],-at+et+this.ctx.prevPageLastElemOffset),C.call(this,F,!0),this.path=$t}if(ae=JSON.parse(JSON.stringify(He)),this.path=w(ae,this.posX+this.margin[3],-at+et+this.ctx.prevPageLastElemOffset),K===!1||Ze===0){var en=(Ze>Se||Ze<Qe)&&v.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,Rt,null).clip().discardPath()),C.call(this,F,K),en&&this.pdf.restoreGraphicsState()}this.lineWidth=Te}else this.lineWidth=Xe,C.call(this,F,K),this.lineWidth=Te;this.path=He},C=function(F,K){if((F!=="stroke"||K||!m.call(this))&&(F==="stroke"||K||!p.call(this))){for(var ee,ae,ce=[],ye=this.path,be=0;be<ye.length;be++){var Te=ye[be];switch(Te.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:Te,deltas:[],abs:[]});break;case"lt":var Xe=ce.length;if(ye[be-1]&&!isNaN(ye[be-1].x)&&(ee=[Te.x-ye[be-1].x,Te.y-ye[be-1].y],Xe>0)){for(;Xe>=0;Xe--)if(ce[Xe-1].close!==!0&&ce[Xe-1].begin!==!0){ce[Xe-1].deltas.push(ee),ce[Xe-1].abs.push(Te);break}}break;case"bct":ee=[Te.x1-ye[be-1].x,Te.y1-ye[be-1].y,Te.x2-ye[be-1].x,Te.y2-ye[be-1].y,Te.x-ye[be-1].x,Te.y-ye[be-1].y],ce[ce.length-1].deltas.push(ee);break;case"qct":var ze=ye[be-1].x+2/3*(Te.x1-ye[be-1].x),He=ye[be-1].y+2/3*(Te.y1-ye[be-1].y),rt=Te.x+2/3*(Te.x1-Te.x),ft=Te.y+2/3*(Te.y1-Te.y),Ie=Te.x,oe=Te.y;ee=[ze-ye[be-1].x,He-ye[be-1].y,rt-ye[be-1].x,ft-ye[be-1].y,Ie-ye[be-1].x,oe-ye[be-1].y],ce[ce.length-1].deltas.push(ee);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(Te)}}ae=K?null:F==="stroke"?"stroke":"fill";for(var ut=!1,dt=0;dt<ce.length;dt++)if(ce[dt].arc)for(var Se=ce[dt].abs,Qe=0;Qe<Se.length;Qe++){var Ze=Se[Qe];Ze.type==="arc"?R.call(this,Ze.x,Ze.y,Ze.radius,Ze.startAngle,Ze.endAngle,Ze.counterclockwise,void 0,K,!ut):Z.call(this,Ze.x,Ze.y),ut=!0}else if(ce[dt].close===!0)this.pdf.internal.out("h"),ut=!1;else if(ce[dt].begin!==!0){var it=ce[dt].start.x,et=ce[dt].start.y;J.call(this,ce[dt].deltas,it,et),ut=!0}ae&&U.call(this,ae),K&&j.call(this)}},N=function(F){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-ee;case"top":return F+K-ee;case"hanging":return F+K-2*ee;case"middle":return F+K/2-ee;case"ideographic":return F;case"alphabetic":default:return F}},k=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(K,ee){this.colorStops.push([K,ee])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(F,K,ee,ae,ce,ye,be,Te,Xe){for(var ze=H.call(this,ee,ae,ce,ye),He=0;He<ze.length;He++){var rt=ze[He];He===0&&(Xe?D.call(this,rt.x1+F,rt.y1+K):Z.call(this,rt.x1+F,rt.y1+K)),le.call(this,F,K,rt.x2,rt.y2,rt.x3,rt.y3,rt.x4,rt.y4)}Te?j.call(this):U.call(this,be)},U=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(F,K){this.pdf.internal.out(t(F)+" "+i(K)+" m")},O=function(F){var K;switch(F.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var ee=this.pdf.getTextDimensions(F.text),ae=N.call(this,F.y),ce=k.call(this,ae)-ee.h,ye=this.ctx.transform.applyToPoint(new a(F.x,ae)),be=this.ctx.transform.decompose(),Te=new l;Te=(Te=(Te=Te.multiply(be.translate)).multiply(be.skew)).multiply(be.scale);for(var Xe,ze,He,rt=this.ctx.transform.applyToRectangle(new o(F.x,ae,ee.w,ee.h)),ft=Te.applyToRectangle(new o(F.x,ce,ee.w,ee.h)),Ie=b.call(this,ft),oe=[],ut=0;ut<Ie.length;ut+=1)oe.indexOf(Ie[ut])===-1&&oe.push(Ie[ut]);if(S(oe),this.autoPaging)for(var dt=oe[0],Se=oe[oe.length-1],Qe=dt;Qe<Se+1;Qe++){this.pdf.setPage(Qe);var Ze=Qe===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[2],mt=et-this.margin[0],Rt=this.pdf.internal.pageSize.width-this.margin[1],at=Rt-this.margin[3],$t=Qe===1?0:it+(Qe-2)*mt;if(this.ctx.clip_path.length!==0){var en=this.path;Xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Xe,this.posX+this.margin[3],-1*$t+Ze),C.call(this,"fill",!0),this.path=en}var Pt=w([JSON.parse(JSON.stringify(ft))],this.posX+this.margin[3],-$t+Ze+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(ze=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ze*F.scale),He=this.lineWidth,this.lineWidth=He*F.scale);var qt=this.autoPaging!=="text";if(qt||Pt.y+Pt.h<=et){if(qt||Pt.y>=Ze&&Pt.x<=Rt){var lt=qt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Rt-Pt.x)[0],Ii=w([JSON.parse(JSON.stringify(rt))],this.posX+this.margin[3],-$t+Ze+this.ctx.prevPageLastElemOffset)[0],pn=qt&&(Qe>dt||Qe<Se)&&v.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,mt,null).clip().discardPath()),this.pdf.text(lt,Ii.x,Ii.y,{angle:F.angle,align:K,renderingMode:F.renderingMode}),pn&&this.pdf.restoreGraphicsState()}}else Pt.y<et&&(this.ctx.prevPageLastElemOffset+=et-Pt.y);F.scale>=.01&&(this.pdf.setFontSize(ze),this.lineWidth=He)}else F.scale>=.01&&(ze=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ze*F.scale),He=this.lineWidth,this.lineWidth=He*F.scale),this.pdf.text(F.text,ye.x+this.posX,ye.y+this.posY,{angle:F.angle,align:K,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(ze),this.lineWidth=He)},Z=function(F,K,ee,ae){ee=ee||0,ae=ae||0,this.pdf.internal.out(t(F+ee)+" "+i(K+ae)+" l")},J=function(F,K,ee){return this.pdf.lines(F,K,ee,null,null)},le=function(F,K,ee,ae,ce,ye,be,Te){this.pdf.internal.out([e(r(ee+F)),e(s(ae+K)),e(r(ce+F)),e(s(ye+K)),e(r(be+F)),e(s(Te+K)),"c"].join(" "))},H=function(F,K,ee,ae){for(var ce=2*Math.PI,ye=Math.PI/2;K>ee;)K-=ce;var be=Math.abs(ee-K);be<ce&&ae&&(be=ce-be);for(var Te=[],Xe=ae?-1:1,ze=K;be>1e-5;){var He=ze+Xe*Math.min(be,ye);Te.push(V.call(this,F,ze,He)),be-=Math.abs(He-ze),ze=He}return Te},V=function(F,K,ee){var ae=(ee-K)/2,ce=F*Math.cos(ae),ye=F*Math.sin(ae),be=ce,Te=-ye,Xe=be*be+Te*Te,ze=Xe+be*ce+Te*ye,He=4/3*(Math.sqrt(2*Xe*ze)-ze)/(be*ye-Te*ce),rt=be-He*Te,ft=Te+He*be,Ie=rt,oe=-ft,ut=ae+K,dt=Math.cos(ut),Se=Math.sin(ut);return{x1:F*Math.cos(K),y1:F*Math.sin(K),x2:rt*dt-ft*Se,y2:rt*Se+ft*dt,x3:Ie*dt-oe*Se,y3:Ie*Se+oe*dt,x4:F*Math.cos(ee),y4:F*Math.sin(ee)}},z=function(F){return 180*F/Math.PI},W=function(F,K,ee,ae,ce,ye){var be=F+.5*(ee-F),Te=K+.5*(ae-K),Xe=ce+.5*(ee-ce),ze=ye+.5*(ae-ye),He=Math.min(F,ce,be,Xe),rt=Math.max(F,ce,be,Xe),ft=Math.min(K,ye,Te,ze),Ie=Math.max(K,ye,Te,ze);return new o(He,ft,rt-He,Ie-ft)},te=function(F,K,ee,ae,ce,ye,be,Te){var Xe,ze,He,rt,ft,Ie,oe,ut,dt,Se,Qe,Ze,it,et,mt=ee-F,Rt=ae-K,at=ce-ee,$t=ye-ae,en=be-ce,Pt=Te-ye;for(ze=0;ze<41;ze++)dt=(oe=(He=F+(Xe=ze/40)*mt)+Xe*((ft=ee+Xe*at)-He))+Xe*(ft+Xe*(ce+Xe*en-ft)-oe),Se=(ut=(rt=K+Xe*Rt)+Xe*((Ie=ae+Xe*$t)-rt))+Xe*(Ie+Xe*(ye+Xe*Pt-Ie)-ut),ze==0?(Qe=dt,Ze=Se,it=dt,et=Se):(Qe=Math.min(Qe,dt),Ze=Math.min(Ze,Se),it=Math.max(it,dt),et=Math.max(et,Se));return new o(Math.round(Qe),Math.round(Ze),Math.round(it-Qe),Math.round(et-Ze))},fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,K,ee=(F=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:K}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(Vt.API),function(n){var e=function(s){var a,o,l,c,u,d,h,p,m,v;for(o=[],l=0,c=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(u=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(v=u%85))/85)-(m=u%85))/85)-(p=u%85))/85)-(h=u%85))/85)%85,o.push(d+33,h+33,p+33,m+33,v+33)):o.push(122);return function(b,x){for(var w=x;w>0;w--)b.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(s){var a,o,l,c,u,d=String,h="length",p=255,m="charCodeAt",v="slice",b="replace";for(s[v](-2),s=s[v](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),l=[],c=0,u=(s+=a="uuuuu"[v](s[h]%5||5))[h];u>c;c+=5)o=52200625*(s[m](c)-33)+614125*(s[m](c+1)-33)+7225*(s[m](c+2)-33)+85*(s[m](c+3)-33)+(s[m](c+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(x,w){for(var S=w;S>0;S--)x.pop()}(l,a[h]),d.fromCharCode.apply(d,l)},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},r=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=__(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};n.processDataByFilters=function(s,a){var o=0,l=s||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=r(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Vt.API),function(n){n.loadFile=function(e,t,i){return function(r,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,u){var d=new XMLHttpRequest,h=0,p=function(m){var v=m.length,b=[],x=String.fromCharCode;for(h=0;h<v;h+=1)b.push(x(255&m.charCodeAt(h)));return b.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(p(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)}(r,s,a)}catch{}return o}(e,t,i)},n.loadImageFile=n.loadFile}(Vt.API),function(n){function e(){return(Zt.html2canvas?Promise.resolve(Zt.html2canvas):v_(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Zt.DOMPurify?Promise.resolve(Zt.DOMPurify):v_(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var i=function(a){var o=bi(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},r=function(a,o){var l=document.createElement(a);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},s=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(l){return this.set({src:r("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var p=c[h],m=p.src.find(function(v){return v.format==="truetype"});m&&l.addFont(m.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),o(this.prop.container,d)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(i(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(i(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||Vt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,l,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,l,c){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},s.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),u=l.call(c,a,o);return s.convert(u,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Vt.getPageSize=function(a,o,l){if(bi(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var p,m=0,v=0;if(h.hasOwnProperty(d))m=h[d][1]/u,v=h[d][0]/u;else try{m=l[1],v=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",v>m&&(p=v,v=m,m=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",m>v&&(p=v,v=m,m=p)}return{width:v,height:m,unit:o,k:u,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(I_):null;var l=new s(o);return o.worker?l:l.from(a).doCallback()}}(Vt.API),Vt.API.addJS=function(n){return ck=n,this.internal.events.subscribe("postPutResources",function(){yv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(yv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),lk=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ck+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){yv!==void 0&&lk!==void 0&&this.internal.out("/Names <</JavaScript "+yv+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=t.outline.render().split(/\r\n/),s=0;s<r.length;s++){var a=r[s],o=i.exec(a);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var d=t.internal.newObject();u.push(d);var h=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<u.length;s++)t.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(i,r,s){var a={title:r,options:s,children:[]};return i==null&&(i=this.root),i.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(i){i.id=t.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},t.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},t.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var a=i.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},t.outline.line=function(i){this.ctx.val+=i+`\r
`},t.outline.makeRef=function(i){return i.id+" 0 R"},t.outline.makeString=function(i){return"("+t.internal.pdfEscape(i)+")"},t.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(i,r){for(var s=0;s<r.children.length;s++)i.count++,this.count_r(i,r.children[s]);return i.count}}])}(Vt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,i,r,s,a,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(d){for(var h,p=256*d.charCodeAt(4)+d.charCodeAt(5),m=d.length,v={width:0,height:0,numcomponents:1},b=4;b<m;b+=2){if(b+=p,e.indexOf(d.charCodeAt(b+1))!==-1){h=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),v={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:h,numcomponents:d.charCodeAt(b+9)};break}p=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return v}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:i,alias:r}}return u}}(Vt.API);var np,vv,uk,dk,fk,ZQ=function(){var n,e,t;function i(s){var a,o,l,c,u,d,h,p,m,v,b,x,w,S;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),m=(function(){var A,C;for(C=[],A=0;A<4;++A)C.push(String.fromCharCode(this.data[this.pos++]));return C}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,a-=4),s=(d!=null?d.data:void 0)||this.imgData,x=0;0<=a?x<a:x>a;0<=a?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((v=l-this.transparency.indexed.length)>0)for(w=0;0<=v?w<v:w>v;0<=v?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":h=(b=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function u(d,h,p,m){var v,b,x,w,S,A,C,N,k,R,U,j,D,O,Z,J,le,H,V,z,W,te=Math.ceil((c.width-d)/p),fe=Math.ceil((c.height-h)/m),F=c.width==te&&c.height==fe;for(O=a*te,j=F?o:new Uint8Array(O*fe),A=s.length,D=0,b=0;D<fe&&l<A;){switch(s[l++]){case 0:for(w=le=0;le<O;w=le+=1)j[b++]=s[l++];break;case 1:for(w=H=0;H<O;w=H+=1)v=s[l++],S=w<a?0:j[b-a],j[b++]=(v+S)%256;break;case 2:for(w=V=0;V<O;w=V+=1)v=s[l++],x=(w-w%a)/a,Z=D&&j[(D-1)*O+x*a+w%a],j[b++]=(Z+v)%256;break;case 3:for(w=z=0;z<O;w=z+=1)v=s[l++],x=(w-w%a)/a,S=w<a?0:j[b-a],Z=D&&j[(D-1)*O+x*a+w%a],j[b++]=(v+Math.floor((S+Z)/2))%256;break;case 4:for(w=W=0;W<O;w=W+=1)v=s[l++],x=(w-w%a)/a,S=w<a?0:j[b-a],D===0?Z=J=0:(Z=j[(D-1)*O+x*a+w%a],J=x&&j[(D-1)*O+(x-1)*a+w%a]),C=S+Z-J,N=Math.abs(C-S),R=Math.abs(C-Z),U=Math.abs(C-J),k=N<=R&&N<=U?S:R<=U?Z:J,j[b++]=(v+k)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!F){var K=((h+D*m)*c.width+d)*a,ee=D*O;for(w=0;w<te;w+=1){for(var ae=0;ae<a;ae+=1)o[K++]=j[ee++];K+=(p-1)*a}}D++}}return s=kQ(s),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},i.prototype.decodePalette=function(){var s,a,o,l,c,u,d,h,p;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),l=0,s=0,a=d=0,h=o.length;d<h;a=d+=3)c[l++]=o[a],c[l++]=o[a+1],c[l++]=o[a+2],c[l++]=(p=u[s++])!=null?p:255;return c},i.prototype.copyToImageData=function(s,a){var o,l,c,u,d,h,p,m,v,b,x;if(l=this.colors,v=null,o=this.hasAlphaChannel,this.palette.length&&(v=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),l=4,o=!0),m=(c=s.data||s).length,d=v||a,u=h=0,l===1)for(;u<m;)p=v?4*a[u/4]:h,b=d[p++],c[u++]=b,c[u++]=b,c[u++]=b,c[u++]=o?d[p++]:255,h=p;else for(;u<m;)p=v?4*a[u/4]:h,c[u++]=d[p++],c[u++]=d[p++],c[u++]=d[p++],c[u++]=o?d[p++]:255,h=p},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var r=function(){if(Object.prototype.toString.call(Zt)==="[object Window]"){try{e=Zt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return r(),n=function(s){var a;if(r()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var a,o,l,c,u,d,h,p;if(this.animation){for(p=[],o=u=0,d=(h=this.animation.frames).length;u<d;o=++u)a=h[o],l=s.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,p.push(a.image=n(l));return p}},i.prototype.renderFrame=function(s,a){var o,l,c;return o=(l=this.animation.frames)[a],c=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},i.prototype.animate=function(s){var a,o,l,c,u,d,h=this;return o=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(a=function(){var p,m;if(p=o++%c,m=l[p],h.renderFrame(s,p),c>1&&o/c<u)return h.animation._timeout=setTimeout(a,m.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function eJ(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,i=n[e++]|n[e++]<<8,r=n[e++],s=r>>7,a=1<<(7&r)+1;n[e++],n[e++];var o=null,l=null;s&&(o=e,l=a,e+=3*a);var c=!0,u=[],d=0,h=null,p=0,m=null;for(this.width=t,this.height=i;c&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,m=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=n[e++];d=n[e++]|n[e++]<<8,h=n[e++],!(1&v)&&(h=null),p=v>>2&7,e++;break;case 254:for(;;){if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var b=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,A=n[e++],C=A>>6&1,N=1<<(7&A)+1,k=o,R=l,U=!1;A>>7&&(U=!0,k=e,R=N,e+=3*N);var j=e;for(e++;;){var D;if(!((D=n[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}u.push({x:b,y:x,width:w,height:S,has_local_palette:U,palette_offset:k,palette_size:R,data_offset:j,data_length:e-j,transparent_index:h,interlaced:!!C,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,Z){var J=this.frameInfo(O),le=J.width*J.height,H=new Uint8Array(le);hk(n,J.data_offset,H,le);var V=J.palette_offset,z=J.transparent_index;z===null&&(z=256);var W=J.width,te=t-W,fe=W,F=4*(J.y*t+J.x),K=4*((J.y+J.height)*t+J.x),ee=F,ae=4*te;J.interlaced===!0&&(ae+=4*t*7);for(var ce=8,ye=0,be=H.length;ye<be;++ye){var Te=H[ye];if(fe===0&&(fe=W,(ee+=ae)>=K&&(ae=4*te+4*t*(ce-1),ee=F+(W+te)*(ce<<1),ce>>=1)),Te===z)ee+=4;else{var Xe=n[V+3*Te],ze=n[V+3*Te+1],He=n[V+3*Te+2];Z[ee++]=He,Z[ee++]=ze,Z[ee++]=Xe,Z[ee++]=255}--fe}},this.decodeAndBlitFrameRGBA=function(O,Z){var J=this.frameInfo(O),le=J.width*J.height,H=new Uint8Array(le);hk(n,J.data_offset,H,le);var V=J.palette_offset,z=J.transparent_index;z===null&&(z=256);var W=J.width,te=t-W,fe=W,F=4*(J.y*t+J.x),K=4*((J.y+J.height)*t+J.x),ee=F,ae=4*te;J.interlaced===!0&&(ae+=4*t*7);for(var ce=8,ye=0,be=H.length;ye<be;++ye){var Te=H[ye];if(fe===0&&(fe=W,(ee+=ae)>=K&&(ae=4*te+4*t*(ce-1),ee=F+(W+te)*(ce<<1),ce>>=1)),Te===z)ee+=4;else{var Xe=n[V+3*Te],ze=n[V+3*Te+1],He=n[V+3*Te+2];Z[ee++]=Xe,Z[ee++]=ze,Z[ee++]=He,Z[ee++]=255}--fe}}}function hk(n,e,t,i){for(var r=n[e++],s=1<<r,a=s+1,o=a+1,l=r+1,c=(1<<l)-1,u=0,d=0,h=0,p=n[e++],m=new Int32Array(4096),v=null;;){for(;u<16&&p!==0;)d|=n[e++]<<u,u+=8,p===1?p=n[e++]:--p;if(u<l)break;var b=d&c;if(d>>=l,u-=l,b!==s){if(b===a)break;for(var x=b<o?b:v,w=0,S=x;S>s;)S=m[S]>>8,++w;var A=S;if(h+w+(x!==b?1:0)>i)return void Ri.log("Warning, gif stream longer than expected.");t[h++]=A;var C=h+=w;for(x!==b&&(t[h++]=A),S=x;w--;)S=m[S],t[--C]=255&S,S>>=8;v!==null&&o<4096&&(m[o++]=v<<8|A,o>=c+1&&l<12&&(++l,c=c<<1|1)),v=b}else o=a+1,c=(1<<(l=r+1))-1,v=null}return h!==i&&Ri.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pS(n){var e,t,i,r,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),p=new Array(64),m=new Array(64),v=[],b=0,x=7,w=new Array(64),S=new Array(64),A=new Array(64),C=new Array(256),N=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(F,K){for(var ee=0,ae=0,ce=new Array,ye=1;ye<=16;ye++){for(var be=1;be<=F[ye];be++)ce[K[ae]]=[],ce[K[ae]][0]=ee,ce[K[ae]][1]=ye,ae++,ee++;ee*=2}return ce}function V(F){for(var K=F[0],ee=F[1]-1;ee>=0;)K&1<<ee&&(b|=1<<x),ee--,--x<0&&(b==255?(z(255),z(0)):z(b),x=7,b=0)}function z(F){v.push(F)}function W(F){z(F>>8&255),z(255&F)}function te(F,K,ee,ae,ce){for(var ye,be=ce[0],Te=ce[240],Xe=function(Se,Qe){var Ze,it,et,mt,Rt,at,$t,en,Pt,qt,lt=0;for(Pt=0;Pt<8;++Pt){Ze=Se[lt],it=Se[lt+1],et=Se[lt+2],mt=Se[lt+3],Rt=Se[lt+4],at=Se[lt+5],$t=Se[lt+6];var Ii=Ze+(en=Se[lt+7]),pn=Ze-en,or=it+$t,gn=it-$t,zn=et+at,Wr=et-at,rn=mt+Rt,Ss=mt-Rt,Un=Ii+rn,zr=Ii-rn,ws=or+zn,si=or-zn;Se[lt]=Un+ws,Se[lt+4]=Un-ws;var Ht=.707106781*(si+zr);Se[lt+2]=zr+Ht,Se[lt+6]=zr-Ht;var Ln=.382683433*((Un=Ss+Wr)-(si=gn+pn)),_s=.5411961*Un+Ln,ai=1.306562965*si+Ln,xr=.707106781*(ws=Wr+gn),Gr=pn+xr,Dt=pn-xr;Se[lt+5]=Dt+_s,Se[lt+3]=Dt-_s,Se[lt+1]=Gr+ai,Se[lt+7]=Gr-ai,lt+=8}for(lt=0,Pt=0;Pt<8;++Pt){Ze=Se[lt],it=Se[lt+8],et=Se[lt+16],mt=Se[lt+24],Rt=Se[lt+32],at=Se[lt+40],$t=Se[lt+48];var Bi=Ze+(en=Se[lt+56]),Qr=Ze-en,Ui=it+$t,_i=it-$t,Ei=et+at,Cn=et-at,Pi=mt+Rt,lr=mt-Rt,Jr=Bi+Pi,cr=Bi-Pi,Ki=Ui+Ei,Xi=Ui-Ei;Se[lt]=Jr+Ki,Se[lt+32]=Jr-Ki;var Rr=.707106781*(Xi+cr);Se[lt+16]=cr+Rr,Se[lt+48]=cr-Rr;var ds=.382683433*((Jr=lr+Cn)-(Xi=_i+Qr)),Zr=.5411961*Jr+ds,Es=1.306562965*Xi+ds,oi=.707106781*(Ki=Cn+_i),fs=Qr+oi,br=Qr-oi;Se[lt+40]=br+Zr,Se[lt+24]=br-Zr,Se[lt+8]=fs+Es,Se[lt+56]=fs-Es,lt++}for(Pt=0;Pt<64;++Pt)qt=Se[Pt]*Qe[Pt],p[Pt]=qt>0?qt+.5|0:qt-.5|0;return p}(F,K),ze=0;ze<64;++ze)m[k[ze]]=Xe[ze];var He=m[0]-ee;ee=m[0],He==0?V(ae[0]):(V(ae[h[ye=32767+He]]),V(d[ye]));for(var rt=63;rt>0&&m[rt]==0;)rt--;if(rt==0)return V(be),ee;for(var ft,Ie=1;Ie<=rt;){for(var oe=Ie;m[Ie]==0&&Ie<=rt;)++Ie;var ut=Ie-oe;if(ut>=16){ft=ut>>4;for(var dt=1;dt<=ft;++dt)V(Te);ut&=15}ye=32767+m[Ie],V(ce[(ut<<4)+h[ye]]),V(d[ye]),Ie++}return rt!=63&&V(be),ee}function fe(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(K){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var ce=a((ee[ae]*K+50)/100);ce=Math.min(Math.max(ce,1),255),o[k[ae]]=ce}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],be=0;be<64;be++){var Te=a((ye[be]*K+50)/100);Te=Math.min(Math.max(Te,1),255),l[k[be]]=Te}for(var Xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ze=0,He=0;He<8;He++)for(var rt=0;rt<8;rt++)c[ze]=1/(o[k[ze]]*Xe[He]*Xe[rt]*8),u[ze]=1/(l[k[ze]]*Xe[He]*Xe[rt]*8),ze++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,K){K&&fe(K),v=new Array,b=0,x=7,W(65496),W(65504),W(16),z(74),z(70),z(73),z(70),z(0),z(1),z(1),z(0),W(1),W(1),z(0),z(0),function(){W(65499),W(132),z(0);for(var it=0;it<64;it++)z(o[it]);z(1);for(var et=0;et<64;et++)z(l[et])}(),function(it,et){W(65472),W(17),z(8),W(et),W(it),z(3),z(1),z(17),z(0),z(2),z(17),z(1),z(3),z(17),z(1)}(F.width,F.height),function(){W(65476),W(418),z(0);for(var it=0;it<16;it++)z(R[it+1]);for(var et=0;et<=11;et++)z(U[et]);z(16);for(var mt=0;mt<16;mt++)z(j[mt+1]);for(var Rt=0;Rt<=161;Rt++)z(D[Rt]);z(1);for(var at=0;at<16;at++)z(O[at+1]);for(var $t=0;$t<=11;$t++)z(Z[$t]);z(17);for(var en=0;en<16;en++)z(J[en+1]);for(var Pt=0;Pt<=161;Pt++)z(le[Pt])}(),W(65498),W(12),z(3),z(1),z(0),z(2),z(17),z(3),z(17),z(0),z(63),z(0);var ee=0,ae=0,ce=0;b=0,x=7,this.encode.displayName="_encode_";for(var ye,be,Te,Xe,ze,He,rt,ft,Ie,oe=F.data,ut=F.width,dt=F.height,Se=4*ut,Qe=0;Qe<dt;){for(ye=0;ye<Se;){for(ze=Se*Qe+ye,rt=-1,ft=0,Ie=0;Ie<64;Ie++)He=ze+(ft=Ie>>3)*Se+(rt=4*(7&Ie)),Qe+ft>=dt&&(He-=Se*(Qe+1+ft-dt)),ye+rt>=Se&&(He-=ye+rt-Se+4),be=oe[He++],Te=oe[He++],Xe=oe[He++],w[Ie]=(N[be]+N[Te+256>>0]+N[Xe+512>>0]>>16)-128,S[Ie]=(N[be+768>>0]+N[Te+1024>>0]+N[Xe+1280>>0]>>16)-128,A[Ie]=(N[be+1280>>0]+N[Te+1536>>0]+N[Xe+1792>>0]>>16)-128;ee=te(w,c,ee,e,i),ae=te(S,u,ae,t,r),ce=te(A,u,ce,t,r),ye+=32}Qe+=8}if(x>=0){var Ze=[];Ze[1]=x+1,Ze[0]=(1<<x+1)-1,V(Ze)}return W(65497),new Uint8Array(v)},n=n||50,function(){for(var F=String.fromCharCode,K=0;K<256;K++)C[K]=F(K)}(),e=H(R,U),t=H(O,Z),i=H(j,D),r=H(J,le),function(){for(var F=1,K=2,ee=1;ee<=15;ee++){for(var ae=F;ae<K;ae++)h[32767+ae]=ee,d[32767+ae]=[],d[32767+ae][1]=ee,d[32767+ae][0]=ae;for(var ce=-(K-1);ce<=-F;ce++)h[32767+ce]=ee,d[32767+ce]=[],d[32767+ce][1]=ee,d[32767+ce][0]=K-1+ce;F<<=1,K<<=1}}(),function(){for(var F=0;F<256;F++)N[F]=19595*F,N[F+256>>0]=38470*F,N[F+512>>0]=7471*F+32768,N[F+768>>0]=-11059*F,N[F+1024>>0]=-21709*F,N[F+1280>>0]=32768*F+8421375,N[F+1536>>0]=-27439*F,N[F+1792>>0]=-5329*F}(),fe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ll(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function pk(n){function e(R){if(!R)throw Error("assert :P")}function t(R,U,j){for(var D=0;4>D;D++)if(R[U+D]!=j.charCodeAt(D))return!0;return!1}function i(R,U,j,D,O){for(var Z=0;Z<O;Z++)R[U+Z]=j[D+Z]}function r(R,U,j,D){for(var O=0;O<D;O++)R[U+O]=j}function s(R){return new Int32Array(R)}function a(R,U){for(var j=[],D=0;D<R;D++)j.push(new U);return j}function o(R,U){var j=[];return function D(O,Z,J){for(var le=J[Z],H=0;H<le&&(O.push(J.length>Z+1?[]:new U),!(J.length<Z+1));H++)D(O[H],Z+1,J)}(j,0,R),j}var l=function(){var R=this;function U(y,E){for(var I=1<<E-1>>>0;y&I;)I>>>=1;return I?(y&I-1)+I:y}function j(y,E,I,M,G){e(!(M%I));do y[E+(M-=I)]=G;while(0<M)}function D(y,E,I,M,G){if(e(2328>=G),512>=G)var X=s(512);else if((X=s(G))==null)return 0;return function(Q,ne,re,ue,ve,Pe){var Ne,Ee,Ve=ne,Me=1<<re,ge=s(16),xe=s(16);for(e(ve!=0),e(ue!=null),e(Q!=null),e(0<re),Ee=0;Ee<ve;++Ee){if(15<ue[Ee])return 0;++ge[ue[Ee]]}if(ge[0]==ve)return 0;for(xe[1]=0,Ne=1;15>Ne;++Ne){if(ge[Ne]>1<<Ne)return 0;xe[Ne+1]=xe[Ne]+ge[Ne]}for(Ee=0;Ee<ve;++Ee)Ne=ue[Ee],0<ue[Ee]&&(Pe[xe[Ne]++]=Ee);if(xe[15]==1)return(ue=new O).g=0,ue.value=Pe[0],j(Q,Ve,1,Me,ue),Me;var We,Je=-1,Ge=Me-1,gt=0,ht=1,Mt=1,ct=1<<re;for(Ee=0,Ne=1,ve=2;Ne<=re;++Ne,ve<<=1){if(ht+=Mt<<=1,0>(Mt-=ge[Ne]))return 0;for(;0<ge[Ne];--ge[Ne])(ue=new O).g=Ne,ue.value=Pe[Ee++],j(Q,Ve+gt,ve,ct,ue),gt=U(gt,Ne)}for(Ne=re+1,ve=2;15>=Ne;++Ne,ve<<=1){if(ht+=Mt<<=1,0>(Mt-=ge[Ne]))return 0;for(;0<ge[Ne];--ge[Ne]){if(ue=new O,(gt&Ge)!=Je){for(Ve+=ct,We=1<<(Je=Ne)-re;15>Je&&!(0>=(We-=ge[Je]));)++Je,We<<=1;Me+=ct=1<<(We=Je-re),Q[ne+(Je=gt&Ge)].g=We+re,Q[ne+Je].value=Ve-ne-Je}ue.g=Ne-re,ue.value=Pe[Ee++],j(Q,Ve+(gt>>re),ve,ct,ue),gt=U(gt,Ne)}}return ht!=2*xe[15]-1?0:Me}(y,E,I,M,G,X)}function O(){this.value=this.g=0}function Z(){this.value=this.g=0}function J(){this.G=a(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(is,Z)}function le(y,E,I,M){e(y!=null),e(E!=null),e(2147483648>M),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=E,y.pa=I,y.Jd=E,y.Yc=I+M,y.Zc=4<=M?I+M-4+1:I,ye(y)}function H(y,E){for(var I=0;0<E--;)I|=Te(y,128)<<E;return I}function V(y,E){var I=H(y,E);return be(y)?-I:I}function z(y,E,I,M){var G,X=0;for(e(y!=null),e(E!=null),e(4294967288>M),y.Sb=M,y.Ra=0,y.u=0,y.h=0,4<M&&(M=4),G=0;G<M;++G)X+=E[I+G]<<8*G;y.Ra=X,y.bb=M,y.oa=E,y.pa=I}function W(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<Fu-8>>>0,++y.bb,y.u-=8;ee(y)&&(y.h=1,y.u=0)}function te(y,E){if(e(0<=E),!y.h&&E<=Mu){var I=K(y)&Va[E];return y.u+=E,W(y),I}return y.h=1,y.u=0}function fe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(y){return y.Ra>>>(y.u&Fu-1)>>>0}function ee(y){return e(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>Fu}function ae(y,E){y.u=E,y.h=ee(y)}function ce(y){y.u>=xc&&(e(y.u>=xc),W(y))}function ye(y){e(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(e(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function be(y){return H(y,1)}function Te(y,E){var I=y.Ca;0>y.b&&ye(y);var M=y.b,G=I*E>>>8,X=(y.I>>>M>G)+0;for(X?(I-=G,y.I-=G+1<<M>>>0):I=G+1,M=I,G=0;256<=M;)G+=8,M>>=8;return M=7^G+Cs[M],y.b-=M,y.Ca=(I<<M)-1,X}function Xe(y,E,I){y[E+0]=I>>24&255,y[E+1]=I>>16&255,y[E+2]=I>>8&255,y[E+3]=I>>0&255}function ze(y,E){return y[E+0]<<0|y[E+1]<<8}function He(y,E){return ze(y,E)|y[E+2]<<16}function rt(y,E){return ze(y,E)|ze(y,E+2)<<16}function ft(y,E){var I=1<<E;return e(y!=null),e(0<E),y.X=s(I),y.X==null?0:(y.Mb=32-E,y.Xa=E,1)}function Ie(y,E){e(y!=null),e(E!=null),e(y.Xa==E.Xa),i(E.X,0,y.X,0,1<<E.Xa)}function oe(){this.X=[],this.Xa=this.Mb=0}function ut(y,E,I,M){e(I!=null),e(M!=null);var G=I[0],X=M[0];return G==0&&(G=(y*X+E/2)/E),X==0&&(X=(E*G+y/2)/y),0>=G||0>=X?0:(I[0]=G,M[0]=X,1)}function dt(y,E){return y+(1<<E)-1>>>E}function Se(y,E){return((4278255360&y)+(4278255360&E)>>>0&4278255360)+((16711935&y)+(16711935&E)>>>0&16711935)>>>0}function Qe(y,E){R[E]=function(I,M,G,X,Q,ne,re){var ue;for(ue=0;ue<Q;++ue){var ve=R[y](ne[re+ue-1],G,X+ue);ne[re+ue]=Se(I[M+ue],ve)}}}function Ze(){this.ud=this.hd=this.jd=0}function it(y,E){return((4278124286&(y^E))>>>1)+(y&E)>>>0}function et(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function mt(y,E){return et(y+(y-E+.5>>1))}function Rt(y,E,I){return Math.abs(E-I)-Math.abs(y-I)}function at(y,E,I,M,G,X,Q){for(M=X[Q-1],I=0;I<G;++I)X[Q+I]=M=Se(y[E+I],M)}function $t(y,E,I,M,G){var X;for(X=0;X<I;++X){var Q=y[E+X],ne=Q>>8&255,re=16711935&(re=(re=16711935&Q)+((ne<<16)+ne));M[G+X]=(4278255360&Q)+re>>>0}}function en(y,E){E.jd=y>>0&255,E.hd=y>>8&255,E.ud=y>>16&255}function Pt(y,E,I,M,G,X){var Q;for(Q=0;Q<M;++Q){var ne=E[I+Q],re=ne>>>8,ue=ne,ve=255&(ve=(ve=ne>>>16)+((y.jd<<24>>24)*(re<<24>>24)>>>5));ue=255&(ue=(ue=ue+((y.hd<<24>>24)*(re<<24>>24)>>>5))+((y.ud<<24>>24)*(ve<<24>>24)>>>5)),G[X+Q]=(4278255360&ne)+(ve<<16)+ue}}function qt(y,E,I,M,G){R[E]=function(X,Q,ne,re,ue,ve,Pe,Ne,Ee){for(re=Pe;re<Ne;++re)for(Pe=0;Pe<Ee;++Pe)ue[ve++]=G(ne[M(X[Q++])])},R[y]=function(X,Q,ne,re,ue,ve,Pe){var Ne=8>>X.b,Ee=X.Ea,Ve=X.K[0],Me=X.w;if(8>Ne)for(X=(1<<X.b)-1,Me=(1<<Ne)-1;Q<ne;++Q){var ge,xe=0;for(ge=0;ge<Ee;++ge)ge&X||(xe=M(re[ue++])),ve[Pe++]=G(Ve[xe&Me]),xe>>=Ne}else R["VP8LMapColor"+I](re,ue,Ve,Me,ve,Pe,Q,ne,Ee)}}function lt(y,E,I,M,G){for(I=E+I;E<I;){var X=y[E++];M[G++]=X>>16&255,M[G++]=X>>8&255,M[G++]=X>>0&255}}function Ii(y,E,I,M,G){for(I=E+I;E<I;){var X=y[E++];M[G++]=X>>16&255,M[G++]=X>>8&255,M[G++]=X>>0&255,M[G++]=X>>24&255}}function pn(y,E,I,M,G){for(I=E+I;E<I;){var X=(Q=y[E++])>>16&240|Q>>12&15,Q=Q>>0&240|Q>>28&15;M[G++]=X,M[G++]=Q}}function or(y,E,I,M,G){for(I=E+I;E<I;){var X=(Q=y[E++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;M[G++]=X,M[G++]=Q}}function gn(y,E,I,M,G){for(I=E+I;E<I;){var X=y[E++];M[G++]=X>>0&255,M[G++]=X>>8&255,M[G++]=X>>16&255}}function zn(y,E,I,M,G,X){if(X==0)for(I=E+I;E<I;)Xe(M,((X=y[E++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),G+=32;else i(M,G,y,E,I)}function Wr(y,E){R[E][0]=R[y+"0"],R[E][1]=R[y+"1"],R[E][2]=R[y+"2"],R[E][3]=R[y+"3"],R[E][4]=R[y+"4"],R[E][5]=R[y+"5"],R[E][6]=R[y+"6"],R[E][7]=R[y+"7"],R[E][8]=R[y+"8"],R[E][9]=R[y+"9"],R[E][10]=R[y+"10"],R[E][11]=R[y+"11"],R[E][12]=R[y+"12"],R[E][13]=R[y+"13"],R[E][14]=R[y+"0"],R[E][15]=R[y+"0"]}function rn(y){return y==Uu||y==$u||y==Hu||y==bg}function Ss(){this.eb=[],this.size=this.A=this.fb=0}function Un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function zr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ss,this.f.kb=new Un,this.sd=null}function ws(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function si(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ht(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function Ln(y,E){var I=y.T,M=E.ba.f.RGBA,G=M.eb,X=M.fb+y.ka*M.A,Q=aa[E.ba.S],ne=y.y,re=y.O,ue=y.f,ve=y.N,Pe=y.ea,Ne=y.W,Ee=E.cc,Ve=E.dc,Me=E.Mc,ge=E.Nc,xe=y.ka,We=y.ka+y.T,Je=y.U,Ge=Je+1>>1;for(xe==0?Q(ne,re,null,null,ue,ve,Pe,Ne,ue,ve,Pe,Ne,G,X,null,null,Je):(Q(E.ec,E.fc,ne,re,Ee,Ve,Me,ge,ue,ve,Pe,Ne,G,X-M.A,G,X,Je),++I);xe+2<We;xe+=2)Ee=ue,Ve=ve,Me=Pe,ge=Ne,ve+=y.Rc,Ne+=y.Rc,X+=2*M.A,Q(ne,(re+=2*y.fa)-y.fa,ne,re,Ee,Ve,Me,ge,ue,ve,Pe,Ne,G,X-M.A,G,X,Je);return re+=y.fa,y.j+We<y.o?(i(E.ec,E.fc,ne,re,Je),i(E.cc,E.dc,ue,ve,Ge),i(E.Mc,E.Nc,Pe,Ne,Ge),I--):1&We||Q(ne,re,null,null,ue,ve,Pe,Ne,ue,ve,Pe,Ne,G,X+M.A,null,null,Je),I}function _s(y,E,I){var M=y.F,G=[y.J];if(M!=null){var X=y.U,Q=E.ba.S,ne=Q==Rh||Q==Hu;E=E.ba.f.RGBA;var re=[0],ue=y.ka;re[0]=y.T,y.Kb&&(ue==0?--re[0]:(--ue,G[0]-=y.width),y.j+y.ka+y.T==y.o&&(re[0]=y.o-y.j-ue));var ve=E.eb;ue=E.fb+ue*E.A,y=Li(M,G[0],y.width,X,re,ve,ue+(ne?0:3),E.A),e(I==re),y&&rn(Q)&&sa(ve,ue,ne,X,re,E.A)}return 0}function ai(y){var E=y.ma,I=E.ba.S,M=11>I,G=I==Ol||I==Ec||I==Rh||I==xg||I==12||rn(I);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!ef(E.Oa,y,G?11:12))return 0;if(G&&rn(I)&&tt(),y.da)alert("todo:use_scaling");else{if(M){if(E.Ib=Ht,y.Kb){if(I=y.U+1>>1,E.memory=s(y.U+2*I),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+y.U,E.Mc=E.cc,E.Nc=E.dc+I,E.Ib=Ln,tt()}}else alert("todo:EmitYUV");G&&(E.Jb=_s,M&&Ce())}if(M&&!Z0){for(y=0;256>y;++y)Lb[y]=89858*(y-128)+_o>>Nh,Ib[y]=-22014*(y-128)+_o,Cb[y]=-45773*(y-128),Xo[y]=113618*(y-128)+_o>>Nh;for(y=uf;y<_g;++y)E=76283*(y-16)+_o>>Nh,kb[y-uf]=ki(E,255),Rb[y-uf]=ki(E+8>>4,15);Z0=1}return 1}function xr(y){var E=y.ma,I=y.U,M=y.T;return e(!(1&y.ka)),0>=I||0>=M?0:(I=E.Ib(y,E),E.Jb!=null&&E.Jb(y,E,I),E.Dc+=I,1)}function Gr(y){y.ma.memory=null}function Dt(y,E,I,M){return te(y,8)!=47?0:(E[0]=te(y,14)+1,I[0]=te(y,14)+1,M[0]=te(y,1),te(y,3)!=0?0:!y.h)}function Bi(y,E){if(4>y)return y+1;var I=y-2>>1;return(2+(1&y)<<I)+te(E,I)+1}function Qr(y,E){return 120<E?E-120:1<=(I=((I=Sb[E-1])>>4)*y+(8-(15&I)))?I:1;var I}function Ui(y,E,I){var M=K(I),G=y[E+=255&M].g-8;return 0<G&&(ae(I,I.u+8),M=K(I),E+=y[E].value,E+=M&(1<<G)-1),ae(I,I.u+y[E].g),y[E].value}function _i(y,E,I){return I.g+=y.g,I.value+=y.value<<E>>>0,e(8>=I.g),y.g}function Ei(y,E,I){var M=y.xc;return e((E=M==0?0:y.vc[y.md*(I>>M)+(E>>M)])<y.Wb),y.Ya[E]}function Cn(y,E,I,M){var G=y.ab,X=y.c*E,Q=y.C;E=Q+E;var ne=I,re=M;for(M=y.Ta,I=y.Ua;0<G--;){var ue=y.gc[G],ve=Q,Pe=E,Ne=ne,Ee=re,Ve=(re=M,ne=I,ue.Ea);switch(e(ve<Pe),e(Pe<=ue.nc),ue.hc){case 2:kh(Ne,Ee,(Pe-ve)*Ve,re,ne);break;case 0:var Me=ve,ge=Pe,xe=re,We=ne,Je=(ct=ue).Ea;Me==0&&(So(Ne,Ee,null,null,1,xe,We),at(Ne,Ee+1,0,0,Je-1,xe,We+1),Ee+=Je,We+=Je,++Me);for(var Ge=1<<ct.b,gt=Ge-1,ht=dt(Je,ct.b),Mt=ct.K,ct=ct.w+(Me>>ct.b)*ht;Me<ge;){var Yn=Mt,ti=ct,Mn=1;for(Nl(Ne,Ee,xe,We-Je,1,xe,We);Mn<Je;){var yn=(Mn&~gt)+Ge;yn>Je&&(yn=Je),(0,Go[Yn[ti++]>>8&15])(Ne,Ee+ +Mn,xe,We+Mn-Je,yn-Mn,xe,We+Mn),Mn=yn}Ee+=Je,We+=Je,++Me&gt||(ct+=ht)}Pe!=ue.nc&&i(re,ne-Ve,re,ne+(Pe-ve-1)*Ve,Ve);break;case 1:for(Ve=Ne,ge=Ee,Je=(Ne=ue.Ea)-(We=Ne&~(xe=(Ee=1<<ue.b)-1)),Me=dt(Ne,ue.b),Ge=ue.K,ue=ue.w+(ve>>ue.b)*Me;ve<Pe;){for(gt=Ge,ht=ue,Mt=new Ze,ct=ge+We,Yn=ge+Ne;ge<ct;)en(gt[ht++],Mt),bc(Mt,Ve,ge,Ee,re,ne),ge+=Ee,ne+=Ee;ge<Yn&&(en(gt[ht++],Mt),bc(Mt,Ve,ge,Je,re,ne),ge+=Je,ne+=Je),++ve&xe||(ue+=Me)}break;case 3:if(Ne==re&&Ee==ne&&0<ue.b){for(ge=re,Ne=Ve=ne+(Pe-ve)*Ve-(We=(Pe-ve)*dt(ue.Ea,ue.b)),Ee=re,xe=ne,Me=[],We=(Je=We)-1;0<=We;--We)Me[We]=Ee[xe+We];for(We=Je-1;0<=We;--We)ge[Ne+We]=Me[We];xa(ue,ve,Pe,re,Ve,re,ne)}else xa(ue,ve,Pe,Ne,Ee,re,ne)}ne=M,re=I}re!=I&&i(M,I,ne,re,X)}function Pi(y,E){var I=y.V,M=y.Ba+y.c*y.C,G=E-y.C;if(e(E<=y.l.o),e(16>=G),0<G){var X=y.l,Q=y.Ta,ne=y.Ua,re=X.width;if(Cn(y,G,I,M),G=ne=[ne],e((I=y.C)<(M=E)),e(X.v<X.va),M>X.o&&(M=X.o),I<X.j){var ue=X.j-I;I=X.j,G[0]+=ue*re}if(I>=M?I=0:(G[0]+=4*X.v,X.ka=I-X.j,X.U=X.va-X.v,X.T=M-I,I=1),I){if(ne=ne[0],11>(I=y.ca).S){var ve=I.f.RGBA,Pe=(M=I.S,G=X.U,X=X.T,ue=ve.eb,ve.A),Ne=X;for(ve=ve.fb+y.Ma*ve.A;0<Ne--;){var Ee=Q,Ve=ne,Me=G,ge=ue,xe=ve;switch(M){case sf:Ms(Ee,Ve,Me,ge,xe);break;case Ol:Is(Ee,Ve,Me,ge,xe);break;case Uu:Is(Ee,Ve,Me,ge,xe),sa(ge,xe,0,Me,1,0);break;case Ml:Fs(Ee,Ve,Me,ge,xe);break;case Ec:zn(Ee,Ve,Me,ge,xe,1);break;case $u:zn(Ee,Ve,Me,ge,xe,1),sa(ge,xe,0,Me,1,0);break;case Rh:zn(Ee,Ve,Me,ge,xe,0);break;case Hu:zn(Ee,Ve,Me,ge,xe,0),sa(ge,xe,1,Me,1,0);break;case xg:Dl(Ee,Ve,Me,ge,xe);break;case bg:Dl(Ee,Ve,Me,ge,xe),ui(ge,xe,Me,1,0);break;case q0:Vo(Ee,Ve,Me,ge,xe);break;default:e(0)}ne+=re,ve+=Pe}y.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(y.Ma<=I.height)}}y.C=E,e(y.C<=y.i)}function lr(y){var E;if(0<y.ua)return 0;for(E=0;E<y.Wb;++E){var I=y.Ya[E].G,M=y.Ya[E].H;if(0<I[1][M[1]+0].g||0<I[2][M[2]+0].g||0<I[3][M[3]+0].g)return 0}return 1}function Jr(y,E,I,M,G,X){if(y.Z!=0){var Q=y.qd,ne=y.rd;for(e(_a[y.Z]!=null);E<I;++E)_a[y.Z](Q,ne,M,G,M,G,X),Q=M,ne=G,G+=X;y.qd=Q,y.rd=ne}}function cr(y,E){var I=y.l.ma,M=I.Z==0||I.Z==1?y.l.j:y.C;if(M=y.C<M?M:y.C,e(E<=y.l.o),E>M){var G=y.l.width,X=I.ca,Q=I.tb+G*M,ne=y.V,re=y.Ba+y.c*M,ue=y.gc;e(y.ab==1),e(ue[0].hc==3),zo(ue[0],M,E,ne,re,X,Q),Jr(I,M,E,X,Q,G)}y.C=y.Ma=E}function Ki(y,E,I,M,G,X,Q){var ne=y.$/M,re=y.$%M,ue=y.m,ve=y.s,Pe=I+y.$,Ne=Pe;G=I+M*G;var Ee=I+M*X,Ve=280+ve.ua,Me=y.Pb?ne:16777216,ge=0<ve.ua?ve.Wa:null,xe=ve.wc,We=Pe<Ee?Ei(ve,re,ne):null;e(y.C<X),e(Ee<=G);var Je=!1;e:for(;;){for(;Je||Pe<Ee;){var Ge=0;if(ne>=Me){var gt=Pe-I;e((Me=y).Pb),Me.wd=Me.m,Me.xd=gt,0<Me.s.ua&&Ie(Me.s.Wa,Me.s.vb),Me=ne+Q0}if(re&xe||(We=Ei(ve,re,ne)),e(We!=null),We.Qb&&(E[Pe]=We.qb,Je=!0),!Je)if(ce(ue),We.jc){Ge=ue,gt=E;var ht=Pe,Mt=We.pd[K(Ge)&is-1];e(We.jc),256>Mt.g?(ae(Ge,Ge.u+Mt.g),gt[ht]=Mt.value,Ge=0):(ae(Ge,Ge.u+Mt.g-256),e(256<=Mt.value),Ge=Mt.value),Ge==0&&(Je=!0)}else Ge=Ui(We.G[0],We.H[0],ue);if(ue.h)break;if(Je||256>Ge){if(!Je)if(We.nd)E[Pe]=(We.qb|Ge<<8)>>>0;else{if(ce(ue),Je=Ui(We.G[1],We.H[1],ue),ce(ue),gt=Ui(We.G[2],We.H[2],ue),ht=Ui(We.G[3],We.H[3],ue),ue.h)break;E[Pe]=(ht<<24|Je<<16|Ge<<8|gt)>>>0}if(Je=!1,++Pe,++re>=M&&(re=0,++ne,Q!=null&&ne<=X&&!(ne%16)&&Q(y,ne),ge!=null))for(;Ne<Pe;)Ge=E[Ne++],ge.X[(506832829*Ge&4294967295)>>>ge.Mb]=Ge}else if(280>Ge){if(Ge=Bi(Ge-256,ue),gt=Ui(We.G[4],We.H[4],ue),ce(ue),gt=Qr(M,gt=Bi(gt,ue)),ue.h)break;if(Pe-I<gt||G-Pe<Ge)break e;for(ht=0;ht<Ge;++ht)E[Pe+ht]=E[Pe+ht-gt];for(Pe+=Ge,re+=Ge;re>=M;)re-=M,++ne,Q!=null&&ne<=X&&!(ne%16)&&Q(y,ne);if(e(Pe<=G),re&xe&&(We=Ei(ve,re,ne)),ge!=null)for(;Ne<Pe;)Ge=E[Ne++],ge.X[(506832829*Ge&4294967295)>>>ge.Mb]=Ge}else{if(!(Ge<Ve))break e;for(Je=Ge-280,e(ge!=null);Ne<Pe;)Ge=E[Ne++],ge.X[(506832829*Ge&4294967295)>>>ge.Mb]=Ge;Ge=Pe,e(!(Je>>>(gt=ge).Xa)),E[Ge]=gt.X[Je],Je=!0}Je||e(ue.h==ee(ue))}if(y.Pb&&ue.h&&Pe<G)e(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&Ie(y.s.vb,y.s.Wa);else{if(ue.h)break e;Q!=null&&Q(y,ne>X?X:ne),y.a=0,y.$=Pe-I}return 1}return y.a=3,0}function Xi(y){e(y!=null),y.vc=null,y.yc=null,y.Ya=null;var E=y.Wa;E!=null&&(E.X=null),y.vb=null,e(y!=null)}function Rr(){var y=new Ru;return y==null?null:(y.a=0,y.xb=lf,Wr("Predictor","VP8LPredictors"),Wr("Predictor","VP8LPredictors_C"),Wr("PredictorAdd","VP8LPredictorsAdd"),Wr("PredictorAdd","VP8LPredictorsAdd_C"),kh=$t,bc=Pt,Ms=lt,Is=Ii,Dl=pn,Vo=or,Fs=gn,R.VP8LMapColor32b=ju,R.VP8LMapColor8b=Os,y)}function ds(y,E,I,M,G){var X=1,Q=[y],ne=[E],re=M.m,ue=M.s,ve=null,Pe=0;e:for(;;){if(I)for(;X&&te(re,1);){var Ne=Q,Ee=ne,Ve=M,Me=1,ge=Ve.m,xe=Ve.gc[Ve.ab],We=te(ge,2);if(Ve.Oc&1<<We)X=0;else{switch(Ve.Oc|=1<<We,xe.hc=We,xe.Ea=Ne[0],xe.nc=Ee[0],xe.K=[null],++Ve.ab,e(4>=Ve.ab),We){case 0:case 1:xe.b=te(ge,3)+2,Me=ds(dt(xe.Ea,xe.b),dt(xe.nc,xe.b),0,Ve,xe.K),xe.K=xe.K[0];break;case 3:var Je,Ge=te(ge,8)+1,gt=16<Ge?0:4<Ge?1:2<Ge?2:3;if(Ne[0]=dt(xe.Ea,gt),xe.b=gt,Je=Me=ds(Ge,1,0,Ve,xe.K)){var ht,Mt=Ge,ct=xe,Yn=1<<(8>>ct.b),ti=s(Yn);if(ti==null)Je=0;else{var Mn=ct.K[0],yn=ct.w;for(ti[0]=ct.K[0][0],ht=1;ht<1*Mt;++ht)ti[ht]=Se(Mn[yn+ht],ti[ht-1]);for(;ht<4*Yn;++ht)ti[ht]=0;ct.K[0]=null,ct.K[0]=ti,Je=1}}Me=Je;break;case 2:break;default:e(0)}X=Me}}if(Q=Q[0],ne=ne[0],X&&te(re,1)&&!(X=1<=(Pe=te(re,4))&&11>=Pe)){M.a=3;break e}var Fn;if(Fn=X)t:{var di,dn,$i,Bs=M,dr=Q,ni=ne,qn=Pe,Us=I,er=Bs.m,_r=Bs.s,Er=[null],fr=1,la=0,Mi=wb[qn];n:for(;;){if(Us&&te(er,1)){var Tr=te(er,3)+2,Qo=dt(dr,Tr),Tc=dt(ni,Tr),Yu=Qo*Tc;if(!ds(Qo,Tc,0,Bs,Er))break n;for(Er=Er[0],_r.xc=Tr,di=0;di<Yu;++di){var Eo=Er[di]>>8&65535;Er[di]=Eo,Eo>=fr&&(fr=Eo+1)}}if(er.h)break n;for(dn=0;5>dn;++dn){var tr=X0[dn];!dn&&0<qn&&(tr+=1<<qn),la<tr&&(la=tr)}var Ac=a(fr*Mi,O),Eg=fr,ny=a(Eg,J);if(ny==null)var Dh=null;else e(65536>=Eg),Dh=ny;var Jo=s(la);if(Dh==null||Jo==null||Ac==null){Bs.a=1;break n}var Oh=Ac;for(di=$i=0;di<fr;++di){var Qa=Dh[di],jl=Qa.G,Lc=Qa.H,iy=0,Mh=1,ry=0;for(dn=0;5>dn;++dn){tr=X0[dn],jl[dn]=Oh,Lc[dn]=$i,!dn&&0<qn&&(tr+=1<<qn);r:{var df,ff=tr,Fh=Bs,Cc=Jo,sy=Oh,ay=$i,jh=0,Ja=Fh.m,Db=te(Ja,1);if(r(Cc,0,0,ff),Db){var oy=te(Ja,1)+1,ly=te(Ja,1),cy=te(Ja,ly==0?1:8);Cc[cy]=1,oy==2&&(Cc[cy=te(Ja,8)]=1);var hf=1}else{var uy=s(19),Bh=te(Ja,4)+4;if(19<Bh){Fh.a=3;var pf=0;break r}for(df=0;df<Bh;++df)uy[ps[df]]=te(Ja,3);var gf=void 0,mf=void 0,Uh=Fh,wn=uy,$h=ff,dy=Cc,Ic=0,Zo=Uh.m,fy=8,hy=a(128,O);i:for(;D(hy,0,7,wn,19);){if(te(Zo,1)){var Ta=2+2*te(Zo,3);if((gf=2+te(Zo,Ta))>$h)break i}else gf=$h;for(mf=0;mf<$h&&gf--;){ce(Zo);var py=hy[0+(127&K(Zo))];ae(Zo,Zo.u+py.g);var el=py.value;if(16>el)dy[mf++]=el,el!=0&&(fy=el);else{var Tg=el==16,Ag=el-16,gy=bb[Ag],$s=te(Zo,K0[Ag])+gy;if(mf+$s>$h)break i;for(var Bl=Tg?fy:0;0<$s--;)dy[mf++]=Bl}}Ic=1;break i}Ic||(Uh.a=3),hf=Ic}(hf=hf&&!Ja.h)&&(jh=D(sy,ay,8,Cc,ff)),hf&&jh!=0?pf=jh:(Fh.a=3,pf=0)}if(pf==0)break n;if(Mh&&Dr[dn]==1&&(Mh=Oh[$i].g==0),iy+=Oh[$i].g,$i+=pf,3>=dn){var kc,Hh=Jo[0];for(kc=1;kc<tr;++kc)Jo[kc]>Hh&&(Hh=Jo[kc]);ry+=Hh}}if(Qa.nd=Mh,Qa.Qb=0,Mh&&(Qa.qb=(jl[3][Lc[3]+0].value<<24|jl[1][Lc[1]+0].value<<16|jl[2][Lc[2]+0].value)>>>0,iy==0&&256>jl[0][Lc[0]+0].value&&(Qa.Qb=1,Qa.qb+=jl[0][Lc[0]+0].value<<8)),Qa.jc=!Qa.Qb&&6>ry,Qa.jc){var Rc,To=Qa;for(Rc=0;Rc<is;++Rc){var Ao=Rc,tl=To.pd[Ao],qu=To.G[0][To.H[0]+Ao];256<=qu.value?(tl.g=qu.g+256,tl.value=qu.value):(tl.g=0,tl.value=0,Ao>>=_i(qu,8,tl),Ao>>=_i(To.G[1][To.H[1]+Ao],16,tl),Ao>>=_i(To.G[2][To.H[2]+Ao],0,tl),_i(To.G[3][To.H[3]+Ao],24,tl))}}}_r.vc=Er,_r.Wb=fr,_r.Ya=Dh,_r.yc=Ac,Fn=1;break t}Fn=0}if(!(X=Fn)){M.a=3;break e}if(0<Pe){if(ue.ua=1<<Pe,!ft(ue.Wa,Pe)){M.a=1,X=0;break e}}else ue.ua=0;var yf=M,nl=Q,Ob=ne,Lo=yf.s,Wh=Lo.xc;if(yf.c=nl,yf.i=Ob,Lo.md=dt(nl,Wh),Lo.wc=Wh==0?-1:(1<<Wh)-1,I){M.xb=Eb;break e}if((ve=s(Q*ne))==null){M.a=1,X=0;break e}X=(X=Ki(M,ve,0,Q,ne,ne,null))&&!re.h;break e}return X?(G!=null?G[0]=ve:(e(ve==null),e(I)),M.$=0,I||Xi(ue)):Xi(ue),X}function Zr(y,E){var I=y.c*y.i,M=I+E+16*E;return e(y.c<=E),y.V=s(M),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+I+E,1)}function Es(y,E){var I=y.C,M=E-I,G=y.V,X=y.Ba+y.c*I;for(e(E<=y.l.o);0<M;){var Q=16<M?16:M,ne=y.l.ma,re=y.l.width,ue=re*Q,ve=ne.ca,Pe=ne.tb+re*I,Ne=y.Ta,Ee=y.Ua;Cn(y,Q,G,X),ur(Ne,Ee,ve,Pe,ue),Jr(ne,I,I+Q,ve,Pe,re),M-=Q,G+=Q*y.c,I+=Q}e(I==E),y.C=y.Ma=E}function oi(){this.ub=this.yd=this.td=this.Rb=0}function fs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function br(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Pr(){this.Yb=function(){var y=[];return function E(I,M,G){for(var X=G[M],Q=0;Q<X&&(I.push(G.length>M+1?[]:0),!(G.length<M+1));Q++)E(I[Q],M+1,G)}(y,0,[3,11]),y}()}function Vr(){this.jb=s(3),this.Wc=o([4,8],Pr),this.Xc=o([4,17],Pr)}function ra(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function li(){this.ld=this.La=this.dd=this.tc=0}function Wa(){this.Na=this.la=0}function Ts(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ti(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Oe(){this.uc=this.M=this.Nb=0,this.wa=Array(new li),this.Y=0,this.ya=Array(new Ti),this.aa=0,this.l=new Ai}function Kt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function ln(){this.cb=this.a=0,this.sc="",this.m=new fe,this.Od=new oi,this.Kc=new fs,this.ed=new ra,this.Qa=new br,this.Ic=this.$c=this.Aa=0,this.D=new Oe,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,fe),this.ia=0,this.pb=a(4,Ts),this.Pa=new Vr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Kt),this.Hd=0,this.rb=Array(new Wa),this.sb=0,this.wa=Array(new li),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ti),this.L=this.aa=0,this.gd=o([4,2],li),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ai(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function yt(){var y=new ln;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,qo||(qo=Lt)),y}function _e(y,E,I){return y.a==0&&(y.a=E,y.sc=I,y.cb=0),0}function Ue(y,E,I){return 3<=I&&y[E+0]==157&&y[E+1]==1&&y[E+2]==42}function vt(y,E){if(y==null)return 0;if(y.a=0,y.sc="OK",E==null)return _e(y,2,"null VP8Io passed to VP8GetHeaders()");var I=E.data,M=E.w,G=E.ha;if(4>G)return _e(y,7,"Truncated header.");var X=I[M+0]|I[M+1]<<8|I[M+2]<<16,Q=y.Od;if(Q.Rb=!(1&X),Q.td=X>>1&7,Q.yd=X>>4&1,Q.ub=X>>5,3<Q.td)return _e(y,3,"Incorrect keyframe parameters.");if(!Q.yd)return _e(y,4,"Frame not displayable.");M+=3,G-=3;var ne=y.Kc;if(Q.Rb){if(7>G)return _e(y,7,"cannot parse picture header");if(!Ue(I,M,G))return _e(y,3,"Bad code word");ne.c=16383&(I[M+4]<<8|I[M+3]),ne.Td=I[M+4]>>6,ne.i=16383&(I[M+6]<<8|I[M+5]),ne.Ud=I[M+6]>>6,M+=7,G-=7,y.za=ne.c+15>>4,y.Ub=ne.i+15>>4,E.width=ne.c,E.height=ne.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,r((X=y.Pa).jb,0,255,X.jb.length),e((X=y.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,r(X.Zb,0,0,X.Zb.length),r(X.Lb,0,0,X.Lb)}if(Q.ub>G)return _e(y,7,"bad partition length");le(X=y.m,I,M,Q.ub),M+=Q.ub,G-=Q.ub,Q.Rb&&(ne.Ld=be(X),ne.Kd=be(X)),ne=y.Qa;var re,ue=y.Pa;if(e(X!=null),e(ne!=null),ne.Cb=be(X),ne.Cb){if(ne.Bb=be(X),be(X)){for(ne.Fb=be(X),re=0;4>re;++re)ne.Zb[re]=be(X)?V(X,7):0;for(re=0;4>re;++re)ne.Lb[re]=be(X)?V(X,6):0}if(ne.Bb)for(re=0;3>re;++re)ue.jb[re]=be(X)?H(X,8):255}else ne.Bb=0;if(X.Ka)return _e(y,3,"cannot parse segment header");if((ne=y.ed).zd=be(X),ne.Tb=H(X,6),ne.wb=H(X,3),ne.Pc=be(X),ne.Pc&&be(X)){for(ue=0;4>ue;++ue)be(X)&&(ne.vd[ue]=V(X,6));for(ue=0;4>ue;++ue)be(X)&&(ne.od[ue]=V(X,6))}if(y.L=ne.Tb==0?0:ne.zd?1:2,X.Ka)return _e(y,3,"cannot parse filter header");var ve=G;if(G=re=M,M=re+ve,ne=ve,y.Xb=(1<<H(y.m,2))-1,ve<3*(ue=y.Xb))I=7;else{for(re+=3*ue,ne-=3*ue,ve=0;ve<ue;++ve){var Pe=I[G+0]|I[G+1]<<8|I[G+2]<<16;Pe>ne&&(Pe=ne),le(y.Jc[+ve],I,re,Pe),re+=Pe,ne-=Pe,G+=3}le(y.Jc[+ue],I,re,ne),I=re<M?0:5}if(I!=0)return _e(y,I,"cannot parse partitions");for(I=H(re=y.m,7),G=be(re)?V(re,4):0,M=be(re)?V(re,4):0,ne=be(re)?V(re,4):0,ue=be(re)?V(re,4):0,re=be(re)?V(re,4):0,ve=y.Qa,Pe=0;4>Pe;++Pe){if(ve.Cb){var Ne=ve.Zb[Pe];ve.Fb||(Ne+=I)}else{if(0<Pe){y.pb[Pe]=y.pb[0];continue}Ne=I}var Ee=y.pb[Pe];Ee.Sc[0]=Sg[ki(Ne+G,127)],Ee.Sc[1]=af[ki(Ne+0,127)],Ee.Eb[0]=2*Sg[ki(Ne+M,127)],Ee.Eb[1]=101581*af[ki(Ne+ne,127)]>>16,8>Ee.Eb[1]&&(Ee.Eb[1]=8),Ee.Qc[0]=Sg[ki(Ne+ue,117)],Ee.Qc[1]=af[ki(Ne+re,127)],Ee.lc=Ne+re}if(!Q.Rb)return _e(y,4,"Not a key frame.");for(be(X),Q=y.Pa,I=0;4>I;++I){for(G=0;8>G;++G)for(M=0;3>M;++M)for(ne=0;11>ne;++ne)ue=Te(X,Gu[I][G][M][ne])?H(X,8):of[I][G][M][ne],Q.Wc[I][G].Yb[M][ne]=ue;for(G=0;17>G;++G)Q.Xc[I][G]=Q.Wc[I][_b[G]]}return y.kc=be(X),y.kc&&(y.Bd=H(X,8)),y.cb=1}function Lt(y,E,I,M,G,X,Q){var ne=E[G].Yb[I];for(I=0;16>G;++G){if(!Te(y,ne[I+0]))return G;for(;!Te(y,ne[I+1]);)if(ne=E[++G].Yb[0],I=0,G==16)return 16;var re=E[G+1].Yb;if(Te(y,ne[I+2])){var ue=y,ve=0;if(Te(ue,(Ne=ne)[(Pe=I)+3]))if(Te(ue,Ne[Pe+6])){for(ne=0,Pe=2*(ve=Te(ue,Ne[Pe+8]))+(Ne=Te(ue,Ne[Pe+9+ve])),ve=0,Ne=wg[Pe];Ne[ne];++ne)ve+=ve+Te(ue,Ne[ne]);ve+=3+(8<<Pe)}else Te(ue,Ne[Pe+7])?(ve=7+2*Te(ue,165),ve+=Te(ue,145)):ve=5+Te(ue,159);else ve=Te(ue,Ne[Pe+4])?3+Te(ue,Ne[Pe+5]):2;ne=re[2]}else ve=1,ne=re[1];re=Q+Wu[G],0>(ue=y).b&&ye(ue);var Pe,Ne=ue.b,Ee=(Pe=ue.Ca>>1)-(ue.I>>Ne)>>31;--ue.b,ue.Ca+=Ee,ue.Ca|=1,ue.I-=(Pe+1&Ee)<<Ne,X[re]=((ve^Ee)-Ee)*M[(0<G)+0]}return 16}function Gt(y){var E=y.rb[y.sb-1];E.la=0,E.Na=0,r(y.zc,0,0,y.zc.length),y.ja=0}function bn(y,E){if(y==null)return 0;if(E==null)return _e(y,2,"NULL VP8Io parameter in VP8Decode().");if(!y.cb&&!vt(y,E))return 0;if(e(y.cb),E.ac==null||E.ac(E)){E.ob&&(y.L=0);var I=Ea[y.L];if(y.L==2?(y.yb=0,y.zb=0):(y.yb=E.v-I>>4,y.zb=E.j-I>>4,0>y.yb&&(y.yb=0),0>y.zb&&(y.zb=0)),y.Va=E.o+15+I>>4,y.Hb=E.va+15+I>>4,y.Hb>y.za&&(y.Hb=y.za),y.Va>y.Ub&&(y.Va=y.Ub),0<y.L){var M=y.ed;for(I=0;4>I;++I){var G;if(y.Qa.Cb){var X=y.Qa.Lb[I];y.Qa.Fb||(X+=M.Tb)}else X=M.Tb;for(G=0;1>=G;++G){var Q=y.gd[I][G],ne=X;if(M.Pc&&(ne+=M.vd[0],G&&(ne+=M.od[0])),0<(ne=0>ne?0:63<ne?63:ne)){var re=ne;0<M.wb&&(re=4<M.wb?re>>2:re>>1)>9-M.wb&&(re=9-M.wb),1>re&&(re=1),Q.dd=re,Q.tc=2*ne+re,Q.ld=40<=ne?2:15<=ne?1:0}else Q.tc=0;Q.La=G}}}I=0}else _e(y,6,"Frame setup failed"),I=y.a;if(I=I==0){if(I){y.$c=0,0<y.Aa||(y.Ic=Nb);e:{I=y.Ic,M=4*(re=y.za);var ue=32*re,ve=re+1,Pe=0<y.L?re*(0<y.Aa?2:1):0,Ne=(y.Aa==2?2:1)*re;if((Q=M+832+(G=3*(16*I+Ea[y.L])/2*ue)+(X=y.Fa!=null&&0<y.Fa.length?y.Kc.c*y.Kc.i:0))!=Q)I=0;else{if(Q>y.Vb){if(y.Vb=0,y.Ec=s(Q),y.Fc=0,y.Ec==null){I=_e(y,1,"no memory during frame initialization.");break e}y.Vb=Q}Q=y.Ec,ne=y.Fc,y.Ac=Q,y.Bc=ne,ne+=M,y.Gd=a(ue,Kt),y.Hd=0,y.rb=a(ve+1,Wa),y.sb=1,y.wa=Pe?a(Pe,li):null,y.Y=0,y.D.Nb=0,y.D.wa=y.wa,y.D.Y=y.Y,0<y.Aa&&(y.D.Y+=re),e(!0),y.oc=Q,y.pc=ne,ne+=832,y.ya=a(Ne,Ti),y.aa=0,y.D.ya=y.ya,y.D.aa=y.aa,y.Aa==2&&(y.D.aa+=re),y.R=16*re,y.B=8*re,re=(ue=Ea[y.L])*y.R,ue=ue/2*y.B,y.sa=Q,y.ta=ne+re,y.qa=y.sa,y.ra=y.ta+16*I*y.R+ue,y.Ha=y.qa,y.Ia=y.ra+8*I*y.B+ue,y.$c=0,ne+=G,y.mb=X?Q:null,y.nb=X?ne:null,e(ne+X<=y.Fc+y.Vb),Gt(y),r(y.Ac,y.Bc,0,M),I=1}}if(I){if(E.ka=0,E.y=y.sa,E.O=y.ta,E.f=y.qa,E.N=y.ra,E.ea=y.Ha,E.Vd=y.Ia,E.fa=y.R,E.Rc=y.B,E.F=null,E.J=0,!nf){for(I=-255;255>=I;++I)Nr[255+I]=0>I?-I:I;for(I=-1020;1020>=I;++I)Sa[1020+I]=-128>I?-128:127<I?127:I;for(I=-112;112>=I;++I)wa[112+I]=-16>I?-16:15<I?15:I;for(I=-255;510>=I;++I)Yo[255+I]=0>I?0:255<I?255:I;nf=1}we=As,Be=Bt,St=Ct,Ot=Qn,un=In,Re=an,Oi=Cu,ei=kl,Sc=Ch,wc=Iu,Kr=Lh,Ya=vc,_c=ts,qa=Ih,wo=wr,Ka=ga,$n=Ls,ba=Ah,Xa[0]=vo,Xa[1]=on,Xa[2]=hg,Xa[3]=pg,Xa[4]=_h,Xa[5]=Au,Xa[6]=Tu,Xa[7]=Kd,Xa[8]=mg,Xa[9]=gg,Fl[0]=es,Fl[1]=cn,Fl[2]=Ni,Fl[3]=za,Fl[4]=Sr,Fl[5]=fg,Fl[6]=wh,Ko[0]=Il,Ko[1]=Jn,Ko[2]=yg,Ko[3]=ci,Ko[4]=yc,Ko[5]=vg,Ko[6]=Xd,I=1}else I=0}I&&(I=function(Ee,Ve){for(Ee.M=0;Ee.M<Ee.Va;++Ee.M){var Me,ge=Ee.Jc[Ee.M&Ee.Xb],xe=Ee.m,We=Ee;for(Me=0;Me<We.za;++Me){var Je=xe,Ge=We,gt=Ge.Ac,ht=Ge.Bc+4*Me,Mt=Ge.zc,ct=Ge.ya[Ge.aa+Me];if(Ge.Qa.Bb?ct.$b=Te(Je,Ge.Pa.jb[0])?2+Te(Je,Ge.Pa.jb[2]):Te(Je,Ge.Pa.jb[1]):ct.$b=0,Ge.kc&&(ct.Ad=Te(Je,Ge.Bd)),ct.Za=!Te(Je,145)+0,ct.Za){var Yn=ct.Ob,ti=0;for(Ge=0;4>Ge;++Ge){var Mn,yn=Mt[0+Ge];for(Mn=0;4>Mn;++Mn){yn=Ph[gt[ht+Mn]][yn];for(var Fn=zu[Te(Je,yn[0])];0<Fn;)Fn=zu[2*Fn+Te(Je,yn[Fn])];yn=-Fn,gt[ht+Mn]=yn}i(Yn,ti,gt,ht,4),ti+=4,Mt[0+Ge]=yn}}else yn=Te(Je,156)?Te(Je,128)?1:3:Te(Je,163)?2:0,ct.Ob[0]=yn,r(gt,ht,yn,4),r(Mt,0,yn,4);ct.Dd=Te(Je,142)?Te(Je,114)?Te(Je,183)?1:3:2:0}if(We.m.Ka)return _e(Ee,7,"Premature end-of-partition0 encountered.");for(;Ee.ja<Ee.za;++Ee.ja){if(We=ge,Je=(xe=Ee).rb[xe.sb-1],gt=xe.rb[xe.sb+xe.ja],Me=xe.ya[xe.aa+xe.ja],ht=xe.kc?Me.Ad:0)Je.la=gt.la=0,Me.Za||(Je.Na=gt.Na=0),Me.Hc=0,Me.Gc=0,Me.ia=0;else{var di,dn;if(Je=gt,gt=We,ht=xe.Pa.Xc,Mt=xe.ya[xe.aa+xe.ja],ct=xe.pb[Mt.$b],Ge=Mt.ad,Yn=0,ti=xe.rb[xe.sb-1],yn=Mn=0,r(Ge,Yn,0,384),Mt.Za)var $i=0,Bs=ht[3];else{Fn=s(16);var dr=Je.Na+ti.Na;if(dr=qo(gt,ht[1],dr,ct.Eb,0,Fn,0),Je.Na=ti.Na=(0<dr)+0,1<dr)we(Fn,0,Ge,Yn);else{var ni=Fn[0]+3>>3;for(Fn=0;256>Fn;Fn+=16)Ge[Yn+Fn]=ni}$i=1,Bs=ht[0]}var qn=15&Je.la,Us=15&ti.la;for(Fn=0;4>Fn;++Fn){var er=1&Us;for(ni=dn=0;4>ni;++ni)qn=qn>>1|(er=(dr=qo(gt,Bs,dr=er+(1&qn),ct.Sc,$i,Ge,Yn))>$i)<<7,dn=dn<<2|(3<dr?3:1<dr?2:Ge[Yn+0]!=0),Yn+=16;qn>>=4,Us=Us>>1|er<<7,Mn=(Mn<<8|dn)>>>0}for(Bs=qn,$i=Us>>4,di=0;4>di;di+=2){for(dn=0,qn=Je.la>>4+di,Us=ti.la>>4+di,Fn=0;2>Fn;++Fn){for(er=1&Us,ni=0;2>ni;++ni)dr=er+(1&qn),qn=qn>>1|(er=0<(dr=qo(gt,ht[2],dr,ct.Qc,0,Ge,Yn)))<<3,dn=dn<<2|(3<dr?3:1<dr?2:Ge[Yn+0]!=0),Yn+=16;qn>>=2,Us=Us>>1|er<<5}yn|=dn<<4*di,Bs|=qn<<4<<di,$i|=(240&Us)<<di}Je.la=Bs,ti.la=$i,Mt.Hc=Mn,Mt.Gc=yn,Mt.ia=43690&yn?0:ct.ia,ht=!(Mn|yn)}if(0<xe.L&&(xe.wa[xe.Y+xe.ja]=xe.gd[Me.$b][Me.Za],xe.wa[xe.Y+xe.ja].La|=!ht),We.Ka)return _e(Ee,7,"Premature end-of-file encountered.")}if(Gt(Ee),xe=Ve,We=1,Me=(ge=Ee).D,Je=0<ge.L&&ge.M>=ge.zb&&ge.M<=ge.Va,ge.Aa==0)e:{if(Me.M=ge.M,Me.uc=Je,Nu(ge,Me),We=1,Me=(dn=ge.D).Nb,Je=(yn=Ea[ge.L])*ge.R,gt=yn/2*ge.B,Fn=16*Me*ge.R,ni=8*Me*ge.B,ht=ge.sa,Mt=ge.ta-Je+Fn,ct=ge.qa,Ge=ge.ra-gt+ni,Yn=ge.Ha,ti=ge.Ia-gt+ni,Us=(qn=dn.M)==0,Mn=qn>=ge.Va-1,ge.Aa==2&&Nu(ge,dn),dn.uc)for(er=(dr=ge).D.M,e(dr.D.uc),dn=dr.yb;dn<dr.Hb;++dn){$i=dn,Bs=er;var _r=(Er=(tr=dr).D).Nb;di=tr.R;var Er=Er.wa[Er.Y+$i],fr=tr.sa,la=tr.ta+16*_r*di+16*$i,Mi=Er.dd,Tr=Er.tc;if(Tr!=0)if(e(3<=Tr),tr.L==1)0<$i&&Ka(fr,la,di,Tr+4),Er.La&&ba(fr,la,di,Tr),0<Bs&&wo(fr,la,di,Tr+4),Er.La&&$n(fr,la,di,Tr);else{var Qo=tr.B,Tc=tr.qa,Yu=tr.ra+8*_r*Qo+8*$i,Eo=tr.Ha,tr=tr.Ia+8*_r*Qo+8*$i;_r=Er.ld,0<$i&&(ei(fr,la,di,Tr+4,Mi,_r),wc(Tc,Yu,Eo,tr,Qo,Tr+4,Mi,_r)),Er.La&&(Ya(fr,la,di,Tr,Mi,_r),qa(Tc,Yu,Eo,tr,Qo,Tr,Mi,_r)),0<Bs&&(Oi(fr,la,di,Tr+4,Mi,_r),Sc(Tc,Yu,Eo,tr,Qo,Tr+4,Mi,_r)),Er.La&&(Kr(fr,la,di,Tr,Mi,_r),_c(Tc,Yu,Eo,tr,Qo,Tr,Mi,_r))}}if(ge.ia&&alert("todo:DitherRow"),xe.put!=null){if(dn=16*qn,qn=16*(qn+1),Us?(xe.y=ge.sa,xe.O=ge.ta+Fn,xe.f=ge.qa,xe.N=ge.ra+ni,xe.ea=ge.Ha,xe.W=ge.Ia+ni):(dn-=yn,xe.y=ht,xe.O=Mt,xe.f=ct,xe.N=Ge,xe.ea=Yn,xe.W=ti),Mn||(qn-=yn),qn>xe.o&&(qn=xe.o),xe.F=null,xe.J=null,ge.Fa!=null&&0<ge.Fa.length&&dn<qn&&(xe.J=Zd(ge,xe,dn,qn-dn),xe.F=ge.mb,xe.F==null&&xe.F.length==0)){We=_e(ge,3,"Could not decode alpha data.");break e}dn<xe.j&&(yn=xe.j-dn,dn=xe.j,e(!(1&yn)),xe.O+=ge.R*yn,xe.N+=ge.B*(yn>>1),xe.W+=ge.B*(yn>>1),xe.F!=null&&(xe.J+=xe.width*yn)),dn<qn&&(xe.O+=xe.v,xe.N+=xe.v>>1,xe.W+=xe.v>>1,xe.F!=null&&(xe.J+=xe.v),xe.ka=dn-xe.j,xe.U=xe.va-xe.v,xe.T=qn-dn,We=xe.put(xe))}Me+1!=ge.Ic||Mn||(i(ge.sa,ge.ta-Je,ht,Mt+16*ge.R,Je),i(ge.qa,ge.ra-gt,ct,Ge+8*ge.B,gt),i(ge.Ha,ge.Ia-gt,Yn,ti+8*ge.B,gt))}if(!We)return _e(Ee,6,"Output aborted.")}return 1}(y,E)),E.bc!=null&&E.bc(E),I&=1}return I?(y.cb=0,I):0}function Sn(y,E,I,M,G){G=y[E+I+32*M]+(G>>3),y[E+I+32*M]=-256&G?0>G?0:255:G}function Ae(y,E,I,M,G,X){Sn(y,E,0,I,M+G),Sn(y,E,1,I,M+X),Sn(y,E,2,I,M-X),Sn(y,E,3,I,M-G)}function Ke(y){return(20091*y>>16)+y}function Nt(y,E,I,M){var G,X=0,Q=s(16);for(G=0;4>G;++G){var ne=y[E+0]+y[E+8],re=y[E+0]-y[E+8],ue=(35468*y[E+4]>>16)-Ke(y[E+12]),ve=Ke(y[E+4])+(35468*y[E+12]>>16);Q[X+0]=ne+ve,Q[X+1]=re+ue,Q[X+2]=re-ue,Q[X+3]=ne-ve,X+=4,E++}for(G=X=0;4>G;++G)ne=(y=Q[X+0]+4)+Q[X+8],re=y-Q[X+8],ue=(35468*Q[X+4]>>16)-Ke(Q[X+12]),Sn(I,M,0,0,ne+(ve=Ke(Q[X+4])+(35468*Q[X+12]>>16))),Sn(I,M,1,0,re+ue),Sn(I,M,2,0,re-ue),Sn(I,M,3,0,ne-ve),X++,M+=32}function an(y,E,I,M){var G=y[E+0]+4,X=35468*y[E+4]>>16,Q=Ke(y[E+4]),ne=35468*y[E+1]>>16;Ae(I,M,0,G+Q,y=Ke(y[E+1]),ne),Ae(I,M,1,G+X,y,ne),Ae(I,M,2,G-X,y,ne),Ae(I,M,3,G-Q,y,ne)}function Bt(y,E,I,M,G){Nt(y,E,I,M),G&&Nt(y,E+16,I,M+4)}function Ct(y,E,I,M){Be(y,E+0,I,M,1),Be(y,E+32,I,M+128,1)}function Qn(y,E,I,M){var G;for(y=y[E+0]+4,G=0;4>G;++G)for(E=0;4>E;++E)Sn(I,M,E,G,y)}function In(y,E,I,M){y[E+0]&&Ot(y,E+0,I,M),y[E+16]&&Ot(y,E+16,I,M+4),y[E+32]&&Ot(y,E+32,I,M+128),y[E+48]&&Ot(y,E+48,I,M+128+4)}function As(y,E,I,M){var G,X=s(16);for(G=0;4>G;++G){var Q=y[E+0+G]+y[E+12+G],ne=y[E+4+G]+y[E+8+G],re=y[E+4+G]-y[E+8+G],ue=y[E+0+G]-y[E+12+G];X[0+G]=Q+ne,X[8+G]=Q-ne,X[4+G]=ue+re,X[12+G]=ue-re}for(G=0;4>G;++G)Q=(y=X[0+4*G]+3)+X[3+4*G],ne=X[1+4*G]+X[2+4*G],re=X[1+4*G]-X[2+4*G],ue=y-X[3+4*G],I[M+0]=Q+ne>>3,I[M+16]=ue+re>>3,I[M+32]=Q-ne>>3,I[M+48]=ue-re>>3,M+=64}function hs(y,E,I){var M,G=E-32,X=js,Q=255-y[G-1];for(M=0;M<I;++M){var ne,re=X,ue=Q+y[E-1];for(ne=0;ne<I;++ne)y[E+ne]=re[ue+y[G+ne]];E+=32}}function on(y,E){hs(y,E,4)}function Jn(y,E){hs(y,E,8)}function cn(y,E){hs(y,E,16)}function Ni(y,E){var I;for(I=0;16>I;++I)i(y,E+32*I,y,E-32,16)}function za(y,E){var I;for(I=16;0<I;--I)r(y,E,y[E-1],16),E+=32}function Ds(y,E,I){var M;for(M=0;16>M;++M)r(E,I+32*M,y,16)}function es(y,E){var I,M=16;for(I=0;16>I;++I)M+=y[E-1+32*I]+y[E+I-32];Ds(M>>5,y,E)}function Sr(y,E){var I,M=8;for(I=0;16>I;++I)M+=y[E-1+32*I];Ds(M>>4,y,E)}function fg(y,E){var I,M=8;for(I=0;16>I;++I)M+=y[E+I-32];Ds(M>>4,y,E)}function wh(y,E){Ds(128,y,E)}function tn(y,E,I){return y+2*E+I+2>>2}function hg(y,E){var I,M=E-32;for(M=new Uint8Array([tn(y[M-1],y[M+0],y[M+1]),tn(y[M+0],y[M+1],y[M+2]),tn(y[M+1],y[M+2],y[M+3]),tn(y[M+2],y[M+3],y[M+4])]),I=0;4>I;++I)i(y,E+32*I,M,0,M.length)}function pg(y,E){var I=y[E-1],M=y[E-1+32],G=y[E-1+64],X=y[E-1+96];Xe(y,E+0,16843009*tn(y[E-1-32],I,M)),Xe(y,E+32,16843009*tn(I,M,G)),Xe(y,E+64,16843009*tn(M,G,X)),Xe(y,E+96,16843009*tn(G,X,X))}function vo(y,E){var I,M=4;for(I=0;4>I;++I)M+=y[E+I-32]+y[E-1+32*I];for(M>>=3,I=0;4>I;++I)r(y,E+32*I,M,4)}function _h(y,E){var I=y[E-1+0],M=y[E-1+32],G=y[E-1+64],X=y[E-1-32],Q=y[E+0-32],ne=y[E+1-32],re=y[E+2-32],ue=y[E+3-32];y[E+0+96]=tn(M,G,y[E-1+96]),y[E+1+96]=y[E+0+64]=tn(I,M,G),y[E+2+96]=y[E+1+64]=y[E+0+32]=tn(X,I,M),y[E+3+96]=y[E+2+64]=y[E+1+32]=y[E+0+0]=tn(Q,X,I),y[E+3+64]=y[E+2+32]=y[E+1+0]=tn(ne,Q,X),y[E+3+32]=y[E+2+0]=tn(re,ne,Q),y[E+3+0]=tn(ue,re,ne)}function Tu(y,E){var I=y[E+1-32],M=y[E+2-32],G=y[E+3-32],X=y[E+4-32],Q=y[E+5-32],ne=y[E+6-32],re=y[E+7-32];y[E+0+0]=tn(y[E+0-32],I,M),y[E+1+0]=y[E+0+32]=tn(I,M,G),y[E+2+0]=y[E+1+32]=y[E+0+64]=tn(M,G,X),y[E+3+0]=y[E+2+32]=y[E+1+64]=y[E+0+96]=tn(G,X,Q),y[E+3+32]=y[E+2+64]=y[E+1+96]=tn(X,Q,ne),y[E+3+64]=y[E+2+96]=tn(Q,ne,re),y[E+3+96]=tn(ne,re,re)}function Au(y,E){var I=y[E-1+0],M=y[E-1+32],G=y[E-1+64],X=y[E-1-32],Q=y[E+0-32],ne=y[E+1-32],re=y[E+2-32],ue=y[E+3-32];y[E+0+0]=y[E+1+64]=X+Q+1>>1,y[E+1+0]=y[E+2+64]=Q+ne+1>>1,y[E+2+0]=y[E+3+64]=ne+re+1>>1,y[E+3+0]=re+ue+1>>1,y[E+0+96]=tn(G,M,I),y[E+0+64]=tn(M,I,X),y[E+0+32]=y[E+1+96]=tn(I,X,Q),y[E+1+32]=y[E+2+96]=tn(X,Q,ne),y[E+2+32]=y[E+3+96]=tn(Q,ne,re),y[E+3+32]=tn(ne,re,ue)}function Kd(y,E){var I=y[E+0-32],M=y[E+1-32],G=y[E+2-32],X=y[E+3-32],Q=y[E+4-32],ne=y[E+5-32],re=y[E+6-32],ue=y[E+7-32];y[E+0+0]=I+M+1>>1,y[E+1+0]=y[E+0+64]=M+G+1>>1,y[E+2+0]=y[E+1+64]=G+X+1>>1,y[E+3+0]=y[E+2+64]=X+Q+1>>1,y[E+0+32]=tn(I,M,G),y[E+1+32]=y[E+0+96]=tn(M,G,X),y[E+2+32]=y[E+1+96]=tn(G,X,Q),y[E+3+32]=y[E+2+96]=tn(X,Q,ne),y[E+3+64]=tn(Q,ne,re),y[E+3+96]=tn(ne,re,ue)}function gg(y,E){var I=y[E-1+0],M=y[E-1+32],G=y[E-1+64],X=y[E-1+96];y[E+0+0]=I+M+1>>1,y[E+2+0]=y[E+0+32]=M+G+1>>1,y[E+2+32]=y[E+0+64]=G+X+1>>1,y[E+1+0]=tn(I,M,G),y[E+3+0]=y[E+1+32]=tn(M,G,X),y[E+3+32]=y[E+1+64]=tn(G,X,X),y[E+3+64]=y[E+2+64]=y[E+0+96]=y[E+1+96]=y[E+2+96]=y[E+3+96]=X}function mg(y,E){var I=y[E-1+0],M=y[E-1+32],G=y[E-1+64],X=y[E-1+96],Q=y[E-1-32],ne=y[E+0-32],re=y[E+1-32],ue=y[E+2-32];y[E+0+0]=y[E+2+32]=I+Q+1>>1,y[E+0+32]=y[E+2+64]=M+I+1>>1,y[E+0+64]=y[E+2+96]=G+M+1>>1,y[E+0+96]=X+G+1>>1,y[E+3+0]=tn(ne,re,ue),y[E+2+0]=tn(Q,ne,re),y[E+1+0]=y[E+3+32]=tn(I,Q,ne),y[E+1+32]=y[E+3+64]=tn(M,I,Q),y[E+1+64]=y[E+3+96]=tn(G,M,I),y[E+1+96]=tn(X,G,M)}function yg(y,E){var I;for(I=0;8>I;++I)i(y,E+32*I,y,E-32,8)}function ci(y,E){var I;for(I=0;8>I;++I)r(y,E,y[E-1],8),E+=32}function Gn(y,E,I){var M;for(M=0;8>M;++M)r(E,I+32*M,y,8)}function Il(y,E){var I,M=8;for(I=0;8>I;++I)M+=y[E+I-32]+y[E-1+32*I];Gn(M>>4,y,E)}function vg(y,E){var I,M=4;for(I=0;8>I;++I)M+=y[E+I-32];Gn(M>>3,y,E)}function yc(y,E){var I,M=4;for(I=0;8>I;++I)M+=y[E-1+32*I];Gn(M>>3,y,E)}function Xd(y,E){Gn(128,y,E)}function Lu(y,E,I){var M=y[E-I],G=y[E+0],X=3*(G-M)+Bu[1020+y[E-2*I]-y[E+I]],Q=rf[112+(X+4>>3)];y[E-I]=js[255+M+rf[112+(X+3>>3)]],y[E+0]=js[255+G-Q]}function Eh(y,E,I,M){var G=y[E+0],X=y[E+I];return ks[255+y[E-2*I]-y[E-I]]>M||ks[255+X-G]>M}function Qd(y,E,I,M){return 4*ks[255+y[E-I]-y[E+0]]+ks[255+y[E-2*I]-y[E+I]]<=M}function Th(y,E,I,M,G){var X=y[E-3*I],Q=y[E-2*I],ne=y[E-I],re=y[E+0],ue=y[E+I],ve=y[E+2*I],Pe=y[E+3*I];return 4*ks[255+ne-re]+ks[255+Q-ue]>M?0:ks[255+y[E-4*I]-X]<=G&&ks[255+X-Q]<=G&&ks[255+Q-ne]<=G&&ks[255+Pe-ve]<=G&&ks[255+ve-ue]<=G&&ks[255+ue-re]<=G}function wr(y,E,I,M){var G=2*M+1;for(M=0;16>M;++M)Qd(y,E+M,I,G)&&Lu(y,E+M,I)}function ga(y,E,I,M){var G=2*M+1;for(M=0;16>M;++M)Qd(y,E+M*I,1,G)&&Lu(y,E+M*I,1)}function Ls(y,E,I,M){var G;for(G=3;0<G;--G)wr(y,E+=4*I,I,M)}function Ah(y,E,I,M){var G;for(G=3;0<G;--G)ga(y,E+=4,I,M)}function xo(y,E,I,M,G,X,Q,ne){for(X=2*X+1;0<G--;){if(Th(y,E,I,X,Q))if(Eh(y,E,I,ne))Lu(y,E,I);else{var re=y,ue=E,ve=I,Pe=re[ue-2*ve],Ne=re[ue-ve],Ee=re[ue+0],Ve=re[ue+ve],Me=re[ue+2*ve],ge=27*(We=Bu[1020+3*(Ee-Ne)+Bu[1020+Pe-Ve]])+63>>7,xe=18*We+63>>7,We=9*We+63>>7;re[ue-3*ve]=js[255+re[ue-3*ve]+We],re[ue-2*ve]=js[255+Pe+xe],re[ue-ve]=js[255+Ne+ge],re[ue+0]=js[255+Ee-ge],re[ue+ve]=js[255+Ve-xe],re[ue+2*ve]=js[255+Me-We]}E+=M}}function Qi(y,E,I,M,G,X,Q,ne){for(X=2*X+1;0<G--;){if(Th(y,E,I,X,Q))if(Eh(y,E,I,ne))Lu(y,E,I);else{var re=y,ue=E,ve=I,Pe=re[ue-ve],Ne=re[ue+0],Ee=re[ue+ve],Ve=rf[112+((Me=3*(Ne-Pe))+4>>3)],Me=rf[112+(Me+3>>3)],ge=Ve+1>>1;re[ue-2*ve]=js[255+re[ue-2*ve]+ge],re[ue-ve]=js[255+Pe+Me],re[ue+0]=js[255+Ne-Ve],re[ue+ve]=js[255+Ee-ge]}E+=M}}function Cu(y,E,I,M,G,X){xo(y,E,I,1,16,M,G,X)}function kl(y,E,I,M,G,X){xo(y,E,1,I,16,M,G,X)}function Lh(y,E,I,M,G,X){var Q;for(Q=3;0<Q;--Q)Qi(y,E+=4*I,I,1,16,M,G,X)}function vc(y,E,I,M,G,X){var Q;for(Q=3;0<Q;--Q)Qi(y,E+=4,1,I,16,M,G,X)}function Ch(y,E,I,M,G,X,Q,ne){xo(y,E,G,1,8,X,Q,ne),xo(I,M,G,1,8,X,Q,ne)}function Iu(y,E,I,M,G,X,Q,ne){xo(y,E,1,G,8,X,Q,ne),xo(I,M,1,G,8,X,Q,ne)}function ts(y,E,I,M,G,X,Q,ne){Qi(y,E+4*G,G,1,8,X,Q,ne),Qi(I,M+4*G,G,1,8,X,Q,ne)}function Ih(y,E,I,M,G,X,Q,ne){Qi(y,E+4,1,G,8,X,Q,ne),Qi(I,M+4,1,G,8,X,Q,ne)}function ns(){this.ba=new zr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new si,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Jd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ku(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ga(){this.ua=0,this.Wa=new oe,this.vb=new oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new J,this.yc=new O}function Ru(){this.xb=this.a=0,this.l=new Ai,this.ca=new zr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ga,this.ab=0,this.gc=a(4,ku),this.Oc=0}function Rl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ai,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zn(y,E,I,M,G,X,Q){for(y=y==null?0:y[E+0],E=0;E<Q;++E)G[X+E]=y+I[M+E]&255,y=G[X+E]}function ma(y,E,I,M,G,X,Q){var ne;if(y==null)Zn(null,null,I,M,G,X,Q);else for(ne=0;ne<Q;++ne)G[X+ne]=y[E+ne]+I[M+ne]&255}function bo(y,E,I,M,G,X,Q){if(y==null)Zn(null,null,I,M,G,X,Q);else{var ne,re=y[E+0],ue=re,ve=re;for(ne=0;ne<Q;++ne)ue=ve+(re=y[E+ne])-ue,ve=I[M+ne]+(-256&ue?0>ue?0:255:ue)&255,ue=re,G[X+ne]=ve}}function Zd(y,E,I,M){var G=E.width,X=E.o;if(e(y!=null&&E!=null),0>I||0>=M||I+M>X)return null;if(!y.Cc){if(y.ga==null){var Q;if(y.ga=new Rl,(Q=y.ga==null)||(Q=E.width*E.o,e(y.Gb.length==0),y.Gb=s(Q),y.Uc=0,y.Gb==null?Q=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,Q=1),Q=!Q),!Q){Q=y.ga;var ne=y.Fa,re=y.P,ue=y.qc,ve=y.mb,Pe=y.nb,Ne=re+1,Ee=ue-1,Ve=Q.l;if(e(ne!=null&&ve!=null&&E!=null),_a[0]=null,_a[1]=Zn,_a[2]=ma,_a[3]=bo,Q.ca=ve,Q.tb=Pe,Q.c=E.width,Q.i=E.height,e(0<Q.c&&0<Q.i),1>=ue)E=0;else if(Q.$a=ne[re+0]>>0&3,Q.Z=ne[re+0]>>2&3,Q.Lc=ne[re+0]>>4&3,re=ne[re+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||re)E=0;else if(Ve.put=xr,Ve.ac=ai,Ve.bc=Gr,Ve.ma=Q,Ve.width=E.width,Ve.height=E.height,Ve.Da=E.Da,Ve.v=E.v,Ve.va=E.va,Ve.j=E.j,Ve.o=E.o,Q.$a)e:{e(Q.$a==1),E=Rr();t:for(;;){if(E==null){E=0;break e}if(e(Q!=null),Q.mc=E,E.c=Q.c,E.i=Q.i,E.l=Q.l,E.l.ma=Q,E.l.width=Q.c,E.l.height=Q.i,E.a=0,z(E.m,ne,Ne,Ee),!ds(Q.c,Q.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&lr(E.s)?(Q.ic=1,ne=E.c*E.i,E.Ta=null,E.Ua=0,E.V=s(ne),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(Q.ic=0,E=Zr(E,Q.c)),!E))break t;E=1;break e}Q.mc=null,E=0}else E=Ee>=Q.c*Q.i;Q=!E}if(Q)return null;y.ga.Lc!=1?y.Ga=0:M=X-I}e(y.ga!=null),e(I+M<=X);e:{if(E=(ne=y.ga).c,X=ne.l.o,ne.$a==0){if(Ne=y.rc,Ee=y.Vc,Ve=y.Fa,re=y.P+1+I*E,ue=y.mb,ve=y.nb+I*E,e(re<=y.P+y.qc),ne.Z!=0)for(e(_a[ne.Z]!=null),Q=0;Q<M;++Q)_a[ne.Z](Ne,Ee,Ve,re,ue,ve,E),Ne=ue,Ee=ve,ve+=E,re+=E;else for(Q=0;Q<M;++Q)i(ue,ve,Ve,re,E),Ne=ue,Ee=ve,ve+=E,re+=E;y.rc=Ne,y.Vc=Ee}else{if(e(ne.mc!=null),E=I+M,e((Q=ne.mc)!=null),e(E<=Q.i),Q.C>=E)E=1;else if(ne.ic||Ce(),ne.ic){ne=Q.V,Ne=Q.Ba,Ee=Q.c;var Me=Q.i,ge=(Ve=1,re=Q.$/Ee,ue=Q.$%Ee,ve=Q.m,Pe=Q.s,Q.$),xe=Ee*Me,We=Ee*E,Je=Pe.wc,Ge=ge<We?Ei(Pe,ue,re):null;e(ge<=xe),e(E<=Me),e(lr(Pe));t:for(;;){for(;!ve.h&&ge<We;){if(ue&Je||(Ge=Ei(Pe,ue,re)),e(Ge!=null),ce(ve),256>(Me=Ui(Ge.G[0],Ge.H[0],ve)))ne[Ne+ge]=Me,++ge,++ue>=Ee&&(ue=0,++re<=E&&!(re%16)&&cr(Q,re));else{if(!(280>Me)){Ve=0;break t}Me=Bi(Me-256,ve);var gt,ht=Ui(Ge.G[4],Ge.H[4],ve);if(ce(ve),!(ge>=(ht=Qr(Ee,ht=Bi(ht,ve)))&&xe-ge>=Me)){Ve=0;break t}for(gt=0;gt<Me;++gt)ne[Ne+ge+gt]=ne[Ne+ge+gt-ht];for(ge+=Me,ue+=Me;ue>=Ee;)ue-=Ee,++re<=E&&!(re%16)&&cr(Q,re);ge<We&&ue&Je&&(Ge=Ei(Pe,ue,re))}e(ve.h==ee(ve))}cr(Q,re>E?E:re);break t}!Ve||ve.h&&ge<xe?(Ve=0,Q.a=ve.h?5:3):Q.$=ge,E=Ve}else E=Ki(Q,Q.V,Q.Ba,Q.c,Q.i,E,Es);if(!E){M=0;break e}}I+M>=X&&(y.Cc=1),M=1}if(!M)return null;if(y.Cc&&((M=y.ga)!=null&&(M.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+I*G}function L(y,E,I,M,G,X){for(;0<G--;){var Q,ne=y,re=E+(I?1:0),ue=y,ve=E+(I?0:3);for(Q=0;Q<M;++Q){var Pe=ue[ve+4*Q];Pe!=255&&(Pe*=32897,ne[re+4*Q+0]=ne[re+4*Q+0]*Pe>>23,ne[re+4*Q+1]=ne[re+4*Q+1]*Pe>>23,ne[re+4*Q+2]=ne[re+4*Q+2]*Pe>>23)}E+=X}}function Y(y,E,I,M,G){for(;0<M--;){var X;for(X=0;X<I;++X){var Q=y[E+2*X+0],ne=15&(ue=y[E+2*X+1]),re=4369*ne,ue=(240&ue|ue>>4)*re>>16;y[E+2*X+0]=(240&Q|Q>>4)*re>>16&240|(15&Q|Q<<4)*re>>16>>4&15,y[E+2*X+1]=240&ue|ne}E+=G}}function de(y,E,I,M,G,X,Q,ne){var re,ue,ve=255;for(ue=0;ue<G;++ue){for(re=0;re<M;++re){var Pe=y[E+re];X[Q+4*re]=Pe,ve&=Pe}E+=I,Q+=ne}return ve!=255}function pe(y,E,I,M,G){var X;for(X=0;X<G;++X)I[M+X]=y[E+X]>>8}function Ce(){sa=L,ui=Y,Li=de,ur=pe}function je(y,E,I){R[y]=function(M,G,X,Q,ne,re,ue,ve,Pe,Ne,Ee,Ve,Me,ge,xe,We,Je){var Ge,gt=Je-1>>1,ht=ne[re+0]|ue[ve+0]<<16,Mt=Pe[Ne+0]|Ee[Ve+0]<<16;e(M!=null);var ct=3*ht+Mt+131074>>2;for(E(M[G+0],255&ct,ct>>16,Me,ge),X!=null&&(ct=3*Mt+ht+131074>>2,E(X[Q+0],255&ct,ct>>16,xe,We)),Ge=1;Ge<=gt;++Ge){var Yn=ne[re+Ge]|ue[ve+Ge]<<16,ti=Pe[Ne+Ge]|Ee[Ve+Ge]<<16,Mn=ht+Yn+Mt+ti+524296,yn=Mn+2*(Yn+Mt)>>3;ct=yn+ht>>1,ht=(Mn=Mn+2*(ht+ti)>>3)+Yn>>1,E(M[G+2*Ge-1],255&ct,ct>>16,Me,ge+(2*Ge-1)*I),E(M[G+2*Ge-0],255&ht,ht>>16,Me,ge+(2*Ge-0)*I),X!=null&&(ct=Mn+Mt>>1,ht=yn+ti>>1,E(X[Q+2*Ge-1],255&ct,ct>>16,xe,We+(2*Ge-1)*I),E(X[Q+2*Ge+0],255&ht,ht>>16,xe,We+(2*Ge+0)*I)),ht=Yn,Mt=ti}1&Je||(ct=3*ht+Mt+131074>>2,E(M[G+Je-1],255&ct,ct>>16,Me,ge+(Je-1)*I),X!=null&&(ct=3*Mt+ht+131074>>2,E(X[Q+Je-1],255&ct,ct>>16,xe,We+(Je-1)*I)))}}function tt(){aa[sf]=ie,aa[Ol]=cf,aa[Ml]=Vu,aa[Ec]=oa,aa[Rh]=kn,aa[xg]=J0,aa[q0]=Tb,aa[Uu]=cf,aa[$u]=oa,aa[Hu]=kn,aa[bg]=J0}function bt(y){return y&-16384?0>y?0:255:y>>Ab}function Ut(y,E){return bt((19077*y>>8)+(26149*E>>8)-14234)}function sn(y,E,I){return bt((19077*y>>8)-(6419*E>>8)-(13320*I>>8)+8708)}function nn(y,E){return bt((19077*y>>8)+(33050*E>>8)-17685)}function Rn(y,E,I,M,G){M[G+0]=Ut(y,I),M[G+1]=sn(y,E,I),M[G+2]=nn(y,E)}function Di(y,E,I,M,G){M[G+0]=nn(y,E),M[G+1]=sn(y,E,I),M[G+2]=Ut(y,I)}function Ji(y,E,I,M,G){var X=sn(y,E,I);E=X<<3&224|nn(y,E)>>3,M[G+0]=248&Ut(y,I)|X>>5,M[G+1]=E}function Zi(y,E,I,M,G){var X=240&nn(y,E)|15;M[G+0]=240&Ut(y,I)|sn(y,E,I)>>4,M[G+1]=X}function Yr(y,E,I,M,G){M[G+0]=255,Rn(y,E,I,M,G+1)}function qr(y,E,I,M,G){Di(y,E,I,M,G),M[G+3]=255}function ya(y,E,I,M,G){Rn(y,E,I,M,G),M[G+3]=255}function ki(y,E){return 0>y?0:y>E?E:y}function va(y,E,I){R[y]=function(M,G,X,Q,ne,re,ue,ve,Pe){for(var Ne=ve+(-2&Pe)*I;ve!=Ne;)E(M[G+0],X[Q+0],ne[re+0],ue,ve),E(M[G+1],X[Q+0],ne[re+0],ue,ve+I),G+=2,++Q,++re,ve+=2*I;1&Pe&&E(M[G+0],X[Q+0],ne[re+0],ue,ve)}}function Pl(y,E,I){return I==0?y==0?E==0?6:5:E==0?4:0:I}function Pu(y,E,I,M,G){switch(y>>>30){case 3:Be(E,I,M,G,0);break;case 2:Re(E,I,M,G);break;case 1:Ot(E,I,M,G)}}function Nu(y,E){var I,M,G=E.M,X=E.Nb,Q=y.oc,ne=y.pc+40,re=y.oc,ue=y.pc+584,ve=y.oc,Pe=y.pc+600;for(I=0;16>I;++I)Q[ne+32*I-1]=129;for(I=0;8>I;++I)re[ue+32*I-1]=129,ve[Pe+32*I-1]=129;for(0<G?Q[ne-1-32]=re[ue-1-32]=ve[Pe-1-32]=129:(r(Q,ne-32-1,127,21),r(re,ue-32-1,127,9),r(ve,Pe-32-1,127,9)),M=0;M<y.za;++M){var Ne=E.ya[E.aa+M];if(0<M){for(I=-1;16>I;++I)i(Q,ne+32*I-4,Q,ne+32*I+12,4);for(I=-1;8>I;++I)i(re,ue+32*I-4,re,ue+32*I+4,4),i(ve,Pe+32*I-4,ve,Pe+32*I+4,4)}var Ee=y.Gd,Ve=y.Hd+M,Me=Ne.ad,ge=Ne.Hc;if(0<G&&(i(Q,ne-32,Ee[Ve].y,0,16),i(re,ue-32,Ee[Ve].f,0,8),i(ve,Pe-32,Ee[Ve].ea,0,8)),Ne.Za){var xe=Q,We=ne-32+16;for(0<G&&(M>=y.za-1?r(xe,We,Ee[Ve].y[15],4):i(xe,We,Ee[Ve+1].y,0,4)),I=0;4>I;I++)xe[We+128+I]=xe[We+256+I]=xe[We+384+I]=xe[We+0+I];for(I=0;16>I;++I,ge<<=2)xe=Q,We=ne+ey[I],Xa[Ne.Ob[I]](xe,We),Pu(ge,Me,16*+I,xe,We)}else if(xe=Pl(M,G,Ne.Ob[0]),Fl[xe](Q,ne),ge!=0)for(I=0;16>I;++I,ge<<=2)Pu(ge,Me,16*+I,Q,ne+ey[I]);for(I=Ne.Gc,xe=Pl(M,G,Ne.Dd),Ko[xe](re,ue),Ko[xe](ve,Pe),ge=Me,xe=re,We=ue,255&(Ne=I>>0)&&(170&Ne?St(ge,256,xe,We):un(ge,256,xe,We)),Ne=ve,ge=Pe,255&(I>>=8)&&(170&I?St(Me,320,Ne,ge):un(Me,320,Ne,ge)),G<y.Ub-1&&(i(Ee[Ve].y,0,Q,ne+480,16),i(Ee[Ve].f,0,re,ue+224,8),i(Ee[Ve].ea,0,ve,Pe+224,8)),I=8*X*y.B,Ee=y.sa,Ve=y.ta+16*M+16*X*y.R,Me=y.qa,Ne=y.ra+8*M+I,ge=y.Ha,xe=y.Ia+8*M+I,I=0;16>I;++I)i(Ee,Ve+I*y.R,Q,ne+32*I,16);for(I=0;8>I;++I)i(Me,Ne+I*y.B,re,ue+32*I,8),i(ge,xe+I*y.B,ve,Pe+32*I,8)}}function Du(y,E,I,M,G,X,Q,ne,re){var ue=[0],ve=[0],Pe=0,Ne=re!=null?re.kd:0,Ee=re??new Jd;if(y==null||12>I)return 7;Ee.data=y,Ee.w=E,Ee.ha=I,E=[E],I=[I],Ee.gb=[Ee.gb];e:{var Ve=E,Me=I,ge=Ee.gb;if(e(y!=null),e(Me!=null),e(ge!=null),ge[0]=0,12<=Me[0]&&!t(y,Ve[0],"RIFF")){if(t(y,Ve[0]+8,"WEBP")){ge=3;break e}var xe=rt(y,Ve[0]+4);if(12>xe||4294967286<xe){ge=3;break e}if(Ne&&xe>Me[0]-8){ge=7;break e}ge[0]=xe,Ve[0]+=12,Me[0]-=12}ge=0}if(ge!=0)return ge;for(xe=0<Ee.gb[0],I=I[0];;){e:{var We=y;Me=E,ge=I;var Je=ue,Ge=ve,gt=Ve=[0];if((ct=Pe=[Pe])[0]=0,8>ge[0])ge=7;else{if(!t(We,Me[0],"VP8X")){if(rt(We,Me[0]+4)!=10){ge=3;break e}if(18>ge[0]){ge=7;break e}var ht=rt(We,Me[0]+8),Mt=1+He(We,Me[0]+12);if(2147483648<=Mt*(We=1+He(We,Me[0]+15))){ge=3;break e}gt!=null&&(gt[0]=ht),Je!=null&&(Je[0]=Mt),Ge!=null&&(Ge[0]=We),Me[0]+=18,ge[0]-=18,ct[0]=1}ge=0}}if(Pe=Pe[0],Ve=Ve[0],ge!=0)return ge;if(Me=!!(2&Ve),!xe&&Pe)return 3;if(X!=null&&(X[0]=!!(16&Ve)),Q!=null&&(Q[0]=Me),ne!=null&&(ne[0]=0),Q=ue[0],Ve=ve[0],Pe&&Me&&re==null){ge=0;break}if(4>I){ge=7;break}if(xe&&Pe||!xe&&!Pe&&!t(y,E[0],"ALPH")){I=[I],Ee.na=[Ee.na],Ee.P=[Ee.P],Ee.Sa=[Ee.Sa];e:{ht=y,ge=E,xe=I;var ct=Ee.gb;Je=Ee.na,Ge=Ee.P,gt=Ee.Sa,Mt=22,e(ht!=null),e(xe!=null),We=ge[0];var Yn=xe[0];for(e(Je!=null),e(gt!=null),Je[0]=null,Ge[0]=null,gt[0]=0;;){if(ge[0]=We,xe[0]=Yn,8>Yn){ge=7;break e}var ti=rt(ht,We+4);if(4294967286<ti){ge=3;break e}var Mn=8+ti+1&-2;if(Mt+=Mn,0<ct&&Mt>ct){ge=3;break e}if(!t(ht,We,"VP8 ")||!t(ht,We,"VP8L")){ge=0;break e}if(Yn[0]<Mn){ge=7;break e}t(ht,We,"ALPH")||(Je[0]=ht,Ge[0]=We+8,gt[0]=ti),We+=Mn,Yn-=Mn}}if(I=I[0],Ee.na=Ee.na[0],Ee.P=Ee.P[0],Ee.Sa=Ee.Sa[0],ge!=0)break}I=[I],Ee.Ja=[Ee.Ja],Ee.xa=[Ee.xa];e:if(ct=y,ge=E,xe=I,Je=Ee.gb[0],Ge=Ee.Ja,gt=Ee.xa,ht=ge[0],We=!t(ct,ht,"VP8 "),Mt=!t(ct,ht,"VP8L"),e(ct!=null),e(xe!=null),e(Ge!=null),e(gt!=null),8>xe[0])ge=7;else{if(We||Mt){if(ct=rt(ct,ht+4),12<=Je&&ct>Je-12){ge=3;break e}if(Ne&&ct>xe[0]-8){ge=7;break e}Ge[0]=ct,ge[0]+=8,xe[0]-=8,gt[0]=Mt}else gt[0]=5<=xe[0]&&ct[ht+0]==47&&!(ct[ht+4]>>5),Ge[0]=xe[0];ge=0}if(I=I[0],Ee.Ja=Ee.Ja[0],Ee.xa=Ee.xa[0],E=E[0],ge!=0)break;if(4294967286<Ee.Ja)return 3;if(ne==null||Me||(ne[0]=Ee.xa?2:1),Q=[Q],Ve=[Ve],Ee.xa){if(5>I){ge=7;break}ne=Q,Ne=Ve,Me=X,y==null||5>I?y=0:5<=I&&y[E+0]==47&&!(y[E+4]>>5)?(xe=[0],ct=[0],Je=[0],z(Ge=new F,y,E,I),Dt(Ge,xe,ct,Je)?(ne!=null&&(ne[0]=xe[0]),Ne!=null&&(Ne[0]=ct[0]),Me!=null&&(Me[0]=Je[0]),y=1):y=0):y=0}else{if(10>I){ge=7;break}ne=Ve,y==null||10>I||!Ue(y,E+3,I-3)?y=0:(Ne=y[E+0]|y[E+1]<<8|y[E+2]<<16,Me=16383&(y[E+7]<<8|y[E+6]),y=16383&(y[E+9]<<8|y[E+8]),1&Ne||3<(Ne>>1&7)||!(Ne>>4&1)||Ne>>5>=Ee.Ja||!Me||!y?y=0:(Q&&(Q[0]=Me),ne&&(ne[0]=y),y=1))}if(!y||(Q=Q[0],Ve=Ve[0],Pe&&(ue[0]!=Q||ve[0]!=Ve)))return 3;re!=null&&(re[0]=Ee,re.offset=E-re.w,e(4294967286>E-re.w),e(re.offset==re.ha-I));break}return ge==0||ge==7&&Pe&&re==null?(X!=null&&(X[0]|=Ee.na!=null&&0<Ee.na.length),M!=null&&(M[0]=Q),G!=null&&(G[0]=Ve),0):ge}function ef(y,E,I){var M=E.width,G=E.height,X=0,Q=0,ne=M,re=G;if(E.Da=y!=null&&0<y.Da,E.Da&&(ne=y.cd,re=y.bd,X=y.v,Q=y.j,11>I||(X&=-2,Q&=-2),0>X||0>Q||0>=ne||0>=re||X+ne>M||Q+re>G))return 0;if(E.v=X,E.j=Q,E.va=X+ne,E.o=Q+re,E.U=ne,E.T=re,E.da=y!=null&&0<y.da,E.da){if(!ut(ne,re,I=[y.ib],X=[y.hb]))return 0;E.ib=I[0],E.hb=X[0]}return E.ob=y!=null&&y.ob,E.Kb=y==null||!y.Sd,E.da&&(E.ob=E.ib<3*M/4&&E.hb<3*G/4,E.Kb=0),1}function tf(y){if(y==null)return 2;if(11>y.S){var E=y.f.RGBA;E.fb+=(y.height-1)*E.A,E.A=-E.A}else E=y.f.kb,y=y.height,E.O+=(y-1)*E.fa,E.fa=-E.fa,E.N+=(y-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(y-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(y-1)*E.lb,E.lb=-E.lb);return 0}function Ou(y,E,I,M){if(M==null||0>=y||0>=E)return 2;if(I!=null){if(I.Da){var G=I.cd,X=I.bd,Q=-2&I.v,ne=-2&I.j;if(0>Q||0>ne||0>=G||0>=X||Q+G>y||ne+X>E)return 2;y=G,E=X}if(I.da){if(!ut(y,E,G=[I.ib],X=[I.hb]))return 2;y=G[0],E=X[0]}}M.width=y,M.height=E;e:{var re=M.width,ue=M.height;if(y=M.S,0>=re||0>=ue||!(y>=sf&&13>y))y=2;else{if(0>=M.Rd&&M.sd==null){Q=X=G=E=0;var ve=(ne=re*ty[y])*ue;if(11>y||(X=(ue+1)/2*(E=(re+1)/2),y==12&&(Q=(G=re)*ue)),(ue=s(ve+2*X+Q))==null){y=1;break e}M.sd=ue,11>y?((re=M.f.RGBA).eb=ue,re.fb=0,re.A=ne,re.size=ve):((re=M.f.kb).y=ue,re.O=0,re.fa=ne,re.Fd=ve,re.f=ue,re.N=0+ve,re.Ab=E,re.Cd=X,re.ea=ue,re.W=0+ve+X,re.Db=E,re.Ed=X,y==12&&(re.F=ue,re.J=0+ve+2*X),re.Tc=Q,re.lb=G)}if(E=1,G=M.S,X=M.width,Q=M.height,G>=sf&&13>G)if(11>G)y=M.f.RGBA,E&=(ne=Math.abs(y.A))*(Q-1)+X<=y.size,E&=ne>=X*ty[G],E&=y.eb!=null;else{y=M.f.kb,ne=(X+1)/2,ve=(Q+1)/2,re=Math.abs(y.fa),ue=Math.abs(y.Ab);var Pe=Math.abs(y.Db),Ne=Math.abs(y.lb),Ee=Ne*(Q-1)+X;E&=re*(Q-1)+X<=y.Fd,E&=ue*(ve-1)+ne<=y.Cd,E=(E&=Pe*(ve-1)+ne<=y.Ed)&re>=X&ue>=ne&Pe>=ne,E&=y.y!=null,E&=y.f!=null,E&=y.ea!=null,G==12&&(E&=Ne>=X,E&=Ee<=y.Tc,E&=y.F!=null)}else E=0;y=E?0:2}}return y!=0||I!=null&&I.fd&&(y=tf(M)),y}var is=64,Va=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Mu=24,Fu=32,xc=8,Cs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(y){return y},R.Predictor2=function(y,E,I){return E[I+0]},R.Predictor3=function(y,E,I){return E[I+1]},R.Predictor4=function(y,E,I){return E[I-1]},R.Predictor5=function(y,E,I){return it(it(y,E[I+1]),E[I+0])},R.Predictor6=function(y,E,I){return it(y,E[I-1])},R.Predictor7=function(y,E,I){return it(y,E[I+0])},R.Predictor8=function(y,E,I){return it(E[I-1],E[I+0])},R.Predictor9=function(y,E,I){return it(E[I+0],E[I+1])},R.Predictor10=function(y,E,I){return it(it(y,E[I-1]),it(E[I+0],E[I+1]))},R.Predictor11=function(y,E,I){var M=E[I+0];return 0>=Rt(M>>24&255,y>>24&255,(E=E[I-1])>>24&255)+Rt(M>>16&255,y>>16&255,E>>16&255)+Rt(M>>8&255,y>>8&255,E>>8&255)+Rt(255&M,255&y,255&E)?M:y},R.Predictor12=function(y,E,I){var M=E[I+0];return(et((y>>24&255)+(M>>24&255)-((E=E[I-1])>>24&255))<<24|et((y>>16&255)+(M>>16&255)-(E>>16&255))<<16|et((y>>8&255)+(M>>8&255)-(E>>8&255))<<8|et((255&y)+(255&M)-(255&E)))>>>0},R.Predictor13=function(y,E,I){var M=E[I-1];return(mt((y=it(y,E[I+0]))>>24&255,M>>24&255)<<24|mt(y>>16&255,M>>16&255)<<16|mt(y>>8&255,M>>8&255)<<8|mt(y>>0&255,M>>0&255))>>>0};var So=R.PredictorAdd0;R.PredictorAdd1=at,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var Nl=R.PredictorAdd2;qt("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var kh,xa=R.ColorIndexInverseTransform,ju=R.MapARGB,zo=R.VP8LColorIndexInverseTransformAlpha,Os=R.MapAlpha,Go=R.VP8LPredictorsAdd=[];Go.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var bc,Ms,Is,Dl,Vo,Fs,we,Be,Re,St,Ot,un,Oi,ei,Sc,wc,Kr,Ya,_c,qa,wo,Ka,$n,ba,sa,ui,Li,ur,Nr=s(511),Sa=s(2041),wa=s(225),Yo=s(767),nf=0,Bu=Sa,rf=wa,js=Yo,ks=Nr,sf=0,Ol=1,Ml=2,Ec=3,Rh=4,xg=5,q0=6,Uu=7,$u=8,Hu=9,bg=10,K0=[2,3,7],bb=[3,3,11],X0=[280,256,256,256,40],Dr=[0,1,1,1,0],ps=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Sb=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],wb=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Q0=8,Sg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],af=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],qo=null,wg=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Wu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],of=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ph=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Gu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],_b=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Fl=[],Xa=[],Ko=[],Eb=1,lf=2,_a=[],aa=[];je("UpsampleRgbLinePair",Rn,3),je("UpsampleBgrLinePair",Di,3),je("UpsampleRgbaLinePair",ya,4),je("UpsampleBgraLinePair",qr,4),je("UpsampleArgbLinePair",Yr,4),je("UpsampleRgba4444LinePair",Zi,2),je("UpsampleRgb565LinePair",Ji,2);var ie=R.UpsampleRgbLinePair,Vu=R.UpsampleBgrLinePair,cf=R.UpsampleRgbaLinePair,oa=R.UpsampleBgraLinePair,kn=R.UpsampleArgbLinePair,J0=R.UpsampleRgba4444LinePair,Tb=R.UpsampleRgb565LinePair,Nh=16,_o=1<<Nh-1,uf=-227,_g=482,Ab=6,Z0=0,Lb=s(256),Xo=s(256),Cb=s(256),Ib=s(256),kb=s(_g-uf),Rb=s(_g-uf);va("YuvToRgbRow",Rn,3),va("YuvToBgrRow",Di,3),va("YuvToRgbaRow",ya,4),va("YuvToBgraRow",qr,4),va("YuvToArgbRow",Yr,4),va("YuvToRgba4444Row",Zi,2),va("YuvToRgb565Row",Ji,2);var ey=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ea=[0,2,8],Pb=[8,7,6,4,4,2,2,2,1,1,1,1],Nb=1;this.WebPDecodeRGBA=function(y,E,I,M,G){var X=Ol,Q=new ns,ne=new zr;Q.ba=ne,ne.S=X,ne.width=[ne.width],ne.height=[ne.height];var re=ne.width,ue=ne.height,ve=new ws;if(ve==null||y==null)var Pe=2;else e(ve!=null),Pe=Du(y,E,I,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Pe!=0?re=0:(re!=null&&(re[0]=ve.width[0]),ue!=null&&(ue[0]=ve.height[0]),re=1),re){ne.width=ne.width[0],ne.height=ne.height[0],M!=null&&(M[0]=ne.width),G!=null&&(G[0]=ne.height);e:{if(M=new Ai,(G=new Jd).data=y,G.w=E,G.ha=I,G.kd=1,E=[0],e(G!=null),((y=Du(G.data,G.w,G.ha,null,null,null,E,null,G))==0||y==7)&&E[0]&&(y=4),(E=y)==0){if(e(Q!=null),M.data=G.data,M.w=G.w+G.offset,M.ha=G.ha-G.offset,M.put=xr,M.ac=ai,M.bc=Gr,M.ma=Q,G.xa){if((y=Rr())==null){Q=1;break e}if(function(Ne,Ee){var Ve=[0],Me=[0],ge=[0];t:for(;;){if(Ne==null)return 0;if(Ee==null)return Ne.a=2,0;if(Ne.l=Ee,Ne.a=0,z(Ne.m,Ee.data,Ee.w,Ee.ha),!Dt(Ne.m,Ve,Me,ge)){Ne.a=3;break t}if(Ne.xb=lf,Ee.width=Ve[0],Ee.height=Me[0],!ds(Ve[0],Me[0],1,Ne,null))break t;return 1}return e(Ne.a!=0),0}(y,M)){if(M=(E=Ou(M.width,M.height,Q.Oa,Q.ba))==0){t:{M=y;n:for(;;){if(M==null){M=0;break t}if(e(M.s.yc!=null),e(M.s.Ya!=null),e(0<M.s.Wb),e((I=M.l)!=null),e((G=I.ma)!=null),M.xb!=0){if(M.ca=G.ba,M.tb=G.tb,e(M.ca!=null),!ef(G.Oa,I,Ec)){M.a=2;break n}if(!Zr(M,I.width)||I.da)break n;if((I.da||rn(M.ca.S))&&Ce(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&Ce()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!ft(M.s.vb,M.s.Wa.Xa)){M.a=1;break n}M.xb=0}if(!Ki(M,M.V,M.Ba,M.c,M.i,I.o,Pi))break n;G.Dc=M.Ma,M=1;break t}e(M.a!=0),M=0}M=!M}M&&(E=y.a)}else E=y.a}else{if((y=new yt)==null){Q=1;break e}if(y.Fa=G.na,y.P=G.P,y.qc=G.Sa,vt(y,M)){if((E=Ou(M.width,M.height,Q.Oa,Q.ba))==0){if(y.Aa=0,I=Q.Oa,e((G=y)!=null),I!=null){if(0<(re=0>(re=I.Md)?0:100<re?255:255*re/100)){for(ue=ve=0;4>ue;++ue)12>(Pe=G.pb[ue]).lc&&(Pe.ia=re*Pb[0>Pe.lc?0:Pe.lc]>>3),ve|=Pe.ia;ve&&(alert("todo:VP8InitRandom"),G.ia=1)}G.Ga=I.Id,100<G.Ga?G.Ga=100:0>G.Ga&&(G.Ga=0)}bn(y,M)||(E=y.a)}}else E=y.a}E==0&&Q.Oa!=null&&Q.Oa.fd&&(E=tf(Q.ba))}Q=E}X=Q!=0?null:11>X?ne.f.RGBA.eb:ne.f.kb.y}else X=null;return X};var ty=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(R,U){for(var j="",D=0;D<4;D++)j+=String.fromCharCode(R[U++]);return j}function u(R,U){return(R[U+0]<<0|R[U+1]<<8|R[U+2]<<16)>>>0}function d(R,U){return(R[U+0]<<0|R[U+1]<<8|R[U+2]<<16|R[U+3]<<24)>>>0}new l;var h=[0],p=[0],m=[],v=new l,b=n,x=function(R,U){var j={},D=0,O=!1,Z=0,J=0;if(j.frames=[],!function(K,ee,ae,ce){for(var ye=0;ye<ce;ye++)if(K[ee+ye]!=ae.charCodeAt(ye))return!0;return!1}(R,U,"RIFF",4)){var le,H;for(d(R,U+=4),U+=8;U<R.length;){var V=c(R,U),z=d(R,U+=4);U+=4;var W=z+(1&z);switch(V){case"VP8 ":case"VP8L":j.frames[D]===void 0&&(j.frames[D]={}),(F=j.frames[D]).src_off=O?J:U-8,F.src_size=Z+z+8,D++,O&&(O=!1,Z=0,J=0);break;case"VP8X":(F=j.header={}).feature_flags=R[U];var te=U+4;F.canvas_width=1+u(R,te),te+=3,F.canvas_height=1+u(R,te),te+=3;break;case"ALPH":O=!0,Z=W+8,J=U-8;break;case"ANIM":(F=j.header).bgcolor=d(R,U),te=U+4,F.loop_count=(le=R)[(H=te)+0]<<0|le[H+1]<<8,te+=2;break;case"ANMF":var fe,F;(F=j.frames[D]={}).offset_x=2*u(R,U),U+=3,F.offset_y=2*u(R,U),U+=3,F.width=1+u(R,U),U+=3,F.height=1+u(R,U),U+=3,F.duration=u(R,U),U+=3,fe=R[U++],F.dispose=1&fe,F.blend=fe>>1&1}V!="ANMF"&&(U+=W)}return j}}(b,0);x.response=b,x.rgbaoutput=!0,x.dataurl=!1;var w=x.header?x.header:null,S=x.frames?x.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],p=[w.canvas_width];for(var A=0;A<S.length&&S[A].blend!=0;A++);}var C=S[0],N=v.WebPDecodeRGBA(b,C.src_off,C.src_size,p,h);C.rgba=N,C.imgwidth=p[0],C.imgheight=h[0];for(var k=0;k<p[0]*h[0]*4;k++)m[k]=N[k];return this.width=p,this.height=h,this.data=m,this}(function(n){var e=function(){return typeof __=="function"},t=function(h,p,m,v){var b=4,x=a;switch(v){case n.image_compression.FAST:b=1,x=s;break;case n.image_compression.MEDIUM:b=6,x=o;break;case n.image_compression.SLOW:b=9,x=l}h=i(h,p,m,x);var w=__(h,{level:b});return n.__addimage__.arrayBufferToBinaryString(w)},i=function(h,p,m,v){for(var b,x,w,S=h.length/p,A=new Uint8Array(h.length+S),C=u(),N=0;N<S;N+=1){if(w=N*p,b=h.subarray(w,w+p),v)A.set(v(b,m,x),w+N);else{for(var k,R=C.length,U=[];k<R;k+=1)U[k]=C[k](b,m,x);var j=d(U.concat());A.set(U[j],w+N)}x=b}return A},r=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var m,v=[],b=h.length;v[0]=1;for(var x=0;x<b;x+=1)m=h[x-p]||0,v[x+1]=h[x]-m+256&255;return v},a=function(h,p,m){var v,b=[],x=h.length;b[0]=2;for(var w=0;w<x;w+=1)v=m&&m[w]||0,b[w+1]=h[w]-v+256&255;return b},o=function(h,p,m){var v,b,x=[],w=h.length;x[0]=3;for(var S=0;S<w;S+=1)v=h[S-p]||0,b=m&&m[S]||0,x[S+1]=h[S]+256-(v+b>>>1)&255;return x},l=function(h,p,m){var v,b,x,w,S=[],A=h.length;S[0]=4;for(var C=0;C<A;C+=1)v=h[C-p]||0,b=m&&m[C]||0,x=m&&m[C-p]||0,w=c(v,b,x),S[C+1]=h[C]-w+256&255;return S},c=function(h,p,m){if(h===p&&p===m)return h;var v=Math.abs(p-m),b=Math.abs(h-m),x=Math.abs(h+p-m-m);return v<=b&&v<=x?h:b<=x?p:m},u=function(){return[r,s,a,o,l]},d=function(h){var p=h.map(function(m){return m.reduce(function(v,b){return v+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};n.processPNG=function(h,p,m,v){var b,x,w,S,A,C,N,k,R,U,j,D,O,Z,J,le=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new ZQ(h)).imgData,x=w.bits,b=w.colorSpace,A=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){R=(k=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,j=new Uint8Array(R*w.colors),U=new Uint8Array(R);var V,z=w.pixelBitlength-w.bits;for(Z=0,J=0;Z<R;Z++){for(O=k[Z],V=0;V<z;)j[J++]=O>>>V&255,V+=w.bits;U[Z]=O>>>V&255}}if(w.bits===16){R=(k=new Uint32Array(w.decodePixels().buffer)).length,j=new Uint8Array(R*(32/w.pixelBitlength)*w.colors),U=new Uint8Array(R*(32/w.pixelBitlength)),D=w.colors>1,Z=0,J=0;for(var W=0;Z<R;)O=k[Z++],j[J++]=O>>>0&255,D&&(j[J++]=O>>>16&255,O=k[Z++],j[J++]=O>>>0&255),U[W++]=O>>>16&255;x=8}v!==n.image_compression.NONE&&e()?(h=t(j,w.width*w.colors,w.colors,v),N=t(U,w.width,1,v)):(h=j,N=U,le=void 0)}if(w.colorType===3&&(b=this.color_spaces.INDEXED,C=w.palette,w.transparency.indexed)){var te=w.transparency.indexed,fe=0;for(Z=0,R=te.length;Z<R;++Z)fe+=te[Z];if((fe/=255)===R-1&&te.indexOf(0)!==-1)S=[te.indexOf(0)];else if(fe!==R){for(k=w.decodePixels(),U=new Uint8Array(k.length),Z=0,R=k.length;Z<R;Z++)U[Z]=te[k[Z]];N=t(U,w.width,1)}}var F=function(K){var ee;switch(K){case n.image_compression.FAST:ee=11;break;case n.image_compression.MEDIUM:ee=13;break;case n.image_compression.SLOW:ee=14;break;default:ee=12}return ee}(v);return le===this.decode.FLATE_DECODE&&(H="/Predictor "+F+" "),H+="/Colors "+A+" /BitsPerComponent "+x+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(N&&this.__addimage__.isArrayBuffer(N)||this.__addimage__.isArrayBufferView(N))&&(N=this.__addimage__.arrayBufferToBinaryString(N)),{alias:m,data:h,index:p,filter:le,decodeParameters:H,transparency:S,palette:C,sMask:N,predictor:F,width:w.width,height:w.height,bitsPerComponent:x,colorSpace:b}}}})(Vt.API),function(n){n.processGIF89A=function(e,t,i,r){var s=new eJ(e),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},u=new pS(100).encode(c,100);return n.processJPEG.call(this,u,t,i,r)},n.processGIF87A=n.processGIF89A}(Vt.API),ll.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ll.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Ri.log("bit decode error:"+t)}},ll.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<e;r++)for(var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*r*4,o=0;o<8&&8*r+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},ll.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<n;r++){var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*r*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},ll.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*i;if(r<this.palette.length){var a=this.palette[r];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},ll.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=i*this.width*4+4*r;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=n}},ll.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&t)/t*255|0,c=(a>>11)/e*255|0,u=r*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=n}},ll.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},ll.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=i,this.data[o+3]=a}},ll.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,i,r){var s=new ll(e,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new pS(100).encode(l,100);return n.processJPEG.call(this,c,t,i,r)}}(Vt.API),pk.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,i,r){var s=new pk(e),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new pS(100).encode(l,100);return n.processJPEG.call(this,c,t,i,r)}}(Vt.API),Vt.API.processRGBA=function(n,e,t){for(var i=n.data,r=i.length,s=new Uint8Array(r/4*3),a=new Uint8Array(r/4),o=0,l=0,c=0;c<r;c+=4){var u=i[c],d=i[c+1],h=i[c+2],p=i[c+3];s[o++]=u,s[o++]=d,s[o++]=h,a[l++]=p}var m=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:m,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Vt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},np=Vt.API,vv=np.getCharWidthsArray=function(n,e){var t,i,r=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:r.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:r.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,p=n.length,m=0,v=o[0]||l,b=[];for(t=0;t<p;t++)i=n.charCodeAt(t),typeof r.metadata.widthOfString=="function"?b.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+a*(1e3/s)||0)/1e3):(h=d&&bi(c[i])==="object"&&!isNaN(parseInt(c[i][m],10))?c[i][m]/u:0,b.push((o[i]||v)/l+h)),m=i;return b},uk=np.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return np.processArabic&&(n=np.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,t,r)/t:vv.apply(this,arguments).reduce(function(s,a){return s+a},0)},dk=function(n,e,t,i){for(var r=[],s=0,a=n.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;r.push(n.slice(0,s));var l=s;for(o=0;s!==a;)o+e[s]>i&&(r.push(n.slice(l,s)),o=0,l=s),o+=e[s],s++;return l!==s&&r.push(n.slice(l,s)),r},fk=function(n,e,t){t||(t={});var i,r,s,a,o,l,c,u=[],d=[u],h=t.textIndent||0,p=0,m=0,v=n.split(" "),b=vv.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?v[0].length+2:t.lineIndent||0){var x=Array(l).join(" "),w=[];v.map(function(A){(A=A.split(/\s*\n/)).length>1?w=w.concat(A.map(function(C,N){return(N&&C.length?`
`:"")+C})):w.push(A[0])}),v=w,l=uk.apply(this,[x,t])}for(s=0,a=v.length;s<a;s++){var S=0;if(i=v[s],l&&i[0]==`
`&&(i=i.substr(1),S=1),h+p+(m=(r=vv.apply(this,[i,t])).reduce(function(A,C){return A+C},0))>e||S){if(m>e){for(o=dk.apply(this,[i,r,e-(h+p),e]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);m=r.slice(i.length-(u[0]?u[0].length:0)).reduce(function(A,C){return A+C},0)}else u=[i];d.push(u),h=m+l,p=b}else u.push(i),h+=p+m,p=b}return c=l?function(A,C){return(C?x:"")+A.join(" ")}:function(A){return A.join(" ")},d.map(c)},np.splitTextToSize=function(n,e,t){var i,r=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/r;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=t.lineIndent;var o,l,c=[];for(o=0,l=i.length;o<l;o++)c=c.concat(fk.apply(this,[i[o],a,s]));return c},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},i={},r=0;r<e.length;r++)t[e[r]]="0123456789abcdef"[r],i["0123456789abcdef"[r]]=e[r];var s=function(d){return"0x"+parseInt(d,10).toString(16)},a=n.__fontmetrics__.compress=function(d){var h,p,m,v,b=["{"];for(var x in d){if(h=d[x],isNaN(parseInt(x,10))?p="'"+x+"'":(x=parseInt(x,10),p=(p=s(x).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof h=="number")h<0?(m=s(h).slice(3),v="-"):(m=s(h).slice(2),v=""),m=v+m.slice(0,-1)+i[m.slice(-1)];else{if(bi(h)!=="object")throw new Error("Don't know what to do with value type "+bi(h)+".");m=a(h)}b.push(p+m)}return b.push("}"),b.join("")},o=n.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,m,v,b={},x=1,w=b,S=[],A="",C="",N=d.length-1,k=1;k<N;k+=1)(v=d[k])=="'"?h?(m=h.join(""),h=void 0):h=[]:h?h.push(v):v=="{"?(S.push([w,m]),w={},m=void 0):v=="}"?((p=S.pop())[0][p[1]]=w,m=void 0,w=p[0]):v=="-"?x=-1:m===void 0?t.hasOwnProperty(v)?(A+=t[v],m=parseInt(A,16)*x,x=1,A=""):A+=v:t.hasOwnProperty(v)?(C+=t[v],w[m]=parseInt(C,16)*x,x=1,m=void 0,C=""):C+=v;return b},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(d){var h=d.font,p=u.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var m=c.Unicode[h.postScriptName];m&&(h.metadata.Unicode.encoding=m,h.encoding=m.codePages[0])}])}(Vt.API),function(n){var e=function(t){for(var i=t.length,r=new Uint8Array(i),s=0;s<i;s++)r[s]=t.charCodeAt(s);return r};n.API.events.push(["addFont",function(t){var i=void 0,r=t.font,s=t.instance;if(!r.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=s.existsFileInVFS(r.postScriptName)===!1?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Im(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(r,i)}}])}(Vt),function(n){function e(){return(Zt.canvg?Promise.resolve(Zt.canvg):v_(()=>import("./index.es--prdsQ9W.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Vt.API.addSvgAsImage=function(t,i,r,s,a,o,l,c){if(isNaN(i)||isNaN(r))throw Ri.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Ri.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=a;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(m){return m.fromString(d,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(h)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),i,r,s,a,l,c)})}}(),Vt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,t);return this},Vt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var i,r,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,u=0,d=0;function h(m,v){var b,x=!1;for(b=0;b<m.length;b+=1)m[b]===v&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=o.length;for(d=0;d<p;d+=1)t[o[d]].value=t[o[d]].defaultValue,t[o[d]].explicitSet=!1}if(bi(n)==="object"){for(r in n)if(s=n[r],h(o,r)&&s!==void 0){if(t[r].type==="boolean"&&typeof s=="boolean")t[r].value=s;else if(t[r].type==="name"&&h(t[r].valueSet,s))t[r].value=s;else if(t[r].type==="integer"&&Number.isInteger(s))t[r].value=s;else if(t[r].type==="array"){for(c=0;c<s.length;c+=1)if(i=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(i=!1);i===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}t[r].value="["+l.join(" ")+"]"}else t[r].value=t[r].defaultValue;t[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,v=[];for(m in t)t[m].explicitSet===!0&&(t[m].type==="name"?v.push("/"+m+" /"+t[m].value):v.push("/"+m+" "+t[m].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+a.length+o.length+r.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(r+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Vt.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=s.length;d<h;++d){if(o=a.metadata.characterToGlyph(s.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(d),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},i=function(s){var a,o,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(o=Object.keys(s).sort(function(p,m){return p-m})).length;d<h;d++)a=o[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",m=0;m<h.length;m++)p+=String.fromCharCode(h[m]);var v=c();u({data:p,addLength1:!0,objectId:v}),l("endobj");var b=c();u({data:i(o.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var x=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+up(o.fontName)),l("/FontFile2 "+v+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var w=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+up(o.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+n.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+up(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+w+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,h="",p=0;p<d.length;p++)h+=String.fromCharCode(d[p]);var m=c();u({data:h,addLength1:!0,objectId:m}),l("endobj");var v=c();u({data:i(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+up(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+up(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var r=function(s){var a,o=s.text||"",l=s.x,c=s.y,u=s.options||{},d=s.mutex||{},h=d.pdfEscape,p=d.activeFontKey,m=d.fonts,v=p,b="",x=0,w="",S=m[v].encoding;if(m[v].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:d};for(w=o,v=p,Array.isArray(o)&&(w=o[0]),x=0;x<w.length;x+=1)m[v].metadata.hasOwnProperty("cmap")&&(a=m[v].metadata.cmap.unicode.codeMap[w[x].charCodeAt(0)]),a||w[x].charCodeAt(0)<256&&m[v].metadata.hasOwnProperty("Unicode")?b+=w[x]:b+="";var A="";return parseInt(v.slice(1))<14||S==="WinAnsiEncoding"?A=h(b,v).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(A=t(b,m[v])),d.isHex=!0,{text:A,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([r(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(r(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=r(Object.assign({},l,{text:a})).text}])}(Vt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,i){return e.call(this),this.internal.vFS[t]=i,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Vt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var r,s,a,o,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,S=0;this.__bidiEngine__={};var A=function(D){var O=D.charCodeAt(),Z=O>>8,J=v[Z];return J!==void 0?d[256*J+(255&O)]:Z===252||Z===253?"AL":x.test(Z)?"L":Z===8?"R":"N"},C=function(D){for(var O,Z=0;Z<D.length;Z++){if((O=A(D.charAt(Z)))==="L")return!1;if(O==="R")return!0}return!1},N=function(D,O,Z,J){var le,H,V,z,W=O[J];switch(W){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(W="AN");break;case"AL":w=!0,W="R";break;case"WS":W="N";break;case"CS":J<1||J+1>=O.length||(le=Z[J-1])!=="EN"&&le!=="AN"||(H=O[J+1])!=="EN"&&H!=="AN"?W="N":w&&(H="AN"),W=H===le?H:"N";break;case"ES":W=(le=J>0?Z[J-1]:"B")==="EN"&&J+1<O.length&&O[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&Z[J-1]==="EN"){W="EN";break}if(w){W="N";break}for(V=J+1,z=O.length;V<z&&O[V]==="ET";)V++;W=V<z&&O[V]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(z=O.length,V=J+1;V<z&&O[V]==="NSM";)V++;if(V<z){var te=D[J],fe=te>=1425&&te<=2303||te===64286;if(le=O[V],fe&&(le==="R"||le==="AL")){W="R";break}}}W=J<1||(le=O[J-1])==="B"?"N":Z[J-1];break;case"B":w=!1,r=!0,W=S;break;case"S":s=!0,W="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":W="N"}return W},k=function(D,O,Z){var J=D.split("");return Z&&R(J,Z,{hiLevel:S}),J.reverse(),O&&O.reverse(),J.join("")},R=function(D,O,Z){var J,le,H,V,z,W=-1,te=D.length,fe=0,F=[],K=S?p:h,ee=[];for(w=!1,r=!1,s=!1,le=0;le<te;le++)ee[le]=A(D[le]);for(H=0;H<te;H++){if(z=fe,F[H]=N(D,ee,F,H),J=240&(fe=K[z][m[F[H]]]),fe&=15,O[H]=V=K[fe][5],J>0)if(J===16){for(le=W;le<H;le++)O[le]=1;W=-1}else W=-1;if(K[fe][6])W===-1&&(W=H);else if(W>-1){for(le=W;le<H;le++)O[le]=V;W=-1}ee[H]==="B"&&(O[H]=0),Z.hiLevel|=V}s&&function(ae,ce,ye){for(var be=0;be<ye;be++)if(ae[be]==="S"){ce[be]=S;for(var Te=be-1;Te>=0&&ae[Te]==="WS";Te--)ce[Te]=S}}(ee,O,te)},U=function(D,O,Z,J,le){if(!(le.hiLevel<D)){if(D===1&&S===1&&!r)return O.reverse(),void(Z&&Z.reverse());for(var H,V,z,W,te=O.length,fe=0;fe<te;){if(J[fe]>=D){for(z=fe+1;z<te&&J[z]>=D;)z++;for(W=fe,V=z-1;W<V;W++,V--)H=O[W],O[W]=O[V],O[V]=H,Z&&(H=Z[W],Z[W]=Z[V],Z[V]=H);fe=z}fe++}}},j=function(D,O,Z){var J=D.split(""),le={hiLevel:S};return Z||(Z=[]),R(J,Z,le),function(H,V,z){if(z.hiLevel!==0&&u)for(var W,te=0;te<H.length;te++)V[te]===1&&(W=b.indexOf(H[te]))>=0&&(H[te]=b[W+1])}(J,Z,le),U(2,J,O,Z,le),U(1,J,O,Z,le),J.join("")};return this.__bidiEngine__.doBidiReorder=function(D,O,Z){if(function(le,H){if(H)for(var V=0;V<le.length;V++)H[V]=V;o===void 0&&(o=C(le)),c===void 0&&(c=C(le))}(D,O),a||!l||c)if(a&&l&&o^c)S=o?1:0,D=k(D,O,Z);else if(!a&&l&&c)S=o?1:0,D=j(D,O,Z),D=k(D,O);else if(!a||o||l||c){if(a&&!l&&o^c)D=k(D,O),o?(S=0,D=j(D,O,Z)):(S=1,D=j(D,O,Z),D=k(D,O));else if(a&&o&&!l&&c)S=1,D=j(D,O,Z),D=k(D,O);else if(!a&&!l&&o^c){var J=u;o?(S=1,D=j(D,O,Z),S=0,u=!1,D=j(D,O,Z),u=J):(S=0,D=j(D,O,Z),D=k(D,O),S=1,u=!1,D=j(D,O,Z),u=J,D=k(D,O))}}else S=0,D=j(D,O,Z);else S=o?1:0,D=j(D,O,Z);return D},this.__bidiEngine__.setOptions=function(D){D&&(a=D.isInputVisual,l=D.isOutputVisual,o=D.isInputRtl,c=D.isOutputRtl,u=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var r=i.text,s=(i.x,i.y,i.options||{}),a=(i.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(r)==="[object Array]"){var o=0;for(a=[],o=0;o<r.length;o+=1)Object.prototype.toString.call(r[o])==="[object Array]"?a.push([t.doBidiReorder(r[o][0]),r[o][1],r[o][2]]):a.push([t.doBidiReorder(r[o])]);i.text=a}else i.text=t.doBidiReorder(r);t.setOptions({isInputVisual:!0})}])}(Vt),Vt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Ud(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new gJ(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new tJ(this.contents),this.head=new iJ(this),this.name=new lJ(this),this.cmap=new QO(this),this.toUnicode={},this.hhea=new rJ(this),this.maxp=new cJ(this),this.hmtx=new uJ(this),this.post=new aJ(this),this.os2=new sJ(this),this.loca=new pJ(this),this.glyf=new dJ(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,i,r,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,i){var r,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)r=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var i;return t==null&&(t=!1),i=t?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},n}();var Ll,Ud=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)i[t]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(e){var t,i,r;for(r=[],t=0,i=e.length;0<=i?t<i:t>i;t=0<=i?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,i,r,s,a,o,l;return e=this.readByte(),t=this.readByte(),i=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*i+4294967296*r+16777216*s+65536*a+256*o+l},n.prototype.writeLongLong=function(e){var t,i;return t=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,i;for(t=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)t.push(this.readByte());return t},n.prototype.write=function(e){var t,i,r,s;for(s=[],i=0,r=e.length;i<r;i++)t=e[i],s.push(this.writeByte(t));return s},n}(),tJ=function(){var n;function e(t){var i,r,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},r=0,s=this.tableCount;0<=s?r<s:r>s;r=0<=s?++r:--r)i={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(t){var i,r,s,a,o,l,c,u,d,h,p,m,v;for(v in p=Object.keys(t).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),a=Math.floor(d/l),u=16*p-d,(r=new Ud).writeInt(this.scalarType),r.writeShort(p),r.writeShort(d),r.writeShort(a),r.writeShort(u),s=16*p,c=r.pos+s,o=null,m=[],t)for(h=t[v],r.writeString(v),r.writeInt(n(h)),r.writeInt(c),r.writeInt(h.length),m=m.concat(h),v==="head"&&(o=c),c+=h.length;c%4;)m.push(0),c++;return r.write(m),i=2981146554-n(r.data),r.pos=o+8,r.writeUInt32(i),r.data},n=function(t){var i,r,s,a;for(t=JO.call(t);t.length%4;)t.push(0);for(s=new Ud(t),r=0,i=0,a=t.length;i<a;i=i+=4)r+=s.readUInt32();return 4294967295&r},e}(),nJ={}.hasOwnProperty,pc=function(n,e){for(var t in e)nJ.call(e,t)&&(n[t]=e[t]);function i(){this.constructor=n}return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n};Ll=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var iJ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var i;return(i=new Ud).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(t),i.writeShort(this.glyphDataFormat),i.data},e}(),gk=function(){function n(e,t){var i,r,s,a,o,l,c,u,d,h,p,m,v,b,x,w,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),h=p/2,e.pos+=6,s=function(){var A,C;for(C=[],l=A=0;0<=h?A<h:A>h;l=0<=h?++A:--A)C.push(e.readUInt16());return C}(),e.pos+=2,v=function(){var A,C;for(C=[],l=A=0;0<=h?A<h:A>h;l=0<=h?++A:--A)C.push(e.readUInt16());return C}(),c=function(){var A,C;for(C=[],l=A=0;0<=h?A<h:A>h;l=0<=h?++A:--A)C.push(e.readUInt16());return C}(),u=function(){var A,C;for(C=[],l=A=0;0<=h?A<h:A>h;l=0<=h?++A:--A)C.push(e.readUInt16());return C}(),r=(this.length-e.pos+this.offset)/2,o=function(){var A,C;for(C=[],l=A=0;0<=r?A<r:A>r;l=0<=r?++A:--A)C.push(e.readUInt16());return C}(),l=x=0,S=s.length;x<S;l=++x)for(b=s[l],i=w=m=v[l];m<=b?w<=b:w>=b;i=m<=b?++w:--w)u[l]===0?a=i+c[l]:(a=o[u[l]/2+(i-m)-(h-l)]||0)!==0&&(a+=c[l]),this.codeMap[i]=65535&a}e.pos=d}return n.encode=function(e,t){var i,r,s,a,o,l,c,u,d,h,p,m,v,b,x,w,S,A,C,N,k,R,U,j,D,O,Z,J,le,H,V,z,W,te,fe,F,K,ee,ae,ce,ye,be,Te,Xe,ze,He;switch(J=new Ud,a=Object.keys(e).sort(function(rt,ft){return rt-ft}),t){case"macroman":for(v=0,b=function(){var rt=[];for(m=0;m<256;++m)rt.push(0);return rt}(),w={0:0},s={},le=0,W=a.length;le<W;le++)w[Te=e[r=a[le]]]==null&&(w[Te]=++v),s[r]={old:e[r],new:w[e[r]]},b[r]=w[e[r]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(b),{charMap:s,subtable:J.data,maxGlyphID:v+1};case"unicode":for(O=[],d=[],S=0,w={},i={},x=c=null,H=0,te=a.length;H<te;H++)w[C=e[r=a[H]]]==null&&(w[C]=++S),i[r]={old:C,new:w[C]},o=w[C]-r,x!=null&&o===c||(x&&d.push(x),O.push(r),c=o),x=r;for(x&&d.push(x),d.push(65535),O.push(65535),j=2*(U=O.length),R=2*Math.pow(Math.log(U)/Math.LN2,2),h=Math.log(R/2)/Math.LN2,k=2*U-R,l=[],N=[],p=[],m=V=0,fe=O.length;V<fe;m=++V){if(D=O[m],u=d[m],D===65535){l.push(0),N.push(0);break}if(D-(Z=i[D].new)>=32768)for(l.push(0),N.push(2*(p.length+U-m)),r=z=D;D<=u?z<=u:z>=u;r=D<=u?++z:--z)p.push(i[r].new);else l.push(Z-D),N.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*U+2*p.length),J.writeUInt16(0),J.writeUInt16(j),J.writeUInt16(R),J.writeUInt16(h),J.writeUInt16(k),ye=0,F=d.length;ye<F;ye++)r=d[ye],J.writeUInt16(r);for(J.writeUInt16(0),be=0,K=O.length;be<K;be++)r=O[be],J.writeUInt16(r);for(Xe=0,ee=l.length;Xe<ee;Xe++)o=l[Xe],J.writeUInt16(o);for(ze=0,ae=N.length;ze<ae;ze++)A=N[ze],J.writeUInt16(A);for(He=0,ce=p.length;He<ce;He++)v=p[He],J.writeUInt16(v);return{charMap:i,subtable:J.data,maxGlyphID:S+1}}},n}(),QO=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="cmap",e.prototype.parse=function(t){var i,r,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)i=new gk(t,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(t,i){var r,s;return i==null&&(i="macroman"),r=gk.encode(t,i),(s=new Ud).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},e}(),rJ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),sJ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var i,r;for(r=[],i=0;i<10;++i)r.push(t.readByte());return r}(),this.charRange=function(){var i,r;for(r=[],i=0;i<4;++i)r.push(t.readInt());return r}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var i,r;for(r=[],i=0;i<2;i=++i)r.push(t.readInt());return r}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),aJ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="post",e.prototype.parse=function(t){var i,r,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(r=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)i=t.readByte(),s.push(this.names.push(t.readString(i)));return s;case 151552:return r=t.readUInt16(),this.offsets=t.read(r);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),oJ=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},lJ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="name",e.prototype.parse=function(t){var i,r,s,a,o,l,c,u,d,h,p;for(t.pos=this.offset,t.readShort(),i=t.readShort(),l=t.readShort(),r=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)r.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},a=d=0,h=r.length;d<h;a=++d)s=r[a],t.pos=s.offset,u=t.readString(s.length),o=new oJ(u,s),c[p=s.nameID]==null&&(c[p]=[]),c[s.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),cJ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),uJ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="hmtx",e.prototype.parse=function(t){var i,r,s,a,o,l,c;for(t.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],i=u=0;0<=s?u<s:u>s;i=0<=s?++u:--u)d.push(t.readInt16());return d}(),this.widths=(function(){var u,d,h,p;for(p=[],u=0,d=(h=this.metrics).length;u<d;u++)a=h[u],p.push(a.advance);return p}).call(this),r=this.widths[this.widths.length-1],c=[],i=o=0;0<=s?o<s:o>s;i=0<=s?++o:--o)c.push(this.widths.push(r));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),JO=[].slice,dJ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var i,r,s,a,o,l,c,u,d,h;return t in this.cache?this.cache[t]:(a=this.file.loca,i=this.file.contents,r=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(i.pos=this.offset+r,o=(l=new Ud(i.read(s))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[t]=o===-1?new hJ(l,u,h,c,d):new fJ(l,o,u,h,c,d),this.cache[t]))},e.prototype.encode=function(t,i,r){var s,a,o,l,c;for(o=[],a=[],l=0,c=i.length;l<c;l++)s=t[i[l]],a.push(o.length),s&&(o=o.concat(s.encode(r)));return a.push(o.length),{table:o,offsets:a}},e}(),fJ=function(){function n(e,t,i,r,s,a){this.raw=e,this.numberOfContours=t,this.xMin=i,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),hJ=function(){function n(e,t,i,r,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=i,this.xMax=r,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,i;for(t=new Ud(JO.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),pJ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return pc(e,Ll),e.prototype.tag="loca",e.prototype.parse=function(t){var i,r;return t.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],r=0,s=this.length;r<s;r+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,i){for(var r=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<r.length;++o)if(r[o]=s,a<i.length&&i[a]==o){++a,r[o]=s;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(s+=c)}for(var u=new Array(4*r.length),d=0;d<r.length;++d)u[4*d+3]=255&r[d],u[4*d+2]=(65280&r[d])>>8,u[4*d+1]=(16711680&r[d])>>16,u[4*d]=(4278190080&r[d])>>24;return u},e}(),gJ=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,i,r,s;for(t in r=this.font.cmap.tables[0].codeMap,e={},s=this.subset)i=s[t],e[t]=r[i];return e},n.prototype.glyphsFor=function(e){var t,i,r,s,a,o,l;for(r={},a=0,o=e.length;a<o;a++)r[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],r)(i=r[s])!=null&&i.compound&&t.push.apply(t,i.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))i=l[s],r[s]=i;return r},n.prototype.encode=function(e,t){var i,r,s,a,o,l,c,u,d,h,p,m,v,b,x;for(r in i=QO.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},x=i.charMap)p[(l=x[r]).old]=l.new;for(m in h=i.maxGlyphID,a)m in p||(p[m]=h++);return u=function(w){var S,A;for(S in A={},w)A[w[S]]=S;return A}(p),d=Object.keys(u).sort(function(w,S){return w-S}),v=function(){var w,S,A;for(A=[],w=0,S=d.length;w<S;w++)o=d[w],A.push(u[o]);return A}(),s=this.font.glyf.encode(a,v,p),c=this.font.loca.encode(s.offsets,v),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},n}();Vt.API.PDFObject=function(){var n;function e(){}return n=function(t,i){return(Array(i+1).join("0")+t).slice(-i)},e.convert=function(t){var i,r,s,a;if(Array.isArray(t))return"["+function(){var o,l,c;for(c=[],o=0,l=t.length;o<l;o++)i=t[o],c.push(e.convert(i));return c}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(r in s=["<<"],t)a=t[r],s.push("/"+r+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();const mJ=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:YQ,AcroFormAppearance:It,AcroFormButton:as,AcroFormCheckBox:Pm,AcroFormChoiceField:eh,AcroFormComboBox:nh,AcroFormEditBox:km,AcroFormListBox:th,AcroFormPasswordField:Nm,AcroFormPushButton:Rm,AcroFormRadioButton:ih,AcroFormTextField:Nd,GState:g0,ShadingPattern:fd,TilingPattern:Vf,default:Vt,jsPDF:Vt},Symbol.toStringTag,{value:"Module"}));var ZO={exports:{}};const yJ=u7(mJ);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(n,e){(function(i,r){n.exports=r(function(){try{return yJ}catch{}}())})(typeof globalThis<"u"?globalThis:typeof ld<"u"?ld:typeof window<"u"?window:typeof self<"u"?self:ld,function(t){return function(){var i={172:function(o,l){var c=this&&this.__extends||function(){var h=function(p,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(v[x]=b[x])},h(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var u=function(){function h(p,m,v){this.table=m,this.pageNumber=m.pageNumber,this.pageCount=this.pageNumber,this.settings=m.settings,this.cursor=v,this.doc=p.getDocument()}return h}();l.HookData=u;var d=function(h){c(p,h);function p(m,v,b,x,w,S){var A=h.call(this,m,v,S)||this;return A.cell=b,A.row=x,A.column=w,A.section=x.section,A}return p}(u);l.CellHookData=d},340:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0});var u=c(4),d=c(136),h=c(744),p=c(776),m=c(664),v=c(972);function b(x){x.API.autoTable=function(){for(var w=[],S=0;S<arguments.length;S++)w[S]=arguments[S];var A;w.length===1?A=w[0]:(console.error("Use of deprecated autoTable initiation"),A=w[2]||{},A.columns=w[0],A.body=w[1]);var C=(0,p.parseInput)(this,A),N=(0,v.createTable)(this,C);return(0,m.drawTable)(this,N),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(w,S,A,C){(0,d.default)(w,S,A,C,this)},x.API.autoTableSetDefaults=function(w){return h.DocHandler.setDefaults(w,this),this},x.autoTableSetDefaults=function(w,S){h.DocHandler.setDefaults(w,S)},x.API.autoTableHtmlToJson=function(w,S){var A;if(S===void 0&&(S=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var C=new h.DocHandler(this),N=(0,u.parseHtml)(C,w,window,S,!1),k=N.head,R=N.body,U=((A=k[0])===null||A===void 0?void 0:A.map(function(j){return j.content}))||[];return{columns:U,rows:R,data:R}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var w=this.lastAutoTable;return w&&w.finalY?w.finalY:0},x.API.autoTableAddPageContent=function(w){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=w,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=b},136:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function c(u,d,h,p,m){p=p||{};var v=1.15,b=m.internal.scaleFactor,x=m.internal.getFontSize()/b,w=m.getLineHeightFactor?m.getLineHeightFactor():v,S=x*w,A=/\r\n|\r|\n/g,C="",N=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(C=typeof u=="string"?u.split(A):u,N=C.length||1),h+=x*(2-v),p.valign==="middle"?h-=N/2*S:p.valign==="bottom"&&(h-=N*S),p.halign==="center"||p.halign==="right"){var k=x;if(p.halign==="center"&&(k*=.5),C&&N>=1){for(var R=0;R<C.length;R++)m.text(C[R],d-m.getStringUnitWidth(C[R])*k,h),h+=S;return m}d-=m.getStringUnitWidth(u)*k}return p.halign==="justify"?m.text(u,d,h,{maxWidth:p.maxWidth||100,align:"justify"}):m.text(u,d,h),m}l.default=c},420:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(m,v,b){b.applyStyles(v,!0);var x=Array.isArray(m)?m:[m],w=x.map(function(S){return b.getTextWidth(S)}).reduce(function(S,A){return Math.max(S,A)},0);return w}l.getStringWidth=c;function u(m,v,b,x){var w=v.settings.tableLineWidth,S=v.settings.tableLineColor;m.applyStyles({lineWidth:w,lineColor:S});var A=d(w,!1);A&&m.rect(b.x,b.y,v.getWidth(m.pageSize().width),x.y-b.y,A)}l.addTableBorder=u;function d(m,v){var b=m>0,x=v||v===0;return b&&x?"DF":b?"S":x?"F":null}l.getFillStyle=d;function h(m,v){var b,x,w,S;if(m=m||v,Array.isArray(m)){if(m.length>=4)return{top:m[0],right:m[1],bottom:m[2],left:m[3]};if(m.length===3)return{top:m[0],right:m[1],bottom:m[2],left:m[1]};if(m.length===2)return{top:m[0],right:m[1],bottom:m[0],left:m[1]};m.length===1?m=m[0]:m=v}return typeof m=="object"?(typeof m.vertical=="number"&&(m.top=m.vertical,m.bottom=m.vertical),typeof m.horizontal=="number"&&(m.right=m.horizontal,m.left=m.horizontal),{left:(b=m.left)!==null&&b!==void 0?b:v,top:(x=m.top)!==null&&x!==void 0?x:v,right:(w=m.right)!==null&&w!==void 0?w:v,bottom:(S=m.bottom)!==null&&S!==void 0?S:v}):(typeof m!="number"&&(m=v),{top:m,right:m,bottom:m,left:m})}l.parseSpacing=h;function p(m,v){var b=h(v.settings.margin,0);return m.pageSize().width-(b.left+b.right)}l.getPageAvailableWidth=p},796:function(o,l){var c=this&&this.__extends||function(){var p=function(m,v){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(b[w]=x[w])},p(m,v)};return function(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");p(m,v);function b(){this.constructor=m}m.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var u=function(p){c(m,p);function m(v){var b=p.call(this)||this;return b._element=v,b}return m}(Array);l.HtmlRowInput=u;function d(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=d;function h(p){var m={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return m[p]}l.getTheme=h},903:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var u=c(420);function d(b,x,w,S,A){var C={},N=1.3333333333333333,k=p(x,function(W){return A.getComputedStyle(W).backgroundColor});k!=null&&(C.fillColor=k);var R=p(x,function(W){return A.getComputedStyle(W).color});R!=null&&(C.textColor=R);var U=v(S,w);U&&(C.cellPadding=U);var j="borderTopColor",D=N*w,O=S.borderTopWidth;if(S.borderBottomWidth===O&&S.borderRightWidth===O&&S.borderLeftWidth===O){var Z=(parseFloat(O)||0)/D;Z&&(C.lineWidth=Z)}else C.lineWidth={top:(parseFloat(S.borderTopWidth)||0)/D,right:(parseFloat(S.borderRightWidth)||0)/D,bottom:(parseFloat(S.borderBottomWidth)||0)/D,left:(parseFloat(S.borderLeftWidth)||0)/D},C.lineWidth.top||(C.lineWidth.right?j="borderRightColor":C.lineWidth.bottom?j="borderBottomColor":C.lineWidth.left&&(j="borderLeftColor"));var J=p(x,function(W){return A.getComputedStyle(W)[j]});J!=null&&(C.lineColor=J);var le=["left","right","center","justify"];le.indexOf(S.textAlign)!==-1&&(C.halign=S.textAlign),le=["middle","bottom","top"],le.indexOf(S.verticalAlign)!==-1&&(C.valign=S.verticalAlign);var H=parseInt(S.fontSize||"");isNaN(H)||(C.fontSize=H/N);var V=h(S);V&&(C.fontStyle=V);var z=(S.fontFamily||"").toLowerCase();return b.indexOf(z)!==-1&&(C.font=z),C}l.parseCss=d;function h(b){var x="";return(b.fontWeight==="bold"||b.fontWeight==="bolder"||parseInt(b.fontWeight)>=700)&&(x="bold"),(b.fontStyle==="italic"||b.fontStyle==="oblique")&&(x+="italic"),x}function p(b,x){var w=m(b,x);if(!w)return null;var S=w.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!S||!Array.isArray(S))return null;var A=[parseInt(S[1]),parseInt(S[2]),parseInt(S[3])],C=parseInt(S[4]);return C===0||isNaN(A[0])||isNaN(A[1])||isNaN(A[2])?null:A}function m(b,x){var w=x(b);return w==="rgba(0, 0, 0, 0)"||w==="transparent"||w==="initial"||w==="inherit"?b.parentElement==null?null:m(b.parentElement,x):w}function v(b,x){var w=[b.paddingTop,b.paddingRight,b.paddingBottom,b.paddingLeft],S=96/(72/x),A=(parseInt(b.lineHeight)-parseInt(b.fontSize))/x/2,C=w.map(function(k){return parseInt(k||"0")/S}),N=(0,u.parseSpacing)(C,0);return A>N.top&&(N.top=A),A>N.bottom&&(N.bottom=A),N}},744:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},u=function(){function d(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return d.setDefaults=function(h,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=h:c=h},d.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},d.prototype.applyStyles=function(h,p){var m,v,b;p===void 0&&(p=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var x=this.jsPDFDocument.internal.getFont(),w=x.fontStyle,S=x.fontName;if(h.font&&(S=h.font),h.fontStyle){w=h.fontStyle;var A=this.getFontList()[S];A&&A.indexOf(w)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(A[0]),w=A[0])}if(this.jsPDFDocument.setFont(S,w),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!p){var C=d.unifyColor(h.fillColor);C&&(m=this.jsPDFDocument).setFillColor.apply(m,C),C=d.unifyColor(h.textColor),C&&(v=this.jsPDFDocument).setTextColor.apply(v,C),C=d.unifyColor(h.lineColor),C&&(b=this.jsPDFDocument).setDrawColor.apply(b,C),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},d.prototype.splitTextToSize=function(h,p,m){return this.jsPDFDocument.splitTextToSize(h,p,m)},d.prototype.rect=function(h,p,m,v,b){return this.jsPDFDocument.rect(h,p,m,v,b)},d.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},d.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},d.prototype.getDocument=function(){return this.jsPDFDocument},d.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},d.prototype.addPage=function(){return this.jsPDFDocument.addPage()},d.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},d.prototype.getGlobalOptions=function(){return c||{}},d.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},d.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},d.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},d.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},d.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},d.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},d}();l.DocHandler=u},4:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var u=c(903),d=c(796);function h(v,b,x,w,S){var A,C;w===void 0&&(w=!1),S===void 0&&(S=!1);var N;typeof b=="string"?N=x.document.querySelector(b):N=b;var k=Object.keys(v.getFontList()),R=v.scaleFactor(),U=[],j=[],D=[];if(!N)return console.error("Html table could not be found with input: ",b),{head:U,body:j,foot:D};for(var O=0;O<N.rows.length;O++){var Z=N.rows[O],J=(C=(A=Z==null?void 0:Z.parentElement)===null||A===void 0?void 0:A.tagName)===null||C===void 0?void 0:C.toLowerCase(),le=p(k,R,x,Z,w,S);le&&(J==="thead"?U.push(le):J==="tfoot"?D.push(le):j.push(le))}return{head:U,body:j,foot:D}}l.parseHtml=h;function p(v,b,x,w,S,A){for(var C=new d.HtmlRowInput(w),N=0;N<w.cells.length;N++){var k=w.cells[N],R=x.getComputedStyle(k);if(S||R.display!=="none"){var U=void 0;A&&(U=(0,u.parseCss)(v,k,b,R,x)),C.push({rowSpan:k.rowSpan,colSpan:k.colSpan,styles:U,_element:k,content:m(k)})}}var j=x.getComputedStyle(w);if(C.length>0&&(S||j.display!=="none"))return C}function m(v){var b=v.cloneNode(!0);return b.innerHTML=b.innerHTML.replace(/\n/g,"").replace(/ +/g," "),b.innerHTML=b.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),b.innerText||b.textContent||""}},776:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var u=c(4),d=c(356),h=c(420),p=c(744),m=c(792);function v(N,k){var R=new p.DocHandler(N),U=R.getDocumentOptions(),j=R.getGlobalOptions();(0,m.default)(R,j,U,k);var D=(0,d.assign)({},j,U,k),O;typeof window<"u"&&(O=window);var Z=b(j,U,k),J=x(j,U,k),le=w(R,D),H=A(R,D,O);return{id:k.tableId,content:H,hooks:J,styles:Z,settings:le}}l.parseInput=v;function b(N,k,R){for(var U={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},j=function(J){if(J==="columnStyles"){var le=N[J],H=k[J],V=R[J];U.columnStyles=(0,d.assign)({},le,H,V)}else{var z=[N,k,R],W=z.map(function(te){return te[J]||{}});U[J]=(0,d.assign)({},W[0],W[1],W[2])}},D=0,O=Object.keys(U);D<O.length;D++){var Z=O[D];j(Z)}return U}function x(N,k,R){for(var U=[N,k,R],j={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},D=0,O=U;D<O.length;D++){var Z=O[D];Z.didParseCell&&j.didParseCell.push(Z.didParseCell),Z.willDrawCell&&j.willDrawCell.push(Z.willDrawCell),Z.didDrawCell&&j.didDrawCell.push(Z.didDrawCell),Z.willDrawPage&&j.willDrawPage.push(Z.willDrawPage),Z.didDrawPage&&j.didDrawPage.push(Z.didDrawPage)}return j}function w(N,k){var R,U,j,D,O,Z,J,le,H,V,z,W,te=(0,h.parseSpacing)(k.margin,40/N.scaleFactor()),fe=(R=S(N,k.startY))!==null&&R!==void 0?R:te.top,F;k.showFoot===!0?F="everyPage":k.showFoot===!1?F="never":F=(U=k.showFoot)!==null&&U!==void 0?U:"everyPage";var K;k.showHead===!0?K="everyPage":k.showHead===!1?K="never":K=(j=k.showHead)!==null&&j!==void 0?j:"everyPage";var ee=(D=k.useCss)!==null&&D!==void 0?D:!1,ae=k.theme||(ee?"plain":"striped"),ce=!!k.horizontalPageBreak,ye=(O=k.horizontalPageBreakRepeat)!==null&&O!==void 0?O:null;return{includeHiddenHtml:(Z=k.includeHiddenHtml)!==null&&Z!==void 0?Z:!1,useCss:ee,theme:ae,startY:fe,margin:te,pageBreak:(J=k.pageBreak)!==null&&J!==void 0?J:"auto",rowPageBreak:(le=k.rowPageBreak)!==null&&le!==void 0?le:"auto",tableWidth:(H=k.tableWidth)!==null&&H!==void 0?H:"auto",showHead:K,showFoot:F,tableLineWidth:(V=k.tableLineWidth)!==null&&V!==void 0?V:0,tableLineColor:(z=k.tableLineColor)!==null&&z!==void 0?z:200,horizontalPageBreak:ce,horizontalPageBreakRepeat:ye,horizontalPageBreakBehaviour:(W=k.horizontalPageBreakBehaviour)!==null&&W!==void 0?W:"afterAllRows"}}function S(N,k){var R=N.getLastAutoTable(),U=N.scaleFactor(),j=N.pageNumber(),D=!1;if(R&&R.startPageNumber){var O=R.startPageNumber+R.pageNumber-1;D=O===j}return typeof k=="number"?k:(k==null||k===!1)&&D&&(R==null?void 0:R.finalY)!=null?R.finalY+20/U:null}function A(N,k,R){var U=k.head||[],j=k.body||[],D=k.foot||[];if(k.html){var O=k.includeHiddenHtml;if(R){var Z=(0,u.parseHtml)(N,k.html,R,O,k.useCss)||{};U=Z.head||U,j=Z.body||U,D=Z.foot||U}else console.error("Cannot parse html in non browser environment")}var J=k.columns||C(U,j,D);return{columns:J,head:U,body:j,foot:D}}function C(N,k,R){var U=N[0]||k[0]||R[0]||[],j=[];return Object.keys(U).filter(function(D){return D!=="_element"}).forEach(function(D){var O=1,Z;Array.isArray(U)?Z=U[parseInt(D)]:Z=U[D],typeof Z=="object"&&!Array.isArray(Z)&&(O=(Z==null?void 0:Z.colSpan)||1);for(var J=0;J<O;J++){var le=void 0;Array.isArray(U)?le=j.length:le=D+(J>0?"_".concat(J):"");var H={dataKey:le};j.push(H)}}),j}},792:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function c(d,h,p,m){for(var v=function(S){S&&typeof S!="object"&&console.error("The options parameter should be of type object, is: "+typeof S),typeof S.extendWidth<"u"&&(S.tableWidth=S.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof S.margins<"u"&&(typeof S.margin>"u"&&(S.margin=S.margins),console.error("Use of deprecated option: margins, use margin instead.")),S.startY&&typeof S.startY!="number"&&(console.error("Invalid value for startY option",S.startY),delete S.startY),!S.didDrawPage&&(S.afterPageContent||S.beforePageContent||S.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),S.didDrawPage=function(D){d.applyStyles(d.userStyles),S.beforePageContent&&S.beforePageContent(D),d.applyStyles(d.userStyles),S.afterPageContent&&S.afterPageContent(D),d.applyStyles(d.userStyles),S.afterPageAdd&&D.pageNumber>1&&D.afterPageAdd(D),d.applyStyles(d.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(D){S[D]&&console.error('The "'.concat(D,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(D){var O=D[0],Z=D[1];S[Z]&&(console.error("Use of deprecated option ".concat(Z,". Use ").concat(O," instead")),S[O]=S[Z])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(D){var O=typeof D=="string"?D:D[0],Z=typeof D=="string"?D:D[1];typeof S[O]<"u"&&(typeof S.styles[Z]>"u"&&(S.styles[Z]=S[O]),console.error("Use of deprecated option: "+O+", use the style "+Z+" instead."))});for(var A=0,C=["styles","bodyStyles","headStyles","footStyles"];A<C.length;A++){var N=C[A];u(S[N]||{})}for(var k=S.columnStyles||{},R=0,U=Object.keys(k);R<U.length;R++){var j=U[R];u(k[j]||{})}},b=0,x=[h,p,m];b<x.length;b++){var w=x[b];v(w)}}l.default=c;function u(d){d.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),d.minCellHeight||(d.minCellHeight=d.rowHeight)):d.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),d.cellWidth||(d.cellWidth=d.columnWidth))}},260:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var u=c(796),d=c(172),h=c(420),p=function(){function x(w,S){this.pageNumber=1,this.pageCount=1,this.id=w.id,this.settings=w.settings,this.styles=w.styles,this.hooks=w.hooks,this.columns=S.columns,this.head=S.head,this.body=S.body,this.foot=S.foot}return x.prototype.getHeadHeight=function(w){return this.head.reduce(function(S,A){return S+A.getMaxCellHeight(w)},0)},x.prototype.getFootHeight=function(w){return this.foot.reduce(function(S,A){return S+A.getMaxCellHeight(w)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(w,S,A,C,N,k){for(var R=0,U=S;R<U.length;R++){var j=U[R],D=new d.CellHookData(w,this,A,C,N,k),O=j(D)===!1;if(A.text=Array.isArray(A.text)?A.text:[A.text],O)return!1}return!0},x.prototype.callEndPageHooks=function(w,S){w.applyStyles(w.userStyles);for(var A=0,C=this.hooks.didDrawPage;A<C.length;A++){var N=C[A];N(new d.HookData(w,this,S))}},x.prototype.callWillDrawPageHooks=function(w,S){for(var A=0,C=this.hooks.willDrawPage;A<C.length;A++){var N=C[A];N(new d.HookData(w,this,S))}},x.prototype.getWidth=function(w){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var S=this.columns.reduce(function(C,N){return C+N.wrappedWidth},0);return S}else{var A=this.settings.margin;return w-A.left-A.right}},x}();l.Table=p;var m=function(){function x(w,S,A,C,N){N===void 0&&(N=!1),this.height=0,this.raw=w,w instanceof u.HtmlRowInput&&(this.raw=w._element,this.element=w._element),this.index=S,this.section=A,this.cells=C,this.spansMultiplePages=N}return x.prototype.getMaxCellHeight=function(w){var S=this;return w.reduce(function(A,C){var N;return Math.max(A,((N=S.cells[C.index])===null||N===void 0?void 0:N.height)||0)},0)},x.prototype.hasRowSpan=function(w){var S=this;return w.filter(function(A){var C=S.cells[A.index];return C?C.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(w,S){return this.getMaxCellHeight(S)<=w},x.prototype.getMinimumRowHeight=function(w,S){var A=this;return w.reduce(function(C,N){var k=A.cells[N.index];if(!k)return 0;var R=S.getLineHeight(k.styles.fontSize),U=k.padding("vertical"),j=U+R;return j>C?j:C},0)},x}();l.Row=m;var v=function(){function x(w,S,A){var C,N;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=S,this.section=A,this.raw=w;var k=w;w!=null&&typeof w=="object"&&!Array.isArray(w)?(this.rowSpan=w.rowSpan||1,this.colSpan=w.colSpan||1,k=(N=(C=w.content)!==null&&C!==void 0?C:w.title)!==null&&N!==void 0?N:w,w._element&&(this.raw=w._element)):(this.rowSpan=1,this.colSpan=1);var R=k!=null?""+k:"",U=/\r\n|\r|\n/g;this.text=R.split(U)}return x.prototype.getTextPos=function(){var w;if(this.styles.valign==="top")w=this.y+this.padding("top");else if(this.styles.valign==="bottom")w=this.y+this.height-this.padding("bottom");else{var S=this.height-this.padding("vertical");w=this.y+S/2+this.padding("top")}var A;if(this.styles.halign==="right")A=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var C=this.width-this.padding("horizontal");A=this.x+C/2+this.padding("left")}else A=this.x+this.padding("left");return{x:A,y:w}},x.prototype.getContentHeight=function(w,S){S===void 0&&(S=1.15);var A=Array.isArray(this.text)?this.text.length:1,C=this.styles.fontSize/w*S,N=A*C+this.padding("vertical");return Math.max(N,this.styles.minCellHeight)},x.prototype.padding=function(w){var S=(0,h.parseSpacing)(this.styles.cellPadding,0);return w==="vertical"?S.top+S.bottom:w==="horizontal"?S.left+S.right:S[w]},x}();l.Cell=v;var b=function(){function x(w,S,A){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=w,this.raw=S,this.index=A}return x.prototype.getMaxCustomCellWidth=function(w){for(var S=0,A=0,C=w.allRows();A<C.length;A++){var N=C[A],k=N.cells[this.index];k&&typeof k.styles.cellWidth=="number"&&(S=Math.max(S,k.styles.cellWidth))}return S},x}();l.Column=b},356:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(u,d,h,p,m){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var v=Object(u),b=1;b<arguments.length;b++){var x=arguments[b];if(x!=null)for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(v[w]=x[w])}return v}l.assign=c},972:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var u=c(744),d=c(260),h=c(324),p=c(796),m=c(356);function v(N,k){var R=new u.DocHandler(N),U=b(k,R.scaleFactor()),j=new d.Table(k,U);return(0,h.calculateWidths)(R,j),R.applyStyles(R.userStyles),j}l.createTable=v;function b(N,k){var R=N.content,U=A(R.columns);if(R.head.length===0){var j=w(U,"head");j&&R.head.push(j)}if(R.foot.length===0){var j=w(U,"foot");j&&R.foot.push(j)}var D=N.settings.theme,O=N.styles;return{columns:U,head:x("head",R.head,U,O,D,k),body:x("body",R.body,U,O,D,k),foot:x("foot",R.foot,U,O,D,k)}}function x(N,k,R,U,j,D){var O={},Z=k.map(function(J,le){for(var H=0,V={},z=0,W=0,te=0,fe=R;te<fe.length;te++){var F=fe[te];if(O[F.index]==null||O[F.index].left===0)if(W===0){var K=void 0;Array.isArray(J)?K=J[F.index-z-H]:K=J[F.dataKey];var ee={};typeof K=="object"&&!Array.isArray(K)&&(ee=(K==null?void 0:K.styles)||{});var ae=C(N,F,le,j,U,D,ee),ce=new d.Cell(K,ae,N);V[F.dataKey]=ce,V[F.index]=ce,W=ce.colSpan-1,O[F.index]={left:ce.rowSpan-1,times:W}}else W--,z++;else O[F.index].left--,W=O[F.index].times,H++}return new d.Row(J,le,N,V)});return Z}function w(N,k){var R={};return N.forEach(function(U){if(U.raw!=null){var j=S(k,U.raw);j!=null&&(R[U.dataKey]=j)}}),Object.keys(R).length>0?R:null}function S(N,k){if(N==="head"){if(typeof k=="object")return k.header||k.title||null;if(typeof k=="string"||typeof k=="number")return k}else if(N==="foot"&&typeof k=="object")return k.footer;return null}function A(N){return N.map(function(k,R){var U,j,D;return typeof k=="object"?D=(j=(U=k.dataKey)!==null&&U!==void 0?U:k.key)!==null&&j!==void 0?j:R:D=R,new d.Column(D,k,R)})}function C(N,k,R,U,j,D,O){var Z=(0,p.getTheme)(U),J;N==="head"?J=j.headStyles:N==="body"?J=j.bodyStyles:N==="foot"&&(J=j.footStyles);var le=(0,m.assign)({},Z.table,Z[N],j.styles,J),H=j.columnStyles[k.dataKey]||j.columnStyles[k.index]||{},V=N==="body"?H:{},z=N==="body"&&R%2===0?(0,m.assign)({},Z.alternateRow,j.alternateRowStyles):{},W=(0,p.defaultStyles)(D),te=(0,m.assign)({},W,le,z,V);return(0,m.assign)(te,O)}},664:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var u=c(420),d=c(260),h=c(744),p=c(356),m=c(136),v=c(224);function b(H,V){var z=V.settings,W=z.startY,te=z.margin,fe={x:te.left,y:W},F=V.getHeadHeight(V.columns)+V.getFootHeight(V.columns),K=W+te.bottom+F;if(z.pageBreak==="avoid"){var ee=V.body,ae=ee.reduce(function(be,Te){return be+Te.height},0);K+=ae}var ce=new h.DocHandler(H);(z.pageBreak==="always"||z.startY!=null&&K>ce.pageSize().height)&&(le(ce),fe.y=te.top),V.callWillDrawPageHooks(ce,fe);var ye=(0,p.assign)({},fe);V.startPageNumber=ce.pageNumber(),z.horizontalPageBreak?x(ce,V,ye,fe):(ce.applyStyles(ce.userStyles),(z.showHead==="firstPage"||z.showHead==="everyPage")&&V.head.forEach(function(be){return j(ce,V,be,fe,V.columns)}),ce.applyStyles(ce.userStyles),V.body.forEach(function(be,Te){var Xe=Te===V.body.length-1;U(ce,V,be,Xe,ye,fe,V.columns)}),ce.applyStyles(ce.userStyles),(z.showFoot==="lastPage"||z.showFoot==="everyPage")&&V.foot.forEach(function(be){return j(ce,V,be,fe,V.columns)})),(0,u.addTableBorder)(ce,V,ye,fe),V.callEndPageHooks(ce,fe),V.finalY=fe.y,H.lastAutoTable=V,H.previousAutoTable=V,H.autoTable&&(H.autoTable.previous=V),ce.applyStyles(ce.userStyles)}l.drawTable=b;function x(H,V,z,W){var te=(0,v.calculateAllColumnsCanFitInPage)(H,V),fe=V.settings;if(fe.horizontalPageBreakBehaviour==="afterAllRows")te.forEach(function(ae,ce){H.applyStyles(H.userStyles),ce>0?J(H,V,z,W,ae.columns,!0):w(H,V,W,ae.columns),S(H,V,z,W,ae.columns),C(H,V,W,ae.columns)});else for(var F=-1,K=te[0],ee=function(){var ae=F;if(K){H.applyStyles(H.userStyles);var ce=K.columns;F>=0?J(H,V,z,W,ce,!0):w(H,V,W,ce),ae=A(H,V,F+1,W,ce),C(H,V,W,ce)}var ye=ae-F;te.slice(1).forEach(function(be){H.applyStyles(H.userStyles),J(H,V,z,W,be.columns,!0),A(H,V,F+1,W,be.columns,ye),C(H,V,W,be.columns)}),F=ae};F<V.body.length-1;)ee()}function w(H,V,z,W){var te=V.settings;H.applyStyles(H.userStyles),(te.showHead==="firstPage"||te.showHead==="everyPage")&&V.head.forEach(function(fe){return j(H,V,fe,z,W)})}function S(H,V,z,W,te){H.applyStyles(H.userStyles),V.body.forEach(function(fe,F){var K=F===V.body.length-1;U(H,V,fe,K,z,W,te)})}function A(H,V,z,W,te,fe){H.applyStyles(H.userStyles),fe=fe??V.body.length;var F=Math.min(z+fe,V.body.length),K=-1;return V.body.slice(z,F).forEach(function(ee,ae){var ce=z+ae===V.body.length-1,ye=Z(H,V,ce,W);ee.canEntireRowFit(ye,te)&&(j(H,V,ee,W,te),K=z+ae)}),K}function C(H,V,z,W){var te=V.settings;H.applyStyles(H.userStyles),(te.showFoot==="lastPage"||te.showFoot==="everyPage")&&V.foot.forEach(function(fe){return j(H,V,fe,z,W)})}function N(H,V,z){var W=z.getLineHeight(H.styles.fontSize),te=H.padding("vertical"),fe=Math.floor((V-te)/W);return Math.max(0,fe)}function k(H,V,z,W){var te={};H.spansMultiplePages=!0,H.height=0;for(var fe=0,F=0,K=z.columns;F<K.length;F++){var ee=K[F],ae=H.cells[ee.index];if(ae){Array.isArray(ae.text)||(ae.text=[ae.text]);var ce=new d.Cell(ae.raw,ae.styles,ae.section);ce=(0,p.assign)(ce,ae),ce.text=[];var ye=N(ae,V,W);ae.text.length>ye&&(ce.text=ae.text.splice(ye,ae.text.length));var be=W.scaleFactor(),Te=W.getLineHeightFactor();ae.contentHeight=ae.getContentHeight(be,Te),ae.contentHeight>=V&&(ae.contentHeight=V,ce.styles.minCellHeight-=V),ae.contentHeight>H.height&&(H.height=ae.contentHeight),ce.contentHeight=ce.getContentHeight(be,Te),ce.contentHeight>fe&&(fe=ce.contentHeight),te[ee.index]=ce}}var Xe=new d.Row(H.raw,-1,H.section,te,!0);Xe.height=fe;for(var ze=0,He=z.columns;ze<He.length;ze++){var ee=He[ze],ce=Xe.cells[ee.index];ce&&(ce.height=Xe.height);var ae=H.cells[ee.index];ae&&(ae.height=H.height)}return Xe}function R(H,V,z,W){var te=H.pageSize().height,fe=W.settings.margin,F=fe.top+fe.bottom,K=te-F;V.section==="body"&&(K-=W.getHeadHeight(W.columns)+W.getFootHeight(W.columns));var ee=V.getMinimumRowHeight(W.columns,H),ae=ee<z;if(ee>K)return console.error("Will not be able to print row ".concat(V.index," correctly since it's minimum height is larger than page height")),!0;if(!ae)return!1;var ce=V.hasRowSpan(W.columns),ye=V.getMaxCellHeight(W.columns)>K;return ye?(ce&&console.error("The content of row ".concat(V.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ce||W.settings.rowPageBreak==="avoid")}function U(H,V,z,W,te,fe,F){var K=Z(H,V,W,fe);if(z.canEntireRowFit(K,F))j(H,V,z,fe,F);else if(R(H,z,K,V)){var ee=k(z,K,V,H);j(H,V,z,fe,F),J(H,V,te,fe,F),U(H,V,ee,W,te,fe,F)}else J(H,V,te,fe,F),U(H,V,z,W,te,fe,F)}function j(H,V,z,W,te){W.x=V.settings.margin.left;for(var fe=0,F=te;fe<F.length;fe++){var K=F[fe],ee=z.cells[K.index];if(!ee){W.x+=K.width;continue}H.applyStyles(ee.styles),ee.x=W.x,ee.y=W.y;var ae=V.callCellHooks(H,V.hooks.willDrawCell,ee,z,K,W);if(ae===!1){W.x+=K.width;continue}D(H,ee,W);var ce=ee.getTextPos();(0,m.default)(ee.text,ce.x,ce.y,{halign:ee.styles.halign,valign:ee.styles.valign,maxWidth:Math.ceil(ee.width-ee.padding("left")-ee.padding("right"))},H.getDocument()),V.callCellHooks(H,V.hooks.didDrawCell,ee,z,K,W),W.x+=K.width}W.y+=z.height}function D(H,V,z){var W=V.styles;if(H.getDocument().setFillColor(H.getDocument().getFillColor()),typeof W.lineWidth=="number"){var te=(0,u.getFillStyle)(W.lineWidth,W.fillColor);te&&H.rect(V.x,z.y,V.width,V.height,te)}else typeof W.lineWidth=="object"&&(W.fillColor&&H.rect(V.x,z.y,V.width,V.height,"F"),O(H,V,z,W.lineWidth))}function O(H,V,z,W){var te,fe,F,K;W.top&&(te=z.x,fe=z.y,F=z.x+V.width,K=z.y,W.right&&(F+=.5*W.right),W.left&&(te-=.5*W.left),ee(W.top,te,fe,F,K)),W.bottom&&(te=z.x,fe=z.y+V.height,F=z.x+V.width,K=z.y+V.height,W.right&&(F+=.5*W.right),W.left&&(te-=.5*W.left),ee(W.bottom,te,fe,F,K)),W.left&&(te=z.x,fe=z.y,F=z.x,K=z.y+V.height,W.top&&(fe-=.5*W.top),W.bottom&&(K+=.5*W.bottom),ee(W.left,te,fe,F,K)),W.right&&(te=z.x+V.width,fe=z.y,F=z.x+V.width,K=z.y+V.height,W.top&&(fe-=.5*W.top),W.bottom&&(K+=.5*W.bottom),ee(W.right,te,fe,F,K));function ee(ae,ce,ye,be,Te){H.getDocument().setLineWidth(ae),H.getDocument().line(ce,ye,be,Te,"S")}}function Z(H,V,z,W){var te=V.settings.margin.bottom,fe=V.settings.showFoot;return(fe==="everyPage"||fe==="lastPage"&&z)&&(te+=V.getFootHeight(V.columns)),H.pageSize().height-W.y-te}function J(H,V,z,W,te,fe){te===void 0&&(te=[]),fe===void 0&&(fe=!1),H.applyStyles(H.userStyles),V.settings.showFoot==="everyPage"&&!fe&&V.foot.forEach(function(K){return j(H,V,K,W,te)}),V.callEndPageHooks(H,W);var F=V.settings.margin;(0,u.addTableBorder)(H,V,z,W),le(H),V.pageNumber++,V.pageCount++,W.x=F.left,W.y=F.top,z.y=F.top,V.callWillDrawPageHooks(H,W),V.settings.showHead==="everyPage"&&(V.head.forEach(function(K){return j(H,V,K,W,te)}),H.applyStyles(H.userStyles))}l.addPage=J;function le(H){var V=H.pageNumber();H.setPage(V+1);var z=H.pageNumber();return z===V?(H.addPage(),!0):!1}},224:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var u=c(420);function d(p,m,v){var b;v===void 0&&(v={});var x=(0,u.getPageAvailableWidth)(p,m),w=new Map,S=[],A=[],C=[];m.settings.horizontalPageBreakRepeat,Array.isArray(m.settings.horizontalPageBreakRepeat)?C=m.settings.horizontalPageBreakRepeat:(typeof m.settings.horizontalPageBreakRepeat=="string"||typeof m.settings.horizontalPageBreakRepeat=="number")&&(C=[m.settings.horizontalPageBreakRepeat]),C.forEach(function(U){var j=m.columns.find(function(D){return D.dataKey===U||D.index===U});j&&!w.has(j.index)&&(w.set(j.index,!0),S.push(j.index),A.push(m.columns[j.index]),x-=j.wrappedWidth)});for(var N=!0,k=(b=v==null?void 0:v.start)!==null&&b!==void 0?b:0;k<m.columns.length;){if(w.has(k)){k++;continue}var R=m.columns[k].wrappedWidth;if(N||x>=R)N=!1,S.push(k),A.push(m.columns[k]),x-=R;else break;k++}return{colIndexes:S,columns:A,lastIndex:k-1}}function h(p,m){for(var v=[],b=0;b<m.columns.length;b++){var x=d(p,m,{start:b});x.columns.length&&(v.push(x),b=x.lastIndex)}return v}l.calculateAllColumnsCanFitInPage=h},324:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var u=c(420);function d(S,A){h(S,A);var C=[],N=0;A.columns.forEach(function(R){var U=R.getMaxCustomCellWidth(A);U?R.width=U:(R.width=R.wrappedWidth,C.push(R)),N+=R.width});var k=A.getWidth(S.pageSize().width)-N;k&&(k=p(C,k,function(R){return Math.max(R.minReadableWidth,R.minWidth)})),k&&(k=p(C,k,function(R){return R.minWidth})),k=Math.abs(k),!A.settings.horizontalPageBreak&&k>.1/S.scaleFactor()&&(k=k<1?k:Math.round(k),console.warn("Of the table content, ".concat(k," units width could not fit page"))),v(A),b(A,S),m(A)}l.calculateWidths=d;function h(S,A){var C=S.scaleFactor(),N=A.settings.horizontalPageBreak,k=(0,u.getPageAvailableWidth)(S,A);A.allRows().forEach(function(R){for(var U=0,j=A.columns;U<j.length;U++){var D=j[U],O=R.cells[D.index];if(O){var Z=A.hooks.didParseCell;A.callCellHooks(S,Z,O,R,D,null);var J=O.padding("horizontal");O.contentWidth=(0,u.getStringWidth)(O.text,O.styles,S)+J;var le=(0,u.getStringWidth)(O.text.join(" ").split(/[^\S\u00A0]+/),O.styles,S);if(O.minReadableWidth=le+O.padding("horizontal"),typeof O.styles.cellWidth=="number")O.minWidth=O.styles.cellWidth,O.wrappedWidth=O.styles.cellWidth;else if(O.styles.cellWidth==="wrap"||N===!0)O.contentWidth>k?(O.minWidth=k,O.wrappedWidth=k):(O.minWidth=O.contentWidth,O.wrappedWidth=O.contentWidth);else{var H=10/C;O.minWidth=O.styles.minCellWidth||H,O.wrappedWidth=O.contentWidth,O.minWidth>O.wrappedWidth&&(O.wrappedWidth=O.minWidth)}}}}),A.allRows().forEach(function(R){for(var U=0,j=A.columns;U<j.length;U++){var D=j[U],O=R.cells[D.index];if(O&&O.colSpan===1)D.wrappedWidth=Math.max(D.wrappedWidth,O.wrappedWidth),D.minWidth=Math.max(D.minWidth,O.minWidth),D.minReadableWidth=Math.max(D.minReadableWidth,O.minReadableWidth);else{var Z=A.styles.columnStyles[D.dataKey]||A.styles.columnStyles[D.index]||{},J=Z.cellWidth||Z.minCellWidth;J&&typeof J=="number"&&(D.minWidth=J,D.wrappedWidth=J)}O&&(O.colSpan>1&&!D.minWidth&&(D.minWidth=O.minWidth),O.colSpan>1&&!D.wrappedWidth&&(D.wrappedWidth=O.minWidth))}})}function p(S,A,C){for(var N=A,k=S.reduce(function(H,V){return H+V.wrappedWidth},0),R=0;R<S.length;R++){var U=S[R],j=U.wrappedWidth/k,D=N*j,O=U.width+D,Z=C(U),J=O<Z?Z:O;A-=J-U.width,U.width=J}if(A=Math.round(A*1e10)/1e10,A){var le=S.filter(function(H){return A<0?H.width>C(H):!0});le.length&&(A=p(le,A,C))}return A}l.resizeColumns=p;function m(S){for(var A={},C=1,N=S.allRows(),k=0;k<N.length;k++)for(var R=N[k],U=0,j=S.columns;U<j.length;U++){var D=j[U],O=A[D.index];if(C>1)C--,delete R.cells[D.index];else if(O)O.cell.height+=R.height,C=O.cell.colSpan,delete R.cells[D.index],O.left--,O.left<=1&&delete A[D.index];else{var Z=R.cells[D.index];if(!Z)continue;if(Z.height=R.height,Z.rowSpan>1){var J=N.length-k,le=Z.rowSpan>J?J:Z.rowSpan;A[D.index]={cell:Z,left:le,row:R}}}}}function v(S){for(var A=S.allRows(),C=0;C<A.length;C++)for(var N=A[C],k=null,R=0,U=0,j=0;j<S.columns.length;j++){var D=S.columns[j];if(U-=1,U>1&&S.columns[j+1])R+=D.width,delete N.cells[D.index];else if(k){var O=k;delete N.cells[D.index],k=null,O.width=D.width+R}else{var O=N.cells[D.index];if(!O)continue;if(U=O.colSpan,R=0,O.colSpan>1){k=O,R+=D.width;continue}O.width=D.width+R}}}function b(S,A){for(var C={count:0,height:0},N=0,k=S.allRows();N<k.length;N++){for(var R=k[N],U=0,j=S.columns;U<j.length;U++){var D=j[U],O=R.cells[D.index];if(O){A.applyStyles(O.styles,!0);var Z=O.width-O.padding("horizontal");if(O.styles.overflow==="linebreak")O.text=A.splitTextToSize(O.text,Z+1/A.scaleFactor(),{fontSize:O.styles.fontSize});else if(O.styles.overflow==="ellipsize")O.text=x(O.text,Z,O.styles,A,"...");else if(O.styles.overflow==="hidden")O.text=x(O.text,Z,O.styles,A,"");else if(typeof O.styles.overflow=="function"){var J=O.styles.overflow(O.text,Z);typeof J=="string"?O.text=[J]:O.text=J}O.contentHeight=O.getContentHeight(A.scaleFactor(),A.getLineHeightFactor());var le=O.contentHeight/O.rowSpan;O.rowSpan>1&&C.count*C.height<le*O.rowSpan?C={height:le,count:O.rowSpan}:C&&C.count>0&&C.height>le&&(le=C.height),le>R.height&&(R.height=le)}}C.count--}}function x(S,A,C,N,k){return S.map(function(R){return w(R,A,C,N,k)})}l.ellipsize=x;function w(S,A,C,N,k){var R=1e4*N.scaleFactor();if(A=Math.ceil(A*R)/R,A>=(0,u.getStringWidth)(S,C,N))return S;for(;A<(0,u.getStringWidth)(S+k,C,N)&&!(S.length<=1);)S=S.substring(0,S.length-1);return S.trim()+k}},964:function(o){if(typeof t>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}o.exports=t}},r={};function s(o){var l=r[o];if(l!==void 0)return l.exports;var c=r[o]={exports:{}};return i[o].call(c.exports,c,c.exports,s),c.exports}var a={};return function(){var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=o.Column=o.Row=o.Table=o.CellHookData=o.__drawTable=o.__createTable=o.applyPlugin=void 0;var l=s(340),c=s(776),u=s(664),d=s(972),h=s(260);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return h.Table}});var p=s(172);Object.defineProperty(o,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var m=s(260);Object.defineProperty(o,"Cell",{enumerable:!0,get:function(){return m.Cell}}),Object.defineProperty(o,"Column",{enumerable:!0,get:function(){return m.Column}}),Object.defineProperty(o,"Row",{enumerable:!0,get:function(){return m.Row}});function v(A){(0,l.default)(A)}o.applyPlugin=v;function b(A,C){var N=(0,c.parseInput)(A,C),k=(0,d.createTable)(A,N);(0,u.drawTable)(A,k)}function x(A,C){var N=(0,c.parseInput)(A,C);return(0,d.createTable)(A,N)}o.__createTable=x;function w(A,C){(0,u.drawTable)(A,C)}o.__drawTable=w;try{var S=s(964);S.jsPDF&&(S=S.jsPDF),v(S)}catch{}o.default=b}(),a}()})})(ZO);var vJ=ZO.exports;const xv=I0(vJ);lg.register(...lQ);function xJ({tasks:n}){const[e,t]=B.useState(new Date),[i,r]=B.useState([]),[s,a]=B.useState(null);console.log("calendar tasks: ",n);const o=new Date,l=()=>{t(S=>new Date(S.getFullYear(),S.getMonth()-1,1))},c=()=>{t(S=>new Date(S.getFullYear(),S.getMonth()+1,1))},u=()=>{t(new Date)},d=e.toLocaleString("default",{month:"long",year:"numeric"}),h=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;B.useEffect(()=>{p(e)},[e,n,s]);const p=S=>{const A=S.getFullYear(),C=S.getMonth(),N=new Date(A,C,1),k=new Date(A,C+1,0),R=N.getDay()||7,U=k.getDate(),j=new Date(A,C-1),D=new Date(j.getFullYear(),j.getMonth()+1,0).getDate(),O=42,Z=[];for(let le=R-1;le>0;le--){const H=new Date(A,C-1,D-le+1);Z.push({date:b(H),events:m(b(H)),isCurrentMonth:!1,isToday:v(H,o),isSelected:s===b(H)})}for(let le=1;le<=U;le++){const H=new Date(A,C,le);Z.push({date:b(H),events:m(b(H)),isCurrentMonth:!0,isToday:v(H,o),isSelected:s===b(H)})}let J=1;for(;Z.length<O;){const le=new Date(A,C+1,J++);Z.push({date:b(le),events:m(b(le)),isCurrentMonth:!1,isToday:v(le,o),isSelected:s===b(le)})}r(Z)},m=S=>n.filter(A=>A.Date.startsWith(S)).map(A=>({id:A._id,datetime:A.Date})),v=(S,A)=>S.getFullYear()===A.getFullYear()&&S.getMonth()===A.getMonth()&&S.getDate()===A.getDate(),b=S=>`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}-${String(S.getDate()).padStart(2,"0")}`,x=s?n.filter(S=>S.Date.startsWith(s)):[],w=S=>{window.open(S,"_blank")};return _.jsxs("div",{className:"d-lg-flex h-100 flex-column",children:[s&&_.jsxs("div",{className:"mt-4 p-3 bg-white rounded shadow-sm",children:[_.jsxs("h3",{className:"h6 fw-semibold text-dark mb-3",children:["Report for ",s]}),x.map(S=>(new Date(S.Date),_.jsxs("div",{className:"d-flex flex-md-row flex-column justify-content-between align-items-center border p-2 rounded mb-2 bg-light",children:[_.jsxs("span",{className:"fw-medium",children:["Date: ",S.Date]}),_.jsxs("span",{className:"fw-medium",children:["Total:$",S.Total]}),S.Report?_.jsx("button",{className:"btn text-secondary",onClick:()=>w(S.Report),children:"Open Report"}):"No Report"]},S._id)))]}),_.jsxs("header",{className:"d-flex align-items-center justify-content-between border-bottom px-4 py-3",children:[_.jsx("h1",{className:"h5 fw-semibold text-dark mb-0",children:_.jsx("time",{dateTime:h,children:d})}),_.jsx("div",{className:"d-flex align-items-center",children:_.jsxs("div",{className:"d-flex align-items-center bg-white shadow-sm rounded border",children:[_.jsx("button",{type:"button",onClick:l,className:"btn btn-light border-end rounded-start",children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("button",{type:"button",onClick:u,className:"btn btn-light d-none d-md-block border-start border-end",children:"Today"}),_.jsx("button",{type:"button",onClick:c,className:"btn btn-light border-start rounded-end",children:_.jsx("i",{className:"bi bi-chevron-right"})})]})})]}),_.jsxs("div",{className:"shadow border",children:[_.jsx("div",{className:"text-center border-bottom fw-semibold text-muted d-flex flex-row w-100",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(S=>_.jsx("div",{className:"py-2 border-end w-100",children:S},S))}),_.jsx("div",{className:"d-none d-md-flex flex-wrap",children:i.map(S=>_.jsxs("div",{onClick:()=>a(S.date),className:`position-relative p-2 border ${S.isCurrentMonth,S.isSelected&&"bg-dark text-white"}`,style:{cursor:"pointer",minHeight:"80px",border:S.isSelected?"2px solid #0d6efd":"",borderRadius:S.isSelected?"0.25rem":"",backgroundColor:S.isSelected?"#0d6efd":"",color:S.isSelected?"white":"",width:"14.28%"},children:[_.jsx("time",{dateTime:S.date,className:`d-flex justify-content-center align-items-center rounded-circle ${S.isToday?"bg-primary text-white fw-bold":""}`,style:{width:"24px",height:"24px",marginBottom:"5px"},children:parseInt(S.date.split("-")[2])}),S.events.length>0&&_.jsxs("ul",{className:"list-unstyled mt-2 mb-0",children:[S.events.slice(0,2).map(A=>_.jsx("li",{className:"text-truncate small fw-medium text-dark",children:A.Date},A._id)),S.events.length>2&&_.jsxs("li",{className:"text-muted small",children:["+ ",S.events.length-2," more"]})]}),_.jsx("div",{className:"d-flex flex-wrap-reverse mt-auto",children:S.events.map(A=>_.jsx("span",{className:"me-1 mb-1 rounded-circle bg-secondary",style:{width:"6px",height:"6px"}},A.id))})]},S.date))}),_.jsx("div",{className:"d-lg-none",style:{display:"grid",gridTemplateColumns:"repeat(7, minmax(0, 1fr))",width:"80vw",gap:"4px",padding:"0 8px"},children:i.map(S=>_.jsxs("button",{onClick:()=>a(S.date),type:"button",className:`btn p-2 d-flex flex-column align-items-start ${S.isSelected?"text-white bg-dark":S.isToday?"text-primary fw-semibold":S.isCurrentMonth?"text-dark":"text-muted"}`,style:{cursor:"pointer",minHeight:"80px",border:S.isSelected?"2px solid #0d6efd":"",borderRadius:S.isSelected?"0.25rem":"",backgroundColor:S.isSelected?"#0d6efd":"",color:S.isSelected?"white":"",height:"90px",width:"100%"},children:[_.jsx("time",{className:`${S.isSelected?"bg-dark rounded-circle d-flex justify-content-center align-items-center text-white":""}`,children:parseInt(S.date.split("-")[2])}),_.jsxs("span",{className:"visually-hidden",children:[S.events.length," events"]}),S.events.length>0&&_.jsx("div",{className:"d-flex flex-wrap-reverse mt-auto",children:S.events.map(A=>_.jsx("span",{className:"me-1 mb-1 rounded-circle bg-secondary",style:{width:"6px",height:"6px"}},A.id))})]},S.date))})]})]})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var eM;function _t(){return eM.apply(null,arguments)}function bJ(n){eM=n}function _l(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function rh(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function ii(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function RE(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if(ii(n,e))return!1;return!0}function Pa(n){return n===void 0}function vu(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function z0(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function tM(n,e){var t=[],i,r=n.length;for(i=0;i<r;++i)t.push(e(n[i],i));return t}function Sd(n,e){for(var t in e)ii(e,t)&&(n[t]=e[t]);return ii(e,"toString")&&(n.toString=e.toString),ii(e,"valueOf")&&(n.valueOf=e.valueOf),n}function gc(n,e,t,i){return EM(n,e,t,i,!0).utc()}function SJ(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function En(n){return n._pf==null&&(n._pf=SJ()),n._pf}var k_;Array.prototype.some?k_=Array.prototype.some:k_=function(n){var e=Object(this),t=e.length>>>0,i;for(i=0;i<t;i++)if(i in e&&n.call(this,e[i],i,e))return!0;return!1};function PE(n){var e=null,t=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(e=En(n),t=k_.call(e.parsedDateParts,function(r){return r!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),n._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function ab(n){var e=gc(NaN);return n!=null?Sd(En(e),n):En(e).userInvalidated=!0,e}var mk=_t.momentProperties=[],gS=!1;function NE(n,e){var t,i,r,s=mk.length;if(Pa(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),Pa(e._i)||(n._i=e._i),Pa(e._f)||(n._f=e._f),Pa(e._l)||(n._l=e._l),Pa(e._strict)||(n._strict=e._strict),Pa(e._tzm)||(n._tzm=e._tzm),Pa(e._isUTC)||(n._isUTC=e._isUTC),Pa(e._offset)||(n._offset=e._offset),Pa(e._pf)||(n._pf=En(e)),Pa(e._locale)||(n._locale=e._locale),s>0)for(t=0;t<s;t++)i=mk[t],r=e[i],Pa(r)||(n[i]=r);return n}function G0(n){NE(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),gS===!1&&(gS=!0,_t.updateOffset(this),gS=!1)}function El(n){return n instanceof G0||n!=null&&n._isAMomentObject!=null}function nM(n){_t.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function Ho(n,e){var t=!0;return Sd(function(){if(_t.deprecationHandler!=null&&_t.deprecationHandler(null,n),t){var i=[],r,s,a,o=arguments.length;for(s=0;s<o;s++){if(r="",typeof arguments[s]=="object"){r+=`
[`+s+"] ";for(a in arguments[0])ii(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[s];i.push(r)}nM(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var yk={};function iM(n,e){_t.deprecationHandler!=null&&_t.deprecationHandler(n,e),yk[n]||(nM(e),yk[n]=!0)}_t.suppressDeprecationWarnings=!1;_t.deprecationHandler=null;function mc(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function wJ(n){var e,t;for(t in n)ii(n,t)&&(e=n[t],mc(e)?this[t]=e:this["_"+t]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function R_(n,e){var t=Sd({},n),i;for(i in e)ii(e,i)&&(rh(n[i])&&rh(e[i])?(t[i]={},Sd(t[i],n[i]),Sd(t[i],e[i])):e[i]!=null?t[i]=e[i]:delete t[i]);for(i in n)ii(n,i)&&!ii(e,i)&&rh(n[i])&&(t[i]=Sd({},t[i]));return t}function DE(n){n!=null&&this.set(n)}var P_;Object.keys?P_=Object.keys:P_=function(n){var e,t=[];for(e in n)ii(n,e)&&t.push(e);return t};var _J={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function EJ(n,e,t){var i=this._calendar[n]||this._calendar.sameElse;return mc(i)?i.call(e,t):i}function fc(n,e,t){var i=""+Math.abs(n),r=e-i.length,s=n>=0;return(s?t?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var OE=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,bv=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,mS={},Dp={};function zt(n,e,t,i){var r=i;typeof i=="string"&&(r=function(){return this[i]()}),n&&(Dp[n]=r),e&&(Dp[e[0]]=function(){return fc(r.apply(this,arguments),e[1],e[2])}),t&&(Dp[t]=function(){return this.localeData().ordinal(r.apply(this,arguments),n)})}function TJ(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function AJ(n){var e=n.match(OE),t,i;for(t=0,i=e.length;t<i;t++)Dp[e[t]]?e[t]=Dp[e[t]]:e[t]=TJ(e[t]);return function(r){var s="",a;for(a=0;a<i;a++)s+=mc(e[a])?e[a].call(r,n):e[a];return s}}function r1(n,e){return n.isValid()?(e=rM(e,n.localeData()),mS[e]=mS[e]||AJ(e),mS[e](n)):n.localeData().invalidDate()}function rM(n,e){var t=5;function i(r){return e.longDateFormat(r)||r}for(bv.lastIndex=0;t>=0&&bv.test(n);)n=n.replace(bv,i),bv.lastIndex=0,t-=1;return n}var LJ={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function CJ(n){var e=this._longDateFormat[n],t=this._longDateFormat[n.toUpperCase()];return e||!t?e:(this._longDateFormat[n]=t.match(OE).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var IJ="Invalid date";function kJ(){return this._invalidDate}var RJ="%d",PJ=/\d{1,2}/;function NJ(n){return this._ordinal.replace("%d",n)}var DJ={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function OJ(n,e,t,i){var r=this._relativeTime[t];return mc(r)?r(n,e,t,i):r.replace(/%d/i,n)}function MJ(n,e){var t=this._relativeTime[n>0?"future":"past"];return mc(t)?t(e):t.replace(/%s/i,e)}var vk={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Wo(n){return typeof n=="string"?vk[n]||vk[n.toLowerCase()]:void 0}function ME(n){var e={},t,i;for(i in n)ii(n,i)&&(t=Wo(i),t&&(e[t]=n[i]));return e}var FJ={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function jJ(n){var e=[],t;for(t in n)ii(n,t)&&e.push({unit:t,priority:FJ[t]});return e.sort(function(i,r){return i.priority-r.priority}),e}var sM=/\d/,yo=/\d\d/,aM=/\d{3}/,FE=/\d{4}/,ob=/[+-]?\d{6}/,qi=/\d\d?/,oM=/\d\d\d\d?/,lM=/\d\d\d\d\d\d?/,lb=/\d{1,3}/,jE=/\d{1,4}/,cb=/[+-]?\d{1,6}/,cg=/\d+/,ub=/[+-]?\d+/,BJ=/Z|[+-]\d\d:?\d\d/gi,db=/Z|[+-]\d\d(?::?\d\d)?/gi,UJ=/[+-]?\d+(\.\d{1,3})?/,V0=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ug=/^[1-9]\d?/,BE=/^([1-9]\d|\d)/,nx;nx={};function Tt(n,e,t){nx[n]=mc(e)?e:function(i,r){return i&&t?t:e}}function $J(n,e){return ii(nx,n)?nx[n](e._strict,e._locale):new RegExp(HJ(n))}function HJ(n){return uu(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,r,s){return t||i||r||s}))}function uu(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Oo(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function Bn(n){var e=+n,t=0;return e!==0&&isFinite(e)&&(t=Oo(e)),t}var N_={};function Ci(n,e){var t,i=e,r;for(typeof n=="string"&&(n=[n]),vu(e)&&(i=function(s,a){a[e]=Bn(s)}),r=n.length,t=0;t<r;t++)N_[n[t]]=i}function Y0(n,e){Ci(n,function(t,i,r,s){r._w=r._w||{},e(t,r._w,r,s)})}function WJ(n,e,t){e!=null&&ii(N_,n)&&N_[n](e,t._a,t,n)}function fb(n){return n%4===0&&n%100!==0||n%400===0}var ta=0,su=1,tc=2,us=3,yl=4,au=5,Yf=6,zJ=7,GJ=8;zt("Y",0,0,function(){var n=this.year();return n<=9999?fc(n,4):"+"+n});zt(0,["YY",2],0,function(){return this.year()%100});zt(0,["YYYY",4],0,"year");zt(0,["YYYYY",5],0,"year");zt(0,["YYYYYY",6,!0],0,"year");Tt("Y",ub);Tt("YY",qi,yo);Tt("YYYY",jE,FE);Tt("YYYYY",cb,ob);Tt("YYYYYY",cb,ob);Ci(["YYYYY","YYYYYY"],ta);Ci("YYYY",function(n,e){e[ta]=n.length===2?_t.parseTwoDigitYear(n):Bn(n)});Ci("YY",function(n,e){e[ta]=_t.parseTwoDigitYear(n)});Ci("Y",function(n,e){e[ta]=parseInt(n,10)});function Dm(n){return fb(n)?366:365}_t.parseTwoDigitYear=function(n){return Bn(n)+(Bn(n)>68?1900:2e3)};var cM=dg("FullYear",!0);function VJ(){return fb(this.year())}function dg(n,e){return function(t){return t!=null?(uM(this,n,t),_t.updateOffset(this,e),this):m0(this,n)}}function m0(n,e){if(!n.isValid())return NaN;var t=n._d,i=n._isUTC;switch(e){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function uM(n,e,t){var i,r,s,a,o;if(!(!n.isValid()||isNaN(t))){switch(i=n._d,r=n._isUTC,e){case"Milliseconds":return void(r?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(r?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(r?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(r?i.setUTCHours(t):i.setHours(t));case"Date":return void(r?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}s=t,a=n.month(),o=n.date(),o=o===29&&a===1&&!fb(s)?28:o,r?i.setUTCFullYear(s,a,o):i.setFullYear(s,a,o)}}function YJ(n){return n=Wo(n),mc(this[n])?this[n]():this}function qJ(n,e){if(typeof n=="object"){n=ME(n);var t=jJ(n),i,r=t.length;for(i=0;i<r;i++)this[t[i].unit](n[t[i].unit])}else if(n=Wo(n),mc(this[n]))return this[n](e);return this}function KJ(n,e){return(n%e+e)%e}var Fr;Array.prototype.indexOf?Fr=Array.prototype.indexOf:Fr=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function UE(n,e){if(isNaN(n)||isNaN(e))return NaN;var t=KJ(e,12);return n+=(e-t)/12,t===1?fb(n)?29:28:31-t%7%2}zt("M",["MM",2],"Mo",function(){return this.month()+1});zt("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});zt("MMMM",0,0,function(n){return this.localeData().months(this,n)});Tt("M",qi,ug);Tt("MM",qi,yo);Tt("MMM",function(n,e){return e.monthsShortRegex(n)});Tt("MMMM",function(n,e){return e.monthsRegex(n)});Ci(["M","MM"],function(n,e){e[su]=Bn(n)-1});Ci(["MMM","MMMM"],function(n,e,t,i){var r=t._locale.monthsParse(n,i,t._strict);r!=null?e[su]=r:En(t).invalidMonth=n});var XJ="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),dM="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),fM=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,QJ=V0,JJ=V0;function ZJ(n,e){return n?_l(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||fM).test(e)?"format":"standalone"][n.month()]:_l(this._months)?this._months:this._months.standalone}function eZ(n,e){return n?_l(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[fM.test(e)?"format":"standalone"][n.month()]:_l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function tZ(n,e,t){var i,r,s,a=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=gc([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return t?e==="MMM"?(r=Fr.call(this._shortMonthsParse,a),r!==-1?r:null):(r=Fr.call(this._longMonthsParse,a),r!==-1?r:null):e==="MMM"?(r=Fr.call(this._shortMonthsParse,a),r!==-1?r:(r=Fr.call(this._longMonthsParse,a),r!==-1?r:null)):(r=Fr.call(this._longMonthsParse,a),r!==-1?r:(r=Fr.call(this._shortMonthsParse,a),r!==-1?r:null))}function nZ(n,e,t){var i,r,s;if(this._monthsParseExact)return tZ.call(this,n,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=gc([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(t&&e==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!t&&this._monthsParse[i].test(n))return i}}function hM(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=Bn(e);else if(e=n.localeData().monthsParse(e),!vu(e))return n}var t=e,i=n.date();return i=i<29?i:Math.min(i,UE(n.year(),t)),n._isUTC?n._d.setUTCMonth(t,i):n._d.setMonth(t,i),n}function pM(n){return n!=null?(hM(this,n),_t.updateOffset(this,!0),this):m0(this,"Month")}function iZ(){return UE(this.year(),this.month())}function rZ(n){return this._monthsParseExact?(ii(this,"_monthsRegex")||gM.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(ii(this,"_monthsShortRegex")||(this._monthsShortRegex=QJ),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function sZ(n){return this._monthsParseExact?(ii(this,"_monthsRegex")||gM.call(this),n?this._monthsStrictRegex:this._monthsRegex):(ii(this,"_monthsRegex")||(this._monthsRegex=JJ),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function gM(){function n(l,c){return c.length-l.length}var e=[],t=[],i=[],r,s,a,o;for(r=0;r<12;r++)s=gc([2e3,r]),a=uu(this.monthsShort(s,"")),o=uu(this.months(s,"")),e.push(a),t.push(o),i.push(o),i.push(a);e.sort(n),t.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function aZ(n,e,t,i,r,s,a){var o;return n<100&&n>=0?(o=new Date(n+400,e,t,i,r,s,a),isFinite(o.getFullYear())&&o.setFullYear(n)):o=new Date(n,e,t,i,r,s,a),o}function y0(n){var e,t;return n<100&&n>=0?(t=Array.prototype.slice.call(arguments),t[0]=n+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function ix(n,e,t){var i=7+e-t,r=(7+y0(n,0,i).getUTCDay()-e)%7;return-r+i-1}function mM(n,e,t,i,r){var s=(7+t-i)%7,a=ix(n,i,r),o=1+7*(e-1)+s+a,l,c;return o<=0?(l=n-1,c=Dm(l)+o):o>Dm(n)?(l=n+1,c=o-Dm(n)):(l=n,c=o),{year:l,dayOfYear:c}}function v0(n,e,t){var i=ix(n.year(),e,t),r=Math.floor((n.dayOfYear()-i-1)/7)+1,s,a;return r<1?(a=n.year()-1,s=r+du(a,e,t)):r>du(n.year(),e,t)?(s=r-du(n.year(),e,t),a=n.year()+1):(a=n.year(),s=r),{week:s,year:a}}function du(n,e,t){var i=ix(n,e,t),r=ix(n+1,e,t);return(Dm(n)-i+r)/7}zt("w",["ww",2],"wo","week");zt("W",["WW",2],"Wo","isoWeek");Tt("w",qi,ug);Tt("ww",qi,yo);Tt("W",qi,ug);Tt("WW",qi,yo);Y0(["w","ww","W","WW"],function(n,e,t,i){e[i.substr(0,1)]=Bn(n)});function oZ(n){return v0(n,this._week.dow,this._week.doy).week}var lZ={dow:0,doy:6};function cZ(){return this._week.dow}function uZ(){return this._week.doy}function dZ(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function fZ(n){var e=v0(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}zt("d",0,"do","day");zt("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});zt("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});zt("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});zt("e",0,0,"weekday");zt("E",0,0,"isoWeekday");Tt("d",qi);Tt("e",qi);Tt("E",qi);Tt("dd",function(n,e){return e.weekdaysMinRegex(n)});Tt("ddd",function(n,e){return e.weekdaysShortRegex(n)});Tt("dddd",function(n,e){return e.weekdaysRegex(n)});Y0(["dd","ddd","dddd"],function(n,e,t,i){var r=t._locale.weekdaysParse(n,i,t._strict);r!=null?e.d=r:En(t).invalidWeekday=n});Y0(["d","e","E"],function(n,e,t,i){e[i]=Bn(n)});function hZ(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function pZ(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function $E(n,e){return n.slice(e,7).concat(n.slice(0,e))}var gZ="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),yM="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),mZ="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),yZ=V0,vZ=V0,xZ=V0;function bZ(n,e){var t=_l(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?$E(t,this._week.dow):n?t[n.day()]:t}function SZ(n){return n===!0?$E(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function wZ(n){return n===!0?$E(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function _Z(n,e,t){var i,r,s,a=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=gc([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return t?e==="dddd"?(r=Fr.call(this._weekdaysParse,a),r!==-1?r:null):e==="ddd"?(r=Fr.call(this._shortWeekdaysParse,a),r!==-1?r:null):(r=Fr.call(this._minWeekdaysParse,a),r!==-1?r:null):e==="dddd"?(r=Fr.call(this._weekdaysParse,a),r!==-1||(r=Fr.call(this._shortWeekdaysParse,a),r!==-1)?r:(r=Fr.call(this._minWeekdaysParse,a),r!==-1?r:null)):e==="ddd"?(r=Fr.call(this._shortWeekdaysParse,a),r!==-1||(r=Fr.call(this._weekdaysParse,a),r!==-1)?r:(r=Fr.call(this._minWeekdaysParse,a),r!==-1?r:null)):(r=Fr.call(this._minWeekdaysParse,a),r!==-1||(r=Fr.call(this._weekdaysParse,a),r!==-1)?r:(r=Fr.call(this._shortWeekdaysParse,a),r!==-1?r:null))}function EZ(n,e,t){var i,r,s;if(this._weekdaysParseExact)return _Z.call(this,n,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=gc([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(t&&e==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(t&&e==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!t&&this._weekdaysParse[i].test(n))return i}}function TZ(n){if(!this.isValid())return n!=null?this:NaN;var e=m0(this,"Day");return n!=null?(n=hZ(n,this.localeData()),this.add(n-e,"d")):e}function AZ(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function LZ(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=pZ(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function CZ(n){return this._weekdaysParseExact?(ii(this,"_weekdaysRegex")||HE.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(ii(this,"_weekdaysRegex")||(this._weekdaysRegex=yZ),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function IZ(n){return this._weekdaysParseExact?(ii(this,"_weekdaysRegex")||HE.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ii(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=vZ),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function kZ(n){return this._weekdaysParseExact?(ii(this,"_weekdaysRegex")||HE.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ii(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xZ),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function HE(){function n(u,d){return d.length-u.length}var e=[],t=[],i=[],r=[],s,a,o,l,c;for(s=0;s<7;s++)a=gc([2e3,1]).day(s),o=uu(this.weekdaysMin(a,"")),l=uu(this.weekdaysShort(a,"")),c=uu(this.weekdays(a,"")),e.push(o),t.push(l),i.push(c),r.push(o),r.push(l),r.push(c);e.sort(n),t.sort(n),i.sort(n),r.sort(n),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function WE(){return this.hours()%12||12}function RZ(){return this.hours()||24}zt("H",["HH",2],0,"hour");zt("h",["hh",2],0,WE);zt("k",["kk",2],0,RZ);zt("hmm",0,0,function(){return""+WE.apply(this)+fc(this.minutes(),2)});zt("hmmss",0,0,function(){return""+WE.apply(this)+fc(this.minutes(),2)+fc(this.seconds(),2)});zt("Hmm",0,0,function(){return""+this.hours()+fc(this.minutes(),2)});zt("Hmmss",0,0,function(){return""+this.hours()+fc(this.minutes(),2)+fc(this.seconds(),2)});function vM(n,e){zt(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}vM("a",!0);vM("A",!1);function xM(n,e){return e._meridiemParse}Tt("a",xM);Tt("A",xM);Tt("H",qi,BE);Tt("h",qi,ug);Tt("k",qi,ug);Tt("HH",qi,yo);Tt("hh",qi,yo);Tt("kk",qi,yo);Tt("hmm",oM);Tt("hmmss",lM);Tt("Hmm",oM);Tt("Hmmss",lM);Ci(["H","HH"],us);Ci(["k","kk"],function(n,e,t){var i=Bn(n);e[us]=i===24?0:i});Ci(["a","A"],function(n,e,t){t._isPm=t._locale.isPM(n),t._meridiem=n});Ci(["h","hh"],function(n,e,t){e[us]=Bn(n),En(t).bigHour=!0});Ci("hmm",function(n,e,t){var i=n.length-2;e[us]=Bn(n.substr(0,i)),e[yl]=Bn(n.substr(i)),En(t).bigHour=!0});Ci("hmmss",function(n,e,t){var i=n.length-4,r=n.length-2;e[us]=Bn(n.substr(0,i)),e[yl]=Bn(n.substr(i,2)),e[au]=Bn(n.substr(r)),En(t).bigHour=!0});Ci("Hmm",function(n,e,t){var i=n.length-2;e[us]=Bn(n.substr(0,i)),e[yl]=Bn(n.substr(i))});Ci("Hmmss",function(n,e,t){var i=n.length-4,r=n.length-2;e[us]=Bn(n.substr(0,i)),e[yl]=Bn(n.substr(i,2)),e[au]=Bn(n.substr(r))});function PZ(n){return(n+"").toLowerCase().charAt(0)==="p"}var NZ=/[ap]\.?m?\.?/i,DZ=dg("Hours",!0);function OZ(n,e,t){return n>11?t?"pm":"PM":t?"am":"AM"}var bM={calendar:_J,longDateFormat:LJ,invalidDate:IJ,ordinal:RJ,dayOfMonthOrdinalParse:PJ,relativeTime:DJ,months:XJ,monthsShort:dM,week:lZ,weekdays:gZ,weekdaysMin:mZ,weekdaysShort:yM,meridiemParse:NZ},nr={},qg={},x0;function MZ(n,e){var t,i=Math.min(n.length,e.length);for(t=0;t<i;t+=1)if(n[t]!==e[t])return t;return i}function xk(n){return n&&n.toLowerCase().replace("_","-")}function FZ(n){for(var e=0,t,i,r,s;e<n.length;){for(s=xk(n[e]).split("-"),t=s.length,i=xk(n[e+1]),i=i?i.split("-"):null;t>0;){if(r=hb(s.slice(0,t).join("-")),r)return r;if(i&&i.length>=t&&MZ(s,i)>=t-1)break;t--}e++}return x0}function jZ(n){return!!(n&&n.match("^[^/\\\\]*$"))}function hb(n){var e=null,t;if(nr[n]===void 0&&typeof module<"u"&&module&&module.exports&&jZ(n))try{e=x0._abbr,t=require,t("./locale/"+n),Dd(e)}catch{nr[n]=null}return nr[n]}function Dd(n,e){var t;return n&&(Pa(e)?t=wu(n):t=zE(n,e),t?x0=t:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),x0._abbr}function zE(n,e){if(e!==null){var t,i=bM;if(e.abbr=n,nr[n]!=null)iM("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=nr[n]._config;else if(e.parentLocale!=null)if(nr[e.parentLocale]!=null)i=nr[e.parentLocale]._config;else if(t=hb(e.parentLocale),t!=null)i=t._config;else return qg[e.parentLocale]||(qg[e.parentLocale]=[]),qg[e.parentLocale].push({name:n,config:e}),null;return nr[n]=new DE(R_(i,e)),qg[n]&&qg[n].forEach(function(r){zE(r.name,r.config)}),Dd(n),nr[n]}else return delete nr[n],null}function BZ(n,e){if(e!=null){var t,i,r=bM;nr[n]!=null&&nr[n].parentLocale!=null?nr[n].set(R_(nr[n]._config,e)):(i=hb(n),i!=null&&(r=i._config),e=R_(r,e),i==null&&(e.abbr=n),t=new DE(e),t.parentLocale=nr[n],nr[n]=t),Dd(n)}else nr[n]!=null&&(nr[n].parentLocale!=null?(nr[n]=nr[n].parentLocale,n===Dd()&&Dd(n)):nr[n]!=null&&delete nr[n]);return nr[n]}function wu(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return x0;if(!_l(n)){if(e=hb(n),e)return e;n=[n]}return FZ(n)}function UZ(){return P_(nr)}function GE(n){var e,t=n._a;return t&&En(n).overflow===-2&&(e=t[su]<0||t[su]>11?su:t[tc]<1||t[tc]>UE(t[ta],t[su])?tc:t[us]<0||t[us]>24||t[us]===24&&(t[yl]!==0||t[au]!==0||t[Yf]!==0)?us:t[yl]<0||t[yl]>59?yl:t[au]<0||t[au]>59?au:t[Yf]<0||t[Yf]>999?Yf:-1,En(n)._overflowDayOfYear&&(e<ta||e>tc)&&(e=tc),En(n)._overflowWeeks&&e===-1&&(e=zJ),En(n)._overflowWeekday&&e===-1&&(e=GJ),En(n).overflow=e),n}var $Z=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,HZ=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,WZ=/Z|[+-]\d\d(?::?\d\d)?/,Sv=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],yS=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],zZ=/^\/?Date\((-?\d+)/i,GZ=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,VZ={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function SM(n){var e,t,i=n._i,r=$Z.exec(i)||HZ.exec(i),s,a,o,l,c=Sv.length,u=yS.length;if(r){for(En(n).iso=!0,e=0,t=c;e<t;e++)if(Sv[e][1].exec(r[1])){a=Sv[e][0],s=Sv[e][2]!==!1;break}if(a==null){n._isValid=!1;return}if(r[3]){for(e=0,t=u;e<t;e++)if(yS[e][1].exec(r[3])){o=(r[2]||" ")+yS[e][0];break}if(o==null){n._isValid=!1;return}}if(!s&&o!=null){n._isValid=!1;return}if(r[4])if(WZ.exec(r[4]))l="Z";else{n._isValid=!1;return}n._f=a+(o||"")+(l||""),YE(n)}else n._isValid=!1}function YZ(n,e,t,i,r,s){var a=[qZ(n),dM.indexOf(e),parseInt(t,10),parseInt(i,10),parseInt(r,10)];return s&&a.push(parseInt(s,10)),a}function qZ(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function KZ(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function XZ(n,e,t){if(n){var i=yM.indexOf(n),r=new Date(e[0],e[1],e[2]).getDay();if(i!==r)return En(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function QZ(n,e,t){if(n)return VZ[n];if(e)return 0;var i=parseInt(t,10),r=i%100,s=(i-r)/100;return s*60+r}function wM(n){var e=GZ.exec(KZ(n._i)),t;if(e){if(t=YZ(e[4],e[3],e[2],e[5],e[6],e[7]),!XZ(e[1],t,n))return;n._a=t,n._tzm=QZ(e[8],e[9],e[10]),n._d=y0.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),En(n).rfc2822=!0}else n._isValid=!1}function JZ(n){var e=zZ.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(SM(n),n._isValid===!1)delete n._isValid;else return;if(wM(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:_t.createFromInputFallback(n)}_t.createFromInputFallback=Ho("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function dp(n,e,t){return n??e??t}function ZZ(n){var e=new Date(_t.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function VE(n){var e,t,i=[],r,s,a;if(!n._d){for(r=ZZ(n),n._w&&n._a[tc]==null&&n._a[su]==null&&eee(n),n._dayOfYear!=null&&(a=dp(n._a[ta],r[ta]),(n._dayOfYear>Dm(a)||n._dayOfYear===0)&&(En(n)._overflowDayOfYear=!0),t=y0(a,0,n._dayOfYear),n._a[su]=t.getUTCMonth(),n._a[tc]=t.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=i[e]=r[e];for(;e<7;e++)n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[us]===24&&n._a[yl]===0&&n._a[au]===0&&n._a[Yf]===0&&(n._nextDay=!0,n._a[us]=0),n._d=(n._useUTC?y0:aZ).apply(null,i),s=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[us]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==s&&(En(n).weekdayMismatch=!0)}}function eee(n){var e,t,i,r,s,a,o,l,c;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,a=4,t=dp(e.GG,n._a[ta],v0(Yi(),1,4).year),i=dp(e.W,1),r=dp(e.E,1),(r<1||r>7)&&(l=!0)):(s=n._locale._week.dow,a=n._locale._week.doy,c=v0(Yi(),s,a),t=dp(e.gg,n._a[ta],c.year),i=dp(e.w,c.week),e.d!=null?(r=e.d,(r<0||r>6)&&(l=!0)):e.e!=null?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s),i<1||i>du(t,s,a)?En(n)._overflowWeeks=!0:l!=null?En(n)._overflowWeekday=!0:(o=mM(t,i,r,s,a),n._a[ta]=o.year,n._dayOfYear=o.dayOfYear)}_t.ISO_8601=function(){};_t.RFC_2822=function(){};function YE(n){if(n._f===_t.ISO_8601){SM(n);return}if(n._f===_t.RFC_2822){wM(n);return}n._a=[],En(n).empty=!0;var e=""+n._i,t,i,r,s,a,o=e.length,l=0,c,u;for(r=rM(n._f,n._locale).match(OE)||[],u=r.length,t=0;t<u;t++)s=r[t],i=(e.match($J(s,n))||[])[0],i&&(a=e.substr(0,e.indexOf(i)),a.length>0&&En(n).unusedInput.push(a),e=e.slice(e.indexOf(i)+i.length),l+=i.length),Dp[s]?(i?En(n).empty=!1:En(n).unusedTokens.push(s),WJ(s,i,n)):n._strict&&!i&&En(n).unusedTokens.push(s);En(n).charsLeftOver=o-l,e.length>0&&En(n).unusedInput.push(e),n._a[us]<=12&&En(n).bigHour===!0&&n._a[us]>0&&(En(n).bigHour=void 0),En(n).parsedDateParts=n._a.slice(0),En(n).meridiem=n._meridiem,n._a[us]=tee(n._locale,n._a[us],n._meridiem),c=En(n).era,c!==null&&(n._a[ta]=n._locale.erasConvertYear(c,n._a[ta])),VE(n),GE(n)}function tee(n,e,t){var i;return t==null?e:n.meridiemHour!=null?n.meridiemHour(e,t):(n.isPM!=null&&(i=n.isPM(t),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function nee(n){var e,t,i,r,s,a,o=!1,l=n._f.length;if(l===0){En(n).invalidFormat=!0,n._d=new Date(NaN);return}for(r=0;r<l;r++)s=0,a=!1,e=NE({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[r],YE(e),PE(e)&&(a=!0),s+=En(e).charsLeftOver,s+=En(e).unusedTokens.length*10,En(e).score=s,o?s<i&&(i=s,t=e):(i==null||s<i||a)&&(i=s,t=e,a&&(o=!0));Sd(n,t||e)}function iee(n){if(!n._d){var e=ME(n._i),t=e.day===void 0?e.date:e.day;n._a=tM([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),VE(n)}}function ree(n){var e=new G0(GE(_M(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function _M(n){var e=n._i,t=n._f;return n._locale=n._locale||wu(n._l),e===null||t===void 0&&e===""?ab({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),El(e)?new G0(GE(e)):(z0(e)?n._d=e:_l(t)?nee(n):t?YE(n):see(n),PE(n)||(n._d=null),n))}function see(n){var e=n._i;Pa(e)?n._d=new Date(_t.now()):z0(e)?n._d=new Date(e.valueOf()):typeof e=="string"?JZ(n):_l(e)?(n._a=tM(e.slice(0),function(t){return parseInt(t,10)}),VE(n)):rh(e)?iee(n):vu(e)?n._d=new Date(e):_t.createFromInputFallback(n)}function EM(n,e,t,i,r){var s={};return(e===!0||e===!1)&&(i=e,e=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(rh(n)&&RE(n)||_l(n)&&n.length===0)&&(n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=t,s._i=n,s._f=e,s._strict=i,ree(s)}function Yi(n,e,t,i){return EM(n,e,t,i,!1)}var aee=Ho("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=Yi.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:ab()}),oee=Ho("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=Yi.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:ab()});function TM(n,e){var t,i;if(e.length===1&&_l(e[0])&&(e=e[0]),!e.length)return Yi();for(t=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][n](t))&&(t=e[i]);return t}function lee(){var n=[].slice.call(arguments,0);return TM("isBefore",n)}function cee(){var n=[].slice.call(arguments,0);return TM("isAfter",n)}var uee=function(){return Date.now?Date.now():+new Date},Kg=["year","quarter","month","week","day","hour","minute","second","millisecond"];function dee(n){var e,t=!1,i,r=Kg.length;for(e in n)if(ii(n,e)&&!(Fr.call(Kg,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(i=0;i<r;++i)if(n[Kg[i]]){if(t)return!1;parseFloat(n[Kg[i]])!==Bn(n[Kg[i]])&&(t=!0)}return!0}function fee(){return this._isValid}function hee(){return Cl(NaN)}function pb(n){var e=ME(n),t=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||e.isoWeek||0,a=e.day||0,o=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=dee(e),this._milliseconds=+u+c*1e3+l*6e4+o*1e3*60*60,this._days=+a+s*7,this._months=+r+i*3+t*12,this._data={},this._locale=wu(),this._bubble()}function s1(n){return n instanceof pb}function D_(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function pee(n,e,t){var i=Math.min(n.length,e.length),r=Math.abs(n.length-e.length),s=0,a;for(a=0;a<i;a++)Bn(n[a])!==Bn(e[a])&&s++;return s+r}function AM(n,e){zt(n,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+fc(~~(t/60),2)+e+fc(~~t%60,2)})}AM("Z",":");AM("ZZ","");Tt("Z",db);Tt("ZZ",db);Ci(["Z","ZZ"],function(n,e,t){t._useUTC=!0,t._tzm=qE(db,n)});var gee=/([\+\-]|\d\d)/gi;function qE(n,e){var t=(e||"").match(n),i,r,s;return t===null?null:(i=t[t.length-1]||[],r=(i+"").match(gee)||["-",0,0],s=+(r[1]*60)+Bn(r[2]),s===0?0:r[0]==="+"?s:-s)}function KE(n,e){var t,i;return e._isUTC?(t=e.clone(),i=(El(n)||z0(n)?n.valueOf():Yi(n).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),_t.updateOffset(t,!1),t):Yi(n).local()}function O_(n){return-Math.round(n._d.getTimezoneOffset())}_t.updateOffset=function(){};function mee(n,e,t){var i=this._offset||0,r;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=qE(db,n),n===null)return this}else Math.abs(n)<16&&!t&&(n=n*60);return!this._isUTC&&e&&(r=O_(this)),this._offset=n,this._isUTC=!0,r!=null&&this.add(r,"m"),i!==n&&(!e||this._changeInProgress?IM(this,Cl(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:O_(this)}function yee(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function vee(n){return this.utcOffset(0,n)}function xee(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(O_(this),"m")),this}function bee(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=qE(BJ,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function See(n){return this.isValid()?(n=n?Yi(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function wee(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function _ee(){if(!Pa(this._isDSTShifted))return this._isDSTShifted;var n={},e;return NE(n,this),n=_M(n),n._a?(e=n._isUTC?gc(n._a):Yi(n._a),this._isDSTShifted=this.isValid()&&pee(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Eee(){return this.isValid()?!this._isUTC:!1}function Tee(){return this.isValid()?this._isUTC:!1}function LM(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Aee=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Lee=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Cl(n,e){var t=n,i=null,r,s,a;return s1(n)?t={ms:n._milliseconds,d:n._days,M:n._months}:vu(n)||!isNaN(+n)?(t={},e?t[e]=+n:t.milliseconds=+n):(i=Aee.exec(n))?(r=i[1]==="-"?-1:1,t={y:0,d:Bn(i[tc])*r,h:Bn(i[us])*r,m:Bn(i[yl])*r,s:Bn(i[au])*r,ms:Bn(D_(i[Yf]*1e3))*r}):(i=Lee.exec(n))?(r=i[1]==="-"?-1:1,t={y:Lf(i[2],r),M:Lf(i[3],r),w:Lf(i[4],r),d:Lf(i[5],r),h:Lf(i[6],r),m:Lf(i[7],r),s:Lf(i[8],r)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(a=Cee(Yi(t.from),Yi(t.to)),t={},t.ms=a.milliseconds,t.M=a.months),s=new pb(t),s1(n)&&ii(n,"_locale")&&(s._locale=n._locale),s1(n)&&ii(n,"_isValid")&&(s._isValid=n._isValid),s}Cl.fn=pb.prototype;Cl.invalid=hee;function Lf(n,e){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*e}function bk(n,e){var t={};return t.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+n.clone().add(t.months,"M"),t}function Cee(n,e){var t;return n.isValid()&&e.isValid()?(e=KE(e,n),n.isBefore(e)?t=bk(n,e):(t=bk(e,n),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function CM(n,e){return function(t,i){var r,s;return i!==null&&!isNaN(+i)&&(iM(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=t,t=i,i=s),r=Cl(t,i),IM(this,r,n),this}}function IM(n,e,t,i){var r=e._milliseconds,s=D_(e._days),a=D_(e._months);n.isValid()&&(i=i??!0,a&&hM(n,m0(n,"Month")+a*t),s&&uM(n,"Date",m0(n,"Date")+s*t),r&&n._d.setTime(n._d.valueOf()+r*t),i&&_t.updateOffset(n,s||a))}var Iee=CM(1,"add"),kee=CM(-1,"subtract");function kM(n){return typeof n=="string"||n instanceof String}function Ree(n){return El(n)||z0(n)||kM(n)||vu(n)||Nee(n)||Pee(n)||n===null||n===void 0}function Pee(n){var e=rh(n)&&!RE(n),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,s,a=i.length;for(r=0;r<a;r+=1)s=i[r],t=t||ii(n,s);return e&&t}function Nee(n){var e=_l(n),t=!1;return e&&(t=n.filter(function(i){return!vu(i)&&kM(n)}).length===0),e&&t}function Dee(n){var e=rh(n)&&!RE(n),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,s;for(r=0;r<i.length;r+=1)s=i[r],t=t||ii(n,s);return e&&t}function Oee(n,e){var t=n.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function Mee(n,e){arguments.length===1&&(arguments[0]?Ree(arguments[0])?(n=arguments[0],e=void 0):Dee(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var t=n||Yi(),i=KE(t,this).startOf("day"),r=_t.calendarFormat(this,i)||"sameElse",s=e&&(mc(e[r])?e[r].call(this,t):e[r]);return this.format(s||this.localeData().calendar(r,this,Yi(t)))}function Fee(){return new G0(this)}function jee(n,e){var t=El(n)?n:Yi(n);return this.isValid()&&t.isValid()?(e=Wo(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function Bee(n,e){var t=El(n)?n:Yi(n);return this.isValid()&&t.isValid()?(e=Wo(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Uee(n,e,t,i){var r=El(n)?n:Yi(n),s=El(e)?e:Yi(e);return this.isValid()&&r.isValid()&&s.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(r,t):!this.isBefore(r,t))&&(i[1]===")"?this.isBefore(s,t):!this.isAfter(s,t))):!1}function $ee(n,e){var t=El(n)?n:Yi(n),i;return this.isValid()&&t.isValid()?(e=Wo(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function Hee(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function Wee(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function zee(n,e,t){var i,r,s;if(!this.isValid())return NaN;if(i=KE(n,this),!i.isValid())return NaN;switch(r=(i.utcOffset()-this.utcOffset())*6e4,e=Wo(e),e){case"year":s=a1(this,i)/12;break;case"month":s=a1(this,i);break;case"quarter":s=a1(this,i)/3;break;case"second":s=(this-i)/1e3;break;case"minute":s=(this-i)/6e4;break;case"hour":s=(this-i)/36e5;break;case"day":s=(this-i-r)/864e5;break;case"week":s=(this-i-r)/6048e5;break;default:s=this-i}return t?s:Oo(s)}function a1(n,e){if(n.date()<e.date())return-a1(e,n);var t=(e.year()-n.year())*12+(e.month()-n.month()),i=n.clone().add(t,"months"),r,s;return e-i<0?(r=n.clone().add(t-1,"months"),s=(e-i)/(i-r)):(r=n.clone().add(t+1,"months"),s=(e-i)/(r-i)),-(t+s)||0}_t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";_t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Gee(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Vee(n){if(!this.isValid())return null;var e=n!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?r1(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):mc(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",r1(t,"Z")):r1(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Yee(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",t,i,r,s;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(t+i+r+s)}function qee(n){n||(n=this.isUtc()?_t.defaultFormatUtc:_t.defaultFormat);var e=r1(this,n);return this.localeData().postformat(e)}function Kee(n,e){return this.isValid()&&(El(n)&&n.isValid()||Yi(n).isValid())?Cl({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Xee(n){return this.from(Yi(),n)}function Qee(n,e){return this.isValid()&&(El(n)&&n.isValid()||Yi(n).isValid())?Cl({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Jee(n){return this.to(Yi(),n)}function RM(n){var e;return n===void 0?this._locale._abbr:(e=wu(n),e!=null&&(this._locale=e),this)}var PM=Ho("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function NM(){return this._locale}var rx=1e3,Op=60*rx,sx=60*Op,DM=(365*400+97)*24*sx;function Mp(n,e){return(n%e+e)%e}function OM(n,e,t){return n<100&&n>=0?new Date(n+400,e,t)-DM:new Date(n,e,t).valueOf()}function MM(n,e,t){return n<100&&n>=0?Date.UTC(n+400,e,t)-DM:Date.UTC(n,e,t)}function Zee(n){var e,t;if(n=Wo(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?MM:OM,n){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Mp(e+(this._isUTC?0:this.utcOffset()*Op),sx);break;case"minute":e=this._d.valueOf(),e-=Mp(e,Op);break;case"second":e=this._d.valueOf(),e-=Mp(e,rx);break}return this._d.setTime(e),_t.updateOffset(this,!0),this}function ete(n){var e,t;if(n=Wo(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?MM:OM,n){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=sx-Mp(e+(this._isUTC?0:this.utcOffset()*Op),sx)-1;break;case"minute":e=this._d.valueOf(),e+=Op-Mp(e,Op)-1;break;case"second":e=this._d.valueOf(),e+=rx-Mp(e,rx)-1;break}return this._d.setTime(e),_t.updateOffset(this,!0),this}function tte(){return this._d.valueOf()-(this._offset||0)*6e4}function nte(){return Math.floor(this.valueOf()/1e3)}function ite(){return new Date(this.valueOf())}function rte(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function ste(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function ate(){return this.isValid()?this.toISOString():null}function ote(){return PE(this)}function lte(){return Sd({},En(this))}function cte(){return En(this).overflow}function ute(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}zt("N",0,0,"eraAbbr");zt("NN",0,0,"eraAbbr");zt("NNN",0,0,"eraAbbr");zt("NNNN",0,0,"eraName");zt("NNNNN",0,0,"eraNarrow");zt("y",["y",1],"yo","eraYear");zt("y",["yy",2],0,"eraYear");zt("y",["yyy",3],0,"eraYear");zt("y",["yyyy",4],0,"eraYear");Tt("N",XE);Tt("NN",XE);Tt("NNN",XE);Tt("NNNN",Ste);Tt("NNNNN",wte);Ci(["N","NN","NNN","NNNN","NNNNN"],function(n,e,t,i){var r=t._locale.erasParse(n,i,t._strict);r?En(t).era=r:En(t).invalidEra=n});Tt("y",cg);Tt("yy",cg);Tt("yyy",cg);Tt("yyyy",cg);Tt("yo",_te);Ci(["y","yy","yyy","yyyy"],ta);Ci(["yo"],function(n,e,t,i){var r;t._locale._eraYearOrdinalRegex&&(r=n.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[ta]=t._locale.eraYearOrdinalParse(n,r):e[ta]=parseInt(n,10)});function dte(n,e){var t,i,r,s=this._eras||wu("en")._eras;for(t=0,i=s.length;t<i;++t){switch(typeof s[t].since){case"string":r=_t(s[t].since).startOf("day"),s[t].since=r.valueOf();break}switch(typeof s[t].until){case"undefined":s[t].until=1/0;break;case"string":r=_t(s[t].until).startOf("day").valueOf(),s[t].until=r.valueOf();break}}return s}function fte(n,e,t){var i,r,s=this.eras(),a,o,l;for(n=n.toUpperCase(),i=0,r=s.length;i<r;++i)if(a=s[i].name.toUpperCase(),o=s[i].abbr.toUpperCase(),l=s[i].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(o===n)return s[i];break;case"NNNN":if(a===n)return s[i];break;case"NNNNN":if(l===n)return s[i];break}else if([a,o,l].indexOf(n)>=0)return s[i]}function hte(n,e){var t=n.since<=n.until?1:-1;return e===void 0?_t(n.since).year():_t(n.since).year()+(e-n.offset)*t}function pte(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].name;return""}function gte(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].narrow;return""}function mte(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].abbr;return""}function yte(){var n,e,t,i,r=this.localeData().eras();for(n=0,e=r.length;n<e;++n)if(t=r[n].since<=r[n].until?1:-1,i=this.clone().startOf("day").valueOf(),r[n].since<=i&&i<=r[n].until||r[n].until<=i&&i<=r[n].since)return(this.year()-_t(r[n].since).year())*t+r[n].offset;return this.year()}function vte(n){return ii(this,"_erasNameRegex")||QE.call(this),n?this._erasNameRegex:this._erasRegex}function xte(n){return ii(this,"_erasAbbrRegex")||QE.call(this),n?this._erasAbbrRegex:this._erasRegex}function bte(n){return ii(this,"_erasNarrowRegex")||QE.call(this),n?this._erasNarrowRegex:this._erasRegex}function XE(n,e){return e.erasAbbrRegex(n)}function Ste(n,e){return e.erasNameRegex(n)}function wte(n,e){return e.erasNarrowRegex(n)}function _te(n,e){return e._eraYearOrdinalRegex||cg}function QE(){var n=[],e=[],t=[],i=[],r,s,a,o,l,c=this.eras();for(r=0,s=c.length;r<s;++r)a=uu(c[r].name),o=uu(c[r].abbr),l=uu(c[r].narrow),e.push(a),n.push(o),t.push(l),i.push(a),i.push(o),i.push(l);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}zt(0,["gg",2],0,function(){return this.weekYear()%100});zt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function gb(n,e){zt(0,[n,n.length],0,e)}gb("gggg","weekYear");gb("ggggg","weekYear");gb("GGGG","isoWeekYear");gb("GGGGG","isoWeekYear");Tt("G",ub);Tt("g",ub);Tt("GG",qi,yo);Tt("gg",qi,yo);Tt("GGGG",jE,FE);Tt("gggg",jE,FE);Tt("GGGGG",cb,ob);Tt("ggggg",cb,ob);Y0(["gggg","ggggg","GGGG","GGGGG"],function(n,e,t,i){e[i.substr(0,2)]=Bn(n)});Y0(["gg","GG"],function(n,e,t,i){e[i]=_t.parseTwoDigitYear(n)});function Ete(n){return FM.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Tte(n){return FM.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function Ate(){return du(this.year(),1,4)}function Lte(){return du(this.isoWeekYear(),1,4)}function Cte(){var n=this.localeData()._week;return du(this.year(),n.dow,n.doy)}function Ite(){var n=this.localeData()._week;return du(this.weekYear(),n.dow,n.doy)}function FM(n,e,t,i,r){var s;return n==null?v0(this,i,r).year:(s=du(n,i,r),e>s&&(e=s),kte.call(this,n,e,t,i,r))}function kte(n,e,t,i,r){var s=mM(n,e,t,i,r),a=y0(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}zt("Q",0,"Qo","quarter");Tt("Q",sM);Ci("Q",function(n,e){e[su]=(Bn(n)-1)*3});function Rte(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}zt("D",["DD",2],"Do","date");Tt("D",qi,ug);Tt("DD",qi,yo);Tt("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ci(["D","DD"],tc);Ci("Do",function(n,e){e[tc]=Bn(n.match(qi)[0])});var jM=dg("Date",!0);zt("DDD",["DDDD",3],"DDDo","dayOfYear");Tt("DDD",lb);Tt("DDDD",aM);Ci(["DDD","DDDD"],function(n,e,t){t._dayOfYear=Bn(n)});function Pte(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}zt("m",["mm",2],0,"minute");Tt("m",qi,BE);Tt("mm",qi,yo);Ci(["m","mm"],yl);var Nte=dg("Minutes",!1);zt("s",["ss",2],0,"second");Tt("s",qi,BE);Tt("ss",qi,yo);Ci(["s","ss"],au);var Dte=dg("Seconds",!1);zt("S",0,0,function(){return~~(this.millisecond()/100)});zt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});zt(0,["SSS",3],0,"millisecond");zt(0,["SSSS",4],0,function(){return this.millisecond()*10});zt(0,["SSSSS",5],0,function(){return this.millisecond()*100});zt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});zt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});zt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});zt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Tt("S",lb,sM);Tt("SS",lb,yo);Tt("SSS",lb,aM);var wd,BM;for(wd="SSSS";wd.length<=9;wd+="S")Tt(wd,cg);function Ote(n,e){e[Yf]=Bn(("0."+n)*1e3)}for(wd="S";wd.length<=9;wd+="S")Ci(wd,Ote);BM=dg("Milliseconds",!1);zt("z",0,0,"zoneAbbr");zt("zz",0,0,"zoneName");function Mte(){return this._isUTC?"UTC":""}function Fte(){return this._isUTC?"Coordinated Universal Time":""}var ot=G0.prototype;ot.add=Iee;ot.calendar=Mee;ot.clone=Fee;ot.diff=zee;ot.endOf=ete;ot.format=qee;ot.from=Kee;ot.fromNow=Xee;ot.to=Qee;ot.toNow=Jee;ot.get=YJ;ot.invalidAt=cte;ot.isAfter=jee;ot.isBefore=Bee;ot.isBetween=Uee;ot.isSame=$ee;ot.isSameOrAfter=Hee;ot.isSameOrBefore=Wee;ot.isValid=ote;ot.lang=PM;ot.locale=RM;ot.localeData=NM;ot.max=oee;ot.min=aee;ot.parsingFlags=lte;ot.set=qJ;ot.startOf=Zee;ot.subtract=kee;ot.toArray=rte;ot.toObject=ste;ot.toDate=ite;ot.toISOString=Vee;ot.inspect=Yee;typeof Symbol<"u"&&Symbol.for!=null&&(ot[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ot.toJSON=ate;ot.toString=Gee;ot.unix=nte;ot.valueOf=tte;ot.creationData=ute;ot.eraName=pte;ot.eraNarrow=gte;ot.eraAbbr=mte;ot.eraYear=yte;ot.year=cM;ot.isLeapYear=VJ;ot.weekYear=Ete;ot.isoWeekYear=Tte;ot.quarter=ot.quarters=Rte;ot.month=pM;ot.daysInMonth=iZ;ot.week=ot.weeks=dZ;ot.isoWeek=ot.isoWeeks=fZ;ot.weeksInYear=Cte;ot.weeksInWeekYear=Ite;ot.isoWeeksInYear=Ate;ot.isoWeeksInISOWeekYear=Lte;ot.date=jM;ot.day=ot.days=TZ;ot.weekday=AZ;ot.isoWeekday=LZ;ot.dayOfYear=Pte;ot.hour=ot.hours=DZ;ot.minute=ot.minutes=Nte;ot.second=ot.seconds=Dte;ot.millisecond=ot.milliseconds=BM;ot.utcOffset=mee;ot.utc=vee;ot.local=xee;ot.parseZone=bee;ot.hasAlignedHourOffset=See;ot.isDST=wee;ot.isLocal=Eee;ot.isUtcOffset=Tee;ot.isUtc=LM;ot.isUTC=LM;ot.zoneAbbr=Mte;ot.zoneName=Fte;ot.dates=Ho("dates accessor is deprecated. Use date instead.",jM);ot.months=Ho("months accessor is deprecated. Use month instead",pM);ot.years=Ho("years accessor is deprecated. Use year instead",cM);ot.zone=Ho("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",yee);ot.isDSTShifted=Ho("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",_ee);function jte(n){return Yi(n*1e3)}function Bte(){return Yi.apply(null,arguments).parseZone()}function UM(n){return n}var ri=DE.prototype;ri.calendar=EJ;ri.longDateFormat=CJ;ri.invalidDate=kJ;ri.ordinal=NJ;ri.preparse=UM;ri.postformat=UM;ri.relativeTime=OJ;ri.pastFuture=MJ;ri.set=wJ;ri.eras=dte;ri.erasParse=fte;ri.erasConvertYear=hte;ri.erasAbbrRegex=xte;ri.erasNameRegex=vte;ri.erasNarrowRegex=bte;ri.months=ZJ;ri.monthsShort=eZ;ri.monthsParse=nZ;ri.monthsRegex=sZ;ri.monthsShortRegex=rZ;ri.week=oZ;ri.firstDayOfYear=uZ;ri.firstDayOfWeek=cZ;ri.weekdays=bZ;ri.weekdaysMin=wZ;ri.weekdaysShort=SZ;ri.weekdaysParse=EZ;ri.weekdaysRegex=CZ;ri.weekdaysShortRegex=IZ;ri.weekdaysMinRegex=kZ;ri.isPM=PZ;ri.meridiem=OZ;function ax(n,e,t,i){var r=wu(),s=gc().set(i,e);return r[t](s,n)}function $M(n,e,t){if(vu(n)&&(e=n,n=void 0),n=n||"",e!=null)return ax(n,e,t,"month");var i,r=[];for(i=0;i<12;i++)r[i]=ax(n,i,t,"month");return r}function JE(n,e,t,i){typeof n=="boolean"?(vu(e)&&(t=e,e=void 0),e=e||""):(e=n,t=e,n=!1,vu(e)&&(t=e,e=void 0),e=e||"");var r=wu(),s=n?r._week.dow:0,a,o=[];if(t!=null)return ax(e,(t+s)%7,i,"day");for(a=0;a<7;a++)o[a]=ax(e,(a+s)%7,i,"day");return o}function Ute(n,e){return $M(n,e,"months")}function $te(n,e){return $M(n,e,"monthsShort")}function Hte(n,e,t){return JE(n,e,t,"weekdays")}function Wte(n,e,t){return JE(n,e,t,"weekdaysShort")}function zte(n,e,t){return JE(n,e,t,"weekdaysMin")}Dd("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,t=Bn(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+t}});_t.lang=Ho("moment.lang is deprecated. Use moment.locale instead.",Dd);_t.langData=Ho("moment.langData is deprecated. Use moment.localeData instead.",wu);var $c=Math.abs;function Gte(){var n=this._data;return this._milliseconds=$c(this._milliseconds),this._days=$c(this._days),this._months=$c(this._months),n.milliseconds=$c(n.milliseconds),n.seconds=$c(n.seconds),n.minutes=$c(n.minutes),n.hours=$c(n.hours),n.months=$c(n.months),n.years=$c(n.years),this}function HM(n,e,t,i){var r=Cl(e,t);return n._milliseconds+=i*r._milliseconds,n._days+=i*r._days,n._months+=i*r._months,n._bubble()}function Vte(n,e){return HM(this,n,e,1)}function Yte(n,e){return HM(this,n,e,-1)}function Sk(n){return n<0?Math.floor(n):Math.ceil(n)}function qte(){var n=this._milliseconds,e=this._days,t=this._months,i=this._data,r,s,a,o,l;return n>=0&&e>=0&&t>=0||n<=0&&e<=0&&t<=0||(n+=Sk(M_(t)+e)*864e5,e=0,t=0),i.milliseconds=n%1e3,r=Oo(n/1e3),i.seconds=r%60,s=Oo(r/60),i.minutes=s%60,a=Oo(s/60),i.hours=a%24,e+=Oo(a/24),l=Oo(WM(e)),t+=l,e-=Sk(M_(l)),o=Oo(t/12),t%=12,i.days=e,i.months=t,i.years=o,this}function WM(n){return n*4800/146097}function M_(n){return n*146097/4800}function Kte(n){if(!this.isValid())return NaN;var e,t,i=this._milliseconds;if(n=Wo(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+i/864e5,t=this._months+WM(e),n){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(M_(this._months)),n){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+n)}}function _u(n){return function(){return this.as(n)}}var zM=_u("ms"),Xte=_u("s"),Qte=_u("m"),Jte=_u("h"),Zte=_u("d"),ene=_u("w"),tne=_u("M"),nne=_u("Q"),ine=_u("y"),rne=zM;function sne(){return Cl(this)}function ane(n){return n=Wo(n),this.isValid()?this[n+"s"]():NaN}function Sh(n){return function(){return this.isValid()?this._data[n]:NaN}}var one=Sh("milliseconds"),lne=Sh("seconds"),cne=Sh("minutes"),une=Sh("hours"),dne=Sh("days"),fne=Sh("months"),hne=Sh("years");function pne(){return Oo(this.days()/7)}var Yc=Math.round,Tp={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function gne(n,e,t,i,r){return r.relativeTime(e||1,!!t,n,i)}function mne(n,e,t,i){var r=Cl(n).abs(),s=Yc(r.as("s")),a=Yc(r.as("m")),o=Yc(r.as("h")),l=Yc(r.as("d")),c=Yc(r.as("M")),u=Yc(r.as("w")),d=Yc(r.as("y")),h=s<=t.ss&&["s",s]||s<t.s&&["ss",s]||a<=1&&["m"]||a<t.m&&["mm",a]||o<=1&&["h"]||o<t.h&&["hh",o]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(h=h||u<=1&&["w"]||u<t.w&&["ww",u]),h=h||c<=1&&["M"]||c<t.M&&["MM",c]||d<=1&&["y"]||["yy",d],h[2]=e,h[3]=+n>0,h[4]=i,gne.apply(null,h)}function yne(n){return n===void 0?Yc:typeof n=="function"?(Yc=n,!0):!1}function vne(n,e){return Tp[n]===void 0?!1:e===void 0?Tp[n]:(Tp[n]=e,n==="s"&&(Tp.ss=e-1),!0)}function xne(n,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=Tp,r,s;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(t=n),typeof e=="object"&&(i=Object.assign({},Tp,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),r=this.localeData(),s=mne(this,!t,i,r),t&&(s=r.pastFuture(+this,s)),r.postformat(s)}var vS=Math.abs;function ip(n){return(n>0)-(n<0)||+n}function mb(){if(!this.isValid())return this.localeData().invalidDate();var n=vS(this._milliseconds)/1e3,e=vS(this._days),t=vS(this._months),i,r,s,a,o=this.asSeconds(),l,c,u,d;return o?(i=Oo(n/60),r=Oo(i/60),n%=60,i%=60,s=Oo(t/12),t%=12,a=n?n.toFixed(3).replace(/\.?0+$/,""):"",l=o<0?"-":"",c=ip(this._months)!==ip(o)?"-":"",u=ip(this._days)!==ip(o)?"-":"",d=ip(this._milliseconds)!==ip(o)?"-":"",l+"P"+(s?c+s+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(r||i||n?"T":"")+(r?d+r+"H":"")+(i?d+i+"M":"")+(n?d+a+"S":"")):"P0D"}var Vn=pb.prototype;Vn.isValid=fee;Vn.abs=Gte;Vn.add=Vte;Vn.subtract=Yte;Vn.as=Kte;Vn.asMilliseconds=zM;Vn.asSeconds=Xte;Vn.asMinutes=Qte;Vn.asHours=Jte;Vn.asDays=Zte;Vn.asWeeks=ene;Vn.asMonths=tne;Vn.asQuarters=nne;Vn.asYears=ine;Vn.valueOf=rne;Vn._bubble=qte;Vn.clone=sne;Vn.get=ane;Vn.milliseconds=one;Vn.seconds=lne;Vn.minutes=cne;Vn.hours=une;Vn.days=dne;Vn.weeks=pne;Vn.months=fne;Vn.years=hne;Vn.humanize=xne;Vn.toISOString=mb;Vn.toString=mb;Vn.toJSON=mb;Vn.locale=RM;Vn.localeData=NM;Vn.toIsoString=Ho("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",mb);Vn.lang=PM;zt("X",0,0,"unix");zt("x",0,0,"valueOf");Tt("x",ub);Tt("X",UJ);Ci("X",function(n,e,t){t._d=new Date(parseFloat(n)*1e3)});Ci("x",function(n,e,t){t._d=new Date(Bn(n))});//! moment.js
_t.version="2.30.1";bJ(Yi);_t.fn=ot;_t.min=lee;_t.max=cee;_t.now=uee;_t.utc=gc;_t.unix=jte;_t.months=Ute;_t.isDate=z0;_t.locale=Dd;_t.invalid=ab;_t.duration=Cl;_t.isMoment=El;_t.weekdays=Hte;_t.parseZone=Bte;_t.localeData=wu;_t.isDuration=s1;_t.monthsShort=$te;_t.weekdaysMin=zte;_t.defineLocale=zE;_t.updateLocale=BZ;_t.locales=UZ;_t.weekdaysShort=Wte;_t.normalizeUnits=Wo;_t.relativeTimeRounding=yne;_t.relativeTimeThreshold=vne;_t.calendarFormat=Oee;_t.prototype=ot;_t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const GM=6048e5,bne=864e5,VM=6e4,YM=36e5,wk=Symbol.for("constructDateFrom");function xu(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&wk in n?n[wk](e):n instanceof Date?new n.constructor(e):new Date(e)}function po(n,e){return xu(e||n,n)}let Sne={};function yb(){return Sne}function b0(n,e){var o,l,c,u;const t=yb(),i=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,r=po(n,e==null?void 0:e.in),s=r.getDay(),a=(s<i?7:0)+s-i;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function ox(n,e){return b0(n,{...e,weekStartsOn:1})}function qM(n,e){const t=po(n,e==null?void 0:e.in),i=t.getFullYear(),r=xu(t,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);const s=ox(r),a=xu(t,0);a.setFullYear(i,0,4),a.setHours(0,0,0,0);const o=ox(a);return t.getTime()>=s.getTime()?i+1:t.getTime()>=o.getTime()?i:i-1}function _k(n){const e=po(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function wne(n,...e){const t=xu.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function Ek(n,e){const t=po(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function _ne(n,e,t){const[i,r]=wne(t==null?void 0:t.in,n,e),s=Ek(i),a=Ek(r),o=+s-_k(s),l=+a-_k(a);return Math.round((o-l)/bne)}function Ene(n,e){const t=qM(n,e),i=xu(n,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),ox(i)}function Tne(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Ane(n){return!(!Tne(n)&&typeof n!="number"||isNaN(+po(n)))}function Lne(n,e){const t=po(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Cne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ine=(n,e,t)=>{let i;const r=Cne[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function Fp(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const kne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Nne={date:Fp({formats:kne,defaultWidth:"full"}),time:Fp({formats:Rne,defaultWidth:"full"}),dateTime:Fp({formats:Pne,defaultWidth:"full"})},Dne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},One=(n,e,t,i)=>Dne[n];function nc(n){return(e,t)=>{const i=t!=null&&t.context?String(t.context):"standalone";let r;if(i==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):a;r=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[o]||n.values[a]}const s=n.argumentCallback?n.argumentCallback(e):e;return r[s]}}const Mne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Bne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Une={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$ne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hne=(n,e)=>{const t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Wne={ordinalNumber:Hne,era:nc({values:Mne,defaultWidth:"wide"}),quarter:nc({values:Fne,defaultWidth:"wide",argumentCallback:n=>n-1}),month:nc({values:jne,defaultWidth:"wide"}),day:nc({values:Bne,defaultWidth:"wide"}),dayPeriod:nc({values:Une,defaultWidth:"wide",formattingValues:$ne,defaultFormattingWidth:"wide"})};function ic(n){return(e,t={})=>{const i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],s=e.match(r);if(!s)return null;const a=s[0],o=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?Gne(o,d=>d.test(a)):zne(o,d=>d.test(a));let c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function zne(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Gne(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function KM(n){return(e,t={})=>{const i=e.match(n.matchPattern);if(!i)return null;const r=i[0],s=e.match(n.parsePattern);if(!s)return null;let a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(r.length);return{value:a,rest:o}}}const Vne=/^(\d+)(th|st|nd|rd)?/i,Yne=/\d+/i,qne={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Kne={any:[/^b/i,/^(a|c)/i]},Xne={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qne={any:[/1/i,/2/i,/3/i,/4/i]},Jne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},iie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rie={ordinalNumber:KM({matchPattern:Vne,parsePattern:Yne,valueCallback:n=>parseInt(n,10)}),era:ic({matchPatterns:qne,defaultMatchWidth:"wide",parsePatterns:Kne,defaultParseWidth:"any"}),quarter:ic({matchPatterns:Xne,defaultMatchWidth:"wide",parsePatterns:Qne,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ic({matchPatterns:Jne,defaultMatchWidth:"wide",parsePatterns:Zne,defaultParseWidth:"any"}),day:ic({matchPatterns:eie,defaultMatchWidth:"wide",parsePatterns:tie,defaultParseWidth:"any"}),dayPeriod:ic({matchPatterns:nie,defaultMatchWidth:"any",parsePatterns:iie,defaultParseWidth:"any"})},sie={code:"en-US",formatDistance:Ine,formatLong:Nne,formatRelative:One,localize:Wne,match:rie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aie(n,e){const t=po(n,e==null?void 0:e.in);return _ne(t,Lne(t))+1}function oie(n,e){const t=po(n,e==null?void 0:e.in),i=+ox(t)-+Ene(t);return Math.round(i/GM)+1}function XM(n,e){var u,d,h,p;const t=po(n,e==null?void 0:e.in),i=t.getFullYear(),r=yb(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=xu((e==null?void 0:e.in)||n,0);a.setFullYear(i+1,0,s),a.setHours(0,0,0,0);const o=b0(a,e),l=xu((e==null?void 0:e.in)||n,0);l.setFullYear(i,0,s),l.setHours(0,0,0,0);const c=b0(l,e);return+t>=+o?i+1:+t>=+c?i:i-1}function lie(n,e){var o,l,c,u;const t=yb(),i=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(c=t.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,r=XM(n,e),s=xu((e==null?void 0:e.in)||n,0);return s.setFullYear(r,0,i),s.setHours(0,0,0,0),b0(s,e)}function cie(n,e){const t=po(n,e==null?void 0:e.in),i=+b0(t,e)-+lie(t,e);return Math.round(i/GM)+1}function yi(n,e){const t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}const Zu={y(n,e){const t=n.getFullYear(),i=t>0?t:1-t;return yi(e==="yy"?i%100:i,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):yi(t+1,2)},d(n,e){return yi(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return yi(n.getHours()%12||12,e.length)},H(n,e){return yi(n.getHours(),e.length)},m(n,e){return yi(n.getMinutes(),e.length)},s(n,e){return yi(n.getSeconds(),e.length)},S(n,e){const t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return yi(r,e.length)}},rp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Tk={G:function(n,e,t){const i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return Zu.y(n,e)},Y:function(n,e,t,i){const r=XM(n,i),s=r>0?r:1-r;if(e==="YY"){const a=s%100;return yi(a,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):yi(s,e.length)},R:function(n,e){const t=qM(n);return yi(t,e.length)},u:function(n,e){const t=n.getFullYear();return yi(t,e.length)},Q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return yi(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){const i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return yi(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){const i=n.getMonth();switch(e){case"M":case"MM":return Zu.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){const i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return yi(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){const r=cie(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):yi(r,e.length)},I:function(n,e,t){const i=oie(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):yi(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Zu.d(n,e)},D:function(n,e,t){const i=aie(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):yi(i,e.length)},E:function(n,e,t){const i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){const r=n.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return yi(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){const r=n.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return yi(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return yi(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const i=n.getHours();let r;switch(i===12?r=rp.noon:i===0?r=rp.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const i=n.getHours();let r;switch(i>=17?r=rp.evening:i>=12?r=rp.afternoon:i>=4?r=rp.morning:r=rp.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return Zu.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Zu.H(n,e)},K:function(n,e,t){const i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):yi(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):yi(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Zu.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Zu.s(n,e)},S:function(n,e){return Zu.S(n,e)},X:function(n,e,t){const i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Lk(i);case"XXXX":case"XX":return Mf(i);case"XXXXX":case"XXX":default:return Mf(i,":")}},x:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"x":return Lk(i);case"xxxx":case"xx":return Mf(i);case"xxxxx":case"xxx":default:return Mf(i,":")}},O:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ak(i,":");case"OOOO":default:return"GMT"+Mf(i,":")}},z:function(n,e,t){const i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ak(i,":");case"zzzz":default:return"GMT"+Mf(i,":")}},t:function(n,e,t){const i=Math.trunc(+n/1e3);return yi(i,e.length)},T:function(n,e,t){return yi(+n,e.length)}};function Ak(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),s=i%60;return s===0?t+String(r):t+String(r)+e+yi(s,2)}function Lk(n,e){return n%60===0?(n>0?"-":"+")+yi(Math.abs(n)/60,2):Mf(n,e)}function Mf(n,e=""){const t=n>0?"-":"+",i=Math.abs(n),r=yi(Math.trunc(i/60),2),s=yi(i%60,2);return t+r+e+s}const Ck=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},QM=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},uie=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return Ck(n,e);let s;switch(i){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Ck(i,e)).replace("{{time}}",QM(r,e))},die={p:QM,P:uie},fie=/^D+$/,hie=/^Y+$/,pie=["D","DD","YY","YYYY"];function gie(n){return fie.test(n)}function mie(n){return hie.test(n)}function yie(n,e,t){const i=vie(n,e,t);if(console.warn(i),pie.includes(n))throw new RangeError(i)}function vie(n,e,t){const i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sie=/^'([^]*?)'?$/,wie=/''/g,_ie=/[a-zA-Z]/;function xS(n,e,t){var u,d,h,p,m,v,b,x;const i=yb(),r=(t==null?void 0:t.locale)??i.locale??sie,s=(t==null?void 0:t.firstWeekContainsDate)??((d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((v=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??i.weekStartsOn??((x=(b=i.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??0,o=po(n,t==null?void 0:t.in);if(!Ane(o))throw new RangeError("Invalid time value");let l=e.match(bie).map(w=>{const S=w[0];if(S==="p"||S==="P"){const A=die[S];return A(w,r.formatLong)}return w}).join("").match(xie).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const S=w[0];if(S==="'")return{isToken:!1,value:Eie(w)};if(Tk[S])return{isToken:!0,value:w};if(S.match(_ie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:w}});r.localize.preprocessor&&(l=r.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:a,locale:r};return l.map(w=>{if(!w.isToken)return w.value;const S=w.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&mie(S)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&gie(S))&&yie(S,e,String(n));const A=Tk[S[0]];return A(o,S,r.localize,c)}).join("")}function Eie(n){const e=n.match(Sie);return e?e[1].replace(wie,"'"):n}function Ik(n,e){const t=()=>xu(e==null?void 0:e.in,NaN),r=Cie(n);let s;if(r.date){const c=Iie(r.date,2);s=kie(c.restDateString,c.year)}if(!s||isNaN(+s))return t();const a=+s;let o=0,l;if(r.time&&(o=Rie(r.time),isNaN(o)))return t();if(r.timezone){if(l=Pie(r.timezone),isNaN(l))return t()}else{const c=new Date(a+o),u=po(0,e==null?void 0:e.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return po(a+o+l,e==null?void 0:e.in)}const wv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Tie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Aie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Lie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Cie(n){const e={},t=n.split(wv.dateTimeDelimiter);let i;if(t.length>2)return e;if(/:/.test(t[0])?i=t[0]:(e.date=t[0],i=t[1],wv.timeZoneDelimiter.test(e.date)&&(e.date=n.split(wv.timeZoneDelimiter)[0],i=n.substr(e.date.length,n.length))),i){const r=wv.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function Iie(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=n.match(t);if(!i)return{year:NaN,restDateString:""};const r=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?r:s*100,restDateString:n.slice((i[1]||i[2]).length)}}function kie(n,e){if(e===null)return new Date(NaN);const t=n.match(Tie);if(!t)return new Date(NaN);const i=!!t[4],r=Xg(t[1]),s=Xg(t[2])-1,a=Xg(t[3]),o=Xg(t[4]),l=Xg(t[5])-1;if(i)return Fie(e,o,l)?Nie(e,o,l):new Date(NaN);{const c=new Date(0);return!Oie(e,s,a)||!Mie(e,r)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(r,a)),c)}}function Xg(n){return n?parseInt(n):1}function Rie(n){const e=n.match(Aie);if(!e)return NaN;const t=bS(e[1]),i=bS(e[2]),r=bS(e[3]);return jie(t,i,r)?t*YM+i*VM+r*1e3:NaN}function bS(n){return n&&parseFloat(n.replace(",","."))||0}function Pie(n){if(n==="Z")return 0;const e=n.match(Lie);if(!e)return 0;const t=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return Bie(i,r)?t*(i*YM+r*VM):NaN}function Nie(n,e,t){const i=new Date(0);i.setUTCFullYear(n,0,4);const r=i.getUTCDay()||7,s=(e-1)*7+t+1-r;return i.setUTCDate(i.getUTCDate()+s),i}const Die=[31,null,31,30,31,30,31,31,30,31,30,31];function JM(n){return n%400===0||n%4===0&&n%100!==0}function Oie(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Die[e]||(JM(n)?29:28))}function Mie(n,e){return e>=1&&e<=(JM(n)?366:365)}function Fie(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function jie(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function Bie(n,e){return e>=0&&e<=59}const Uie={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},$ie=(n,e,t)=>{let i;const r=Uie[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"en "+i:"hace "+i:i},Hie={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Wie={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},zie={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Gie={date:Fp({formats:Hie,defaultWidth:"full"}),time:Fp({formats:Wie,defaultWidth:"full"}),dateTime:Fp({formats:zie,defaultWidth:"full"})},Vie={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Yie={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},qie=(n,e,t,i)=>e.getHours()!==1?Yie[n]:Vie[n],Kie={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Xie={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},Qie={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Jie={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},Zie={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},ere={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},tre=(n,e)=>Number(n)+"º",nre={ordinalNumber:tre,era:nc({values:Kie,defaultWidth:"wide"}),quarter:nc({values:Xie,defaultWidth:"wide",argumentCallback:n=>Number(n)-1}),month:nc({values:Qie,defaultWidth:"wide"}),day:nc({values:Jie,defaultWidth:"wide"}),dayPeriod:nc({values:Zie,defaultWidth:"wide",formattingValues:ere,defaultFormattingWidth:"wide"})},ire=/^(\d+)(º)?/i,rre=/\d+/i,sre={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},are={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},ore={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},lre={any:[/1/i,/2/i,/3/i,/4/i]},cre={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},ure={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},dre={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},fre={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},hre={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},pre={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},gre={ordinalNumber:KM({matchPattern:ire,parsePattern:rre,valueCallback:function(n){return parseInt(n,10)}}),era:ic({matchPatterns:sre,defaultMatchWidth:"wide",parsePatterns:are,defaultParseWidth:"any"}),quarter:ic({matchPatterns:ore,defaultMatchWidth:"wide",parsePatterns:lre,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ic({matchPatterns:cre,defaultMatchWidth:"wide",parsePatterns:ure,defaultParseWidth:"any"}),day:ic({matchPatterns:dre,defaultMatchWidth:"wide",parsePatterns:fre,defaultParseWidth:"any"}),dayPeriod:ic({matchPatterns:hre,defaultMatchWidth:"any",parsePatterns:pre,defaultParseWidth:"any"})},kk={code:"es",formatDistance:$ie,formatLong:Gie,formatRelative:qie,localize:nre,match:gre,options:{weekStartsOn:1,firstWeekContainsDate:1}},zl=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(n);function mre(){const[n,e]=B.useState(0),[t,i]=B.useState(0),[r,s]=B.useState(0),[a,o]=B.useState(0),[l,c]=B.useState(0),[u,d]=B.useState(0),[h,p]=B.useState(0),[m,v]=B.useState(!1),[b,x]=B.useState([]),[w,S]=B.useState([]),[A,C]=B.useState([]),[N,k]=B.useState([]),[R,U]=B.useState([]),[j,D]=B.useState([]),O=_t().format("YYYY-MM-DD hh:mm:ss"),{renderOrdersKey:Z,setRenderOrdersKey:J}=B.useContext(hi),[le,H]=B.useState(""),[V,z]=B.useState(!1),[W,te]=B.useState(!1),[fe,F]=B.useState(!1),[K,ee]=B.useState(!1),[ae,ce]=B.useState(!0),[ye,be]=B.useState([]),[Te,Xe]=B.useState(""),[ze,He]=B.useState(""),[rt,ft]=B.useState(""),[Ie,oe]=B.useState("2025"),[ut,dt]=B.useState(!1),[Se,Qe]=B.useState([]),[Ze,it]=B.useState("0"),et=new Vt;B.useEffect(()=>{le=="Ice Creams per type"?(z(!0),W==!0?te(!1):fe==!0?F(!1):K==!0&&ee(!1)):le=="Top 5 Ingredients"?(te(!0),V==!0?z(!1):fe==!0?F(!1):K==!0&&ee(!1)):le=="Top 5 Toppings"?(F(!0),V==!0?z(!1):W==!0?te(!1):K==!0&&ee(!1)):le=="Crunch Time"?(ee(!0),V==!0?z(!1):W==!0?te(!1):fe==!0&&F(!1)):(z(!1),te(!1),F(!1),ee(!1))},[le]),B.useEffect(()=>{console.log("Sale Charts",Se),console.log("Sale Charts Values",Object.values(Se)),console.log("Sale Chart Array",Se),Ze=="2"&&Se.map(Oe=>{oi(Kt=>[...Kt,Oe.hour]),br(Kt=>[...Kt,Oe.count])})},[Se]),B.useEffect(()=>{let Oe=["01","02","03","04","05","06","07","08","09","10","11","12"],Kt=["2025","2024"];Qe([]),Ze==="0"?Kt.forEach(ln=>{Oe.forEach(Ai=>{Et.get("/sales/sum",{params:{month:Ai,year:ln}}).then(yt=>{console.log("Response",yt.data);let _e=yt.data.totals;console.log("SUMMMMMMMMMMMM",_e),Qe(Ue=>[...Ue,_e])}).catch(yt=>{console.log("Error",yt)})})}):Ze==="1"?(console.log("Average"),Kt.forEach(ln=>{Oe.forEach(Ai=>{Et.get("/sales/avg_week_sales",{params:{month:Ai,year:ln}}).then(yt=>{console.log("Response",yt.data);let _e=yt.data.totals;console.log("SUMMMMMMMMMMMM",_e),Qe(Ue=>[...Ue,_e])}).catch(yt=>{console.log("Error",yt)})})})):Ze==="2"&&(console.log("Average"),Et.get("/old_orders/avgICperHourPerDay",{}).then(ln=>{console.log("Response",ln.data),Qe(ln.data)}).catch(ln=>{console.log("Error",ln)}))},[Ze]);const mt=B.useRef(),[Rt,at]=B.useState([]);B.useEffect(()=>{fetch("/api/predict").then(yt=>yt.json()).then(at).catch(console.error),(async()=>{const Ue=`https://api.open-meteo.com/v1/forecast?latitude=${18.4655}&longitude=${-66.1057}&daily=weathercode,temperature_2m_max,temperature_2m_min&&temperature_unit=fahrenheit&timezone=auto`;try{const Lt=await(await fetch(Ue)).json(),Gt=Lt.daily.time.map((bn,Sn)=>({fecha:bn,dia:xS(Ik(bn),"EEEE",{locale:kk}),tempMax:Lt.daily.temperature_2m_max[Sn],tempMin:Lt.daily.temperature_2m_min[Sn],codigo:Lt.daily.weathercode[Sn]}));li(Gt)}catch(vt){console.error("Error al obtener el pronóstico:",vt)}finally{Ts(!1)}})(),Et.get("/sales").then(yt=>{console.log("Response",yt.data),be(yt.data)}).catch(yt=>{console.log("Error",yt)});const Kt=setInterval(()=>{Et.get("/sales").then(yt=>{console.log("Response",yt.data),be(yt.data)}).catch(yt=>{console.log("Error",yt)})},6e5),ln=setInterval(()=>{Et.get("/orders/ordersATH").then(yt=>{console.log("Response ATH",yt.data.totalSalesATH),e(yt.data.totalSalesATH)}).catch(yt=>{console.log("Error",yt)}),Et.get("/orders/ordersCASH").then(yt=>{console.log("Response",typeof yt.data),i(yt.data.totalSalesCASH)}).catch(yt=>{console.log("Error",yt)}),Et.get("/orders/count").then(yt=>{console.log("Count Response",yt.data);var _e=yt.data;console.log("Map",_e),_e.forEach(Ue=>{console.log("iterating calculations"),console.log("object to look: ",Ue),Ue._id=="rolls"?(console.log("There are rolls"),s(Ue.totalQuantity)):Ue._id=="shakes"?(console.log("There are shakes"),o(Ue.totalQuantity)):Ue._id=="banana"?c(Ue.totalQuantity):Ue._id=="puppy"?d(Ue.totalQuantity):Ue._id=="drinks"?p(Ue.totalQuantity):console.log("Types not found")})}).catch(yt=>{console.log("Error",yt)}),Et.get("/orders/countIngredients").then(yt=>{var _e=[],Ue=[];yt.data.forEach(vt=>{_e.push(vt._id),Ue.push(vt.totalQuantity)}),console.log("Labels: ",_e),console.log("Data: ",Ue),x(_e),S(Ue)}).catch(yt=>{console.log("Error",yt)}),Et.get("/orders/countToppings").then(yt=>{var _e=[],Ue=[];yt.data.forEach(vt=>{_e.push(vt._id),Ue.push(vt.totalQuantity)}),console.log("Labels: ",_e),console.log("Data: ",Ue),C(_e),U(Ue)}).catch(yt=>{console.log("Error",yt)}),Et.get("/orders/getCrunchTime").then(yt=>{console.log("Response",yt);var _e=[],Ue=[];yt.data.forEach(vt=>{_e.push(vt.hour),Ue.push(vt.count)}),console.log("Labels: ",_e),console.log("Data: ",Ue),k(_e),D(Ue)}).catch(yt=>{console.log("Error",yt)}),v(!0)},500),Ai=setInterval(()=>{const yt=new Date,_e=yt.toLocaleTimeString("en-US",{hour12:!0,timeZone:"America/Puerto_Rico"}),Ue=yt.toLocaleDateString("en-US",{timeZone:"America/Puerto_Rico"}),vt=localStorage.getItem("reportSubmittedDate");_e.startsWith("11:30:00 PM")&&vt!=Ue&&(Qr(),Kn.success(`its time!${_e}`),mt.current.click(),localStorage.setItem("reportSubmittedDate",Ue),clearInterval(Ai),Bi())},1e3);return()=>{clearInterval(ln),clearInterval(Kt),clearInterval(Ai)}},[]);const $t=Oe=>{H(Oe.target.value)},en=Oe=>{Xe(Oe.target.value)},Pt=Oe=>{He(Oe.target.value)},qt=Oe=>{ft(Oe.target.value)},lt=Oe=>{oe(Oe.target.value)},Ii=Oe=>{it(Oe.target.value)},[pn,or]=B.useState(!1),[gn,zn]=B.useState(!1),[Wr,rn]=B.useState(""),Ss=async Oe=>{dt(!0);const Kt="Daily Report",ln=et.internal.pageSize.getHeight(),Ai=et.internal.pageSize.getWidth(),yt=100,_e=et.getStringUnitWidth(Kt)*et.internal.getFontSize()/et.internal.scaleFactor,Ue=(Ai-_e)/2;et.text(Kt,Ue,10);const vt=(on,Jn)=>on+Jn>ln-20?(et.addPage(),20):on;et.setDrawColor(0),et.setLineWidth(.5),et.line(20,15,Ai-20,15),et.text("Orders",20,25);let Gt=[];rn("Getting Orders...");try{Gt=(await Et.get("/orders")).data}catch(on){console.error("Error fetching orders:",on)}const bn=["Order ID","Client Name","Payment Method","Total"],Sn=Gt.map(on=>[on._id,on.client_name,on.payment_method,zl(on.total)]);console.error("Order Rows: ",Sn),xv(et,{head:[bn],body:Sn,startY:30,theme:"grid"});let Ae=et.lastAutoTable.finalY||40;et.text("Total Sale",20,Ae+20);const Nt=["Date","Ice Creams","Drinks","Ath","Cash","Total"];console.log("Timestamp",O);const an=[[O,r+a+l+u,h,zl(n),zl(t),zl(n+t)]];xv(et,{head:[Nt],body:an,startY:Ae+25,theme:"grid",headStyles:{fillColor:[255,165,0]}}),rn("Counting Orders..."),Et.get("/orders/count").then(on=>{console.log("Count Response",on.data);var Jn=on.data;console.log("Map",Jn),Jn.forEach(cn=>{console.log("iterating calculations"),console.log("object to look: ",cn),cn._id=="rolls"?(console.log("There are rolls"),s(cn.totalQuantity)):cn._id=="shakes"?(console.log("There are shakes"),o(cn.totalQuantity)):cn._id=="banana"?c(cn.totalQuantity):cn._id=="puppy"?d(cn.totalQuantity):cn._id=="drinks"?p(cn.totalQuantity):console.log("Types not found")})}).catch(on=>{console.log("Error",on)}),rn("Counting Ingredients on All Orders..."),Et.get("/orders/countIngredients").then(on=>{var Jn=[],cn=[];on.data.forEach(Ni=>{Jn.push(Ni._id),cn.push(Ni.totalQuantity)}),console.log("Labels: ",Jn),console.log("Data: ",cn),x(Jn),S(cn)}).catch(on=>{console.log("Error",on)}),rn("Counting Toppings on All Orders..."),Et.get("/orders/countToppings").then(on=>{var Jn=[],cn=[];on.data.forEach(Ni=>{Jn.push(Ni._id),cn.push(Ni.totalQuantity)}),console.log("Labels: ",Jn),console.log("Data: ",cn),C(Jn),U(cn)}).catch(on=>{console.log("Error",on)}),et.lastAutoTable.finalY;const Bt=()=>{const on="0123456789ABCDEF";let Jn="#";for(let cn=0;cn<6;cn++)Jn+=on[Math.floor(Math.random()*16)];return Jn},Ct=(on,Jn,cn)=>{const Ni=Bt(),za=Bt(),Ds={type:"bar",data:{labels:Jn.map(es=>es),datasets:[{label:Jn,data:on,backgroundColor:Ni,borderColor:za,borderWidth:1}]},options:{responsive:!1,maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!1},title:{display:!0,text:cn,font:{size:16}},plugins:{datalabels:{anchor:"center",align:"center    ",color:"black",font:{weight:"bold"},formatter:es=>es}}}};return`https://quickchart.io/chart?c=${encodeURIComponent(JSON.stringify(Ds))}`},Qn=[Ct(w.map(on=>on),b,"Top 5 Ingredients"),Ct(R.map(on=>on),A,"Top 5 Toppings"),Ct([r,a,l,u],["Rolls","Shakes","Banana","Puppy"],"Ice Creams by type"),Ct(j.map(on=>on),N,"Crunch Time")];let In=et.previousAutoTable.finalY+20;const As=(on,Jn)=>new Promise(cn=>{const Ni=new Image;Ni.src=on,Ni.onload=()=>{Jn=vt(Jn,yt),et.addImage(Ni,"PNG",10,Jn,Ai-20,yt),cn(Jn+yt+10)}}),hs=async()=>{for(const cn of Qn)In=await As(cn,In);let on=new FormData;const Jn=et.output("blob");on.append("file",Jn,`${O}.pdf`);try{rn("Uploading...");const cn=await Et.post("/upload",on,{headers:{"Content-Type":"multipart/form-data"}});if(cn.status===200&&(cn!=null&&cn.data)){console.log("Respuesta",cn.data);const Ni=Object.keys(cn.data.response);console.log("Keys",Ni);const za=cn.data.response.shareableLink;rn("Posting Sale...");try{const Ds=await Et.post("/sales",{ice_creams:r+a+l+u,drinks:h,ath:n,cash:t,total:n+t,report:za});console.log("Response:",Ds.data.sale_id),or(!0),await Et.post("/orders/copy_orders",{sale_id:Ds.data.sale_id}).then(es=>{console.log(es.data),J(Sr=>Sr+1),location.reload()}).catch(es=>{console.log("Error",es)}),await Et.delete("/orders").then(es=>{console.log(es.data),J(Sr=>Sr+1),location.reload()}).catch(es=>{console.log("Error",es)}),window.location.reload()}catch(Ds){console.error("Error",Ds)}}}catch(cn){rn("Error Uploading..."),console.error("Error uploading file:",cn)}console.log("Report generated"),Dt(!1)};rn("Generating Charts..."),hs(),console.log("No longer deleting")},Un=Oe=>{console.log("Month",ze),console.log("Year",rt),console.log("Day",Te),Et.get("/sales",{params:{month:ze,day:Te,year:rt}}).then(Kt=>{console.log("Response",Kt.data),be(Kt.data)}).catch(Kt=>{console.log("Error",Kt)})},zr=async Oe=>{try{console.log(Oe);const Kt=await Et.delete("/sales",{data:{id:Oe}});console.log("Item deleted:",Kt.data),Et.get("/sales").then(ln=>{console.log("Response",ln.data),be(ln.data)}).catch(ln=>{console.log("Error",ln)})}catch(Kt){console.log("error:",Kt)}_s(!1)},ws=Oe=>{console.log("Sales to be reported",ye),Et.get("/sales/sum",{params:{month:ze,day:Te,year:rt}}).then(Kt=>{console.log("Response",Kt.data);let ln=Kt.data.totals;console.log("SUMMMMMMMMMMMM",ln);const Ai="Searched Report",yt=et.internal.pageSize.getWidth(),_e=et.getStringUnitWidth(Ai)*et.internal.getFontSize()/et.internal.scaleFactor,Ue=(yt-_e)/2;et.text(Ai,Ue,10),et.setDrawColor(0),et.setLineWidth(.5),et.line(20,15,yt-20,15);const vt=["Ice Creams","Drinks","Ath","Cash","Total"];let Lt=ln.IceCreams,Gt=ln.Drinks,bn=ln.ATH,Sn=ln.Cash,Ae=ln.Total;const Ke=[[Lt,Gt,zl(bn),zl(Sn),zl(Ae)]];xv(et,{head:[vt],body:Ke,startY:20,theme:"grid"});let Nt=et.lastAutoTable.finalY||40;et.text("Sales By Day",20,Nt+20);const Bt=["Date","Ice Creams","Drinks","Ath","Cash","Total"];console.log("Timestamp",O);const Ct=[];ye.forEach(Qn=>{const In=[Qn.Date,Qn.IceCreams,Qn.Drinks,zl(Qn.ATH),zl(Qn.CASH),zl(Qn.Total)];Ct.push(In)}),xv(et,{head:[Bt],body:Ct,startY:Nt+25,theme:"grid"}),et.save(`${O}.pdf`),console.log("Report generated")}).catch(Kt=>{console.log("Error",Kt)})},[si,Ht]=B.useState(0),[Ln,_s]=B.useState(!1),ai=()=>_s(!1),xr=Oe=>{_s(!0),Ht(Oe)},[Gr,Dt]=B.useState(!1),Bi=()=>Dt(!1),Qr=()=>Dt(!0),Ui=Oe=>{window.open(Oe,"_blank")},[_i,Ei]=B.useState(!1),[Cn,Pi]=B.useState(!0),[lr,Jr]=B.useState(1),cr=10,Ki=Math.ceil(ye.length/cr),Xi=(lr-1)*cr,Rr=ye.slice(Xi,Xi+cr);console.log("Current Rows",Rr[1]);const ds=()=>{lr<Ki&&Jr(lr+1)},Zr=()=>{lr>1&&Jr(lr-1)},[Es,oi]=B.useState([]),[fs,br]=B.useState([]),[Pr,Vr]=B.useState(!1),[ra,li]=B.useState([]),[Wa,Ts]=B.useState(!0),Ti=Oe=>({0:"Cielo despejado ☀️",1:"Mayormente despejado 🌤️",2:"Parcialmente nublado ⛅",3:"Nublado ☁️",45:"Niebla 🌫️",48:"Niebla con escarcha ❄️",51:"Llovizna ligera 🌦️",53:"Llovizna moderada 🌦️",55:"Llovizna densa 🌧️",61:"Lluvia ligera 🌧️",63:"Lluvia moderada 🌧️",65:"Lluvia intensa 🌧️",80:"Chubascos 🌦️",95:"Tormenta ⛈️"})[Oe]||"Clima desconocido";return Wa?_.jsx("p",{children:"Cargando pronóstico..."}):_.jsxs("div",{children:[_.jsx(Wt,{show:Gr,onHide:Bi,children:ut?_.jsxs(Wt.Body,{children:["Submiting Report:",Wr]}):_.jsxs(_.Fragment,{children:[_.jsx(Wt.Header,{closeButton:!0,children:_.jsx(Wt.Title,{children:"Submmiting Sale"})}),_.jsx(Wt.Body,{children:"Warning, you're about to submit a sale!"}),_.jsxs(Wt.Footer,{children:[_.jsx(so,{variant:"secondary",onClick:Bi,children:"Cancel"}),_.jsx("button",{ref:mt,className:"btn btn-primary",onClick:Ss,children:"Submit"})]})]})}),_.jsxs(Wt,{show:Ln,onHide:ai,children:[_.jsx(Wt.Header,{closeButton:!0,children:_.jsx(Wt.Title,{children:"Deleting Sale"})}),_.jsx(Wt.Body,{children:"Warning, you're about to delete a sale!"}),_.jsxs(Wt.Footer,{children:[_.jsx(so,{variant:"secondary",onClick:ai,children:"Cancel"}),_.jsx("button",{className:"btn btn-primary",onClick:()=>zr(si),children:"Delete"})]})]}),_.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between",style:{height:"10vh"},children:[_.jsx("div",{className:"d-flex pt-3 w-25 pb-3 text-center align-items-center justify-content-center",children:_.jsx(oo,{children:_.jsx(oo.Link,{to:"/",as:md,className:"btn ",style:{fontSize:"1rem"},children:"Home"})})}),_.jsx("div",{className:"pt-3 pb-3 d-flex w-75 text-center justify-content-center align-items-center display-6",children:"Ventas"}),_.jsx("div",{className:"text-end me-4 mt-3",children:_.jsxs("button",{className:"btn btn-outline-primary rounded-circle p-3 d-flex flex-row",onClick:()=>Vr(Oe=>!Oe),title:"Tu selección",children:[_.jsx("div",{className:"",children:"AI"}),_.jsx("div",{className:"",children:"🧠"})]})}),_.jsx("div",{className:"d-flex justify-content-center pt-3 pb-3 w-25"})]}),Pr&&_.jsxs("div",{className:"position-fixed end-0 top-0 bg-light border p-4 rounded shadow bg-dark text-white",style:{width:"50vw",height:"100vh",zIndex:999,overflowY:"auto"},children:[_.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center mb-3",children:[_.jsx("h5",{className:"text-center mb-3",children:"Predicciones"}),_.jsx("button",{className:"btn btn-sm btn-outline-danger rounded-circle p-3",onClick:()=>Vr(Oe=>!Oe),title:"Tu selección",children:_.jsx("i",{className:"bi bi-x-lg"})})]}),_.jsx("div",{className:"d-flex flex-column justify-content-between align-items-center mb-3",children:_.jsx("div",{className:"d-flex flex-row justify-content-between align-items-center mb-3",children:_.jsxs("div",{className:"bg-dark text-white p-4 rounded shadow",children:[_.jsx("h2",{className:"text-center mb-4",children:"🗞️ Pronóstico Semanal del Clima"}),_.jsx("div",{className:"row row-cols-1 row-cols-md-3 g-4",children:ra.map((Oe,Kt)=>_.jsx("div",{className:"col",children:_.jsx("div",{className:"card text-white bg-primary h-100",children:_.jsxs("div",{className:"card-body",children:[_.jsx("h5",{className:"card-title text-capitalize",children:Oe.dia}),_.jsxs("p",{className:"card-text",children:[_.jsx("strong",{children:Ti(Oe.codigo)}),_.jsx("br",{}),"Máx: ",Oe.tempMax,"°F | Mín: ",Oe.tempMin,"°F"]})]})})},Kt))})]})})}),_.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center mb-3",children:[_.jsx("h2",{className:"mb-4",children:"🔮 Predicción de Ventas (Próximos 7 días)"}),_.jsx("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4 w-100",children:(Rt==null?void 0:Rt.length)>0?Rt.map((Oe,Kt)=>{const ln=Oe!=null&&Oe.ds?Ik(Oe.ds):null,Ai=(Oe==null?void 0:Oe.weekday)||(ln?xS(ln,"EEEE",{locale:kk}):"Día"),yt=ln?xS(ln,"dd/MM/yyyy"):"Fecha desconocida",_e=typeof(Oe==null?void 0:Oe.yhat)=="number"?Oe.yhat:0;return _.jsx("div",{className:"col",children:_.jsx("div",{className:"card text-white bg-primary h-100 shadow-sm",children:_.jsxs("div",{className:"card-body text-center",children:[_.jsx("h5",{className:"card-title text-capitalize",children:Ai}),_.jsx("p",{className:"card-text mb-1",children:yt}),_.jsxs("p",{className:"card-text fs-5",children:["$",_e.toFixed(2)]})]})})},Kt)}):_.jsx("div",{className:"text-center text-muted",children:"No hay datos disponibles"})})]})]}),_.jsxs("div",{className:"d-flex justify-content-start align-items-center flex-column",children:[_.jsx("div",{className:"d-flex flex-row",children:_.jsxs("div",{className:"btn-group rounded-pill border border-dark overflow-hidden",style:{width:"350px",height:"60px"},children:[_.jsx("button",{className:`btn w-50 ${ae?"btn-dark text-white":"btn-outline-dark"}`,onClick:()=>ce(!0),style:{fontSize:"1rem"},children:"Ventas de Hoy"}),_.jsx("button",{className:`btn w-50 ${ae?"btn-outline-dark":"btn-dark text-white"}`,onClick:()=>ce(!1),style:{fontSize:"1rem"},children:"Todas las Ventas"})]})}),ae?_.jsxs("div",{className:"text-center",children:[_.jsx("div",{className:"d-flex justify-content-around align-items-center flex-row",children:m&&_.jsx("button",{className:"btn btn-success rounded-pill p-3 m-2",onClick:Qr,children:" Someter Reporte de Hoy"})}),m&&_.jsxs("div",{className:"w-100 d-flex text-center flex-column align-items-center justify-content-center w-100 mt-5",children:[_.jsxs(dC,{className:"w-100",striped:!0,bordered:!0,hover:!0,size:"lg",responsive:"md",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"text-center",children:[_.jsx("th",{children:"Date"}),_.jsx("th",{children:"ICs"}),_.jsx("th",{children:"Drinks"}),_.jsx("th",{children:"ATH"}),_.jsx("th",{children:"CASH"}),_.jsx("th",{children:"Total"})]})}),_.jsx("tbody",{children:_.jsxs("tr",{className:"text-center",children:[_.jsx("td",{children:O}),_.jsx("td",{children:r+a+l+u}),_.jsx("td",{children:h}),_.jsx("td",{children:_.jsx(Wf,{value:n})}),_.jsx("td",{children:_.jsx(Wf,{value:t})}),_.jsx("td",{children:_.jsx(Wf,{value:n+t})})]})})]}),_.jsxs("div",{className:"container w-100 text-center d-flex flex-row justify-content-around",children:[_.jsx("h6",{children:"Statistic Chart"}),_.jsxs("select",{value:le,onChange:$t,className:"p-2",children:[_.jsx("option",{value:"",children:"Choose Chart"}),_.jsx("option",{value:"Ice Creams per type",children:"Ice Creams per type"}),_.jsx("option",{value:"Top 5 Ingredients",children:"Top 5 Ingredients"}),_.jsx("option",{value:"Top 5 Toppings",children:"Top 5 Toppings"}),_.jsx("option",{value:"Crunch Time",children:"Crunch Time"})]})]}),_.jsxs("div",{className:"container d-flex ",children:[V&&_.jsx(Af,{className:"m-2",keys:["Rolls","Shakes","Banana","Puppy"],values:[r,a,l,u]}),W&&_.jsx(Af,{className:"m-2",keys:b,values:w}),fe&&_.jsx(Af,{className:"m-2",keys:A,values:R}),K&&_.jsx(Af,{className:"m-2",keys:N,values:j})]}),pn&&_.jsx(_.Fragment,{children:Kn.success("File Uploaded")}),_.jsx($0,{position:"top-right"})]})]}):_.jsxs("div",{className:"container w-100 text-center d-flex flex-column justify-content-center align-items-center",children:[_.jsx("div",{className:"",children:_.jsx("div",{className:"d-flex justify-content-center m-3",children:_.jsxs("div",{className:"btn-group rounded-pill border border-success overflow-hidden",style:{width:"350px",height:"60px"},children:[_.jsx("button",{className:`btn w-50 ${_i?"btn-success text-white":"btn-outline-success"}`,onClick:()=>Ei(!0),style:{fontSize:"1rem"},children:"Reportes"}),_.jsx("button",{className:`btn w-50 ${_i?"btn-outline-success":"btn-success text-white"}`,onClick:()=>Ei(!1),style:{fontSize:"1rem"},children:"Gráficas"})]})})}),_i?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"d-flex justify-content-center ",children:_.jsxs("div",{className:"btn-group rounded-pill border border-primary overflow-hidden",style:{width:"350px",height:"60px"},children:[_.jsx("button",{className:`btn w-50 ${Cn?"btn-primary text-white":"btn-outline-primary"}`,onClick:()=>Pi(!0),style:{fontSize:"1rem"},children:"Vista de Lista"}),_.jsx("button",{className:`btn w-50 ${Cn?"btn-outline-primary":"btn-primary text-white"}`,onClick:()=>Pi(!1),style:{fontSize:"1rem"},children:"Vista de Calendario"})]})}),Cn?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"m-5 container w-100 text-center d-flex flex-row justify-content-around",children:[_.jsxs("select",{value:Te,onChange:en,className:"p-2",children:[_.jsx("option",{value:"",children:"Day"}),Array.from({length:31},(Oe,Kt)=>_.jsx("option",{value:`0${Kt+1}`,children:Kt+1},Kt))]}),_.jsxs("select",{value:ze,onChange:Pt,className:"p-2",children:[_.jsx("option",{value:"",children:"Month"}),_.jsx("option",{value:"01",children:"January"}),_.jsx("option",{value:"02",children:"February"}),_.jsx("option",{value:"03",children:"March"}),_.jsx("option",{value:"04",children:"April"}),_.jsx("option",{value:"05",children:"May"}),_.jsx("option",{value:"06",children:"June"}),_.jsx("option",{value:"07",children:"July"}),_.jsx("option",{value:"08",children:"August"}),_.jsx("option",{value:"09",children:"September"}),_.jsx("option",{value:"10",children:"October"}),_.jsx("option",{value:"11",children:"November"}),_.jsx("option",{value:"12",children:"December"})]}),_.jsxs("select",{value:rt,className:"p-2",onChange:qt,children:[_.jsx("option",{value:"",children:"Year"}),_.jsx("option",{value:"2024",children:"2024"}),_.jsx("option",{value:"2025",children:"2025"})]}),_.jsx("button",{className:"p-2 btn",onClick:Un,children:"Search"})]}),_.jsxs(dC,{className:"",striped:!0,bordered:!0,hover:!0,children:[_.jsx("thead",{children:_.jsxs("tr",{className:"text-center",children:[_.jsx("th",{children:"Date"}),_.jsx("th",{children:"Total"}),_.jsx("th",{children:"Report"})," ",_.jsx("th",{children:"Actions"})]})}),_.jsx("tbody",{children:ye.length===0?_.jsx("tr",{children:_.jsx("td",{colSpan:4,className:"text-center text-muted py-3",children:"No sales found"})}):Rr.length>0?Rr.map(Oe=>Oe._doc.Closed===!0?_.jsxs("tr",{children:[_.jsx("td",{colSpan:1,className:"text-center text-muted py-3",children:Oe.Date||"No hay fecha"}),_.jsx("td",{colSpan:1,className:"text-center text-muted py-3",children:Oe._doc.Name||"Anónimo"}),_.jsx("td",{colSpan:1,className:"text-center text-muted py-3",children:Oe._doc.Message||"Día cerrado"}),_.jsx("td",{colSpan:1,children:_.jsx("button",{className:"btn text-secondary",onClick:()=>xr(Oe._id),children:"Delete"})})]},Oe._id):_.jsxs("tr",{className:"text-center",children:[_.jsx("td",{children:Oe.Date}),_.jsx("td",{children:_.jsx(Wf,{value:Oe.Total})}),_.jsx("td",{children:Oe.Report?_.jsx("button",{className:"btn text-secondary",onClick:()=>Ui(Oe.Report),children:"Open"}):"No Report"}),_.jsx("td",{children:_.jsx("button",{className:"btn text-secondary",onClick:()=>xr(Oe._id),children:"Delete"})})]},Oe._id)):_.jsx("tr",{children:_.jsx("td",{colSpan:4,className:"text-center text-muted py-3",children:"No data found"})})})]}),_.jsxs("div",{className:"d-flex justify-content-around align-items-center mt-3 w-100",children:[_.jsx("button",{onClick:Zr,disabled:lr===1,className:"btn btn-outline-dark rounded-pill p-3",children:"Previous"}),_.jsxs("span",{children:["Page ",lr," of ",Ki]}),_.jsx("button",{onClick:ds,disabled:lr===Ki,className:"btn btn-outline-dark rounded-pill p-3",children:"Next"})]}),_.jsx("button",{className:"btn btn-outline-dark rounded-pill p-3 m-2",onClick:ws,children:"Generate Report of Search"})]}):_.jsx(_.Fragment,{children:_.jsx("div",{className:"text-center m-2",children:_.jsx("div",{className:"d-flex flex-wrap align-items-center ms-auto gap-3",children:_.jsx(xJ,{className:"me-2",tasks:ye})})})})]}):_.jsxs("div",{className:" d-flex flex-column justify-content-around align-items-center w-100 ",children:[_.jsxs("div",{className:"mt-4 mb-4",children:[_.jsxs("select",{value:Ze,lassName:"p-2 m-4",onChange:Ii,children:[_.jsx("option",{value:"0",children:"Total Sales"}),_.jsx("option",{value:"1",children:"Average sale by day of the week"}),_.jsx("option",{value:"2",children:"Average Ice Creams per hour"})]}),Se.length>0&&Ze=="2"?_.jsx(_.Fragment,{}):_.jsxs("select",{value:Ie,className:"p-2 m-4",onChange:lt,children:[_.jsx("option",{value:"2025",children:"2025"}),_.jsx("option",{value:"2024",children:"2024"})]})]}),Se.length>0&&Ze=="0"?_.jsx("div",{className:" d-flex flex-wrap w-100 justify-content-around ",children:Object.keys(Se).sort((Oe,Kt)=>parseInt(Se[Oe].Month)-parseInt(Se[Kt].Month)).map(Oe=>Ie===Se[Oe].Year?_.jsxs("div",{children:[Se[Oe].Month=="01"?_.jsxs("p",{children:["January ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="02"?_.jsxs(_.Fragment,{children:["February ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="03"?_.jsxs(_.Fragment,{children:["March ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="04"?_.jsxs(_.Fragment,{children:["April ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="05"?_.jsxs(_.Fragment,{children:["May ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="06"?_.jsxs(_.Fragment,{children:["June ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="07"?_.jsxs(_.Fragment,{children:["July ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="08"?_.jsxs(_.Fragment,{children:["August ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="09"?_.jsxs(_.Fragment,{children:["September ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="10"?_.jsxs(_.Fragment,{children:["October ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="11"?_.jsxs(_.Fragment,{children:["November ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="12"?_.jsxs(_.Fragment,{children:["December ",Se[Oe].Year," Sales"]}):_.jsx(_.Fragment,{children:"Other Month"}),_.jsx(Af,{className:"m-5",keys:["Ice Creams","Drinks","ATH","Cash","Total"],values:[Se[Oe].IceCreams,Se[Oe].Drinks,Se[Oe].ATH,Se[Oe].Cash,Se[Oe].Total]})]},Oe):_.jsx(_.Fragment,{}))}):Se.length>0&&Ze=="1"?_.jsx("div",{className:" d-flex flex-wrap w-100 justify-content-around ",children:Object.keys(Se).sort((Oe,Kt)=>parseInt(Se[Oe].Month)-parseInt(Se[Kt].Month)).map(Oe=>Ie===Se[Oe].Year?_.jsxs("div",{children:[Se[Oe].Month=="01"?_.jsxs("p",{children:["January ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="02"?_.jsxs(_.Fragment,{children:["February ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="03"?_.jsxs(_.Fragment,{children:["March ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="04"?_.jsxs(_.Fragment,{children:["April ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="05"?_.jsxs(_.Fragment,{children:["May ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="06"?_.jsxs(_.Fragment,{children:["June ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="07"?_.jsxs(_.Fragment,{children:["July ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="08"?_.jsxs(_.Fragment,{children:["August ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="09"?_.jsxs(_.Fragment,{children:["September ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="10"?_.jsxs(_.Fragment,{children:["October ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="11"?_.jsxs(_.Fragment,{children:["November ",Se[Oe].Year," Sales"]}):Se[Oe].Month=="12"?_.jsxs(_.Fragment,{children:["December ",Se[Oe].Year," Sales"]}):_.jsx(_.Fragment,{children:"Other Month"}),Se[Oe].DayTotals?_.jsx(Af,{className:"m-5",keys:["Sundays","Mondays","Tuesdays","Wednesdays","Thursdays","Fridays","Saturdays"],values:[Se[Oe].DayTotals.Mondays,Se[Oe].DayTotals.Tuesdays,Se[Oe].DayTotals.Wednesdays,Se[Oe].DayTotals.Thursdays,Se[Oe].DayTotals.Fridays,Se[Oe].DayTotals.Saturdays,Se[Oe].DayTotals.Sundays]}):_.jsx(Af,{className:"m-5",keys:["Sundays","Mondays","Tuesdays","Wednesdays","Thursdays","Fridays","Saturdays"],values:[0,0,0,0,0,0,0]})]},Oe):_.jsx(_.Fragment,{}))}):Se.length>0&&Ze=="2"?_.jsx("div",{className:"d-flex flex-wrap w-100 justify-content-around h-100",children:_.jsx(gQ,{className:"m-5",dataPoints:Se})}):_.jsx(_.Fragment,{children:"No Sales"})]})]})]})]})}const wt=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},yre=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=vre},vre=Number.MAX_SAFE_INTEGER||9007199254740991;let jt=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),De=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",n.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",n.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.ASSET_LIST_LOAD_ERROR="assetListLoadError",n.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",n.ASSET_LIST_PARSING_ERROR="assetListParsingError",n.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.ATTACH_MEDIA_ERROR="attachMediaError",n.UNKNOWN="unknown",n}({}),$=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.MEDIA_ENDED="hlsMediaEnded",n.STALL_RESOLVED="hlsStallResolved",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFERED_TO_END="hlsBufferedToEnd",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n.ASSET_LIST_LOADING="hlsAssetListLoading",n.ASSET_LIST_LOADED="hlsAssetListLoaded",n.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",n.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",n.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",n.INTERSTITIAL_STARTED="hlsInterstitialStarted",n.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",n.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",n.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",n.INTERSTITIAL_ENDED="hlsInterstitialEnded",n.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",n.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",n.EVENT_CUE_ENTER="hlsEventCueEnter",n}({});var Pn={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},kt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class sp{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class xre{constructor(e,t,i,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new sp(e),this.fast_=new sp(t),this.defaultTTFB_=r,this.ttfb_=new sp(e)}update(e,t){const{slow_:i,fast_:r,ttfb_:s}=this;i.halfLife!==e&&(this.slow_=new sp(e,i.getEstimate(),i.getTotalWeight())),r.halfLife!==t&&(this.fast_=new sp(t,r.getEstimate(),r.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new sp(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,r=e/1e3,s=i/r;this.fast_.sample(r,s),this.slow_.sample(r,s)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function bre(n,e,t){return(e=wre(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wi(){return wi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},wi.apply(null,arguments)}function Rk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function pi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(t),!0).forEach(function(i){bre(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rk(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Sre(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function wre(n){var e=Sre(n,"string");return typeof e=="symbol"?e:e+""}class Eu{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const i=`[${e}]:`;this.trace=ad,this.debug=t.debug.bind(null,i),this.log=t.log.bind(null,i),this.warn=t.warn.bind(null,i),this.info=t.info.bind(null,i),this.error=t.error.bind(null,i)}}const ad=function(){},_re={trace:ad,debug:ad,log:ad,warn:ad,info:ad,error:ad};function F_(){return wi({},_re)}function Ere(n,e){const t=self.console[n];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${n}] >`):ad}function Pk(n,e,t){return e[n]?e[n].bind(e):Ere(n,t)}const j_=F_();function Tre(n,e,t){const i=F_();if(typeof console=="object"&&n===!0||typeof n=="object"){const r=["debug","log","info","warn","error"];r.forEach(s=>{i[s]=Pk(s,n,t)});try{i.log(`Debug logs enabled for "${e}" in hls.js version 1.6.2`)}catch{return F_()}r.forEach(s=>{j_[s]=Pk(s,n)})}else wi(j_,i);return i}const Wn=j_;function $d(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Are(n){return typeof self<"u"&&n===self.ManagedMediaSource}function ZM(n,e){const t=Object.keys(n),i=Object.keys(e),r=t.length,s=i.length;return!r||!s||r===s&&!t.some(a=>i.indexOf(a)===-1)}function fo(n,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(n);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const t=n.length;let i,r,s,a="",o=0;for(;o<t;){if(i=n[o++],i===0&&e)return a;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:r=n[o++],a+=String.fromCharCode((i&31)<<6|r&63);break;case 14:r=n[o++],s=n[o++],a+=String.fromCharCode((i&15)<<12|(r&63)<<6|(s&63)<<0);break}}return a}const Jl={hexDump:function(n){let e="";for(let t=0;t<n.length;t++){let i=n[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e}};function Lre(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var SS={exports:{}},Nk;function Cre(){return Nk||(Nk=1,function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):c;var p=o.parseURL(l);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var m=r.exec(p.path);p.netLoc=m[1],p.path=m[2]}p.netLoc&&!p.path&&(p.path="/");var v={scheme:p.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(v.netLoc=p.netLoc,h.path[0]!=="/"))if(!h.path)v.path=p.path,h.params||(v.params=p.params,h.query||(v.query=p.query));else{var b=p.path,x=b.substring(0,b.lastIndexOf("/")+1)+h.path;v.path=o.normalizePath(x)}return v.path===null&&(v.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(v)},parseURL:function(l){var c=i.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=o})()}(SS)),SS.exports}var ZE=Cre();class eT{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var xi={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class e4{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,kre(this,"stats")}setByteRange(e,t){const i=e.split("@",2);let r;i.length===1?r=(t==null?void 0:t.byteRangeEndOffset)||0:r=parseInt(i[1]),this._byteRange=[r,parseInt(i[0])+r]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[xi.AUDIO]:null,[xi.VIDEO]:null,[xi.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new eT),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=ZE.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[xi.AUDIO]=null,e[xi.VIDEO]=null,e[xi.AUDIOVIDEO]=null}}function vs(n){return n.sn!=="initSegment"}class wS extends e4{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],t=this.byteRange[1];if(wt(e)&&wt(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const i=Object.keys(this.levelkeys);if(i.length===1)return this._decryptdata=this.levelkeys[i[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=wt(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),i=t.length;if(i>1||i===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!wt(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return vs(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,i,r,s,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:i,startDTS:r,endDTS:s,partial:a};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,i),l.startDTS=Math.min(l.startDTS,r),l.endDTS=Math.max(l.endDTS,s)}}class Ire extends e4{constructor(e,t,i,r,s){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function t4(n,e){const t=Object.getPrototypeOf(n);if(t){const i=Object.getOwnPropertyDescriptor(t,e);return i||t4(t,e)}}function kre(n,e){const t=t4(n,e);t&&(t.enumerable=!0,Object.defineProperty(n,e,t))}const lx=Math.pow(2,32)-1,Rre=[].push,n4={video:1,audio:2,id3:3,text:4};function rs(n){return String.fromCharCode.apply(null,n)}function i4(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function Yt(n,e){const t=r4(n,e);return t<0?4294967296+t:t}function Dk(n,e){let t=Yt(n,e);return t*=Math.pow(2,32),t+=Yt(n,e+4),t}function r4(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function _S(n,e,t){n[e]=t>>24,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=t&255}function Pre(n){const e=n.byteLength;for(let t=0;t<e;){const i=Yt(n,t);if(i>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=i>1?t+i:e}return!1}function hn(n,e){const t=[];if(!e.length)return t;const i=n.byteLength;for(let r=0;r<i;){const s=Yt(n,r),a=rs(n.subarray(r+4,r+8)),o=s>1?r+s:i;if(a===e[0])if(e.length===1)t.push(n.subarray(r+8,o));else{const l=hn(n.subarray(r+8,o),e.slice(1));l.length&&Rre.apply(t,l)}r=o}return t}function Nre(n){const e=[],t=n[0];let i=8;const r=Yt(n,i);i+=4;let s=0,a=0;t===0?(s=Yt(n,i),a=Yt(n,i+4),i+=8):(s=Dk(n,i),a=Dk(n,i+8),i+=16),i+=2;let o=n.length+a;const l=i4(n,i);i+=2;for(let c=0;c<l;c++){let u=i;const d=Yt(n,u);u+=4;const h=d&2147483647;if((d&2147483648)>>>31===1)return Wn.warn("SIDX has hierarchical references (not supported)"),null;const m=Yt(n,u);u+=4,e.push({referenceSize:h,subsegmentDuration:m,info:{duration:m/r,start:o,end:o+h-1}}),o+=h,u+=4,i=u}return{earliestPresentationTime:s,timescale:r,version:t,referencesCount:l,references:e}}function s4(n){const e=[],t=hn(n,["moov","trak"]);for(let r=0;r<t.length;r++){const s=t[r],a=hn(s,["tkhd"])[0];if(a){let o=a[0];const l=Yt(a,o===0?12:20),c=hn(s,["mdia","mdhd"])[0];if(c){o=c[0];const u=Yt(c,o===0?12:20),d=hn(s,["mdia","hdlr"])[0];if(d){const h=rs(d.subarray(8,12)),p={soun:xi.AUDIO,vide:xi.VIDEO}[h],m=hn(s,["mdia","minf","stbl","stsd"])[0],v=Dre(m);p?(e[l]={timescale:u,type:p,stsd:v},e[p]=pi({timescale:u,id:l},v)):e[l]={timescale:u,type:h,stsd:v}}}}}return hn(n,["moov","mvex","trex"]).forEach(r=>{const s=Yt(r,4),a=e[s];a&&(a.default={duration:Yt(r,12),flags:Yt(r,20)})}),e}function Dre(n){const e=n.subarray(8),t=e.subarray(86),i=rs(e.subarray(4,8));let r=i,s;const a=i==="enca"||i==="encv";if(a){const c=hn(e,[i])[0].subarray(i==="enca"?28:78);hn(c,["sinf"]).forEach(d=>{const h=hn(d,["schm"])[0];if(h){const p=rs(h.subarray(4,8));if(p==="cbcs"||p==="cenc"){const m=hn(d,["frma"])[0];m&&(r=rs(m))}}})}const o=r;switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const l=hn(t,["avcC"])[0];l&&l.length>3&&(r+="."+Ev(l[1])+Ev(l[2])+Ev(l[3]),s=_v(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const l=hn(e,[i])[0],c=hn(l.subarray(28),["esds"])[0];if(c&&c.length>7){let u=4;if(c[u++]!==3)break;u=ES(c,u),u+=2;const d=c[u++];if(d&128&&(u+=2),d&64&&(u+=c[u++]),c[u++]!==4)break;u=ES(c,u);const h=c[u++];if(h===64)r+="."+Ev(h);else break;if(u+=12,c[u++]!==5)break;u=ES(c,u);const p=c[u++];let m=(p&248)>>3;m===31&&(m+=1+((p&7)<<3)+((c[u]&224)>>5)),r+="."+m}break}case"hvc1":case"hev1":{const l=hn(t,["hvcC"])[0];if(l&&l.length>12){const c=l[1],u=["","A","B","C"][c>>6],d=c&31,h=Yt(l,2),p=(c&32)>>5?"H":"L",m=l[12],v=l.subarray(6,12);r+="."+u+d,r+="."+h.toString(16).toUpperCase(),r+="."+p+m;let b="";for(let x=v.length;x--;){const w=v[x];(w||b)&&(b="."+w.toString(16).toUpperCase()+b)}r+=b}s=_v(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{r=_v(r,t)||r;break}case"vp09":{const l=hn(t,["vpcC"])[0];if(l&&l.length>6){const c=l[4],u=l[5],d=l[6]>>4&15;r+="."+Ql(c)+"."+Ql(u)+"."+Ql(d)}break}case"av01":{const l=hn(t,["av1C"])[0];if(l&&l.length>2){const c=l[1]>>>5,u=l[1]&31,d=l[2]>>>7?"H":"M",h=(l[2]&64)>>6,p=(l[2]&32)>>5,m=c===2&&h?p?12:10:h?10:8,v=(l[2]&16)>>4,b=(l[2]&8)>>3,x=(l[2]&4)>>2,w=l[2]&3;r+="."+c+"."+Ql(u)+d+"."+Ql(m)+"."+v+"."+b+x+w+"."+Ql(1)+"."+Ql(1)+"."+Ql(1)+"."+0,s=_v("dav1",t)}break}}return{codec:r,encrypted:a,supplemental:s}}function _v(n,e){const t=hn(e,["dvvC"]),i=t.length?t[0]:hn(e,["dvcC"])[0];if(i){const r=i[2]>>1&127,s=i[2]<<5&32|i[3]>>3&31;return n+"."+Ql(r)+"."+Ql(s)}}function ES(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function Ev(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function Ql(n){return(n<10?"0":"")+n}function Ore(n,e){if(!n||!e)return n;const t=e.keyId;return t&&e.isCommonEncryption&&hn(n,["moov","trak"]).forEach(r=>{const a=hn(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=hn(a,["enca"]);const l=o.length>0;l||(o=hn(a,["encv"])),o.forEach(c=>{const u=l?c.subarray(28):c.subarray(78);hn(u,["sinf"]).forEach(h=>{const p=a4(h);if(p){const m=p.subarray(8,24);m.some(v=>v!==0)||(Wn.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${Jl.hexDump(m)} -> ${Jl.hexDump(t)}`),p.set(t,8))}})})}),n}function a4(n){const e=hn(n,["schm"])[0];if(e){const t=rs(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return hn(n,["schi","tenc"])[0]}return null}function Mre(n,e){return hn(e,["moof","traf"]).reduce((t,i)=>{const r=hn(i,["tfdt"])[0],s=r[0],a=hn(i,["tfhd"]).reduce((o,l)=>{const c=Yt(l,4),u=n[c];if(u){let d=Yt(r,4);if(s===1){if(d===lx)return Wn.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),o;d*=lx+1,d+=Yt(r,8)}const h=u.timescale||9e4,p=d/h;if(wt(p)&&(o===null||p<o))return p}return o},null);return a!==null&&wt(a)&&(t===null||a<t)?a:t},null)}function Fre(n,e){let t=0,i=0,r=0;const s=hn(n,["moof","traf"]);for(let a=0;a<s.length;a++){const o=s[a],l=hn(o,["tfhd"])[0],c=Yt(l,4),u=e[c];if(!u)continue;const d=u.default,h=Yt(l,0)|(d==null?void 0:d.flags);let p=d==null?void 0:d.duration;h&8&&(h&2?p=Yt(l,12):p=Yt(l,8));const m=u.timescale||9e4,v=hn(o,["trun"]);for(let b=0;b<v.length;b++){if(t=jre(v[b]),!t&&p){const x=Yt(v[b],4);t=p*x}u.type===xi.VIDEO?i+=t/m:u.type===xi.AUDIO&&(r+=t/m)}}if(i===0&&r===0){let a=1/0,o=0,l=0;const c=hn(n,["sidx"]);for(let u=0;u<c.length;u++){const d=Nre(c[u]);if(d!=null&&d.references){a=Math.min(a,d.earliestPresentationTime/d.timescale);const h=d.references.reduce((p,m)=>p+m.info.duration||0,0);o=Math.max(o,h+d.earliestPresentationTime/d.timescale),l=o-a}}if(l&&wt(l))return l}return i||r}function jre(n){const e=Yt(n,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let i=0;const r=Yt(n,4);for(let s=0;s<r;s++){if(e&256){const a=Yt(n,t);i+=a,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return i}function Bre(n,e,t){hn(e,["moof","traf"]).forEach(i=>{hn(i,["tfhd"]).forEach(r=>{const s=Yt(r,4),a=n[s];if(!a)return;const o=a.timescale||9e4;hn(i,["tfdt"]).forEach(l=>{const c=l[0],u=t*o;if(u){let d=Yt(l,4);if(c===0)d-=u,d=Math.max(d,0),_S(l,4,d);else{d*=Math.pow(2,32),d+=Yt(l,8),d-=u,d=Math.max(d,0);const h=Math.floor(d/(lx+1)),p=Math.floor(d%(lx+1));_S(l,4,h),_S(l,8,p)}}})})})}function Ure(n){const e={valid:null,remainder:null},t=hn(n,["moof"]);if(t.length<2)return e.remainder=n,e;const i=t[t.length-1];return e.valid=n.slice(0,i.byteOffset-8),e.remainder=n.slice(i.byteOffset-8),e}function $o(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function Ok(n,e){const t=[],i=e.samples,r=e.timescale,s=e.id;let a=!1;return hn(i,["moof"]).map(l=>{const c=l.byteOffset-8;hn(l,["traf"]).map(d=>{const h=hn(d,["tfdt"]).map(p=>{const m=p[0];let v=Yt(p,4);return m===1&&(v*=Math.pow(2,32),v+=Yt(p,8)),v/r})[0];return h!==void 0&&(n=h),hn(d,["tfhd"]).map(p=>{const m=Yt(p,4),v=Yt(p,0)&16777215,b=(v&1)!==0,x=(v&2)!==0,w=(v&8)!==0;let S=0;const A=(v&16)!==0;let C=0;const N=(v&32)!==0;let k=8;m===s&&(b&&(k+=8),x&&(k+=4),w&&(S=Yt(p,k),k+=4),A&&(C=Yt(p,k),k+=4),N&&(k+=4),e.type==="video"&&(a=vb(e.codec)),hn(d,["trun"]).map(R=>{const U=R[0],j=Yt(R,0)&16777215,D=(j&1)!==0;let O=0;const Z=(j&4)!==0,J=(j&256)!==0;let le=0;const H=(j&512)!==0;let V=0;const z=(j&1024)!==0,W=(j&2048)!==0;let te=0;const fe=Yt(R,4);let F=8;D&&(O=Yt(R,F),F+=4),Z&&(F+=4);let K=O+c;for(let ee=0;ee<fe;ee++){if(J?(le=Yt(R,F),F+=4):le=S,H?(V=Yt(R,F),F+=4):V=C,z&&(F+=4),W&&(U===0?te=Yt(R,F):te=r4(R,F),F+=4),e.type===xi.VIDEO){let ae=0;for(;ae<V;){const ce=Yt(i,K);if(K+=4,$re(a,i[K])){const ye=i.subarray(K,K+ce);tT(ye,a?2:1,n+te/r,t)}K+=ce,ae+=ce+4}}n+=le/r}}))})})}),t}function vb(n){if(!n)return!1;const e=n.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function $re(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function tT(n,e,t,i){const r=o4(n);let s=0;s+=e;let a=0,o=0,l=0;for(;s<r.length;){a=0;do{if(s>=r.length)break;l=r[s++],a+=l}while(l===255);o=0;do{if(s>=r.length)break;l=r[s++],o+=l}while(l===255);const c=r.length-s;let u=s;if(o<c)s+=o;else if(o>c){Wn.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(a===4){if(r[u++]===181){const h=i4(r,u);if(u+=2,h===49){const p=Yt(r,u);if(u+=4,p===1195456820){const m=r[u++];if(m===3){const v=r[u++],b=31&v,x=64&v,w=x?2+b*3:0,S=new Uint8Array(w);if(x){S[0]=v;for(let A=1;A<w;A++)S[A]=r[u++]}i.push({type:m,payloadType:a,pts:t,bytes:S})}}}}}else if(a===5&&o>16){const d=[];for(let m=0;m<16;m++){const v=r[u++].toString(16);d.push(v.length==1?"0"+v:v),(m===3||m===5||m===7||m===9)&&d.push("-")}const h=o-16,p=new Uint8Array(h);for(let m=0;m<h;m++)p[m]=r[u++];i.push({payloadType:a,pts:t,uuid:d.join(""),userData:fo(p),userDataBytes:p})}}}function o4(n){const e=n.byteLength,t=[];let i=1;for(;i<e-2;)n[i]===0&&n[i+1]===0&&n[i+2]===3?(t.push(i+2),i+=2):i++;if(t.length===0)return n;const r=e-t.length,s=new Uint8Array(r);let a=0;for(i=0;i<r;a++,i++)a===t[0]&&(a++,t.shift()),s[i]=n[a];return s}function Hre(n){const e=n[0];let t="",i="",r=0,s=0,a=0,o=0,l=0,c=0;if(e===0){for(;rs(n.subarray(c,c+1))!=="\0";)t+=rs(n.subarray(c,c+1)),c+=1;for(t+=rs(n.subarray(c,c+1)),c+=1;rs(n.subarray(c,c+1))!=="\0";)i+=rs(n.subarray(c,c+1)),c+=1;i+=rs(n.subarray(c,c+1)),c+=1,r=Yt(n,12),s=Yt(n,16),o=Yt(n,20),l=Yt(n,24),c=28}else if(e===1){c+=4,r=Yt(n,c),c+=4;const d=Yt(n,c);c+=4;const h=Yt(n,c);for(c+=4,a=2**32*d+h,yre(a)||(a=Number.MAX_SAFE_INTEGER,Wn.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Yt(n,c),c+=4,l=Yt(n,c),c+=4;rs(n.subarray(c,c+1))!=="\0";)t+=rs(n.subarray(c,c+1)),c+=1;for(t+=rs(n.subarray(c,c+1)),c+=1;rs(n.subarray(c,c+1))!=="\0";)i+=rs(n.subarray(c,c+1)),c+=1;i+=rs(n.subarray(c,c+1)),c+=1}const u=n.subarray(c,n.byteLength);return{schemeIdUri:t,value:i,timeScale:r,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:u}}function Wre(n,...e){const t=e.length;let i=8,r=t;for(;r--;)i+=e[r].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=i&255,s.set(n,4),r=0,i=8;r<t;r++)s.set(e[r],i),i+=e[r].byteLength;return s}function zre(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let i,r;i=0,r=new Uint8Array;let s;i>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),Wre([112,115,115,104],new Uint8Array([i,0,0,0]),n,s,r,a,t||new Uint8Array)}function Gre(n){const e=[];if(n instanceof ArrayBuffer){const t=n.byteLength;let i=0;for(;i+32<t;){const r=new DataView(n,i),s=Vre(r);e.push(s),i+=s.size}}return e}function Vre(n){const e=n.getUint32(0),t=n.byteOffset,i=n.byteLength;if(i<e)return{offset:t,size:i};if(n.getUint32(4)!==1886614376)return{offset:t,size:e};const s=n.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:t,size:e};const a=n.buffer,o=Jl.hexDump(new Uint8Array(a,t+12,16)),l=n.getUint32(28);let c=null,u=null;if(s===0){if(e-32<l||l<22)return{offset:t,size:e};u=new Uint8Array(a,t+32,l)}else if(s===1){if(!l||i<t+32+l*16+16)return{offset:t,size:e};c=[];for(let d=0;d<l;d++)c.push(new Uint8Array(a,t+32+d*16,16))}return{version:s,systemId:o,kids:c,data:u,offset:t,size:e}}const l4=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Jp={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function c4(n,e){const t=Jp[e];return!!t&&!!t[n.slice(0,4)]}function B_(n,e,t=!0){return!n.split(",").some(i=>!u4(i,e,t))}function u4(n,e,t=!0){var i;const r=$d(t);return(i=r==null?void 0:r.isTypeSupported(S0(n,e)))!=null?i:!1}function S0(n,e){return`${e}/mp4;codecs=${n}`}function Mk(n){if(n){const e=n.substring(0,4);return Jp.video[e]}return 2}function cx(n){const e=l4();return n.split(",").reduce((t,i)=>{const s=e&&vb(i)?9:Jp.video[i];return s?(s*2+t)/(t?3:2):(Jp.audio[i]+t)/(t?2:1)},0)}const TS={};function Yre(n,e=!0){if(TS[n])return TS[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[n];for(let r=0;r<t.length;r++){var i;if(u4(t[r],"audio",e))return TS[n]=t[r],t[r];if(t[r]==="mp3"&&(i=$d(e))!=null&&i.isTypeSupported("audio/mpeg"))return""}return n}const qre=/flac|opus|mp4a\.40\.34/i;function ux(n,e=!0){return n.replace(qre,t=>Yre(t.toLowerCase(),e))}function Kre(n,e){const t=[];if(n){const i=n.split(",");for(let r=0;r<i.length;r++)c4(i[r],"video")||t.push(i[r])}return e&&t.push(e),t.join(",")}function o1(n,e){if(n&&(n.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(n)!==-1))return n;if(e){const t=e.split(",");if(t.length>1){if(n){for(let i=t.length;i--;)if(t[i].substring(0,4)===n.substring(0,4))return t[i]}return t[0]}}return e||n}function Xre(n){const e=n.split(",");for(let t=0;t<e.length;t++){const i=e[t].split(".");if(i.length>2){let r=i.shift()+".";r+=parseInt(i.shift()).toString(16),r+=("000"+parseInt(i.shift()).toString(16)).slice(-4),e[t]=r}}return e.join(",")}function Qre(n){if(n.startsWith("av01.")){const e=n.split("."),t=["0","111","01","01","01","0"];for(let i=e.length;i>4&&i<10;i++)e[i]=t[i-4];return e.join(".")}return n}function Fk(n){const e=$d(n)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function d4(n){return n.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const f4={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function h4(n,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:n}}const jk={};function Jre(n,e,t,i,r,s){const a=n.audioCodec?n.audioGroups:null,o=s==null?void 0:s.audioCodec,l=s==null?void 0:s.channels,c=l?parseInt(l):o?1/0:2;let u=null;if(a!=null&&a.length)try{a.length===1&&a[0]?u=e.groups[a[0]].channels:u=a.reduce((d,h)=>{if(h){const p=e.groups[h];if(!p)throw new Error(`Audio track group ${h} not found`);Object.keys(p.channels).forEach(m=>{d[m]=(d[m]||0)+p.channels[m]})}return d},{2:0})}catch{return!0}return n.videoCodec!==void 0&&(n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(i,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(r,8e6))||!!u&&wt(c)&&Object.keys(u).some(d=>parseInt(d)>c)}function p4(n,e,t){const i=n.videoCodec,r=n.audioCodec;if(!i&&!r||!t)return Promise.resolve(f4);const s=[];if(i){const a={width:n.width,height:n.height,bitrate:Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)),framerate:n.frameRate||30},o=n.videoRange;o!=="SDR"&&(a.transferFunction=o.toLowerCase());const l=i.split(","),c=navigator.userAgent;if(l.some(u=>vb(u))&&l4())return Promise.resolve(h4(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent sting: (${c})`),s));s.push.apply(s,l.map(u=>({type:"media-source",video:pi(pi({},a),{},{contentType:S0(Qre(u),"video")})})))}return r&&n.audioGroups&&n.audioGroups.forEach(a=>{var o;a&&((o=e.groups[a])==null||o.tracks.forEach(l=>{if(l.groupId===a){const c=l.channels||"",u=parseFloat(c);wt(u)&&u>2&&s.push.apply(s,r.split(",").map(d=>({type:"media-source",audio:{contentType:S0(d,"audio"),channels:""+u}})))}}))}),Promise.all(s.map(a=>{const o=Zre(a);return jk[o]||(jk[o]=t.decodingInfo(a))})).then(a=>({supported:!a.some(o=>!o.supported),configurations:s,decodingInfoResults:a})).catch(a=>({supported:!1,configurations:s,decodingInfoResults:[],error:a}))}function Zre(n){const{audio:e,video:t}=n,i=t||e;if(i){const r=d4(i.contentType);if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${r}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${r}`}return""}const U_=["NONE","TYPE-0","TYPE-1",null];function ese(n){return U_.indexOf(n)>-1}const dx=["SDR","PQ","HLG"];function tse(n){return!!n&&dx.indexOf(n)>-1}var l1={No:"",Yes:"YES",v2:"v2"};function Bk(n){const{canSkipUntil:e,canSkipDateRanges:t,age:i}=n,r=i<e/2;return e&&r?t?l1.v2:l1.Yes:l1.No}class Uk{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class w0{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(i=>!!i).map(i=>i.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const i=(t=e.supplemental)==null?void 0:t.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return $k(this._audioGroups,e)}hasSubtitleGroup(e){return $k(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(t)===-1&&i.push(t)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(t)===-1&&i.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function $k(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function nse(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function ise(n,e){let t=!1,i=[];if(n&&(t=n!=="SDR",i=[n]),e){i=e.allowedVideoRanges||dx.slice(0);const r=i.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:r&&nse(),t||(i=["SDR"])}return{preferHDR:t,allowedVideoRanges:i}}const rse=n=>{const e=new WeakSet;return(t,i)=>{if(n&&(i=n(t,i)),typeof i=="object"&&i!==null){if(e.has(i))return;e.add(i)}return i}},ar=(n,e)=>JSON.stringify(n,rse(e));function sse(n,e,t,i,r){const s=Object.keys(n),a=i==null?void 0:i.channels,o=i==null?void 0:i.audioCodec,l=r==null?void 0:r.videoCodec,c=a&&parseInt(a)===2;let u=!1,d=!1,h=1/0,p=1/0,m=1/0,v=1/0,b=0,x=[];const{preferHDR:w,allowedVideoRanges:S}=ise(e,r);for(let R=s.length;R--;){const U=n[s[R]];u||(u=U.channels[2]>0),h=Math.min(h,U.minHeight),p=Math.min(p,U.minFramerate),m=Math.min(m,U.minBitrate),S.filter(D=>U.videoRanges[D]>0).length>0&&(d=!0)}h=wt(h)?h:0,p=wt(p)?p:0;const A=Math.max(1080,h),C=Math.max(30,p);m=wt(m)?m:t,t=Math.max(m,t),d||(e=void 0);const N=s.length>1;return{codecSet:s.reduce((R,U)=>{const j=n[U];if(U===R)return R;if(x=d?S.filter(D=>j.videoRanges[D]>0):[],N){if(j.minBitrate>t)return Gl(U,`min bitrate of ${j.minBitrate} > current estimate of ${t}`),R;if(!j.hasDefaultAudio)return Gl(U,"no renditions with default or auto-select sound found"),R;if(o&&U.indexOf(o.substring(0,4))%5!==0)return Gl(U,`audio codec preference "${o}" not found`),R;if(a&&!c){if(!j.channels[a])return Gl(U,`no renditions with ${a} channel sound found (channels options: ${Object.keys(j.channels)})`),R}else if((!o||c)&&u&&j.channels[2]===0)return Gl(U,"no renditions with stereo sound found"),R;if(j.minHeight>A)return Gl(U,`min resolution of ${j.minHeight} > maximum of ${A}`),R;if(j.minFramerate>C)return Gl(U,`min framerate of ${j.minFramerate} > maximum of ${C}`),R;if(!x.some(D=>j.videoRanges[D]>0))return Gl(U,`no variants with VIDEO-RANGE of ${ar(x)} found`),R;if(l&&U.indexOf(l.substring(0,4))%5!==0)return Gl(U,`video codec preference "${l}" not found`),R;if(j.maxScore<b)return Gl(U,`max score of ${j.maxScore} < selected max of ${b}`),R}return R&&(cx(U)>=cx(R)||j.fragmentError>n[R].fragmentError)?R:(v=j.minIndex,b=j.maxScore,U)},void 0),videoRanges:x,preferHDR:w,minFramerate:p,minBitrate:m,minIndex:v}}function Gl(n,e){Wn.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function g4(n){return n.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const r=t.channels||"2";return i.channels[r]=(i.channels[r]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function ase(n,e,t,i){return n.slice(t,i+1).reduce((r,s,a)=>{if(!s.codecSet)return r;const o=s.audioGroups;let l=r[s.codecSet];l||(r[s.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,s.bitrate);const c=Math.min(s.height,s.width);return l.minHeight=Math.min(l.minHeight,c),l.minFramerate=Math.min(l.minFramerate,s.frameRate),l.minIndex=Math.min(l.minIndex,a),l.maxScore=Math.max(l.maxScore,s.score),l.fragmentError+=s.fragmentError,l.videoRanges[s.videoRange]=(l.videoRanges[s.videoRange]||0)+1,o&&o.forEach(u=>{if(!u)return;const d=e.groups[u];d&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(h=>{l.channels[h]=(l.channels[h]||0)+d.channels[h]}))}),r},{})}function Hk(n){if(!n)return n;const{lang:e,assocLang:t,characteristics:i,channels:r,audioCodec:s}=n;return{lang:e,assocLang:t,characteristics:i,channels:r,audioCodec:s}}function sc(n,e,t){if("attrs"in n){const i=e.indexOf(n);if(i!==-1)return i}for(let i=0;i<e.length;i++){const r=e[i];if(sh(n,r,t))return i}return-1}function sh(n,e,t){const{groupId:i,name:r,lang:s,assocLang:a,default:o}=n,l=n.forced;return(i===void 0||e.groupId===i)&&(r===void 0||e.name===r)&&(s===void 0||ose(s,e.lang))&&(s===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in n)||lse(n.characteristics||"",e.characteristics))&&(t===void 0||t(n,e))}function ose(n,e="--"){return n.length===e.length?n===e:n.startsWith(e)||e.startsWith(n)}function lse(n,e=""){const t=n.split(","),i=e.split(",");return t.length===i.length&&!t.some(r=>i.indexOf(r)===-1)}function Ff(n,e){const{audioCodec:t,channels:i}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function cse(n,e,t,i,r){const s=e[i],o=e.reduce((h,p,m)=>{const v=p.uri;return(h[v]||(h[v]=[])).push(m),h},{})[s.uri];o.length>1&&(i=Math.max.apply(Math,o));const l=s.videoRange,c=s.frameRate,u=s.codecSet.substring(0,4),d=Wk(e,i,h=>{if(h.videoRange!==l||h.frameRate!==c||h.codecSet.substring(0,4)!==u)return!1;const p=h.audioGroups,m=t.filter(v=>!p||p.indexOf(v.groupId)!==-1);return sc(n,m,r)>-1});return d>-1?d:Wk(e,i,h=>{const p=h.audioGroups,m=t.filter(v=>!p||p.indexOf(v.groupId)!==-1);return sc(n,m,r)>-1})}function Wk(n,e,t){for(let i=e;i>-1;i--)if(t(n[i]))return i;for(let i=e+1;i<n.length;i++)if(t(n[i]))return i;return-1}function fx(n,e){var t;return!!n&&n!==((t=e.loadLevelObj)==null?void 0:t.uri)}class use extends Eu{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var i;const{fragCurrent:r,partCurrent:s,hls:a}=this,{autoLevelEnabled:o,media:l}=a;if(!r||!l)return;const c=performance.now(),u=s?s.stats:r.stats,d=s?s.duration:r.duration,h=c-u.loading.start,p=a.minAutoLevel,m=r.level,v=this._nextAutoLevel;if(u.aborted||u.loaded&&u.loaded===u.total||m<=p){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const b=v>-1&&v!==m,x=!!t||b;if(!x&&(l.paused||!l.playbackRate||!l.readyState))return;const w=a.mainForwardBufferInfo;if(!x&&w===null)return;const S=this.bwEstimator.getEstimateTTFB(),A=Math.abs(l.playbackRate);if(h<=Math.max(S,1e3*(d/(A*2))))return;const C=w?w.len/A:0,N=u.loading.first?u.loading.first-u.loading.start:-1,k=u.loaded&&N>-1,R=this.getBwEstimate(),U=a.levels,j=U[m],D=Math.max(u.loaded,Math.round(d*(r.bitrate||j.averageBitrate)/8));let O=k?h-N:h;O<1&&k&&(O=Math.min(h,u.loaded*8/R));const Z=k?u.loaded*1e3/O:0,J=S/1e3,le=Z?(D-u.loaded)/Z:D*8/R+J;if(le<=C)return;const H=Z?Z*8:R,V=((i=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:i.live)===!0,z=this.hls.config.abrBandWidthUpFactor;let W=Number.POSITIVE_INFINITY,te;for(te=m-1;te>p;te--){const ee=U[te].maxBitrate,ae=!U[te].details||V;if(W=this.getTimeToLoadFrag(J,H,d*ee,ae),W<Math.min(C,d+J))break}if(W>=le||W>d*10)return;k?this.bwEstimator.sample(h-Math.min(S,N),u.loaded):this.bwEstimator.sampleTTFB(h);const fe=U[te].maxBitrate;this.getBwEstimate()*z>fe&&this.resetEstimator(fe);const F=this.findBestLevel(fe,p,te,0,C,1,1);F>-1&&(te=F),this.warn(`Fragment ${r.sn}${s?" part "+s.index:""} of level ${m} is loading too slowly;
      Fragment duration: ${r.duration.toFixed(3)}
      Time to underbuffer: ${C.toFixed(3)} s
      Estimated load time for current fragment: ${le.toFixed(3)} s
      Estimated load time for down switch fragment: ${W.toFixed(3)} s
      TTFB estimate: ${N|0} ms
      Current BW estimate: ${wt(R)?R|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${te} @ ${fe|0} bps`),a.nextLoadLevel=a.nextAutoLevel=te,this.clearTimer();const K=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===te&&te>0){const ee=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${te>0?"and switching down":""}
      Fragment duration: ${r.duration.toFixed(3)} s
      Time to underbuffer: ${ee.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,te>p){let ae=this.findBestLevel(this.hls.levels[p].bitrate,p,te,0,ee,1,1);ae===-1&&(ae=p),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ae,this.resetEstimator(this.hls.levels[ae].bitrate)}}};b||le>W*2?K():this.timer=self.setInterval(K,W*1e3),a.trigger($.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:s,stats:u})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new xre(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.FRAG_LOADING,this.onFragLoading,this),e.on($.FRAG_LOADED,this.onFragLoaded,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this),e.on($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.FRAG_LOADING,this.onFragLoading,this),e.off($.FRAG_LOADED,this.onFragLoaded,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this),e.off($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off($.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var r;this.fragCurrent=i,this.partCurrent=(r=t.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case De.BUFFER_ADD_CODEC_ERROR:case De.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case De.FRAG_LOAD_TIMEOUT:{const i=t.frag,{fragCurrent:r,partCurrent:s}=this;if(i&&r&&i.sn===r.sn&&i.level===r.level){const a=performance.now(),o=s?s.stats:i.stats,l=a-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,c),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,i,r){const s=e+i/t,a=r?e+this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,t){const i=this.hls.config,{loading:r}=t.stats,s=r.end-r.first;wt(s)&&(this.lastLevelLoadSec=s/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:i}){const r=i?i.stats:t.stats;if(t.type===kt.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=i?i.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+r.loaded,l=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){const s={stats:r,frag:t,part:i,id:t.type};this.onFragBuffered($.FRAG_BUFFERED,s),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:r}=t,s=r!=null&&r.stats.loaded?r.stats:i.stats;if(s.aborted||this.ignoreFragment(i))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==kt.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,s=this.findBestLevel(i,t,e,0,r,1,1);if(s>-1)return s;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=i&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;const{maxAutoLevel:r,config:s,minAutoLevel:a}=i,o=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(c){const b=this.findBestLevel(l,a,r,c,0,u,d);if(b>=0)return this.rebufferNotice=-1,b}let h=o?Math.min(o,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){const b=this.bitrateTestDelay;b&&(h=(o?Math.min(o,s.maxLoadingDelay):s.maxLoadingDelay)-b,this.info(`bitrate test took ${Math.round(1e3*b)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),u=d=1)}const p=this.findBestLevel(l,a,r,c,h,u,d);if(this.rebufferNotice!==p&&(this.rebufferNotice=p,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${p}`)),p>-1)return p;const m=i.levels[a],v=i.loadLevelObj;return v&&(m==null?void 0:m.bitrate)<v.bitrate?a:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,r,s,a,o){var l;const c=r+s,u=this.lastLoadedFragLevel,d=u===-1?this.hls.firstLevel:u,{fragCurrent:h,partCurrent:p}=this,{levels:m,allAudioTracks:v,loadLevel:b,config:x}=this.hls;if(m.length===1)return 0;const w=m[d],S=!!((l=this.hls.latestLevelDetails)!=null&&l.live),A=b===-1||u===-1;let C,N="SDR",k=(w==null?void 0:w.frameRate)||0;const{audioPreference:R,videoPreference:U}=x,j=this.audioTracksByGroup||(this.audioTracksByGroup=g4(v));let D=-1;if(A){if(this.firstSelection!==-1)return this.firstSelection;const H=this.codecTiers||(this.codecTiers=ase(m,j,t,i)),V=sse(H,N,e,R,U),{codecSet:z,videoRanges:W,minFramerate:te,minBitrate:fe,minIndex:F,preferHDR:K}=V;D=F,C=z,N=K?W[W.length-1]:W[0],k=te,e=Math.max(e,fe),this.log(`picked start tier ${ar(V)}`)}else C=w==null?void 0:w.codecSet,N=w==null?void 0:w.videoRange;const O=p?p.duration:h?h.duration:0,Z=this.bwEstimator.getEstimateTTFB()/1e3,J=[];for(let H=i;H>=t;H--){var le;const V=m[H],z=H>d;if(!V)continue;if(x.useMediaCapabilities&&!V.supportedResult&&!V.supportedPromise){const ae=navigator.mediaCapabilities;typeof(ae==null?void 0:ae.decodingInfo)=="function"&&(Jre(V,j,N,k,e,R)||vb(V.videoCodec))?(V.supportedPromise=p4(V,j,ae),V.supportedPromise.then(ce=>{if(!this.hls)return;V.supportedResult=ce;const ye=this.hls.levels,be=ye.indexOf(V);ce.error?this.warn(`MediaCapabilities decodingInfo error: "${ce.error}" for level ${be} ${ar(ce)}`):ce.supported||(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${be} ${ar(ce)}`),be>-1&&ye.length>1&&(this.log(`Removing unsupported level ${be}`),this.hls.removeLevel(be),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):V.supportedResult=f4}if((C&&V.codecSet!==C||N&&V.videoRange!==N||z&&k>V.frameRate||!z&&k>0&&k<V.frameRate||V.supportedResult&&!((le=V.supportedResult.decodingInfoResults)!=null&&le[0].smooth))&&(!A||H!==D)){J.push(H);continue}const W=V.details,te=(p?W==null?void 0:W.partTarget:W==null?void 0:W.averagetargetduration)||O;let fe;z?fe=o*e:fe=a*e;const F=O&&r>=O*2&&s===0?V.averageBitrate:V.maxBitrate,K=this.getTimeToLoadFrag(Z,fe,F*te,W===void 0);if(fe>=F&&(H===u||V.loadError===0&&V.fragmentError===0)&&(K<=Z||!wt(K)||S&&!this.bitrateTestDelay||K<c)){const ae=this.forcedAutoLevel;return H!==b&&(ae===-1||ae!==b)&&(J.length&&this.trace(`Skipped level(s) ${J.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${m[J[0]].codecs}" ${m[J[0]].videoRange}; not compatible with "${C}" ${N}`),this.info(`switch candidate:${d}->${H} adjustedbw(${Math.round(fe)})-bitrate=${Math.round(fe-F)} ttfb:${Z.toFixed(1)} avgDuration:${te.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${K.toFixed(1)} firstSelection:${A} codecSet:${V.codecSet} videoRange:${V.videoRange} hls.loadLevel:${b}`)),A&&(this.firstSelection=H),H}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),t)}}const nT={search:function(n,e){let t=0,i=n.length-1,r=null,s=null;for(;t<=i;){r=(t+i)/2|0,s=n[r];const a=e(s);if(a>0)t=r+1;else if(a<0)i=r-1;else return s}return null}};function dse(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!wt(e))return null;const i=n[0].programDateTime;if(e<(i||0))return null;const r=n[n.length-1].endProgramDateTime;if(e>=(r||0))return null;t=t||0;for(let s=0;s<n.length;++s){const a=n[s];if(hse(e,t,a))return a}return null}function ph(n,e,t=0,i=0,r=.005){let s=null;if(n){s=e[1+n.sn-e[0].sn]||null;const o=n.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),s&&n.level!==s.level&&s.end<=n.end&&(s=e[2+n.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(s=e[0]);if(s&&((!n||n.level===s.level)&&zk(t,i,s)===0||fse(s,n,Math.min(r,i))))return s;const a=nT.search(e,zk.bind(null,t,i));return a&&(a!==n||!s)?a:s}function fse(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((r,s)=>(s[0]==="INF"&&(r+=parseFloat(s[1])),r),t);return n.start<=i}return!1}function zk(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=n?1:t.start-i>n&&t.start?-1:0}function hse(n,e,t){const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-i>n}function m4(n,e){return nT.search(n,t=>t.cc<e?1:t.cc>e?-1:0)}function pse(n,e,t){if(n&&n.startCC<=e&&n.endCC>=e){const i=t.start,r=t.end;let s=n.fragments;if(!t.relurl){const{fragmentHint:a}=n;a&&(s=s.concat(a))}return nT.search(s,a=>a.cc<e||a.end<=i?1:a.cc>e||a.start>=r?-1:0)}return null}function hx(n){switch(n.details){case De.FRAG_LOAD_TIMEOUT:case De.KEY_LOAD_TIMEOUT:case De.LEVEL_LOAD_TIMEOUT:case De.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Gk(n,e){const t=hx(e);return n.default[`${t?"timeout":"error"}Retry`]}function iT(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function Vk(n){return pi(pi({},n),{errorRetry:null,timeoutRetry:null})}function px(n,e,t,i){if(!n)return!1;const r=i==null?void 0:i.code,s=e<n.maxNumRetry&&(gse(r)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,i,s):s}function gse(n){return n===0&&navigator.onLine===!1||!!n&&(n<400||n>499)}var Xs={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},fl={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class mse extends Eu{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on($.ERROR,this.onError,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off($.ERROR,this.onError,this),e.off($.ERROR,this.onErrorOut,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===kt.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i;if(t.fatal)return;const r=this.hls,s=t.context;switch(t.details){case De.FRAG_LOAD_ERROR:case De.FRAG_LOAD_TIMEOUT:case De.KEY_LOAD_ERROR:case De.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case De.FRAG_PARSING_ERROR:if((i=t.frag)!=null&&i.gap){t.errorAction=_0();return}case De.FRAG_GAP:case De.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Xs.SendAlternateToPenaltyBox;return}case De.LEVEL_EMPTY_ERROR:case De.LEVEL_PARSING_ERROR:{var a,o;const c=t.parent===kt.MAIN?t.level:r.loadLevel;t.details===De.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(o=a.levelDetails)!=null&&o.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case De.LEVEL_LOAD_ERROR:case De.LEVEL_LOAD_TIMEOUT:typeof(s==null?void 0:s.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level));return;case De.AUDIO_TRACK_LOAD_ERROR:case De.AUDIO_TRACK_LOAD_TIMEOUT:case De.SUBTITLE_LOAD_ERROR:case De.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const c=r.loadLevelObj;if(c&&(s.type===Pn.AUDIO_TRACK&&c.hasAudioGroup(s.groupId)||s.type===Pn.SUBTITLE_TRACK&&c.hasSubtitleGroup(s.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Xs.SendAlternateToPenaltyBox,t.errorAction.flags=fl.MoveAllAlternatesMatchingHost;return}}return;case De.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=r.loadLevelObj,u=c==null?void 0:c.attrs["HDCP-LEVEL"];u?t.errorAction={action:Xs.SendAlternateToPenaltyBox,flags:fl.MoveAllAlternatesMatchingHDCP,hdcpLevel:u}:this.keySystemError(t)}return;case De.BUFFER_ADD_CODEC_ERROR:case De.REMUX_ALLOC_ERROR:case De.BUFFER_APPEND_ERROR:if(!t.errorAction){var l;t.errorAction=this.getLevelSwitchAction(t,(l=t.level)!=null?l:r.loadLevel)}return;case De.INTERNAL_EXCEPTION:case De.BUFFER_APPENDING_ERROR:case De.BUFFER_FULL_ERROR:case De.LEVEL_SWITCH_ERROR:case De.BUFFER_STALLED_ERROR:case De.BUFFER_SEEK_OVER_HOLE:case De.BUFFER_NUDGE_ON_STALL:t.errorAction=_0();return}t.type===jt.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,r=Gk(i.config.playlistLoadPolicy,e),s=this.playlistError++;if(px(r,s,hx(e),e.response))return{action:Xs.RetryRequest,flags:fl.None,retryConfig:r,retryCount:s};const o=this.getLevelSwitchAction(e,t);return r&&(o.retryConfig=r,o.retryCount=s),o}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),r=t.levels[i],{fragLoadPolicy:s,keyLoadPolicy:a}=t.config,o=Gk(e.details.startsWith("key")?a:s,e),l=t.levels.reduce((u,d)=>u+d.fragmentError,0);if(r&&(e.details!==De.FRAG_GAP&&r.fragmentError++,px(o,l,hx(e),e.response)))return{action:Xs.RetryRequest,flags:fl.None,retryConfig:o,retryCount:l};const c=this.getLevelSwitchAction(e,i);return o&&(c.retryConfig=o,c.retryCount=l),c}getLevelSwitchAction(e,t){const i=this.hls;t==null&&(t=i.loadLevel);const r=this.hls.levels[t];if(r){var s,a;const c=e.details;r.loadError++,c===De.BUFFER_APPEND_ERROR&&r.fragmentError++;let u=-1;const{levels:d,loadLevel:h,minAutoLevel:p,maxAutoLevel:m}=i;i.autoLevelEnabled||(i.loadLevel=-1);const v=(s=e.frag)==null?void 0:s.type,x=(v===kt.AUDIO&&c===De.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===De.BUFFER_ADD_CODEC_ERROR||c===De.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:N})=>r.audioCodec!==N),S=e.sourceBufferName==="video"&&(c===De.BUFFER_ADD_CODEC_ERROR||c===De.BUFFER_APPEND_ERROR)&&d.some(({codecSet:N,audioCodec:k})=>r.codecSet!==N&&r.audioCodec===k),{type:A,groupId:C}=(a=e.context)!=null?a:{};for(let N=d.length;N--;){const k=(N+h)%d.length;if(k!==h&&k>=p&&k<=m&&d[k].loadError===0){var o,l;const R=d[k];if(c===De.FRAG_GAP&&v===kt.MAIN&&e.frag){const U=d[k].details;if(U){const j=ph(e.frag,U.fragments,e.frag.start);if(j!=null&&j.gap)continue}}else{if(A===Pn.AUDIO_TRACK&&R.hasAudioGroup(C)||A===Pn.SUBTITLE_TRACK&&R.hasSubtitleGroup(C))continue;if(v===kt.AUDIO&&(o=r.audioGroups)!=null&&o.some(U=>R.hasAudioGroup(U))||v===kt.SUBTITLE&&(l=r.subtitleGroups)!=null&&l.some(U=>R.hasSubtitleGroup(U))||x&&r.audioCodec===R.audioCodec||!x&&r.audioCodec!==R.audioCodec||S&&r.codecSet===R.codecSet)continue}u=k;break}}if(u>-1&&i.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:Xs.SendAlternateToPenaltyBox,flags:fl.None,nextAutoLevel:u}}return{action:Xs.SendAlternateToPenaltyBox,flags:fl.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch((i=t.errorAction)==null?void 0:i.action){case Xs.DoNothing:break;case Xs.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==De.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:r,hdcpLevel:s,nextAutoLevel:a}=i;switch(r){case fl.None:this.switchLevel(e,a);break;case fl.MoveAllAlternatesMatchingHDCP:s&&(t.maxHdcpLevel=U_[U_.indexOf(s)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}i.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===De.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const i=d4(e.mimeType),r=this.hls.levels;for(let s=r.length;s--;)r[s][`${e.sourceBufferName}Codec`]===i&&this.hls.removeLevel(s)}}}function _0(n){const e={action:Xs.DoNothing,flags:fl.None};return n&&(e.resolved=!0),e}var os={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class yse{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.BUFFER_APPENDED,this.onBufferAppended,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this),e.on($.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.BUFFER_APPENDED,this.onBufferAppended,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this),e.off($.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let r=i.length;r--;){const s=i[r];if(!s)break;const a=s.end;if(s.start<=e&&a!==null&&e<=a)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,i){const{fragments:r}=this,s=Object.keys(r);for(let a=s.length;a--;){const o=r[s[a]];if((o==null?void 0:o.body.type)===t&&(!i||o.buffered)){const l=o.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,t,i,r,s){this.timeRanges&&(this.timeRanges[e]=t);const a=(r==null?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const l=this.fragments[o];if(!l||a>=l.body.sn)return;if(!l.buffered&&(!l.loaded||s)){l.body.type===i&&this.removeFragment(l.body);return}const c=l.range[e];if(c){if(c.time.length===0){this.removeFragment(l.body);return}c.time.some(u=>{const d=!this.isTimeBuffered(u.startPTS,u.endPTS,t);return d&&this.removeFragment(l.body),d})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const i=e.frag,r=ap(i),s=this.fragments[r];if(!s||s.buffered&&i.gap)return;const a=!i.relurl;Object.keys(t).forEach(o=>{const l=i.elementaryStreams[o];if(!l)return;const c=t[o],u=a||l.partial===!0;s.range[o]=this.getBufferedTimes(i,e.part,u,c)}),s.loaded=null,Object.keys(s.range).length?(s.buffered=!0,(s.body.endList=i.endList||s.body.endList)&&(this.endListFragments[s.body.type]=s),Tv(s)||this.removeParts(i.sn-1,i.type)):this.removeFragment(s.body)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=Yk(i,r=>r.fragment.sn>=e))}fragBuffered(e,t){const i=ap(e);let r=this.fragments[i];!r&&t&&(r=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,i,r){const s={time:[],partial:i},a=e.start,o=e.end,l=e.minEndPTS||o,c=e.maxStartPTS||a;for(let u=0;u<r.length;u++){const d=r.start(u)-this.bufferPadding,h=r.end(u)+this.bufferPadding;if(c>=d&&l<=h){s.time.push({startPTS:Math.max(a,r.start(u)),endPTS:Math.min(o,r.end(u))});break}else if(a<h&&o>d){const p=Math.max(a,r.start(u)),m=Math.min(o,r.end(u));m>p&&(s.partial=!0,s.time.push({startPTS:p,endPTS:m}))}else if(o<=d)break}return s}getPartialFragment(e){let t=null,i,r,s,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&Tv(u)&&(r=u.body.start-o,s=u.body.end+o,e>=r&&e<=s&&(i=Math.min(e-r,s-e),a<=i&&(t=u.body,a=i)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Tv(t))}getState(e){const t=ap(e),i=this.fragments[t];return i?i.buffered?Tv(i)?os.PARTIAL:os.OK:os.APPENDING:os.NOT_LOADED}isTimeBuffered(e,t,i){let r,s;for(let a=0;a<i.length;a++){if(r=i.start(a)-this.bufferPadding,s=i.end(a)+this.bufferPadding,e>=r&&t<=s)return!0;if(t<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const i=t.frag,r=t.part?null:t,s=ap(i);this.fragments[s]={body:i,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:r,timeRanges:s,type:a}=t;if(i.sn==="initSegment")return;const o=i.type;if(r){let c=this.activePartLists[o];c||(this.activePartLists[o]=c=[]),c.push(r)}this.timeRanges=s;const l=s[a];this.detectEvictedFragments(a,l,o,r)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=ap(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,i=Object.keys(t);if(!e)return i.length>0;for(let r=i.length;r--;){const s=t[i[r]];if((s==null?void 0:s.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,i,r,s){r&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==i||r&&!l.gap||l.start<t&&l.end>e&&(o.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const t=ap(e);e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const r=e.sn;this.activePartLists[e.type]=Yk(i,s=>s.fragment.sn!==r)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const i=(e=this.hls)==null||(t=e.latestLevelDetails)==null?void 0:t.partList;i&&i.forEach(r=>r.clearElementaryStreamInfo())}}function Tv(n){var e,t,i;return n.buffered&&(n.body.gap||((e=n.range.video)==null?void 0:e.partial)||((t=n.range.audio)==null?void 0:t.partial)||((i=n.range.audiovideo)==null?void 0:i.partial))}function ap(n){return`${n.type}_${n.level}_${n.sn}`}function Yk(n,e){return n.filter(t=>{const i=e(t);return i||t.clearElementaryStreamInfo(),i})}var Hd={cbc:0,ctr:1};class vse{constructor(e,t,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=i}decrypt(e,t){switch(this.aesMode){case Hd.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Hd.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function xse(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?n.slice(0,e-t):n}class bse{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let r=0;r<4;r++)i[r]=t.getUint32(r*4);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,r=i[0],s=i[1],a=i[2],o=i[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],h=l[3],p=new Uint32Array(256);let m=0,v=0,b=0;for(b=0;b<256;b++)b<128?p[b]=b<<1:p[b]=b<<1^283;for(b=0;b<256;b++){let x=v^v<<1^v<<2^v<<3^v<<4;x=x>>>8^x&255^99,e[m]=x,t[x]=m;const w=p[m],S=p[w],A=p[S];let C=p[x]*257^x*16843008;r[m]=C<<24|C>>>8,s[m]=C<<16|C>>>16,a[m]=C<<8|C>>>24,o[m]=C,C=A*16843009^S*65537^w*257^m*16843008,c[x]=C<<24|C>>>8,u[x]=C<<16|C>>>16,d[x]=C<<8|C>>>24,h[x]=C,m?(m=w^p[p[p[A^w]]],v^=p[p[v]]):m=v=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,r=0;for(;r<t.length&&i;)i=t[r]===this.key[r],r++;if(i)return;this.key=t;const s=this.keySize=t.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let o,l;const c=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),d=this.sBox,h=this.rcon,p=this.invSubMix,m=p[0],v=p[1],b=p[2],x=p[3];let w,S;for(o=0;o<a;o++){if(o<s){w=c[o]=t[o];continue}S=w,o%s===0?(S=S<<8|S>>>24,S=d[S>>>24]<<24|d[S>>>16&255]<<16|d[S>>>8&255]<<8|d[S&255],S^=h[o/s|0]<<24):s>6&&o%s===4&&(S=d[S>>>24]<<24|d[S>>>16&255]<<16|d[S>>>8&255]<<8|d[S&255]),c[o]=w=(c[o-s]^S)>>>0}for(l=0;l<a;l++)o=a-l,l&3?S=c[o]:S=c[o-4],l<4||o<=4?u[l]=S:u[l]=m[d[S>>>24]]^v[d[S>>>16&255]]^b[d[S>>>8&255]]^x[d[S&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,i){const r=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=this.uint8ArrayToUint32Array_(i);let p=h[0],m=h[1],v=h[2],b=h[3];const x=new Int32Array(e),w=new Int32Array(x.length);let S,A,C,N,k,R,U,j,D,O,Z,J,le,H;const V=this.networkToHostOrderSwap;for(;t<x.length;){for(D=V(x[t]),O=V(x[t+1]),Z=V(x[t+2]),J=V(x[t+3]),k=D^s[0],R=J^s[1],U=Z^s[2],j=O^s[3],le=4,H=1;H<r;H++)S=l[k>>>24]^c[R>>16&255]^u[U>>8&255]^d[j&255]^s[le],A=l[R>>>24]^c[U>>16&255]^u[j>>8&255]^d[k&255]^s[le+1],C=l[U>>>24]^c[j>>16&255]^u[k>>8&255]^d[R&255]^s[le+2],N=l[j>>>24]^c[k>>16&255]^u[R>>8&255]^d[U&255]^s[le+3],k=S,R=A,U=C,j=N,le=le+4;S=a[k>>>24]<<24^a[R>>16&255]<<16^a[U>>8&255]<<8^a[j&255]^s[le],A=a[R>>>24]<<24^a[U>>16&255]<<16^a[j>>8&255]<<8^a[k&255]^s[le+1],C=a[U>>>24]<<24^a[j>>16&255]<<16^a[k>>8&255]<<8^a[R&255]^s[le+2],N=a[j>>>24]<<24^a[k>>16&255]<<16^a[R>>8&255]<<8^a[U&255]^s[le+3],w[t]=V(S^p),w[t+1]=V(N^m),w[t+2]=V(C^v),w[t+3]=V(A^b),p=D,m=O,v=Z,b=J,t=t+4}return w.buffer}}class Sse{constructor(e,t,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=i}expandKey(){const e=wse(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function wse(n){switch(n){case Hd.cbc:return"AES-CBC";case Hd.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${n}`)}}const _se=16;class rT{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?xse(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i,r){return this.useSoftware?new Promise((s,a)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,i,r);const l=this.flush();l?s(l.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i,r)}softwareDecrypt(e,t,i,r){const{currentIV:s,currentResult:a,remainderData:o}=this;if(r!==Hd.cbc||t.byteLength!==16)return Wn.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=$o(o,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;s&&(i=s);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new bse),c.expandKey(t);const u=a;return this.currentResult=c.decrypt(l.buffer,0,i),this.currentIV=l.slice(-16).buffer,u||null}webCryptoDecrypt(e,t,i,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i,r));this.key=t,this.fastAesKey=new Sse(this.subtle,t,r)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new vse(this.subtle,new Uint8Array(i),r).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(Wn.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,t,i,r)))}onWebCryptoError(e,t,i,r){const s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i,r);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%_se;return i!==e.length&&(t=e.slice(0,i),this.remainderData=e.slice(i)),t}logOnce(e){this.logEnabled&&(Wn.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const qk=Math.pow(2,17);class Ese{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new qc({type:jt.NETWORK_ERROR,details:De.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,s=r.fLoader,a=r.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(m=>m[0]==="GAP")){l(Xk(e));return}else e.gap=!1;const c=this.loader=s?new s(r):new a(r),u=Kk(e);e.loader=c;const d=Vk(r.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:qk};e.stats=c.stats;const p={onSuccess:(m,v,b,x)=>{this.resetLoader(e,c);let w=m.data;b.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(w.slice(0,16)),w=w.slice(16)),o({frag:e,part:null,payload:w,networkDetails:x})},onError:(m,v,b,x)=>{this.resetLoader(e,c),l(new qc({type:jt.NETWORK_ERROR,details:De.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:pi({url:i,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:b,stats:x}))},onAbort:(m,v,b)=>{this.resetLoader(e,c),l(new qc({type:jt.NETWORK_ERROR,details:De.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:b,stats:m}))},onTimeout:(m,v,b)=>{this.resetLoader(e,c),l(new qc({type:jt.NETWORK_ERROR,details:De.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:b,stats:m}))}};t&&(p.onProgress=(m,v,b,x)=>t({frag:e,part:null,payload:b,networkDetails:x})),c.load(u,h,p)})}loadPart(e,t,i){this.abort();const r=this.config,s=r.fLoader,a=r.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(Xk(e,t));return}const c=this.loader=s?new s(r):new a(r),u=Kk(e,t);e.loader=c;const d=Vk(r.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:qk};t.stats=c.stats,c.load(u,h,{onSuccess:(p,m,v,b)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const x={frag:e,part:t,payload:p.data,networkDetails:b};i(x),o(x)},onError:(p,m,v,b)=>{this.resetLoader(e,c),l(new qc({type:jt.NETWORK_ERROR,details:De.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:pi({url:u.url,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:v,stats:b}))},onAbort:(p,m,v)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new qc({type:jt.NETWORK_ERROR,details:De.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:v,stats:p}))},onTimeout:(p,m,v)=>{this.resetLoader(e,c),l(new qc({type:jt.NETWORK_ERROR,details:De.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:v,stats:p}))}})})}updateStatsFromPart(e,t){const i=e.stats,r=t.stats,s=r.total;if(i.loaded+=r.loaded,s){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(i.loaded/s),l),d=(l-c)*Math.round(i.loaded/c);i.total=i.loaded+d}else i.total=Math.max(i.loaded,i.total);const a=i.loading,o=r.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Kk(n,e=null){const t=e||n,i={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},r=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(wt(r)&&wt(s)){var a;let o=r,l=s;if(n.sn==="initSegment"&&Tse((a=n.decryptdata)==null?void 0:a.method)){const c=s-r;c%16&&(l=s+(16-c%16)),r!==0&&(i.resetIV=!0,o=r-16)}i.rangeStart=o,i.rangeEnd=l}return i}function Xk(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),i={type:jt.MEDIA_ERROR,details:De.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(i.part=e),(e||n).stats.aborted=!0,new qc(i)}function Tse(n){return n==="AES-128"||n==="AES-256"}class qc extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class y4 extends Eu{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class sT{constructor(e,t,i,r=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Av(),this.buffering={audio:Av(),video:Av(),audiovideo:Av()},this.level=e,this.sn=t,this.id=i,this.size=r,this.part=s,this.partial=a}}function Av(){return{start:0,executeStart:0,executeEnd:0,end:0}}const Qk={length:0,start:()=>0,end:()=>0};class Tn{static isBuffered(e,t){if(e){const i=Tn.getBuffered(e);for(let r=i.length;r--;)if(t>=i.start(r)&&t<=i.end(r))return!0}return!1}static bufferedRanges(e){if(e){const t=Tn.getBuffered(e);return Tn.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}static bufferInfo(e,t,i){if(e){const r=Tn.bufferedRanges(e);if(r.length)return Tn.bufferedInfo(r,t,i)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.length>1&&e.sort((u,d)=>u.start-d.start||d.end-u.end);let r=-1,s=[];if(i)for(let u=0;u<e.length;u++){t>=e[u].start&&t<=e[u].end&&(r=u);const d=s.length;if(d){const h=s[d-1].end;e[u].start-h<i?e[u].end>h&&(s[d-1].end=e[u].end):s.push(e[u])}else s.push(e[u])}else s=e;let a=0,o,l=t,c=t;for(let u=0;u<s.length;u++){const d=s[u].start,h=s[u].end;if(r===-1&&t>=d&&t<=h&&(r=u),t+i>=d&&t<h)l=d,c=h,a=c-t;else if(t+i<d){o=d;break}}return{len:a,start:l||0,end:c||0,nextStart:o,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||Qk}catch(t){return Wn.log("failed to get media.buffered",t),Qk}}}const v4=/\{\$([a-zA-Z0-9-_]+)\}/g;function Jk(n){return v4.test(n)}function $_(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(v4,i=>{const r=i.substring(2,i.length-1),s=t==null?void 0:t[r];return s===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),i):s})}return e}function Zk(n,e,t){let i=n.variableList;i||(n.variableList=i={});let r,s;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(r))s=a.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${t}"`)}catch(a){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else r=e.NAME,s=e.VALUE;r in i?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):i[r]=s||""}function Ase(n,e,t){const i=e.IMPORT;if(t&&i in t){let r=n.variableList;r||(n.variableList=r={}),r[i]=t[i]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}const Lse=/^(\d+)x(\d+)$/,eR=/(.+?)=(".*?"|.*?)(?:,|$)/g;class pr{constructor(e,t){typeof e=="string"&&(e=pr.parseAttrList(e,t)),wi(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const i=new Uint8Array(t.length/2);for(let r=0;r<t.length/2;r++)i[r]=parseInt(t.slice(r*2,r*2+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const i=this[e];return(i?i.split(/[ ,]+/):[]).reduce((r,s)=>(r[s.toLowerCase()]=!0,r),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=Lse.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let i;const r={},s='"';for(eR.lastIndex=0;(i=eR.exec(e))!==null;){const a=i[1].trim();let o=i[2];const l=o.indexOf(s)===0&&o.lastIndexOf(s)===o.length-1;let c=!1;if(l)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(t&&(l||c))o=$_(t,o);else if(!c&&!l)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Wn.warn(`${e}: attribute ${a} is missing quotes`)}r[a]=o}return r}}const Cse="com.apple.hls.interstitial";function Ise(n){return n!=="ID"&&n!=="CLASS"&&n!=="CUE"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function kse(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"||n==="SCTE35-CMD"}class x4{constructor(e,t,i=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(r=t==null?void 0:t.tagOrder)!=null?r:i,t){const s=t.attr;for(const a in s)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==s[a]){Wn.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=wi(new pr({}),s,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);wt(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(Wn.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(wt(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Cse}get isValid(){return!!this.id&&!this._badValueForSameId&&wt(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const Rse=10;class Pse{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?wt(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||Rse}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let i=e.length;i--;)if(e[i].index>t)return e[i].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function jp(n){return n==="AES-128"||n==="AES-256"||n==="AES-256-CTR"}function aT(n){switch(n){case"AES-128":case"AES-256":return Hd.cbc;case"AES-256-CTR":return Hd.ctr;default:throw new Error(`invalid full segment method ${n}`)}}function oT(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function H_(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}function Nse(n){const e=H_(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function Dse(n){const e=function(i,r,s){const a=i[r];i[r]=i[s],i[s]=a};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function Ose(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),r=i[i.length-1].split(",");if(r.length===2){const s=r[0]==="base64",a=r[1];s?(i.splice(-1,1),t=oT(a)):t=Nse(a)}}return t}const gx=typeof self<"u"?self:void 0;var gi={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Da={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function AS(n){switch(n){case Da.FAIRPLAY:return gi.FAIRPLAY;case Da.PLAYREADY:return gi.PLAYREADY;case Da.WIDEVINE:return gi.WIDEVINE;case Da.CLEARKEY:return gi.CLEARKEY}}var Lv={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function LS(n){if(n===Lv.WIDEVINE)return gi.WIDEVINE;if(n===Lv.PLAYREADY)return gi.PLAYREADY;if(n===Lv.CENC||n===Lv.CLEARKEY)return gi.CLEARKEY}function CS(n){switch(n){case gi.FAIRPLAY:return Da.FAIRPLAY;case gi.PLAYREADY:return Da.PLAYREADY;case gi.WIDEVINE:return Da.WIDEVINE;case gi.CLEARKEY:return Da.CLEARKEY}}function Cv(n){const{drmSystems:e,widevineLicenseUrl:t}=n,i=e?[gi.FAIRPLAY,gi.WIDEVINE,gi.PLAYREADY,gi.CLEARKEY].filter(r=>!!e[r]):[];return!i[gi.WIDEVINE]&&t&&i.push(gi.WIDEVINE),i}const b4=function(n){return gx!=null&&(n=gx.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function Mse(n,e,t,i){let r;switch(n){case gi.FAIRPLAY:r=["cenc","sinf"];break;case gi.WIDEVINE:case gi.PLAYREADY:r=["cenc"];break;case gi.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return Fse(r,e,t,i)}function Fse(n,e,t,i){return[{initDataTypes:n,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs=${s}`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs=${s}`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function jse(n){var e;return n.sessionType==="persistent-license"||!!((e=n.sessionTypes)!=null&&e.some(t=>t==="persistent-license"))}function S4(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),i=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const l=oT(o).subarray(0,16);return Dse(l),l}}return null}let Iv={};class E0{static clearKeyUriToKeyIdMap(){Iv={}}constructor(e,t,i,r=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=r,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!jp(e)}isSupported(){if(this.method){if(jp(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Da.FAIRPLAY:case Da.WIDEVINE:case Da.PLAYREADY:case Da.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(jp(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(Wn.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const i=Bse(e);return new E0(this.method,this.uri,"identity",this.keyFormatVersions,i)}const t=Ose(this.uri);if(t)switch(this.keyFormat){case Da.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Da.PLAYREADY:{const i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=zre(i,null,t),this.keyId=S4(t);break}default:{let i=t.subarray(0,16);if(i.length!==16){const r=new Uint8Array(16);r.set(i,16-i.length),i=r}this.keyId=i;break}}if(!this.keyId||this.keyId.byteLength!==16){let i=Iv[this.uri];if(!i){const r=Object.keys(Iv).length%Number.MAX_SAFE_INTEGER;i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,r),Iv[this.uri]=i}this.keyId=i}return this}}function Bse(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const tR=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,nR=/#EXT-X-MEDIA:(.*)/g,Use=/^#EXT(?:INF|-X-TARGETDURATION):/m,IS=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),$se=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class ac{static findGroup(e,t){for(let i=0;i<e.length;i++){const r=e[i];if(r.id===t)return r}}static resolve(e,t){return ZE.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Use.test(e)}static parseMasterPlaylist(e,t){const i=Jk(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},s=[];tR.lastIndex=0;let a;for(;(a=tR.exec(e))!=null;)if(a[1]){var o;const c=new pr(a[1],r),u=$_(r,a[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:ac.resolve(u,t)},h=c.decimalResolution("RESOLUTION");h&&(d.width=h.width,d.height=h.height),sR(c.CODECS,d);const p=c["SUPPLEMENTAL-CODECS"];p&&(d.supplemental={},sR(p,d.supplemental)),(o=d.unknownCodecs)!=null&&o.length||s.push(d),r.levels.push(d)}else if(a[3]){const c=a[3],u=a[4];switch(c){case"SESSION-DATA":{const d=new pr(u,r),h=d["DATA-ID"];h&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[h]=d);break}case"SESSION-KEY":{const d=iR(u,t,r);d.encrypted&&d.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(d)):Wn.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new pr(u,r);Zk(r,d,t)}break}case"CONTENT-STEERING":{const d=new pr(u,r);r.contentSteering={uri:ac.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=rR(u);break}}}const l=s.length>0&&s.length<r.levels.length;return r.levels=l?s:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,i){let r;const s={},a=i.levels,o={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(nR.lastIndex=0;(r=nR.exec(e))!==null;){const c=new pr(r[1],i),u=c.TYPE;if(u){const d=o[u],h=s[u]||[];s[u]=h;const p=c.LANGUAGE,m=c["ASSOC-LANGUAGE"],v=c.CHANNELS,b=c.CHARACTERISTICS,x=c["INSTREAM-ID"],w={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||p||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:p,url:c.URI?ac.resolve(c.URI,t):""};if(m&&(w.assocLang=m),v&&(w.channels=v),b&&(w.characteristics=b),x&&(w.instreamId=x),d!=null&&d.length){const S=ac.findGroup(d,w.groupId)||d[0];aR(w,S,"audioCodec"),aR(w,S,"textCodec")}h.push(w)}}return s}static parseLevelPlaylist(e,t,i,r,s,a){var o;const l={url:t},c=new Pse(t),u=c.fragments,d=[];let h=null,p=0,m=0,v=0,b=0,x=0,w=null,S=new wS(r,l),A,C,N,k=-1,R=!1,U=null,j;if(IS.lastIndex=0,c.m3u8=e,c.hasVariableRefs=Jk(e),((o=IS.exec(e))==null?void 0:o[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(A=IS.exec(e))!==null;){R&&(R=!1,S=new wS(r,l),S.playlistOffset=v,S.start=v,S.sn=p,S.cc=b,x&&(S.bitrate=x),S.level=i,h&&(S.initSegment=h,h.rawProgramDateTime&&(S.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null),U&&(S.setByteRange(U),U=null)));const J=A[1];if(J){S.duration=parseFloat(J);const le=(" "+A[2]).slice(1);S.title=le||null,S.tagList.push(le?["INF",J,le]:["INF",J])}else if(A[3]){if(wt(S.duration)){S.playlistOffset=v,S.start=v,N&&lR(S,N,c),S.sn=p,S.level=i,S.cc=b,u.push(S);const le=(" "+A[3]).slice(1);S.relurl=$_(c,le),W_(S,w,d),w=S,v+=S.duration,p++,m=0,R=!0}}else{if(A=A[0].match($se),!A){Wn.warn("No matches on slow regex match for level playlist!");continue}for(C=1;C<A.length&&A[C]===void 0;C++);const le=(" "+A[C]).slice(1),H=(" "+A[C+1]).slice(1),V=A[C+2]?(" "+A[C+2]).slice(1):null;switch(le){case"BYTERANGE":w?S.setByteRange(H,w):S.setByteRange(H);break;case"PROGRAM-DATE-TIME":S.rawProgramDateTime=H,S.tagList.push(["PROGRAM-DATE-TIME",H]),k===-1&&(k=u.length);break;case"PLAYLIST-TYPE":c.type&&Hc(c,le,A),c.type=H.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?Hc(c,le,A):u.length>0&&cR(c,le,A),p=c.startSN=parseInt(H);break;case"SKIP":{c.skippedSegments&&Hc(c,le,A);const z=new pr(H,c),W=z.decimalInteger("SKIPPED-SEGMENTS");if(wt(W)){c.skippedSegments+=W;for(let fe=W;fe--;)u.push(null);p+=W}const te=z.enumeratedString("RECENTLY-REMOVED-DATERANGES");te&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(te.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&Hc(c,le,A),c.targetduration=Math.max(parseInt(H),1);break;case"VERSION":c.version!==null&&Hc(c,le,A),c.version=parseInt(H);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||Hc(c,le,A),c.live=!1;break;case"#":(H||V)&&S.tagList.push(V?[H,V]:[H]);break;case"DISCONTINUITY":b++,S.tagList.push(["DIS"]);break;case"GAP":S.gap=!0,S.tagList.push([le]);break;case"BITRATE":S.tagList.push([le,H]),x=parseInt(H)*1e3,wt(x)?S.bitrate=x:x=0;break;case"DATERANGE":{const z=new pr(H,c),W=new x4(z,c.dateRanges[z.ID],c.dateRangeTagCount);c.dateRangeTagCount++,W.isValid||c.skippedSegments?c.dateRanges[W.id]=W:Wn.warn(`Ignoring invalid DATERANGE tag: "${H}"`),S.tagList.push(["EXT-X-DATERANGE",H]);break}case"DEFINE":{{const z=new pr(H,c);"IMPORT"in z?Ase(c,z,a):Zk(c,z,t)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?Hc(c,le,A):u.length>0&&cR(c,le,A),c.startCC=b=parseInt(H);break;case"KEY":{const z=iR(H,t,c);if(z.isSupported()){if(z.method==="NONE"){N=void 0;break}N||(N={}),N[z.keyFormat]&&(N=wi({},N)),N[z.keyFormat]=z}else Wn.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${H}"`);break}case"START":c.startTimeOffset=rR(H);break;case"MAP":{const z=new pr(H,c);if(S.duration){const W=new wS(r,l);oR(W,z,i,N),h=W,S.initSegment=h,h.rawProgramDateTime&&!S.rawProgramDateTime&&(S.rawProgramDateTime=h.rawProgramDateTime)}else{const W=S.byteRangeEndOffset;if(W){const te=S.byteRangeStartOffset;U=`${W-te}@${te}`}else U=null;oR(S,z,i,N),h=S,R=!0}h.cc=b;break}case"SERVER-CONTROL":{j&&Hc(c,le,A),j=new pr(H),c.canBlockReload=j.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=j.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&j.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=j.optionalFloat("PART-HOLD-BACK",0),c.holdBack=j.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&Hc(c,le,A);const z=new pr(H);c.partTarget=z.decimalFloatingPoint("PART-TARGET");break}case"PART":{let z=c.partList;z||(z=c.partList=[]);const W=m>0?z[z.length-1]:void 0,te=m++,fe=new pr(H,c),F=new Ire(fe,S,l,te,W);z.push(F),S.duration+=F.duration;break}case"PRELOAD-HINT":{const z=new pr(H,c);c.preloadHint=z;break}case"RENDITION-REPORT":{const z=new pr(H,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(z);break}default:Wn.warn(`line parsed but not handled: ${A}`);break}}}w&&!w.relurl?(u.pop(),v-=w.duration,c.partList&&(c.fragmentHint=w)):c.partList&&(W_(S,w,d),S.cc=b,c.fragmentHint=S,N&&lR(S,N,c)),c.targetduration||(c.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const D=u.length,O=u[0],Z=u[D-1];if(v+=c.skippedSegments*c.targetduration,v>0&&D&&Z){c.averagetargetduration=v/D;const J=Z.sn;c.endSN=J!=="initSegment"?J:0,c.live||(Z.endList=!0),O&&c.startCC===void 0&&(c.startCC=O.cc),k>0&&(Wse(u,k),O&&d.unshift(O))}else c.endSN=0,c.startCC=0;return c.fragmentHint&&(v+=c.fragmentHint.duration),c.totalduration=v,d.length&&c.dateRangeTagCount&&O&&w4(d,c),c.endCC=b,c}}function w4(n,e){const t=n.length,i=n[t-1],r=e.live?1/0:e.totalduration,s=Object.keys(e.dateRanges);for(let a=s.length;a--;){const o=e.dateRanges[s[a]],l=o.startDate.getTime();o.tagAnchor=i.ref;for(let c=t;c--;){const u=Hse(e,l,n,c,r);if(u!==-1){o.tagAnchor=e.fragments[u].ref;break}}}}function Hse(n,e,t,i,r){const s=t[i];if(s){const o=s.programDateTime;if(e>=o||i===0){var a;const l=(((a=t[i+1])==null?void 0:a.start)||r)-s.start;if(e<=o+l*1e3){const c=t[i].sn-n.startSN,u=n.fragments;if(u.length>t.length){const h=(t[i+1]||u[u.length-1]).sn-n.startSN;for(let p=h;p>c;p--){const m=u[p].programDateTime;if(e>=m&&e<m+u[p].duration*1e3)return p}}return c}}}return-1}function iR(n,e,t){var i,r;const s=new pr(n,t),a=(i=s.METHOD)!=null?i:"",o=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=(r=s.KEYFORMAT)!=null?r:"identity";o&&s.IV&&!l&&Wn.error(`Invalid IV: ${s.IV}`);const d=o?ac.resolve(o,e):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new E0(a,d,u,h,l)}function rR(n){const t=new pr(n).decimalFloatingPoint("TIME-OFFSET");return wt(t)?t:null}function sR(n,e){let t=(n||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const r=t.filter(s=>c4(s,i));r.length&&(e[`${i}Codec`]=r.map(s=>s.split("/")[0]).join(","),t=t.filter(s=>r.indexOf(s)===-1))}),e.unknownCodecs=t}function aR(n,e,t){const i=e[t];i&&(n[t]=i)}function Wse(n,e){let t=n[e];for(let i=e;i--;){const r=n[i];if(!r)return;r.programDateTime=t.programDateTime-r.duration*1e3,t=r}}function W_(n,e,t){n.rawProgramDateTime?t.push(n):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime)}function oR(n,e,t,i){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",i&&(n.levelkeys=i),n.initSegment=null}function lR(n,e,t){n.levelkeys=e;const{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&i.push(n)}function Hc(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function cR(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function kS(n,e){const t=e.startPTS;if(wt(t)){let i=0,r;e.sn>n.sn?(i=t-n.start,r=n):(i=n.start-t,r=e),r.duration!==i&&r.setDuration(i)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.setStart(n.start+(n.minEndPTS-n.start)):e.setStart(n.start+n.duration):e.setStart(Math.max(n.start-e.duration,0))}function _4(n,e,t,i,r,s){i-t<=0&&(Wn.warn("Fragment should have a positive duration",e),i=t+e.duration,s=r+e.duration);let o=t,l=i;const c=e.startPTS,u=e.endPTS;if(wt(c)){const b=Math.abs(c-t);wt(e.deltaPTS)?e.deltaPTS=Math.max(b,e.deltaPTS):e.deltaPTS=b,o=Math.max(t,c),t=Math.min(t,c),r=Math.min(r,e.startDTS),l=Math.min(i,u),i=Math.max(i,u),s=Math.max(s,e.endDTS)}const d=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(i-e.start),e.startPTS=t,e.maxStartPTS=o,e.startDTS=r,e.endPTS=i,e.minEndPTS=l,e.endDTS=s;const h=e.sn;if(!n||h<n.startSN||h>n.endSN)return 0;let p;const m=h-n.startSN,v=n.fragments;for(v[m]=e,p=m;p>0;p--)kS(v[p],v[p-1]);for(p=m;p<v.length-1;p++)kS(v[p],v[p+1]);return n.fragmentHint&&kS(v[v.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,d}function zse(n,e){if(n===e)return;let t=null;const i=n.fragments;for(let l=i.length-1;l>=0;l--){const c=i[l].initSegment;if(c){t=c;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let r;Yse(n,e,(l,c,u,d)=>{if(!e.startCC&&c.cc!==l.cc){var h,p;const m=l.cc-c.cc;for(let v=u;v<d.length;v++)d[v].cc+=m;e.startCC=(h=(p=A4(n,e.startSN-1))==null?void 0:p.cc)!=null?h:d[0].cc,e.endCC=d[d.length-1].cc}wt(l.startPTS)&&wt(l.endPTS)&&(c.setStart(c.startPTS=l.startPTS),c.startDTS=l.startDTS,c.maxStartPTS=l.maxStartPTS,c.endPTS=l.endPTS,c.endDTS=l.endDTS,c.minEndPTS=l.minEndPTS,c.setDuration(l.endPTS-l.startPTS),c.duration&&(r=c),e.PTSKnown=e.alignedSliding=!0),l.hasStreams&&(c.elementaryStreams=l.elementaryStreams),c.loader=l.loader,l.hasStats&&(c.stats=l.stats),l.initSegment&&(c.initSegment=l.initSegment,t=l.initSegment)});const s=e.fragments,a=e.fragmentHint?s.concat(e.fragmentHint):s;if(t&&a.forEach(l=>{var c;l&&(!l.initSegment||l.initSegment.relurl===((c=t)==null?void 0:c.relurl))&&(l.initSegment=t)}),e.skippedSegments)if(e.deltaUpdateFailed=s.some(l=>!l),e.deltaUpdateFailed){Wn.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)s.shift();e.startSN=s[0].sn}else{e.endCC=s[s.length-1].cc,e.canSkipDateRanges&&(e.dateRanges=Gse(n.dateRanges,e));const l=n.fragments.filter(c=>c.rawProgramDateTime);if(n.hasProgramDateTime&&!e.hasProgramDateTime)for(let c=1;c<a.length;c++)a[c].programDateTime===null&&W_(a[c],a[c-1],l);w4(l,e)}Vse(n.partList,e.partList,(l,c)=>{c.elementaryStreams=l.elementaryStreams,c.stats=l.stats}),r?_4(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):E4(n,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const l=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=l),e.driftEndTime=o,e.driftEnd=l}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=n.requestScheduled)}function Gse(n,e){const{dateRanges:t,recentlyRemovedDateranges:i}=e,r=wi({},n);i&&i.forEach(o=>{delete r[o]});const a=Object.keys(r).length;return a&&Object.keys(t).forEach(o=>{const l=r[o],c=new x4(t[o].attr,l);c.isValid?(r[o]=c,l||(c.tagOrder+=a)):Wn.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${ar(t[o].attr)}"`)}),r}function Vse(n,e,t){if(n&&e){let i=0;for(let r=0,s=n.length;r<=s;r++){const a=n[r],o=e[r+i];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):i--}}}function Yse(n,e,t){const i=e.skippedSegments,r=Math.max(n.startSN,e.startSN)-e.startSN,s=(n.fragmentHint?1:0)+(i?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,a=e.startSN-n.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let c=r;c<=s;c++){const u=l[a+c];let d=o[c];if(i&&!d&&u&&(d=e.fragments[c]=u),u&&d){if(t(u,d,c,o),u.url&&u.url!==d.url){e.playlistParsingError=uR(`media sequence mismatch ${d.sn}:`,n,e,u,d);return}else if(u.cc!==d.cc){e.playlistParsingError=uR(`discontinuity sequence mismatch (${u.cc}!=${d.cc})`,n,e,u,d);return}}}}function uR(n,e,t,i,r){return new Error(`${n} ${r.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function E4(n,e,t=!0){const i=e.startSN+e.skippedSegments-n.startSN,r=n.fragments,s=i>=0;let a=0;if(s&&i<r.length)a=r[i].start;else if(s&&e.startSN===n.endSN+1)a=n.fragmentEnd;else if(s&&t)a=n.fragmentStart+i*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=n.fragmentStart;else return;z_(e,a)}function z_(n,e){if(e){const t=n.fragments;for(let i=n.skippedSegments;i<t.length;i++)t[i].addStart(e);n.fragmentHint&&n.fragmentHint.addStart(e)}}function T4(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const i=n.fragments;if(i.length&&t*4>e){const s=i[i.length-1].duration*1e3;s<t&&(t=s)}}else t/=2;return Math.round(t)}function A4(n,e,t){if(!n)return null;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&t&&t.sn===e?t:null}function dR(n,e,t){return n?L4(n.partList,e,t):null}function L4(n,e,t){if(n)for(let i=n.length;i--;){const r=n[i];if(r.index===t&&r.fragment.sn===e)return r}return null}function C4(n){n.forEach((e,t)=>{var i;(i=e.details)==null||i.fragments.forEach(r=>{r.level=t,r.initSegment&&(r.initSegment.level=t)})})}function Om(n,e){for(let i=0,r=n.length;i<r;i++){var t;if(((t=n[i])==null?void 0:t.cc)===e)return n[i]}return null}function qse(n,e){return!!(n&&e.startCC<n.endCC&&e.endCC>n.startCC)}function fR(n,e){if(n){const t=n.start+e;n.start=n.startPTS=t,n.endPTS=t+n.duration}}function I4(n,e){const t=e.fragments;for(let i=0,r=t.length;i<r;i++)fR(t[i],n);e.fragmentHint&&fR(e.fragmentHint,n),e.alignedSliding=!0}function Kse(n,e){n&&(k4(e,n),!e.alignedSliding&&n&&mx(e,n),!e.alignedSliding&&n&&!e.skippedSegments&&E4(n,e,!1))}function k4(n,e){if(!qse(e,n))return;const t=Math.min(e.endCC,n.endCC),i=Om(e.fragments,t),r=Om(n.fragments,t);if(!i||!r)return;Wn.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const s=i.start-r.start;I4(s,n)}function mx(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,i=e.fragments;if(!t.length||!i.length)return;let r,s;const a=Math.min(e.endCC,n.endCC);e.startCC<a&&n.startCC<a&&(r=Om(i,a),s=Om(t,a)),(!r||!s)&&(r=i[Math.floor(i.length/2)],s=Om(t,r.cc)||t[Math.floor(t.length/2)]);const o=r.programDateTime,l=s.programDateTime;if(!o||!l)return;const c=(l-o)/1e3-(s.start-r.start);I4(c,n)}const Xse={toString:function(n){let e="";const t=n.length;for(let i=0;i<t;i++)e+=`[${n.start(i).toFixed(3)}-${n.end(i).toFixed(3)}]`;return e}},$e={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class lT extends y4{constructor(e,t,i,r,s){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=$e.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:o,media:l,mediaBuffer:c,state:u}=this,d=l?l.currentTime:0,h=Tn.bufferInfo(c||l,d,a.maxBufferHole);if(this.log(`media seeking to ${wt(d)?d.toFixed(3):d}, state: ${u}`),this.state===$e.ENDED)this.resetLoadingState();else if(o){const p=a.maxFragLookUpTolerance,m=o.start-p,v=o.start+o.duration+p;if(!h.len||v<h.start||m>h.end){const b=d>v;(d<m||b)&&(b&&o.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const p=this.lastCurrentTime;if(d>p&&(this.lastCurrentTime=d),!this.loadingParts){const m=Math.max(h.end,d),v=this.shouldLoadParts(this.getLevelDetails(),m);v&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${m.toFixed(2)}`),this.loadingParts=v)}}!this.hls.hasEnoughToStart&&!h.len&&(this.log(`setting startPosition to ${d} because of seek before start`),this.nextLoadPosition=this.startPosition=d),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=e,this.fragmentLoader=new Ese(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new rT(e.config)}registerListeners(){const{hls:e}=this;e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===$e.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=$e.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const i=e.end||0,r=this.config.timelineOffset||0;if(i<=r)return!1;const s=e.nextStart;if(s&&s>r&&s<t.edge||this.media.currentTime<e.start)return!1;const o=t.partList;if(o!=null&&o.length){const c=o[o.length-1];return Tn.isBuffered(this.media,c.start+c.duration/2)}const l=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(l)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),i.addEventListener("seeking",this.onMediaSeeking),i.addEventListener("ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===$e.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const i=!!t.transferMedia,r=this.media;if(r!==null){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=$e.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this.startFragRequested=!0,this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const r=s=>{const a=s.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(a,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,t,i,r).then(s=>{if(!s)return;const a=this.state,o=s.frag;if(this.fragContextChanged(o)){(a===$e.FRAG_LOADING||!this.fragCurrent&&a===$e.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=$e.IDLE);return}"payload"in s&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger($.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===$e.STOPPED||this.state===$e.ERROR||(this.warn(`Frag error: ${(s==null?void 0:s.message)||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===os.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&i.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===os.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:i};this.hls.trigger($.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{const r=i==null?void 0:i.frag;if(!r||this.fragContextChanged(r)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:r}=this,{frag:s,payload:a}=i,o=s.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&jp(o.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,aT(o.method)).catch(c=>{throw r.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:s}),c}).then(c=>{const u=self.performance.now();return r.trigger($.FRAG_DECRYPTED,{frag:s,payload:c,stats:{tstart:l,tdecrypt:u}}),i.payload=c,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===$e.STOPPED||this.state===$e.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state!==$e.STOPPED&&(this.state=$e.IDLE),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${i?Xse.toString(Tn.getBuffered(i)):"(detached)"})`),vs(e)){var r;if(e.type!==kt.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=$e.IDLE;return}}const s=(r=this.levels)==null?void 0:r[e.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=$e.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:r,partsLoaded:s}=e,a=!s||s.length===0||s.some(l=>!l),o=new sT(i.level,i.sn,i.stats.chunkCount+1,0,r?r.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,r){var s;this.fragCurrent=e;const a=t==null?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=$e.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(d=>{if(!this.fragContextChanged(d.frag))return this.hls.trigger($.KEY_LOADED,d),this.state===$e.KEY_LOADING&&(this.state=$e.IDLE),d}),this.hls.trigger($.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments);const l=this.fragPrevious;if(vs(e)&&(!l||e.sn!==l.sn)){const d=this.shouldLoadParts(t.details,e.end);d!==this.loadingParts&&(this.log(`LL-Part loading ${d?"ON":"OFF"} loading sn ${l==null?void 0:l.sn}->${e.sn}`),this.loadingParts=d)}if(i=Math.max(e.start,i||0),this.loadingParts&&vs(e)){const d=a.partList;if(d&&r){i>e.end&&a.fragmentHint&&(e=a.fragmentHint);const h=this.getNextPart(d,e,i);if(h>-1){const p=d[h];e=this.fragCurrent=p.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${p.index} (${h}/${d.length-1}) of ${this.fragInfo(e,!1,p)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=p.start+p.duration,this.state=$e.FRAG_LOADING;let m;return o?m=o.then(v=>!v||this.fragContextChanged(v.frag)?null:this.doFragPartsLoad(e,p,t,r)).catch(v=>this.handleFragLoadError(v)):m=this.doFragPartsLoad(e,p,t,r).catch(v=>this.handleFragLoadError(v)),this.hls.trigger($.FRAG_LOADING,{frag:e,part:p,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):m}else if(!e.url||this.loadedEndOfParts(d,i))return Promise.resolve(null)}}if(vs(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${a?"["+a.startSN+"-"+a.endSN+"]":""}, target: ${parseFloat(i.toFixed(3))}`),wt(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=$e.FRAG_LOADING;const c=this.config.progressive;let u;return c&&o?u=o.then(d=>!d||this.fragContextChanged(d==null?void 0:d.frag)?null:this.fragmentLoader.load(e,r)).catch(d=>this.handleFragLoadError(d)):u=Promise.all([this.fragmentLoader.load(e,c?r:void 0),o]).then(([d])=>(!c&&d&&r&&r(d),d)).catch(d=>this.handleFragLoadError(d)),this.hls.trigger($.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,t,i,r){return new Promise((s,a)=>{var o;const l=[],c=(o=i.details)==null?void 0:o.partList,u=d=>{this.fragmentLoader.loadPart(e,d,r).then(h=>{l[d.index]=h;const p=h.part;this.hls.trigger($.FRAG_LOADED,h);const m=dR(i.details,e.sn,d.index+1)||L4(c,e.sn,d.index+1);if(m)u(m);else return s({frag:e,part:p,partsLoaded:l})}).catch(a)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===De.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger($.ERROR,t)}else this.hls.trigger($.ERROR,{type:jt.OTHER_ERROR,details:De.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==$e.PARSING){!this.fragCurrent&&this.state!==$e.STOPPED&&this.state!==$e.ERROR&&(this.state=$e.IDLE);return}const{frag:i,part:r,level:s}=t,a=self.performance.now();i.stats.parsing.end=a,r&&(r.stats.parsing.end=a);const o=this.getLevelDetails(),c=o&&i.sn>o.endSN||this.shouldLoadParts(o,i.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(i,r,s,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var i;const s=e.partList[0],a=s.end+(((i=e.fragmentHint)==null?void 0:i.duration)||0);if(t>=a){var r;if((this.hls.hasEnoughToStart?((r=this.media)==null?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:r,sn:s,part:a}=e;if(!(t!=null&&t[r]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const o=t[r],l=o.details,c=a>-1?dR(l,s,a):null,u=c?c.fragment:A4(l,s,i);return u?(i&&i!==u&&(u.stats=i.stats),{frag:u,part:c,level:o}):null}bufferFragmentData(e,t,i,r,s){var a;if(!e||this.state!==$e.PARSING)return;const{data1:o,data2:l}=e;let c=o;if(o&&l&&(c=$o(o,l)),!((a=c)!=null&&a.length))return;const u={type:e.type,frag:t,part:i,chunkMeta:r,parent:t.type,data:c};if(this.hls.trigger($.BUFFER_APPENDING,u),e.dropped&&e.independent&&!i){if(s)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Tn.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const i=t.currentTime,r=Tn.bufferInfo(t,i,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),o=Math.max(Math.min(e.start-a,r.end-a),i+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var i;const r=this.getLoadPosition();if(!wt(r))return null;const a=this.lastCurrentTime>r||(i=this.media)!=null&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,t,a)}getFwdBufferInfoAtPos(e,t,i,r){const s=Tn.bufferInfo(e,t,r);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,i);if(a&&(s.nextStart<=a.end||a.gap)){const o=Math.max(Math.min(s.nextStart,a.end)-t,r);return Tn.bufferInfo(e,t,o)}}return s}getMaxBufferLength(e){const{config:t}=this;let i;return e?i=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):i=t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,r=Math.max(Math.min(e-t,i.maxBufferLength),t),s=Math.max(e-t*3,i.maxMaxBufferLength/2,r);return s>=r?(i.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,t=kt.MAIN){var i;const r=(i=this.fragmentTracker)==null?void 0:i.getAppendedFrag(e,t);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,t){const i=t.fragments,r=i.length;if(!r)return null;const{config:s}=this,a=i[0].start,o=s.lowLatencyMode&&!!t.partList;let l=null;if(t.live){const d=s.initialLiveManifestSize;if(r<d)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${d})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var c;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(t,i);const h=this.hls.startPosition,p=this.hls.liveSyncPosition,m=l?(h!==-1&&h>=a?h:p)||l.start:e;this.log(`Setting startPosition to ${m} to match start frag at live edge. mainStart: ${h} liveSyncPosition: ${p} frag.start: ${(c=l)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=m}}else e<=a&&(l=i[0]);if(!l){const d=this.loadingParts?t.partEnd:t.fragmentEnd;l=this.getFragmentAtPosition(e,d,t)}let u=this.filterReplacedPrimary(l,t);if(!u&&l){const d=l.sn-t.startSN;u=this.filterReplacedPrimary(i[d+1]||null,t)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===os.OK||i===os.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,r,s){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&i.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,r,0);if(o!==null&&i.len+o.len>=s){const l=a.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(hR(this.hls.config)){var e,t;if((e=this.hls.interstitialsManager)==null||(t=e.playingItem)==null?void 0:t.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(hR(this.hls.config)&&e.type!==kt.SUBTITLE){const i=this.hls.interstitialsManager,r=i==null?void 0:i.bufferingItem;if(r){const a=r.event;if(a){if(a.appendInPlace||Math.abs(e.start-r.start)>1||r.start===0)return null}else if(e.end<=r.start&&(t==null?void 0:t.live)===!1||e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}const s=i==null?void 0:i.playerQueue;if(s)for(let a=s.length;a--;){const o=s[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,i){let r=-1,s=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const c=e[o];if(a=a&&!c.independent,r>-1&&i<c.start)break;const u=c.loaded;u?r=-1:(s||c.independent||a)&&c.fragment===t&&(r=o),s=u}return r}loadedEndOfParts(e,t){const i=e[e.length-1];return i&&t>i.start&&i.loaded}getInitialLiveFragment(e,t){const i=this.fragPrevious;let r=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),r=dse(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const s=i.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=t[s-e.startSN];i.cc===a.cc&&(r=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=m4(t,i.cc),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(r=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,i){const{config:r}=this;let{fragPrevious:s}=this,{fragments:a,endSN:o}=i;const{fragmentHint:l}=i,{maxFragLookUpTolerance:c}=r,u=i.partList,d=!!(this.loadingParts&&u!=null&&u.length&&l);d&&l&&!this.bitrateTest&&u[u.length-1].fragment.sn===l.sn&&(a=a.concat(l),o=l.sn);let h;if(e<t){var p;const v=e<this.lastCurrentTime||e>t-c||(p=this.media)!=null&&p.paused||!this.startFragRequested?0:c;h=ph(s,a,e,v)}else h=a[a.length-1];if(h){const m=h.sn-i.startSN,v=this.fragmentTracker.getState(h);if((v===os.OK||v===os.PARTIAL&&h.gap)&&(s=h),s&&h.sn===s.sn&&(!d||u[0].fragment.sn>h.sn||!i.live&&!d)&&s&&h.level===s.level){const x=a[m+1];h.sn<o&&this.fragmentTracker.getState(x)!==os.OK?h=x:h=null}}return h}alignPlaylists(e,t,i){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const s=e.fragmentStart,a=!t,o=e.alignedSliding&&wt(s);if(a||!o&&!s){Kse(i,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${r}`),l}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let i=this.startPosition;i<t&&(i=-1);const r=this.timelineOffset;if(i===-1){const s=this.startTimeOffset!==null,a=s?this.startTimeOffset:e.startTimeOffset;a!==null&&wt(a)?(i=t+a,a<0&&(i+=e.edge),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${a} found in ${s?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+r}this.nextLoadPosition=i+r}getLoadPosition(){var e;const{media:t}=this;let i=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?i=t.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&vs(e)&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==$e.FRAG_LOADING_WAITING_RETRY)&&(this.state=$e.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const m=this.getCurrentContext(t.chunkMeta);m&&(t.frag=m.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var r;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}const s=t.details===De.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(i,!0);const a=t.errorAction,{action:o,flags:l,retryCount:c=0,retryConfig:u}=a||{},d=!!a&&!!u,h=d&&o===Xs.RetryRequest,p=d&&!a.resolved&&l===fl.MoveAllAlternatesMatchingHost;if(!h&&p&&vs(i)&&!i.endList)this.resetFragmentErrors(e),this.treatAsGap(i),a.resolved=!0;else if((h||p)&&c<u.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const m=iT(u,c);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${c+1}/${u.maxNumRetry} in ${m}ms`),a.resolved=!0,this.retryDate=self.performance.now()+m,this.state=$e.FRAG_LOADING_WAITING_RETRY}else if(u&&a)if(this.resetFragmentErrors(e),c<u.maxNumRetry)!s&&o!==Xs.RemoveAlternatePermanently&&(a.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${c})`);return}else o===Xs.SendAlternateToPenaltyBox?this.state=$e.WAITING_LEVEL:this.state=$e.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===$e.PARSING||this.state===$e.PARSED){const t=e.frag,i=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,i),s=r&&r.len>.5;s&&this.reduceMaxBufferLength(r.len,(t==null?void 0:t.duration)||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===kt.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==$e.STOPPED&&(this.state=$e.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const r=Tn.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,i),this.state===$e.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==$e.STOPPED&&(this.state=$e.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,r){const s=i.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const d=u.endPTS-u.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${d})`),l||!1;const h=r?0:_4(s,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS);return this.hls.trigger($.LEVEL_PTS_UPDATED,{details:s,level:i,drift:h,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)){var o;if(i.fragmentError===0&&this.treatAsGap(e,i),((o=this.transmuxer)==null?void 0:o.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=$e.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger($.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===kt.MAIN?"level":"track"}fragInfo(e,t=!0,i){var r,s;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${((r=t&&!i?e.startPTS:(i||e).start)!=null?r:NaN).toFixed(3)}-${((s=t&&!i?e.endPTS:(i||e).end)!=null?s:NaN).toFixed(3)}]${i&&e.type==="main"?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function hR(n){return!!n.interstitialsController&&n.enableInterstitialPlayback!==!1}class R4{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;if(e.length)e.length===1?i=e[0]:i=Qse(e,t);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function Qse(n,e){const t=new Uint8Array(e);let i=0;for(let r=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}var RS={exports:{}},pR;function Jse(){return pR||(pR=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new r(u,d||l,h),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,m=new Array(p);h<p;h++)m[h]=d[h].fn;return m},o.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,p,m){var v=t?t+c:c;if(!this._events[v])return!1;var b=this._events[v],x=arguments.length,w,S;if(b.fn){switch(b.once&&this.removeListener(c,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,d),!0;case 4:return b.fn.call(b.context,u,d,h),!0;case 5:return b.fn.call(b.context,u,d,h,p),!0;case 6:return b.fn.call(b.context,u,d,h,p,m),!0}for(S=1,w=new Array(x-1);S<x;S++)w[S-1]=arguments[S];b.fn.apply(b.context,w)}else{var A=b.length,C;for(S=0;S<A;S++)switch(b[S].once&&this.removeListener(c,b[S].fn,void 0,!0),x){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,u);break;case 3:b[S].fn.call(b[S].context,u,d);break;case 4:b[S].fn.call(b[S].context,u,d,h);break;default:if(!w)for(C=1,w=new Array(x-1);C<x;C++)w[C-1]=arguments[C];b[S].fn.apply(b[S].context,w)}}return!0},o.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var p=t?t+c:c;if(!this._events[p])return this;if(!u)return a(this,p),this;var m=this._events[p];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&a(this,p);else{for(var v=0,b=[],x=m.length;v<x;v++)(m[v].fn!==u||h&&!m[v].once||d&&m[v].context!==d)&&b.push(m[v]);b.length?this._events[p]=b.length===1?b[0]:b:a(this,p)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o}(RS)),RS.exports}var Zse=Jse(),cT=Lre(Zse);const T0="1.6.2",Zp={};function eae(){return typeof __HLS_WORKER_BUNDLE__=="function"}function tae(){const n=Zp[T0];if(n)return n.clientCount++,n;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),r={worker:new self.Worker(t),objectURL:t,clientCount:1};return Zp[T0]=r,r}function nae(n){const e=Zp[n];if(e)return e.clientCount++,e;const t=new self.URL(n,self.location.href).href,r={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Zp[n]=r,r}function iae(n){const e=Zp[n||T0];if(e&&e.clientCount--===1){const{worker:i,objectURL:r}=e;delete Zp[n||T0],r&&self.URL.revokeObjectURL(r),i.terminate()}}function P4(n,e){return e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function uT(n,e){return e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function xb(n,e){let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t}function A0(n,e){const t=e;let i=0;for(;uT(n,e);){i+=10;const r=xb(n,e+6);i+=r,P4(n,e+10)&&(i+=10),e+=i}if(i>0)return n.subarray(t,t+i)}function rae(n,e,t,i){const r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=e[t+2],a=s>>2&15;if(a>12){const p=new Error(`invalid ADTS sampling index:${a}`);n.emit($.ERROR,$.ERROR,{type:jt.MEDIA_ERROR,details:De.FRAG_PARSING_ERROR,fatal:!0,error:p,reason:p.message});return}const o=(s>>6&3)+1,l=e[t+3]>>6&3|(s&1)<<2,c="mp4a.40."+o,u=r[a];let d=a;(o===5||o===29)&&(d-=3);const h=[o<<3|(d&14)>>1,(d&1)<<7|l<<3];return Wn.log(`manifest codec:${i}, parsed codec:${c}, channels:${l}, rate:${u} (ADTS object type:${o} sampling index:${a})`),{config:h,samplerate:u,channelCount:l,codec:c,parsedCodec:c,manifestCodec:i}}function N4(n,e){return n[e]===255&&(n[e+1]&246)===240}function D4(n,e){return n[e+1]&1?7:9}function dT(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function sae(n,e){return e+5<n.length}function yx(n,e){return e+1<n.length&&N4(n,e)}function aae(n,e){return sae(n,e)&&N4(n,e)&&dT(n,e)<=n.length-e}function oae(n,e){if(yx(n,e)){const t=D4(n,e);if(e+t>=n.length)return!1;const i=dT(n,e);if(i<=t)return!1;const r=e+i;return r===n.length||yx(n,r)}return!1}function O4(n,e,t,i,r){if(!n.samplerate){const s=rae(e,t,i,r);if(!s)return;wi(n,s)}}function M4(n){return 1024*9e4/n}function lae(n,e){const t=D4(n,e);if(e+t<=n.length){const i=dT(n,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}function F4(n,e,t,i,r){const s=M4(n.samplerate),a=i+r*s,o=lae(e,t);let l;if(o){const{frameLength:d,headerLength:h}=o,p=h+d,m=Math.max(0,t+p-e.length);m?(l=new Uint8Array(p-h),l.set(e.subarray(t+h,e.length),0)):l=e.subarray(t+h,t+p);const v={unit:l,pts:a};return m||n.samples.push(v),{sample:v,length:p,missing:m}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:a},length:c,missing:-1}}function cae(n,e){return uT(n,e)&&xb(n,e+6)+10<=n.length-e}function uae(n){if(n.size<2)return;const e=fo(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}}function dae(n){if(n.size<2)return;if(n.type==="TXXX"){let t=1;const i=fo(n.data.subarray(t),!0);t+=i.length+1;const r=fo(n.data.subarray(t));return{key:n.type,info:i,data:r}}const e=fo(n.data.subarray(1));return{key:n.type,info:"",data:e}}function fae(n){if(n.type==="WXXX"){if(n.size<2)return;let t=1;const i=fo(n.data.subarray(t),!0);t+=i.length+1;const r=fo(n.data.subarray(t));return{key:n.type,info:i,data:r}}const e=fo(n.data);return{key:n.type,info:"",data:e}}function hae(n){return btoa(String.fromCharCode(...n))}function j4(n,e){if(n<0)return-j4(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const r=Math.floor(n*t);return(r%2===0?r:r+1)/t}else return Math.round(n*t)/t}function pae(n,e){const t=new URL(n),i=new URL(e);if(t.origin!==i.origin)return n;const r=t.pathname.split("/").slice(1),s=i.pathname.split("/").slice(1,-1);for(;r[0]===s[0];)r.shift(),s.shift();for(;s.length;)s.shift(),r.unshift("..");return r.join("/")}function gae(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const s=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r=="x"?s:s&3|8).toString(16)})}}}function mae(n){return n instanceof ArrayBuffer?n:n.byteOffset==0&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function PS(n,e=0,t=1/0){return yae(n,e,t,Uint8Array)}function yae(n,e,t,i){const r=vae(n);let s=1;"BYTES_PER_ELEMENT"in i&&(s=i.BYTES_PER_ELEMENT);const a=xae(n)?n.byteOffset:0,o=(a+n.byteLength)/s,l=(a+e)/s,c=Math.floor(Math.max(0,Math.min(l,o))),u=Math.floor(Math.min(c+Math.max(t,0),o));return new i(r,c,u-c)}function vae(n){return n instanceof ArrayBuffer?n:n.buffer}function xae(n){return n&&n.buffer instanceof ArrayBuffer&&n.byteLength!==void 0&&n.byteOffset!==void 0}function bae(n){const e={key:n.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(n.size<2)return;if(n.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const i=n.data.subarray(1).indexOf(0);if(i===-1)return;const r=fo(PS(n.data,1,i)),s=n.data[2+i],a=n.data.subarray(3+i).indexOf(0);if(a===-1)return;const o=fo(PS(n.data,3+i,a));let l;return r==="-->"?l=fo(PS(n.data,4+i+a)):l=mae(n.data.subarray(4+i+a)),e.mimeType=r,e.pictureType=s,e.description=o,e.data=l,e}function Sae(n){return n.type==="PRIV"?uae(n):n.type[0]==="W"?fae(n):n.type==="APIC"?bae(n):dae(n)}function wae(n){const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=xb(n,4),i=10;return{type:e,size:t,data:n.subarray(i,i+t)}}const kv=10,_ae=10;function B4(n){let e=0;const t=[];for(;uT(n,e);){const i=xb(n,e+6);n[e+5]>>6&1&&(e+=kv),e+=kv;const r=e+i;for(;e+_ae<r;){const s=wae(n.subarray(e)),a=Sae(s);a&&t.push(a),e+=s.size+kv}P4(n,e)&&(e+=kv)}return t}function U4(n){return n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp"}function Eae(n){if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,t&&(i+=4772185884e-2),Math.round(i)}}function fT(n){const e=B4(n);for(let t=0;t<e.length;t++){const i=e[t];if(U4(i))return Eae(i)}}let ao=function(n){return n.audioId3="org.id3",n.dateRange="com.apple.quicktime.HLS",n.emsg="https://aomedia.org/emsg/ID3",n.misbklv="urn:misb:KLV:bin:1910.1",n}({});function Zl(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class hT{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=$o(this.cachedData,e),this.cachedData=null);let i=A0(e,0),r=i?i.length:0,s;const a=this._audioTrack,o=this._id3Track,l=i?fT(i):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&wt(l))&&(this.basePTS=Tae(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:ao.audioId3,duration:Number.POSITIVE_INFINITY});r<c;){if(this.canParse(e,r)){const u=this.appendFrame(a,e,r);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r+=u.length,s=r):r=c}else cae(e,r)?(i=A0(e,r),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:ao.audioId3,duration:Number.POSITIVE_INFINITY}),r+=i.length,s=r):r++;if(r===c&&s!==c){const u=e.slice(s);this.cachedData?this.cachedData=$o(this.cachedData,u):this.cachedData=u}}return{audioTrack:a,videoTrack:Zl(),id3Track:o,textTrack:Zl()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Zl(),id3Track:this._id3Track,textTrack:Zl()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Tae=(n,e,t)=>{if(wt(n))return n*90;const i=t?t.baseTime*9e4/t.timescale:0;return e*9e4+i};let Rv=null;const Aae=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Lae=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Cae=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Iae=[0,1,1,4];function $4(n,e,t,i,r){if(t+24>e.length)return;const s=H4(e,t);if(s&&t+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,o=i+r*a,l={unit:e.subarray(t,t+s.frameLength),pts:o,dts:o};return n.config=[],n.channelCount=s.channelCount,n.samplerate=s.sampleRate,n.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function H4(n,e){const t=n[e+1]>>3&3,i=n[e+1]>>1&3,r=n[e+2]>>4&15,s=n[e+2]>>2&3;if(t!==1&&r!==0&&r!==15&&s!==3){const a=n[e+2]>>1&1,o=n[e+3]>>6,l=t===3?3-i:i===3?3:4,c=Aae[l*14+r-1]*1e3,d=Lae[(t===3?0:t===2?1:2)*3+s],h=o===3?1:2,p=Cae[t][i],m=Iae[i],v=p*8*m,b=Math.floor(p*c/d+a)*m;if(Rv===null){const S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Rv=S?parseInt(S[1]):0}return!!Rv&&Rv<=87&&i===2&&c>=224e3&&o===0&&(n[e+3]=n[e+3]|128),{sampleRate:d,channelCount:h,frameLength:b,samplesPerFrame:v}}}function pT(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function W4(n,e){return e+1<n.length&&pT(n,e)}function kae(n,e){return pT(n,e)&&4<=n.length-e}function z4(n,e){if(e+1<n.length&&pT(n,e)){const i=H4(n,e);let r=4;i!=null&&i.frameLength&&(r=i.frameLength);const s=e+r;return s===n.length||W4(n,s)}return!1}class Rae extends hT{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const i=A0(e,0);let r=(i==null?void 0:i.length)||0;if(z4(e,r))return!1;for(let s=e.length;r<s;r++)if(oae(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return aae(e,t)}appendFrame(e,t,i){O4(e,this.observer,t,i,e.manifestCodec);const r=F4(e,t,i,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const G4=(n,e)=>{let t=0,i=5;e+=i;const r=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;i>0;){a[0]=n[e];const o=Math.min(i,8),l=8-o;s[0]=4278190080>>>24+l<<l,r[0]=(a[0]&s[0])>>l,t=t?t<<o|r[0]:r[0],e+=1,i-=o}return t};class Pae extends hT{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const r=V4(e,t,i,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const t=A0(e,0);if(!t)return!1;const i=t.length;return e[i]===11&&e[i+1]===119&&fT(t)!==void 0&&G4(e,i)<16}}function V4(n,e,t,i,r){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const s=e[t+4]>>6;if(s>=3)return-1;const o=[48e3,44100,32e3][s],l=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(t+u>e.length)return-1;const d=e[t+6]>>5;let h=0;d===2?h+=2:(d&1&&d!==1&&(h+=2),d&4&&(h+=2));const p=(e[t+6]<<8|e[t+7])>>12-h&1,v=[2,1,2,3,3,4,4,5][d]+p,b=e[t+5]>>3,x=e[t+5]&7,w=new Uint8Array([s<<6|b<<1|x>>2,(x&3)<<6|d<<3|p<<2|l>>4,l<<4&224]),S=1536/o*9e4,A=i+r*S,C=e.subarray(t,t+u);return n.config=w,n.channelCount=v,n.samplerate=o,n.samples.push({unit:C,pts:A}),u}class Nae extends hT{resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=A0(e,0);let i=(t==null?void 0:t.length)||0;if(t&&e[i]===11&&e[i+1]===119&&fT(t)!==void 0&&G4(e,i)<=16)return!1;for(let r=e.length;i<r;i++)if(z4(e,i))return Wn.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return kae(e,t)}appendFrame(e,t,i){if(this.basePTS!==null)return $4(e,t,i,this.basePTS,this.frameIndex)}}const Dae=/\/emsg[-/]ID3/i;class Oae{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,r){const s=this.videoTrack=Zl("video",1),a=this.audioTrack=Zl("audio",1),o=this.txtTrack=Zl("text",1);if(this.id3Track=Zl("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=s4(e);if(l.video){const{id:c,timescale:u,codec:d,supplemental:h}=l.video;s.id=c,s.timescale=o.timescale=u,s.codec=d,s.supplemental=h}if(l.audio){const{id:c,timescale:u,codec:d}=l.audio;a.id=c,a.timescale=u,a.codec=d}o.id=n4.text,s.sampleDuration=0,s.duration=a.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return Pre(e)}demux(e,t){this.timeOffset=t;let i=e;const r=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=$o(this.remainderData,e));const o=Ure(i);this.remainderData=o.remainder,r.samples=o.valid||new Uint8Array}else r.samples=i;const a=this.extractID3Track(r,t);return s.samples=Ok(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return i.samples=Ok(e,t),{videoTrack:t,audioTrack:Zl(),id3Track:r,textTrack:Zl()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const r=hn(e.samples,["emsg"]);r&&r.forEach(s=>{const a=Hre(s);if(Dae.test(a.schemeIdUri)){const o=gR(a,t);let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=a.payload;i.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:ao.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=gR(a,t);i.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:ao.misbklv,duration:Number.POSITIVE_INFINITY})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function gR(n,e){return wt(n.presentationTime)?n.presentationTime/n.timeScale:e+n.presentationTimeDelta/n.timeScale}class Mae{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new rT(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Hd.cbc)}decryptAacSample(e,t,i){const r=e[t].unit;if(r.length<=16)return;const s=r.subarray(16,r.length-r.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);r.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)})}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length){i();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)i.set(e.subarray(s,s+16),r);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)e.set(i.subarray(r,r+16),s);return e}decryptAvcSample(e,t,i,r,s){const a=o4(s.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,r)})}decryptAvcSamples(e,t,i,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length){r();return}const s=e[t].units;for(;!(i>=s.length);i++){const a=s[i];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,i,r,a),!this.decrypter.isSync()))return}}}}class Y4{constructor(){this.VideoSample=null}createVideoSample(e,t,i){return{key:e,frame:!1,pts:t,dts:i,units:[],length:0}}getLastNalUnit(e){var t;let i=this.VideoSample,r;if((!i||i.units.length===0)&&(i=e[e.length-1]),(t=i)!=null&&t.units){const s=i.units;r=s[s.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const i=t.samples,r=i.length;if(r){const s=i[r-1];e.pts=s.pts,e.dts=s.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,i){const r=t.byteLength;let s=e.naluState||0;const a=s,o=[];let l=0,c,u,d,h=-1,p=0;for(s===-1&&(h=0,p=this.getNALuType(t,0),s=0,l=1);l<r;){if(c=t[l++],!s){s=c?0:1;continue}if(s===1){s=c?0:2;continue}if(!c)s=3;else if(c===1){if(u=l-s-1,h>=0){const m={data:t.subarray(h,u),type:p};o.push(m)}else{const m=this.getLastNalUnit(e.samples);m&&(a&&l<=4-a&&m.state&&(m.data=m.data.subarray(0,m.data.byteLength-a)),u>0&&(m.data=$o(m.data,t.subarray(0,u)),m.state=0))}l<r?(d=this.getNALuType(t,l),h=l,p=d,s=0):s=-1}else s=0}if(h>=0&&s>=0){const m={data:t.subarray(h,r),type:p,state:s};o.push(m)}if(o.length===0){const m=this.getLastNalUnit(e.samples);m&&(m.data=$o(m.data,t))}return e.naluState=s,o}}class Mm{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,r=new Uint8Array(4),s=Math.min(4,t);if(s===0)throw new Error("no bytes available");r.set(e.subarray(i,i+s)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&Wn.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class mR extends Y4{parsePES(e,t,i,r){const s=this.parseNALu(e,i.data,r);let a=this.VideoSample,o,l=!1;i.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),s.forEach(c=>{var u,d;switch(c.type){case 1:{let v=!1;o=!0;const b=c.data;if(l&&b.length>4){const x=this.readSliceType(b);(x===2||x===4||x===7||x===9)&&(v=!0)}if(v){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.frame=!0,a.key=v;break}case 5:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,tT(c.data,1,i.pts,t.samples);break}case 7:{var p,m;o=!0,l=!0;const v=c.data,b=this.readSPS(v);if(!e.sps||e.width!==b.width||e.height!==b.height||((p=e.pixelRatio)==null?void 0:p[0])!==b.pixelRatio[0]||((m=e.pixelRatio)==null?void 0:m[1])!==b.pixelRatio[1]){e.width=b.width,e.height=b.height,e.pixelRatio=b.pixelRatio,e.sps=[v];const x=v.subarray(1,4);let w="avc1.";for(let S=0;S<3;S++){let A=x[S].toString(16);A.length<2&&(A="0"+A),w+=A}e.codec=w}break}case 8:o=!0,e.pps=[c.data];break;case 9:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(c)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new Mm(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let i=8,r=8,s;for(let a=0;a<e;a++)r!==0&&(s=t.readEG(),r=(i+s+256)%256),i=r===0?i:r}readSPS(e){const t=new Mm(e);let i=0,r=0,s=0,a=0,o,l,c;const u=t.readUByte.bind(t),d=t.readBits.bind(t),h=t.readUEG.bind(t),p=t.readBoolean.bind(t),m=t.skipBits.bind(t),v=t.skipEG.bind(t),b=t.skipUEG.bind(t),x=this.skipScalingList.bind(this);u();const w=u();if(d(5),m(3),u(),b(),w===100||w===110||w===122||w===244||w===44||w===83||w===86||w===118||w===128){const R=h();if(R===3&&m(1),b(),b(),m(1),p())for(l=R!==3?8:12,c=0;c<l;c++)p()&&(c<6?x(16,t):x(64,t))}b();const S=h();if(S===0)h();else if(S===1)for(m(1),v(),v(),o=h(),c=0;c<o;c++)v();b(),m(1);const A=h(),C=h(),N=d(1);N===0&&m(1),m(1),p()&&(i=h(),r=h(),s=h(),a=h());let k=[1,1];if(p()&&p())switch(u()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:{k=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((A+1)*16-i*2-r*2),height:(2-N)*(C+1)*16-(N?2:4)*(s+a),pixelRatio:k}}}class yR extends Y4{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,i,r){const s=this.parseNALu(e,i.data,r);let a=this.VideoSample,o,l=!1;i.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),s.forEach(c=>{var u,d;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,l){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,tT(c.data,2,i.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=wi(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(o=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const p=this.readSPS(c.data);e.width=p.width,e.height=p.height,e.pixelRatio=p.pixelRatio,e.codec=p.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const m in p.params)e.params[m]=p.params[m]}this.pushParameterSet(e.sps,c.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const p=this.readPPS(c.data);for(const m in p)e.params[m]=p[m]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:o=!1;break}a&&o&&a.units.push(c)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let i=0;for(let r=0;r<e.byteLength;r++)r>=2&&e[r]===3&&e[r-1]===0&&e[r-2]===0||(t[i]=e[r],i++);return new Uint8Array(t.buffer,0,i)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Mm(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const i=t.readBits(3),r=t.readBoolean();return{numTemporalLayers:i+1,temporalIdNested:r}}readSPS(e){const t=new Mm(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const i=t.readBits(3);t.readBoolean();const r=t.readBits(2),s=t.readBoolean(),a=t.readBits(5),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),u=t.readUByte(),d=t.readUByte(),h=t.readUByte(),p=t.readUByte(),m=t.readUByte(),v=t.readUByte(),b=t.readUByte(),x=t.readUByte(),w=[],S=[];for(let oe=0;oe<i;oe++)w.push(t.readBoolean()),S.push(t.readBoolean());if(i>0)for(let oe=i;oe<8;oe++)t.readBits(2);for(let oe=0;oe<i;oe++)w[oe]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),S[oe]&&t.readUByte();t.readUEG();const A=t.readUEG();A==3&&t.skipBits(1);const C=t.readUEG(),N=t.readUEG(),k=t.readBoolean();let R=0,U=0,j=0,D=0;k&&(R+=t.readUEG(),U+=t.readUEG(),j+=t.readUEG(),D+=t.readUEG());const O=t.readUEG(),Z=t.readUEG(),J=t.readUEG(),le=t.readBoolean();for(let oe=le?0:i;oe<=i;oe++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let ut=0;ut<4;ut++)for(let dt=0;dt<(ut===3?2:6);dt++)if(!t.readBoolean())t.readUEG();else{const Qe=Math.min(64,1<<4+(ut<<1));ut>1&&t.readEG();for(let Ze=0;Ze<Qe;Ze++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const z=t.readUEG();let W=0;for(let oe=0;oe<z;oe++){let ut=!1;if(oe!==0&&(ut=t.readBoolean()),ut){oe===z&&t.readUEG(),t.readBoolean(),t.readUEG();let dt=0;for(let Se=0;Se<=W;Se++){const Qe=t.readBoolean();let Ze=!1;Qe||(Ze=t.readBoolean()),(Qe||Ze)&&dt++}W=dt}else{const dt=t.readUEG(),Se=t.readUEG();W=dt+Se;for(let Qe=0;Qe<dt;Qe++)t.readUEG(),t.readBoolean();for(let Qe=0;Qe<Se;Qe++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const oe=t.readUEG();for(let ut=0;ut<oe;ut++){for(let dt=0;dt<J+4;dt++)t.readBits(1);t.readBits(1)}}let fe=0,F=1,K=1,ee=!0,ae=1,ce=0;t.readBoolean(),t.readBoolean();let ye=!1;if(t.readBoolean()){if(t.readBoolean()){const it=t.readUByte(),et=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],mt=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];it>0&&it<16?(F=et[it-1],K=mt[it-1]):it===255&&(F=t.readBits(16),K=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),ye=t.readBoolean(),ye&&(R+=t.readUEG(),U+=t.readUEG(),j+=t.readUEG(),D+=t.readUEG()),t.readBoolean()&&(ae=t.readBits(32),ce=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const mt=t.readBoolean(),Rt=t.readBoolean();let at=!1;(mt||Rt)&&(at=t.readBoolean(),at&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),at&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let $t=0;$t<=i;$t++){ee=t.readBoolean();const en=ee||t.readBoolean();let Pt=!1;en?t.readEG():Pt=t.readBoolean();const qt=Pt?1:t.readUEG()+1;if(mt)for(let lt=0;lt<qt;lt++)t.readUEG(),t.readUEG(),at&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(Rt)for(let lt=0;lt<qt;lt++)t.readUEG(),t.readUEG(),at&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),fe=t.readUEG())}let Te=C,Xe=N;if(k||ye){let oe=1,ut=1;A===1?oe=ut=2:A==2&&(oe=2),Te=C-oe*U-oe*R,Xe=N-ut*D-ut*j}const ze=r?["A","B","C"][r]:"",He=o<<24|l<<16|c<<8|u;let rt=0;for(let oe=0;oe<32;oe++)rt=(rt|(He>>oe&1)<<31-oe)>>>0;let ft=rt.toString(16);return a===1&&ft==="2"&&(ft="6"),{codecString:`hvc1.${ze}${a}.${ft}.${s?"H":"L"}${x}.B0`,params:{general_tier_flag:s,general_profile_idc:a,general_profile_space:r,general_profile_compatibility_flags:[o,l,c,u],general_constraint_indicator_flags:[d,h,p,m,v,b],general_level_idc:x,bit_depth:O+8,bit_depth_luma_minus8:O,bit_depth_chroma_minus8:Z,min_spatial_segmentation_idc:fe,chroma_format_idc:A,frame_rate:{fixed:ee,fps:ce/ae}},width:Te,height:Xe,pixelRatio:[F,K]}}readPPS(e){const t=new Mm(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const r=t.readBoolean(),s=t.readBoolean();let a=1;return s&&r?a=0:s?a=3:r&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const ms=188;class od{constructor(e,t,i,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=r,this.videoParser=null}static probe(e,t){const i=od.syncOffset(e);return i>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),i!==-1}static syncOffset(e){const t=e.length;let i=Math.min(ms*5,t-ms)+1,r=0;for(;r<i;){let s=!1,a=-1,o=0;for(let l=r;l<t;l+=ms)if(e[l]===71&&(t-l===ms||e[l+ms]===71)){if(o++,a===-1&&(a=l,a!==0&&(i=Math.min(a+ms*99,e.length-ms)+1)),s||(s=G_(e,l)===0),s&&o>1&&(a===0&&o>2||l+ms>i))return a}else{if(o)return-1;break}r++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:n4[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,i,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=od.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=od.createTrack("audio",r),this._id3Track=od.createTrack("id3"),this._txtTrack=od.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,r=!1){i||(this.sampleAes=null);let s;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=a.pid,d=a.pesData,h=o.pid,p=l.pid,m=o.pesData,v=l.pesData,b=null,x=this.pmtParsed,w=this._pmtId,S=e.length;if(this.remainderData&&(e=$o(this.remainderData,e),S=e.length,this.remainderData=null),S<ms&&!r)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};const A=Math.max(0,od.syncOffset(e));S-=(S-A)%ms,S<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,S,e.buffer.byteLength-S));let C=0;for(let k=A;k<S;k+=ms)if(e[k]===71){const R=!!(e[k+1]&64),U=G_(e,k),j=(e[k+3]&48)>>4;let D;if(j>1){if(D=k+5+e[k+4],D===k+ms)continue}else D=k+4;switch(U){case u:if(R){if(d&&(s=op(d,this.logger))){if(this.videoParser===null)switch(a.segmentCodec){case"avc":this.videoParser=new mR;break;case"hevc":this.videoParser=new yR;break}this.videoParser!==null&&this.videoParser.parsePES(a,c,s,!1)}d={data:[],size:0}}d&&(d.data.push(e.subarray(D,k+ms)),d.size+=k+ms-D);break;case h:if(R){if(m&&(s=op(m,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,s);break;case"mp3":this.parseMPEGPES(o,s);break;case"ac3":this.parseAC3PES(o,s);break}m={data:[],size:0}}m&&(m.data.push(e.subarray(D,k+ms)),m.size+=k+ms-D);break;case p:R&&(v&&(s=op(v,this.logger))&&this.parseID3PES(l,s),v={data:[],size:0}),v&&(v.data.push(e.subarray(D,k+ms)),v.size+=k+ms-D);break;case 0:R&&(D+=e[D]+1),w=this._pmtId=Fae(e,D);break;case w:{R&&(D+=e[D]+1);const O=jae(e,D,this.typeSupported,i,this.observer,this.logger);u=O.videoPid,u>0&&(a.pid=u,a.segmentCodec=O.segmentVideoCodec),h=O.audioPid,h>0&&(o.pid=h,o.segmentCodec=O.segmentAudioCodec),p=O.id3Pid,p>0&&(l.pid=p),b!==null&&!x&&(this.logger.warn(`MPEG-TS PMT found at ${k} after unknown PID '${b}'. Backtracking to sync byte @${A} to parse all TS packets.`),b=null,k=A-188),x=this.pmtParsed=!0;break}case 17:case 8191:break;default:b=U;break}}else C++;C>0&&V_(this.observer,new Error(`Found ${C} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=d,o.pesData=m,l.pesData=v;const N={audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};return r&&this.extractRemainingSamples(N),N}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:r,textTrack:s}=e,a=i.pesData,o=t.pesData,l=r.pesData;let c;if(a&&(c=op(a,this.logger))){if(this.videoParser===null)switch(i.segmentCodec){case"avc":this.videoParser=new mR;break;case"hevc":this.videoParser=new yR;break}this.videoParser!==null&&(this.videoParser.parsePES(i,s,c,!0),i.pesData=null)}else i.pesData=a;if(o&&(c=op(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(c=op(l,this.logger))?(this.parseID3PES(r,c),r.pesData=null):r.pesData=l}demuxSampleAes(e,t,i){const r=this.demux(e,i,!0,!this.config.progressive),s=this.sampleAes=new Mae(this.observer,this.config,t);return this.decrypt(r,s)}decrypt(e,t){return new Promise(i=>{const{audioTrack:r,videoTrack:s}=e;r.samples&&r.segmentCodec==="aac"?t.decryptAacSamples(r.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{i(e)}):i(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{i(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let i=0;const r=this.aacOverFlow;let s=t.data;if(r){this.aacOverFlow=null;const d=r.missing,h=r.sample.unit.byteLength;if(d===-1)s=$o(r.sample.unit,s);else{const p=h-d;r.sample.unit.set(s.subarray(0,d),p),e.samples.push(r.sample),i=r.missing}}let a,o;for(a=i,o=s.length;a<o-1&&!yx(s,a);a++);if(a!==i){let d;const h=a<o-1;if(h?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",V_(this.observer,new Error(d),h,this.logger),!h)return}O4(e,this.observer,s,a,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(r){const d=M4(e.samplerate);l=r.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;a<o;)if(u=F4(e,s,a,l,c),a+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;a<o-1&&!yx(s,a);a++);}parseMPEGPES(e,t){const i=t.data,r=i.length;let s=0,a=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<r;)if(W4(i,a)){const l=$4(e,i,a,o,s);if(l)a+=l.length,s++;else break}else a++}parseAC3PES(e,t){{const i=t.data,r=t.pts;if(r===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=i.length;let a=0,o=0,l;for(;o<s&&(l=V4(e,i,o,r,a++))>0;)o+=l}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=wi({},t,{type:this._videoTrack?ao.emsg:ao.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function G_(n,e){return((n[e+1]&31)<<8)+n[e+2]}function Fae(n,e){return(n[e+10]&31)<<8|n[e+11]}function jae(n,e,t,i,r,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(n[e+1]&15)<<8|n[e+2],l=e+3+o-4,c=(n[e+10]&15)<<8|n[e+11];for(e+=12+c;e<l;){const u=G_(n,e),d=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!i){NS("ADTS AAC",s);break}case 15:a.audioPid===-1&&(a.audioPid=u);break;case 21:a.id3Pid===-1&&(a.id3Pid=u);break;case 219:if(!i){NS("H.264",s);break}case 27:a.videoPid===-1&&(a.videoPid=u);break;case 3:case 4:!t.mpeg&&!t.mp3?s.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="mp3");break;case 193:if(!i){NS("AC-3",s);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&d>0){let h=e+5,p=d;for(;p>2;){switch(n[h]){case 106:t.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=u,a.segmentAudioCodec="ac3");break}const v=n[h+1]+2;h+=v,p-=v}}break;case 194:case 135:return V_(r,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:a.videoPid===-1&&(a.videoPid=u,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}e+=d+5}return a}function V_(n,e,t,i){i.warn(`parsing error: ${e.message}`),n.emit($.ERROR,$.ERROR,{type:jt.MEDIA_ERROR,details:De.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function NS(n,e){e.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function op(n,e){let t=0,i,r,s,a,o;const l=n.data;if(!n||n.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=$o(l[0],l[1]),l.splice(1,1);if(i=l[0],(i[0]<<16)+(i[1]<<8)+i[2]===1){if(r=(i[4]<<8)+i[5],r&&r>n.size-6)return null;const u=i[7];u&192&&(a=(i[9]&14)*536870912+(i[10]&255)*4194304+(i[11]&254)*16384+(i[12]&255)*128+(i[13]&254)/2,u&64?(o=(i[14]&14)*536870912+(i[15]&255)*4194304+(i[16]&254)*16384+(i[17]&255)*128+(i[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),s=i[8];let d=s+9;if(n.size<=d)return null;n.size-=d;const h=new Uint8Array(n.size);for(let p=0,m=l.length;p<m;p++){i=l[p];let v=i.byteLength;if(d)if(d>v){d-=v;continue}else i=i.subarray(d),v-=d,d=0;h.set(i,t),t+=v}return r&&(r-=s+3),{data:h,pts:a,dts:o,len:r}}return null}class Bae{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ed=Math.pow(2,32)-1;class ke{static init(){ke.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ke.types)ke.types.hasOwnProperty(e)&&(ke.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ke.HDLR_TYPES={video:t,audio:i};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);ke.STTS=ke.STSC=ke.STCO=s,ke.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ke.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ke.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ke.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);ke.FTYP=ke.box(ke.types.ftyp,a,l,a,o),ke.DINF=ke.box(ke.types.dinf,ke.box(ke.types.dref,r))}static box(e,...t){let i=8,r=t.length;const s=r;for(;r--;)i+=t[r].byteLength;const a=new Uint8Array(i);for(a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=i&255,a.set(e,4),r=0,i=8;r<s;r++)a.set(t[r],i),i+=t[r].byteLength;return a}static hdlr(e){return ke.box(ke.types.hdlr,ke.HDLR_TYPES[e])}static mdat(e){return ke.box(ke.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(ed+1)),r=Math.floor(t%(ed+1));return ke.box(ke.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return ke.box(ke.types.mdia,ke.mdhd(e.timescale||0,e.duration||0),ke.hdlr(e.type),ke.minf(e))}static mfhd(e){return ke.box(ke.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ke.box(ke.types.minf,ke.box(ke.types.smhd,ke.SMHD),ke.DINF,ke.stbl(e)):ke.box(ke.types.minf,ke.box(ke.types.vmhd,ke.VMHD),ke.DINF,ke.stbl(e))}static moof(e,t,i){return ke.box(ke.types.moof,ke.mfhd(e),ke.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=ke.trak(e[t]);return ke.box.apply(null,[ke.types.moov,ke.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(ke.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=ke.trex(e[t]);return ke.box.apply(null,[ke.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(ed+1)),r=Math.floor(t%(ed+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ke.box(ke.types.mvhd,s)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let r,s;for(r=0;r<t.length;r++)s=t[r].flags,i[r+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return ke.box(ke.types.sdtp,i)}static stbl(e){return ke.box(ke.types.stbl,ke.stsd(e),ke.box(ke.types.stts,ke.STTS),ke.box(ke.types.stsc,ke.STSC),ke.box(ke.types.stsz,ke.STSZ),ke.box(ke.types.stco,ke.STCO))}static avc1(e){let t=[],i=[],r,s,a;for(r=0;r<e.sps.length;r++)s=e.sps[r],a=s.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(s));for(r=0;r<e.pps.length;r++)s=e.pps[r],a=s.byteLength,i.push(a>>>8&255),i.push(a&255),i=i.concat(Array.prototype.slice.call(s));const o=ke.box(ke.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return ke.box(ke.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,ke.box(ke.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ke.box(ke.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return ke.box(ke.types.mp4a,ke.audioStsd(e),ke.box(ke.types.esds,ke.esds(e)))}static mp3(e){return ke.box(ke.types[".mp3"],ke.audioStsd(e))}static ac3(e){return ke.box(ke.types["ac-3"],ke.audioStsd(e),ke.box(ke.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return ke.box(ke.types.stsd,ke.STSD,ke.mp4a(e));if(t==="ac3"&&e.config)return ke.box(ke.types.stsd,ke.STSD,ke.ac3(e));if(t==="mp3"&&e.codec==="mp3")return ke.box(ke.types.stsd,ke.STSD,ke.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return ke.box(ke.types.stsd,ke.STSD,ke.avc1(e));if(t==="hevc"&&e.vps)return ke.box(ke.types.stsd,ke.STSD,ke.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,i=(e.duration||0)*(e.timescale||0),r=e.width||0,s=e.height||0,a=Math.floor(i/(ed+1)),o=Math.floor(i%(ed+1));return ke.box(ke.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,t){const i=ke.sdtp(e),r=e.id,s=Math.floor(t/(ed+1)),a=Math.floor(t%(ed+1));return ke.box(ke.types.traf,ke.box(ke.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),ke.box(ke.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),ke.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,ke.box(ke.types.trak,ke.tkhd(e),ke.mdia(e))}static trex(e){const t=e.id;return ke.box(ke.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],r=i.length,s=12+16*r,a=new Uint8Array(s);let o,l,c,u,d,h;for(t+=8+s,a.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<r;o++)l=i[o],c=l.duration,u=l.size,d=l.flags,h=l.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*o);return ke.box(ke.types.trun,a)}static initSegment(e){ke.types||ke.init();const t=ke.moov(e);return $o(ke.FTYP,t)}static hvc1(e){const t=e.params,i=[e.vps,e.sps,e.pps],r=4,s=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),r-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),i.length]);let a=s.length;for(let m=0;m<i.length;m+=1){a+=3;for(let v=0;v<i[m].length;v+=1)a+=2+i[m][v].length}const o=new Uint8Array(a);o.set(s,0),a=s.length;const l=i.length-1;for(let m=0;m<i.length;m+=1){o.set(new Uint8Array([32+m|(m===l?128:0),0,i[m].length]),a),a+=3;for(let v=0;v<i[m].length;v+=1)o.set(new Uint8Array([i[m][v].length>>8,i[m][v].length&255]),a),a+=2,o.set(i[m][v],a),a+=i[m][v].length}const c=ke.box(ke.types.hvcC,o),u=e.width,d=e.height,h=e.pixelRatio[0],p=e.pixelRatio[1];return ke.box(ke.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,ke.box(ke.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ke.box(ke.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,p>>24,p>>16&255,p>>8&255,p&255])))}}ke.types=void 0;ke.HDLR_TYPES=void 0;ke.STTS=void 0;ke.STSC=void 0;ke.STCO=void 0;ke.STSZ=void 0;ke.VMHD=void 0;ke.SMHD=void 0;ke.STSD=void 0;ke.FTYP=void 0;ke.DINF=void 0;const q4=9e4;function gT(n,e,t=1,i=!1){const r=n*e*t;return i?Math.round(r):r}function Uae(n,e,t=1,i=!1){return gT(n,e,1/t,i)}function Qg(n,e=!1){return gT(n,1e3,1/q4,e)}function $ae(n,e=1){return gT(n,q4,1/e)}const Hae=10*1e3,Wae=1024,zae=1152,Gae=1536;let lp=null,DS=null;function vR(n,e,t,i){return{duration:e,size:t,cts:i,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:n?2:1,isNonSync:n?0:1}}}class c1{constructor(e,t,i,r){if(this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=r,this.ISGenerated=!1,lp===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);lp=a?parseInt(a[1]):0}if(DS===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);DS=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,r=e.reduce((s,a)=>{let o=a.pts,l=o-s;return l<-4294967296&&(t=!0,o=Po(o,i),l=o-s),l>0?s:o},i);return t&&this.logger.debug("PTS rollover detected"),r}remux(e,t,i,r,s,a,o,l){let c,u,d,h,p,m,v=s,b=s;const x=e.pid>-1,w=t.pid>-1,S=t.samples.length,A=e.samples.length>0,C=o&&S>0||S>1;if((!x||A)&&(!w||C)||this.ISGenerated||o){if(this.ISGenerated){var k,R,U,j;const J=this.videoTrackConfig;(J&&(t.width!==J.width||t.height!==J.height||((k=t.pixelRatio)==null?void 0:k[0])!==((R=J.pixelRatio)==null?void 0:R[0])||((U=t.pixelRatio)==null?void 0:U[1])!==((j=J.pixelRatio)==null?void 0:j[1]))||!J&&C||this.nextAudioPts===null&&A)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,t,s,a));const D=this.isVideoContiguous;let O=-1,Z;if(C&&(O=Vae(t.samples),!D&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,O>0){this.logger.warn(`[mp4-remuxer]: Dropped ${O} out of ${S} video samples due to a missing keyframe`);const J=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(O),t.dropped+=O,b+=(t.samples[0].pts-J)/t.inputTimeScale,Z=b}else O===-1&&(this.logger.warn(`[mp4-remuxer]: No keyframe found out of ${S} video samples`),m=!1);if(this.ISGenerated){if(A&&C){const J=this.getVideoStartPts(t.samples),H=(Po(e.samples[0].pts,J)-J)/t.inputTimeScale;v+=Math.max(0,H),b+=Math.max(0,-H)}if(A){if(e.samplerate||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,s,a)),u=this.remuxAudio(e,v,this.isAudioContiguous,a,w||C||l===kt.AUDIO?b:void 0),C){const J=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,s,a)),c=this.remuxVideo(t,b,D,J)}}else C&&(c=this.remuxVideo(t,b,D,0));c&&(c.firstKeyFrame=O,c.independent=O!==-1,c.firstKeyFramePTS=Z)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(p=K4(i,s,this._initPTS,this._initDTS)),r.samples.length&&(h=X4(r,s,this._initPTS))),{audio:u,video:c,initSegment:d,independent:m,text:h,id3:p}}generateIS(e,t,i,r){const s=e.samples,a=t.samples,o=this.typeSupported,l={},c=this._initPTS;let u=!c||r,d="audio/mp4",h,p,m;if(u&&(h=p=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):ke.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(m=e.inputTimeScale,!c||m!==c.timescale?h=p=s[0].pts-Math.round(m*i):u=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:ke.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(m=t.inputTimeScale,!c||m!==c.timescale){const v=this.getVideoStartPts(a),b=Math.round(m*i);p=Math.min(p,Po(a[0].dts,v)-b),h=Math.min(h,v-b)}else u=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:h,timescale:m},this._initDTS={baseTime:p,timescale:m}):h=m=void 0,{tracks:l,initPTS:h,timescale:m}}remuxVideo(e,t,i,r){const s=e.inputTimeScale,a=e.samples,o=[],l=a.length,c=this._initPTS;let u=this.nextAvcDts,d=8,h=this.videoSampleDuration,p,m,v=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,x=!1;if(!i||u===null){const W=t*s,te=a[0].pts-Po(a[0].dts,a[0].pts);lp&&u!==null&&Math.abs(W-te-u)<15e3?i=!0:u=W-te}const w=c.baseTime*s/c.timescale;for(let W=0;W<l;W++){const te=a[W];te.pts=Po(te.pts-w,u),te.dts=Po(te.dts-w,u),te.dts<a[W>0?W-1:W].dts&&(x=!0)}x&&a.sort(function(W,te){const fe=W.dts-te.dts,F=W.pts-te.pts;return fe||F}),p=a[0].dts,m=a[a.length-1].dts;const S=m-p,A=S?Math.round(S/(l-1)):h||e.inputTimeScale/30;if(i){const W=p-u,te=W>A,fe=W<-1;if((te||fe)&&(te?this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Qg(W,!0)} ms (${W}dts) hole between fragments detected at ${t.toFixed(3)}`):this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Qg(-W,!0)} ms (${W}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!fe||u>=a[0].pts||lp)){p=u;const F=a[0].pts-W;if(te)a[0].dts=p,a[0].pts=F;else{let K=!0;for(let ee=0;ee<a.length&&!(a[ee].dts>F&&K);ee++){const ae=a[ee].pts;if(a[ee].dts-=W,a[ee].pts-=W,ee<a.length-1){const ce=a[ee+1].pts,ye=a[ee].pts,be=ce<=ye,Te=ce<=ae;K=be==Te}}}this.logger.log(`Video: Initial PTS/DTS adjusted: ${Qg(F,!0)}/${Qg(p,!0)}, delta: ${Qg(W,!0)} ms`)}}p=Math.max(0,p);let C=0,N=0,k=p;for(let W=0;W<l;W++){const te=a[W],fe=te.units,F=fe.length;let K=0;for(let ee=0;ee<F;ee++)K+=fe[ee].data.length;N+=K,C+=F,te.length=K,te.dts<k?(te.dts=k,k+=A/4|0||1):k=te.dts,v=Math.min(te.pts,v),b=Math.max(te.pts,b)}m=a[l-1].dts;const R=N+4*C+8;let U;try{U=new Uint8Array(R)}catch(W){this.observer.emit($.ERROR,$.ERROR,{type:jt.MUX_ERROR,details:De.REMUX_ALLOC_ERROR,fatal:!1,error:W,bytes:R,reason:`fail allocating video mdat ${R}`});return}const j=new DataView(U.buffer);j.setUint32(0,R),U.set(ke.types.mdat,4);let D=!1,O=Number.POSITIVE_INFINITY,Z=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY,le=Number.NEGATIVE_INFINITY;for(let W=0;W<l;W++){const te=a[W],fe=te.units;let F=0;for(let ae=0,ce=fe.length;ae<ce;ae++){const ye=fe[ae],be=ye.data,Te=ye.data.byteLength;j.setUint32(d,Te),d+=4,U.set(be,d),d+=Te,F+=4+Te}let K;if(W<l-1)h=a[W+1].dts-te.dts,K=a[W+1].pts-te.pts;else{const ae=this.config,ce=W>0?te.dts-a[W-1].dts:A;if(K=W>0?te.pts-a[W-1].pts:A,ae.stretchShortVideoTrack&&this.nextAudioPts!==null){const ye=Math.floor(ae.maxBufferHole*s),be=(r?v+r*s:this.nextAudioPts)-te.pts;be>ye?(h=be-ce,h<0?h=ce:D=!0,this.logger.log(`[mp4-remuxer]: It is approximately ${be/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=ce}else h=ce}const ee=Math.round(te.pts-te.dts);O=Math.min(O,h),J=Math.max(J,h),Z=Math.min(Z,K),le=Math.max(le,K),o.push(vR(te.key,h,F,ee))}if(o.length){if(lp){if(lp<70){const W=o[0].flags;W.dependsOn=2,W.isNonSync=0}}else if(DS&&le-Z<J-O&&A/J<.025&&o[0].cts===0){this.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let W=p;for(let te=0,fe=o.length;te<fe;te++){const F=W+o[te].duration,K=W+o[te].cts;if(te<fe-1){const ee=F+o[te+1].cts;o[te].duration=ee-K}else o[te].duration=te?o[te-1].duration:A;o[te].cts=0,W=F}}}h=D||!h?A:h,this.nextAvcDts=u=m+h,this.videoSampleDuration=h,this.isVideoContiguous=!0;const z={data1:ke.moof(e.sequenceNumber++,p,wi(e,{samples:o})),data2:U,startPTS:v/s,endPTS:(b+h)/s,startDTS:p/s,endDTS:u/s,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,z}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return zae;case"ac3":return Gae;default:return Wae}}remuxAudio(e,t,i,r,s){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,c=this.getSamplesPerFrame(e),u=c*l,d=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,p=[],m=s!==void 0;let v=e.samples,b=h?0:8,x=this.nextAudioPts||-1;const w=t*a,S=d.baseTime*a/d.timescale;if(this.isAudioContiguous=i=i||v.length&&x>0&&(r&&Math.abs(w-x)<9e3||Math.abs(Po(v[0].pts-S,w)-x)<20*u),v.forEach(function(H){H.pts=Po(H.pts-S,w)}),!i||x<0){if(v=v.filter(H=>H.pts>=0),!v.length)return;s===0?x=0:r&&!m?x=Math.max(0,w):x=v[0].pts}if(e.segmentCodec==="aac"){const H=this.config.maxAudioFramesDrift;for(let V=0,z=x;V<v.length;V++){const W=v[V],te=W.pts,fe=te-z,F=Math.abs(1e3*fe/a);if(fe<=-H*u&&m)V===0&&(this.logger.warn(`Audio frame @ ${(te/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*fe/a)} ms.`),this.nextAudioPts=x=z=te);else if(fe>=H*u&&F<Hae&&m){let K=Math.round(fe/u);z=te-K*u,z<0&&(K--,z+=u),V===0&&(this.nextAudioPts=x=z),this.logger.warn(`[mp4-remuxer]: Injecting ${K} audio frame @ ${(z/a).toFixed(3)}s due to ${Math.round(1e3*fe/a)} ms gap.`);for(let ee=0;ee<K;ee++){const ae=Math.max(z,0);let ce=Bae.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);ce||(this.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ce=W.unit.subarray()),v.splice(V,0,{unit:ce,pts:ae}),z+=u,V++}}W.pts=z,z+=u}}let A=null,C=null,N,k=0,R=v.length;for(;R--;)k+=v[R].unit.byteLength;for(let H=0,V=v.length;H<V;H++){const z=v[H],W=z.unit;let te=z.pts;if(C!==null){const F=p[H-1];F.duration=Math.round((te-C)/l)}else if(i&&e.segmentCodec==="aac"&&(te=x),A=te,k>0){k+=b;try{N=new Uint8Array(k)}catch(F){this.observer.emit($.ERROR,$.ERROR,{type:jt.MUX_ERROR,details:De.REMUX_ALLOC_ERROR,fatal:!1,error:F,bytes:k,reason:`fail allocating audio mdat ${k}`});return}h||(new DataView(N.buffer).setUint32(0,k),N.set(ke.types.mdat,4))}else return;N.set(W,b);const fe=W.byteLength;b+=fe,p.push(vR(!0,c,fe,0)),C=te}const U=p.length;if(!U)return;const j=p[p.length-1];this.nextAudioPts=x=C+l*j.duration;const D=h?new Uint8Array(0):ke.moof(e.sequenceNumber++,A/l,wi({},e,{samples:p}));e.samples=[];const O=A/a,Z=x/a,le={data1:D,data2:N,startPTS:O,endPTS:Z,startDTS:O,endDTS:Z,type:"audio",hasAudio:!0,hasVideo:!1,nb:U};return this.isAudioContiguous=!0,le}}function Po(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function Vae(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function K4(n,e,t,i){const r=n.samples.length;if(!r)return;const s=n.inputTimeScale;for(let o=0;o<r;o++){const l=n.samples[o];l.pts=Po(l.pts-t.baseTime*s/t.timescale,e*s)/s,l.dts=Po(l.dts-i.baseTime*s/i.timescale,e*s)/s}const a=n.samples;return n.samples=[],{samples:a}}function X4(n,e,t){const i=n.samples.length;if(!i)return;const r=n.inputTimeScale;for(let a=0;a<i;a++){const o=n.samples[a];o.pts=Po(o.pts-t.baseTime*r/t.timescale,e*r)/r}n.samples.sort((a,o)=>a.pts-o.pts);const s=n.samples;return n.samples=[],{samples:s}}class Yae{constructor(e,t,i,r){this.logger=void 0,this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.logger=r}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,i,r){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(Ore(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const r=this.initData=s4(e);r.audio&&(t=xR(r.audio,xi.AUDIO)),r.video&&(i=xR(r.video,xi.VIDEO));const s={};r.audio&&r.video?s.audiovideo={container:"video/mp4",codec:t+","+i,supplemental:r.video.supplemental,initSegment:e,id:"main"}:r.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?s.video={container:"video/mp4",codec:i,supplemental:r.video.supplemental,initSegment:e,id:"main"}:this.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,t,i,r,s,a){var o,l;let{initPTS:c,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:r,id3:i,initSegment:void 0};wt(u)||(u=this.lastEndTime=s||0);const h=t.samples;if(!(h!=null&&h.length))return d;const p={initPTS:void 0,timescale:1};let m=this.initData;if((o=m)!=null&&o.length||(this.generateInitSegment(h),m=this.initData),!((l=m)!=null&&l.length))return this.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(p.tracks=this.initTracks,this.emitInitSegment=!1);const v=Fre(h,m),b=Mre(m,h),x=b===null?s:b;(a||!c)&&(qae(c,x,s,v)||p.timescale!==c.timescale)&&(p.initPTS=x-s,c&&c.timescale===1&&this.logger.warn(`Adjusting initPTS @${s} from ${c.baseTime/c.timescale} to ${p.initPTS}`),this.initPTS=c={baseTime:p.initPTS,timescale:1});const w=e?x-c.baseTime/c.timescale:u,S=w+v;Bre(m,h,c.baseTime/c.timescale),v>0?this.lastEndTime=S:(this.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const A=!!m.audio,C=!!m.video;let N="";A&&(N+="audio"),C&&(N+="video");const k={data1:h,startPTS:w,startDTS:w,endPTS:S,endDTS:S,type:N,hasAudio:A,hasVideo:C,nb:1,dropped:0};return d.audio=k.type==="audio"?k:void 0,d.video=k.type!=="audio"?k:void 0,d.initSegment=p,d.id3=K4(i,s,c,c),r.samples.length&&(d.text=X4(r,s,c)),d}}function qae(n,e,t,i){if(n===null)return!0;const r=Math.max(i,1),s=e-n.baseTime/n.timescale;return Math.abs(s-t)>r}function xR(n,e){const t=n==null?void 0:n.codec;return t&&t.length>4?t:e===xi.AUDIO?t==="ec-3"||t==="ac-3"||t==="alac"?t:t==="fLaC"||t==="Opus"?ux(t,!1):(Wn.warn(`Unhandled audio codec "${t}" in mp4 MAP`),t||"mp4a"):(Wn.warn(`Unhandled video codec "${t}" in mp4 MAP`),t||"avc1")}let Kc;try{Kc=self.performance.now.bind(self.performance)}catch{Kc=Date.now}const u1=[{demux:Oae,remux:Yae},{demux:od,remux:c1},{demux:Rae,remux:c1},{demux:Nae,remux:c1}];u1.splice(2,0,{demux:Pae,remux:c1});class bR{constructor(e,t,i,r,s,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.id=s,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,r){const s=i.transmuxing;s.executeStart=Kc();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;r&&(this.currentTransmuxState=r);const{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:h,timeOffset:p,initSegmentChange:m}=r||o,{audioCodec:v,videoCodec:b,defaultInitPts:x,duration:w,initSegmentData:S}=l,A=Kae(a,t);if(A&&jp(A.method)){const R=this.getDecrypter(),U=aT(A.method);if(R.isSync()){let j=R.softwareDecrypt(a,A.key.buffer,A.iv.buffer,U);if(i.part>-1){const O=R.flush();j=O&&O.buffer}if(!j)return s.executeEnd=Kc(),OS(i);a=new Uint8Array(j)}else return this.asyncResult=!0,this.decryptionPromise=R.webCryptoDecrypt(a,A.key.buffer,A.iv.buffer,U).then(j=>{const D=this.push(j,null,i);return this.decryptionPromise=null,D}),this.decryptionPromise}const C=this.needsProbing(u,d);if(C){const R=this.configureTransmuxer(a);if(R)return this.logger.warn(`[transmuxer] ${R.message}`),this.observer.emit($.ERROR,$.ERROR,{type:jt.MEDIA_ERROR,details:De.FRAG_PARSING_ERROR,fatal:!1,error:R,reason:R.message}),s.executeEnd=Kc(),OS(i)}(u||d||m||C)&&this.resetInitSegment(S,v,b,w,t),(u||m||C)&&this.resetInitialTimestamp(x),c||this.resetContiguity();const N=this.transmux(a,A,p,h,i);this.asyncResult=L0(N);const k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,s.executeEnd=Kc(),N}flush(e){const t=e.transmuxing;t.executeStart=Kc();const{decrypter:i,currentTransmuxState:r,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(e));const a=[],{timeOffset:o}=r;if(i){const d=i.flush();d&&a.push(this.push(d.buffer,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c){t.executeEnd=Kc();const d=[OS(e)];return this.asyncResult?Promise.resolve(d):d}const u=l.flush(o);return L0(u)?(this.asyncResult=!0,u.then(d=>(this.flushRemux(a,d,e),a))):(this.flushRemux(a,u,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,i){const{audioTrack:r,videoTrack:s,id3Track:a,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===kt.MAIN?"level":"track"} ${i.level}`);const u=this.remuxer.remux(r,s,a,o,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:i}),i.transmuxing.executeEnd=Kc()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,r,s){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,i,r),o.resetInitSegment(e,t,i,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,r,s){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,i,r,s):a=this.transmuxUnencrypted(e,i,r,s),a}transmuxUnencrypted(e,t,i,r){const{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,o,l,t,i,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,i,r,s){return this.demuxer.demuxSampleAes(e,t,i).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,i,r,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:r}=this;let s;for(let d=0,h=u1.length;d<h;d++){var a;if((a=u1[d].demux)!=null&&a.probe(e,this.logger)){s=u1[d];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,c=s.remux,u=s.demux;(!l||!(l instanceof c))&&(this.remuxer=new c(i,t,r,this.logger)),(!o||!(o instanceof u))&&(this.demuxer=new u(i,t,r,this.logger),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new rT(this.config)),e}}function Kae(n,e){let t=null;return n.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const OS=n=>({remuxResult:{},chunkMeta:n});function L0(n){return"then"in n&&n.then instanceof Function}class Xae{constructor(e,t,i,r,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=r,this.defaultInitPts=s||null}}class Qae{constructor(e,t,i,r,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=r,this.timeOffset=s,this.initSegmentChange=a}}let SR=0;class Q4{constructor(e,t,i,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=SR++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const c=l.data,u=this.hls;if(!(!u||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var d;const h=(d=this.workerContext)==null?void 0:d.objectURL;h&&self.URL.revokeObjectURL(h);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{u.logger[c.data.logType]&&u.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,u.trigger(c.event,c.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const c=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger($.ERROR,{type:jt.OTHER_ERROR,details:De.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=r;const a=(l,c)=>{c=c||{},c.frag=this.frag||void 0,l===$.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(l,c)};this.observer=new cT,this.observer.on($.FRAG_DECRYPTED,a),this.observer.on($.ERROR,a);const o=Fk(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(s.workerPath||eae()){try{s.workerPath?(l.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=nae(s.workerPath)):(l.log(`injecting Web Worker for "${t}"`),this.workerContext=tae());const{worker:u}=this.workerContext;u.addEventListener("message",this.onWorkerMessage),u.addEventListener("error",this.onWorkerError),u.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:ar(s)})}catch(u){l.warn(`Error setting up "${t}" Web Worker, fallback to inline`,u),this.terminateWorker(),this.error=null,this.transmuxer=new bR(this.observer,o,s,"",t,e.logger)}return}}this.transmuxer=new bR(this.observer,o,s,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=SR++;const t=this.hls.config,i=Fk(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:ar(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),iae(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,i,r,s,a,o,l,c,u){var d,h;c.transmuxing.start=self.performance.now();const{instanceNo:p,transmuxer:m}=this,v=a?a.start:s.start,b=s.decryptdata,x=this.frag,w=!(x&&s.cc===x.cc),S=!(x&&c.level===x.level),A=x?c.sn-x.sn:-1,C=this.part?c.part-this.part.index:-1,N=A===0&&c.id>1&&c.id===(x==null?void 0:x.stats.chunkCount),k=!S&&(A===1||A===0&&(C===1||N&&C<=0)),R=self.performance.now();(S||A||s.stats.parsing.start===0)&&(s.stats.parsing.start=R),a&&(C||!k)&&(a.stats.parsing.start=R);const U=!(x&&((d=s.initSegment)==null?void 0:d.url)===((h=x.initSegment)==null?void 0:h.url)),j=new Qae(w,k,l,S,v,U);if(!k||w||U){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===kt.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${w}
        trackSwitch: ${S}
        contiguous: ${k}
        accurateTimeOffset: ${l}
        timeOffset: ${v}
        initSegmentChange: ${U}`);const D=new Xae(i,r,t,o,u);this.configureTransmuxer(D)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:p,cmd:"demux",data:e,decryptdata:b,chunkMeta:c,state:j},e instanceof ArrayBuffer?[e]:[]);else if(m){const D=m.push(e,b,c,j);L0(D)?D.then(O=>{this.handleTransmuxComplete(O)}).catch(O=>{this.transmuxerError(O,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(D)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(i){const r=i.flush(e);L0(r)?r.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")}):this.handleFlushResult(r,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const wR=100;class Jae extends lT{constructor(e,t,i){super(e,t,i,"audio-stream-controller",kt.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on($.BUFFER_RESET,this.onBufferReset,this),e.on($.BUFFER_CREATED,this.onBufferCreated,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on($.FRAG_LOADING,this.onFragLoading,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off($.BUFFER_RESET,this.onBufferReset,this),e.off($.BUFFER_CREATED,this.onBufferCreated,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off($.FRAG_LOADING,this.onFragLoading,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:i,initPTS:r,timescale:s}){if(i===kt.MAIN){const a=t.cc,o=this.fragCurrent;if(this.initPTS[a]={baseTime:r,timescale:s},this.log(`InitPTS for cc: ${a} found from main: ${r}/${s}`),this.mainAnchor=t,this.state===$e.WAITING_INIT_PTS){const l=this.waitingData;(!l&&!this.loadingParts||l&&l.frag.cc!==a)&&(this.nextLoadPosition=this.findSyncFrag(t).start),this.tick()}else!this.hls.hasEnoughToStart&&o&&o.cc!==a?(this.startFragRequested=!1,this.nextLoadPosition=this.findSyncFrag(t).start,o.abortRequests(),this.resetLoadingState()):this.state===$e.IDLE&&this.tick()}}findSyncFrag(e){const t=this.getLevelDetails(),i=e.cc;return pse(t,i,e)||t&&m4(t.fragments,i)||e}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=$e.STOPPED;return}const i=this.lastCurrentTime;this.stopLoad(),this.setInterval(wR),i>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=$e.IDLE):this.state=$e.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case $e.IDLE:this.doTickIdle();break;case $e.WAITING_TRACK:{const{levels:t,trackId:i}=this,r=t==null?void 0:t[i],s=r==null?void 0:r.details;if(s&&!this.waitForLive(r)){if(this.waitForCdnTuneIn(s))break;this.state=$e.WAITING_INIT_PTS}break}case $e.FRAG_LOADING_WAITING_RETRY:{var e;const t=performance.now(),i=this.retryDate;if(!i||t>=i||(e=this.media)!=null&&e.seeking){const{levels:r,trackId:s}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((r==null?void 0:r[s])||null),this.state=$e.IDLE}break}case $e.WAITING_INIT_PTS:{const t=this.waitingData;if(t){const{frag:i,part:r,cache:s,complete:a}=t,o=this.mainAnchor;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.state=$e.FRAG_LOADING;const l=s.flush().buffer,c={frag:i,part:r,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),a&&super._handleFragmentLoadComplete(c)}else o&&o.cc!==t.frag.cc&&(this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${o.cc}`),this.nextLoadPosition=this.findSyncFrag(o).start,this.clearWaitingFragment())}else this.state=$e.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.state!==$e.STOPPED&&(this.state=$e.IDLE))}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:i,media:r,trackId:s}=this,a=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(i!=null&&i[s]))return;const o=i[s],l=o.details;if(!l||this.waitForLive(o)||this.waitForCdnTuneIn(l)){this.state=$e.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,xi.AUDIO,kt.AUDIO));const u=this.getFwdBufferInfo(c,kt.AUDIO);if(u===null)return;if(!this.switchingTrack&&this._streamEnded(u,l)){t.trigger($.BUFFER_EOS,{type:"audio"}),this.state=$e.ENDED;return}const d=u.len,h=t.maxBufferLength,p=l.fragments,m=p[0].start,v=this.getLoadPosition(),b=this.flushing?v:u.end;if(this.switchingTrack&&r){const S=v;l.PTSKnown&&S<m&&(u.end>m||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=m+.05)}if(d>=h&&!this.switchingTrack&&b<p[p.length-1].start)return;let x=this.getNextFragment(b,l);if(x&&this.isLoopLoading(x,b)&&(x=this.getNextFragmentLoopLoading(x,l,u,kt.MAIN,h)),!x){this.bufferFlushed=!0;return}let w=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&w&&vs(x)&&!x.endList&&(!l.live||!this.loadingParts&&b<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(w)===os.OK&&(this.mainFragLoading=w=null),w&&vs(w))){if(x.start>w.end){const A=this.fragmentTracker.getFragAtPos(b,kt.MAIN);A&&A.end>w.end&&(w=A,this.mainFragLoading={frag:A,targetBufferTime:null})}if(x.start>w.end)return}this.loadFragment(x,o,b)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new w0(i))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),i?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==$e.STOPPED&&(this.setInterval(wR),this.state=$e.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded($.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,t){var i;const{levels:r}=this,{details:s,id:a,groupId:o,track:l}=t;if(!r){this.warn(`Audio tracks reset while loading track ${a} "${l.name}" of "${o}"`);return}const c=this.mainDetails;if(!c||s.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=t,this.state!==$e.STOPPED&&(this.state=$e.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${l.name}" of "${o}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const u=r[a];let d=0;if(s.live||(i=u.details)!=null&&i.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(u.details){var h;d=this.alignPlaylists(s,u.details,(h=this.levelLastLoaded)==null?void 0:h.details)}s.alignedSliding||(k4(s,c),s.alignedSliding||mx(s,c),d=s.fragmentStart)}u.details=s,this.levelLastLoaded=u,this.startFragRequested||this.setStartPosition(c,d),this.hls.trigger($.AUDIO_TRACK_UPDATED,{details:s,id:a,groupId:t.groupId}),this.state===$e.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=$e.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:r,payload:s}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const c=l[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const d=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new Q4(this.hls,kt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const p=this.initPTS[i.cc],m=(t=i.initSegment)==null?void 0:t.data;if(p!==void 0){const b=r?r.index:-1,x=b!==-1,w=new sT(i.level,i.sn,i.stats.chunkCount,s.byteLength,b,x);h.push(s,m,d,"",i,r,u.totalduration,!1,w,p)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${u.startSN} ,${u.endSN}],track ${o}`);const{cache:v}=this.waitingData=this.waitingData||{frag:i,part:r,cache:new R4,complete:!1};v.push(new Uint8Array(s)),this.state!==$e.STOPPED&&(this.state=$e.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===kt.MAIN&&vs(t.frag)&&(this.mainFragLoading=t,this.state===$e.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:i,part:r}=t;if(i.type!==kt.AUDIO){!this.audioOnly&&i.type===kt.MAIN&&!i.elementaryStreams.video&&!i.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(vs(i)){this.fragPrevious=i;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger($.AUDIO_TRACK_SWITCHED,pi({},s)))}this.fragBufferedComplete(i,r),this.media&&this.tick()}onError(e,t){var i;if(t.fatal){this.state=$e.ERROR;return}switch(t.details){case De.FRAG_GAP:case De.FRAG_PARSING_ERROR:case De.FRAG_DECRYPT_ERROR:case De.FRAG_LOAD_ERROR:case De.FRAG_LOAD_TIMEOUT:case De.KEY_LOAD_ERROR:case De.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(kt.AUDIO,t);break;case De.AUDIO_TRACK_LOAD_ERROR:case De.AUDIO_TRACK_LOAD_TIMEOUT:case De.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===$e.WAITING_TRACK&&((i=t.context)==null?void 0:i.type)===Pn.AUDIO_TRACK&&(this.state=$e.IDLE);break;case De.BUFFER_ADD_CODEC_ERROR:case De.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.resetLoadingState();break;case De.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case De.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==xi.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==xi.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===$e.ENDED&&(this.state=$e.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,t,kt.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:r}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{details:d}=u,{audio:h,text:p,id3:m,initSegment:v}=s;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=$e.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),v!=null&&v.tracks){const b=l.initSegment||l;this._bufferInitSegment(u,v.tracks,b,a),r.trigger($.FRAG_PARSING_INIT_SEGMENT,{frag:b,id:i,tracks:v.tracks})}if(h){const{startPTS:b,endPTS:x,startDTS:w,endDTS:S}=h;c&&(c.elementaryStreams[xi.AUDIO]={startPTS:b,endPTS:x,startDTS:w,endDTS:S}),l.setElementaryStreamInfo(xi.AUDIO,b,x,w,S),this.bufferFragmentData(h,l,c,a)}if(m!=null&&(t=m.samples)!=null&&t.length){const b=wi({id:i,frag:l,details:d},m);r.trigger($.FRAG_PARSING_METADATA,b)}if(p){const b=wi({id:i,frag:l,details:d},p);r.trigger($.FRAG_PARSING_USERDATA,b)}}_bufferInitSegment(e,t,i,r){if(this.state!==$e.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const s=t.audio;s.id=kt.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger($.BUFFER_CODECS,t);const o=s.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:i,part:null,chunkMeta:r,parent:i.type,data:o};this.hls.trigger($.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,i){const r=this.fragmentTracker.getState(e);if(this.switchingTrack||r===os.NOT_LOADED||r===os.PARTIAL){var s;if(!vs(e))this._loadInitSegment(e,t);else if((s=t.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=$e.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&mx(t.details,a)}else super.loadFragment(e,t,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:i,assocLang:r,characteristics:s,audioCodec:a,channels:o}=this.bufferedTrack;sh({name:t,lang:i,assocLang:r,characteristics:s,audioCodec:a,channels:o},e,Ff)||(fx(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger($.AUDIO_TRACK_SWITCHED,pi({},e))}}class mT extends Eu{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const r=t==null?void 0:t.renditionReports;if(r){let s=-1;for(let a=0;a<r.length;a++){const o=r[a];let l;try{l=new self.URL(o.URI,t.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),l=o.URI||""}if(l===e){s=a;break}else l===e.substring(0,l.length)&&(s=a)}if(s!==-1){const a=r[s],o=parseInt(a["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let l=parseInt(a["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const u=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&u>t.partTarget&&(l+=1)}const c=i&&Bk(i);return new Uk(o,l>=0?l:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}return e}playlistLoaded(e,t,i){const{details:r,stats:s}=t,a=self.performance.now(),o=s.loading.first?Math.max(0,a-s.loading.first):0;r.advancedDateTime=Date.now()-o;const l=this.hls.config.timelineOffset;if(l!==r.appliedTimelineOffset){const u=Math.max(l||0,0);r.appliedTimelineOffset=u,r.fragments.forEach(d=>{d.start=d.playlistOffset+u})}if(r.live||i!=null&&i.live){const u="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(i),i&&r.fragments.length>0){zse(i,r);const w=r.playlistParsingError;if(w){this.warn(w);const S=this.hls;if(!S.config.ignorePlaylistParsingErrors){var c;const{networkDetails:A}=t;S.trigger($.ERROR,{type:jt.NETWORK_ERROR,details:De.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:w,reason:w.message,level:t.level||void 0,parent:(c=r.fragments[0])==null?void 0:c.type,networkDetails:A,stats:s});return}r.playlistParsingError=null}}r.requestScheduled===-1&&(r.requestScheduled=s.loading.start);const d=this.hls.mainForwardBufferInfo,h=d?d.end-d.len:0,p=(r.edge-h)*1e3,m=T4(r,p);if(r.requestScheduled+m<a?r.requestScheduled=a:r.requestScheduled+=m,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let v,b,x;if(r.canBlockReload&&r.endSN&&r.advanced){const w=this.hls.config.lowLatencyMode,S=r.lastPartSn,A=r.endSN,C=r.lastPartIndex,N=C!==-1,k=S===A;N?k?(b=A+1,x=w?0:C):(b=S,x=w?C+1:r.maxPartIndex):b=A+1;const R=r.age,U=R+r.ageHeader;let j=Math.min(U-r.partTarget,r.targetduration*1.5);if(j>0){if(U>r.targetduration*3)this.log(`Playlist last advanced ${R.toFixed(2)}s ago. Omitting segment and part directives.`),b=void 0,x=void 0;else if(i!=null&&i.tuneInGoal&&U-r.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${j} with playlist age: ${r.age}`),j=0;else{const D=Math.floor(j/r.targetduration);if(b+=D,x!==void 0){const O=Math.round(j%r.targetduration/r.partTarget);x+=O}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${R.toFixed(2)}s goal: ${j} skip sn ${D} to part ${x}`)}r.tuneInGoal=j}if(v=this.getDeliveryDirectives(r,t.deliveryDirectives,b,x),w||!k){r.requestScheduled=a,this.loadingPlaylist(u,v);return}}else(r.canBlockReload||r.canSkipUntil)&&(v=this.getDeliveryDirectives(r,t.deliveryDirectives,b,x));v&&b!==void 0&&r.canBlockReload&&(r.requestScheduled=s.loading.first+Math.max(m-o*2,m/2)),this.scheduleLoading(u,v,r)}else this.clearTimer()}scheduleLoading(e,t,i){const r=i||e.details;if(!r){this.loadingPlaylist(e,t);return}const s=self.performance.now(),a=r.requestScheduled;if(s>=a){this.loadingPlaylist(e,t);return}const o=a-s;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,i,r){let s=Bk(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,r=t.part,s=l1.No),new Uk(i,r,s)}checkRetry(e){const t=e.details,i=hx(e),r=e.errorAction,{action:s,retryCount:a=0,retryConfig:o}=r||{},l=!!r&&!!o&&(s===Xs.RetryRequest||!r.resolved&&s===Xs.SendAlternateToPenaltyBox);if(l){var c;if(a>=o.maxNumRetry)return!1;if(i&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=iT(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,r.resolved=!0}return l}}function J4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!C0(n[t].attrs,e[t].attrs))return!1;return!0}function C0(n,e,t){const i=n["STABLE-RENDITION-ID"];return i&&!t?i===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>n[r]!==e[r])}function Y_(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}class Zae extends mT{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.LEVEL_LOADING,this.onLevelLoading,this),e.on($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.LEVEL_LOADING,this.onLevelLoading,this),e.off($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off($.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:r,details:s}=t,a=this.tracksInGroup[i];if(!a||a.groupId!==r){this.warn(`Audio track with id:${i} and group:${r} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Audio track ${i} "${a.name}" lang:${a.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||(r==null?void 0:r.length)!==(i==null?void 0:i.length)||i!=null&&i.some(o=>(r==null?void 0:r.indexOf(o))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(h=>!i||i.indexOf(h.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(h=>h.default)&&(this.selectDefaultTrack=!1),o.forEach((h,p)=>{h.id=p});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!s&&l){const h=sc(l,o,Ff);if(h>-1)s=o[h];else{const p=sc(l,this.tracks);s=this.tracks[p]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const u={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${i==null?void 0:i.join(",")}`),this.hls.trigger($.AUDIO_TRACKS_UPDATED,u);const d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(o.length&&d===-1){var a;const h=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(h.message),this.hls.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}}onError(e,t){t.fatal||!t.context||t.context.type===Pn.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const r=this.currentTrack;if(r&&sh(e,r,Ff))return r;const s=sc(e,this.tracksInGroup,Ff);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(r){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const o=cse(e,t.levels,i,a,Ff);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=sc(e,i);if(a>-1)return i[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,r=t[e],s=r.details&&!r.details.live;if(e===this.trackId&&r===i&&s||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger($.AUDIO_TRACK_SWITCHING,pi({},r)),s))return;const a=this.switchParams(r.url,i==null?void 0:i.details,r.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const r=t[i];if(!(this.selectDefaultTrack&&!r.default)&&(!e||sh(e,r,Ff)))return i}if(e){const{name:i,lang:r,assocLang:s,characteristics:a,audioCodec:o,channels:l}=e;for(let c=0;c<t.length;c++){const u=t[c];if(sh({name:i,lang:r,assocLang:s,characteristics:a,audioCodec:o,channels:l},u,Ff))return c}for(let c=0;c<t.length;c++){const u=t[c];if(C0(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const u=t[c];if(C0(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&fx(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,r=e.groupId,s=this.getUrlWithDirectives(e.url,t),a=e.details,o=a==null?void 0:a.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${r}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger($.AUDIO_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:t||null,track:e})}}class eoe{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,i){if(this.queues===null||this.tracks===null)return;const r=this.queues[t];r.push(e),r.length===1&&!i&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const i={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const i={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const i=(t=e[0])==null?void 0:t.label;(i==="async-blocker"||i==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const r=t[0];try{r.execute()}catch(s){var i;if(r.onError(s),this.queues===null||this.tracks===null)return;const a=(i=this.tracks[e])==null?void 0:i.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,i;return(t=this.queues)!=null&&t[e]||(i=this.tracks)!=null&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const i=(t=this.tracks)==null?void 0:t[e],r=i==null?void 0:i.buffer;return r?`SourceBuffer${r.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(i=>i.label).join(", "))||""}}const _R=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,Z4="HlsJsTrackRemovedError";class toe extends Error{constructor(e){super(e),this.name=Z4}}class noe extends Eu{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=i=>{var r;this.hls&&((r=this.mediaSource)==null?void 0:r.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=i=>{const{media:r,mediaSource:s}=this;i&&this.log("Media source opened"),!(!r||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger($.MEDIA_ATTACHED,{media:r,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:r}=this;i!==r&&this.error(`Media element src was set while attaching MediaSource (${r} > ${i})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=Are($d(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.BUFFER_RESET,this.onBufferReset,this),e.on($.BUFFER_APPENDING,this.onBufferAppending,this),e.on($.BUFFER_CODECS,this.onBufferCodecs,this),e.on($.BUFFER_EOS,this.onBufferEos,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($.FRAG_PARSED,this.onFragParsed,this),e.on($.FRAG_CHANGED,this.onFragChanged,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.BUFFER_RESET,this.onBufferReset,this),e.off($.BUFFER_APPENDING,this.onBufferAppending,this),e.off($.BUFFER_CODECS,this.onBufferCodecs,this),e.off($.BUFFER_EOS,this.onBufferEos,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($.FRAG_PARSED,this.onFragParsed,this),e.off($.FRAG_CHANGED,this.onFragChanged,this),e.off($.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const i={};if(this.operationQueue){const s=this.isUpdating();s||this.operationQueue.removeBlockers();const a=this.isQueued();(s||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?wi(i,r.tracks):this.sourceBuffers.forEach(s=>{const[a]=s;a&&(i[a]=wi({},this.tracks[a]),this.removeBuffer(a)),s[0]=s[1]=null}),{media:e,mediaSource:t,tracks:i}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var i;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),(i=this.transferData)!=null&&i.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const i=this.media=t.media,r=$d(this.appendSource);if(this.transferData=this.overrides=void 0,i&&r){const s=!!t.mediaSource;(s||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(a),s)this._objectUrl=i.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{i.removeAttribute("src");const l=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||l&&a instanceof l,ER(i),ioe(i,o),i.load()}catch{i.src=o}else i.src=o}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,i;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(i=e.constructor)==null?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const i=this.tracks,r=t.tracks,s=r?Object.keys(r):null,a=s?s.length:0,o=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(r&&s&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${ar(i,(l,c)=>l==="initSegment"?void 0:c)};
transfer tracks: ${ar(r,(l,c)=>l==="initSegment"?void 0:c)}}`),!ZM(r,i)){t.mediaSource=null,t.tracks=void 0;const l=e.currentTime,c=this.details,u=Math.max(l,(c==null?void 0:c.fragments[0].start)||0);if(u-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${u}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(i)}") start time: ${u} currentTime: ${l}`),this.onMediaDetaching($.MEDIA_DETACHING,{}),this.onMediaAttaching($.MEDIA_ATTACHING,t),e.currentTime=u;return}this.transferData=void 0,s.forEach(l=>{const c=l,u=r[c];if(u){const d=u.buffer;if(d){const h=this.fragmentTracker,p=u.id;if(h.hasFragments(p)||h.hasParts(p)){const b=Tn.getBuffered(d);h.detectEvictedFragments(c,b,p,null,!0)}const m=MS(c),v=[c,d];this.sourceBuffers[m]=v,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,u)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const i=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:s,_objectUrl:a}=this;if(s){if(this.log(`media source ${i?"transferring":"detaching"}`),i)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=s.readyState==="open";try{const l=s.sourceBuffers;for(let c=l.length;c--;)o&&l[c].abort(),s.removeSourceBuffer(l[c]);o&&s.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),i||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(r.removeAttribute("src"),this.appendSource&&ER(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger($.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const i=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),i)try{var r;(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(s){this.warn(`onBufferReset ${e}`,s)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[MS(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new eoe(this.tracks)}onBufferCodecs(e,t){const i=this.tracks,r=Object.keys(t);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);const s="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),a=!s&&this.sourceBufferCount&&this.media&&r.some(o=>!i[o]);if(s||a){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${r}" SourceBuffers`);return}r.forEach(o=>{var l,c,u;const d=t[o],{id:h,codec:p,levelCodec:m,container:v,metadata:b,supplemental:x}=d;let w=i[o];const S=(l=this.transferData)==null||(c=l.tracks)==null?void 0:c[o],A=S!=null&&S.buffer?S:w,C=(A==null?void 0:A.pendingCodec)||(A==null?void 0:A.codec),N=A==null?void 0:A.levelCodec;w||(w=i[o]={buffer:void 0,listeners:[],codec:p,supplemental:x,container:v,levelCodec:m,metadata:b,id:h});const k=o1(C,N),R=k==null?void 0:k.replace(_R,"$1");let U=o1(p,m);const j=(u=U)==null?void 0:u.replace(_R,"$1");U&&k&&R!==j&&(o.slice(0,5)==="audio"&&(U=ux(U,this.appendSource)),this.log(`switching codec ${C} to ${U}`),U!==(w.pendingCodec||w.codec)&&(w.pendingCodec=U),w.container=v,this.appendChangeType(o,v,U))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const i=this.tracks[t];return e[t]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e},{})}appendChangeType(e,t,i){const r=`${t};codecs=${i}`,s={label:`change-type=${r}`,execute:()=>{const a=this.tracks[e];if(a){const o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),o.changeType(r),a.codec=i,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(s,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const i=e.start,r=i+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(i,kt.MAIN))==null?void 0:t.gap)===!0)return;const a={label:"block-audio",execute:()=>{var o;const l=this.tracks.video;(this.lastVideoAppendEnd>r||l!=null&&l.buffer&&Tn.isBuffered(l.buffer,r)||((o=this.fragmentTracker.getAppendedFrag(r,kt.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:i}=this,{data:r,type:s,parent:a,frag:o,part:l,chunkMeta:c}=t,u=c.buffering[s],d=o.sn,h=self.performance.now();u.start=h;const p=o.stats.buffering,m=l?l.stats.buffering:null;p.start===0&&(p.start=h),m&&m.start===0&&(m.start=h);const v=i.audio;let b=!1;s==="audio"&&(v==null?void 0:v.container)==="audio/mpeg"&&(b=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const x=this.tracks.video,w=x==null?void 0:x.buffer;if(w&&d!=="initSegment"){const C=l||o,N=this.blockedAudioAppend;if(s==="audio"&&a!=="main"&&!this.blockedAudioAppend){const R=C.start+C.duration*.05,U=w.buffered,j=this.currentOp("video");!U.length&&!j?this.blockAudio(C):!j&&!Tn.isBuffered(w,R)&&this.lastVideoAppendEnd<R&&this.blockAudio(C)}else if(s==="video"){const k=C.end;if(N){const R=N.frag.start;(k>R||k<this.lastVideoAppendEnd||Tn.isBuffered(w,R))&&this.unblockAudio()}this.lastVideoAppendEnd=k}}const S=(l||o).start,A={label:`append-${s}`,execute:()=>{if(u.executeStart=self.performance.now(),b){const C=this.tracks[s];if(C){const N=C.buffer;if(N){const k=S-N.timestampOffset;Math.abs(k)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${S} (delta: ${k}) sn: ${d})`),N.timestampOffset=S)}}}this.appendExecutor(r,s)},onStart:()=>{},onComplete:()=>{const C=self.performance.now();u.executeEnd=u.end=C,p.first===0&&(p.first=C),m&&m.first===0&&(m.first=C);const N={};this.sourceBuffers.forEach(([k,R])=>{k&&(N[k]=Tn.getBuffered(R))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger($.BUFFER_APPENDED,{type:s,frag:o,part:l,chunkMeta:c,parent:o.type,timeRanges:N})},onError:C=>{var N;const k={type:jt.MEDIA_ERROR,parent:o.type,details:De.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:o,part:l,chunkMeta:c,error:C,err:C,fatal:!1},R=(N=this.media)==null?void 0:N.error;if(C.code===DOMException.QUOTA_EXCEEDED_ERR)k.details=De.BUFFER_FULL_ERROR;else if(C.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!R)k.errorAction=_0(!0);else if(C.name===Z4&&this.sourceBufferCount===0)k.errorAction=_0(!0);else{const U=++this.appendErrors[s];this.warn(`Failed ${U}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${R||"no media error"})`),(U>=this.hls.config.appendErrorMaxRetry||R)&&(k.fatal=!0)}this.hls.trigger($.ERROR,k)}};this.append(A,s,this.isPending(this.tracks[s]))}getFlushOp(e,t,i){return this.log(`queuing "${e}" remove ${t}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger($.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${t}-${i} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,t){const{type:i,startOffset:r,endOffset:s}=t;i?this.append(this.getFlushOp(i,r,s),i):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,r,s),a)})}onFragParsed(e,t){const{frag:i,part:r}=t,s=[],a=r?r.elementaryStreams:i.elementaryStreams;a[xi.AUDIOVIDEO]?s.push("audiovideo"):(a[xi.AUDIO]&&s.push("audio"),a[xi.VIDEO]&&s.push("video"));const o=()=>{const l=self.performance.now();i.stats.buffering.end=l,r&&(r.stats.buffering.end=l);const c=r?r.stats:i.stats;this.hls.trigger($.FRAG_BUFFERED,{frag:i,part:r,stats:c,id:i.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(o,s).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t,i;return e&&(!((t=this.tracks[e])!=null&&t.ended)||((i=this.tracks[e])==null?void 0:i.ending))})}onBufferEos(e,t){var i;this.sourceBuffers.forEach(([a])=>{if(a){const o=this.tracks[a];(!t.type||t.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});const r=((i=this.overrides)==null?void 0:i.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})&&(r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger($.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger($.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){const e=this.getDurationAndRange();e&&this.blockUntilOpen(()=>this.updateMediaSource(e))}onError(e,t){if(t.details===De.BUFFER_APPEND_ERROR&&t.frag){var i;const r=(i=t.errorAction)==null?void 0:i.nextAutoLevel;wt(r)&&r!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||t===null||!this.sourceBufferCount)return;const r=e.config,s=i.currentTime,a=t.levelTargetDuration,o=t.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(wt(o)&&o>=0){const l=Math.max(o,a),c=Math.floor(s/a)*a-l;this.flushBackBuffer(s,a,c)}if(wt(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const l=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),c=Math.max(l,a),u=Math.floor(s/a)*a+c;this.flushFrontBuffer(s,a,u)}}flushBackBuffer(e,t,i){this.sourceBuffers.forEach(([r,s])=>{if(s){const o=Tn.getBuffered(s);if(o.length>0&&i>o.start(0)){var a;this.hls.trigger($.BACK_BUFFER_REACHED,{bufferEnd:i});const l=this.tracks[r];if((a=this.details)!=null&&a.live)this.hls.trigger($.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(l!=null&&l.ended){this.log(`Cannot flush ${r} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger($.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:r})}}})}flushFrontBuffer(e,t,i){this.sourceBuffers.forEach(([r,s])=>{if(s){const a=Tn.getBuffered(s),o=a.length;if(o<2)return;const l=a.start(o-1),c=a.end(o-1);if(i>l||e>=l&&e<=c)return;this.hls.trigger($.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:r})}})}getDurationAndRange(){var e;const{details:t,mediaSource:i}=this;if(!t||!this.media||(i==null?void 0:i.readyState)!=="open")return null;const r=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&t.live&&i.setLiveSeekableRange){const c=Math.max(0,t.fragmentStart),u=Math.max(c,r);return{duration:1/0,start:c,end:u}}return{duration:1/0}}const s=(e=this.overrides)==null?void 0:e.duration;if(s)return wt(s)?{duration:s}:null;const a=this.media.duration,o=wt(i.duration)?i.duration:0;return r>o&&r>a||!wt(a)?{duration:r}:null}updateMediaSource({duration:e,start:t,end:i}){const r=this.mediaSource;!this.media||!r||r.readyState!=="open"||(r.duration!==e&&(wt(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),t!==void 0&&i!==void 0&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${t}-${i}.`),r.setLiveSeekableRange(t,i)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${ar(i)}`),this.tracksReady){var r;const s=(r=this.transferData)==null?void 0:r.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,i])=>{if(t){const r=this.tracks[t];e[t]={buffer:i,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger($.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const l=this.getTrackCodec(o,a),c=`${o.container};codecs=${l}`;o.codec=l,this.log(`creating sourceBuffer(${c})${this.currentOp(a)?" Queued":""} ${ar(o)}`);try{const u=i.addSourceBuffer(c),d=MS(a),h=[a,u];t[d]=h,o.buffer=u}catch(u){var r;this.error(`error while trying to add sourceBuffer: ${u.message}`),this.shiftAndExecuteNext(a),(r=this.operationQueue)==null||r.removeBlockers(),delete this.tracks[a],this.hls.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:a,mimeType:c,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const i=e.supplemental;let r=e.codec;i&&(t==="video"||t==="audiovideo")&&B_(i,"video")&&(r=Kre(r,i));const s=o1(r,e.levelCodec);return s?t.slice(0,5)==="audio"?ux(s,this.appendSource):s:""}trackSourceBuffer(e,t){const i=t.buffer;if(!i)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:i,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(s,a)=>{const o=a.removedRanges;o!=null&&o.length&&this.hls.trigger($.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var e,t;const i=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return i==null?void 0:i.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const i=this.currentOp(e);i&&(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var i;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${r}`,t),this.hls.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const s=this.currentOp(e);s&&s.onError(r)}removeExecutor(e,t,i){const{media:r,mediaSource:s}=this,a=this.tracks[e],o=a==null?void 0:a.buffer;if(!r||!s||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=wt(r.duration)?r.duration:1/0,c=wt(s.duration)?s.duration:1/0,u=Math.max(0,t),d=Math.min(i,l,c);d>u&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${u},${d}] from the ${e} SourceBuffer`),o.remove(u,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.tracks[t],r=i==null?void 0:i.buffer;if(!r)throw new toe(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:i}=this,r=t.map(a=>this.appendBlocker(a));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(a=>{i===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var i;const r=(i=this.tracks[t])==null?void 0:i.buffer;!r||r.updating||this.shiftAndExecuteNext(t)})}append(e,t,i){this.operationQueue&&this.operationQueue.append(e,t,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,i){const r=this.tracks[e];if(!r)return;const s=r.buffer;if(!s)return;const a=i.bind(this,e);r.listeners.push({event:t,listener:a}),s.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const i=t.buffer;i&&(t.listeners.forEach(r=>{i.removeEventListener(r.event,r.listener)}),t.listeners.length=0)}}function ER(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function ioe(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}function MS(n){return n==="audio"?1:0}class yT{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on($.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($.BUFFER_CODECS,this.onBufferCodecs,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off($.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($.BUFFER_CODECS,this.onBufferCodecs,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&wt(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((r,s)=>this.isLevelAllowed(r)&&s<=e);return this.clientRect=null,yT.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(!(e!=null&&e.length))return-1;const r=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let s=e.length-1;const a=Math.max(t,i);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&r(l,e[o+1])){s=o;break}}return s}}const roe={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Ra=roe,soe={HLS:"h"},aoe=soe,ooe="CMCD-Object",loe="CMCD-Request",coe="CMCD-Session",uoe="CMCD-Status",cm={OBJECT:ooe,REQUEST:loe,SESSION:coe,STATUS:uoe},doe={[cm.OBJECT]:["br","d","ot","tb"],[cm.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[cm.SESSION]:["cid","pr","sf","sid","st","v"],[cm.STATUS]:["bs","rtp"]};class eg{constructor(e,t){Array.isArray(e)&&(e=e.map(i=>i instanceof eg?i:new eg(i))),this.value=e,this.params=t}}const foe="Dict";function hoe(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function poe(n,e,t,i){return new Error(`failed to ${n} "${hoe(e)}" as ${t}`,{cause:i})}function hc(n,e,t){return poe("serialize",n,e,t)}class eF{constructor(e){this.description=e}}const TR="Bare Item",goe="Boolean";function moe(n){if(typeof n!="boolean")throw hc(n,goe);return n?"?1":"?0"}const yoe="Byte Sequence";function voe(n){if(ArrayBuffer.isView(n)===!1)throw hc(n,yoe);return`:${hae(n)}:`}const xoe="Integer";function boe(n){return n<-999999999999999||999999999999999<n}function tF(n){if(boe(n))throw hc(n,xoe);return n.toString()}function Soe(n){return`@${tF(n.getTime()/1e3)}`}const woe="Decimal";function _oe(n){const e=j4(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw hc(n,woe);const t=e.toString();return t.includes(".")?t:`${t}.0`}const Eoe="String",Toe=/[\x00-\x1f\x7f]+/;function Aoe(n){if(Toe.test(n))throw hc(n,Eoe);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Loe(n){return n.description||n.toString().slice(7,-1)}const Coe="Token";function AR(n){const e=Loe(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw hc(e,Coe);return e}function q_(n){switch(typeof n){case"number":if(!wt(n))throw hc(n,TR);return Number.isInteger(n)?tF(n):_oe(n);case"string":return Aoe(n);case"symbol":return AR(n);case"boolean":return moe(n);case"object":if(n instanceof Date)return Soe(n);if(n instanceof Uint8Array)return voe(n);if(n instanceof eF)return AR(n);default:throw hc(n,TR)}}const Ioe="Key";function K_(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw hc(n,Ioe);return n}function vT(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${K_(e)}`:`;${K_(e)}=${q_(t)}`).join("")}function nF(n){return n instanceof eg?`${q_(n.value)}${vT(n.params)}`:q_(n)}function koe(n){return`(${n.value.map(nF).join(" ")})${vT(n.params)}`}function Roe(n,e={whitespace:!0}){if(typeof n!="object")throw hc(n,foe);const t=n instanceof Map?n.entries():Object.entries(n),i=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([r,s])=>{s instanceof eg||(s=new eg(s));let a=K_(r);return s.value===!0?a+=vT(s.params):(a+="=",Array.isArray(s.value)?a+=koe(s):a+=nF(s)),a}).join(`,${i}`)}function Poe(n,e){return Roe(n,e)}function Noe(n){return n==="ot"||n==="sf"||n==="st"}function Doe(n){return typeof n=="number"?wt(n):n!=null&&n!==""&&n!==!1}const d1=n=>Math.round(n),Ooe=(n,e)=>(e!=null&&e.baseUrl&&(n=pae(n,e.baseUrl)),encodeURIComponent(n)),Pv=n=>d1(n/100)*100,Moe={br:d1,d:d1,bl:Pv,dl:Pv,mtp:Pv,nor:Ooe,rtp:Pv,tb:d1};function Foe(n,e){const t={};if(n==null||typeof n!="object")return t;const i=Object.keys(n).sort(),r=wi({},Moe,e==null?void 0:e.formatters),s=e==null?void 0:e.filter;return i.forEach(a=>{if(s!=null&&s(a))return;let o=n[a];const l=r[a];l&&(o=l(o,e)),!(a==="v"&&o===1)&&(a=="pr"&&o===1||Doe(o)&&(Noe(a)&&typeof o=="string"&&(o=new eF(o)),t[a]=o))}),t}function iF(n,e={}){return n?Poe(Foe(n,e),wi({whitespace:!1},e)):""}function joe(n,e={}){const t={};if(!n)return t;const i=Object.entries(n),r=Object.entries(doe).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),s=i.reduce((a,o)=>{var l,c;const[u,d]=o,h=((l=r.find(p=>p[1].includes(u)))===null||l===void 0?void 0:l[0])||cm.REQUEST;return(c=a[h])!==null&&c!==void 0||(a[h]={}),a[h][u]=d,a},{});return Object.entries(s).reduce((a,[o,l])=>(a[o]=iF(l,e),a),t)}function Boe(n,e,t){return wi(n,joe(e,t))}const Uoe="CMCD";function $oe(n,e={}){if(!n)return"";const t=iF(n,e);return`${Uoe}=${encodeURIComponent(t)}`}const LR=/CMCD=[^&#]+/;function Hoe(n,e,t){const i=$oe(e,t);if(!i)return n;if(LR.test(n))return n.replace(LR,i);const r=n.includes("?")?"&":"?";return`${n}${r}${i}`}class Woe{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:Ra.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=r=>{try{const{frag:s,part:a}=r,o=this.hls.levels[s.level],l=this.getObjectType(s),c={d:(a||s).duration*1e3,ot:l};(l===Ra.VIDEO||l===Ra.AUDIO||l==Ra.MUXED)&&(c.br=o.bitrate/1e3,c.tb=this.getTopBandwidth(l)/1e3,c.bl=this.getBufferLength(l));const u=a?this.getNextPart(a):this.getNextFrag(s);u!=null&&u.url&&u.url!==s.url&&(c.nor=u.url),this.apply(r,c)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;i!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHED,this.onMediaDetached,this),e.on($.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHED,this.onMediaDetached,this),e.off($.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,r;this.audioBuffer=(i=t.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(r=t.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:aoe.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){wi(t,this.createData());const i=t.ot===Ra.INIT||t.ot===Ra.VIDEO||t.ot===Ra.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((a,o)=>(r.includes(o)&&(a[o]=t[o]),a),{}));const s={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),Boe(e.headers,t,s)):e.url=Hoe(e.url,t,s)}getNextFrag(e){var t;const i=(t=this.hls.levels[e.level])==null?void 0:t.details;if(i){const r=e.sn-i.startSN;return i.fragments[r+1]}}getNextPart(e){var t,i;const{index:r,fragment:s}=e,a=(t=this.hls.levels[s.level])==null||(i=t.details)==null?void 0:i.partList;if(a){const{sn:o}=s;for(let l=a.length-1;l>=0;l--){const c=a[l];if(c.index===r&&c.fragment.sn===o)return a[l+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Ra.TIMED_TEXT;if(e.sn==="initSegment")return Ra.INIT;if(t==="audio")return Ra.AUDIO;if(t==="main")return this.hls.audioTracks.length?Ra.VIDEO:Ra.MUXED}getTopBandwidth(e){let t=0,i;const r=this.hls;if(e===Ra.AUDIO)i=r.audioTracks;else{const s=r.maxAutoLevel,a=s>-1?s+1:r.levels.length;i=r.levels.slice(0,a)}for(const s of i)s.bitrate>t&&(t=s.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.media,i=e===Ra.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!t?NaN:Tn.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}}const zoe=3e5;class Goe extends Eu{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if((i==null?void 0:i.action)===Xs.SendAlternateToPenaltyBox&&i.flags===fl.MoveAllAlternatesMatchingHost){const r=this.levels;let s=this._pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:o,pathwayId:l,type:c}=t.context;o&&r?a=this.getPathwayForGroupId(o,c,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&r&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),i.resolved=this.pathwayId!==a),i.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${r&&r.length} priorities: ${ar(s)} penalized: ${ar(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const i=this.penalizedPathways,r=performance.now();Object.keys(i).forEach(s=>{r-i[s]>zoe&&delete i[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in i)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,C4(t),this.hls.trigger($.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,i){const r=this.getLevelsForPathway(i).concat(this.levels||[]);for(let s=0;s<r.length;s++)if(t===Pn.AUDIO_TRACK&&r[s].hasAudioGroup(e)||t===Pn.SUBTITLE_TRACK&&r[s].hasSubtitleGroup(e))return r[s].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},r={};e.forEach(s=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=s;if(t.some(u=>u.pathwayId===a))return;const c=this.getLevelsForPathway(o).map(u=>{const d=new pr(u.attrs);d["PATHWAY-ID"]=a;const h=d.AUDIO&&`${d.AUDIO}_clone_${a}`,p=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;h&&(i[d.AUDIO]=h,d.AUDIO=h),p&&(r[d.SUBTITLES]=p,d.SUBTITLES=p);const m=rF(u.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),v=new w0({attrs:d,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:m,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let b=1;b<u.audioGroups.length;b++)v.addGroupId("audio",`${u.audioGroups[b]}_clone_${a}`);if(u.subtitleGroups)for(let b=1;b<u.subtitleGroups.length;b++)v.addGroupId("text",`${u.subtitleGroups[b]}_clone_${a}`);return v});t.push(...c),CR(this.audioTracks,i,l,a),CR(this.subtitleTracks,r,l,a)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+u)}const s={responseType:"json",url:r.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(u,d,h,p)=>{this.log(`Loaded steering manifest: "${r}"`);const m=u.data;if((m==null?void 0:m.VERSION)!==1){this.log(`Steering VERSION ${m.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=m.TTL;const{"RELOAD-URI":v,"PATHWAY-CLONES":b,"PATHWAY-PRIORITY":x}=m;if(v)try{this.uri=new self.URL(v,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${v}`);return}this.scheduleRefresh(this.uri||h.url),b&&this.clonePathways(b);const w={steeringManifest:m,url:r.toString()};this.hls.trigger($.STEERING_MANIFEST_LOADED,w),x&&this.updatePathwayPriority(x)},onError:(u,d,h,p)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let m=this.timeToLoad*1e3;if(u.code===429){const v=this.loader;if(typeof(v==null?void 0:v.getResponseHeader)=="function"){const b=v.getResponseHeader("Retry-After");b&&(m=parseFloat(b)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,m)},onTimeout:(u,d,h)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(s,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const r=(i=this.hls)==null?void 0:i.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function CR(n,e,t,i){n&&Object.keys(e).forEach(r=>{const s=n.filter(a=>a.groupId===r).map(a=>{const o=wi({},a);return o.details=void 0,o.attrs=new pr(o.attrs),o.url=o.attrs.URI=rF(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[r],o.attrs["PATHWAY-ID"]=i,o});n.push(...s)})}function rF(n,e,t,i){const{HOST:r,PARAMS:s,[t]:a}=i;let o;e&&(o=a==null?void 0:a[e],o&&(n=o));const l=new self.URL(n);return r&&!o&&(l.host=r),s&&Object.keys(s).sort().forEach(c=>{c&&l.searchParams.set(c,s[c])}),l.href}class Bp extends Eu{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Bp.CDMCleanupPromise?[Bp.CDMCleanupPromise]:[],this.onMediaEncrypted=t=>{const{initDataType:i,initData:r}=t,s=`"${t.type}" event: init data type: "${i}"`;if(this.debug(s),r!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=Cv(this.config));const o=a.map(CS).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{const o=AS(a);let l,c;if(i==="sinf"){if(o!==gi.FAIRPLAY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${i}" for selected key-system ${o}`);return}const m=rs(new Uint8Array(r));try{const v=oT(JSON.parse(m).sinf),b=a4(v);if(!b)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(b.subarray(8,24)),c=gi.FAIRPLAY}catch(v){this.warn(`${s} Failed to parse sinf: ${v}`);return}}else{if(o!==gi.WIDEVINE&&o!==gi.PLAYREADY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${i}" for selected key-system ${o}`);return}const m=Gre(r),v=m.filter(x=>!!x.systemId&&LS(x.systemId)===o);v.length>1&&this.warn(`${s} Using first of ${v.length} pssh found for selected key-system ${o}`);const b=v[0];if(!b){m.length===0||m.some(x=>!x.systemId)?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${m.map(x=>LS(x.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(c=LS(b.systemId),b.version===0&&b.data)if(c===gi.WIDEVINE){const x=b.data.length-22;l=new Uint8Array(b.data.subarray(x,x+16))}else c===gi.PLAYREADY&&(l=S4(b.data))}if(!c||!l)return;const u=Jl.hexDump(l),{keyIdToKeySessionPromise:d,mediaKeySessions:h}=this;let p=d[u];for(let m=0;m<h.length;m++){const v=h[m],b=v.decryptdata;if(!b.keyId)continue;const x=Jl.hexDump(b.keyId);if(u===x||b.uri.replace(/-/g,"").indexOf(u)!==-1){if(p=d[x],b.pssh)break;delete d[x],b.pssh=new Uint8Array(r),b.keyId=l,p=d[u]=p.then(()=>this.generateRequestWithPreferredKeySession(v,i,r,"encrypted-event-key-match")),p.catch(w=>this.handleError(w));break}}if(!p){if(c!==o){this.log(`Ignoring "${t.type}" event with ${c} init data for selected key-system ${o}`);return}p=d[u]=this.getKeySystemSelectionPromise([c]).then(({keySystem:m,mediaKeys:v})=>{var b;this.throwIfDestroyed();const x=new E0("ISO-23001-7",u,(b=CS(m))!=null?b:"");return x.pssh=new Uint8Array(r),x.keyId=l,this.attemptSetMediaKeys(m,v).then(()=>{this.throwIfDestroyed();const w=this.createMediaKeySessionContext({decryptdata:x,keySystem:m,mediaKeys:v});return this.generateRequestWithPreferredKeySession(w,i,r,"encrypted-event-no-match")})}),p.catch(m=>this.handleError(m))}})}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){const e=this.media;this.unregisterListeners(),this.onMediaDetached(),this._clear(e);const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on($.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on($.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on($.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on($.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off($.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off($.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off($.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off($.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,r=t[e];if(r)return r.licenseUrl;if(e===gi.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(a,o,l)=>!!a&&l.indexOf(a)===o,r=t.map(a=>a.audioCodec).filter(i),s=t.map(a=>a.videoCodec).filter(i);return r.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,o)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,r,s).then(d=>a({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof Ro?o(d):o(new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${i}`;return b4===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return i(e,t)}getMediaKeysPromise(e,t,i){const r=Mse(e,t,i,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let a=s==null?void 0:s.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${ar(r)}`),a=this.requestMediaKeySystemAccess(e,r);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),a.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(d=>d?this.setMediaKeysServerCertificate(u,e,d):u))),o.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),o.mediaKeys})}return a.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${Jl.hexDump(e.keyId||[])}`);const r=i.createSession(),s={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),s="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(i,s,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Jl.hexDump(e.keyId)}updateKeySession(e,t){var i;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${Jl.hexDump(((i=e.decryptdata)==null?void 0:i.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),r.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,i)=>{const r=Cv(this.config),s=e.map(AS).filter(a=>!!a&&r.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:a})=>{const o=CS(a);o?t(o):i(new Error(`Unable to find format for key-system "${a}"`))}).catch(i)})}loadKey(e){const t=e.keyInfo.decryptdata,i=this.getKeyIdString(t),r=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let s=this.keyIdToKeySessionPromise[i];return s||(s=this.getKeySystemForKeyPromise(t).then(({keySystem:o,mediaKeys:l})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(o,l).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:o,mediaKeys:l,decryptdata:t}))))),(this.keyIdToKeySessionPromise[i]=s.then(o=>{const l="cenc",c=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(o,l,c,"playlist-key")})).catch(o=>this.handleError(o))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Ro?this.hls.trigger($.ERROR,e.data):this.hls.trigger($.ERROR,{type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[t];if(!i){const r=AS(e.keyFormat),s=r?[r]:Cv(this.config);return this.attemptKeySystemAccess(s)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=Cv(this.config)),e.length===0)throw new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${ar({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(i).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>i.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,t,i,r){var s,a;const o=(s=this.config.drmSystems)==null||(a=s[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const m=o.call(this.hls,t,i,e);if(!m)throw new Error("Invalid response from configured generateRequest filter");t=m.initDataType,i=m.initData?m.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(m){var l;if(this.warn(m.message),(l=this.hls)!=null&&l.config.debug)throw m}if(i===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${c} (init data type: ${t} length: ${i?i.byteLength:null})`);const u=new cT,d=e._onmessage=m=>{const v=e.mediaKeysSession;if(!v){u.emit("error",new Error("invalid state"));return}const{messageType:b,message:x}=m;this.log(`"${b}" message event for session "${v.sessionId}" message size: ${x.byteLength}`),b==="license-request"||b==="license-renewal"?this.renewLicense(e,x).catch(w=>{u.eventNames().length?u.emit("error",w):this.handleError(w)}):b==="license-release"?e.keySystem===gi.FAIRPLAY&&(this.updateKeySession(e,H_("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${b}"`)},h=e._onkeystatuseschange=m=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const b=e.keyStatus;u.emit("keyStatus",b),b==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",h);const p=new Promise((m,v)=>{u.on("error",v),u.on("keyStatus",b=>{b.startsWith("usable")?m():b==="output-restricted"?v(new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):b==="internal-error"?v(new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${b}"`)):b==="expired"?v(new Error("key expired while generating request")):this.warn(`unhandled key status change "${b}"`)})});return e.mediaKeysSession.generateRequest(t,i).then(()=>{var m;this.log(`Request generated for key-session "${(m=e.mediaKeysSession)==null?void 0:m.sessionId}" keyId: ${c}`)}).catch(m=>{throw new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_NO_SESSION,error:m,fatal:!1},`Error generating key-session request: ${m}`)}).then(()=>p).catch(m=>{throw u.removeAllListeners(),this.removeSession(e),m}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,i)=>{if(typeof i=="string"&&typeof t=="object"){const r=i;i=t,t=r}this.log(`key status change "${t}" for keyStatuses keyId: ${Jl.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${Jl.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,i=t.loader,r=new i(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:s},c=t.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,p,m,v)=>{a(h.data)},onError:(h,p,m,v)=>{o(new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:pi({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${s}). Status: ${h.code} (${h.text})`))},onTimeout:(h,p,m)=>{o(new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(h,p,m)=>{o(new Error("aborted"))}};r.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((r,s)=>{e.setServerCertificate(i).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${i==null?void 0:i.byteLength}) on "${t}"`),r(e)}).catch(a=>{s(new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(r=>{throw new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:r,fatal:!0},r.message)}))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=new DOMParser().parseFromString(i,"application/xml"),s=r.querySelectorAll("HttpHeader");if(s.length>0){let u;for(let d=0,h=s.length;d<h;d++){var a,o;u=s[d];const p=(a=u.querySelector("name"))==null?void 0:a.textContent,m=(o=u.querySelector("value"))==null?void 0:o.textContent;p&&m&&e.setRequestHeader(p,m)}}const l=r.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return H_(atob(c))}setupLicenseXHR(e,t,i,r){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,t,i,r)}).catch(a=>{if(!i.decryptdata)throw a;return e.open("POST",t,!0),s.call(this.hls,e,t,i,r)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||r})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise((r,s)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,o,a,e)}catch(u){this.error(u)}r(l)}else{const l=i.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)s(new Ro({type:jt.KEY_SYSTEM_ERROR,details:De.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(r,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==gi.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,i.removeEventListener("encrypted",this.onMediaEncrypted),i.removeEventListener("waitingforkey",this.onWaitingForKey),i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null)}_clear(e){var t;const i=this.mediaKeySessions;this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},E0.clearKeyUriToKeyIdMap();const r=i.length;Bp.CDMCleanupPromise=Promise.all(i.map(s=>this.removeSession(s)).concat(e==null||(t=e.setMediaKeys(null))==null?void 0:t.catch(s=>{var a;this.log(`Could not clear media keys: ${s}`),(a=this.hls)==null||a.trigger($.ERROR,{type:jt.OTHER_ERROR,details:De.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${s}`)})}))).then(()=>{r&&(this.log("finished closing key sessions and clearing media keys"),i.length=0)}).catch(s=>{var a;this.log(`Could not close sessions and clear media keys: ${s}`),(a=this.hls)==null||a.trigger($.ERROR,{type:jt.OTHER_ERROR,details:De.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${s}`)})})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=t.reduce((r,s)=>(r.indexOf(s.keyFormat)===-1&&r.push(s.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);r>-1&&this.mediaKeySessions.splice(r,1);const{drmSystemOptions:s}=this.config;return(jse(s)?new Promise((o,l)=>{self.setTimeout(()=>l(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(o)}):Promise.resolve()).catch(o=>{var l;this.log(`Could not remove session: ${o}`),(l=this.hls)==null||l.trigger($.ERROR,{type:jt.OTHER_ERROR,details:De.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${o}`)})}).then(()=>t.close()).catch(o=>{var l;this.log(`Could not close session: ${o}`),(l=this.hls)==null||l.trigger($.ERROR,{type:jt.OTHER_ERROR,details:De.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${o}`)})})}}}Bp.CDMCleanupPromise=void 0;class Ro extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class Voe{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on($.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off($.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,i){const r=performance.now();if(t){if(this.lastTime){const s=r-this.lastTime,a=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*a/s,c=this.hls;if(c.trigger($.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:i}),l>0&&a>c.config.fpsDroppedMonitoringThreshold*o){let u=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger($.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function sF(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function aF(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){Wn.debug(`[texttrack-utils]: ${i}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,n.addCue(r)}catch(r){Wn.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}t==="disabled"&&(n.mode=t)}function Ap(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues)for(let i=n.cues.length;i--;)e&&n.cues[i].removeEventListener("enter",e),n.removeCue(n.cues[i]);t==="disabled"&&(n.mode=t)}function X_(n,e,t,i){const r=n.mode;if(r==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const s=qoe(n.cues,e,t);for(let a=0;a<s.length;a++)(!i||i(s[a]))&&n.removeCue(s[a])}r==="disabled"&&(n.mode=r)}function Yoe(n,e){if(e<=n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let i=0,r=t,s;for(;i<=r;)if(s=Math.floor((r+i)/2),e<n[s].startTime)r=s-1;else if(e>n[s].startTime&&i<t)i=s+1;else return s;return n[i].startTime-e<e-n[r].startTime?i:r}function qoe(n,e,t){const i=[],r=Yoe(n,e);if(r>-1)for(let s=r,a=n.length;s<a;s++){const o=n[s];if(o.startTime>=e&&o.endTime<=t)i.push(o);else if(o.startTime>t)return i}return i}function f1(n){const e=[];for(let t=0;t<n.length;t++){const i=n[t];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(n[t])}return e}class Koe extends mT{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const i=f1(this.media.textTracks);for(let s=0;s<i.length;s++)if(i[s].mode==="hidden")t=i[s];else if(i[s].mode==="showing"){t=i[s];break}const r=this.findTrackForTextTrack(t);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.LEVEL_LOADING,this.onLevelLoading,this),e.on($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on($.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on($.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.LEVEL_LOADING,this.onLevelLoading,this),e.off($.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off($.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off($.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const i=this.media;if(!i)return;const r=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;f1(i.textTracks).forEach(a=>{Ap(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:r,details:s}=t,a=this.tracksInGroup[i];if(!a||a.groupId!==r){this.warn(`Subtitle track with id:${i} and group:${r} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Subtitle track ${i} "${a.name}" lang:${a.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||(r==null?void 0:r.length)!==(i==null?void 0:i.length)||i!=null&&i.some(a=>(r==null?void 0:r.indexOf(a))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(u=>!i||i.indexOf(u.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(u=>u.default)&&(this.selectDefaultTrack=!1),a.forEach((u,d)=>{u.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!s&&o){this.selectDefaultTrack=!1;const u=sc(o,a);if(u>-1)s=a[u];else{const d=sc(o,this.tracks);s=this.tracks[d]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const c={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${i==null?void 0:i.join(",")}" group-id`),this.hls.trigger($.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const s=t[r];if(!(i&&!s.default||!i&&!e)&&(!e||sh(s,e)))return r}if(e){for(let r=0;r<t.length;r++){const s=t[r];if(C0(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const s=t[r];if(C0(e.attrs,s.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const r=t[i];if(Y_(r,e))return i}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Pn.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&sh(e,i))return i;const r=sc(e,this.tracksInGroup);if(r>-1){const s=this.tracksInGroup[r];return this.setSubtitleTrack(r),s}else{if(i)return null;{const s=sc(e,t);if(s>-1)return t[s]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,r=e.groupId,s=this.getUrlWithDirectives(e.url,t),a=e.details,o=a==null?void 0:a.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${r}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger($.SUBTITLE_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=f1(e.textTracks),i=this.currentTrack;let r;if(i&&(r=t.filter(s=>Y_(i,s))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach(s=>{s.mode!=="disabled"&&s!==r&&(s.mode="disabled")}),r){const s=this.subtitleDisplay?"showing":"hidden";r.mode!==s&&(r.mode=s)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!wt(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger($.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!r.details&&!r.details.live;if(e===this.trackId&&r===i&&s)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:a,groupId:o="",name:l,type:c,url:u}=r;this.hls.trigger($.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:c,url:u});const d=this.switchParams(r.url,i==null?void 0:i.details,r.details);this.loadPlaylist(d)}}function Fm(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString()}const Up=.025;let vx=function(n){return n[n.Point=0]="Point",n[n.Range=1]="Range",n}({});function Xoe(n,e,t){return`${n.identifier}-${t+1}-${Fm(e)}`}class Qoe{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){if(e>=this.assetList.length)return!0;const t=this.playoutLimit;return e<=0||isNaN(t)?!1:this.assetList[e].startOffset>t}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return FS(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,i=FS(t,e);return t-i<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=wt(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return FS(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Up))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?vx.Range:vx.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return Joe(this)}}function FS(n,e){return n-e.start<e.duration/2&&!(Math.abs(n-(e.start+e.duration))<Up)?e.start:e.start+e.duration}function oF(n,e,t){const i=new self.URL(n,t);return i.protocol!=="data:"&&i.searchParams.set("_HLS_primary_id",e),i}function Joe(n){return`["${n.identifier}" ${n.cue.pre?"<pre>":n.cue.post?"<post>":""}${n.timelineStart.toFixed(2)}-${n.resumeTime.toFixed(2)}]`}function Q_(n){const e=n.timelineStart,t=n.duration||0;return`["${n.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class Zoe{constructor(e,t,i,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{const c=this.interstitial.playoutLimit,u=this.currentTime;this.startOffset+u>=c&&this.hls.trigger($.PLAYOUT_LIMIT_REACHED,{})};const s=this.hls=new e(t);this.interstitial=i,this.assetItem=r;let a=r.uri;try{a=oF(a,s.sessionId).href}catch{}s.loadSource(a);const o=()=>{this.hasDetails=!0};s.once($.LEVEL_LOADED,o),s.once($.AUDIO_TRACK_LOADED,o),s.once($.SUBTITLE_TRACK_LOADED,o),s.on($.MEDIA_ATTACHING,(l,{media:c})=>{this.removeMediaListeners(),this.mediaAttached=c,this.interstitial.playoutLimit&&c.addEventListener("timeupdate",this.checkPlayout)})}bufferedInPlaceToEnd(e){var t;if(!this.interstitial.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const i=this.timelineOffset,r=Tn.bufferInfo(e,i,0);return this.getAssetTime(r.end)>=this._bufferedEosTime-.02}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=Tn.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const i=e-t;if(Math.abs(i)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-t),i)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}on(e,t,i){this.hls.on(e,t)}once(e,t,i){this.hls.once(e,t)}off(e,t,i){this.hls.off(e,t)}toString(){var e,t;return`HlsAssetPlayer: ${Q_(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${(t=this.interstitial)!=null&&t.appendInPlace?"append-in-place":""}`}}const IR=.033;class ele extends Eu{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((i,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,i+1):i,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[i]||(t===void 0&&(t=e.start),i=this.findItemIndexAtTime(t));i>=0&&(s=r[i])!=null&&s.event;){var s;i--}return i}findItemIndexAtTime(e,t){const i=this.items;if(i)for(let r=0;r<i.length;r++){let s=i[r];if(t&&t!=="primary"&&(s=s[t]),e===s.start||e>s.start&&e<s.end)return r}return-1}findJumpRestrictedIndex(e,t){const i=this.items;if(i)for(let r=e;r<=t&&i[r];r++){const s=i[r].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var i;if(((i=t[r].event)==null?void 0:i.identifier)===e)return r}return-1}findAssetIndex(e,t){const i=e.assetList,r=i.length;if(r>1)for(let s=0;s<r;s++){const a=i[s];if(!a.error){const o=a.timelineStart;if(t===o||t>o&&t<o+(a.duration||0))return s}}return 0}get assetIdAtEnd(){var e,t;const i=(e=this.items)==null||(t=e[this.length-1])==null?void 0:t.event;if(i){const r=i.assetList,s=r[r.length-1];if(s)return s.identifier}return null}parseInterstitialDateRanges(e,t){const i=e.main.details,{dateRanges:r}=i,s=this.events,a=this.parseDateRanges(r,{url:i.url},t),o=Object.keys(r),l=s?s.filter(c=>!o.includes(c.identifier)):[];a.length&&a.sort((c,u)=>{const d=c.cue.pre,h=c.cue.post,p=u.cue.pre,m=u.cue.post;if(d&&!p)return-1;if(p&&!d||h&&!m)return 1;if(m&&!h)return-1;if(!d&&!p&&!h&&!m){const v=c.startTime,b=u.startTime;if(v!==b)return v-b}return c.dateRange.tagOrder-u.dateRange.tagOrder}),this.events=a,l.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,l)}updateSchedule(e,t=[]){const i=this.events||[];if(i.length||t.length||this.length<2){const r=this.items,s=this.parseSchedule(i,e);(t.length||(r==null?void 0:r.length)!==s.length||s.some((o,l)=>Math.abs(o.playout.start-r[l].playout.start)>.005||Math.abs(o.playout.end-r[l].playout.end)>.005))&&(this.items=s,this.onScheduleUpdate(t,r))}}parseDateRanges(e,t,i){const r=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=s[a],l=e[o];if(l.isInterstitial){let c=this.eventMap[o];c?c.setDateRange(l):(c=new Qoe(l,t),this.eventMap[o]=c,i===!1&&(c.appendInPlace=i)),r.push(c)}}return r}parseSchedule(e,t){const i=[],r=t.main.details,s=r.live?1/0:r.edge;let a=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,t);let l=0,c=0;if(e.forEach((u,d)=>{const h=u.cue.pre,p=u.cue.post,m=e[d-1]||null,v=u.appendInPlace,b=p?s:u.startOffset,x=u.duration,w=u.timelineOccupancy===vx.Range?x:0,S=u.resumptionOffset,A=(m==null?void 0:m.startTime)===b,C=b+u.cumulativeDuration;let N=v?C+x:b+S;if(h||!p&&b<=0){const R=c;c+=w,u.timelineStart=C;const U=a;a+=x,i.push({event:u,start:C,end:N,playout:{start:U,end:a},integrated:{start:R,end:c}})}else if(b<=s){if(!A){const j=b-l;if(j>IR){const D=l,O=c;c+=j;const Z=a;a+=j;const J={previousEvent:e[d-1]||null,nextEvent:u,start:D,end:D+j,playout:{start:Z,end:a},integrated:{start:O,end:c}};i.push(J)}else j>0&&m&&(m.cumulativeDuration+=j,i[i.length-1].end=b)}p&&(N=C),u.timelineStart=C;const R=c;c+=w;const U=a;a+=x,i.push({event:u,start:C,end:N,playout:{start:U,end:a},integrated:{start:R,end:c}})}else return;const k=u.resumeTime;p||k>s?l=s:l=k}),l<s){var o;const u=l,d=c,h=s-l;c+=h;const p=a;a+=h,i.push({previousEvent:((o=i[i.length-1])==null?void 0:o.event)||null,nextEvent:null,start:l,end:u+h,playout:{start:p,end:a},integrated:{start:d,end:c}})}this.setDurations(s,a,c)}else i.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return i}setDurations(e,t,i){this.durations={primary:e,playout:t,integrated:i}}resolveOffsets(e,t){const i=t.main.details,r=i.live?1/0:i.edge;let s=0,a=-1;e.forEach((o,l)=>{const c=o.cue.pre,u=o.cue.post,d=c?0:u?r:o.startTime;this.updateAssetDurations(o),a===d?o.cumulativeDuration=s:(s=0,a=d),!u&&o.snapOptions.in&&(o.resumeAnchor=ph(null,i.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<IR&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const p=wt(o.resumeOffset)?o.resumeOffset:o.duration;s+=p})}primaryCanResumeInPlaceAt(e,t){const i=e.resumeTime,r=e.startTime+e.resumptionOffset;return Math.abs(i-r)>Up?(this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${r}`),!1):t?!Object.keys(t).some(a=>{const o=t[a].details,l=o.edge;if(i>=l)return this.log(`"${e.identifier}" resumption ${i} past ${a} playlist end ${l}`),!1;const c=ph(null,o.fragments,i);if(!c)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const u=a==="audio"?.175:0;return Math.abs(c.start-i)<Up+u||Math.abs(c.end-i)<Up+u?!1:(this.log(`"${e.identifier}" resumption ${i} not aligned with ${a} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${i} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let i=0,r=!1,s=!1;e.assetList.forEach((a,o)=>{const l=t+i;a.startOffset=i,a.timelineStart=l,r||(r=a.duration===null),s||(s=!!a.error);const c=a.error?0:a.duration||0;i+=c}),r&&!s?e.duration=Math.max(i,e.duration):e.duration=i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function td(n){return`[${n.event?'"'+n.event.identifier+'"':"primary"}: ${n.start.toFixed(2)}-${n.end.toFixed(2)}]`}class tle{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const i=e.assetListUrl;let r;try{r=oF(i,this.hls.sessionId,e.baseUrl)}catch(h){const p=this.assignAssetListError(e,De.ASSET_LIST_LOAD_ERROR,h,i);this.hls.trigger($.ERROR,p);return}t&&r.protocol!=="data:"&&r.searchParams.set("_HLS_start_offset",""+t);const s=this.hls.config,a=s.loader,o=new a(s),l={responseType:"json",url:r.href},c=s.interstitialAssetListLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,p,m,v)=>{const b=h.data,x=b==null?void 0:b.ASSETS;if(!Array.isArray(x)){const w=this.assignAssetListError(e,De.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),m.url,p,v);this.hls.trigger($.ERROR,w);return}e.assetListResponse=b,this.hls.trigger($.ASSET_LIST_LOADED,{event:e,assetListResponse:b,networkDetails:v})},onError:(h,p,m,v)=>{const b=this.assignAssetListError(e,De.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${h.code} ${h.text} (${p.url})`),p.url,v,m);this.hls.trigger($.ERROR,b)},onTimeout:(h,p,m)=>{const v=this.assignAssetListError(e,De.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${p.url})`),p.url,h,m);this.hls.trigger($.ERROR,v)}};return o.load(l,u,d),this.hls.trigger($.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,i,r,s,a){return e.error=i,{type:jt.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:i,networkDetails:a,stats:s}}}function ou(n,e,t){oc(n,e,t),n.addEventListener(e,t)}function oc(n,e,t){n.removeEventListener(e,t)}function kR(n){n==null||n.play().catch(()=>{})}class nle extends Eu{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;const r=i-this.timelinePos;if(Math.abs(r)<1/7056e5)return;const a=r<=-.01;this.timelinePos=i,this.bufferedPos=i;const o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(i,i-r)&&this.updateSchedule(),this.checkBuffer(),a&&i<o.start||i>=o.end){var l;const h=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(o)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!a){const p=this.findItemIndex(o);if(h>p){const m=this.schedule.findJumpRestrictedIndex(p+1,h);if(m>p){this.setSchedulePosition(m);return}}}this.setSchedulePosition(h);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(o)){const h=o.event.assetList[0];h&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(i,h))}return}const u=c.timelineStart,d=c.duration||0;(a&&i<u||i>=u+d)&&this.setScheduleToAssetAtTime(i,c)},this.onTimeupdate=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;if(i>this.timelinePos)this.timelinePos=i,i>this.bufferedPos&&this.checkBuffer();else return;const r=this.playingItem;if(!r||this.playingLastItem)return;if(i>=r.end){this.timelinePos=r.end;const o=this.findItemIndex(r);this.setSchedulePosition(o+1)}const s=this.playingAsset;if(!s)return;const a=s.timelineStart+(s.duration||0);i>=a&&this.setScheduleToAssetAtTime(i,s)},this.onScheduleUpdate=(i,r)=>{const s=this.schedule,a=this.playingItem,o=s.events||[],l=s.items||[],c=s.durations,u=i.map(p=>p.identifier),d=!!(o.length||u.length);if(d&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${l.map(p=>td(p))}`),u.length&&this.log(`Removed events ${u}`),this.playerQueue.forEach(p=>{if(p.interstitial.appendInPlace){const m=p.assetItem.timelineStart,v=p.timelineOffset-m;if(v)try{p.timelineOffset=m}catch(b){Math.abs(v)>Up&&this.warn(`${b} ("${p.assetId}" ${p.timelineOffset}->${m})`)}}}),a){const p=this.updateItem(a,this.timelinePos);this.itemsMatch(a,p)&&(this.playingItem=p,this.waitingItem=this.endedItem=null)}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const h=this.bufferingItem;if(h){const p=this.updateItem(h,this.bufferedPos);this.itemsMatch(h,p)?this.bufferingItem=p:h.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(h.event,null))}if(i.forEach(p=>{p.assetList.forEach(m=>{this.clearAssetPlayer(m.identifier,null)})}),d||r){if(this.hls.trigger($.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:l.slice(0),durations:c,removedIds:u}),this.isInterstitial(a)&&u.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new tle(e),this.schedule=new ele(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on($.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on($.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on($.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on($.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on($.BUFFER_APPENDED,this.onBufferAppended,this),e.on($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on($.MEDIA_ENDED,this.onMediaEnded,this),e.on($.ERROR,this.onError,this),e.on($.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off($.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off($.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off($.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off($.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off($.BUFFER_CODECS,this.onBufferCodecs,this),e.off($.BUFFER_APPENDED,this.onBufferAppended,this),e.off($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off($.MEDIA_ENDED,this.onMediaEnded,this),e.off($.ERROR,this.onError,this),e.off($.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){oc(e,"play",this.onPlay),oc(e,"pause",this.onPause),oc(e,"seeking",this.onSeeking),oc(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const i=this.media=t.media;ou(i,"seeking",this.onSeeking),ou(i,"timeupdate",this.onTimeupdate),ou(i,"play",this.onPlay),ou(i,"pause",this.onPause)}onMediaAttached(e,t){const i=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,i===null)this.checkStart();else if(!r){this.clearScheduleState();const s=this.findItemIndex(i);this.setSchedulePosition(s)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const i=!!t.transferMedia,r=this.media;if(this.media=null,!i&&(r&&this.removeMediaListeners(r),this.detachedData)){const s=this.getBufferingPlayer();s&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,t=()=>e.bufferingItem||e.waitingItem,i=d=>d&&e.getAssetPlayer(d.identifier),r=(d,h,p,m,v)=>{if(d){let b=d[h].start;const x=d.event;if(x){if(h==="playout"||x.timelineOccupancy!==vx.Point){const w=i(p);(w==null?void 0:w.interstitial)===x&&(b+=w.assetItem.startOffset+w[v])}}else{const w=m==="bufferedPos"?a():e[m];b+=w-d.start}return b}return 0},s=(d,h)=>{if(d!==0&&h!=="primary"&&e.schedule.length){var p;const m=e.schedule.findItemIndexAtTime(d),v=(p=e.schedule.items)==null?void 0:p[m];if(v){const b=v[h].start-v.start;return d+b}}return d},a=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?o("primary"):Math.max(d,0)},o=d=>{var h;return(h=e.primaryDetails)!=null&&h.live?e.primaryDetails.edge:e.schedule.durations[d]},l=(d,h)=>{var p,m;const v=e.effectivePlayingItem;if(v!=null&&(p=v.event)!=null&&p.restrictions.skip)return;e.log(`seek to ${d} "${h}"`);const b=e.effectivePlayingItem,x=e.schedule.findItemIndexAtTime(d,h),w=(m=e.schedule.items)==null?void 0:m[x],S=e.getBufferingPlayer(),A=S==null?void 0:S.interstitial,C=A==null?void 0:A.appendInPlace,N=b&&e.itemsMatch(b,w);if(b&&(C||N)){const R=i(e.playingAsset),U=(R==null?void 0:R.media)||e.primaryMedia;if(U){const j=h==="primary"?U.currentTime:r(b,h,e.playingAsset,"timelinePos","currentTime"),D=d-j,O=(C?j:U.currentTime)+D;if(O>=0&&(!R||C||O<=R.duration)){U.currentTime=O;return}}}if(w){let R=d;if(h!=="primary"){const j=w[h].start,D=d-j;R=w.start+D}const U=!e.isInterstitial(w);if((!e.isInterstitial(b)||b.event.appendInPlace)&&(U||w.event.appendInPlace)){const j=e.media||(C?S==null?void 0:S.media:null);j&&(j.currentTime=R)}else if(b){const j=e.findItemIndex(b);if(x>j){const O=e.schedule.findJumpRestrictedIndex(j+1,x);if(O>j){e.setSchedulePosition(O);return}}let D=0;if(U)e.timelinePos=R,e.checkBuffer();else{var k;const O=w==null||(k=w.event)==null?void 0:k.assetList;if(O){const Z=d-(w[h]||w).start;for(let J=O.length;J--;){const le=O[J];if(le.duration&&Z>=le.startOffset&&Z<le.startOffset+le.duration){D=J;break}}}}e.setSchedulePosition(x,D)}}},c=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const h=t();return e.isInterstitial(h)?h:null},u={get currentTime(){const d=c(),h=e.effectivePlayingItem;return h&&h===d?r(h,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-h.playout.start:0},set currentTime(d){const h=c(),p=e.effectivePlayingItem;p&&p===h&&l(d+p.playout.start,"playout")},get duration(){const d=c();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const h=(d=c())==null?void 0:d.event.assetList;return h?h.map(p=>e.getAssetPlayer(p.identifier)):[]},get playingIndex(){var d;const h=(d=c())==null?void 0:d.event;return h&&e.effectivePlayingAsset?h.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};this.manager={get events(){var d,h;return((d=e.schedule)==null||(h=d.events)==null?void 0:h.slice(0))||[]},get schedule(){var d,h;return((d=e.schedule)==null||(h=d.items)==null?void 0:h.slice(0))||[]},get interstitialPlayer(){return c()?u:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const d=t();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return a()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){l(d,"primary")},get duration(){return o("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){l(d,"integrated")},get duration(){return o("integrated")},get seekableStart(){var d;return s(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,h=d==null?void 0:d.event;if(h&&!h.restrictions.skip){const p=e.findItemIndex(d);if(h.appendInPlace){const m=d.playout.start+d.event.duration;l(m+.001,"playout")}else e.advanceAfterAssetEnded(h,p,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,i=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!i?!1:this.findItemIndex(t)===i.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t,i;if(this.mediaSelection===null)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let s=this.media;!s&&(e=this.bufferingItem)!=null&&(t=e.event)!=null&&t.appendInPlace&&(s=this.primaryMedia);const a=(i=s)==null?void 0:i.currentTime;if(!(a===void 0||!wt(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,t)}transferMediaFromPlayer(e,t){const i=e.interstitial.appendInPlace,r=e.media;if(i&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r){this.detachedData={media:r};return}const s=e.transferMedia();this.log(`transfer MediaSource from ${e} ${ar(s)}`),this.detachedData=s}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var i,r;if(e.media===t)return;let s=null;const a=this.hls,o=e!==a,l=o&&e.interstitial.appendInPlace,c=(i=this.detachedData)==null?void 0:i.mediaSource;let u;if(a.media)l&&(s=a.transferMedia(),this.detachedData=s),u="Primary";else if(c){const p=this.getBufferingPlayer();p?(s=p.transferMedia(),u=`${p}`):u="detached MediaSource"}else u="detached media";if(!s){if(c)s=this.detachedData,this.log(`using detachedData: MediaSource ${ar(s)}`);else if(!this.detachedData||a.media===t){const p=this.playerQueue;p.length>1&&p.forEach(m=>{if(o&&m.interstitial.appendInPlace!==l){const v=m.interstitial;this.clearInterstitial(m.interstitial,null),v.appendInPlace=!1,v.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${v}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const d=s&&"mediaSource"in s&&((r=s.mediaSource)==null?void 0:r.readyState)!=="closed",h=d&&s?s:t;if(this.log(`${d?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${u}`),h===s){const p=o&&e.assetId===this.schedule.assetIdAtEnd;h.overrides={duration:this.schedule.duration,endOfStream:!o||p,cueRemoval:!o}}e.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const i=this.timelinePos,r=this.effectivePlayingItem;if(i===-1){const s=this.hls.startPosition;if(this.timelinePos=s,t.length&&t[0].cue.pre){const a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(s>=0||!this.primaryLive){const a=this.timelinePos=s>0?s:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(r&&!this.playingItem){const s=e.findItemIndex(r);this.setSchedulePosition(s)}}advanceAfterAssetEnded(e,t,i){const r=i+1;if(!e.isAssetPastPlayoutLimit(r)&&!e.assetList[r].error)this.setSchedulePosition(t,r);else{const s=this.schedule.items;if(s){const a=t+1,o=s.length;if(a>=o){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.timelinePos=l,this.checkBuffer()),this.setSchedulePosition(a)}}}setScheduleToAssetAtTime(e,t){const i=this.schedule,r=t.parentIdentifier,s=i.getEvent(r);if(s){const a=i.findEventIndex(r),o=i.findAssetIndex(s,e);this.setSchedulePosition(a,o)}}setSchedulePosition(e,t){const i=this.schedule.items;if(!i||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${t}`);const r=e>=0?i[e]:null,s=this.playingItem,a=this.playingLastItem;if(this.isInterstitial(s)){var o;const c=s.event,u=this.playingAsset,d=u==null?void 0:u.identifier,h=d?this.getAssetPlayer(d):null;if(h&&d&&(!this.eventItemsMatch(s,r)||t!==void 0&&d!==((o=c.assetList)==null?void 0:o[t].identifier))){var l;const p=c.findAssetIndex(u);this.log(`INTERSTITIAL_ASSET_ENDED ${p+1}/${c.assetList.length} ${Q_(u)}`),this.endedAsset=u,this.playingAsset=null,this.hls.trigger($.INTERSTITIAL_ASSET_ENDED,{asset:u,assetListIndex:p,event:c,schedule:i.slice(0),scheduleIndex:e,player:h}),this.retreiveMediaSource(d,r),h.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&h.detachMedia()}if(!this.eventItemsMatch(s,r)&&(this.endedItem=s,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${c} ${td(s)}`),c.hasPlayed=!0,this.hls.trigger($.INTERSTITIAL_ENDED,{event:c,schedule:i.slice(0),scheduleIndex:e}),c.cue.once)){this.updateSchedule();const p=this.schedule.items;if(r&&p){const m=this.schedule.findItemIndex(r);this.advanceSchedule(m,p,t,s,a)}return}}this.advanceSchedule(e,i,t,s,a)}advanceSchedule(e,t,i,r,s){const a=e>=0?t[e]:null,o=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(c=>{const u=c.interstitial,d=this.schedule.findEventIndex(u.identifier);(d<e||d>e+1)&&this.clearInterstitial(u,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const c=a.event;i===void 0&&(i=this.schedule.findAssetIndex(c,this.timelinePos));const u=this.waitingItem;this.assetsBuffered(a,o)||this.setBufferingItem(a);let d=this.preloadAssets(c,i);if(this.eventItemsMatch(a,u||r)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${td(a)} ${c.appendInPlace?"append in place":""}`),this.hls.trigger($.INTERSTITIAL_STARTED,{event:c,schedule:t.slice(0),scheduleIndex:e})),!c.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${c}`);return}if(c.assetListLoader&&(c.assetListLoader.destroy(),c.assetListLoader=void 0),!o){this.log(`Waiting for attachMedia to start Interstitial ${c}`);return}this.waitingItem=this.endedItem=null,this.playingItem=a;const h=c.assetList[i];if(!h){const p=t[e+1],m=this.media;p&&m&&!this.isInterstitial(p)&&m.currentTime<p.start&&(m.currentTime=this.timelinePos=p.start),this.advanceAfterAssetEnded(c,e,i||0);return}if(d||(d=this.getAssetPlayer(h.identifier)),d===null||d.destroyed){const p=c.assetList.length;this.warn(`asset ${i+1}/${p} player destroyed ${c}`),d=this.createAssetPlayer(c,h,i)}if(!this.eventItemsMatch(a,this.bufferingItem)&&c.appendInPlace&&this.isAssetBuffered(h))return;this.startAssetPlayer(d,i,t,e,o),this.shouldPlay&&kR(d.media)}else a!==null?(this.resumePrimary(a,e,r),this.shouldPlay&&kR(this.hls.media)):s&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e,t;return(e=this.mediaSelection)==null||(t=e.main)==null?void 0:t.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,i){var r;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${td(e)}`),!((r=this.detachedData)!=null&&r.mediaSource)){let a=this.timelinePos;(a<e.start||a>=e.end)&&(a=this.getPrimaryResumption(e,t),this.timelinePos=a),this.attachPrimary(a,e)}if(!i)return;const s=this.schedule.items;s&&(this.log(`resumed ${td(e)}`),this.hls.trigger($.INTERSTITIALS_PRIMARY_RESUMED,{schedule:s.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const i=e.start;if(this.primaryLive){const r=this.primaryDetails;if(t===0)return this.hls.startPosition;if(r&&(i<r.fragmentStart||i>r.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:Tn.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,i){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,r),i&&this.startLoadingPrimaryAt(e,i)),i||(this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,t){var i;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs((((i=r.mainForwardBufferInfo)==null?void 0:i.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off($.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on($.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1)return;const i=this.hls.levels[t.level],r=pi(pi({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const i=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=pi(pi({},this.altSelection),{},{audio:i});return}const s=pi(pi({},r),{},{audio:i});this.mediaSelection=s}onSubtitleTrackUpdated(e,t){const i=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=pi(pi({},this.altSelection),{},{subtitles:i});return}const s=pi(pi({},r),{},{subtitles:i});this.mediaSelection=s}onAudioTrackSwitching(e,t){const i=Hk(t);this.playerQueue.forEach(r=>r.hls.setAudioOption(t)||r.hls.setAudioOption(i))}onSubtitleTrackSwitch(e,t){const i=Hk(t);this.playerQueue.forEach(r=>r.hls.setSubtitleOption(t)||t.id!==-1&&r.hls.setSubtitleOption(i))}onBufferCodecs(e,t){const i=t.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){const r=this.timelinePos;this.bufferedPos=r,this.checkBuffer()}}onBufferedToEnd(e){const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let r=0;r<t.length;r++){const s=t[r];if(s.cue.post){var i;const a=this.schedule.findEventIndex(s.identifier),o=(i=this.schedule.items)==null?void 0:i[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const i=this.findItemIndex(t);this.setSchedulePosition(i+1)}else this.shouldPlay=!1}updateItem(e,t){const i=this.schedule.items;if(e&&i){const r=this.findItemIndex(e,t);return i[r]||null}return null}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var i;return!!t&&(e===t||e.event.identifier===((i=t.event)==null?void 0:i.identifier))}findItemIndex(e,t){return e?this.schedule.findItemIndex(e,t):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const t=this.schedule.items;if(!t)return;const i=Tn.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,t,e)}updateBufferedPos(e,t,i){const r=this.schedule,s=this.bufferingItem;if(this.bufferedPos>e)return;if(t.length===1&&this.itemsMatch(t[0],s)){this.bufferedPos=e;return}const a=this.playingItem,o=this.findItemIndex(a);let l=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var c,u;const d=this.findItemIndex(s),h=Math.min(d+1,t.length-1),p=t[h];if((l===-1&&s&&e>=s.end||(c=p.event)!=null&&c.appendInPlace&&e+.01>=p.start)&&(l=h),h-o>1&&(s==null||(u=s.event)==null?void 0:u.appendInPlace)===!1)return;if(this.bufferedPos=e,l>d&&l>o)this.bufferedToItem(p);else{const m=this.primaryDetails;this.primaryLive&&m&&e>m.edge-m.targetduration&&p.start<m.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(p)&&this.preloadAssets(p.event,0)}}else i&&a&&!this.itemsMatch(a,s)&&(l===o?this.bufferedToItem(a):l===o+1&&this.bufferedToItem(t[l]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(r=>{const s=this.getAssetPlayer(r.identifier);return!(s!=null&&s.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,i=this.schedule;if(this.itemsMatch(e,t))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:r,events:s}=i;if(!r||!s)return t;const a=this.isInterstitial(e),o=this.getBufferingPlayer();if(this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos)),!this.playbackDisabled){const l=o?o.remaining:t?t.end-this.timelinePos:0;this.log(`buffered to boundary ${td(e)}`+(t?` (${l.toFixed(2)} remaining)`:"")),a?e.event.assetList.forEach(c=>{const u=this.getAssetPlayer(c.identifier);u&&u.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering()))}this.hls.trigger($.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return t}bufferedToItem(e,t=0){const i=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(i!==null){this.bufferingAsset=null;const r=this.detachedData;r?r.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),i=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,t){const i=e.event,r=i.assetList.length===0&&!i.assetListLoader,s=i.cue.once;if(r||!s){const a=this.preloadAssets(i,t);if(a!=null&&a.interstitial.appendInPlace){const o=i.assetList[t],l=this.primaryMedia;o&&l&&this.bufferAssetPlayer(a,l)}}}preloadAssets(e,t){const i=e.assetUrl,r=e.assetList.length,s=r===0&&!e.assetListLoader,a=e.cue.once;if(s){const l=e.timelineStart;if(e.appendInPlace){var o;const h=this.playingItem;!this.isInterstitial(h)&&(h==null||(o=h.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let c,u=0;if(!this.playingItem&&this.primaryLive&&(u=this.hls.startPosition,u===-1&&(u=this.hls.liveSyncPosition||0)),u&&!(e.cue.pre||e.cue.post)){const h=u-l;h>0&&(c=Math.round(h*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${i?1:r} ${e}${c?` live-start: ${u} start-offset: ${c}`:""}`),i)return this.createAsset(e,0,0,l,e.duration,i);const d=this.assetListLoader.loadAssetList(e,c);d&&(e.assetListLoader=d)}else if(!a&&r){for(let l=t;l<r;l++){const c=e.assetList[l],u=this.getAssetPlayerQueueIndex(c.identifier);(u===-1||this.playerQueue[u].destroyed)&&!c.error&&this.createAssetPlayer(e,c,l)}return this.getAssetPlayer(e.assetList[t].identifier)}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(r=>{this.hls.trigger($.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:r})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let i=0;i<t.length;i++)if(e===t[i].assetId)return i;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let i=0;i<e.length;i++)if(e[i].media===t)return e[i]}return null}createAsset(e,t,i,r,s,a){const o={parentIdentifier:e.identifier,identifier:Xoe(e,a,t),duration:s,startOffset:i,timelineStart:r,uri:a};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,i){this.log(`create HLSAssetPlayer for ${Q_(t)}`);const r=this.hls,s=r.userConfig;let a=s.videoPreference;const o=r.loadLevelObj||r.levels[r.currentLevel];(a||o)&&(a=wi({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));const l=r.audioTracks[r.audioTrack],c=r.subtitleTracks[r.subtitleTrack];let u=0;if(this.primaryLive||e.appendInPlace){const S=this.timelinePos-t.timelineStart;if(S>1){const A=t.duration;A&&S<A&&(u=S)}}const d=t.identifier,h=pi(pi({},s),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:u,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:l||s.audioPreference,subtitlePreference:c||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(h.timelineOffset=t.timelineStart));const p=h.cmcd;p!=null&&p.sessionId&&p.contentId&&(h.cmcd=wi({},p,{contentId:Fm(t.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const m=new Zoe(this.HlsPlayerClass,h,e,t);this.playerQueue.push(m),e.assetList[i]=t;const v=S=>{if(S.live){const N=new Error(`Interstitials MUST be VOD assets ${e}`),k={fatal:!0,type:jt.OTHER_ERROR,details:De.INTERSTITIAL_ASSET_ITEM_ERROR,error:N};this.handleAssetItemError(k,e,this.schedule.findEventIndex(e.identifier),i,N.message);return}const A=S.edge-S.fragmentStart,C=t.duration;(C===null||A>C)&&(this.log(`Interstitial asset "${d}" duration change ${C} > ${A}`),t.duration=A,this.updateSchedule())};m.on($.LEVEL_UPDATED,(S,{details:A})=>v(A)),m.on($.LEVEL_PTS_UPDATED,(S,{details:A})=>v(A));const b=(S,A)=>{const C=this.getAssetPlayer(d);if(C&&A.tracks){C.off($.BUFFER_CODECS,b),C.tracks=A.tracks;const N=this.primaryMedia;this.bufferingAsset===C.assetItem&&N&&!C.media&&this.bufferAssetPlayer(C,N)}};m.on($.BUFFER_CODECS,b);const x=()=>{var S;const A=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${A}`),!A)return;const C=this.schedule.findEventIndex(e.identifier),N=e.findAssetIndex(t),k=N+1,R=(S=this.schedule.items)==null?void 0:S[C];if(this.isInterstitial(R))if(N!==-1&&!e.isAssetPastPlayoutLimit(k)&&!e.assetList[k].error)this.bufferedToItem(R,k);else{var U;const j=(U=this.schedule.items)==null?void 0:U[C+1];j&&this.bufferedToItem(j)}};m.on($.BUFFERED_TO_END,x);const w=S=>()=>{if(!this.getAssetPlayer(d))return;this.shouldPlay=!0;const C=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,C,S)};return m.once($.MEDIA_ENDED,w(i)),m.once($.PLAYOUT_LIMIT_REACHED,w(1/0)),m.on($.ERROR,(S,A)=>{const C=this.getAssetPlayer(d);if(A.details===De.BUFFER_STALLED_ERROR){if(C!=null&&C.media){const N=C.currentTime,k=C.duration-N;N&&e.appendInPlace&&k/C.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${d} ${e} at ${C.media.currentTime}`),x()):(this.warn(`Stalled at ${N} of ${N+k} in asset ${d} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(A,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${A.error} ${e}`)}),m.on($.DESTROYING,()=>{if(!this.getAssetPlayer(d))return;const A=new Error(`Asset player destroyed unexpectedly ${d}`),C={fatal:!0,type:jt.OTHER_ERROR,details:De.INTERSTITIAL_ASSET_ITEM_ERROR,error:A};this.handleAssetItemError(C,e,this.schedule.findEventIndex(e.identifier),i,A.message)}),this.hls.trigger($.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:i,event:e,player:m}),m}clearInterstitial(e,t){e.assetList.forEach(i=>{this.clearAssetPlayer(i.identifier,t)}),e.reset()}clearAssetPlayer(e,t){const i=this.getAssetPlayerQueueIndex(e);if(i!==-1){this.log(`clearAssetPlayer "${e}" toSegment: ${t&&td(t)}`);const r=this.playerQueue[i];this.transferMediaFromPlayer(r,t),this.playerQueue.splice(i,1),r.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,i,r,s){const{interstitial:a,assetItem:o,assetId:l}=e,c=a.assetList.length,u=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!u||u.identifier!==l)&&(u&&(this.clearAssetPlayer(u.identifier,i[r]),delete u.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${c} ${e}`),this.hls.trigger($.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:a,schedule:i.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,s)}bufferAssetPlayer(e,t){var i,r;const{interstitial:s,assetItem:a,assetId:o}=e,l=this.schedule.findEventIndex(s.identifier),c=(i=this.schedule.items)==null?void 0:i[l];if(!c)return;this.setBufferingItem(c),this.bufferingAsset=a;const u=this.getBufferingPlayer();if(u===e)return;const d=s.appendInPlace;if(d&&(u==null?void 0:u.interstitial.appendInPlace)===!1)return;const h=(u==null?void 0:u.tracks)||((r=this.detachedData)==null?void 0:r.tracks)||this.requiredTracks;if(d&&a!==this.playingAsset){if(!e.tracks)return;if(h&&!ZM(h,e.tracks)){const p=new Error(`Asset "${o}" SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),m={fatal:!0,type:jt.OTHER_ERROR,details:De.INTERSTITIAL_ASSET_ITEM_ERROR,error:p},v=s.findAssetIndex(a);this.handleAssetItemError(m,s,l,v,p.message);return}}this.transferMediaTo(e,t)}handleAssetItemError(e,t,i,r,s){if(e.details===De.BUFFER_STALLED_ERROR)return;const a=t.assetList[r]||null;let o=null;if(a){const d=this.getAssetPlayerQueueIndex(a.identifier);o=this.playerQueue[d]||null}const l=this.schedule.items,c=wi({},e,{fatal:!1,errorAction:_0(!0),asset:a,assetListIndex:r,event:t,schedule:l,scheduleIndex:i,player:o});if(this.warn(`Asset item error: ${e.error}`),this.hls.trigger($.INTERSTITIAL_ASSET_ERROR,c),!e.fatal)return;const u=new Error(s);a&&(this.playingAsset!==a&&this.clearAssetPlayer(a.identifier,null),a.error=u),t.assetList.some(d=>!d.error)?t.appendInPlace&&(t.error=u):t.error=u,this.primaryFallback(t)}primaryFallback(e){const t=e.timelineStart,i=this.effectivePlayingItem;if(this.updateSchedule(),i){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${i?td(i):"<none>"} error: ${e.error}`),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t));let r=this.timelinePos;r===-1&&(r=this.hls.startPosition);const s=this.updateItem(i,r);if(this.itemsMatch(i,s))this.clearInterstitial(e,null);else{const a=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(a)}}else this.checkStart()}onAssetListLoaded(e,t){var i;const r=t.event,s=r.identifier,a=t.assetListResponse.ASSETS;if(!this.schedule.hasEvent(s))return;const o=r.timelineStart,l=r.duration;let c=0;a.forEach((m,v)=>{const b=parseFloat(m.DURATION);this.createAsset(r,v,c,o+c,b,m.URI),c+=b}),r.duration=c,this.log(`Loaded asset-list with duration: ${c} (was: ${l}) ${r}`);const u=this.waitingItem,d=(u==null?void 0:u.event.identifier)===s;this.updateSchedule();const h=(i=this.bufferingItem)==null?void 0:i.event;if(d){var p;const m=this.schedule.findEventIndex(s),v=(p=this.schedule.items)==null?void 0:p[m];if(v){if(!this.playingItem&&this.timelinePos>v.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==m){r.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${r}`),this.primaryFallback(r);return}this.setBufferingItem(v)}this.setSchedulePosition(m)}else if((h==null?void 0:h.identifier)===s&&h.appendInPlace){const m=r.assetList[0],v=this.getAssetPlayer(m.identifier),b=this.primaryMedia;m&&v&&b&&this.bufferAssetPlayer(v,b)}}onError(e,t){switch(t.details){case De.ASSET_LIST_PARSING_ERROR:case De.ASSET_LIST_LOAD_ERROR:case De.ASSET_LIST_LOAD_TIMEOUT:{const i=t.interstitial;i&&this.primaryFallback(i);break}case De.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const RR=500;class ile extends lT{constructor(e,t,i){super(e,t,i,"subtitle-stream-controller",kt.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on($.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on($.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on($.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off($.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off($.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off($.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=$e.IDLE,this.setInterval(RR),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:r}=t;if(vs(i)&&(this.fragPrevious=i),this.state=$e.IDLE,!r)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const o=i.start;for(let c=0;c<s.length;c++)if(o>=s[c].start&&o<=s[c].end){a=s[c];break}const l=i.start+i.duration;a?a.end=l:(a={start:o,end:l},s.push(a)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:i,endOffset:r}=t;if(i===0&&r!==Number.POSITIVE_INFINITY){const s=r-1;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=s){a.shift();continue}else if(a[o].start<s)a[o].start=s;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(i,s,kt.SUBTITLE)}}onError(e,t){const i=t.frag;(i==null?void 0:i.type)===kt.SUBTITLE&&(t.details===De.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==$e.STOPPED&&(this.state=$e.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&J4(this.levels,t)){this.levels=t.map(i=>new w0(i));return}this.tracksBuffered=[],this.levels=t.map(i=>{const r=new w0(i);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,kt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==$e.STOPPED&&this.setInterval(RR)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:r,levels:s}=this,{details:a,id:o}=t;if(!s){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=s[o];if(o>=s.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(a.live||(i=l.details)!=null&&i.live){const d=this.mainDetails;if(a.deltaUpdateFailed||!d)return;const h=d.fragments[0];if(!l.details)a.hasProgramDateTime&&d.hasProgramDateTime?(mx(a,d),c=a.fragmentStart):h&&(c=h.start,z_(a,c));else{var u;c=this.alignPlaylists(a,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&h&&(c=h.start,z_(a,c))}}l.details=a,this.levelLastLoaded=l,o===r&&(this.hls.trigger($.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===$e.IDLE&&(ph(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,r=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&r!=null&&r.key&&r.iv&&jp(r.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(i),r.key.buffer,r.iv.buffer,aT(r.method)).catch(o=>{throw s.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const l=performance.now();s.trigger($.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=$e.IDLE})}}doTick(){if(!this.media){this.state=$e.IDLE;return}if(this.state===$e.IDLE){const{currentTrackId:e,levels:t}=this,i=t==null?void 0:t[e];if(!i||!t.length||!i.details||this.waitForLive(i))return;const{config:r}=this,s=this.getLoadPosition(),a=Tn.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,r.maxBufferHole),{end:o,len:l}=a,c=i.details,u=this.hls.maxBufferLength+c.levelTargetDuration;if(l>u)return;const d=c.fragments,h=d.length,p=c.edge;let m=null;const v=this.fragPrevious;if(o<p){const w=r.maxFragLookUpTolerance,S=o>p-w?0:w;m=ph(v,d,Math.max(d[0].start,o),S),!m&&v&&v.start<d[0].start&&(m=d[0])}else m=d[h-1];if(m=this.filterReplacedPrimary(m,i.details),!m)return;const b=m.sn-c.startSN,x=d[b-1];if(x&&x.cc===m.cc&&this.fragmentTracker.getState(x)===os.NOT_LOADED&&(m=x),this.fragmentTracker.getState(m)===os.NOT_LOADED){const w=this.mapToInitFragWhenRequired(m);w&&this.loadFragment(w,i,o)}}}loadFragment(e,t,i){vs(e)?super.loadFragment(e,t,i):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new rle(this.tracksBuffered[this.currentTrackId]||[])}}class rle{constructor(e){this.buffered=void 0;const t=(i,r,s)=>{if(r=r>>>0,r>s-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${s})`);return e[r][i]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}const sle={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},lF=n=>String.fromCharCode(sle[n]||n),cl=15,Wc=100,ale={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},ole={17:2,18:4,21:6,22:8,23:10,19:13,20:15},lle={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},cle={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ule=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class dle{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i=typeof t=="function"?t():t;Wn.log(`${this.time} [${e}] ${i}`)}}}const Cf=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class cF{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const r=t[i];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class fle{constructor(){this.uchar=" ",this.penState=new cF}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class hle{constructor(e){this.chars=[],this.pos=0,this.currPenState=new cF,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Wc;t++)this.chars.push(new fle);this.logger=e}equals(e){for(let t=0;t<Wc;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Wc;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Wc;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Wc&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Wc)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=lF(e);if(this.pos>=Wc){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Wc;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<Wc;i++){const r=this.chars[i].uchar;r!==" "&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class jS{constructor(e){this.rows=[],this.currRow=cl-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<cl;t++)this.rows.push(new hle(e));this.logger=e}reset(){for(let e=0;e<cl;e++)this.rows[e].clear();this.currRow=cl-1}equals(e){let t=!0;for(let i=0;i<cl;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<cl;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<cl;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+ar(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<cl;o++)this.rows[o].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[s].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(a.rows[s+c])}}this.currRow=t;const i=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);i.setCursor(e.indent),e.color=i.chars[a].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+ar(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",r=-1;for(let s=0;s<cl;s++){const a=this.rows[s].getTextString();a&&(r=s+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?i="["+t.join(" | ")+"]":i=t.join(`
`)),i}getTextAndFormat(){return this.rows}}class PR{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new jS(i),this.nonDisplayedMemory=new jS(i),this.lastOutputScreen=new jS(i),this.currRollUpRow=this.displayedMemory.rows[cl-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[cl-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[i]}this.logger.log(2,"MIDROW: "+ar(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class NR{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=gle(),this.logger=void 0;const r=this.logger=new dle;this.channels=[null,new PR(e,t,r),new PR(e+1,i,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const r=t[i]&127,s=t[i+1]&127;let a=!1,o=null;if(r===0&&s===0)continue;this.logger.log(3,()=>"["+Cf([t[i],t[i+1]])+"] -> ("+Cf([r,s])+")");const l=this.cmdHistory;if(r>=16&&r<=31){if(ple(r,s,l)){Nv(null,null,l),this.logger.log(3,()=>"Repeated command ("+Cf([r,s])+") is dropped");continue}Nv(r,s,this.cmdHistory),a=this.parseCmd(r,s),a||(a=this.parseMidrow(r,s)),a||(a=this.parsePAC(r,s)),a||(a=this.parseBackgroundAttributes(r,s))}else Nv(null,null,l);if(!a&&(o=this.parseChars(r,s),o)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Cf([r,s])+" orig: "+Cf([t[i],t[i+1]]))}}parseCmd(e,t){const i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=33&&t<=35;if(!(i||r))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=s,!0}parseMidrow(e,t){let i=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[i];return r?(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Cf([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let i;const r=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,s=(e===16||e===24)&&t>=64&&t<=95;if(!(r||s))return!1;const a=e<=23?1:2;t>=64&&t<=95?i=a===1?ale[e]:lle[e]:i=a===1?ole[e]:cle[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(i,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let i;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?i=t-96:i=t-64,r.underline=(i&1)===1,i<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((i-16)/2)*4,r}parseChars(e,t){let i,r=null,s=null;if(e>=25?(i=2,s=e-8):(i=1,s=e),s>=17&&s<=19){let a;s===17?a=t+80:s===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+lF(a)+"' in channel "+i),r=[a]}else e>=32&&e<=127&&(r=t===0?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+Cf(r).join(",")),r}parseBackgroundAttributes(e,t){const i=(e===16||e===24)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=45&&t<=47;if(!(i||r))return!1;let s;const a={};e===16||e===24?(s=Math.floor((t-32)/2),a.background=ule[s],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Nv(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function Nv(n,e,t){t.a=n,t.b=e}function ple(n,e,t){return t.a===n&&t.b===e}function gle(){return{a:null,b:null}}var xT=function(){if(gx!=null&&gx.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const c=l.toLowerCase();return~o.indexOf(c)?c:!1}function i(o){return t(n,o)}function r(o){return t(e,o)}function s(o,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const d in u)o[d]=u[d]}return o}function a(o,l,c){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let h="",p=!1,m=o,v=l,b=c,x=null,w="",S=!0,A="auto",C="start",N=50,k="middle",R=50,U="middle";Object.defineProperty(u,"id",s({},d,{get:function(){return h},set:function(j){h=""+j}})),Object.defineProperty(u,"pauseOnExit",s({},d,{get:function(){return p},set:function(j){p=!!j}})),Object.defineProperty(u,"startTime",s({},d,{get:function(){return m},set:function(j){if(typeof j!="number")throw new TypeError("Start time must be set to a number.");m=j,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",s({},d,{get:function(){return v},set:function(j){if(typeof j!="number")throw new TypeError("End time must be set to a number.");v=j,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",s({},d,{get:function(){return b},set:function(j){b=""+j,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",s({},d,{get:function(){return x},set:function(j){x=j,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",s({},d,{get:function(){return w},set:function(j){const D=i(j);if(D===!1)throw new SyntaxError("An invalid or illegal string was specified.");w=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",s({},d,{get:function(){return S},set:function(j){S=!!j,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",s({},d,{get:function(){return A},set:function(j){if(typeof j!="number"&&j!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");A=j,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",s({},d,{get:function(){return C},set:function(j){const D=r(j);if(!D)throw new SyntaxError("An invalid or illegal string was specified.");C=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",s({},d,{get:function(){return N},set:function(j){if(j<0||j>100)throw new Error("Position must be between 0 and 100.");N=j,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",s({},d,{get:function(){return k},set:function(j){const D=r(j);if(!D)throw new SyntaxError("An invalid or illegal string was specified.");k=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",s({},d,{get:function(){return R},set:function(j){if(j<0||j>100)throw new Error("Size must be between 0 and 100.");R=j,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",s({},d,{get:function(){return U},set:function(j){const D=r(j);if(!D)throw new SyntaxError("An invalid or illegal string was specified.");U=D,this.hasBeenReset=!0}})),u.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class mle{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function uF(n){function e(i,r,s,a){return(i|0)*3600+(r|0)*60+(s|0)+parseFloat(a||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class yle{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let r=0;r<i.length;++r)if(t===i[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function dF(n,e,t,i){const r=i?n.split(i):[n];for(const s in r){if(typeof r[s]!="string")continue;const a=r[s].split(t);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const J_=new xT(0,0,""),Dv=J_.align==="middle"?"middle":"center";function vle(n,e,t){const i=n;function r(){const o=uF(n);if(o===null)throw new Error("Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,l){const c=new yle;dF(o,function(h,p){let m;switch(h){case"region":for(let v=t.length-1;v>=0;v--)if(t[v].id===p){c.set(h,t[v].region);break}break;case"vertical":c.alt(h,p,["rl","lr"]);break;case"line":m=p.split(","),c.integer(h,m[0]),c.percent(h,m[0])&&c.set("snapToLines",!1),c.alt(h,m[0],["auto"]),m.length===2&&c.alt("lineAlign",m[1],["start",Dv,"end"]);break;case"position":m=p.split(","),c.percent(h,m[0]),m.length===2&&c.alt("positionAlign",m[1],["start",Dv,"end","line-left","line-right","auto"]);break;case"size":c.percent(h,p);break;case"align":c.alt(h,p,["start",Dv,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&J_.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",Dv);let d=c.get("position","auto");d==="auto"&&J_.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=r(),a(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.slice(3),a(),e.endTime=r(),a(),s(n,e)}function fF(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class xle{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new mle,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function i(){let s=t.buffer,a=0;for(s=fF(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const o=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,t.buffer=s.slice(a),o}function r(s){dF(s,function(a,o){},/:/)}try{let s="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=i();const o=s.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:s=i(),t.state){case"HEADER":/:/.test(s)?r(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new xT(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{vle(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=s.indexOf("-->")!==-1;if(!s||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const ble=/\r\n|\n\r|\n|\r/g,BS=function(e,t,i=0){return e.slice(i,i+t.length)===t},Sle=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!wt(t)||!wt(i)||!wt(r)||!wt(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=60*1e3*r,t+=60*60*1e3*s,t};function bT(n,e,t){return Fm(n.toString())+Fm(e.toString())+Fm(t)}const wle=function(e,t,i){let r=e[t],s=e[r.prevCC];if(!s||!s.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=r.start-s.start,r.new=!1,r=s,s=e[r.prevCC]}e.presentationOffset=i};function _le(n,e,t,i,r,s,a){const o=new xle,l=fo(new Uint8Array(n)).trim().replace(ble,`
`).split(`
`),c=[],u=e?$ae(e.baseTime,e.timescale):0;let d="00:00.000",h=0,p=0,m,v=!0;o.oncue=function(b){const x=t[i];let w=t.ccOffset;const S=(h-u)/9e4;if(x!=null&&x.new&&(p!==void 0?w=t.ccOffset=x.start:wle(t,i,S)),S){if(!e){m=new Error("Missing initPTS for VTT MPEGTS");return}w=S-t.presentationOffset}const A=b.endTime-b.startTime,C=Po((b.startTime+w-p)*9e4,r*9e4)/9e4;b.startTime=Math.max(C,0),b.endTime=Math.max(C+A,0);const N=b.text.trim();b.text=decodeURIComponent(encodeURIComponent(N)),b.id||(b.id=bT(b.startTime,b.endTime,N)),b.endTime>0&&c.push(b)},o.onparsingerror=function(b){m=b},o.onflush=function(){if(m){a(m);return}s(c)},l.forEach(b=>{if(v)if(BS(b,"X-TIMESTAMP-MAP=")){v=!1,b.slice(16).split(",").forEach(x=>{BS(x,"LOCAL:")?d=x.slice(6):BS(x,"MPEGTS:")&&(h=parseInt(x.slice(7)))});try{p=Sle(d)/1e3}catch(x){m=x}return}else b===""&&(v=!1);o.parse(b+`
`)}),o.flush()}const US="stpp.ttml.im1t",hF=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,pF=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Ele={left:"start",center:"center",right:"end",start:"start",end:"end"};function DR(n,e,t,i){const r=hn(new Uint8Array(n),["mdat"]);if(r.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const s=r.map(o=>fo(o)),a=Uae(e.baseTime,1,e.timescale);try{s.forEach(o=>t(Tle(o,a)))}catch(o){i(o)}}function Tle(n,e){const r=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((d,h)=>(d[h]=r.getAttribute(`ttp:${h}`)||s[h],d),{}),o=r.getAttribute("xml:space")!=="preserve",l=OR($S(r,"styling","style")),c=OR($S(r,"layout","region")),u=$S(r,"body","[begin]");return[].map.call(u,d=>{const h=gF(d,o);if(!h||!d.hasAttribute("begin"))return null;const p=WS(d.getAttribute("begin"),a),m=WS(d.getAttribute("dur"),a);let v=WS(d.getAttribute("end"),a);if(p===null)throw MR(d);if(v===null){if(m===null)throw MR(d);v=p+m}const b=new xT(p-e,v-e,h);b.id=bT(b.startTime,b.endTime,b.text);const x=c[d.getAttribute("region")],w=l[d.getAttribute("style")],S=Ale(x,w,l),{textAlign:A}=S;if(A){const C=Ele[A];C&&(b.lineAlign=C),b.align=A}return wi(b,S),b}).filter(d=>d!==null)}function $S(n,e,t){const i=n.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function OR(n){return n.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function gF(n,e){return[].slice.call(n.childNodes).reduce((t,i,r)=>{var s;return i.nodeName==="br"&&r?t+`
`:(s=i.childNodes)!=null&&s.length?gF(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function Ale(n,e,t){const i="http://www.w3.org/ns/ttml#styling";let r=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(r=t[a]),s.reduce((o,l)=>{const c=HS(e,i,l)||HS(n,i,l)||HS(r,i,l);return c&&(o[l]=c),o},{})}function HS(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function MR(n){return new Error(`Could not parse ttml timestamp ${n}`)}function WS(n,e){if(!n)return null;let t=uF(n);return t===null&&(hF.test(n)?t=Lle(n,e):pF.test(n)&&(t=Cle(n,e))),t}function Lle(n,e){const t=hF.exec(n),i=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+i/e.frameRate}function Cle(n,e){const t=pF.exec(n),i=Number(t[1]);switch(t[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class Ov{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class Ile{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=jR(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on($.FRAG_LOADING,this.onFragLoading,this),e.on($.FRAG_LOADED,this.onFragLoaded,this),e.on($.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on($.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on($.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on($.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off($.FRAG_LOADING,this.onFragLoading,this),e.off($.FRAG_LOADED,this.onFragLoaded,this),e.off($.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off($.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off($.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off($.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Ov(this,"textTrack1"),t=new Ov(this,"textTrack2"),i=new Ov(this,"textTrack3"),r=new Ov(this,"textTrack4");this.cea608Parser1=new NR(1,e,t),this.cea608Parser2=new NR(3,i,r)}addCues(e,t,i,r,s){let a=!1;for(let o=s.length;o--;){const l=s[o],c=kle(l[0],l[1],t,i);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],i),a=!0,c/(i-t)>.5))return}if(a||s.push([t,i]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,i,r)}else{const o=this.Cues.newCue(null,t,i,r);this.hls.trigger($.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:r,timescale:s}){const{unparsedVttFrags:a}=this;i===kt.MAIN&&(this.initPTS[t.cc]={baseTime:r,timescale:s}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.onFragLoaded($.FRAG_LOADED,o)}))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let r=0;r<i.textTracks.length;r++){const s=i.textTracks[r];if(FR(s,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:r}=this,{label:s,languageCode:a}=t[e],o=this.getExistingTrack(s,a);if(o)i[e]=o,Ap(i[e]),sF(i[e],r);else{const l=this.createTextTrack("captions",s,a);l&&(l[e]=!0,i[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,r={_id:e,label:i,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger($.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,i){const r=this.media;if(r)return r.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const i=!!t.transferMedia;if(this.media=null,i)return;const{captionsTracks:r}=this;Object.keys(r).forEach(s=>{Ap(r[s]),delete r[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=jR(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)Ap(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],r=i.some(s=>s.textCodec===US);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(J4(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const a=this.media,o=a?f1(a.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(o){let d=null;for(let h=0;h<o.length;h++)if(o[h]&&FR(o[h],l)){d=o[h],o[h]=null;break}d&&(u=d)}if(u)Ap(u);else{const d=mF(l);u=this.createTextTrack(d,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),o!=null&&o.length){const l=o.filter(c=>c!==null).map(c=>c.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger($.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{const r=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!r)return;const s=`textTrack${r[1]}`,a=this.captionsProperties[s];a&&(a.label=i.name,i.lang&&(a.languageCode=i.lang),a.media=i)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===kt.MAIN){var i,r;const{cea608Parser1:s,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:c}=t.frag,u=(i=(r=t.part)==null?void 0:r.index)!=null?i:-1;s&&a&&(c!==o+1||c===o&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,t){const{frag:i,payload:r}=t;if(i.type===kt.SUBTITLE)if(r.byteLength){const s=i.decryptdata,a="stats"in t;if(s==null||!s.encrypted||a){const o=this.tracks[i.level],l=this.vttCCs;l[i.cc]||(l[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),o&&o.textCodec===US?this._parseIMSC1(i,r):this._parseVTTs(t)}}else this.hls.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;DR(t,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),i.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{i.logger.log(`Failed to parse IMSC1: ${r}`),i.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var t;const{frag:i,payload:r}=e,{initPTS:s,unparsedVttFrags:a}=this,o=s.length-1;if(!s[i.cc]&&o===-1){a.push(e);return}const l=this.hls,c=(t=i.initSegment)!=null&&t.data?$o(i.initSegment.data,new Uint8Array(r)).buffer:r;_le(c,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,u=>{this._appendCues(u,i.level),l.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(i,r),l.logger.log(`Failed to parse VTT cue: ${u}`),!(d&&o>i.cc)&&l.trigger($.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:u})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||DR(t,this.initPTS[e.cc],()=>{i.textCodec=US,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||r.mode==="disabled")return;e.forEach(s=>aF(r,s))}else{const r=this.tracks[t];if(!r)return;const s=r.default?"default":"subtitles"+t;i.trigger($.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===kt.SUBTITLE&&this.onFragLoaded($.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:i,samples:r}=t;if(!(i.type===kt.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let s=0;s<r.length;s++){const a=r[s].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(a);this.cea608Parser1.addData(r[s].pts,o[0]),this.cea608Parser2.addData(r[s].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:r,type:s}){const{media:a}=this;if(!(!a||a.currentTime<i)){if(!s||s==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>X_(o[l],t,i))}if(this.config.renderTextTracksNatively&&t===0&&r!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>X_(o[l],t,r))}}}extractCea608Data(e){const t=[[],[]],i=e[0]&31;let r=2;for(let s=0;s<i;s++){const a=e[r++],o=127&e[r++],l=127&e[r++];if(o===0&&l===0)continue;if((4&a)!==0){const u=3&a;(u===0||u===1)&&(t[u].push(o),t[u].push(l))}}return t}}function mF(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function FR(n,e){return!!n&&n.kind===mF(e)&&Y_(e,n)}function kle(n,e,t,i){return Math.min(e,i)-Math.max(n,t)}function jR(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const Rle=/\s/,Ple={newCue(n,e,t,i){const r=[];let s,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<i.rows.length;h++)if(s=i.rows[h],o=!0,l=0,c="",!s.isEmpty()){var d;for(let v=0;v<s.chars.length;v++)Rle.test(s.chars[v].uchar)&&o?l++:(c+=s.chars[v].uchar,o=!1);s.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const p=fF(c.trim()),m=bT(e,t,p);n!=null&&(d=n.cues)!=null&&d.getCueById(m)||(a=new u(e,t,p),a.id=m,a.line=h+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),r.push(a))}return n&&r.length&&(r.sort((h,p)=>h.line==="auto"||p.line==="auto"?0:h.line>8&&p.line>8?p.line-h.line:h.line-p.line),r.forEach(h=>aF(n,h))),r}};function Nle(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const Dle=/(\d+)-(\d+)\/(\d+)/;class BR{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||jle,this.controller=new self.AbortController,this.stats=new eT}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const s=Ole(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=l&&wt(l)?l:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},t.timeout),(L0(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var h;this.response=this.loader=d;const p=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},c-(p-r.loading.start)),!d.ok){const{status:v,statusText:b}=d;throw new Ble(b||"fetch, bad network response",v,d)}r.loading.first=p,r.total=Fle(d.headers)||r.total;const m=(h=this.callbacks)==null?void 0:h.onProgress;return m&&wt(t.highWaterMark)?this.loadProgressively(d,r,e,t.highWaterMark,m):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var h,p;const m=this.response;if(!m)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const v=d[o];v&&(r.loaded=r.total=v);const b={url:m.url,data:d,code:m.status},x=(h=this.callbacks)==null?void 0:h.onProgress;x&&!wt(t.highWaterMark)&&x(r,e,d,m),(p=this.callbacks)==null||p.onSuccess(b,r,e,m)}).catch(d=>{var h;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const p=d&&d.code||0,m=d?d.message:null;(h=this.callbacks)==null||h.onError({code:p,text:m},e,d?d.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,r=0,s){const a=new R4,o=e.body.getReader(),l=()=>o.read().then(c=>{if(c.done)return a.dataLength&&s(t,i,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const u=c.value,d=u.length;return t.loaded+=d,d<r||a.dataLength?(a.push(u),a.dataLength>=r&&s(t,i,a.flush().buffer,e)):s(t,i,u.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function Ole(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(wi({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function Mle(n){const e=Dle.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function Fle(n){const e=n.get("Content-Range");if(e){const i=Mle(e);if(wt(i))return i}const t=n.get("Content-Length");if(t)return parseInt(t)}function jle(n,e){return new self.Request(n.url,e)}class Ble extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const Ule=/^age:\s*[\d.]+\s*$/im;class yF{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new eT,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return s(i,t.url)}).catch(a=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",t.url,!0),s(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:i.status,text:a.message},t,i,r)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=i.loadPolicy;if(r)for(const o in r)e.setRequestHeader(o,r[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=s&&wt(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const r=t.readyState,s=this.config;if(!i.aborted&&r>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const c=t.status,u=t.responseType==="text"?t.responseText:null;if(c>=200&&c<300){const m=u??t.response;if(m!=null){var a,o;i.loading.end=Math.max(self.performance.now(),i.loading.first);const v=t.responseType==="arraybuffer"?m.byteLength:m.length;i.loaded=i.total=v,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first);const b=(a=this.callbacks)==null?void 0:a.onProgress;b&&b(i,e,m,t);const x={url:t.responseURL,data:m,code:c};(o=this.callbacks)==null||o.onSuccess(x,i,e,t);return}}const d=s.loadPolicy.errorRetry,h=i.retry,p={url:e.url,data:void 0,code:c};if(px(d,h,!1,p))this.retry(d);else{var l;Wn.error(`${c} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:c,text:t.statusText},e,t,i)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(px(e,t,!0))this.retry(e);else{var i;Wn.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=iT(e,i.retry),i.retry++,Wn.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Ule.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const $le={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},Hle=pi(pi({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:yF,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:use,bufferController:noe,capLevelController:yT,errorController:mse,fpsController:Voe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:b4,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,certLoadPolicy:{default:$le},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},Wle()),{},{subtitleStreamController:ile,subtitleTrackController:Koe,timelineController:Ile,audioStreamController:Jae,audioTrackController:Zae,emeController:Bp,cmcdController:Woe,contentSteeringController:Goe,interstitialsController:nle});function Wle(){return{cueHandler:Ple,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function zle(n,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=Z_(n),r=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(a=>{const o=`${a==="level"?"playlist":a}LoadPolicy`,l=e[o]===void 0,c=[];s.forEach(u=>{const d=`${a}Loading${u}`,h=e[d];if(h!==void 0&&l){c.push(d);const p=i[o].default;switch(e[o]={default:p},u){case"TimeOut":p.maxLoadTimeMs=h,p.maxTimeToFirstByteMs=h;break;case"MaxRetry":p.errorRetry.maxNumRetry=h,p.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":p.errorRetry.retryDelayMs=h,p.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":p.errorRetry.maxRetryDelayMs=h,p.timeoutRetry.maxRetryDelayMs=h;break}}}),c.length&&t.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${o}": ${ar(e[o])}`)}),pi(pi({},i),e)}function Z_(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(Z_):Object.keys(n).reduce((e,t)=>(e[t]=Z_(n[t]),e),{}):n}function Gle(n,e){const t=n.loader;t!==BR&&t!==yF?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):Nle()&&(n.loader=BR,n.progressive=!0,n.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const h1=2,Vle=.1,Yle=.05,qle=100;class Kle extends y4{constructor(e,t){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var i;(i=this.media)!=null&&i.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var i;this.ended=((i=this.media)==null?void 0:i.currentTime)||1,this.hls.trigger($.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(qle),this.mediaSource=t.mediaSource;const i=this.media=t.media;ou(i,"playing",this.onMediaPlaying),ou(i,"waiting",this.onMediaWaiting),ou(i,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:i}=this;i&&(oc(i,"playing",this.onMediaPlaying),oc(i,"waiting",this.onMediaWaiting),oc(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var i,r;const s=(i=this.hls)==null?void 0:i.config;if(!s)return;const{media:a,stalled:o}=this;if(!a)return;const{seeking:l}=a,c=this.seeking&&!l,u=!this.seeking&&l,d=a.paused&&!l||a.ended||a.playbackRate===0;if(this.seeking=l,e!==t){t&&(this.ended=0),this.moved=!0,l||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!d&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(u||c){c&&this.stallResolved(e);return}if(d){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger($.MEDIA_ENDED,{stalled:!1}));return}if(!Tn.getBuffered(a).length){this.nudgeRetry=0;return}const h=Tn.bufferInfo(a,e,0),p=h.nextStart||0,m=this.fragmentTracker;if(l&&m&&this.hls){const N=UR(this.hls.inFlightFragments,e),k=h.len>h1,R=!p||N||p-e>h1&&!m.getPartialFragment(e);if(k||R)return;this.moved=!1}const v=(r=this.hls)==null?void 0:r.latestLevelDetails;if(!this.moved&&this.stalled!==null&&m){if(!(h.len>0)&&!p)return;const k=Math.max(p,h.start||0)-e,U=!!(v!=null&&v.live)?v.targetduration*2:h1,j=m.getPartialFragment(e);if(k>0&&(k<=U||j)){a.paused||this._trySkipBufferHole(j);return}}const b=s.detectStallWithCurrentTimeMs,x=self.performance.now(),w=this.waiting;if(o===null){w>0&&x-w<b?this.stalled=w:this.stalled=x;return}const S=x-o;if(!l&&(S>=b||w)&&this.hls){var A;if(((A=this.mediaSource)==null?void 0:A.readyState)==="ended"&&!(v!=null&&v.live)&&Math.abs(e-((v==null?void 0:v.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger($.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(h),!this.media||!this.hls)return}const C=Tn.bufferInfo(a,e,s.maxBufferHole);this._tryFixBufferStall(C,S)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const i=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger($.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var i;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(i=this.buffered.audio)!=null&&i.length&&r&&r.length>1&&e>r.end(0)){const s=Tn.bufferedInfo(Tn.timeRangesToArray(this.buffered.audio),e,0);if(s.len>1&&t>=s.start){const a=Tn.timeRangesToArray(r),o=Tn.bufferedInfo(a,t,0).bufferedIndex;if(o>-1&&o<a.length-1){const l=Tn.bufferedInfo(a,e,0).bufferedIndex,c=a[o].end,u=a[o+1].start;if((l===-1||l>o)&&u-c<1&&e-c<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${u} buffered index: ${l}`);this.warn(d.message),this.media.currentTime+=1e-6;const h=this.fragmentTracker.getPartialFragment(e)||void 0,p=Tn.bufferInfo(this.media,e,0);this.hls.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:h,buffer:p.len,bufferInfo:p})}}}}}_tryFixBufferStall(e,t){var i,r;const{fragmentTracker:s,media:a}=this,o=(i=this.hls)==null?void 0:i.config;if(!a||!s||!o)return;const l=a.currentTime,c=(r=this.hls)==null?void 0:r.latestLevelDetails,u=s.getPartialFragment(l);if((u||c!=null&&c.live&&l<c.fragmentStart)&&(this._trySkipBufferHole(u)||!this.media))return;const d=e.buffered;(d&&d.length>1&&e.len>o.maxBufferHole||e.nextStart&&e.nextStart-l<o.maxBufferHole)&&(t>o.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}_reportStall(e){const{hls:t,media:i,stallReported:r,stalled:s}=this;if(!r&&s!==null&&i&&t){this.stallReported=!0;const a=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${ar(e)})`);this.warn(a.message),t.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:s}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:i,media:r}=this,s=(t=this.hls)==null?void 0:t.config;if(!r||!i||!s)return 0;const a=r.currentTime,o=Tn.bufferInfo(r,a,0),l=a<o.start?o.start:o.nextStart;if(l&&this.hls){const u=o.len<=s.maxBufferHole,d=o.len>0&&o.len<1&&r.readyState<3,h=l-a;if(h>0&&(u||d)){if(h>s.maxBufferHole){let m=!1;if(a===0){const v=i.getAppendedFrag(0,kt.MAIN);v&&l<v.end&&(m=!0)}if(!m){const v=e||i.getAppendedFrag(a,kt.MAIN);if(v){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||UR(this.hls.inFlightFragments,l))return 0;let x=!1,w=v.end;for(;w<l;){const S=i.getPartialFragment(w);if(S)w+=S.duration;else{x=!0;break}}if(x)return 0}}}const p=Math.max(l+Yle,a+Vle);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${p}`),this.moved=!0,r.currentTime=p,!(e!=null&&e.gap)){const m=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${p}`);this.hls.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:m,reason:m.message,frag:e||void 0,buffer:o.len,bufferInfo:o})}return p}}return 0}_tryNudgeBuffer(e){const{hls:t,media:i,nudgeRetry:r}=this,s=t==null?void 0:t.config;if(!i||!s)return 0;const a=i.currentTime;if(this.nudgeRetry++,r<s.nudgeMaxRetry){const o=a+(r+1)*s.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(l.message),i.currentTime=o,t.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${a} after ${s.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function UR(n,e){const t=$R(n.main);if(t&&t.start<=e)return t;const i=$R(n.audio);return i&&i.start<=e?i:null}function $R(n){if(!n)return null;switch(n.state){case $e.IDLE:case $e.STOPPED:case $e.ENDED:case $e.ERROR:return null}return n.frag}const Xle=.25;function e5(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function HR(n,e,t,i,r){let s=new n(e,t,"");try{s.value=i,r&&(s.type=r)}catch{s=new n(e,t,ar(r?pi({type:r},i):i))}return s}const Mv=(()=>{const n=e5();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Qle(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class Jle{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger($.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off($.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off($.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,t){var i;this.media=t.media,((i=t.overrides)==null?void 0:i.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&Ap(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if(i.kind==="metadata"&&i.label==="id3")return sF(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:r}}}=this;if(!i&&!r)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=e5();if(a)for(let o=0;o<s.length;o++){const l=s[o].type;if(l===ao.emsg&&!i||!r)continue;const c=B4(s[o].data);if(c){const u=s[o].pts;let d=u+s[o].duration;d>Mv&&(d=Mv),d-u<=0&&(d=u+Xle);for(let p=0;p<c.length;p++){const m=c[p];if(!U4(m)){this.updateId3CueEnds(u,l);const v=HR(a,u,d,m,l);v&&this.id3Track.addCue(v)}}}}}updateId3CueEnds(e,t){var i;const r=(i=this.id3Track)==null?void 0:i.cues;if(r)for(let s=r.length;s--;){const a=r[s];a.type===t&&a.startTime<e&&a.endTime===Mv&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:r}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(s&&(o||l)){let c;r==="audio"?c=u=>u.type===ao.audioId3&&l:r==="video"?c=u=>u.type===ao.emsg&&o:c=u=>u.type===ao.audioId3&&l||u.type===ao.emsg&&o,X_(s,t,i,c)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:i}=this,{dateRanges:r}=e,s=Object.keys(r);let a=this.dateRangeCuesAppended;if(i&&t){var o;if((o=i.cues)!=null&&o.length){const u=Object.keys(a).filter(d=>!s.includes(d));for(let d=u.length;d--;){const h=u[d],p=a[h].cues;delete a[h],Object.keys(p).forEach(m=>{try{const v=p[m];v.removeEventListener("enter",this.onEventCueEnter),i.removeCue(v)}catch{}})}}else a=this.dateRangeCuesAppended={}}const l=e.fragments[e.fragments.length-1];if(s.length===0||!wt(l==null?void 0:l.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const c=e5();for(let u=0;u<s.length;u++){const d=s[u],h=r[d],p=h.startTime,m=a[d],v=(m==null?void 0:m.cues)||{};let b=(m==null?void 0:m.durationKnown)||!1,x=Mv;const{duration:w,endDate:S}=h;if(S&&w!==null)x=p+w,b=!0;else if(h.endOnNext&&!b){const C=s.reduce((N,k)=>{if(k!==h.id){const R=r[k];if(R.class===h.class&&R.startDate>h.startDate&&(!N||h.startDate<N.startDate))return R}return N},null);C&&(x=C.startTime,b=!0)}const A=Object.keys(h.attr);for(let C=0;C<A.length;C++){const N=A[C];if(!Ise(N))continue;const k=v[N];if(k)b&&!m.durationKnown?k.endTime=x:Math.abs(k.startTime-p)>.01&&(k.startTime=p,k.endTime=x);else if(c){let R=h.attr[N];kse(N)&&(R=Qle(R));const j=HR(c,p,x,{key:N,data:R},ao.dateRange);j&&(j.id=d,this.id3Track.addCue(j),v[N]=j,this.hls.config.interstitialsController&&(N==="X-ASSET-LIST"||N==="X-ASSET-URL")&&j.addEventListener("enter",this.onEventCueEnter))}}a[d]={cues:v,dateRange:h,durationKnown:b}}}}class Zle{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,i=this.levelDetails;if(!t||!i)return;this.currentTime=t.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:a}=this.config;if(!s||a===1||!i.live)return;const o=this.targetLatency;if(o===null)return;const l=r-o,c=Math.min(this.maxLatency,o+i.targetduration);if(l<c&&l>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,a)),h=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,p=Math.min(d,Math.max(1,h));this.changeMediaPlaybackRate(t,p)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:i,targetduration:r}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let c=o&&i||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:a*r);const u=r;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,u)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const i=this.levelDetails;if(i===null)return null;const r=i.edge,s=e-t-this.edgeStalled,a=r-i.totalduration,o=r-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(a,s),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on($.MEDIA_ATTACHED,this.onMediaAttached,this),e.on($.MEDIA_DETACHING,this.onMediaDetaching,this),e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.LEVEL_UPDATED,this.onLevelUpdated,this),e.on($.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off($.MEDIA_ATTACHED,this.onMediaAttached,this),e.off($.MEDIA_DETACHING,this.onMediaDetaching,this),e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.LEVEL_UPDATED,this.onLevelUpdated,this),e.off($.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var i;t.details===De.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(i=this.levelDetails)!=null&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var i,r;e.playbackRate!==t&&((i=this.hls)==null||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(r=this.targetLatency)==null?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class ece extends mT{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.MANIFEST_LOADED,this.onManifestLoaded,this),e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this),e.on($.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.MANIFEST_LOADED,this.onManifestLoaded,this),e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this),e.off($.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,r=[],s={},a={};let o=!1,l=!1,c=!1;t.levels.forEach(u=>{var d;const h=u.attrs;let{audioCodec:p,videoCodec:m}=u;p&&(u.audioCodec=p=ux(p,i)||void 0),((d=m)==null?void 0:d.indexOf("avc1"))===0&&(m=u.videoCodec=Xre(m));const{width:v,height:b,unknownCodecs:x}=u;let w=x?x.length:0;if(x)for(let D=w;D--;){const O=x[D];this.isAudioSupported(O)?(u.audioCodec=p=p?`${p},${O}`:O,w--,Jp.audio[p.substring(0,4)]=2):this.isVideoSupported(O)&&(u.videoCodec=m=m?`${m},${O}`:O,w--,Jp.video[m.substring(0,4)]=2)}if(o||(o=!!(v&&b)),l||(l=!!m),c||(c=!!p),w||p&&!this.isAudioSupported(p)||m&&!this.isVideoSupported(m)){this.log(`Some or all CODECS not supported "${h.CODECS}"`);return}const{CODECS:S,"FRAME-RATE":A,"HDCP-LEVEL":C,"PATHWAY-ID":N,RESOLUTION:k,"VIDEO-RANGE":R}=h,j=`${`${N||"."}-`}${u.bitrate}-${k}-${A}-${S}-${R}-${C}`;if(s[j])if(s[j].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const D=a[j]+=1;u.attrs["PATHWAY-ID"]=new Array(D+1).join(".");const O=this.createLevel(u);s[j]=O,r.push(O)}else s[j].addGroupId("audio",h.AUDIO),s[j].addGroupId("text",h.SUBTITLES);else{const D=this.createLevel(u);s[j]=D,a[j]=1,r.push(D)}}),this.filterAndSortMediaOptions(r,t,o,l,c)}createLevel(e){const t=new w0(e),i=e.supplemental;if(i!=null&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){const r=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(r.message),t.supportedResult=h4(r,[])}return t}isAudioSupported(e){return B_(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return B_(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,i,r,s){let a=[],o=[],l=e;if((i||r)&&s&&(l=l.filter(({videoCodec:b,videoRange:x,width:w,height:S})=>(!!b||!!(w&&S))&&tse(x))),l.length===0){Promise.resolve().then(()=>{if(this.hls){let b="no level with compatible codecs found in manifest",x=b;t.levels.length&&(x=`one or more CODECS in variant not supported: ${ar(t.levels.map(S=>S.attrs.CODECS).filter((S,A,C)=>C.indexOf(S)===A))}`,this.warn(x),b+=` (${x})`);const w=new Error(b);this.hls.trigger($.ERROR,{type:jt.MEDIA_ERROR,details:De.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:w,reason:x})}});return}t.audioTracks&&(a=t.audioTracks.filter(b=>!b.audioCodec||this.isAudioSupported(b.audioCodec)),WR(a)),t.subtitles&&(o=t.subtitles,WR(o));const c=l.slice(0);l.sort((b,x)=>{if(b.attrs["HDCP-LEVEL"]!==x.attrs["HDCP-LEVEL"])return(b.attrs["HDCP-LEVEL"]||"")>(x.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&b.height!==x.height)return b.height-x.height;if(b.frameRate!==x.frameRate)return b.frameRate-x.frameRate;if(b.videoRange!==x.videoRange)return dx.indexOf(b.videoRange)-dx.indexOf(x.videoRange);if(b.videoCodec!==x.videoCodec){const w=Mk(b.videoCodec),S=Mk(x.videoCodec);if(w!==S)return S-w}if(b.uri===x.uri&&b.codecSet!==x.codecSet){const w=cx(b.codecSet),S=cx(x.codecSet);if(w!==S)return S-w}return b.averageBitrate!==x.averageBitrate?b.averageBitrate-x.averageBitrate:0});let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let b=0;b<c.length;b++)if(c[b].pathwayId===l[0].pathwayId){u=c[b];break}}this._levels=l;for(let b=0;b<l.length;b++)if(l[b]===u){var d;this._firstLevel=b;const x=u.bitrate,w=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${x}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const S=Math.min(x,this.hls.config.abrEwmaDefaultEstimateMax);S>w&&w===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=S)}break}const h=s&&!r,p=this.hls.config,m=!!(p.audioStreamController&&p.audioTrackController),v={levels:l,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:r,altAudio:m&&!h&&a.some(b=>!!b.url)};this.hls.trigger($.MANIFEST_PARSED,v)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger($.ERROR,{type:jt.OTHER_ERROR,details:De.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,r=this.currentLevel,s=r?r.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,i===e&&r&&s===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${i}${s?" with Pathway "+s:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger($.LEVEL_SWITCHING,l);const c=a.details;if(!c||c.live){const u=this.switchParams(a.uri,r==null?void 0:r.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),i=e.filter(r=>t.indexOf(r)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=i}}onError(e,t){t.fatal||!t.context||t.context.type===Pn.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===kt.MAIN){const i=t.elementaryStreams;if(!Object.keys(i).some(s=>!!i[s]))return;const r=this._levels[t.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var i;const{level:r,details:s}=t,a=t.levelInfo;if(!a){var o;this.warn(`Invalid level index ${r}`),(o=t.deliveryDirectives)!=null&&o.skip&&(s.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let l=a.details;l===t.details&&l.advanced&&(l=void 0),this.playlistLoaded(r,t,l)}else(i=t.deliveryDirectives)!=null&&i.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=this.getUrlWithDirectives(e.uri,t),r=this.currentLevelIndex,s=e.attrs["PATHWAY-ID"],a=e.details,o=a==null?void 0:a.age;this.log(`Loading level index ${r}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${s?" Pathway "+s:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${i}`),this.hls.trigger($.LEVEL_LOADING,{url:i,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const i=this._levels.filter((s,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(o=>o.level=-1)),!1));C4(i),this._levels=i,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=i.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger($.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger($.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function WR(n){const e={};n.forEach(t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}function vF(){return self.SourceBuffer||self.WebKitSourceBuffer}function xF(){if(!$d())return!1;const e=vF();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function tce(){if(!xF())return!1;const n=$d();return typeof(n==null?void 0:n.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(S0(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(S0(e,"audio"))))}function nce(){var n;const e=vF();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const ice=100;class rce extends lT{constructor(e,t,i){super(e,t,i,"stream-controller",kt.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const r=this.media,s=r?r.currentTime:null;if(s===null||!wt(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;const a=this.getFwdBufferInfoAtPos(r,s,kt.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on($.MANIFEST_PARSED,this.onManifestParsed,this),e.on($.LEVEL_LOADING,this.onLevelLoading,this),e.on($.LEVEL_LOADED,this.onLevelLoaded,this),e.on($.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on($.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on($.BUFFER_CREATED,this.onBufferCreated,this),e.on($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on($.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off($.MANIFEST_PARSED,this.onManifestParsed,this),e.off($.LEVEL_LOADED,this.onLevelLoaded,this),e.off($.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off($.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off($.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off($.BUFFER_CREATED,this.onBufferCreated,this),e.off($.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off($.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:i,hls:r}=this;if(this.stopLoad(),this.setInterval(ice),this.level=-1,!this.startFragRequested){let s=r.startLevel;s===-1&&(r.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=r.firstAutoLevel),r.nextLoadLevel=s,this.level=r.loadLevel,this._hasEnoughToStart=!!t}i>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=$e.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=$e.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case $e.WAITING_LEVEL:{const{levels:t,level:i}=this,r=t==null?void 0:t[i],s=r==null?void 0:r.details;if(s&&(!s.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(s))break;this.state=$e.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=$e.IDLE;break}break}case $e.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),i=this.retryDate;if(!i||t>=i||(e=this.media)!=null&&e.seeking){const{levels:r,level:s}=this,a=r==null?void 0:r[s];this.resetStartWhenNotLoaded(a||null),this.state=$e.IDLE}}break}this.state===$e.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:r}=this;if(t===null||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[s]))return;const a=i[s],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const v={};this.altAudio===2&&(v.type="video"),this.hls.trigger($.BUFFER_EOS,v),this.state=$e.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=a.details;if(!c||this.state===$e.WAITING_LEVEL||this.waitForLive(a)){this.level=s,this.state=$e.WAITING_LEVEL,this.startFragRequested=!1;return}const u=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let p=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&p&&vs(p)&&this.fragmentTracker.getState(p)!==os.OK){var m;const b=((m=this.backtrackFragment)!=null?m:p).sn-c.startSN,x=c.fragments[b-1];x&&p.cc===x.cc&&(p=x,this.fragmentTracker.removeFragment(x))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,h)){if(!p.gap){const b=this.audioOnly&&!this.altAudio?xi.AUDIO:xi.VIDEO,x=(b===xi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;x&&this.afterBufferFlushed(x,b,kt.MAIN)}p=this.getNextFragmentLoopLoading(p,c,o,kt.MAIN,d)}p&&(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,a,h))}loadFragment(e,t,i){const r=this.fragmentTracker.getState(e);r===os.NOT_LOADED||r===os.PARTIAL?vs(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,i):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,kt.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let i;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<s.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],c=this.fragLastKbps;c&&this.fragCurrent?i=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:i=0}else i=0;const a=this.getBufferedFrag(t.currentTime+i);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,u=Math.max(a.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case $e.KEY_LOADING:case $e.FRAG_LOADING:case $e.FRAG_LOADING_WAITING_RETRY:case $e.PARSING:case $e.PARSED:this.state=$e.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;ou(i,"playing",this.onMediaPlaying),ou(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:i}=this;i&&(oc(i,"playing",this.onMediaPlaying),oc(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger($.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let i=!1,r=!1;t.levels.forEach(s=>{const a=s.audioCodec;a&&(i=i||a.indexOf("mp4a.40.2")!==-1,r=r||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=i&&r&&!nce(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==$e.IDLE)return;const r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=$e.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:r,startFragRequested:s}=this,a=t.level,o=t.details,l=o.totalduration;if(!r){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${l}`);const c=t.levelInfo,u=this.fragCurrent;u&&(this.state===$e.FRAG_LOADING||this.state===$e.FRAG_LOADING_WAITING_RETRY)&&u.level!==t.level&&u.loader&&this.abortCurrentFrag();let d=0;if(o.live||(i=c.details)!=null&&i.live){var h;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,c.details,(h=this.levelLastLoaded)==null?void 0:h.details)}if(c.details=o,this.levelLastLoaded=c,s||this.setStartPosition(o,d),this.hls.trigger($.LEVEL_UPDATED,{details:o,level:a}),this.state===$e.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=$e.IDLE}s&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const r=this.hls.liveSyncPosition,s=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,l=s>=a-t.maxFragLookUpTolerance&&s<=o;if(r!==null&&i.duration>r&&(s<r||!l)){const c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!l&&i.readyState<4||s<o-c)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),i.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${r.toFixed(3)}`),i.currentTime=r))}}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:r,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const o=a[i.level];if(!o){this.warn(`Level ${i.level} not found on progress`);return}const l=o.details;if(!l){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const c=o.videoCodec,u=l.PTSKnown||!l.live,d=(t=i.initSegment)==null?void 0:t.data,h=this._getAudioCodec(o),p=this.transmuxer=this.transmuxer||new Q4(this.hls,kt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=r?r.index:-1,v=m!==-1,b=new sT(i.level,i.sn,i.stats.chunkCount,s.byteLength,m,v),x=this.initPTS[i.cc];p.push(s,d,h,c,i,r,l.totalduration,u,b,x)}onAudioTrackSwitching(e,t){const i=this.hls,r=this.altAudio===2;if(fx(t.url,i))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r){this.fragmentTracker.removeAllFragments(),i.once($.BUFFER_FLUSHED,()=>{var a;(a=this.hls)==null||a.trigger($.AUDIO_TRACK_SWITCHED,t)}),i.trigger($.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}i.trigger($.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=fx(t.url,this.hls);if(i){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,t){const i=t.tracks;let r,s,a=!1;for(const o in i){const l=i[o];if(l.id==="main"){if(s=o,r=l,o==="video"){const c=i[o];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&r?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:r}=t,s=i.type===kt.MAIN;if(s){if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===$e.PARSED&&(this.state=$e.IDLE);return}const o=r?r.stats:i.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),vs(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,r)}const a=this.media;a&&(!this._hasEnoughToStart&&Tn.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var i;if(t.fatal){this.state=$e.ERROR;return}switch(t.details){case De.FRAG_GAP:case De.FRAG_PARSING_ERROR:case De.FRAG_DECRYPT_ERROR:case De.FRAG_LOAD_ERROR:case De.FRAG_LOAD_TIMEOUT:case De.KEY_LOAD_ERROR:case De.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(kt.MAIN,t);break;case De.LEVEL_LOAD_ERROR:case De.LEVEL_LOAD_TIMEOUT:case De.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===$e.WAITING_LEVEL&&((i=t.context)==null?void 0:i.type)===Pn.LEVEL&&(this.state=$e.IDLE);break;case De.BUFFER_ADD_CODEC_ERROR:case De.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.resetLoadingState();break;case De.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case De.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=$e.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==xi.AUDIO||!this.altAudio){const i=(t===xi.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;i&&(this.afterBufferFlushed(i,t,kt.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${t}`);return}const r=this.timelineOffset;r&&i&&(i+=r);const s=this.getLevelDetails(),a=Tn.getBuffered(e),o=a.length?a.start(0):0,l=o-i,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);l>0&&(l<c||this.loadingParts&&l<2*((s==null?void 0:s.partTarget)||0))&&(this.log(`adjusting start position by ${l} to match buffer start`),i+=l,this.startPosition=i),t<i&&(this.log(`seek to target start position ${i} from current time ${t} buffer start ${o}`),e.currentTime=i)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{const{hls:r}=this,s=i==null?void 0:i.frag;if(!s||this.fragContextChanged(s))return;t.fragmentError=0,this.state=$e.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=s.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger($.FRAG_LOADED,i),s.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const i=this.playlistType,{hls:r}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{video:d,text:h,id3:p,initSegment:m}=s,{details:v}=u,b=this.altAudio?void 0:s.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=$e.PARSING,m){if(m!=null&&m.tracks){const S=l.initSegment||l;this._bufferInitSegment(u,m.tracks,S,a),r.trigger($.FRAG_PARSING_INIT_SEGMENT,{frag:S,id:i,tracks:m.tracks})}const x=m.initPTS,w=m.timescale;wt(x)&&(this.initPTS[l.cc]={baseTime:x,timescale:w},r.trigger($.INIT_PTS_FOUND,{frag:l,id:i,initPTS:x,timescale:w}))}if(d&&v){b&&d.type==="audiovideo"&&this.logMuxedErr(l);const x=v.fragments[l.sn-1-v.startSN],w=l.sn===v.startSN,S=!x||l.cc>x.cc;if(s.independent!==!1){const{startPTS:A,endPTS:C,startDTS:N,endDTS:k}=d;if(c)c.elementaryStreams[d.type]={startPTS:A,endPTS:C,startDTS:N,endDTS:k};else if(d.firstKeyFrame&&d.independent&&a.id===1&&!S&&(this.couldBacktrack=!0),d.dropped&&d.independent){const R=this.getMainFwdBufferInfo(),U=(R?R.end:this.getLoadPosition())+this.config.maxBufferHole,j=d.firstKeyFramePTS?d.firstKeyFramePTS:A;if(!w&&U<j-this.config.maxBufferHole&&!S){this.backtrack(l);return}else S&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,C,l.start,k,!0)}else w&&A-(v.appliedTimelineOffset||0)>h1&&(l.gap=!0);l.setElementaryStreamInfo(d.type,A,C,N,k),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,c,a,w||S)}else if(w||S)l.gap=!0;else{this.backtrack(l);return}}if(b){const{startPTS:x,endPTS:w,startDTS:S,endDTS:A}=b;c&&(c.elementaryStreams[xi.AUDIO]={startPTS:x,endPTS:w,startDTS:S,endDTS:A}),l.setElementaryStreamInfo(xi.AUDIO,x,w,S,A),this.bufferFragmentData(b,l,c,a)}if(v&&p!=null&&(t=p.samples)!=null&&t.length){const x={id:i,frag:l,details:v,samples:p.samples};r.trigger($.FRAG_PARSING_METADATA,x)}if(v&&h){const x={id:i,frag:l,details:v,samples:h.samples};r.trigger($.FRAG_PARSING_USERDATA,x)}}logMuxedErr(e){this.warn(`${vs(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,i,r){if(this.state!==$e.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(i));const{audio:s,video:a,audiovideo:o}=t;if(s){let c=o1(s.codec,e.audioCodec);c==="mp4a"&&(c="mp4a.40.5");const u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5");const d=s.metadata;d&&"channelCount"in d&&(d.channelCount||1)!==1&&u.indexOf("firefox")===-1&&(c="mp4a.40.5")}c&&c.indexOf("mp4a.40.5")!==-1&&u.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(c="mp4a.40.2",this.log(`Android: force audio codec to ${c}`)),e.audioCodec&&e.audioCodec!==c&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${c}"`),s.levelCodec=c,s.id=kt.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${c||""}/${e.audioCodec||""}/${s.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=kt.MAIN;const c=a.codec;if((c==null?void 0:c.length)===4)switch(c){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${a.codec!==c?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const l=Object.keys(t);if(l.length){if(this.hls.trigger($.BUFFER_CODECS,t),!this.hls)return;l.forEach(c=>{const d=t[c].initSegment;d!=null&&d.byteLength&&this.hls.trigger($.BUFFER_APPENDING,{type:c,data:d,frag:i,part:null,chunkMeta:r,parent:i.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,kt.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,i=e==null?void 0:e[t];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=$e.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(Tn.isBuffered(e,i)?t=this.getAppendedFrag(i):Tn.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const r=this.fragPlaying,s=t.level;(!r||t.sn!==r.sn||r.level!==s)&&(this.fragPlaying=t,this.hls.trigger($.FRAG_CHANGED,{frag:t}),(!r||r.level!==s)&&this.hls.trigger($.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return wt(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(wt(t)){const i=this.getLevelDetails(),r=this.currentFrag||(i?ph(null,i.fragments,t):null);if(r){const s=r.programDateTime;if(s!==null){const a=s+(t-r.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class sce{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[i].loader;if(r){var t;if(e&&e!==((t=r.context)==null?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=De.KEY_LOAD_ERROR,i,r,s){return new qc({type:jt.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:i,networkDetails:r})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:r}=e;for(let s=0;s<t.length;s++){const a=t[s];if(r<=a.cc&&(i==="initSegment"||a.sn==="initSegment"||i<a.sn)){this.emeController.selectKeySystemFormat(a).then(o=>{a.setKeyFormat(o)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,r;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,De.KEY_LOAD_ERROR,c))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,De.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((i=o)!=null&&i.decryptdata.key)return s.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((r=o)!=null&&r.keyLoadPromise){var l;switch((l=o.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(c=>(s.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,De.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const r=this.emeController.loadKey(i);if(r)return(e.keyLoadPromise=r.then(s=>(e.mediaKeySessionContext=s,i))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,r=i.loader,s=new r(i);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=i.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,p,m,v)=>{const{frag:b,keyInfo:x,url:w}=m;if(!b.decryptdata||x!==this.keyUriToKeyInfo[w])return o(this.createKeyLoadError(b,De.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),v));x.decryptdata.key=b.decryptdata.key=new Uint8Array(h.data),b.keyLoader=null,x.loader=null,a({frag:b,keyInfo:x})},onError:(h,p,m,v)=>{this.resetLoader(p),o(this.createKeyLoadError(t,De.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),m,pi({url:l.url,data:void 0},h)))},onTimeout:(h,p,m)=>{this.resetLoader(p),o(this.createKeyLoadError(t,De.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),m))},onAbort:(h,p,m)=>{this.resetLoader(p),o(this.createKeyLoadError(t,De.INTERNAL_ABORTED,new Error("key loading aborted"),m))}};s.load(l,u,d)})}resetLoader(e){const{frag:t,keyInfo:i,url:r}=e,s=i.loader;t.keyLoader===s&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[r],s&&s.destroy()}}function zR(n){const{type:e}=n;switch(e){case Pn.AUDIO_TRACK:return kt.AUDIO;case Pn.SUBTITLE_TRACK:return kt.SUBTITLE;default:return kt.MAIN}}function zS(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class ace{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on($.MANIFEST_LOADING,this.onManifestLoading,this),e.on($.LEVEL_LOADING,this.onLevelLoading,this),e.on($.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on($.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on($.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off($.MANIFEST_LOADING,this.onManifestLoading,this),e.off($.LEVEL_LOADING,this.onLevelLoading,this),e.off($.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off($.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off($.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,r=t.loader,s=i||r,a=new s(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Pn.MANIFEST,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:i,level:r,pathwayId:s,url:a,deliveryDirectives:o,levelInfo:l}=t;this.load({id:i,level:r,pathwayId:s,responseType:"text",type:Pn.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:l})}onAudioTrackLoading(e,t){const{id:i,groupId:r,url:s,deliveryDirectives:a,track:o}=t;this.load({id:i,groupId:r,level:null,responseType:"text",type:Pn.AUDIO_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:i,groupId:r,url:s,deliveryDirectives:a,track:o}=t;this.load({id:i,groupId:r,level:null,responseType:"text",type:Pn.SUBTITLE_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,t){const i=this.loaders[Pn.LEVEL];if(i){const r=i.context;r&&!t.levels.some(s=>s===r.levelOrTrack)&&(i.abort(),delete this.loaders[Pn.LEVEL])}}load(e){var t;const i=this.hls.config;let r=this.getInternalLoader(e);if(r){const c=this.hls.logger,u=r.context;if(u&&u.levelOrTrack===e.levelOrTrack&&(u.url===e.url||u.deliveryDirectives&&!e.deliveryDirectives)){u.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${u.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let s;if(e.type===Pn.MANIFEST?s=i.manifestLoadPolicy.default:s=wi({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),wt((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===Pn.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Pn.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Pn.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,d=c.targetduration;if(u&&d){const h=Math.max(u*3,d*.8)*1e3;s=wi({},s,{maxTimeToFirstByteMs:Math.min(h,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(c,u,d,h)=>{const p=this.getInternalLoader(d);this.resetInternalLoader(d.type);const m=c.data;if(m.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,d,new Error("no EXTM3U delimiter"),h||null,u);return}u.parsing.start=performance.now(),ac.isMediaPlaylist(m)||d.type!==Pn.MANIFEST?this.handleTrackOrLevelPlaylist(c,u,d,h||null,p):this.handleMasterPlaylist(c,u,d,h)},onError:(c,u,d,h)=>{this.handleNetworkError(u,d,!1,c,h)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};r.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,i,r){const s=this.hls,a=e.data,o=zS(e,i),l=ac.parseMasterPlaylist(a,o);if(l.playlistParsingError){this.handleManifestParsingError(e,i,l.playlistParsingError,r,t);return}const{contentSteering:c,levels:u,sessionData:d,sessionKeys:h,startTimeOffset:p,variableList:m}=l;this.variableList=m;const{AUDIO:v=[],SUBTITLES:b,"CLOSED-CAPTIONS":x}=ac.parseMasterPlaylistMedia(a,o,l);v.length&&!v.some(S=>!S.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new pr({}),bitrate:0,url:""})),s.trigger($.MANIFEST_LOADED,{levels:u,audioTracks:v,subtitles:b,captions:x,contentSteering:c,url:o,stats:t,networkDetails:r,sessionData:d,sessionKeys:h,startTimeOffset:p,variableList:m})}handleTrackOrLevelPlaylist(e,t,i,r,s){const a=this.hls,{id:o,level:l,type:c}=i,u=zS(e,i),d=wt(l)?l:wt(o)?o:0,h=zR(i),p=ac.parseLevelPlaylist(e.data,u,d,h,0,this.variableList);if(c===Pn.MANIFEST){const m={attrs:new pr({}),bitrate:0,details:p,name:"",url:u};p.requestScheduled=t.loading.start+T4(p,0),a.trigger($.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:u,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=p,this.handlePlaylistLoaded(p,e,t,i,r,s)}handleManifestParsingError(e,t,i,r,s){this.hls.trigger($.ERROR,{type:jt.NETWORK_ERROR,details:De.MANIFEST_PARSING_ERROR,fatal:t.type===Pn.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:r,stats:s})}handleNetworkError(e,t,i=!1,r,s){let a=`A network ${i?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===Pn.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Pn.AUDIO_TRACK||e.type===Pn.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let l=De.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case Pn.MANIFEST:l=i?De.MANIFEST_LOAD_TIMEOUT:De.MANIFEST_LOAD_ERROR,c=!0;break;case Pn.LEVEL:l=i?De.LEVEL_LOAD_TIMEOUT:De.LEVEL_LOAD_ERROR,c=!1;break;case Pn.AUDIO_TRACK:l=i?De.AUDIO_TRACK_LOAD_TIMEOUT:De.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Pn.SUBTITLE_TRACK:l=i?De.SUBTITLE_TRACK_LOAD_TIMEOUT:De.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const d={type:jt.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:o,networkDetails:t,stats:s};if(r){const h=(t==null?void 0:t.url)||e.url;d.response=pi({url:h,data:void 0},r)}this.hls.trigger($.ERROR,d)}handlePlaylistLoaded(e,t,i,r,s,a){const o=this.hls,{type:l,level:c,id:u,groupId:d,deliveryDirectives:h}=r,p=zS(t,r),m=zR(r),v=typeof r.level=="number"&&m===kt.MAIN?c:void 0;if(!e.fragments.length){const x=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger($.ERROR,{type:jt.NETWORK_ERROR,details:De.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:x,reason:x.message,response:t,context:r,level:v,parent:m,networkDetails:s,stats:i});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const b=e.playlistParsingError;if(b){if(this.hls.logger.warn(b),!o.config.ignorePlaylistParsingErrors){o.trigger($.ERROR,{type:jt.NETWORK_ERROR,details:De.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:b,reason:b.message,response:t,context:r,level:v,parent:m,networkDetails:s,stats:i});return}e.playlistParsingError=null}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Pn.MANIFEST:case Pn.LEVEL:o.trigger($.LEVEL_LOADED,{details:e,levelInfo:r.levelOrTrack||o.levels[0],level:v||0,id:u||0,stats:i,networkDetails:s,deliveryDirectives:h,withoutMultiVariant:l===Pn.MANIFEST});break;case Pn.AUDIO_TRACK:o.trigger($.AUDIO_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:u||0,groupId:d||"",stats:i,networkDetails:s,deliveryDirectives:h});break;case Pn.SUBTITLE_TRACK:o.trigger($.SUBTITLE_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:u||0,groupId:d||"",stats:i,networkDetails:s,deliveryDirectives:h});break}}}class Mo{static get version(){return T0}static isMSESupported(){return xF()}static isSupported(){return tce()}static getMediaSource(){return $d()}static get Events(){return $}static get MetadataSchema(){return ao}static get ErrorTypes(){return jt}static get ErrorDetails(){return De}static get DefaultConfig(){return Mo.defaultConfig?Mo.defaultConfig:Hle}static set DefaultConfig(e){Mo.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new cT,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=Tre(e.debug||!1,"Hls instance",e.assetPlayerId),i=this.config=zle(Mo.DefaultConfig,e,t);this.userConfig=e,i.progressive&&Gle(i,t);const{abrController:r,bufferController:s,capLevelController:a,errorController:o,fpsController:l}=i,c=new o(this),u=this.abrController=new r(this),d=new yse(this),h=i.interstitialsController,p=h?this.interstitialsController=new h(this,Mo):null,m=this.bufferController=new s(this,d),v=this.capLevelController=new a(this),b=new l(this),x=new ace(this),w=i.contentSteeringController,S=w?new w(this):null,A=this.levelController=new ece(this,S),C=new Jle(this),N=new sce(this.config),k=this.streamController=new rce(this,d,N),R=this.gapController=new Kle(this,d);v.setStreamController(k),b.setStreamController(k);const U=[x,A,k];p&&U.splice(1,0,p),S&&U.splice(1,0,S),this.networkControllers=U;const j=[u,m,R,v,b,C,d];this.audioTrackController=this.createController(i.audioTrackController,U);const D=i.audioStreamController;D&&U.push(this.audioStreamController=new D(this,d,N)),this.subtitleTrackController=this.createController(i.subtitleTrackController,U);const O=i.subtitleStreamController;O&&U.push(this.subtititleStreamController=new O(this,d,N)),this.createController(i.timelineController,j),N.emeController=this.emeController=this.createController(i.emeController,j),this.cmcdController=this.createController(i.cmcdController,j),this.latencyController=this.createController(Zle,j),this.coreComponents=j,U.push(c);const Z=c.onErrorOut;typeof Z=="function"&&this.on($.ERROR,Z,c),this.on($.MANIFEST_LOADED,x.onManifestLoaded,x)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,r){this._emitter.off(e,t,i,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const r=e===$.ERROR;this.trigger($.ERROR,{type:jt.OTHER_ERROR,details:De.INTERNAL_EXCEPTION,fatal:r,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger($.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const s=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger($.ERROR,{type:jt.OTHER_ERROR,details:De.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,i=t?e.media:e,r=t?e:{media:i};this._media=i,this.trigger($.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger($.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger($.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,i=this._url,r=this._url=ZE.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),t&&i&&(i!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger($.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length&&(this.networkControllers[i].startLoad(e,t),!(!this.started||!this.networkControllers));i++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[kt.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[kt.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[kt.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=gae()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){ese(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let r=0;r<i;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let r;if(t===-1&&e!=null&&e.length?r=e.length-1:r=t,i)for(let s=r;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=i)return s}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const i=g4(t);return p4(e,i,navigator.mediaCapabilities)}}Mo.defaultConfig=void 0;const oce=()=>{const n=B.useRef(null),e=B.useRef(null),t="https://9da07970fb41.ngrok.app/hls/stream.m3u8",[i,r]=B.useState(!1),s=()=>{const a=n.current;if(e.current&&(e.current.destroy(),e.current=null),Mo.isSupported()){const o=new Mo;e.current=o,o.loadSource(t),o.attachMedia(a),o.on(Mo.Events.MANIFEST_PARSED,()=>{a.muted=!0,a.play().catch(()=>{})}),o.on(Mo.Events.FRAG_LOADED,()=>{i||(r(!0),console.log("✅ Stream connected."))}),o.on(Mo.Events.ERROR,(l,c)=>{c.fatal&&(console.warn("❌ Fatal HLS error, retrying in 2s..."),r(!1),setTimeout(()=>s(),2e3))})}else a.canPlayType("application/vnd.apple.mpegurl")&&(a.src=t,a.muted=!0,a.play().catch(()=>{}))};return B.useEffect(()=>(s(),()=>{e.current&&e.current.destroy()}),[]),_.jsxs("div",{style:{backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh",overflow:"hidden",position:"relative"},children:[_.jsxs("div",{style:{position:"absolute",top:0,width:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",zIndex:1},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[_.jsx("div",{style:{width:"12px",height:"12px",backgroundColor:"red",borderRadius:"50%"}}),_.jsx("h4",{style:{margin:0},children:"Live Camera"})]}),_.jsx(oo,{children:_.jsx(oo.Link,{to:"/",as:md,className:"btn btn-primary text-white px-3 py-2",style:{borderRadius:"8px"},children:"Exit"})})]}),_.jsx("video",{ref:n,controls:!0,autoPlay:!0,muted:!0,style:{width:"99%",height:"99%",backgroundColor:"#000"}})]})};function lce(){const[n,e]=B.useState(""),[t,i]=B.useState(""),[r,s]=B.useState(!1),a=async o=>{if(o.preventDefault(),!n){Kn.error("Se requiere poner un nombre");return}if(!/^[a-zA-Z\s]+$/.test(n)){Kn.error("Item name must be letters and spaces only");return}i(""),s(!0);try{localStorage.setItem("selfName",JSON.stringify(n)),setTimeout(()=>{window.location.href="/product"},500)}catch(l){console.error(l),i("Failed to submit name"),Kn.error("Failed to submit name"),s(!1)}};return _.jsxs("div",{className:"name-form",children:[_.jsx($0,{position:"bottom-center"}),_.jsx("nav",{className:"nave navbar navbar-expand navbar-dark bg-black w-100 d-flex align-items-center justify-content-center",children:_.jsx("img",{className:"logo",src:"/logo1.png",alt:"Logo"})}),_.jsx("div",{className:"container conta d-flex justify-content-center align-items-center ",children:_.jsx("div",{className:"row welcome mt-5 rounded-4 d-flex flex-column ",children:_.jsxs("div",{className:"col d-flex flex-column align-items-center justify-content-center ",children:[_.jsx("h1",{className:"display-1",style:{fontWeight:"bold"},children:"Bienvenido"}),_.jsx("p",{className:"fs-2",children:"Introduce tu nombre"}),_.jsxs("form",{onSubmit:a,className:"d-flex flex-column justify-content-center gap-3",children:[_.jsx("div",{className:"form-group w-100 d-flex flex-row justify-content-center",children:_.jsx("input",{type:"text",className:"form-control w-100 p-3 fs-2 justify-content-center align-items-center",placeholder:"Juan del Pueblo",value:n,onChange:o=>e(o.target.value),disabled:r})}),t&&_.jsx("div",{className:"text-light bg-danger p-1 mt-2",children:t}),_.jsx("button",{className:`btn w-100 fs-2 d-flex justify-content-center align-items-center
                  ${r?"btn-loading":"btn-outline-light text-white"}`,type:"submit",disabled:r,children:r?_.jsxs(_.Fragment,{children:["Cargando",_.jsx("span",{className:"spinner-border spinner-border-sm ms-2",role:"status","aria-hidden":"true"})]}):_.jsxs(_.Fragment,{children:["Continuar",_.jsx("i",{className:"bi bi-chevron-right fs-2 ms-3"})]})})]})]})})})]})}function cce(){const[n,e]=B.useState([]),[t,i]=B.useState([]),[r,s]=B.useState(!1),[a,o]=B.useState(!1),[l,c]=B.useState(""),[u,d]=B.useState(!1),[h,p]=B.useState(!1),[m,v]=B.useState(null),b=5;B.useEffect(()=>{const C=localStorage.getItem("selfItems");if(C)try{const k=JSON.parse(C).map(R=>({...R,price:b.toFixed(2),qty:1,idname:R.ingredients.join(" + ")}));e(k)}catch(N){console.error("Error parsing localStorage data:",N)}},[]),B.useEffect(()=>{const C=N=>{N.key==="paymentConfirmed"&&N.newValue==="true"&&p(!0)};return window.addEventListener("storage",C),()=>window.removeEventListener("storage",C)},[]),B.useEffect(()=>{let C;return u&&m&&(C=setInterval(async()=>{try{if((await Et.get(`/orders/pending_orders/${m}`)).data.paymentConfirmed){p(!0),clearInterval(C);const k=n.map(R=>({...R,ings:R.ingredients,tops:R.toppings,item_id:Math.floor(Math.random()*1e5)})).map(({ingredients:R,toppings:U,price:j,...D})=>D);await Et.post("/orders",{name:JSON.parse(localStorage.getItem("selfName")),items:k,payment_method:l,total:A}),localStorage.removeItem("selfItems"),localStorage.removeItem("selfName")}}catch(N){console.error("Error polling order status:",N)}},3e3)),()=>clearInterval(C)},[u,m]);const x=C=>{const N=n.filter((k,R)=>R!==C);e(N),localStorage.setItem("selfItems",JSON.stringify(N))},w=async()=>{d(!0);try{const N=(await Et.post("/orders/pending_order",{name:JSON.parse(localStorage.getItem("selfName")),items:n,payment_method:l,total:A})).data._id;v(N),localStorage.setItem("currentOrderId",N)}catch(C){console.error("Error",C)}},S=()=>{d(!1),window.location.href="/customer"},A=n.reduce((C,N)=>C+parseFloat(N.price),0);return _.jsxs("div",{className:"text-secondary",children:[_.jsxs("nav",{className:"navbar navbar-expand navbar-dark bg-black w-100 d-flex align-items-center justify-content-between px-3",children:[_.jsx("a",{href:"#",onClick:()=>window.history.back(),className:"text-white fs-3",children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("img",{className:"logo",src:"/logo.png",alt:"Logo"}),_.jsx("div",{className:"me-3"})]}),_.jsx("div",{className:"container py-5 px-3",children:a?_.jsxs("div",{className:"text-center py-5",children:[_.jsx("img",{src:"./img/check.png",alt:"Check",className:"mb-4",style:{maxHeight:"120px"}}),_.jsx("h2",{children:"Pago Completado"})]}):_.jsxs("div",{className:"bg-white rounded-4 p-4 shadow",children:[_.jsx("div",{className:"table-responsive mb-4",children:_.jsxs("table",{className:"table table-bordered table-hover table-striped text-center align-middle fs-4",children:[_.jsx("thead",{className:"table-dark",children:_.jsxs("tr",{children:[_.jsx("th",{children:"Item"}),_.jsx("th",{children:"Qty"}),_.jsx("th",{children:"Price"}),_.jsx("th",{children:"Remove"})]})}),_.jsx("tbody",{children:n.map((C,N)=>_.jsxs("tr",{children:[_.jsx("td",{className:"fw-semibold",children:C.combination}),_.jsx("td",{children:C.qty}),_.jsxs("td",{children:["$",C.price]}),_.jsx("td",{children:_.jsx("button",{className:"btn btn-danger btn-lg px-4 py-2",onClick:()=>x(N),children:"✕"})})]},N))})]})}),_.jsx("div",{className:"text-end pe-2 mb-4",children:_.jsxs("h3",{className:"text-dark fw-bold",children:["Total: $",A.toFixed(2)]})}),_.jsx("div",{className:"mb-4",children:_.jsx("button",{className:"btn btn-dark btn-lg fs-4 w-100 py-3",onClick:()=>s(!r),children:"Proceed to Checkout"})}),r&&_.jsxs("div",{children:[_.jsx("p",{className:"fs-4 mb-3",children:"Choose payment method:"}),_.jsxs("div",{className:"d-flex flex-column flex-md-row gap-3 mb-4",children:[_.jsx("button",{className:`btn ${l==="ATH"?"btn-dark":"btn-outline-dark"} btn-lg w-100 py-3 fs-4`,onClick:()=>c("ATH"),children:"ATH Móvil"}),_.jsx("button",{className:`btn ${l==="CASH"?"btn-dark":"btn-outline-dark"} btn-lg w-100 py-3 fs-4`,onClick:()=>c("CASH"),children:"Efectivo"})]}),_.jsxs("p",{className:"fs-5 mb-3",children:["Método seleccionado: ",_.jsx("strong",{children:l})]}),_.jsx("button",{id:"ATHMovil_Checkout_Button",className:"btn btn-dark btn-lg w-100 py-3 fs-4",onClick:w,disabled:!l,children:"Pay"})]}),_.jsxs(Wt,{show:u,onHide:S,centered:!0,children:[_.jsx(Wt.Header,{closeButton:!0,className:"border-0",children:_.jsx(Wt.Title,{className:"fs-3 fw-bold",children:"Order Pending"})}),_.jsxs(Wt.Body,{className:"text-center py-5",children:[h?_.jsx("i",{className:"bi bi-check-circle-fill text-success display-1 d-block mb-3"}):_.jsx("i",{className:"bi bi-clock-history display-1 d-block mb-3"}),_.jsx("p",{className:"fs-5",children:h?"Payment confirmed by cashier!":"Waiting for cashier to confirm payment..."})]}),_.jsx(Wt.Footer,{className:"border-0 justify-content-center",children:_.jsx("button",{className:"btn btn-dark btn-lg fs-5 px-5 py-3",onClick:S,children:"Back to Home Page"})})]})]})})]})}function uce(){B.useEffect(()=>{if(document.referrer.includes("/customer")){const d=JSON.parse(localStorage.getItem("selfName")||'""');Kn.success(`¡Bienvenido ${d}! 🍦`)}},[]);const[n,e]=B.useState(""),[t,i]=B.useState(""),[r,s]=B.useState(!1),[a,o]=B.useState(!1),l={"Ice Cream Rolls":"Helado artesanal, 8 onzas preparado al momento. Escoge entre nuestras combinaciones favoritas (siguiente página) y toppings para el mismo."},c=d=>{const h=d.target.value;e(h),i("")},u=d=>{if(d.preventDefault(),!n){i("Debe seleccionar un producto");return}if(!l[n]){i("Producto no disponible");return}window.location.href="/icrform"};return B.useEffect(()=>{n&&s(!0)},[n]),_.jsxs("div",{className:"prod-selector",children:[_.jsx($0,{position:"bottom-center"}),_.jsxs("nav",{className:"nave navbar navbar-expand navbar-dark bg-black w-100 d-flex align-items-center justify-content-between",children:[_.jsx("a",{href:"/customer",className:"ms-3",children:_.jsx("i",{className:"bi bi-chevron-left fs-2 nav-icon"})}),_.jsx("img",{className:"logo",src:"/logo.png",alt:"Logo"}),_.jsx("a",{href:"/shopping",className:"me-3",children:_.jsx("i",{className:"bi bi-cart fs-2 nav-icon"})})]}),_.jsx("div",{className:"conta container mt-3 rounded-3",children:_.jsxs("div",{className:"row d-flex flex-column justify-content-center align-items-center",children:[_.jsx("div",{className:"col d-flex justify-content-center align-item-center gy-3",children:_.jsx("button",{type:"button",className:"rosa btn  text-light rounded-3 btn-lg boton-nuevo",onClick:()=>o(!a),children:"Nuevo +"})}),a?_.jsxs("div",{className:"col bg-white contenido rounded-3 p-3 d-flex align-items-center flex-column text-secondary gy-4",children:[_.jsxs("section",{className:"card shadow-sm p-4 mt-3 w-100",children:[_.jsx("h5",{className:"text-secondary mb-3",children:"Tipo de Producto"}),_.jsxs("select",{className:"form-select fs-4",onChange:c,value:n||"0","aria-label":"Selecciona tipo de producto",children:[_.jsx("option",{value:"0",disabled:!0,children:"Selecciona el producto"}),Object.keys(l).map((d,h)=>_.jsx("option",{value:d,children:d},h))]})]}),_.jsxs("section",{className:"card shadow-sm p-4 mt-3 w-100",children:[_.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[_.jsx("h5",{className:"text-secondary",children:"Información del Producto"}),_.jsx("button",{className:"btn",onClick:()=>s(d=>!d),children:_.jsx("i",{className:`bi ${r?"bi-chevron-up":"bi-chevron-down"}`})})]}),r&&n&&_.jsxs("div",{className:"mt-4",children:[_.jsx("h5",{className:"fw-bold",children:n}),_.jsx("p",{className:"text-secondary",children:l[n]})]})]}),_.jsxs("section",{className:"mt-4 w-100",children:[t&&_.jsx("div",{className:"alert alert-danger text-center",role:"alert",children:t}),_.jsx("form",{onSubmit:u,className:"d-flex justify-content-center",children:_.jsx("button",{className:"btn btn-dark btn-lg fs-4 py-3 w-100 mt-4 rounded-4",type:"submit",children:"Continuar"})})]})]}):_.jsx("div",{id:"d",className:"nuevo col d-flex justify-content-center gy-5 mt-4",children:_.jsxs("p",{className:"lead presiona-nuevo",children:["Presiona ",_.jsx("strong",{className:"fw-bold",children:"Nuevo"})," para comenzar."]})})]})})]})}function dce(){const[n,e]=B.useState({ingredients:["","",""],quantity:0,toppings:{}}),[t,i]=B.useState(""),r=["I Love Coffee","Strawberry Shortcake","Cookies & Cream","CocoNut","Smores","Cinammon And Cannot"],s=["Whipped Cream","Oreo","Maní"];B.useEffect(()=>{const c=n.quantity;e(u=>{const d={...u.toppings};for(let h=1;h<=c;h++)d[h]||(d[h]=[]);return Object.keys(d).forEach(h=>{parseInt(h)>c&&delete d[h]}),{...u,toppings:d}})},[n.quantity]);const a=(c,u,d)=>{{let h=[];d==="I Love Coffee"?h=["Café","Caramelo","Almendra"]:d==="Strawberry Shortcake"?h=["Fresa","Cheesecake","Almendra"]:d==="Cookies & Cream"?h=["Oreo","Queso","Chips"]:d==="CocoNut"?h=["Coco","Almendra","Nutella"]:d==="Smores"?h=["Marshmellow","Crackers","Chocolate"]:d==="Cinammon And Cannot"&&(h=["Bizcocho de Zanahoria","Queso","Canela"]),e(p=>t===d?{...p,ingredients:["","",""]}:{...p,ingredients:h}),i(p=>p===d?"":d)}},o=c=>{e(u=>({...u,quantity:parseInt(c)}))},l=c=>{c.preventDefault();const u=localStorage.getItem("selfItems");let d=u?JSON.parse(u):[];for(let h=1;h<=n.quantity;h++)d.push({combination:t,ingredients:n.ingredients,toppings:n.toppings[h]||[]});localStorage.setItem("selfItems",JSON.stringify(d)),e({ingredients:["","",""],quantity:0,toppings:{}}),i(""),window.location.href="/product"};return _.jsxs("div",{children:[_.jsxs("nav",{className:"navbar navbar-dark bg-black w-100 d-flex flex-column py-2",children:[_.jsxs("div",{className:"container-fluid d-flex justify-content-between align-items-center",children:[_.jsx("a",{href:"#",onClick:()=>window.history.back(),className:"text-white fs-3",children:_.jsx("i",{className:"bi bi-chevron-left"})}),_.jsx("img",{src:"/logo.png",alt:"Logo"}),_.jsx("a",{href:"/shopping",className:"text-white fs-3",children:_.jsx("i",{className:"bi bi-cart"})})]}),_.jsx("div",{className:"text-white text-center mt-2 fs-4 fw-semibold",children:"Producto: Ice Cream Rolls"})]}),_.jsx("div",{className:"container mt-4",children:_.jsxs("form",{onSubmit:l,className:"bg-white p-4 rounded-4 shadow-lg",children:[_.jsx("h4",{className:"text-secondary mb-3",children:"Ice Cream"}),_.jsx("div",{className:"d-flex flex-wrap gap-3 mb-4",children:r.map((c,u)=>_.jsx("button",{type:"button",className:`btn btn-outline-primary fw-bold px-4 py-3 fs-4 rounded-3 ${t===c?"active":""}`,onClick:()=>a("ingredients",u,c),children:c},u))}),t&&_.jsxs(_.Fragment,{children:[_.jsx("h4",{className:"text-secondary mb-2",children:"Cantidad"}),_.jsx("select",{className:"form-select form-select-lg mb-4 fs-4",value:n.quantity,onChange:c=>o(c.target.value),children:[0,1,2,3,4,5,6].map(c=>_.jsx("option",{value:c,children:c},c))})]}),n.quantity>=1&&_.jsxs(_.Fragment,{children:[_.jsx("h4",{className:"text-secondary mb-3",children:"Toppings por helado"}),Array.from({length:n.quantity},(c,u)=>{const d=u+1,h=n.toppings[d]||[];return _.jsxs("div",{className:"mb-4",children:[_.jsxs("h5",{children:["Helado #",d]}),_.jsx("div",{className:"d-flex flex-wrap gap-3 mt-2",children:s.map((p,m)=>_.jsx("button",{type:"button",className:`btn btn-outline-primary fw-bold px-4 py-3 fs-5 rounded-3 ${h.includes(p)?"active":""}`,onClick:()=>{const v=[...h],b=v.indexOf(p);b>-1?v.splice(b,1):v.length<3&&v.push(p),e(x=>({...x,toppings:{...x.toppings,[d]:v}}))},children:p},m))})]},d)})]}),n.quantity>0&&_.jsxs("div",{className:"mt-4 bg-light p-4 rounded-4 shadow-sm",children:[_.jsx("h4",{className:"text-secondary",children:"Tu selección"}),_.jsxs("ul",{className:"list-group mt-3",children:[_.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center fs-5",children:[_.jsx("strong",{children:"Ice Cream:"})," ",t,_.jsx("button",{type:"button",className:"btn btn-danger btn-lg fs-5 px-4 py-2 rounded-3",onClick:()=>{i(""),e(c=>({...c,ingredients:["","",""]}))},children:"Quitar"})]}),Object.entries(n.toppings).map(([c,u])=>_.jsxs("li",{className:"list-group-item fs-5",children:[_.jsxs("strong",{children:["Toppings Helado #",c,":"]}),_.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:u.length>0?u.map((d,h)=>_.jsxs("span",{className:"badge bg-primary fs-5 p-3 rounded-pill",children:[d,_.jsx("button",{type:"button",className:"btn btn-sm btn-light ms-2 py-0 px-2",onClick:()=>{e(p=>{const m=[...p.toppings[c]];return m.splice(h,1),{...p,toppings:{...p.toppings,[c]:m}}})},children:"✕"})]},h)):_.jsx("span",{className:"text-muted",children:"Ninguno"})})]},c)),_.jsxs("li",{className:"list-group-item fs-5",children:[_.jsx("strong",{children:"Cantidad:"})," ",n.quantity]})]})]}),t&&_.jsx("button",{type:"submit",className:"btn btn-dark btn-lg fs-4 py-3 w-100 mt-4 rounded-4",children:"Add to cart"})]})})]})}function fce(){const[n,e]=B.useState({name:"",items:[],metodo:""}),[t,i]=B.useState(""),[r,s]=B.useState(1),[a,o]=B.useState(0),[l,c]=B.useState(0),[u,d]=B.useState(""),[h,p]=B.useState({}),[m,v]=B.useState(0),[b,x]=B.useState(0),[w,S]=B.useState(0),[A,C]=B.useState(0),[N,k]=B.useState(!1),[R,U]=B.useState(0);return _.jsx(hi.Provider,{value:{newOrderCounter:R,increaseNewOrderCounter:U,hideOrders:N,toggleHideOrders:k,sumToSubstract:A,setSumtoSubstract:C,typeCounter:w,setTypeCounter:S,favCounter:l,setFavCounter:c,type:b,setType:x,totalToPay:m,setTotalToPay:v,order:n,setOrder:e,name:t,setName:i,renderOrdersKey:r,setRenderOrdersKey:s,itemCounter:a,setItemCounter:o,metodo:u,setMetodo:d,newItem:h,setNewItem:p},children:_.jsxs(zz,{children:[_.jsx(Vl,{path:"/",element:_.jsx(iV,{})}),_.jsx(Vl,{path:"/terminal",element:_.jsx(JG,{})}),_.jsx(Vl,{path:"/queue",element:_.jsx(rV,{})}),_.jsx(Vl,{path:"/ventas",element:_.jsx(mre,{})}),_.jsx(Vl,{path:"/cameras",element:_.jsx(oce,{})}),_.jsx(Vl,{path:"/customer",element:_.jsx(lce,{})}),_.jsx(Vl,{path:"/shopping",element:_.jsx(cce,{})}),_.jsx(Vl,{path:"/product",element:_.jsx(uce,{})}),_.jsx(Vl,{path:"/icrform",element:_.jsx(dce,{})})]})})}GS.createRoot(document.getElementById("root")).render(_.jsx(gl.StrictMode,{children:_.jsx(Jz,{children:_.jsx(fce,{})})}));export{bi as _,ld as c,I0 as g};
