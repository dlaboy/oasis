var N3=Object.defineProperty;var D3=(n,e,t)=>e in n?N3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ge=(n,e,t)=>D3(n,typeof e!="symbol"?e+"":e,t);function O3(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _p(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function M3(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var CL={exports:{}},ay={},IL={exports:{}},tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep=Symbol.for("react.element"),F3=Symbol.for("react.portal"),j3=Symbol.for("react.fragment"),B3=Symbol.for("react.strict_mode"),U3=Symbol.for("react.profiler"),$3=Symbol.for("react.provider"),H3=Symbol.for("react.context"),z3=Symbol.for("react.forward_ref"),W3=Symbol.for("react.suspense"),V3=Symbol.for("react.memo"),G3=Symbol.for("react.lazy"),_5=Symbol.iterator;function Y3(n){return n===null||typeof n!="object"?null:(n=_5&&n[_5]||n["@@iterator"],typeof n=="function"?n:null)}var RL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PL=Object.assign,NL={};function zd(n,e,t){this.props=n,this.context=e,this.refs=NL,this.updater=t||RL}zd.prototype.isReactComponent={};zd.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};zd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function DL(){}DL.prototype=zd.prototype;function I2(n,e,t){this.props=n,this.context=e,this.refs=NL,this.updater=t||RL}var R2=I2.prototype=new DL;R2.constructor=I2;PL(R2,zd.prototype);R2.isPureReactComponent=!0;var E5=Array.isArray,OL=Object.prototype.hasOwnProperty,P2={current:null},ML={key:!0,ref:!0,__self:!0,__source:!0};function FL(n,e,t){var i,s={},r=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(r=""+e.key),e)OL.call(e,i)&&!ML.hasOwnProperty(i)&&(s[i]=e[i]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)s[i]===void 0&&(s[i]=o[i]);return{$$typeof:Ep,type:n,key:r,ref:a,props:s,_owner:P2.current}}function q3(n,e){return{$$typeof:Ep,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function N2(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ep}function K3(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var T5=/\/+/g;function Uv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?K3(""+n.key):e.toString(36)}function Am(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Ep:case F3:a=!0}}if(a)return a=n,s=s(a),n=i===""?"."+Uv(a,0):i,E5(s)?(t="",n!=null&&(t=n.replace(T5,"$&/")+"/"),Am(s,e,t,"",function(c){return c})):s!=null&&(N2(s)&&(s=q3(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(T5,"$&/")+"/")+n)),e.push(s)),1;if(a=0,i=i===""?".":i+":",E5(n))for(var o=0;o<n.length;o++){r=n[o];var l=i+Uv(r,o);a+=Am(r,e,t,l,s)}else if(l=Y3(n),typeof l=="function")for(n=l.call(n),o=0;!(r=n.next()).done;)r=r.value,l=i+Uv(r,o++),a+=Am(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wg(n,e,t){if(n==null)return n;var i=[],s=0;return Am(n,i,"","",function(r){return e.call(t,r,s++)}),i}function X3(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Hs={current:null},Lm={transition:null},Q3={ReactCurrentDispatcher:Hs,ReactCurrentBatchConfig:Lm,ReactCurrentOwner:P2};function jL(){throw Error("act(...) is not supported in production builds of React.")}tn.Children={map:wg,forEach:function(n,e,t){wg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return wg(n,function(){e++}),e},toArray:function(n){return wg(n,function(e){return e})||[]},only:function(n){if(!N2(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};tn.Component=zd;tn.Fragment=j3;tn.Profiler=U3;tn.PureComponent=I2;tn.StrictMode=B3;tn.Suspense=W3;tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q3;tn.act=jL;tn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=PL({},n.props),s=n.key,r=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,a=P2.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)OL.call(e,l)&&!ML.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];i.children=o}return{$$typeof:Ep,type:n.type,key:s,ref:r,props:i,_owner:a}};tn.createContext=function(n){return n={$$typeof:H3,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:$3,_context:n},n.Consumer=n};tn.createElement=FL;tn.createFactory=function(n){var e=FL.bind(null,n);return e.type=n,e};tn.createRef=function(){return{current:null}};tn.forwardRef=function(n){return{$$typeof:z3,render:n}};tn.isValidElement=N2;tn.lazy=function(n){return{$$typeof:G3,_payload:{_status:-1,_result:n},_init:X3}};tn.memo=function(n,e){return{$$typeof:V3,type:n,compare:e===void 0?null:e}};tn.startTransition=function(n){var e=Lm.transition;Lm.transition={};try{n()}finally{Lm.transition=e}};tn.unstable_act=jL;tn.useCallback=function(n,e){return Hs.current.useCallback(n,e)};tn.useContext=function(n){return Hs.current.useContext(n)};tn.useDebugValue=function(){};tn.useDeferredValue=function(n){return Hs.current.useDeferredValue(n)};tn.useEffect=function(n,e){return Hs.current.useEffect(n,e)};tn.useId=function(){return Hs.current.useId()};tn.useImperativeHandle=function(n,e,t){return Hs.current.useImperativeHandle(n,e,t)};tn.useInsertionEffect=function(n,e){return Hs.current.useInsertionEffect(n,e)};tn.useLayoutEffect=function(n,e){return Hs.current.useLayoutEffect(n,e)};tn.useMemo=function(n,e){return Hs.current.useMemo(n,e)};tn.useReducer=function(n,e,t){return Hs.current.useReducer(n,e,t)};tn.useRef=function(n){return Hs.current.useRef(n)};tn.useState=function(n){return Hs.current.useState(n)};tn.useSyncExternalStore=function(n,e,t){return Hs.current.useSyncExternalStore(n,e,t)};tn.useTransition=function(){return Hs.current.useTransition()};tn.version="18.3.1";IL.exports=tn;var O=IL.exports;const ua=_p(O),J3=O3({__proto__:null,default:ua},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z3=O,eO=Symbol.for("react.element"),tO=Symbol.for("react.fragment"),nO=Object.prototype.hasOwnProperty,iO=Z3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sO={key:!0,ref:!0,__self:!0,__source:!0};function BL(n,e,t){var i,s={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)nO.call(e,i)&&!sO.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:eO,type:n,key:r,ref:a,props:s,_owner:iO.current}}ay.Fragment=tO;ay.jsx=BL;ay.jsxs=BL;CL.exports=ay;var S=CL.exports,bx={},UL={exports:{}},Tr={},$L={exports:{}},HL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,U){var Q=B.length;B.push(U);e:for(;0<Q;){var re=Q-1>>>1,N=B[re];if(0<s(N,U))B[re]=U,B[Q]=N,Q=re;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var U=B[0],Q=B.pop();if(Q!==U){B[0]=Q;e:for(var re=0,N=B.length,W=N>>>1;re<W;){var K=2*(re+1)-1,Z=B[K],te=K+1,oe=B[te];if(0>s(Z,Q))te<N&&0>s(oe,Z)?(B[re]=oe,B[te]=Q,re=te):(B[re]=Z,B[K]=Q,re=K);else if(te<N&&0>s(oe,Q))B[re]=oe,B[te]=Q,re=te;else break e}}return U}function s(B,U){var Q=B.sortIndex-U.sortIndex;return Q!==0?Q:B.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(B){for(var U=t(c);U!==null;){if(U.callback===null)i(c);else if(U.startTime<=B)i(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(c)}}function _(B){if(m=!1,x(B),!p)if(t(l)!==null)p=!0,j(T);else{var U=t(c);U!==null&&z(_,U.startTime-B)}}function T(B,U){p=!1,m&&(m=!1,y(k),k=-1),f=!0;var Q=h;try{for(x(U),d=t(l);d!==null&&(!(d.expirationTime>U)||B&&!I());){var re=d.callback;if(typeof re=="function"){d.callback=null,h=d.priorityLevel;var N=re(d.expirationTime<=U);U=n.unstable_now(),typeof N=="function"?d.callback=N:d===t(l)&&i(l),x(U)}else i(l);d=t(l)}if(d!==null)var W=!0;else{var K=t(c);K!==null&&z(_,K.startTime-U),W=!1}return W}finally{d=null,h=Q,f=!1}}var C=!1,L=null,k=-1,M=5,D=-1;function I(){return!(n.unstable_now()-D<M)}function R(){if(L!==null){var B=n.unstable_now();D=B;var U=!0;try{U=L(!0,B)}finally{U?q():(C=!1,L=null)}}else C=!1}var q;if(typeof b=="function")q=function(){b(R)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ee=Y.port2;Y.port1.onmessage=R,q=function(){ee.postMessage(null)}}else q=function(){v(R,0)};function j(B){L=B,C||(C=!0,q())}function z(B,U){k=v(function(){B(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,j(T))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var Q=h;h=U;try{return B()}finally{h=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,U){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Q=h;h=B;try{return U()}finally{h=Q}},n.unstable_scheduleCallback=function(B,U,Q){var re=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?re+Q:re):Q=re,B){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=Q+N,B={id:u++,callback:U,priorityLevel:B,startTime:Q,expirationTime:N,sortIndex:-1},Q>re?(B.sortIndex=Q,e(c,B),t(l)===null&&B===t(c)&&(m?(y(k),k=-1):m=!0,z(_,Q-re))):(B.sortIndex=N,e(l,B),p||f||(p=!0,j(T))),B},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(B){var U=h;return function(){var Q=h;h=U;try{return B.apply(this,arguments)}finally{h=Q}}}})(HL);$L.exports=HL;var rO=$L.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aO=O,Er=rO;function He(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zL=new Set,Nf={};function du(n,e){Cd(n,e),Cd(n+"Capture",e)}function Cd(n,e){for(Nf[n]=e,n=0;n<e.length;n++)zL.add(e[n])}var Bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sx=Object.prototype.hasOwnProperty,oO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A5={},L5={};function lO(n){return Sx.call(L5,n)?!0:Sx.call(A5,n)?!1:oO.test(n)?L5[n]=!0:(A5[n]=!0,!1)}function cO(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function uO(n,e,t,i){if(e===null||typeof e>"u"||cO(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zs(n,e,t,i,s,r,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=a}var fs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){fs[n]=new zs(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];fs[e]=new zs(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){fs[n]=new zs(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){fs[n]=new zs(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){fs[n]=new zs(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){fs[n]=new zs(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){fs[n]=new zs(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){fs[n]=new zs(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){fs[n]=new zs(n,5,!1,n.toLowerCase(),null,!1,!1)});var D2=/[\-:]([a-z])/g;function O2(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(D2,O2);fs[e]=new zs(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(D2,O2);fs[e]=new zs(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(D2,O2);fs[e]=new zs(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){fs[n]=new zs(n,1,!1,n.toLowerCase(),null,!1,!1)});fs.xlinkHref=new zs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){fs[n]=new zs(n,1,!1,n.toLowerCase(),null,!0,!0)});function M2(n,e,t,i){var s=fs.hasOwnProperty(e)?fs[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uO(e,t,s,i)&&(t=null),i||s===null?lO(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Go=aO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_g=Symbol.for("react.element"),td=Symbol.for("react.portal"),nd=Symbol.for("react.fragment"),F2=Symbol.for("react.strict_mode"),wx=Symbol.for("react.profiler"),WL=Symbol.for("react.provider"),VL=Symbol.for("react.context"),j2=Symbol.for("react.forward_ref"),_x=Symbol.for("react.suspense"),Ex=Symbol.for("react.suspense_list"),B2=Symbol.for("react.memo"),yl=Symbol.for("react.lazy"),GL=Symbol.for("react.offscreen"),k5=Symbol.iterator;function Ah(n){return n===null||typeof n!="object"?null:(n=k5&&n[k5]||n["@@iterator"],typeof n=="function"?n:null)}var ci=Object.assign,$v;function Gh(n){if($v===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);$v=e&&e[1]||""}return`
`+$v+n}var Hv=!1;function zv(n,e){if(!n||Hv)return"";Hv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),a=s.length-1,o=r.length-1;1<=a&&0<=o&&s[a]!==r[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==r[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==r[o]){var l=`
`+s[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{Hv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Gh(n):""}function dO(n){switch(n.tag){case 5:return Gh(n.type);case 16:return Gh("Lazy");case 13:return Gh("Suspense");case 19:return Gh("SuspenseList");case 0:case 2:case 15:return n=zv(n.type,!1),n;case 11:return n=zv(n.type.render,!1),n;case 1:return n=zv(n.type,!0),n;default:return""}}function Tx(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case nd:return"Fragment";case td:return"Portal";case wx:return"Profiler";case F2:return"StrictMode";case _x:return"Suspense";case Ex:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case VL:return(n.displayName||"Context")+".Consumer";case WL:return(n._context.displayName||"Context")+".Provider";case j2:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B2:return e=n.displayName||null,e!==null?e:Tx(n.type)||"Memo";case yl:e=n._payload,n=n._init;try{return Tx(n(e))}catch{}}return null}function hO(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tx(e);case 8:return e===F2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ql(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function YL(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fO(n){var e=YL(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Eg(n){n._valueTracker||(n._valueTracker=fO(n))}function qL(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=YL(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function i0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ax(n,e){var t=e.checked;return ci({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function C5(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ql(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KL(n,e){e=e.checked,e!=null&&M2(n,"checked",e,!1)}function Lx(n,e){KL(n,e);var t=ql(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?kx(n,e.type,t):e.hasOwnProperty("defaultValue")&&kx(n,e.type,ql(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function I5(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function kx(n,e,t){(e!=="number"||i0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Yh=Array.isArray;function md(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ql(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Cx(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(He(91));return ci({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function R5(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(He(92));if(Yh(t)){if(1<t.length)throw Error(He(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ql(t)}}function XL(n,e){var t=ql(e.value),i=ql(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function P5(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function QL(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ix(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?QL(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Tg,JL=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Tg=Tg||document.createElement("div"),Tg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Df(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var rf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pO=["Webkit","ms","Moz","O"];Object.keys(rf).forEach(function(n){pO.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),rf[e]=rf[n]})});function ZL(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||rf.hasOwnProperty(n)&&rf[n]?(""+e).trim():e+"px"}function ek(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=ZL(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var gO=ci({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rx(n,e){if(e){if(gO[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(He(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(He(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(He(61))}if(e.style!=null&&typeof e.style!="object")throw Error(He(62))}}function Px(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nx=null;function U2(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Dx=null,yd=null,vd=null;function N5(n){if(n=Lp(n)){if(typeof Dx!="function")throw Error(He(280));var e=n.stateNode;e&&(e=dy(e),Dx(n.stateNode,n.type,e))}}function tk(n){yd?vd?vd.push(n):vd=[n]:yd=n}function nk(){if(yd){var n=yd,e=vd;if(vd=yd=null,N5(n),e)for(n=0;n<e.length;n++)N5(e[n])}}function ik(n,e){return n(e)}function sk(){}var Wv=!1;function rk(n,e,t){if(Wv)return n(e,t);Wv=!0;try{return ik(n,e,t)}finally{Wv=!1,(yd!==null||vd!==null)&&(sk(),nk())}}function Of(n,e){var t=n.stateNode;if(t===null)return null;var i=dy(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(He(231,e,typeof t));return t}var Ox=!1;if(Bo)try{var Lh={};Object.defineProperty(Lh,"passive",{get:function(){Ox=!0}}),window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{Ox=!1}function mO(n,e,t,i,s,r,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var af=!1,s0=null,r0=!1,Mx=null,yO={onError:function(n){af=!0,s0=n}};function vO(n,e,t,i,s,r,a,o,l){af=!1,s0=null,mO.apply(yO,arguments)}function xO(n,e,t,i,s,r,a,o,l){if(vO.apply(this,arguments),af){if(af){var c=s0;af=!1,s0=null}else throw Error(He(198));r0||(r0=!0,Mx=c)}}function hu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function ak(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function D5(n){if(hu(n)!==n)throw Error(He(188))}function bO(n){var e=n.alternate;if(!e){if(e=hu(n),e===null)throw Error(He(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return D5(s),n;if(r===i)return D5(s),e;r=r.sibling}throw Error(He(188))}if(t.return!==i.return)t=s,i=r;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a)throw Error(He(189))}}if(t.alternate!==i)throw Error(He(190))}if(t.tag!==3)throw Error(He(188));return t.stateNode.current===t?n:e}function ok(n){return n=bO(n),n!==null?lk(n):null}function lk(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=lk(n);if(e!==null)return e;n=n.sibling}return null}var ck=Er.unstable_scheduleCallback,O5=Er.unstable_cancelCallback,SO=Er.unstable_shouldYield,wO=Er.unstable_requestPaint,Ti=Er.unstable_now,_O=Er.unstable_getCurrentPriorityLevel,$2=Er.unstable_ImmediatePriority,uk=Er.unstable_UserBlockingPriority,a0=Er.unstable_NormalPriority,EO=Er.unstable_LowPriority,dk=Er.unstable_IdlePriority,oy=null,Va=null;function TO(n){if(Va&&typeof Va.onCommitFiberRoot=="function")try{Va.onCommitFiberRoot(oy,n,void 0,(n.current.flags&128)===128)}catch{}}var fa=Math.clz32?Math.clz32:kO,AO=Math.log,LO=Math.LN2;function kO(n){return n>>>=0,n===0?32:31-(AO(n)/LO|0)|0}var Ag=64,Lg=4194304;function qh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function o0(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?i=qh(o):(r&=a,r!==0&&(i=qh(r)))}else a=t&~s,a!==0?i=qh(a):r!==0&&(i=qh(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-fa(e),s=1<<t,i|=n[t],e&=~s;return i}function CO(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IO(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var a=31-fa(r),o=1<<a,l=s[a];l===-1?(!(o&t)||o&i)&&(s[a]=CO(o,e)):l<=e&&(n.expiredLanes|=o),r&=~o}}function Fx(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function hk(){var n=Ag;return Ag<<=1,!(Ag&4194240)&&(Ag=64),n}function Vv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Tp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-fa(e),n[e]=t}function RO(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-fa(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function H2(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-fa(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var Cn=0;function fk(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var pk,z2,gk,mk,yk,jx=!1,kg=[],Ml=null,Fl=null,jl=null,Mf=new Map,Ff=new Map,wl=[],PO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function M5(n,e){switch(n){case"focusin":case"focusout":Ml=null;break;case"dragenter":case"dragleave":Fl=null;break;case"mouseover":case"mouseout":jl=null;break;case"pointerover":case"pointerout":Mf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ff.delete(e.pointerId)}}function kh(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Lp(e),e!==null&&z2(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function NO(n,e,t,i,s){switch(e){case"focusin":return Ml=kh(Ml,n,e,t,i,s),!0;case"dragenter":return Fl=kh(Fl,n,e,t,i,s),!0;case"mouseover":return jl=kh(jl,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Mf.set(r,kh(Mf.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Ff.set(r,kh(Ff.get(r)||null,n,e,t,i,s)),!0}return!1}function vk(n){var e=Oc(n.target);if(e!==null){var t=hu(e);if(t!==null){if(e=t.tag,e===13){if(e=ak(t),e!==null){n.blockedOn=e,yk(n.priority,function(){gk(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function km(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Bx(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Nx=i,t.target.dispatchEvent(i),Nx=null}else return e=Lp(t),e!==null&&z2(e),n.blockedOn=t,!1;e.shift()}return!0}function F5(n,e,t){km(n)&&t.delete(e)}function DO(){jx=!1,Ml!==null&&km(Ml)&&(Ml=null),Fl!==null&&km(Fl)&&(Fl=null),jl!==null&&km(jl)&&(jl=null),Mf.forEach(F5),Ff.forEach(F5)}function Ch(n,e){n.blockedOn===e&&(n.blockedOn=null,jx||(jx=!0,Er.unstable_scheduleCallback(Er.unstable_NormalPriority,DO)))}function jf(n){function e(s){return Ch(s,n)}if(0<kg.length){Ch(kg[0],n);for(var t=1;t<kg.length;t++){var i=kg[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Ml!==null&&Ch(Ml,n),Fl!==null&&Ch(Fl,n),jl!==null&&Ch(jl,n),Mf.forEach(e),Ff.forEach(e),t=0;t<wl.length;t++)i=wl[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<wl.length&&(t=wl[0],t.blockedOn===null);)vk(t),t.blockedOn===null&&wl.shift()}var xd=Go.ReactCurrentBatchConfig,l0=!0;function OO(n,e,t,i){var s=Cn,r=xd.transition;xd.transition=null;try{Cn=1,W2(n,e,t,i)}finally{Cn=s,xd.transition=r}}function MO(n,e,t,i){var s=Cn,r=xd.transition;xd.transition=null;try{Cn=4,W2(n,e,t,i)}finally{Cn=s,xd.transition=r}}function W2(n,e,t,i){if(l0){var s=Bx(n,e,t,i);if(s===null)t1(n,e,i,c0,t),M5(n,i);else if(NO(s,n,e,t,i))i.stopPropagation();else if(M5(n,i),e&4&&-1<PO.indexOf(n)){for(;s!==null;){var r=Lp(s);if(r!==null&&pk(r),r=Bx(n,e,t,i),r===null&&t1(n,e,i,c0,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else t1(n,e,i,null,t)}}var c0=null;function Bx(n,e,t,i){if(c0=null,n=U2(i),n=Oc(n),n!==null)if(e=hu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=ak(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return c0=n,null}function xk(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_O()){case $2:return 1;case uk:return 4;case a0:case EO:return 16;case dk:return 536870912;default:return 16}default:return 16}}var Al=null,V2=null,Cm=null;function bk(){if(Cm)return Cm;var n,e=V2,t=e.length,i,s="value"in Al?Al.value:Al.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===s[r-i];i++);return Cm=s.slice(n,1<i?1-i:void 0)}function Im(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Cg(){return!0}function j5(){return!1}function Ar(n){function e(t,i,s,r,a){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Cg:j5,this.isPropagationStopped=j5,this}return ci(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Cg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Cg)},persist:function(){},isPersistent:Cg}),e}var Wd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G2=Ar(Wd),Ap=ci({},Wd,{view:0,detail:0}),FO=Ar(Ap),Gv,Yv,Ih,ly=ci({},Ap,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Y2,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ih&&(Ih&&n.type==="mousemove"?(Gv=n.screenX-Ih.screenX,Yv=n.screenY-Ih.screenY):Yv=Gv=0,Ih=n),Gv)},movementY:function(n){return"movementY"in n?n.movementY:Yv}}),B5=Ar(ly),jO=ci({},ly,{dataTransfer:0}),BO=Ar(jO),UO=ci({},Ap,{relatedTarget:0}),qv=Ar(UO),$O=ci({},Wd,{animationName:0,elapsedTime:0,pseudoElement:0}),HO=Ar($O),zO=ci({},Wd,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),WO=Ar(zO),VO=ci({},Wd,{data:0}),U5=Ar(VO),GO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KO(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=qO[n])?!!e[n]:!1}function Y2(){return KO}var XO=ci({},Ap,{key:function(n){if(n.key){var e=GO[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Im(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?YO[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Y2,charCode:function(n){return n.type==="keypress"?Im(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Im(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),QO=Ar(XO),JO=ci({},ly,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$5=Ar(JO),ZO=ci({},Ap,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Y2}),e4=Ar(ZO),t4=ci({},Wd,{propertyName:0,elapsedTime:0,pseudoElement:0}),n4=Ar(t4),i4=ci({},ly,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),s4=Ar(i4),r4=[9,13,27,32],q2=Bo&&"CompositionEvent"in window,of=null;Bo&&"documentMode"in document&&(of=document.documentMode);var a4=Bo&&"TextEvent"in window&&!of,Sk=Bo&&(!q2||of&&8<of&&11>=of),H5=" ",z5=!1;function wk(n,e){switch(n){case"keyup":return r4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _k(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var id=!1;function o4(n,e){switch(n){case"compositionend":return _k(e);case"keypress":return e.which!==32?null:(z5=!0,H5);case"textInput":return n=e.data,n===H5&&z5?null:n;default:return null}}function l4(n,e){if(id)return n==="compositionend"||!q2&&wk(n,e)?(n=bk(),Cm=V2=Al=null,id=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sk&&e.locale!=="ko"?null:e.data;default:return null}}var c4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W5(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!c4[n.type]:e==="textarea"}function Ek(n,e,t,i){tk(i),e=u0(e,"onChange"),0<e.length&&(t=new G2("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var lf=null,Bf=null;function u4(n){Ok(n,0)}function cy(n){var e=ad(n);if(qL(e))return n}function d4(n,e){if(n==="change")return e}var Tk=!1;if(Bo){var Kv;if(Bo){var Xv="oninput"in document;if(!Xv){var V5=document.createElement("div");V5.setAttribute("oninput","return;"),Xv=typeof V5.oninput=="function"}Kv=Xv}else Kv=!1;Tk=Kv&&(!document.documentMode||9<document.documentMode)}function G5(){lf&&(lf.detachEvent("onpropertychange",Ak),Bf=lf=null)}function Ak(n){if(n.propertyName==="value"&&cy(Bf)){var e=[];Ek(e,Bf,n,U2(n)),rk(u4,e)}}function h4(n,e,t){n==="focusin"?(G5(),lf=e,Bf=t,lf.attachEvent("onpropertychange",Ak)):n==="focusout"&&G5()}function f4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cy(Bf)}function p4(n,e){if(n==="click")return cy(e)}function g4(n,e){if(n==="input"||n==="change")return cy(e)}function m4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ma=typeof Object.is=="function"?Object.is:m4;function Uf(n,e){if(ma(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!Sx.call(e,s)||!ma(n[s],e[s]))return!1}return!0}function Y5(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function q5(n,e){var t=Y5(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Y5(t)}}function Lk(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Lk(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function kk(){for(var n=window,e=i0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=i0(n.document)}return e}function K2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function y4(n){var e=kk(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Lk(t.ownerDocument.documentElement,t)){if(i!==null&&K2(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=q5(t,r);var a=q5(t,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var v4=Bo&&"documentMode"in document&&11>=document.documentMode,sd=null,Ux=null,cf=null,$x=!1;function K5(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;$x||sd==null||sd!==i0(i)||(i=sd,"selectionStart"in i&&K2(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cf&&Uf(cf,i)||(cf=i,i=u0(Ux,"onSelect"),0<i.length&&(e=new G2("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=sd)))}function Ig(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var rd={animationend:Ig("Animation","AnimationEnd"),animationiteration:Ig("Animation","AnimationIteration"),animationstart:Ig("Animation","AnimationStart"),transitionend:Ig("Transition","TransitionEnd")},Qv={},Ck={};Bo&&(Ck=document.createElement("div").style,"AnimationEvent"in window||(delete rd.animationend.animation,delete rd.animationiteration.animation,delete rd.animationstart.animation),"TransitionEvent"in window||delete rd.transitionend.transition);function uy(n){if(Qv[n])return Qv[n];if(!rd[n])return n;var e=rd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Ck)return Qv[n]=e[t];return n}var Ik=uy("animationend"),Rk=uy("animationiteration"),Pk=uy("animationstart"),Nk=uy("transitionend"),Dk=new Map,X5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nc(n,e){Dk.set(n,e),du(e,[n])}for(var Jv=0;Jv<X5.length;Jv++){var Zv=X5[Jv],x4=Zv.toLowerCase(),b4=Zv[0].toUpperCase()+Zv.slice(1);nc(x4,"on"+b4)}nc(Ik,"onAnimationEnd");nc(Rk,"onAnimationIteration");nc(Pk,"onAnimationStart");nc("dblclick","onDoubleClick");nc("focusin","onFocus");nc("focusout","onBlur");nc(Nk,"onTransitionEnd");Cd("onMouseEnter",["mouseout","mouseover"]);Cd("onMouseLeave",["mouseout","mouseover"]);Cd("onPointerEnter",["pointerout","pointerover"]);Cd("onPointerLeave",["pointerout","pointerover"]);du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));du("onBeforeInput",["compositionend","keypress","textInput","paste"]);du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kh));function Q5(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,xO(i,e,void 0,n),n.currentTarget=null}function Ok(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;Q5(s,o,c),r=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;Q5(s,o,c),r=l}}}if(r0)throw n=Mx,r0=!1,Mx=null,n}function zn(n,e){var t=e[Gx];t===void 0&&(t=e[Gx]=new Set);var i=n+"__bubble";t.has(i)||(Mk(e,n,2,!1),t.add(i))}function e1(n,e,t){var i=0;e&&(i|=4),Mk(t,n,i,e)}var Rg="_reactListening"+Math.random().toString(36).slice(2);function $f(n){if(!n[Rg]){n[Rg]=!0,zL.forEach(function(t){t!=="selectionchange"&&(S4.has(t)||e1(t,!1,n),e1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Rg]||(e[Rg]=!0,e1("selectionchange",!1,e))}}function Mk(n,e,t,i){switch(xk(e)){case 1:var s=OO;break;case 4:s=MO;break;default:s=W2}t=s.bind(null,e,t,n),s=void 0,!Ox||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function t1(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Oc(o),a===null)return;if(l=a.tag,l===5||l===6){i=r=a;continue e}o=o.parentNode}}i=i.return}rk(function(){var c=r,u=U2(t),d=[];e:{var h=Dk.get(n);if(h!==void 0){var f=G2,p=n;switch(n){case"keypress":if(Im(t)===0)break e;case"keydown":case"keyup":f=QO;break;case"focusin":p="focus",f=qv;break;case"focusout":p="blur",f=qv;break;case"beforeblur":case"afterblur":f=qv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=B5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=BO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=e4;break;case Ik:case Rk:case Pk:f=HO;break;case Nk:f=n4;break;case"scroll":f=FO;break;case"wheel":f=s4;break;case"copy":case"cut":case"paste":f=WO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=$5}var m=(e&4)!==0,v=!m&&n==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var b=c,x;b!==null;){x=b;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,y!==null&&(_=Of(b,y),_!=null&&m.push(Hf(b,_,x)))),v)break;b=b.return}0<m.length&&(h=new f(h,p,null,t,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",h&&t!==Nx&&(p=t.relatedTarget||t.fromElement)&&(Oc(p)||p[Uo]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=c,p=p?Oc(p):null,p!==null&&(v=hu(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=B5,_="onMouseLeave",y="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(m=$5,_="onPointerLeave",y="onPointerEnter",b="pointer"),v=f==null?h:ad(f),x=p==null?h:ad(p),h=new m(_,b+"leave",f,t,u),h.target=v,h.relatedTarget=x,_=null,Oc(u)===c&&(m=new m(y,b+"enter",p,t,u),m.target=x,m.relatedTarget=v,_=m),v=_,f&&p)t:{for(m=f,y=p,b=0,x=m;x;x=Bu(x))b++;for(x=0,_=y;_;_=Bu(_))x++;for(;0<b-x;)m=Bu(m),b--;for(;0<x-b;)y=Bu(y),x--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=Bu(m),y=Bu(y)}m=null}else m=null;f!==null&&J5(d,h,f,m,!1),p!==null&&v!==null&&J5(d,v,p,m,!0)}}e:{if(h=c?ad(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var T=d4;else if(W5(h))if(Tk)T=g4;else{T=f4;var C=h4}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=p4);if(T&&(T=T(n,c))){Ek(d,T,t,u);break e}C&&C(n,h,c),n==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&kx(h,"number",h.value)}switch(C=c?ad(c):window,n){case"focusin":(W5(C)||C.contentEditable==="true")&&(sd=C,Ux=c,cf=null);break;case"focusout":cf=Ux=sd=null;break;case"mousedown":$x=!0;break;case"contextmenu":case"mouseup":case"dragend":$x=!1,K5(d,t,u);break;case"selectionchange":if(v4)break;case"keydown":case"keyup":K5(d,t,u)}var L;if(q2)e:{switch(n){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else id?wk(n,t)&&(k="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(Sk&&t.locale!=="ko"&&(id||k!=="onCompositionStart"?k==="onCompositionEnd"&&id&&(L=bk()):(Al=u,V2="value"in Al?Al.value:Al.textContent,id=!0)),C=u0(c,k),0<C.length&&(k=new U5(k,n,null,t,u),d.push({event:k,listeners:C}),L?k.data=L:(L=_k(t),L!==null&&(k.data=L)))),(L=a4?o4(n,t):l4(n,t))&&(c=u0(c,"onBeforeInput"),0<c.length&&(u=new U5("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=L))}Ok(d,e)})}function Hf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function u0(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Of(n,t),r!=null&&i.unshift(Hf(n,r,s)),r=Of(n,e),r!=null&&i.push(Hf(n,r,s))),n=n.return}return i}function Bu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function J5(n,e,t,i,s){for(var r=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&c!==null&&(o=c,s?(l=Of(t,r),l!=null&&a.unshift(Hf(t,l,o))):s||(l=Of(t,r),l!=null&&a.push(Hf(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var w4=/\r\n?/g,_4=/\u0000|\uFFFD/g;function Z5(n){return(typeof n=="string"?n:""+n).replace(w4,`
`).replace(_4,"")}function Pg(n,e,t){if(e=Z5(e),Z5(n)!==e&&t)throw Error(He(425))}function d0(){}var Hx=null,zx=null;function Wx(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vx=typeof setTimeout=="function"?setTimeout:void 0,E4=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,T4=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(n){return e_.resolve(null).then(n).catch(A4)}:Vx;function A4(n){setTimeout(function(){throw n})}function n1(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),jf(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);jf(e)}function Bl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function t_(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Vd=Math.random().toString(36).slice(2),Ba="__reactFiber$"+Vd,zf="__reactProps$"+Vd,Uo="__reactContainer$"+Vd,Gx="__reactEvents$"+Vd,L4="__reactListeners$"+Vd,k4="__reactHandles$"+Vd;function Oc(n){var e=n[Ba];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Uo]||t[Ba]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=t_(n);n!==null;){if(t=n[Ba])return t;n=t_(n)}return e}n=t,t=n.parentNode}return null}function Lp(n){return n=n[Ba]||n[Uo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ad(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(He(33))}function dy(n){return n[zf]||null}var Yx=[],od=-1;function ic(n){return{current:n}}function Vn(n){0>od||(n.current=Yx[od],Yx[od]=null,od--)}function Hn(n,e){od++,Yx[od]=n.current,n.current=e}var Kl={},Rs=ic(Kl),ir=ic(!1),nu=Kl;function Id(n,e){var t=n.type.contextTypes;if(!t)return Kl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function sr(n){return n=n.childContextTypes,n!=null}function h0(){Vn(ir),Vn(Rs)}function n_(n,e,t){if(Rs.current!==Kl)throw Error(He(168));Hn(Rs,e),Hn(ir,t)}function Fk(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(He(108,hO(n)||"Unknown",s));return ci({},t,i)}function f0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Kl,nu=Rs.current,Hn(Rs,n),Hn(ir,ir.current),!0}function i_(n,e,t){var i=n.stateNode;if(!i)throw Error(He(169));t?(n=Fk(n,e,nu),i.__reactInternalMemoizedMergedChildContext=n,Vn(ir),Vn(Rs),Hn(Rs,n)):Vn(ir),Hn(ir,t)}var _o=null,hy=!1,i1=!1;function jk(n){_o===null?_o=[n]:_o.push(n)}function C4(n){hy=!0,jk(n)}function sc(){if(!i1&&_o!==null){i1=!0;var n=0,e=Cn;try{var t=_o;for(Cn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}_o=null,hy=!1}catch(s){throw _o!==null&&(_o=_o.slice(n+1)),ck($2,sc),s}finally{Cn=e,i1=!1}}return null}var ld=[],cd=0,p0=null,g0=0,Br=[],Ur=0,iu=null,Ao=1,Lo="";function Ac(n,e){ld[cd++]=g0,ld[cd++]=p0,p0=n,g0=e}function Bk(n,e,t){Br[Ur++]=Ao,Br[Ur++]=Lo,Br[Ur++]=iu,iu=n;var i=Ao;n=Lo;var s=32-fa(i)-1;i&=~(1<<s),t+=1;var r=32-fa(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Ao=1<<32-fa(e)+s|t<<s|i,Lo=r+n}else Ao=1<<r|t<<s|i,Lo=n}function X2(n){n.return!==null&&(Ac(n,1),Bk(n,1,0))}function Q2(n){for(;n===p0;)p0=ld[--cd],ld[cd]=null,g0=ld[--cd],ld[cd]=null;for(;n===iu;)iu=Br[--Ur],Br[Ur]=null,Lo=Br[--Ur],Br[Ur]=null,Ao=Br[--Ur],Br[Ur]=null}var wr=null,br=null,Zn=!1,ca=null;function Uk(n,e){var t=zr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function s_(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,wr=n,br=Bl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,wr=n,br=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=iu!==null?{id:Ao,overflow:Lo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=zr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,wr=n,br=null,!0):!1;default:return!1}}function qx(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Kx(n){if(Zn){var e=br;if(e){var t=e;if(!s_(n,e)){if(qx(n))throw Error(He(418));e=Bl(t.nextSibling);var i=wr;e&&s_(n,e)?Uk(i,t):(n.flags=n.flags&-4097|2,Zn=!1,wr=n)}}else{if(qx(n))throw Error(He(418));n.flags=n.flags&-4097|2,Zn=!1,wr=n}}}function r_(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;wr=n}function Ng(n){if(n!==wr)return!1;if(!Zn)return r_(n),Zn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Wx(n.type,n.memoizedProps)),e&&(e=br)){if(qx(n))throw $k(),Error(He(418));for(;e;)Uk(n,e),e=Bl(e.nextSibling)}if(r_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(He(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){br=Bl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}br=null}}else br=wr?Bl(n.stateNode.nextSibling):null;return!0}function $k(){for(var n=br;n;)n=Bl(n.nextSibling)}function Rd(){br=wr=null,Zn=!1}function J2(n){ca===null?ca=[n]:ca.push(n)}var I4=Go.ReactCurrentBatchConfig;function Rh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(He(309));var i=t.stateNode}if(!i)throw Error(He(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(a){var o=s.refs;a===null?delete o[r]:o[r]=a},e._stringRef=r,e)}if(typeof n!="string")throw Error(He(284));if(!t._owner)throw Error(He(290,n))}return n}function Dg(n,e){throw n=Object.prototype.toString.call(e),Error(He(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function a_(n){var e=n._init;return e(n._payload)}function Hk(n){function e(y,b){if(n){var x=y.deletions;x===null?(y.deletions=[b],y.flags|=16):x.push(b)}}function t(y,b){if(!n)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function i(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=zl(y,b),y.index=0,y.sibling=null,y}function r(y,b,x){return y.index=x,n?(x=y.alternate,x!==null?(x=x.index,x<b?(y.flags|=2,b):x):(y.flags|=2,b)):(y.flags|=1048576,b)}function a(y){return n&&y.alternate===null&&(y.flags|=2),y}function o(y,b,x,_){return b===null||b.tag!==6?(b=u1(x,y.mode,_),b.return=y,b):(b=s(b,x),b.return=y,b)}function l(y,b,x,_){var T=x.type;return T===nd?u(y,b,x.props.children,_,x.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===yl&&a_(T)===b.type)?(_=s(b,x.props),_.ref=Rh(y,b,x),_.return=y,_):(_=Fm(x.type,x.key,x.props,null,y.mode,_),_.ref=Rh(y,b,x),_.return=y,_)}function c(y,b,x,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=d1(x,y.mode,_),b.return=y,b):(b=s(b,x.children||[]),b.return=y,b)}function u(y,b,x,_,T){return b===null||b.tag!==7?(b=Vc(x,y.mode,_,T),b.return=y,b):(b=s(b,x),b.return=y,b)}function d(y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=u1(""+b,y.mode,x),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _g:return x=Fm(b.type,b.key,b.props,null,y.mode,x),x.ref=Rh(y,null,b),x.return=y,x;case td:return b=d1(b,y.mode,x),b.return=y,b;case yl:var _=b._init;return d(y,_(b._payload),x)}if(Yh(b)||Ah(b))return b=Vc(b,y.mode,x,null),b.return=y,b;Dg(y,b)}return null}function h(y,b,x,_){var T=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:o(y,b,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _g:return x.key===T?l(y,b,x,_):null;case td:return x.key===T?c(y,b,x,_):null;case yl:return T=x._init,h(y,b,T(x._payload),_)}if(Yh(x)||Ah(x))return T!==null?null:u(y,b,x,_,null);Dg(y,x)}return null}function f(y,b,x,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(x)||null,o(b,y,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case _g:return y=y.get(_.key===null?x:_.key)||null,l(b,y,_,T);case td:return y=y.get(_.key===null?x:_.key)||null,c(b,y,_,T);case yl:var C=_._init;return f(y,b,x,C(_._payload),T)}if(Yh(_)||Ah(_))return y=y.get(x)||null,u(b,y,_,T,null);Dg(b,_)}return null}function p(y,b,x,_){for(var T=null,C=null,L=b,k=b=0,M=null;L!==null&&k<x.length;k++){L.index>k?(M=L,L=null):M=L.sibling;var D=h(y,L,x[k],_);if(D===null){L===null&&(L=M);break}n&&L&&D.alternate===null&&e(y,L),b=r(D,b,k),C===null?T=D:C.sibling=D,C=D,L=M}if(k===x.length)return t(y,L),Zn&&Ac(y,k),T;if(L===null){for(;k<x.length;k++)L=d(y,x[k],_),L!==null&&(b=r(L,b,k),C===null?T=L:C.sibling=L,C=L);return Zn&&Ac(y,k),T}for(L=i(y,L);k<x.length;k++)M=f(L,y,k,x[k],_),M!==null&&(n&&M.alternate!==null&&L.delete(M.key===null?k:M.key),b=r(M,b,k),C===null?T=M:C.sibling=M,C=M);return n&&L.forEach(function(I){return e(y,I)}),Zn&&Ac(y,k),T}function m(y,b,x,_){var T=Ah(x);if(typeof T!="function")throw Error(He(150));if(x=T.call(x),x==null)throw Error(He(151));for(var C=T=null,L=b,k=b=0,M=null,D=x.next();L!==null&&!D.done;k++,D=x.next()){L.index>k?(M=L,L=null):M=L.sibling;var I=h(y,L,D.value,_);if(I===null){L===null&&(L=M);break}n&&L&&I.alternate===null&&e(y,L),b=r(I,b,k),C===null?T=I:C.sibling=I,C=I,L=M}if(D.done)return t(y,L),Zn&&Ac(y,k),T;if(L===null){for(;!D.done;k++,D=x.next())D=d(y,D.value,_),D!==null&&(b=r(D,b,k),C===null?T=D:C.sibling=D,C=D);return Zn&&Ac(y,k),T}for(L=i(y,L);!D.done;k++,D=x.next())D=f(L,y,k,D.value,_),D!==null&&(n&&D.alternate!==null&&L.delete(D.key===null?k:D.key),b=r(D,b,k),C===null?T=D:C.sibling=D,C=D);return n&&L.forEach(function(R){return e(y,R)}),Zn&&Ac(y,k),T}function v(y,b,x,_){if(typeof x=="object"&&x!==null&&x.type===nd&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case _g:e:{for(var T=x.key,C=b;C!==null;){if(C.key===T){if(T=x.type,T===nd){if(C.tag===7){t(y,C.sibling),b=s(C,x.props.children),b.return=y,y=b;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===yl&&a_(T)===C.type){t(y,C.sibling),b=s(C,x.props),b.ref=Rh(y,C,x),b.return=y,y=b;break e}t(y,C);break}else e(y,C);C=C.sibling}x.type===nd?(b=Vc(x.props.children,y.mode,_,x.key),b.return=y,y=b):(_=Fm(x.type,x.key,x.props,null,y.mode,_),_.ref=Rh(y,b,x),_.return=y,y=_)}return a(y);case td:e:{for(C=x.key;b!==null;){if(b.key===C)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){t(y,b.sibling),b=s(b,x.children||[]),b.return=y,y=b;break e}else{t(y,b);break}else e(y,b);b=b.sibling}b=d1(x,y.mode,_),b.return=y,y=b}return a(y);case yl:return C=x._init,v(y,b,C(x._payload),_)}if(Yh(x))return p(y,b,x,_);if(Ah(x))return m(y,b,x,_);Dg(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(t(y,b.sibling),b=s(b,x),b.return=y,y=b):(t(y,b),b=u1(x,y.mode,_),b.return=y,y=b),a(y)):t(y,b)}return v}var Pd=Hk(!0),zk=Hk(!1),m0=ic(null),y0=null,ud=null,Z2=null;function eS(){Z2=ud=y0=null}function tS(n){var e=m0.current;Vn(m0),n._currentValue=e}function Xx(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function bd(n,e){y0=n,Z2=ud=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(nr=!0),n.firstContext=null)}function Vr(n){var e=n._currentValue;if(Z2!==n)if(n={context:n,memoizedValue:e,next:null},ud===null){if(y0===null)throw Error(He(308));ud=n,y0.dependencies={lanes:0,firstContext:n}}else ud=ud.next=n;return e}var Mc=null;function nS(n){Mc===null?Mc=[n]:Mc.push(n)}function Wk(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,nS(e)):(t.next=s.next,s.next=t),e.interleaved=t,$o(n,i)}function $o(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var vl=!1;function iS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vk(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Oo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ul(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,hn&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,$o(n,t)}return s=i.interleaved,s===null?(e.next=e,nS(i)):(e.next=s.next,s.next=e),i.interleaved=e,$o(n,t)}function Rm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,H2(n,t)}}function o_(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=a:r=r.next=a,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function v0(n,e,t,i){var s=n.updateQueue;vl=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?r=c:a.next=c,a=l;var u=n.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;a=0,u=c=l=null,o=r;do{var h=o.lane,f=o.eventTime;if((i&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=n,m=o;switch(h=e,f=t,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=ci({},d,h);break e;case 2:vl=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,h=s.effects,h===null?s.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,a|=h;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;h=o,o=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);ru|=a,n.lanes=a,n.memoizedState=d}}function l_(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(He(191,s));s.call(i)}}}var kp={},Ga=ic(kp),Wf=ic(kp),Vf=ic(kp);function Fc(n){if(n===kp)throw Error(He(174));return n}function sS(n,e){switch(Hn(Vf,e),Hn(Wf,n),Hn(Ga,kp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ix(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Ix(e,n)}Vn(Ga),Hn(Ga,e)}function Nd(){Vn(Ga),Vn(Wf),Vn(Vf)}function Gk(n){Fc(Vf.current);var e=Fc(Ga.current),t=Ix(e,n.type);e!==t&&(Hn(Wf,n),Hn(Ga,t))}function rS(n){Wf.current===n&&(Vn(Ga),Vn(Wf))}var oi=ic(0);function x0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var s1=[];function aS(){for(var n=0;n<s1.length;n++)s1[n]._workInProgressVersionPrimary=null;s1.length=0}var Pm=Go.ReactCurrentDispatcher,r1=Go.ReactCurrentBatchConfig,su=0,li=null,Wi=null,ns=null,b0=!1,uf=!1,Gf=0,R4=0;function vs(){throw Error(He(321))}function oS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ma(n[t],e[t]))return!1;return!0}function lS(n,e,t,i,s,r){if(su=r,li=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pm.current=n===null||n.memoizedState===null?O4:M4,n=t(i,s),uf){r=0;do{if(uf=!1,Gf=0,25<=r)throw Error(He(301));r+=1,ns=Wi=null,e.updateQueue=null,Pm.current=F4,n=t(i,s)}while(uf)}if(Pm.current=S0,e=Wi!==null&&Wi.next!==null,su=0,ns=Wi=li=null,b0=!1,e)throw Error(He(300));return n}function cS(){var n=Gf!==0;return Gf=0,n}function Da(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?li.memoizedState=ns=n:ns=ns.next=n,ns}function Gr(){if(Wi===null){var n=li.alternate;n=n!==null?n.memoizedState:null}else n=Wi.next;var e=ns===null?li.memoizedState:ns.next;if(e!==null)ns=e,Wi=n;else{if(n===null)throw Error(He(310));Wi=n,n={memoizedState:Wi.memoizedState,baseState:Wi.baseState,baseQueue:Wi.baseQueue,queue:Wi.queue,next:null},ns===null?li.memoizedState=ns=n:ns=ns.next=n}return ns}function Yf(n,e){return typeof e=="function"?e(n):e}function a1(n){var e=Gr(),t=e.queue;if(t===null)throw Error(He(311));t.lastRenderedReducer=n;var i=Wi,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var o=a=null,l=null,c=r;do{var u=c.lane;if((su&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=i):l=l.next=d,li.lanes|=u,ru|=u}c=c.next}while(c!==null&&c!==r);l===null?a=i:l.next=o,ma(i,e.memoizedState)||(nr=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,li.lanes|=r,ru|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function o1(n){var e=Gr(),t=e.queue;if(t===null)throw Error(He(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do r=n(r,a.action),a=a.next;while(a!==s);ma(r,e.memoizedState)||(nr=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function Yk(){}function qk(n,e){var t=li,i=Gr(),s=e(),r=!ma(i.memoizedState,s);if(r&&(i.memoizedState=s,nr=!0),i=i.queue,uS(Qk.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||ns!==null&&ns.memoizedState.tag&1){if(t.flags|=2048,qf(9,Xk.bind(null,t,i,s,e),void 0,null),rs===null)throw Error(He(349));su&30||Kk(t,e,s)}return s}function Kk(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=li.updateQueue,e===null?(e={lastEffect:null,stores:null},li.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Xk(n,e,t,i){e.value=t,e.getSnapshot=i,Jk(e)&&Zk(n)}function Qk(n,e,t){return t(function(){Jk(e)&&Zk(n)})}function Jk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ma(n,t)}catch{return!0}}function Zk(n){var e=$o(n,1);e!==null&&pa(e,n,1,-1)}function c_(n){var e=Da();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yf,lastRenderedState:n},e.queue=n,n=n.dispatch=D4.bind(null,li,n),[e.memoizedState,n]}function qf(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=li.updateQueue,e===null?(e={lastEffect:null,stores:null},li.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function eC(){return Gr().memoizedState}function Nm(n,e,t,i){var s=Da();li.flags|=n,s.memoizedState=qf(1|e,t,void 0,i===void 0?null:i)}function fy(n,e,t,i){var s=Gr();i=i===void 0?null:i;var r=void 0;if(Wi!==null){var a=Wi.memoizedState;if(r=a.destroy,i!==null&&oS(i,a.deps)){s.memoizedState=qf(e,t,r,i);return}}li.flags|=n,s.memoizedState=qf(1|e,t,r,i)}function u_(n,e){return Nm(8390656,8,n,e)}function uS(n,e){return fy(2048,8,n,e)}function tC(n,e){return fy(4,2,n,e)}function nC(n,e){return fy(4,4,n,e)}function iC(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function sC(n,e,t){return t=t!=null?t.concat([n]):null,fy(4,4,iC.bind(null,e,n),t)}function dS(){}function rC(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&oS(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function aC(n,e){var t=Gr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&oS(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function oC(n,e,t){return su&21?(ma(t,e)||(t=hk(),li.lanes|=t,ru|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,nr=!0),n.memoizedState=t)}function P4(n,e){var t=Cn;Cn=t!==0&&4>t?t:4,n(!0);var i=r1.transition;r1.transition={};try{n(!1),e()}finally{Cn=t,r1.transition=i}}function lC(){return Gr().memoizedState}function N4(n,e,t){var i=Hl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},cC(n))uC(e,t);else if(t=Wk(n,e,t,i),t!==null){var s=$s();pa(t,n,i,s),dC(t,e,i)}}function D4(n,e,t){var i=Hl(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(cC(n))uC(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,t);if(s.hasEagerState=!0,s.eagerState=o,ma(o,a)){var l=e.interleaved;l===null?(s.next=s,nS(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=Wk(n,e,s,i),t!==null&&(s=$s(),pa(t,n,i,s),dC(t,e,i))}}function cC(n){var e=n.alternate;return n===li||e!==null&&e===li}function uC(n,e){uf=b0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function dC(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,H2(n,t)}}var S0={readContext:Vr,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useInsertionEffect:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useSyncExternalStore:vs,useId:vs,unstable_isNewReconciler:!1},O4={readContext:Vr,useCallback:function(n,e){return Da().memoizedState=[n,e===void 0?null:e],n},useContext:Vr,useEffect:u_,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Nm(4194308,4,iC.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Nm(4194308,4,n,e)},useInsertionEffect:function(n,e){return Nm(4,2,n,e)},useMemo:function(n,e){var t=Da();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Da();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=N4.bind(null,li,n),[i.memoizedState,n]},useRef:function(n){var e=Da();return n={current:n},e.memoizedState=n},useState:c_,useDebugValue:dS,useDeferredValue:function(n){return Da().memoizedState=n},useTransition:function(){var n=c_(!1),e=n[0];return n=P4.bind(null,n[1]),Da().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=li,s=Da();if(Zn){if(t===void 0)throw Error(He(407));t=t()}else{if(t=e(),rs===null)throw Error(He(349));su&30||Kk(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,u_(Qk.bind(null,i,r,n),[n]),i.flags|=2048,qf(9,Xk.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=Da(),e=rs.identifierPrefix;if(Zn){var t=Lo,i=Ao;t=(i&~(1<<32-fa(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Gf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=R4++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},M4={readContext:Vr,useCallback:rC,useContext:Vr,useEffect:uS,useImperativeHandle:sC,useInsertionEffect:tC,useLayoutEffect:nC,useMemo:aC,useReducer:a1,useRef:eC,useState:function(){return a1(Yf)},useDebugValue:dS,useDeferredValue:function(n){var e=Gr();return oC(e,Wi.memoizedState,n)},useTransition:function(){var n=a1(Yf)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:Yk,useSyncExternalStore:qk,useId:lC,unstable_isNewReconciler:!1},F4={readContext:Vr,useCallback:rC,useContext:Vr,useEffect:uS,useImperativeHandle:sC,useInsertionEffect:tC,useLayoutEffect:nC,useMemo:aC,useReducer:o1,useRef:eC,useState:function(){return o1(Yf)},useDebugValue:dS,useDeferredValue:function(n){var e=Gr();return Wi===null?e.memoizedState=n:oC(e,Wi.memoizedState,n)},useTransition:function(){var n=o1(Yf)[0],e=Gr().memoizedState;return[n,e]},useMutableSource:Yk,useSyncExternalStore:qk,useId:lC,unstable_isNewReconciler:!1};function ra(n,e){if(n&&n.defaultProps){e=ci({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Qx(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:ci({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var py={isMounted:function(n){return(n=n._reactInternals)?hu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=$s(),s=Hl(n),r=Oo(i,s);r.payload=e,t!=null&&(r.callback=t),e=Ul(n,r,s),e!==null&&(pa(e,n,s,i),Rm(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=$s(),s=Hl(n),r=Oo(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Ul(n,r,s),e!==null&&(pa(e,n,s,i),Rm(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=$s(),i=Hl(n),s=Oo(t,i);s.tag=2,e!=null&&(s.callback=e),e=Ul(n,s,i),e!==null&&(pa(e,n,i,t),Rm(e,n,i))}};function d_(n,e,t,i,s,r,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!Uf(t,i)||!Uf(s,r):!0}function hC(n,e,t){var i=!1,s=Kl,r=e.contextType;return typeof r=="object"&&r!==null?r=Vr(r):(s=sr(e)?nu:Rs.current,i=e.contextTypes,r=(i=i!=null)?Id(n,s):Kl),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=py,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function h_(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&py.enqueueReplaceState(e,e.state,null)}function Jx(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},iS(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Vr(r):(r=sr(e)?nu:Rs.current,s.context=Id(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Qx(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&py.enqueueReplaceState(s,s.state,null),v0(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Dd(n,e){try{var t="",i=e;do t+=dO(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function l1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Zx(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var j4=typeof WeakMap=="function"?WeakMap:Map;function fC(n,e,t){t=Oo(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){_0||(_0=!0,cb=i),Zx(n,e)},t}function pC(n,e,t){t=Oo(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){Zx(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Zx(n,e),typeof i!="function"&&($l===null?$l=new Set([this]):$l.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function f_(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new j4;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=J4.bind(null,n,e,t),e.then(n,n))}function p_(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function g_(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Oo(-1,1),e.tag=2,Ul(t,e,1))),t.lanes|=1),n)}var B4=Go.ReactCurrentOwner,nr=!1;function Us(n,e,t,i){e.child=n===null?zk(e,null,t,i):Pd(e,n.child,t,i)}function m_(n,e,t,i,s){t=t.render;var r=e.ref;return bd(e,s),i=lS(n,e,t,i,r,s),t=cS(),n!==null&&!nr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ho(n,e,s)):(Zn&&t&&X2(e),e.flags|=1,Us(n,e,i,s),e.child)}function y_(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!xS(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,gC(n,e,r,i,s)):(n=Fm(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var a=r.memoizedProps;if(t=t.compare,t=t!==null?t:Uf,t(a,i)&&n.ref===e.ref)return Ho(n,e,s)}return e.flags|=1,n=zl(r,i),n.ref=e.ref,n.return=e,e.child=n}function gC(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(Uf(r,i)&&n.ref===e.ref)if(nr=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(nr=!0);else return e.lanes=n.lanes,Ho(n,e,s)}return eb(n,e,t,i,s)}function mC(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hn(hd,gr),gr|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Hn(hd,gr),gr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,Hn(hd,gr),gr|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,Hn(hd,gr),gr|=i;return Us(n,e,s,t),e.child}function yC(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function eb(n,e,t,i,s){var r=sr(t)?nu:Rs.current;return r=Id(e,r),bd(e,s),t=lS(n,e,t,i,r,s),i=cS(),n!==null&&!nr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ho(n,e,s)):(Zn&&i&&X2(e),e.flags|=1,Us(n,e,t,s),e.child)}function v_(n,e,t,i,s){if(sr(t)){var r=!0;f0(e)}else r=!1;if(bd(e,s),e.stateNode===null)Dm(n,e),hC(e,t,i),Jx(e,t,i,s),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=Vr(c):(c=sr(t)?nu:Rs.current,c=Id(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==c)&&h_(e,a,i,c),vl=!1;var h=e.memoizedState;a.state=h,v0(e,i,a,s),l=e.memoizedState,o!==i||h!==l||ir.current||vl?(typeof u=="function"&&(Qx(e,t,u,i),l=e.memoizedState),(o=vl||d_(e,t,o,i,h,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,Vk(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:ra(e.type,o),a.props=c,d=e.pendingProps,h=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Vr(l):(l=sr(t)?nu:Rs.current,l=Id(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&h_(e,a,i,l),vl=!1,h=e.memoizedState,a.state=h,v0(e,i,a,s);var p=e.memoizedState;o!==d||h!==p||ir.current||vl?(typeof f=="function"&&(Qx(e,t,f,i),p=e.memoizedState),(c=vl||d_(e,t,c,i,h,p,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return tb(n,e,t,i,r,s)}function tb(n,e,t,i,s,r){yC(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&i_(e,t,!1),Ho(n,e,r);i=e.stateNode,B4.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Pd(e,n.child,null,r),e.child=Pd(e,null,o,r)):Us(n,e,o,r),e.memoizedState=i.state,s&&i_(e,t,!0),e.child}function vC(n){var e=n.stateNode;e.pendingContext?n_(n,e.pendingContext,e.pendingContext!==e.context):e.context&&n_(n,e.context,!1),sS(n,e.containerInfo)}function x_(n,e,t,i,s){return Rd(),J2(s),e.flags|=256,Us(n,e,t,i),e.child}var nb={dehydrated:null,treeContext:null,retryLane:0};function ib(n){return{baseLanes:n,cachePool:null,transitions:null}}function xC(n,e,t){var i=e.pendingProps,s=oi.current,r=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Hn(oi,s&1),n===null)return Kx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,r?(i=e.mode,r=e.child,a={mode:"hidden",children:a},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=a):r=yy(a,i,0,null),n=Vc(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=ib(t),e.memoizedState=nb,n):hS(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return U4(n,e,a,i,o,s,t);if(r){r=i.fallback,a=e.mode,s=n.child,o=s.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=zl(s,l),i.subtreeFlags=s.subtreeFlags&14680064),o!==null?r=zl(o,r):(r=Vc(r,a,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,a=n.child.memoizedState,a=a===null?ib(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},r.memoizedState=a,r.childLanes=n.childLanes&~t,e.memoizedState=nb,i}return r=n.child,n=r.sibling,i=zl(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function hS(n,e){return e=yy({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Og(n,e,t,i){return i!==null&&J2(i),Pd(e,n.child,null,t),n=hS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function U4(n,e,t,i,s,r,a){if(t)return e.flags&256?(e.flags&=-257,i=l1(Error(He(422))),Og(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=yy({mode:"visible",children:i.children},s,0,null),r=Vc(r,s,a,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Pd(e,n.child,null,a),e.child.memoizedState=ib(a),e.memoizedState=nb,r);if(!(e.mode&1))return Og(n,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var o=i.dgst;return i=o,r=Error(He(419)),i=l1(r,i,void 0),Og(n,e,a,i)}if(o=(a&n.childLanes)!==0,nr||o){if(i=rs,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,$o(n,s),pa(i,n,s,-1))}return vS(),i=l1(Error(He(421))),Og(n,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=Z4.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,br=Bl(s.nextSibling),wr=e,Zn=!0,ca=null,n!==null&&(Br[Ur++]=Ao,Br[Ur++]=Lo,Br[Ur++]=iu,Ao=n.id,Lo=n.overflow,iu=e),e=hS(e,i.children),e.flags|=4096,e)}function b_(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),Xx(n.return,e,t)}function c1(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function bC(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Us(n,e,i.children,t),i=oi.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&b_(n,t,e);else if(n.tag===19)b_(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Hn(oi,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&x0(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),c1(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&x0(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}c1(e,!0,t,null,r);break;case"together":c1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ho(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ru|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(He(153));if(e.child!==null){for(n=e.child,t=zl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=zl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function $4(n,e,t){switch(e.tag){case 3:vC(e),Rd();break;case 5:Gk(e);break;case 1:sr(e.type)&&f0(e);break;case 4:sS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Hn(m0,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Hn(oi,oi.current&1),e.flags|=128,null):t&e.child.childLanes?xC(n,e,t):(Hn(oi,oi.current&1),n=Ho(n,e,t),n!==null?n.sibling:null);Hn(oi,oi.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return bC(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Hn(oi,oi.current),i)break;return null;case 22:case 23:return e.lanes=0,mC(n,e,t)}return Ho(n,e,t)}var SC,sb,wC,_C;SC=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};sb=function(){};wC=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Fc(Ga.current);var r=null;switch(t){case"input":s=Ax(n,s),i=Ax(n,i),r=[];break;case"select":s=ci({},s,{value:void 0}),i=ci({},i,{value:void 0}),r=[];break;case"textarea":s=Cx(n,s),i=Cx(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=d0)}Rx(t,i);var a;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Nf.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(o=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Nf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&zn("scroll",n),r||o===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};_C=function(n,e,t,i){t!==i&&(e.flags|=4)};function Ph(n,e){if(!Zn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function xs(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function H4(n,e,t){var i=e.pendingProps;switch(Q2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(e),null;case 1:return sr(e.type)&&h0(),xs(e),null;case 3:return i=e.stateNode,Nd(),Vn(ir),Vn(Rs),aS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Ng(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ca!==null&&(hb(ca),ca=null))),sb(n,e),xs(e),null;case 5:rS(e);var s=Fc(Vf.current);if(t=e.type,n!==null&&e.stateNode!=null)wC(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(He(166));return xs(e),null}if(n=Fc(Ga.current),Ng(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[Ba]=e,i[zf]=r,n=(e.mode&1)!==0,t){case"dialog":zn("cancel",i),zn("close",i);break;case"iframe":case"object":case"embed":zn("load",i);break;case"video":case"audio":for(s=0;s<Kh.length;s++)zn(Kh[s],i);break;case"source":zn("error",i);break;case"img":case"image":case"link":zn("error",i),zn("load",i);break;case"details":zn("toggle",i);break;case"input":C5(i,r),zn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},zn("invalid",i);break;case"textarea":R5(i,r),zn("invalid",i)}Rx(t,r),s=null;for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];a==="children"?typeof o=="string"?i.textContent!==o&&(r.suppressHydrationWarning!==!0&&Pg(i.textContent,o,n),s=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&Pg(i.textContent,o,n),s=["children",""+o]):Nf.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&zn("scroll",i)}switch(t){case"input":Eg(i),I5(i,r,!0);break;case"textarea":Eg(i),P5(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=d0)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=QL(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[Ba]=e,n[zf]=i,SC(n,e,!1,!1),e.stateNode=n;e:{switch(a=Px(t,i),t){case"dialog":zn("cancel",n),zn("close",n),s=i;break;case"iframe":case"object":case"embed":zn("load",n),s=i;break;case"video":case"audio":for(s=0;s<Kh.length;s++)zn(Kh[s],n);s=i;break;case"source":zn("error",n),s=i;break;case"img":case"image":case"link":zn("error",n),zn("load",n),s=i;break;case"details":zn("toggle",n),s=i;break;case"input":C5(n,i),s=Ax(n,i),zn("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=ci({},i,{value:void 0}),zn("invalid",n);break;case"textarea":R5(n,i),s=Cx(n,i),zn("invalid",n);break;default:s=i}Rx(t,s),o=s;for(r in o)if(o.hasOwnProperty(r)){var l=o[r];r==="style"?ek(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&JL(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Df(n,l):typeof l=="number"&&Df(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Nf.hasOwnProperty(r)?l!=null&&r==="onScroll"&&zn("scroll",n):l!=null&&M2(n,r,l,a))}switch(t){case"input":Eg(n),I5(n,i,!1);break;case"textarea":Eg(n),P5(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ql(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?md(n,!!i.multiple,r,!1):i.defaultValue!=null&&md(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=d0)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xs(e),null;case 6:if(n&&e.stateNode!=null)_C(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(He(166));if(t=Fc(Vf.current),Fc(Ga.current),Ng(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ba]=e,(r=i.nodeValue!==t)&&(n=wr,n!==null))switch(n.tag){case 3:Pg(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pg(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ba]=e,e.stateNode=i}return xs(e),null;case 13:if(Vn(oi),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Zn&&br!==null&&e.mode&1&&!(e.flags&128))$k(),Rd(),e.flags|=98560,r=!1;else if(r=Ng(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(He(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(He(317));r[Ba]=e}else Rd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xs(e),r=!1}else ca!==null&&(hb(ca),ca=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||oi.current&1?Yi===0&&(Yi=3):vS())),e.updateQueue!==null&&(e.flags|=4),xs(e),null);case 4:return Nd(),sb(n,e),n===null&&$f(e.stateNode.containerInfo),xs(e),null;case 10:return tS(e.type._context),xs(e),null;case 17:return sr(e.type)&&h0(),xs(e),null;case 19:if(Vn(oi),r=e.memoizedState,r===null)return xs(e),null;if(i=(e.flags&128)!==0,a=r.rendering,a===null)if(i)Ph(r,!1);else{if(Yi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=x0(n),a!==null){for(e.flags|=128,Ph(r,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,a=r.alternate,a===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,n=a.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Hn(oi,oi.current&1|2),e.child}n=n.sibling}r.tail!==null&&Ti()>Od&&(e.flags|=128,i=!0,Ph(r,!1),e.lanes=4194304)}else{if(!i)if(n=x0(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ph(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Zn)return xs(e),null}else 2*Ti()-r.renderingStartTime>Od&&t!==1073741824&&(e.flags|=128,i=!0,Ph(r,!1),e.lanes=4194304);r.isBackwards?(a.sibling=e.child,e.child=a):(t=r.last,t!==null?t.sibling=a:e.child=a,r.last=a)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ti(),e.sibling=null,t=oi.current,Hn(oi,i?t&1|2:t&1),e):(xs(e),null);case 22:case 23:return yS(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?gr&1073741824&&(xs(e),e.subtreeFlags&6&&(e.flags|=8192)):xs(e),null;case 24:return null;case 25:return null}throw Error(He(156,e.tag))}function z4(n,e){switch(Q2(e),e.tag){case 1:return sr(e.type)&&h0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Nd(),Vn(ir),Vn(Rs),aS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return rS(e),null;case 13:if(Vn(oi),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(He(340));Rd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Vn(oi),null;case 4:return Nd(),null;case 10:return tS(e.type._context),null;case 22:case 23:return yS(),null;case 24:return null;default:return null}}var Mg=!1,As=!1,W4=typeof WeakSet=="function"?WeakSet:Set,at=null;function dd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){gi(n,e,i)}else t.current=null}function rb(n,e,t){try{t()}catch(i){gi(n,e,i)}}var S_=!1;function V4(n,e){if(Hx=l0,n=kk(),K2(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var f;d!==t||s!==0&&d.nodeType!==3||(o=a+s),d!==r||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===n)break t;if(h===t&&++c===s&&(o=a),h===r&&++u===i&&(l=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(zx={focusedElem:n,selectionRange:t},l0=!1,at=e;at!==null;)if(e=at,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,at=n;else for(;at!==null;){e=at;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ra(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(He(163))}}catch(_){gi(e,e.return,_)}if(n=e.sibling,n!==null){n.return=e.return,at=n;break}at=e.return}return p=S_,S_=!1,p}function df(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&rb(e,t,r)}s=s.next}while(s!==i)}}function gy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function ab(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function EC(n){var e=n.alternate;e!==null&&(n.alternate=null,EC(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ba],delete e[zf],delete e[Gx],delete e[L4],delete e[k4])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function TC(n){return n.tag===5||n.tag===3||n.tag===4}function w_(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||TC(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ob(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=d0));else if(i!==4&&(n=n.child,n!==null))for(ob(n,e,t),n=n.sibling;n!==null;)ob(n,e,t),n=n.sibling}function lb(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(lb(n,e,t),n=n.sibling;n!==null;)lb(n,e,t),n=n.sibling}var ds=null,la=!1;function dl(n,e,t){for(t=t.child;t!==null;)AC(n,e,t),t=t.sibling}function AC(n,e,t){if(Va&&typeof Va.onCommitFiberUnmount=="function")try{Va.onCommitFiberUnmount(oy,t)}catch{}switch(t.tag){case 5:As||dd(t,e);case 6:var i=ds,s=la;ds=null,dl(n,e,t),ds=i,la=s,ds!==null&&(la?(n=ds,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ds.removeChild(t.stateNode));break;case 18:ds!==null&&(la?(n=ds,t=t.stateNode,n.nodeType===8?n1(n.parentNode,t):n.nodeType===1&&n1(n,t),jf(n)):n1(ds,t.stateNode));break;case 4:i=ds,s=la,ds=t.stateNode.containerInfo,la=!0,dl(n,e,t),ds=i,la=s;break;case 0:case 11:case 14:case 15:if(!As&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,a=r.destroy;r=r.tag,a!==void 0&&(r&2||r&4)&&rb(t,e,a),s=s.next}while(s!==i)}dl(n,e,t);break;case 1:if(!As&&(dd(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){gi(t,e,o)}dl(n,e,t);break;case 21:dl(n,e,t);break;case 22:t.mode&1?(As=(i=As)||t.memoizedState!==null,dl(n,e,t),As=i):dl(n,e,t);break;default:dl(n,e,t)}}function __(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new W4),e.forEach(function(i){var s=eM.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function ea(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ds=o.stateNode,la=!1;break e;case 3:ds=o.stateNode.containerInfo,la=!0;break e;case 4:ds=o.stateNode.containerInfo,la=!0;break e}o=o.return}if(ds===null)throw Error(He(160));AC(r,a,s),ds=null,la=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){gi(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LC(e,n),e=e.sibling}function LC(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ea(e,n),ka(n),i&4){try{df(3,n,n.return),gy(3,n)}catch(m){gi(n,n.return,m)}try{df(5,n,n.return)}catch(m){gi(n,n.return,m)}}break;case 1:ea(e,n),ka(n),i&512&&t!==null&&dd(t,t.return);break;case 5:if(ea(e,n),ka(n),i&512&&t!==null&&dd(t,t.return),n.flags&32){var s=n.stateNode;try{Df(s,"")}catch(m){gi(n,n.return,m)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,a=t!==null?t.memoizedProps:r,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&KL(s,r),Px(o,a);var c=Px(o,r);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?ek(s,d):u==="dangerouslySetInnerHTML"?JL(s,d):u==="children"?Df(s,d):M2(s,u,d,c)}switch(o){case"input":Lx(s,r);break;case"textarea":XL(s,r);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?md(s,!!r.multiple,f,!1):h!==!!r.multiple&&(r.defaultValue!=null?md(s,!!r.multiple,r.defaultValue,!0):md(s,!!r.multiple,r.multiple?[]:"",!1))}s[zf]=r}catch(m){gi(n,n.return,m)}}break;case 6:if(ea(e,n),ka(n),i&4){if(n.stateNode===null)throw Error(He(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(m){gi(n,n.return,m)}}break;case 3:if(ea(e,n),ka(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{jf(e.containerInfo)}catch(m){gi(n,n.return,m)}break;case 4:ea(e,n),ka(n);break;case 13:ea(e,n),ka(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(gS=Ti())),i&4&&__(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(As=(c=As)||u,ea(e,n),As=c):ea(e,n),ka(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(at=n,u=n.child;u!==null;){for(d=at=u;at!==null;){switch(h=at,f=h.child,h.tag){case 0:case 11:case 14:case 15:df(4,h,h.return);break;case 1:dd(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){gi(i,t,m)}}break;case 5:dd(h,h.return);break;case 22:if(h.memoizedState!==null){T_(d);continue}}f!==null?(f.return=h,at=f):T_(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=ZL("display",a))}catch(m){gi(n,n.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){gi(n,n.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ea(e,n),ka(n),i&4&&__(n);break;case 21:break;default:ea(e,n),ka(n)}}function ka(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(TC(t)){var i=t;break e}t=t.return}throw Error(He(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Df(s,""),i.flags&=-33);var r=w_(n);lb(n,r,s);break;case 3:case 4:var a=i.stateNode.containerInfo,o=w_(n);ob(n,o,a);break;default:throw Error(He(161))}}catch(l){gi(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function G4(n,e,t){at=n,kC(n)}function kC(n,e,t){for(var i=(n.mode&1)!==0;at!==null;){var s=at,r=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Mg;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||As;o=Mg;var c=As;if(Mg=a,(As=l)&&!c)for(at=s;at!==null;)a=at,l=a.child,a.tag===22&&a.memoizedState!==null?A_(s):l!==null?(l.return=a,at=l):A_(s);for(;r!==null;)at=r,kC(r),r=r.sibling;at=s,Mg=o,As=c}E_(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,at=r):E_(n)}}function E_(n){for(;at!==null;){var e=at;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:As||gy(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!As)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ra(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&l_(e,r,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}l_(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&jf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(He(163))}As||e.flags&512&&ab(e)}catch(h){gi(e,e.return,h)}}if(e===n){at=null;break}if(t=e.sibling,t!==null){t.return=e.return,at=t;break}at=e.return}}function T_(n){for(;at!==null;){var e=at;if(e===n){at=null;break}var t=e.sibling;if(t!==null){t.return=e.return,at=t;break}at=e.return}}function A_(n){for(;at!==null;){var e=at;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{gy(4,e)}catch(l){gi(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){gi(e,s,l)}}var r=e.return;try{ab(e)}catch(l){gi(e,r,l)}break;case 5:var a=e.return;try{ab(e)}catch(l){gi(e,a,l)}}}catch(l){gi(e,e.return,l)}if(e===n){at=null;break}var o=e.sibling;if(o!==null){o.return=e.return,at=o;break}at=e.return}}var Y4=Math.ceil,w0=Go.ReactCurrentDispatcher,fS=Go.ReactCurrentOwner,Wr=Go.ReactCurrentBatchConfig,hn=0,rs=null,Fi=null,hs=0,gr=0,hd=ic(0),Yi=0,Kf=null,ru=0,my=0,pS=0,hf=null,Zs=null,gS=0,Od=1/0,xo=null,_0=!1,cb=null,$l=null,Fg=!1,Ll=null,E0=0,ff=0,ub=null,Om=-1,Mm=0;function $s(){return hn&6?Ti():Om!==-1?Om:Om=Ti()}function Hl(n){return n.mode&1?hn&2&&hs!==0?hs&-hs:I4.transition!==null?(Mm===0&&(Mm=hk()),Mm):(n=Cn,n!==0||(n=window.event,n=n===void 0?16:xk(n.type)),n):1}function pa(n,e,t,i){if(50<ff)throw ff=0,ub=null,Error(He(185));Tp(n,t,i),(!(hn&2)||n!==rs)&&(n===rs&&(!(hn&2)&&(my|=t),Yi===4&&_l(n,hs)),rr(n,i),t===1&&hn===0&&!(e.mode&1)&&(Od=Ti()+500,hy&&sc()))}function rr(n,e){var t=n.callbackNode;IO(n,e);var i=o0(n,n===rs?hs:0);if(i===0)t!==null&&O5(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&O5(t),e===1)n.tag===0?C4(L_.bind(null,n)):jk(L_.bind(null,n)),T4(function(){!(hn&6)&&sc()}),t=null;else{switch(fk(i)){case 1:t=$2;break;case 4:t=uk;break;case 16:t=a0;break;case 536870912:t=dk;break;default:t=a0}t=MC(t,CC.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function CC(n,e){if(Om=-1,Mm=0,hn&6)throw Error(He(327));var t=n.callbackNode;if(Sd()&&n.callbackNode!==t)return null;var i=o0(n,n===rs?hs:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=T0(n,i);else{e=i;var s=hn;hn|=2;var r=RC();(rs!==n||hs!==e)&&(xo=null,Od=Ti()+500,Wc(n,e));do try{X4();break}catch(o){IC(n,o)}while(!0);eS(),w0.current=r,hn=s,Fi!==null?e=0:(rs=null,hs=0,e=Yi)}if(e!==0){if(e===2&&(s=Fx(n),s!==0&&(i=s,e=db(n,s))),e===1)throw t=Kf,Wc(n,0),_l(n,i),rr(n,Ti()),t;if(e===6)_l(n,i);else{if(s=n.current.alternate,!(i&30)&&!q4(s)&&(e=T0(n,i),e===2&&(r=Fx(n),r!==0&&(i=r,e=db(n,r))),e===1))throw t=Kf,Wc(n,0),_l(n,i),rr(n,Ti()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(He(345));case 2:Lc(n,Zs,xo);break;case 3:if(_l(n,i),(i&130023424)===i&&(e=gS+500-Ti(),10<e)){if(o0(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){$s(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Vx(Lc.bind(null,n,Zs,xo),e);break}Lc(n,Zs,xo);break;case 4:if(_l(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var a=31-fa(i);r=1<<a,a=e[a],a>s&&(s=a),i&=~r}if(i=s,i=Ti()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Y4(i/1960))-i,10<i){n.timeoutHandle=Vx(Lc.bind(null,n,Zs,xo),i);break}Lc(n,Zs,xo);break;case 5:Lc(n,Zs,xo);break;default:throw Error(He(329))}}}return rr(n,Ti()),n.callbackNode===t?CC.bind(null,n):null}function db(n,e){var t=hf;return n.current.memoizedState.isDehydrated&&(Wc(n,e).flags|=256),n=T0(n,e),n!==2&&(e=Zs,Zs=t,e!==null&&hb(e)),n}function hb(n){Zs===null?Zs=n:Zs.push.apply(Zs,n)}function q4(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!ma(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _l(n,e){for(e&=~pS,e&=~my,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-fa(e),i=1<<t;n[t]=-1,e&=~i}}function L_(n){if(hn&6)throw Error(He(327));Sd();var e=o0(n,0);if(!(e&1))return rr(n,Ti()),null;var t=T0(n,e);if(n.tag!==0&&t===2){var i=Fx(n);i!==0&&(e=i,t=db(n,i))}if(t===1)throw t=Kf,Wc(n,0),_l(n,e),rr(n,Ti()),t;if(t===6)throw Error(He(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Lc(n,Zs,xo),rr(n,Ti()),null}function mS(n,e){var t=hn;hn|=1;try{return n(e)}finally{hn=t,hn===0&&(Od=Ti()+500,hy&&sc())}}function au(n){Ll!==null&&Ll.tag===0&&!(hn&6)&&Sd();var e=hn;hn|=1;var t=Wr.transition,i=Cn;try{if(Wr.transition=null,Cn=1,n)return n()}finally{Cn=i,Wr.transition=t,hn=e,!(hn&6)&&sc()}}function yS(){gr=hd.current,Vn(hd)}function Wc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,E4(t)),Fi!==null)for(t=Fi.return;t!==null;){var i=t;switch(Q2(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&h0();break;case 3:Nd(),Vn(ir),Vn(Rs),aS();break;case 5:rS(i);break;case 4:Nd();break;case 13:Vn(oi);break;case 19:Vn(oi);break;case 10:tS(i.type._context);break;case 22:case 23:yS()}t=t.return}if(rs=n,Fi=n=zl(n.current,null),hs=gr=e,Yi=0,Kf=null,pS=my=ru=0,Zs=hf=null,Mc!==null){for(e=0;e<Mc.length;e++)if(t=Mc[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var a=r.next;r.next=s,i.next=a}t.pending=i}Mc=null}return n}function IC(n,e){do{var t=Fi;try{if(eS(),Pm.current=S0,b0){for(var i=li.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}b0=!1}if(su=0,ns=Wi=li=null,uf=!1,Gf=0,fS.current=null,t===null||t.return===null){Yi=1,Kf=e,Fi=null;break}e:{var r=n,a=t.return,o=t,l=e;if(e=hs,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=p_(a);if(f!==null){f.flags&=-257,g_(f,a,o,r,e),f.mode&1&&f_(r,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){f_(r,c,e),vS();break e}l=Error(He(426))}}else if(Zn&&o.mode&1){var v=p_(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),g_(v,a,o,r,e),J2(Dd(l,o));break e}}r=l=Dd(l,o),Yi!==4&&(Yi=2),hf===null?hf=[r]:hf.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=fC(r,l,e);o_(r,y);break e;case 1:o=l;var b=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&($l===null||!$l.has(x)))){r.flags|=65536,e&=-e,r.lanes|=e;var _=pC(r,o,e);o_(r,_);break e}}r=r.return}while(r!==null)}NC(t)}catch(T){e=T,Fi===t&&t!==null&&(Fi=t=t.return);continue}break}while(!0)}function RC(){var n=w0.current;return w0.current=S0,n===null?S0:n}function vS(){(Yi===0||Yi===3||Yi===2)&&(Yi=4),rs===null||!(ru&268435455)&&!(my&268435455)||_l(rs,hs)}function T0(n,e){var t=hn;hn|=2;var i=RC();(rs!==n||hs!==e)&&(xo=null,Wc(n,e));do try{K4();break}catch(s){IC(n,s)}while(!0);if(eS(),hn=t,w0.current=i,Fi!==null)throw Error(He(261));return rs=null,hs=0,Yi}function K4(){for(;Fi!==null;)PC(Fi)}function X4(){for(;Fi!==null&&!SO();)PC(Fi)}function PC(n){var e=OC(n.alternate,n,gr);n.memoizedProps=n.pendingProps,e===null?NC(n):Fi=e,fS.current=null}function NC(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=z4(t,e),t!==null){t.flags&=32767,Fi=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Yi=6,Fi=null;return}}else if(t=H4(t,e,gr),t!==null){Fi=t;return}if(e=e.sibling,e!==null){Fi=e;return}Fi=e=n}while(e!==null);Yi===0&&(Yi=5)}function Lc(n,e,t){var i=Cn,s=Wr.transition;try{Wr.transition=null,Cn=1,Q4(n,e,t,i)}finally{Wr.transition=s,Cn=i}return null}function Q4(n,e,t,i){do Sd();while(Ll!==null);if(hn&6)throw Error(He(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(He(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(RO(n,r),n===rs&&(Fi=rs=null,hs=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Fg||(Fg=!0,MC(a0,function(){return Sd(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Wr.transition,Wr.transition=null;var a=Cn;Cn=1;var o=hn;hn|=4,fS.current=null,V4(n,t),LC(t,n),y4(zx),l0=!!Hx,zx=Hx=null,n.current=t,G4(t),wO(),hn=o,Cn=a,Wr.transition=r}else n.current=t;if(Fg&&(Fg=!1,Ll=n,E0=s),r=n.pendingLanes,r===0&&($l=null),TO(t.stateNode),rr(n,Ti()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(_0)throw _0=!1,n=cb,cb=null,n;return E0&1&&n.tag!==0&&Sd(),r=n.pendingLanes,r&1?n===ub?ff++:(ff=0,ub=n):ff=0,sc(),null}function Sd(){if(Ll!==null){var n=fk(E0),e=Wr.transition,t=Cn;try{if(Wr.transition=null,Cn=16>n?16:n,Ll===null)var i=!1;else{if(n=Ll,Ll=null,E0=0,hn&6)throw Error(He(331));var s=hn;for(hn|=4,at=n.current;at!==null;){var r=at,a=r.child;if(at.flags&16){var o=r.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(at=c;at!==null;){var u=at;switch(u.tag){case 0:case 11:case 15:df(8,u,r)}var d=u.child;if(d!==null)d.return=u,at=d;else for(;at!==null;){u=at;var h=u.sibling,f=u.return;if(EC(u),u===c){at=null;break}if(h!==null){h.return=f,at=h;break}at=f}}}var p=r.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}at=r}}if(r.subtreeFlags&2064&&a!==null)a.return=r,at=a;else e:for(;at!==null;){if(r=at,r.flags&2048)switch(r.tag){case 0:case 11:case 15:df(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,at=y;break e}at=r.return}}var b=n.current;for(at=b;at!==null;){a=at;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,at=x;else e:for(a=b;at!==null;){if(o=at,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:gy(9,o)}}catch(T){gi(o,o.return,T)}if(o===a){at=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,at=_;break e}at=o.return}}if(hn=s,sc(),Va&&typeof Va.onPostCommitFiberRoot=="function")try{Va.onPostCommitFiberRoot(oy,n)}catch{}i=!0}return i}finally{Cn=t,Wr.transition=e}}return!1}function k_(n,e,t){e=Dd(t,e),e=fC(n,e,1),n=Ul(n,e,1),e=$s(),n!==null&&(Tp(n,1,e),rr(n,e))}function gi(n,e,t){if(n.tag===3)k_(n,n,t);else for(;e!==null;){if(e.tag===3){k_(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&($l===null||!$l.has(i))){n=Dd(t,n),n=pC(e,n,1),e=Ul(e,n,1),n=$s(),e!==null&&(Tp(e,1,n),rr(e,n));break}}e=e.return}}function J4(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=$s(),n.pingedLanes|=n.suspendedLanes&t,rs===n&&(hs&t)===t&&(Yi===4||Yi===3&&(hs&130023424)===hs&&500>Ti()-gS?Wc(n,0):pS|=t),rr(n,e)}function DC(n,e){e===0&&(n.mode&1?(e=Lg,Lg<<=1,!(Lg&130023424)&&(Lg=4194304)):e=1);var t=$s();n=$o(n,e),n!==null&&(Tp(n,e,t),rr(n,t))}function Z4(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),DC(n,t)}function eM(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(He(314))}i!==null&&i.delete(e),DC(n,t)}var OC;OC=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ir.current)nr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return nr=!1,$4(n,e,t);nr=!!(n.flags&131072)}else nr=!1,Zn&&e.flags&1048576&&Bk(e,g0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Dm(n,e),n=e.pendingProps;var s=Id(e,Rs.current);bd(e,t),s=lS(null,e,i,n,s,t);var r=cS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sr(i)?(r=!0,f0(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,iS(e),s.updater=py,e.stateNode=s,s._reactInternals=e,Jx(e,i,n,t),e=tb(null,e,i,!0,r,t)):(e.tag=0,Zn&&r&&X2(e),Us(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Dm(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=nM(i),n=ra(i,n),s){case 0:e=eb(null,e,i,n,t);break e;case 1:e=v_(null,e,i,n,t);break e;case 11:e=m_(null,e,i,n,t);break e;case 14:e=y_(null,e,i,ra(i.type,n),t);break e}throw Error(He(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ra(i,s),eb(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ra(i,s),v_(n,e,i,s,t);case 3:e:{if(vC(e),n===null)throw Error(He(387));i=e.pendingProps,r=e.memoizedState,s=r.element,Vk(n,e),v0(e,i,null,t);var a=e.memoizedState;if(i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Dd(Error(He(423)),e),e=x_(n,e,i,t,s);break e}else if(i!==s){s=Dd(Error(He(424)),e),e=x_(n,e,i,t,s);break e}else for(br=Bl(e.stateNode.containerInfo.firstChild),wr=e,Zn=!0,ca=null,t=zk(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Rd(),i===s){e=Ho(n,e,t);break e}Us(n,e,i,t)}e=e.child}return e;case 5:return Gk(e),n===null&&Kx(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,a=s.children,Wx(i,s)?a=null:r!==null&&Wx(i,r)&&(e.flags|=32),yC(n,e),Us(n,e,a,t),e.child;case 6:return n===null&&Kx(e),null;case 13:return xC(n,e,t);case 4:return sS(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Pd(e,null,i,t):Us(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ra(i,s),m_(n,e,i,s,t);case 7:return Us(n,e,e.pendingProps,t),e.child;case 8:return Us(n,e,e.pendingProps.children,t),e.child;case 12:return Us(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,a=s.value,Hn(m0,i._currentValue),i._currentValue=a,r!==null)if(ma(r.value,a)){if(r.children===s.children&&!ir.current){e=Ho(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var o=r.dependencies;if(o!==null){a=r.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Oo(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),Xx(r.return,t,e),o.lanes|=t;break}l=l.next}}else if(r.tag===10)a=r.type===e.type?null:r.child;else if(r.tag===18){if(a=r.return,a===null)throw Error(He(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Xx(a,t,e),a=r.sibling}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===e){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}Us(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,bd(e,t),s=Vr(s),i=i(s),e.flags|=1,Us(n,e,i,t),e.child;case 14:return i=e.type,s=ra(i,e.pendingProps),s=ra(i.type,s),y_(n,e,i,s,t);case 15:return gC(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ra(i,s),Dm(n,e),e.tag=1,sr(i)?(n=!0,f0(e)):n=!1,bd(e,t),hC(e,i,s),Jx(e,i,s,t),tb(null,e,i,!0,n,t);case 19:return bC(n,e,t);case 22:return mC(n,e,t)}throw Error(He(156,e.tag))};function MC(n,e){return ck(n,e)}function tM(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(n,e,t,i){return new tM(n,e,t,i)}function xS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nM(n){if(typeof n=="function")return xS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===j2)return 11;if(n===B2)return 14}return 2}function zl(n,e){var t=n.alternate;return t===null?(t=zr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Fm(n,e,t,i,s,r){var a=2;if(i=n,typeof n=="function")xS(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case nd:return Vc(t.children,s,r,e);case F2:a=8,s|=8;break;case wx:return n=zr(12,t,e,s|2),n.elementType=wx,n.lanes=r,n;case _x:return n=zr(13,t,e,s),n.elementType=_x,n.lanes=r,n;case Ex:return n=zr(19,t,e,s),n.elementType=Ex,n.lanes=r,n;case GL:return yy(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case WL:a=10;break e;case VL:a=9;break e;case j2:a=11;break e;case B2:a=14;break e;case yl:a=16,i=null;break e}throw Error(He(130,n==null?n:typeof n,""))}return e=zr(a,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function Vc(n,e,t,i){return n=zr(7,n,i,e),n.lanes=t,n}function yy(n,e,t,i){return n=zr(22,n,i,e),n.elementType=GL,n.lanes=t,n.stateNode={isHidden:!1},n}function u1(n,e,t){return n=zr(6,n,null,e),n.lanes=t,n}function d1(n,e,t){return e=zr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function iM(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vv(0),this.expirationTimes=Vv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vv(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function bS(n,e,t,i,s,r,a,o,l){return n=new iM(n,e,t,o,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=zr(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},iS(r),n}function sM(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:td,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function FC(n){if(!n)return Kl;n=n._reactInternals;e:{if(hu(n)!==n||n.tag!==1)throw Error(He(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(He(171))}if(n.tag===1){var t=n.type;if(sr(t))return Fk(n,t,e)}return e}function jC(n,e,t,i,s,r,a,o,l){return n=bS(t,i,!0,n,s,r,a,o,l),n.context=FC(null),t=n.current,i=$s(),s=Hl(t),r=Oo(i,s),r.callback=e??null,Ul(t,r,s),n.current.lanes=s,Tp(n,s,i),rr(n,i),n}function vy(n,e,t,i){var s=e.current,r=$s(),a=Hl(s);return t=FC(t),e.context===null?e.context=t:e.pendingContext=t,e=Oo(r,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ul(s,e,a),n!==null&&(pa(n,s,a,r),Rm(n,s,a)),a}function A0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function C_(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function SS(n,e){C_(n,e),(n=n.alternate)&&C_(n,e)}function rM(){return null}var BC=typeof reportError=="function"?reportError:function(n){console.error(n)};function wS(n){this._internalRoot=n}xy.prototype.render=wS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(He(409));vy(n,e,null,null)};xy.prototype.unmount=wS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;au(function(){vy(null,n,null,null)}),e[Uo]=null}};function xy(n){this._internalRoot=n}xy.prototype.unstable_scheduleHydration=function(n){if(n){var e=mk();n={blockedOn:null,target:n,priority:e};for(var t=0;t<wl.length&&e!==0&&e<wl[t].priority;t++);wl.splice(t,0,n),t===0&&vk(n)}};function _S(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function by(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function I_(){}function aM(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=A0(a);r.call(c)}}var a=jC(e,i,n,0,null,!1,!1,"",I_);return n._reactRootContainer=a,n[Uo]=a.current,$f(n.nodeType===8?n.parentNode:n),au(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var o=i;i=function(){var c=A0(l);o.call(c)}}var l=bS(n,0,!1,null,null,!1,!1,"",I_);return n._reactRootContainer=l,n[Uo]=l.current,$f(n.nodeType===8?n.parentNode:n),au(function(){vy(e,l,t,i)}),l}function Sy(n,e,t,i,s){var r=t._reactRootContainer;if(r){var a=r;if(typeof s=="function"){var o=s;s=function(){var l=A0(a);o.call(l)}}vy(e,a,n,s)}else a=aM(t,e,n,s,i);return A0(a)}pk=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=qh(e.pendingLanes);t!==0&&(H2(e,t|1),rr(e,Ti()),!(hn&6)&&(Od=Ti()+500,sc()))}break;case 13:au(function(){var i=$o(n,1);if(i!==null){var s=$s();pa(i,n,1,s)}}),SS(n,1)}};z2=function(n){if(n.tag===13){var e=$o(n,134217728);if(e!==null){var t=$s();pa(e,n,134217728,t)}SS(n,134217728)}};gk=function(n){if(n.tag===13){var e=Hl(n),t=$o(n,e);if(t!==null){var i=$s();pa(t,n,e,i)}SS(n,e)}};mk=function(){return Cn};yk=function(n,e){var t=Cn;try{return Cn=n,e()}finally{Cn=t}};Dx=function(n,e,t){switch(e){case"input":if(Lx(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=dy(i);if(!s)throw Error(He(90));qL(i),Lx(i,s)}}}break;case"textarea":XL(n,t);break;case"select":e=t.value,e!=null&&md(n,!!t.multiple,e,!1)}};ik=mS;sk=au;var oM={usingClientEntryPoint:!1,Events:[Lp,ad,dy,tk,nk,mS]},Nh={findFiberByHostInstance:Oc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lM={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Go.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ok(n),n===null?null:n.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||rM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jg.isDisabled&&jg.supportsFiber)try{oy=jg.inject(lM),Va=jg}catch{}}Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oM;Tr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_S(e))throw Error(He(200));return sM(n,e,null,t)};Tr.createRoot=function(n,e){if(!_S(n))throw Error(He(299));var t=!1,i="",s=BC;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=bS(n,1,!1,null,null,t,!1,i,s),n[Uo]=e.current,$f(n.nodeType===8?n.parentNode:n),new wS(e)};Tr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(He(188)):(n=Object.keys(n).join(","),Error(He(268,n)));return n=ok(e),n=n===null?null:n.stateNode,n};Tr.flushSync=function(n){return au(n)};Tr.hydrate=function(n,e,t){if(!by(e))throw Error(He(200));return Sy(null,n,e,!0,t)};Tr.hydrateRoot=function(n,e,t){if(!_S(n))throw Error(He(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",a=BC;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=jC(e,null,n,1,t??null,s,!1,r,a),n[Uo]=e.current,$f(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new xy(e)};Tr.render=function(n,e,t){if(!by(e))throw Error(He(200));return Sy(null,n,e,!1,t)};Tr.unmountComponentAtNode=function(n){if(!by(n))throw Error(He(40));return n._reactRootContainer?(au(function(){Sy(null,null,n,!1,function(){n._reactRootContainer=null,n[Uo]=null})}),!0):!1};Tr.unstable_batchedUpdates=mS;Tr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!by(t))throw Error(He(200));if(n==null||n._reactInternals===void 0)throw Error(He(38));return Sy(n,e,t,!1,i)};Tr.version="18.3.1-next-f1338f8080-20240426";function UC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UC)}catch(n){console.error(n)}}UC(),UL.exports=Tr;var $C=UL.exports;const fd=_p($C);var R_=$C;bx.createRoot=R_.createRoot,bx.hydrateRoot=R_.hydrateRoot;function HC(n,e){return function(){return n.apply(e,arguments)}}const{toString:cM}=Object.prototype,{getPrototypeOf:ES}=Object,{iterator:wy,toStringTag:zC}=Symbol,_y=(n=>e=>{const t=cM.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ba=n=>(n=n.toLowerCase(),e=>_y(e)===n),Ey=n=>e=>typeof e===n,{isArray:Gd}=Array,Xf=Ey("undefined");function uM(n){return n!==null&&!Xf(n)&&n.constructor!==null&&!Xf(n.constructor)&&ar(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const WC=ba("ArrayBuffer");function dM(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&WC(n.buffer),e}const hM=Ey("string"),ar=Ey("function"),VC=Ey("number"),Ty=n=>n!==null&&typeof n=="object",fM=n=>n===!0||n===!1,jm=n=>{if(_y(n)!=="object")return!1;const e=ES(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(zC in n)&&!(wy in n)},pM=ba("Date"),gM=ba("File"),mM=ba("Blob"),yM=ba("FileList"),vM=n=>Ty(n)&&ar(n.pipe),xM=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ar(n.append)&&((e=_y(n))==="formdata"||e==="object"&&ar(n.toString)&&n.toString()==="[object FormData]"))},bM=ba("URLSearchParams"),[SM,wM,_M,EM]=["ReadableStream","Request","Response","Headers"].map(ba),TM=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cp(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),Gd(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{const r=t?Object.getOwnPropertyNames(n):Object.keys(n),a=r.length;let o;for(i=0;i<a;i++)o=r[i],e.call(null,n[o],o,n)}}function GC(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const jc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,YC=n=>!Xf(n)&&n!==jc;function fb(){const{caseless:n}=YC(this)&&this||{},e={},t=(i,s)=>{const r=n&&GC(e,s)||s;jm(e[r])&&jm(i)?e[r]=fb(e[r],i):jm(i)?e[r]=fb({},i):Gd(i)?e[r]=i.slice():e[r]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Cp(arguments[i],t);return e}const AM=(n,e,t,{allOwnKeys:i}={})=>(Cp(e,(s,r)=>{t&&ar(s)?n[r]=HC(s,t):n[r]=s},{allOwnKeys:i}),n),LM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),kM=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},CM=(n,e,t,i)=>{let s,r,a;const o={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),r=s.length;r-- >0;)a=s[r],(!i||i(a,n,e))&&!o[a]&&(e[a]=n[a],o[a]=!0);n=t!==!1&&ES(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},IM=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},RM=n=>{if(!n)return null;if(Gd(n))return n;let e=n.length;if(!VC(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},PM=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&ES(Uint8Array)),NM=(n,e)=>{const i=(n&&n[wy]).call(n);let s;for(;(s=i.next())&&!s.done;){const r=s.value;e.call(n,r[0],r[1])}},DM=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},OM=ba("HTMLFormElement"),MM=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),P_=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),FM=ba("RegExp"),qC=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Cp(t,(s,r)=>{let a;(a=e(s,r,n))!==!1&&(i[r]=a||s)}),Object.defineProperties(n,i)},jM=n=>{qC(n,(e,t)=>{if(ar(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(ar(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},BM=(n,e)=>{const t={},i=s=>{s.forEach(r=>{t[r]=!0})};return Gd(n)?i(n):i(String(n).split(e)),t},UM=()=>{},$M=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function HM(n){return!!(n&&ar(n.append)&&n[zC]==="FormData"&&n[wy])}const zM=n=>{const e=new Array(10),t=(i,s)=>{if(Ty(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const r=Gd(i)?[]:{};return Cp(i,(a,o)=>{const l=t(a,s+1);!Xf(l)&&(r[o]=l)}),e[s]=void 0,r}}return i};return t(n,0)},WM=ba("AsyncFunction"),VM=n=>n&&(Ty(n)||ar(n))&&ar(n.then)&&ar(n.catch),KC=((n,e)=>n?setImmediate:e?((t,i)=>(jc.addEventListener("message",({source:s,data:r})=>{s===jc&&r===t&&i.length&&i.shift()()},!1),s=>{i.push(s),jc.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ar(jc.postMessage)),GM=typeof queueMicrotask<"u"?queueMicrotask.bind(jc):typeof process<"u"&&process.nextTick||KC,YM=n=>n!=null&&ar(n[wy]),_e={isArray:Gd,isArrayBuffer:WC,isBuffer:uM,isFormData:xM,isArrayBufferView:dM,isString:hM,isNumber:VC,isBoolean:fM,isObject:Ty,isPlainObject:jm,isReadableStream:SM,isRequest:wM,isResponse:_M,isHeaders:EM,isUndefined:Xf,isDate:pM,isFile:gM,isBlob:mM,isRegExp:FM,isFunction:ar,isStream:vM,isURLSearchParams:bM,isTypedArray:PM,isFileList:yM,forEach:Cp,merge:fb,extend:AM,trim:TM,stripBOM:LM,inherits:kM,toFlatObject:CM,kindOf:_y,kindOfTest:ba,endsWith:IM,toArray:RM,forEachEntry:NM,matchAll:DM,isHTMLForm:OM,hasOwnProperty:P_,hasOwnProp:P_,reduceDescriptors:qC,freezeMethods:jM,toObjectSet:BM,toCamelCase:MM,noop:UM,toFiniteNumber:$M,findKey:GC,global:jc,isContextDefined:YC,isSpecCompliantForm:HM,toJSONObject:zM,isAsyncFn:WM,isThenable:VM,setImmediate:KC,asap:GM,isIterable:YM};function $t(n,e,t,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}_e.inherits($t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_e.toJSONObject(this.config),code:this.code,status:this.status}}});const XC=$t.prototype,QC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{QC[n]={value:n}});Object.defineProperties($t,QC);Object.defineProperty(XC,"isAxiosError",{value:!0});$t.from=(n,e,t,i,s,r)=>{const a=Object.create(XC);return _e.toFlatObject(n,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),$t.call(a,n.message,e,t,i,s),a.cause=n,a.name=n.name,r&&Object.assign(a,r),a};const qM=null;function pb(n){return _e.isPlainObject(n)||_e.isArray(n)}function JC(n){return _e.endsWith(n,"[]")?n.slice(0,-2):n}function N_(n,e,t){return n?n.concat(e).map(function(s,r){return s=JC(s),!t&&r?"["+s+"]":s}).join(t?".":""):e}function KM(n){return _e.isArray(n)&&!n.some(pb)}const XM=_e.toFlatObject(_e,{},null,function(e){return/^is[A-Z]/.test(e)});function Ay(n,e,t){if(!_e.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=_e.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,v){return!_e.isUndefined(v[m])});const i=t.metaTokens,s=t.visitor||u,r=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&_e.isSpecCompliantForm(e);if(!_e.isFunction(s))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(_e.isDate(p))return p.toISOString();if(!l&&_e.isBlob(p))throw new $t("Blob is not supported. Use a Buffer instead.");return _e.isArrayBuffer(p)||_e.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,v){let y=p;if(p&&!v&&typeof p=="object"){if(_e.endsWith(m,"{}"))m=i?m:m.slice(0,-2),p=JSON.stringify(p);else if(_e.isArray(p)&&KM(p)||(_e.isFileList(p)||_e.endsWith(m,"[]"))&&(y=_e.toArray(p)))return m=JC(m),y.forEach(function(x,_){!(_e.isUndefined(x)||x===null)&&e.append(a===!0?N_([m],_,r):a===null?m:m+"[]",c(x))}),!1}return pb(p)?!0:(e.append(N_(v,m,r),c(p)),!1)}const d=[],h=Object.assign(XM,{defaultVisitor:u,convertValue:c,isVisitable:pb});function f(p,m){if(!_e.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(p),_e.forEach(p,function(y,b){(!(_e.isUndefined(y)||y===null)&&s.call(e,y,_e.isString(b)?b.trim():b,m,h))===!0&&f(y,m?m.concat(b):[b])}),d.pop()}}if(!_e.isObject(n))throw new TypeError("data must be an object");return f(n),e}function D_(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function TS(n,e){this._pairs=[],n&&Ay(n,this,e)}const ZC=TS.prototype;ZC.append=function(e,t){this._pairs.push([e,t])};ZC.toString=function(e){const t=e?function(i){return e.call(this,i,D_)}:D_;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function QM(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eI(n,e,t){if(!e)return n;const i=t&&t.encode||QM;_e.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let r;if(s?r=s(e,t):r=_e.isURLSearchParams(e)?e.toString():new TS(e,t).toString(i),r){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class O_{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_e.forEach(this.handlers,function(i){i!==null&&e(i)})}}const tI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JM=typeof URLSearchParams<"u"?URLSearchParams:TS,ZM=typeof FormData<"u"?FormData:null,eF=typeof Blob<"u"?Blob:null,tF={isBrowser:!0,classes:{URLSearchParams:JM,FormData:ZM,Blob:eF},protocols:["http","https","file","blob","url","data"]},AS=typeof window<"u"&&typeof document<"u",gb=typeof navigator=="object"&&navigator||void 0,nF=AS&&(!gb||["ReactNative","NativeScript","NS"].indexOf(gb.product)<0),iF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sF=AS&&window.location.href||"http://localhost",rF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:AS,hasStandardBrowserEnv:nF,hasStandardBrowserWebWorkerEnv:iF,navigator:gb,origin:sF},Symbol.toStringTag,{value:"Module"})),Ls={...rF,...tF};function aF(n,e){return Ay(n,new Ls.classes.URLSearchParams,Object.assign({visitor:function(t,i,s,r){return Ls.isNode&&_e.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function oF(n){return _e.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lF(n){const e={},t=Object.keys(n);let i;const s=t.length;let r;for(i=0;i<s;i++)r=t[i],e[r]=n[r];return e}function nI(n){function e(t,i,s,r){let a=t[r++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=r>=t.length;return a=!a&&_e.isArray(s)?s.length:a,l?(_e.hasOwnProp(s,a)?s[a]=[s[a],i]:s[a]=i,!o):((!s[a]||!_e.isObject(s[a]))&&(s[a]=[]),e(t,i,s[a],r)&&_e.isArray(s[a])&&(s[a]=lF(s[a])),!o)}if(_e.isFormData(n)&&_e.isFunction(n.entries)){const t={};return _e.forEachEntry(n,(i,s)=>{e(oF(i),s,t,0)}),t}return null}function cF(n,e,t){if(_e.isString(n))try{return(e||JSON.parse)(n),_e.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Ip={transitional:tI,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,r=_e.isObject(e);if(r&&_e.isHTMLForm(e)&&(e=new FormData(e)),_e.isFormData(e))return s?JSON.stringify(nI(e)):e;if(_e.isArrayBuffer(e)||_e.isBuffer(e)||_e.isStream(e)||_e.isFile(e)||_e.isBlob(e)||_e.isReadableStream(e))return e;if(_e.isArrayBufferView(e))return e.buffer;if(_e.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return aF(e,this.formSerializer).toString();if((o=_e.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ay(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),cF(e)):e}],transformResponse:[function(e){const t=this.transitional||Ip.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(_e.isResponse(e)||_e.isReadableStream(e))return e;if(e&&_e.isString(e)&&(i&&!this.responseType||s)){const a=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?$t.from(o,$t.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ls.classes.FormData,Blob:Ls.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_e.forEach(["delete","get","head","post","put","patch"],n=>{Ip.headers[n]={}});const uF=_e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dF=n=>{const e={};let t,i,s;return n&&n.split(`
`).forEach(function(a){s=a.indexOf(":"),t=a.substring(0,s).trim().toLowerCase(),i=a.substring(s+1).trim(),!(!t||e[t]&&uF[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},M_=Symbol("internals");function Dh(n){return n&&String(n).trim().toLowerCase()}function Bm(n){return n===!1||n==null?n:_e.isArray(n)?n.map(Bm):String(n)}function hF(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const fF=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function h1(n,e,t,i,s){if(_e.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!_e.isString(e)){if(_e.isString(i))return e.indexOf(i)!==-1;if(_e.isRegExp(i))return i.test(e)}}function pF(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function gF(n,e){const t=_e.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,r,a){return this[i].call(this,e,s,r,a)},configurable:!0})})}let or=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function r(o,l,c){const u=Dh(l);if(!u)throw new Error("header name must be a non-empty string");const d=_e.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=Bm(o))}const a=(o,l)=>_e.forEach(o,(c,u)=>r(c,u,l));if(_e.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(_e.isString(e)&&(e=e.trim())&&!fF(e))a(dF(e),t);else if(_e.isObject(e)&&_e.isIterable(e)){let o={},l,c;for(const u of e){if(!_e.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[c=u[0]]=(l=o[c])?_e.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}a(o,t)}else e!=null&&r(t,e,i);return this}get(e,t){if(e=Dh(e),e){const i=_e.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return hF(s);if(_e.isFunction(t))return t.call(this,s,i);if(_e.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Dh(e),e){const i=_e.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||h1(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function r(a){if(a=Dh(a),a){const o=_e.findKey(i,a);o&&(!t||h1(i,i[o],o,t))&&(delete i[o],s=!0)}}return _e.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const r=t[i];(!e||h1(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,i={};return _e.forEach(this,(s,r)=>{const a=_e.findKey(i,r);if(a){t[a]=Bm(s),delete t[r];return}const o=e?pF(r):String(r).trim();o!==r&&delete t[r],t[o]=Bm(s),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return _e.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&_e.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[M_]=this[M_]={accessors:{}}).accessors,s=this.prototype;function r(a){const o=Dh(a);i[o]||(gF(s,a),i[o]=!0)}return _e.isArray(e)?e.forEach(r):r(e),this}};or.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_e.reduceDescriptors(or.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});_e.freezeMethods(or);function f1(n,e){const t=this||Ip,i=e||t,s=or.from(i.headers);let r=i.data;return _e.forEach(n,function(o){r=o.call(t,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function iI(n){return!!(n&&n.__CANCEL__)}function Yd(n,e,t){$t.call(this,n??"canceled",$t.ERR_CANCELED,e,t),this.name="CanceledError"}_e.inherits(Yd,$t,{__CANCEL__:!0});function sI(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new $t("Request failed with status code "+t.status,[$t.ERR_BAD_REQUEST,$t.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function mF(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function yF(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,r=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[r];a||(a=c),t[s]=l,i[s]=c;let d=r,h=0;for(;d!==s;)h+=t[d++],d=d%n;if(s=(s+1)%n,s===r&&(r=(r+1)%n),c-a<e)return;const f=u&&c-u;return f?Math.round(h*1e3/f):void 0}}function vF(n,e){let t=0,i=1e3/e,s,r;const a=(c,u=Date.now())=>{t=u,s=null,r&&(clearTimeout(r),r=null),n.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=i?a(c,u):(s=c,r||(r=setTimeout(()=>{r=null,a(s)},i-d)))},()=>s&&a(s)]}const L0=(n,e,t=3)=>{let i=0;const s=yF(50,250);return vF(r=>{const a=r.loaded,o=r.lengthComputable?r.total:void 0,l=a-i,c=s(l),u=a<=o;i=a;const d={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-a)/c:void 0,event:r,lengthComputable:o!=null,[e?"download":"upload"]:!0};n(d)},t)},F_=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},j_=n=>(...e)=>_e.asap(()=>n(...e)),xF=Ls.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Ls.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Ls.origin),Ls.navigator&&/(msie|trident)/i.test(Ls.navigator.userAgent)):()=>!0,bF=Ls.hasStandardBrowserEnv?{write(n,e,t,i,s,r){const a=[n+"="+encodeURIComponent(e)];_e.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),_e.isString(i)&&a.push("path="+i),_e.isString(s)&&a.push("domain="+s),r===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function SF(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function wF(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function rI(n,e,t){let i=!SF(e);return n&&(i||t==!1)?wF(n,e):e}const B_=n=>n instanceof or?{...n}:n;function ou(n,e){e=e||{};const t={};function i(c,u,d,h){return _e.isPlainObject(c)&&_e.isPlainObject(u)?_e.merge.call({caseless:h},c,u):_e.isPlainObject(u)?_e.merge({},u):_e.isArray(u)?u.slice():u}function s(c,u,d,h){if(_e.isUndefined(u)){if(!_e.isUndefined(c))return i(void 0,c,d,h)}else return i(c,u,d,h)}function r(c,u){if(!_e.isUndefined(u))return i(void 0,u)}function a(c,u){if(_e.isUndefined(u)){if(!_e.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function o(c,u,d){if(d in e)return i(c,u);if(d in n)return i(void 0,c)}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u,d)=>s(B_(c),B_(u),d,!0)};return _e.forEach(Object.keys(Object.assign({},n,e)),function(u){const d=l[u]||s,h=d(n[u],e[u],u);_e.isUndefined(h)&&d!==o||(t[u]=h)}),t}const aI=n=>{const e=ou({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:a,auth:o}=e;e.headers=a=or.from(a),e.url=eI(rI(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(_e.isFormData(t)){if(Ls.hasStandardBrowserEnv||Ls.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];a.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Ls.hasStandardBrowserEnv&&(i&&_e.isFunction(i)&&(i=i(e)),i||i!==!1&&xF(e.url))){const c=s&&r&&bF.read(r);c&&a.set(s,c)}return e},_F=typeof XMLHttpRequest<"u",EF=_F&&function(n){return new Promise(function(t,i){const s=aI(n);let r=s.data;const a=or.from(s.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=s,u,d,h,f,p;function m(){f&&f(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function y(){if(!v)return;const x=or.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:x,config:n,request:v};sI(function(L){t(L),m()},function(L){i(L),m()},T),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(i(new $t("Request aborted",$t.ECONNABORTED,n,v)),v=null)},v.onerror=function(){i(new $t("Network Error",$t.ERR_NETWORK,n,v)),v=null},v.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||tI;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),i(new $t(_,T.clarifyTimeoutError?$t.ETIMEDOUT:$t.ECONNABORTED,n,v)),v=null},r===void 0&&a.setContentType(null),"setRequestHeader"in v&&_e.forEach(a.toJSON(),function(_,T){v.setRequestHeader(T,_)}),_e.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),o&&o!=="json"&&(v.responseType=s.responseType),c&&([h,p]=L0(c,!0),v.addEventListener("progress",h)),l&&v.upload&&([d,f]=L0(l),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(u=x=>{v&&(i(!x||x.type?new Yd(null,n,v):x),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const b=mF(s.url);if(b&&Ls.protocols.indexOf(b)===-1){i(new $t("Unsupported protocol "+b+":",$t.ERR_BAD_REQUEST,n));return}v.send(r||null)})},TF=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,s;const r=function(c){if(!s){s=!0,o();const u=c instanceof Error?c:this.reason;i.abort(u instanceof $t?u:new Yd(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,r(new $t(`timeout ${e} of ms exceeded`,$t.ETIMEDOUT))},e);const o=()=>{n&&(a&&clearTimeout(a),a=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),n=null)};n.forEach(c=>c.addEventListener("abort",r));const{signal:l}=i;return l.unsubscribe=()=>_e.asap(o),l}},AF=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},LF=async function*(n,e){for await(const t of kF(n))yield*AF(t,e)},kF=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},U_=(n,e,t,i)=>{const s=LF(n,e);let r=0,a,o=l=>{a||(a=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){o(),l.close();return}let d=u.byteLength;if(t){let h=r+=d;t(h)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),s.return()}},{highWaterMark:2})},Ly=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",oI=Ly&&typeof ReadableStream=="function",CF=Ly&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),lI=(n,...e)=>{try{return!!n(...e)}catch{return!1}},IF=oI&&lI(()=>{let n=!1;const e=new Request(Ls.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),$_=64*1024,mb=oI&&lI(()=>_e.isReadableStream(new Response("").body)),k0={stream:mb&&(n=>n.body)};Ly&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!k0[e]&&(k0[e]=_e.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new $t(`Response type '${e}' is not supported`,$t.ERR_NOT_SUPPORT,i)})})})(new Response);const RF=async n=>{if(n==null)return 0;if(_e.isBlob(n))return n.size;if(_e.isSpecCompliantForm(n))return(await new Request(Ls.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(_e.isArrayBufferView(n)||_e.isArrayBuffer(n))return n.byteLength;if(_e.isURLSearchParams(n)&&(n=n+""),_e.isString(n))return(await CF(n)).byteLength},PF=async(n,e)=>{const t=_e.toFiniteNumber(n.getContentLength());return t??RF(e)},NF=Ly&&(async n=>{let{url:e,method:t,data:i,signal:s,cancelToken:r,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=aI(n);c=c?(c+"").toLowerCase():"text";let f=TF([s,r&&r.toAbortSignal()],a),p;const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let v;try{if(l&&IF&&t!=="get"&&t!=="head"&&(v=await PF(u,i))!==0){let T=new Request(e,{method:"POST",body:i,duplex:"half"}),C;if(_e.isFormData(i)&&(C=T.headers.get("content-type"))&&u.setContentType(C),T.body){const[L,k]=F_(v,L0(j_(l)));i=U_(T.body,$_,L,k)}}_e.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;p=new Request(e,{...h,signal:f,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:y?d:void 0});let b=await fetch(p);const x=mb&&(c==="stream"||c==="response");if(mb&&(o||x&&m)){const T={};["status","statusText","headers"].forEach(M=>{T[M]=b[M]});const C=_e.toFiniteNumber(b.headers.get("content-length")),[L,k]=o&&F_(C,L0(j_(o),!0))||[];b=new Response(U_(b.body,$_,L,()=>{k&&k(),m&&m()}),T)}c=c||"text";let _=await k0[_e.findKey(k0,c)||"text"](b,n);return!x&&m&&m(),await new Promise((T,C)=>{sI(T,C,{data:_,headers:or.from(b.headers),status:b.status,statusText:b.statusText,config:n,request:p})})}catch(y){throw m&&m(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new $t("Network Error",$t.ERR_NETWORK,n,p),{cause:y.cause||y}):$t.from(y,y&&y.code,n,p)}}),yb={http:qM,xhr:EF,fetch:NF};_e.forEach(yb,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const H_=n=>`- ${n}`,DF=n=>_e.isFunction(n)||n===null||n===!1,cI={getAdapter:n=>{n=_e.isArray(n)?n:[n];const{length:e}=n;let t,i;const s={};for(let r=0;r<e;r++){t=n[r];let a;if(i=t,!DF(t)&&(i=yb[(a=String(t)).toLowerCase()],i===void 0))throw new $t(`Unknown adapter '${a}'`);if(i)break;s[a||"#"+r]=i}if(!i){const r=Object.entries(s).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?r.length>1?`since :
`+r.map(H_).join(`
`):" "+H_(r[0]):"as no adapter specified";throw new $t("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:yb};function p1(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Yd(null,n)}function z_(n){return p1(n),n.headers=or.from(n.headers),n.data=f1.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),cI.getAdapter(n.adapter||Ip.adapter)(n).then(function(i){return p1(n),i.data=f1.call(n,n.transformResponse,i),i.headers=or.from(i.headers),i},function(i){return iI(i)||(p1(n),i&&i.response&&(i.response.data=f1.call(n,n.transformResponse,i.response),i.response.headers=or.from(i.response.headers))),Promise.reject(i)})}const uI="1.9.0",ky={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{ky[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const W_={};ky.transitional=function(e,t,i){function s(r,a){return"[Axios v"+uI+"] Transitional option '"+r+"'"+a+(i?". "+i:"")}return(r,a,o)=>{if(e===!1)throw new $t(s(a," has been removed"+(t?" in "+t:"")),$t.ERR_DEPRECATED);return t&&!W_[a]&&(W_[a]=!0,console.warn(s(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,a,o):!0}};ky.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function OF(n,e,t){if(typeof n!="object")throw new $t("options must be an object",$t.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const r=i[s],a=e[r];if(a){const o=n[r],l=o===void 0||a(o,r,n);if(l!==!0)throw new $t("option "+r+" must be "+l,$t.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new $t("Unknown option "+r,$t.ERR_BAD_OPTION)}}const Um={assertOptions:OF,validators:ky},Ca=Um.validators;let Gc=class{constructor(e){this.defaults=e||{},this.interceptors={request:new O_,response:new O_}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ou(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:r}=t;i!==void 0&&Um.assertOptions(i,{silentJSONParsing:Ca.transitional(Ca.boolean),forcedJSONParsing:Ca.transitional(Ca.boolean),clarifyTimeoutError:Ca.transitional(Ca.boolean)},!1),s!=null&&(_e.isFunction(s)?t.paramsSerializer={serialize:s}:Um.assertOptions(s,{encode:Ca.function,serialize:Ca.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Um.assertOptions(t,{baseUrl:Ca.spelling("baseURL"),withXsrfToken:Ca.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=r&&_e.merge(r.common,r[t.method]);r&&_e.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),t.headers=or.concat(a,r);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(t)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,h;if(!l){const p=[z_.bind(this),void 0];for(p.unshift.apply(p,o),p.push.apply(p,c),h=p.length,u=Promise.resolve(t);d<h;)u=u.then(p[d++],p[d++]);return u}h=o.length;let f=t;for(d=0;d<h;){const p=o[d++],m=o[d++];try{f=p(f)}catch(v){m.call(this,v);break}}try{u=z_.call(this,f)}catch(p){return Promise.reject(p)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=ou(this.defaults,e);const t=rI(e.baseURL,e.url,e.allowAbsoluteUrls);return eI(t,e.params,e.paramsSerializer)}};_e.forEach(["delete","get","head","options"],function(e){Gc.prototype[e]=function(t,i){return this.request(ou(i||{},{method:e,url:t,data:(i||{}).data}))}});_e.forEach(["post","put","patch"],function(e){function t(i){return function(r,a,o){return this.request(ou(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}Gc.prototype[e]=t(),Gc.prototype[e+"Form"]=t(!0)});let MF=class dI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const i=this;this.promise.then(s=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](s);i._listeners=null}),this.promise.then=s=>{let r;const a=new Promise(o=>{i.subscribe(o),r=o}).then(s);return a.cancel=function(){i.unsubscribe(r)},a},e(function(r,a,o){i.reason||(i.reason=new Yd(r,a,o),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new dI(function(s){e=s}),cancel:e}}};function FF(n){return function(t){return n.apply(null,t)}}function jF(n){return _e.isObject(n)&&n.isAxiosError===!0}const vb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vb).forEach(([n,e])=>{vb[e]=n});function hI(n){const e=new Gc(n),t=HC(Gc.prototype.request,e);return _e.extend(t,Gc.prototype,e,{allOwnKeys:!0}),_e.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return hI(ou(n,s))},t}const nt=hI(Ip);nt.Axios=Gc;nt.CanceledError=Yd;nt.CancelToken=MF;nt.isCancel=iI;nt.VERSION=uI;nt.toFormData=Ay;nt.AxiosError=$t;nt.Cancel=nt.CanceledError;nt.all=function(e){return Promise.all(e)};nt.spread=FF;nt.isAxiosError=jF;nt.mergeConfig=ou;nt.AxiosHeaders=or;nt.formToJSON=n=>nI(_e.isHTMLForm(n)?new FormData(n):n);nt.getAdapter=cI.getAdapter;nt.HttpStatusCode=vb;nt.default=nt;const{Axios:QJ,AxiosError:JJ,CanceledError:ZJ,isCancel:eZ,CancelToken:tZ,VERSION:nZ,all:iZ,Cancel:sZ,isAxiosError:rZ,spread:aZ,toFormData:oZ,AxiosHeaders:lZ,HttpStatusCode:cZ,formToJSON:uZ,getAdapter:dZ,mergeConfig:hZ}=nt,yn=O.createContext({});var fI={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(r=s(r,i(o)))}return r}function i(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return t.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var a="";for(var o in r)e.call(r,o)&&r[o]&&(a=s(a,o));return a}function s(r,a){return a?r?r+" "+a:r+a:r}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(fI);var BF=fI.exports;const Sn=_p(BF);function xb(){return xb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xb.apply(null,arguments)}function pI(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function V_(n){return"default"+n.charAt(0).toUpperCase()+n.substr(1)}function UF(n){var e=$F(n,"string");return typeof e=="symbol"?e:String(e)}function $F(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function HF(n,e,t){var i=O.useRef(n!==void 0),s=O.useState(e),r=s[0],a=s[1],o=n!==void 0,l=i.current;return i.current=o,!o&&l&&r!==e&&a(e),[o?n:r,O.useCallback(function(c){for(var u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];t&&t.apply(void 0,[c].concat(d)),a(c)},[t])]}function zF(n,e){return Object.keys(e).reduce(function(t,i){var s,r=t,a=r[V_(i)],o=r[i],l=pI(r,[V_(i),i].map(UF)),c=e[i],u=HF(o,a,n[c]),d=u[0],h=u[1];return xb({},l,(s={},s[i]=d,s[c]=h,s))},n)}function bb(n,e){return bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},bb(n,e)}function WF(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,bb(n,e)}const VF=["xxl","xl","lg","md","sm","xs"],GF="xs",Rp=O.createContext({prefixes:{},breakpoints:VF,minBreakpoint:GF}),{Consumer:fZ,Provider:pZ}=Rp;function ui(n,e){const{prefixes:t}=O.useContext(Rp);return n||t[e]||e}function YF(){const{breakpoints:n}=O.useContext(Rp);return n}function qF(){const{minBreakpoint:n}=O.useContext(Rp);return n}function KF(){const{dir:n}=O.useContext(Rp);return n==="rtl"}function Cy(n){return n&&n.ownerDocument||document}function XF(n){var e=Cy(n);return e&&e.defaultView||window}function QF(n,e){return XF(n).getComputedStyle(n,e)}var JF=/([A-Z])/g;function ZF(n){return n.replace(JF,"-$1").toLowerCase()}var e6=/^ms-/;function Bg(n){return ZF(n).replace(e6,"-ms-")}var t6=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function n6(n){return!!(n&&t6.test(n))}function Yc(n,e){var t="",i="";if(typeof e=="string")return n.style.getPropertyValue(Bg(e))||QF(n).getPropertyValue(Bg(e));Object.keys(e).forEach(function(s){var r=e[s];!r&&r!==0?n.style.removeProperty(Bg(s)):n6(s)?i+=s+"("+r+") ":t+=Bg(s)+": "+r+";"}),i&&(t+="transform: "+i+";"),n.style.cssText+=";"+t}var gI={exports:{}},i6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",s6=i6,r6=s6;function mI(){}function yI(){}yI.resetWarningCache=mI;var a6=function(){function n(i,s,r,a,o,l){if(l!==r6){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:yI,resetWarningCache:mI};return t.PropTypes=t,t};gI.exports=a6();var o6=gI.exports;const Mo=_p(o6),G_={disabled:!1},vI=ua.createContext(null);var l6=function(e){return e.scrollTop},Xh="unmounted",kc="exited",xl="entering",Dc="entered",Sb="exiting",Yo=function(n){WF(e,n);function e(i,s){var r;r=n.call(this,i,s)||this;var a=s,o=a&&!a.isMounting?i.enter:i.appear,l;return r.appearStatus=null,i.in?o?(l=kc,r.appearStatus=xl):l=Dc:i.unmountOnExit||i.mountOnEnter?l=Xh:l=kc,r.state={status:l},r.nextCallback=null,r}e.getDerivedStateFromProps=function(s,r){var a=s.in;return a&&r.status===Xh?{status:kc}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var r=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==xl&&a!==Dc&&(r=xl):(a===xl||a===Dc)&&(r=Sb)}this.updateStatus(!1,r)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,r,a,o;return r=a=o=s,s!=null&&typeof s!="number"&&(r=s.exit,a=s.enter,o=s.appear!==void 0?s.appear:a),{exit:r,enter:a,appear:o}},t.updateStatus=function(s,r){if(s===void 0&&(s=!1),r!==null)if(this.cancelNextCallback(),r===xl){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:fd.findDOMNode(this);a&&l6(a)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===kc&&this.setState({status:Xh})},t.performEnter=function(s){var r=this,a=this.props.enter,o=this.context?this.context.isMounting:s,l=this.props.nodeRef?[o]:[fd.findDOMNode(this),o],c=l[0],u=l[1],d=this.getTimeouts(),h=o?d.appear:d.enter;if(!s&&!a||G_.disabled){this.safeSetState({status:Dc},function(){r.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:xl},function(){r.props.onEntering(c,u),r.onTransitionEnd(h,function(){r.safeSetState({status:Dc},function(){r.props.onEntered(c,u)})})})},t.performExit=function(){var s=this,r=this.props.exit,a=this.getTimeouts(),o=this.props.nodeRef?void 0:fd.findDOMNode(this);if(!r||G_.disabled){this.safeSetState({status:kc},function(){s.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Sb},function(){s.props.onExiting(o),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:kc},function(){s.props.onExited(o)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,r){r=this.setNextCallback(r),this.setState(s,r)},t.setNextCallback=function(s){var r=this,a=!0;return this.nextCallback=function(o){a&&(a=!1,r.nextCallback=null,s(o))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},t.onTransitionEnd=function(s,r){this.setNextCallback(r);var a=this.props.nodeRef?this.props.nodeRef.current:fd.findDOMNode(this),o=s==null&&!this.props.addEndListener;if(!a||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===Xh)return null;var r=this.props,a=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var o=pI(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ua.createElement(vI.Provider,{value:null},typeof a=="function"?a(s,o):ua.cloneElement(ua.Children.only(a),o))},e}(ua.Component);Yo.contextType=vI;Yo.propTypes={};function Uu(){}Yo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Uu,onEntering:Uu,onEntered:Uu,onExit:Uu,onExiting:Uu,onExited:Uu};Yo.UNMOUNTED=Xh;Yo.EXITED=kc;Yo.ENTERING=xl;Yo.ENTERED=Dc;Yo.EXITING=Sb;function c6(n){return n.code==="Escape"||n.keyCode===27}function u6(){const n=O.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function Iy(n){if(!n||typeof n=="function")return null;const{major:e}=u6();return e>=19?n.props.ref:n.ref}const qd=!!(typeof window<"u"&&window.document&&window.document.createElement);var wb=!1,_b=!1;try{var g1={get passive(){return wb=!0},get once(){return _b=wb=!0}};qd&&(window.addEventListener("test",g1,g1),window.removeEventListener("test",g1,!0))}catch{}function xI(n,e,t,i){if(i&&typeof i!="boolean"&&!_b){var s=i.once,r=i.capture,a=t;!_b&&s&&(a=t.__once||function o(l){this.removeEventListener(e,o,r),t.call(this,l)},t.__once=a),n.addEventListener(e,a,wb?i:r)}n.addEventListener(e,t,i)}function Eb(n,e,t,i){var s=i&&typeof i!="boolean"?i.capture:i;n.removeEventListener(e,t,s),t.__once&&n.removeEventListener(e,t.__once,s)}function C0(n,e,t,i){return xI(n,e,t,i),function(){Eb(n,e,t,i)}}function d6(n,e,t,i){if(i===void 0&&(i=!0),n){var s=document.createEvent("HTMLEvents");s.initEvent(e,t,i),n.dispatchEvent(s)}}function h6(n){var e=Yc(n,"transitionDuration")||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function f6(n,e,t){t===void 0&&(t=5);var i=!1,s=setTimeout(function(){i||d6(n,"transitionend",!0)},e+t),r=C0(n,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(s),r()}}function bI(n,e,t,i){t==null&&(t=h6(n)||0);var s=f6(n,t,i),r=C0(n,"transitionend",e);return function(){s(),r()}}function Y_(n,e){const t=Yc(n,e)||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function p6(n,e){const t=Y_(n,"transitionDuration"),i=Y_(n,"transitionDelay"),s=bI(n,r=>{r.target===n&&(s(),e(r))},t+i)}function g6(n){n.offsetHeight}const q_=n=>!n||typeof n=="function"?n:e=>{n.current=e};function m6(n,e){const t=q_(n),i=q_(e);return s=>{t&&t(s),i&&i(s)}}function SI(n,e){return O.useMemo(()=>m6(n,e),[n,e])}function y6(n){return n&&"setState"in n?fd.findDOMNode(n):n??null}const v6=ua.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:i,onExiting:s,onExited:r,addEndListener:a,children:o,childRef:l,...c},u)=>{const d=O.useRef(null),h=SI(d,l),f=C=>{h(y6(C))},p=C=>L=>{C&&d.current&&C(d.current,L)},m=O.useCallback(p(n),[n]),v=O.useCallback(p(e),[e]),y=O.useCallback(p(t),[t]),b=O.useCallback(p(i),[i]),x=O.useCallback(p(s),[s]),_=O.useCallback(p(r),[r]),T=O.useCallback(p(a),[a]);return S.jsx(Yo,{ref:u,...c,onEnter:m,onEntered:y,onEntering:v,onExit:b,onExited:_,onExiting:x,addEndListener:T,nodeRef:d,children:typeof o=="function"?(C,L)=>o(C,{...L,ref:f}):ua.cloneElement(o,{ref:f})})});function x6(n){const e=O.useRef(n);return O.useEffect(()=>{e.current=n},[n]),e}function Tb(n){const e=x6(n);return O.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const b6=n=>O.forwardRef((e,t)=>S.jsx("div",{...e,ref:t,className:Sn(e.className,n)}));function S6(n){const e=O.useRef(n);return O.useEffect(()=>{e.current=n},[n]),e}function To(n){const e=S6(n);return O.useCallback(function(...t){return e.current&&e.current(...t)},[e])}function w6(){const n=O.useRef(!0),e=O.useRef(()=>n.current);return O.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function _6(n){const e=O.useRef(null);return O.useEffect(()=>{e.current=n}),e.current}const E6=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",T6=typeof document<"u",K_=T6||E6?O.useLayoutEffect:O.useEffect,A6=["as","disabled"];function L6(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function k6(n){return!n||n.trim()==="#"}function LS({tagName:n,disabled:e,href:t,target:i,rel:s,role:r,onClick:a,tabIndex:o=0,type:l}){n||(t!=null||i!=null||s!=null?n="a":n="button");const c={tagName:n};if(n==="button")return[{type:l||"button",disabled:e},c];const u=h=>{if((e||n==="a"&&k6(t))&&h.preventDefault(),e){h.stopPropagation();return}a==null||a(h)},d=h=>{h.key===" "&&(h.preventDefault(),u(h))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:r??"button",disabled:void 0,tabIndex:e?void 0:o,href:t,target:n==="a"?i:void 0,"aria-disabled":e||void 0,rel:n==="a"?s:void 0,onClick:u,onKeyDown:d},c]}const wI=O.forwardRef((n,e)=>{let{as:t,disabled:i}=n,s=L6(n,A6);const[r,{tagName:a}]=LS(Object.assign({tagName:t,disabled:i},s));return S.jsx(a,Object.assign({},s,r,{ref:e}))});wI.displayName="Button";const C6=["onKeyDown"];function I6(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function R6(n){return!n||n.trim()==="#"}const _I=O.forwardRef((n,e)=>{let{onKeyDown:t}=n,i=I6(n,C6);const[s]=LS(Object.assign({tagName:"a"},i)),r=To(a=>{s.onKeyDown(a),t==null||t(a)});return R6(i.href)||i.role==="button"?S.jsx("a",Object.assign({ref:e},i,s,{onKeyDown:r})):S.jsx("a",Object.assign({ref:e},i,{onKeyDown:t}))});_I.displayName="Anchor";const P6={[xl]:"show",[Dc]:"show"},kS=O.forwardRef(({className:n,children:e,transitionClasses:t={},onEnter:i,...s},r)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},o=O.useCallback((l,c)=>{g6(l),i==null||i(l,c)},[i]);return S.jsx(v6,{ref:r,addEndListener:p6,...a,onEnter:o,childRef:Iy(e),children:(l,c)=>O.cloneElement(e,{...c,className:Sn("fade",n,e.props.className,P6[l],t[l])})})});kS.displayName="Fade";const N6={"aria-label":Mo.string,onClick:Mo.func,variant:Mo.oneOf(["white"])},CS=O.forwardRef(({className:n,variant:e,"aria-label":t="Close",...i},s)=>S.jsx("button",{ref:s,type:"button",className:Sn("btn-close",e&&`btn-close-${e}`,n),"aria-label":t,...i}));CS.displayName="CloseButton";CS.propTypes=N6;const yr=O.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:i,active:s=!1,disabled:r=!1,className:a,...o},l)=>{const c=ui(e,"btn"),[u,{tagName:d}]=LS({tagName:n,disabled:r,...o}),h=d;return S.jsx(h,{...u,...o,ref:l,disabled:r,className:Sn(a,c,s&&"active",t&&`${c}-${t}`,i&&`${c}-${i}`,o.href&&r&&"disabled")})});yr.displayName="Button";const EI=O.createContext(null);EI.displayName="CardHeaderContext";function D6(n){const e=O.useRef(n);return e.current=n,e}function O6(n){const e=D6(n);O.useEffect(()=>()=>e.current(),[])}function M6(n,e){return O.Children.toArray(n).some(t=>O.isValidElement(t)&&t.type===e)}function F6({as:n,bsPrefix:e,className:t,...i}){e=ui(e,"col");const s=YF(),r=qF(),a=[],o=[];return s.forEach(l=>{const c=i[l];delete i[l];let u,d,h;typeof c=="object"&&c!=null?{span:u,offset:d,order:h}=c:u=c;const f=l!==r?`-${l}`:"";u&&a.push(u===!0?`${e}${f}`:`${e}${f}-${u}`),h!=null&&o.push(`order${f}-${h}`),d!=null&&o.push(`offset${f}-${d}`)}),[{...i,className:Sn(t,...a,...o)},{as:n,bsPrefix:e,spans:a}]}const TI=O.forwardRef((n,e)=>{const[{className:t,...i},{as:s="div",bsPrefix:r,spans:a}]=F6(n);return S.jsx(s,{...i,ref:e,className:Sn(t,!a.length&&r)})});TI.displayName="Col";var j6=Function.prototype.bind.call(Function.prototype.call,[].slice);function Cc(n,e){return j6(n.querySelectorAll(e))}function B6(){const[,n]=O.useReducer(e=>e+1,0);return n}function X_(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}const Ab=O.createContext(null),IS=(n,e=null)=>n!=null?String(n):e||null,RS=O.createContext(null);RS.displayName="NavContext";const U6="data-rr-ui-",$6="rrUi";function Ry(n){return`${U6}${n}`}function H6(n){return`${$6}${n}`}const AI=O.createContext(qd?window:void 0);AI.Provider;function PS(){return O.useContext(AI)}const LI=O.createContext(null);LI.displayName="NavbarContext";const z6={type:Mo.string,tooltip:Mo.bool,as:Mo.elementType},Py=O.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:i=!1,...s},r)=>S.jsx(n,{...s,ref:r,className:Sn(e,`${t}-${i?"tooltip":"feedback"}`)}));Py.displayName="Feedback";Py.propTypes=z6;const zo=O.createContext({}),NS=O.forwardRef(({id:n,bsPrefix:e,className:t,type:i="checkbox",isValid:s=!1,isInvalid:r=!1,as:a="input",...o},l)=>{const{controlId:c}=O.useContext(zo);return e=ui(e,"form-check-input"),S.jsx(a,{...o,ref:l,type:i,id:n||c,className:Sn(t,e,s&&"is-valid",r&&"is-invalid")})});NS.displayName="FormCheckInput";const I0=O.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...i},s)=>{const{controlId:r}=O.useContext(zo);return n=ui(n,"form-check-label"),S.jsx("label",{...i,ref:s,htmlFor:t||r,className:Sn(e,n)})});I0.displayName="FormCheckLabel";const kI=O.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:i=!1,reverse:s=!1,disabled:r=!1,isValid:a=!1,isInvalid:o=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:u,className:d,style:h,title:f="",type:p="checkbox",label:m,children:v,as:y="input",...b},x)=>{e=ui(e,"form-check"),t=ui(t,"form-switch");const{controlId:_}=O.useContext(zo),T=O.useMemo(()=>({controlId:n||_}),[_,n]),C=!v&&m!=null&&m!==!1||M6(v,I0),L=S.jsx(NS,{...b,type:p==="switch"?"checkbox":p,ref:x,isValid:a,isInvalid:o,disabled:r,as:y});return S.jsx(zo.Provider,{value:T,children:S.jsx("div",{style:h,className:Sn(d,C&&e,i&&`${e}-inline`,s&&`${e}-reverse`,p==="switch"&&t),children:v||S.jsxs(S.Fragment,{children:[L,C&&S.jsx(I0,{title:f,children:m}),c&&S.jsx(Py,{type:u,tooltip:l,children:c})]})})})});kI.displayName="FormCheck";const R0=Object.assign(kI,{Input:NS,Label:I0}),CI=O.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:i,id:s,className:r,isValid:a=!1,isInvalid:o=!1,plaintext:l,readOnly:c,as:u="input",...d},h)=>{const{controlId:f}=O.useContext(zo);return n=ui(n,"form-control"),S.jsx(u,{...d,type:e,size:i,ref:h,readOnly:c,id:s||f,className:Sn(r,l?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,a&&"is-valid",o&&"is-invalid")})});CI.displayName="FormControl";const W6=Object.assign(CI,{Feedback:Py}),II=O.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=ui(e,"form-floating"),S.jsx(t,{ref:s,className:Sn(n,e),...i})));II.displayName="FormFloating";const DS=O.forwardRef(({controlId:n,as:e="div",...t},i)=>{const s=O.useMemo(()=>({controlId:n}),[n]);return S.jsx(zo.Provider,{value:s,children:S.jsx(e,{...t,ref:i})})});DS.displayName="FormGroup";const RI=O.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:i=!1,className:s,htmlFor:r,...a},o)=>{const{controlId:l}=O.useContext(zo);e=ui(e,"form-label");let c="col-form-label";typeof t=="string"&&(c=`${c} ${c}-${t}`);const u=Sn(s,e,i&&"visually-hidden",t&&c);return r=r||l,t?S.jsx(TI,{ref:o,as:"label",className:u,htmlFor:r,...a}):S.jsx(n,{ref:o,className:u,htmlFor:r,...a})});RI.displayName="FormLabel";const PI=O.forwardRef(({bsPrefix:n,className:e,id:t,...i},s)=>{const{controlId:r}=O.useContext(zo);return n=ui(n,"form-range"),S.jsx("input",{...i,type:"range",ref:s,className:Sn(e,n),id:t||r})});PI.displayName="FormRange";const NI=O.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:i,isValid:s=!1,isInvalid:r=!1,id:a,...o},l)=>{const{controlId:c}=O.useContext(zo);return n=ui(n,"form-select"),S.jsx("select",{...o,size:t,ref:l,className:Sn(i,n,e&&`${n}-${e}`,s&&"is-valid",r&&"is-invalid"),id:a||c})});NI.displayName="FormSelect";const DI=O.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:i,...s},r)=>(n=ui(n,"form-text"),S.jsx(t,{...s,ref:r,className:Sn(e,n,i&&"text-muted")})));DI.displayName="FormText";const OI=O.forwardRef((n,e)=>S.jsx(R0,{...n,ref:e,type:"switch"}));OI.displayName="Switch";const V6=Object.assign(OI,{Input:R0.Input,Label:R0.Label}),MI=O.forwardRef(({bsPrefix:n,className:e,children:t,controlId:i,label:s,...r},a)=>(n=ui(n,"form-floating"),S.jsxs(DS,{ref:a,className:Sn(e,n),controlId:i,...r,children:[t,S.jsx("label",{htmlFor:i,children:s})]})));MI.displayName="FloatingLabel";const G6={_ref:Mo.any,validated:Mo.bool,as:Mo.elementType},OS=O.forwardRef(({className:n,validated:e,as:t="form",...i},s)=>S.jsx(t,{...i,ref:s,className:Sn(n,e&&"was-validated")}));OS.displayName="Form";OS.propTypes=G6;const ta=Object.assign(OS,{Group:DS,Control:W6,Floating:II,Check:R0,Switch:V6,Label:RI,Text:DI,Range:PI,Select:NI,FloatingLabel:MI}),Q_=n=>!n||typeof n=="function"?n:e=>{n.current=e};function Y6(n,e){const t=Q_(n),i=Q_(e);return s=>{t&&t(s),i&&i(s)}}function Ny(n,e){return O.useMemo(()=>Y6(n,e),[n,e])}const FI=O.createContext(null),q6=["as","active","eventKey"];function K6(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function jI({key:n,onClick:e,active:t,id:i,role:s,disabled:r}){const a=O.useContext(Ab),o=O.useContext(RS),l=O.useContext(FI);let c=t;const u={role:s};if(o){!s&&o.role==="tablist"&&(u.role="tab");const d=o.getControllerId(n??null),h=o.getControlledId(n??null);u[Ry("event-key")]=n,u.id=d||i,c=t==null&&n!=null?o.activeKey===n:t,(c||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(u["aria-controls"]=h)}return u.role==="tab"&&(u["aria-selected"]=c,c||(u.tabIndex=-1),r&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=To(d=>{r||(e==null||e(d),n!=null&&a&&!d.isPropagationStopped()&&a(n,d))}),[u,{isActive:c}]}const BI=O.forwardRef((n,e)=>{let{as:t=wI,active:i,eventKey:s}=n,r=K6(n,q6);const[a,o]=jI(Object.assign({key:IS(s,r.href),active:i},r));return a[Ry("active")]=o.isActive,S.jsx(t,Object.assign({},r,a,{ref:e}))});BI.displayName="NavItem";const X6=["as","onSelect","activeKey","role","onKeyDown"];function Q6(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}const J_=()=>{},Z_=Ry("event-key"),UI=O.forwardRef((n,e)=>{let{as:t="div",onSelect:i,activeKey:s,role:r,onKeyDown:a}=n,o=Q6(n,X6);const l=B6(),c=O.useRef(!1),u=O.useContext(Ab),d=O.useContext(FI);let h,f;d&&(r=r||"tablist",s=d.activeKey,h=d.getControlledId,f=d.getControllerId);const p=O.useRef(null),m=x=>{const _=p.current;if(!_)return null;const T=Cc(_,`[${Z_}]:not([aria-disabled=true])`),C=_.querySelector("[aria-selected=true]");if(!C||C!==document.activeElement)return null;const L=T.indexOf(C);if(L===-1)return null;let k=L+x;return k>=T.length&&(k=0),k<0&&(k=T.length-1),T[k]},v=(x,_)=>{x!=null&&(i==null||i(x,_),u==null||u(x,_))},y=x=>{if(a==null||a(x),!d)return;let _;switch(x.key){case"ArrowLeft":case"ArrowUp":_=m(-1);break;case"ArrowRight":case"ArrowDown":_=m(1);break;default:return}_&&(x.preventDefault(),v(_.dataset[H6("EventKey")]||null,x),c.current=!0,l())};O.useEffect(()=>{if(p.current&&c.current){const x=p.current.querySelector(`[${Z_}][aria-selected=true]`);x==null||x.focus()}c.current=!1});const b=Ny(e,p);return S.jsx(Ab.Provider,{value:v,children:S.jsx(RS.Provider,{value:{role:r,activeKey:IS(s),getControlledId:h||J_,getControllerId:f||J_},children:S.jsx(t,Object.assign({},o,{onKeyDown:y,ref:b,role:r}))})})});UI.displayName="Nav";const J6=Object.assign(UI,{Item:BI});var Ug;function eE(n){if((!Ug&&Ug!==0||n)&&qd){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Ug=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Ug}function Z6(){return O.useState(null)}function m1(n){n===void 0&&(n=Cy());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch{return n.body}}function e8(n){const e=O.useRef(n);return e.current=n,e}function t8(n){const e=e8(n);O.useEffect(()=>()=>e.current(),[])}function n8(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const tE=Ry("modal-open");class MS{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:i=!1}={}){this.handleContainerOverflow=t,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return n8(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();e.style={overflow:s.style.overflow,[i]:s.style[i]},e.scrollBarWidth&&(t[i]=`${parseInt(Yc(s,i)||"0",10)+e.scrollBarWidth}px`),s.setAttribute(tE,""),Yc(s,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(tE),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const y1=(n,e)=>qd?n==null?(e||Cy()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function i8(n,e){const t=PS(),[i,s]=O.useState(()=>y1(n,t==null?void 0:t.document));if(!i){const r=y1(n);r&&s(r)}return O.useEffect(()=>{},[e,i]),O.useEffect(()=>{const r=y1(n);r!==i&&s(r)},[n,i]),i}function s8({children:n,in:e,onExited:t,mountOnEnter:i,unmountOnExit:s}){const r=O.useRef(null),a=O.useRef(e),o=To(t);O.useEffect(()=>{e?a.current=!0:o(r.current)},[e,o]);const l=Ny(r,Iy(n)),c=O.cloneElement(n,{ref:l});return e?c:s||!a.current&&i?null:c}const r8=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function a8(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function o8(n){let{onEnter:e,onEntering:t,onEntered:i,onExit:s,onExiting:r,onExited:a,addEndListener:o,children:l}=n,c=a8(n,r8);const u=O.useRef(null),d=Ny(u,Iy(l)),h=_=>T=>{_&&u.current&&_(u.current,T)},f=O.useCallback(h(e),[e]),p=O.useCallback(h(t),[t]),m=O.useCallback(h(i),[i]),v=O.useCallback(h(s),[s]),y=O.useCallback(h(r),[r]),b=O.useCallback(h(a),[a]),x=O.useCallback(h(o),[o]);return Object.assign({},c,{nodeRef:u},e&&{onEnter:f},t&&{onEntering:p},i&&{onEntered:m},s&&{onExit:v},r&&{onExiting:y},a&&{onExited:b},o&&{addEndListener:x},{children:typeof l=="function"?(_,T)=>l(_,Object.assign({},T,{ref:d})):O.cloneElement(l,{ref:d})})}const l8=["component"];function c8(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}const u8=O.forwardRef((n,e)=>{let{component:t}=n,i=c8(n,l8);const s=o8(i);return S.jsx(t,Object.assign({ref:e},s))});function d8({in:n,onTransition:e}){const t=O.useRef(null),i=O.useRef(!0),s=To(e);return K_(()=>{if(!t.current)return;let r=!1;return s({in:n,element:t.current,initial:i.current,isStale:()=>r}),()=>{r=!0}},[n,s]),K_(()=>(i.current=!1,()=>{i.current=!0}),[]),t}function h8({children:n,in:e,onExited:t,onEntered:i,transition:s}){const[r,a]=O.useState(!e);e&&r&&a(!1);const o=d8({in:!!e,onTransition:c=>{const u=()=>{c.isStale()||(c.in?i==null||i(c.element,c.initial):(a(!0),t==null||t(c.element)))};Promise.resolve(s(c)).then(u,d=>{throw c.in||a(!0),d})}}),l=Ny(o,Iy(n));return r&&!e?null:O.cloneElement(n,{ref:l})}function nE(n,e,t){return n?S.jsx(u8,Object.assign({},t,{component:n})):e?S.jsx(h8,Object.assign({},t,{transition:e})):S.jsx(s8,Object.assign({},t))}const f8=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function p8(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}let v1;function g8(n){return v1||(v1=new MS({ownerDocument:n==null?void 0:n.document})),v1}function m8(n){const e=PS(),t=n||g8(e),i=O.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>t.add(i.current),remove:()=>t.remove(i.current),isTopModal:()=>t.isTopModal(i.current),setDialogRef:O.useCallback(s=>{i.current.dialog=s},[]),setBackdropRef:O.useCallback(s=>{i.current.backdrop=s},[])})}const $I=O.forwardRef((n,e)=>{let{show:t=!1,role:i="dialog",className:s,style:r,children:a,backdrop:o=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:d,runTransition:h,backdropTransition:f,runBackdropTransition:p,autoFocus:m=!0,enforceFocus:v=!0,restoreFocus:y=!0,restoreFocusOptions:b,renderDialog:x,renderBackdrop:_=ve=>S.jsx("div",Object.assign({},ve)),manager:T,container:C,onShow:L,onHide:k=()=>{},onExit:M,onExited:D,onExiting:I,onEnter:R,onEntering:q,onEntered:Y}=n,ee=p8(n,f8);const j=PS(),z=i8(C),B=m8(T),U=w6(),Q=_6(t),[re,N]=O.useState(!t),W=O.useRef(null);O.useImperativeHandle(e,()=>B,[B]),qd&&!Q&&t&&(W.current=m1(j==null?void 0:j.document)),t&&re&&N(!1);const K=To(()=>{if(B.add(),De.current=C0(document,"keydown",de),ge.current=C0(document,"focus",()=>setTimeout(te),!0),L&&L(),m){var ve,ne;const Qe=m1((ve=(ne=B.dialog)==null?void 0:ne.ownerDocument)!=null?ve:j==null?void 0:j.document);B.dialog&&Qe&&!X_(B.dialog,Qe)&&(W.current=Qe,B.dialog.focus())}}),Z=To(()=>{if(B.remove(),De.current==null||De.current(),ge.current==null||ge.current(),y){var ve;(ve=W.current)==null||ve.focus==null||ve.focus(b),W.current=null}});O.useEffect(()=>{!t||!z||K()},[t,z,K]),O.useEffect(()=>{re&&Z()},[re,Z]),t8(()=>{Z()});const te=To(()=>{if(!v||!U()||!B.isTopModal())return;const ve=m1(j==null?void 0:j.document);B.dialog&&ve&&!X_(B.dialog,ve)&&B.dialog.focus()}),oe=To(ve=>{ve.target===ve.currentTarget&&(c==null||c(ve),o===!0&&k())}),de=To(ve=>{l&&c6(ve)&&B.isTopModal()&&(u==null||u(ve),ve.defaultPrevented||k())}),ge=O.useRef(),De=O.useRef(),Re=(...ve)=>{N(!0),D==null||D(...ve)};if(!z)return null;const Ce=Object.assign({role:i,ref:B.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},ee,{style:r,className:s,tabIndex:-1});let Be=x?x(Ce):S.jsx("div",Object.assign({},Ce,{children:O.cloneElement(a,{role:"document"})}));Be=nE(d,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:M,onExiting:I,onExited:Re,onEnter:R,onEntering:q,onEntered:Y,children:Be});let Ze=null;return o&&(Ze=_({ref:B.setBackdropRef,onClick:oe}),Ze=nE(f,p,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Ze})),S.jsx(S.Fragment,{children:fd.createPortal(S.jsxs(S.Fragment,{children:[Ze,Be]}),z)})});$I.displayName="Modal";const y8=Object.assign($I,{Manager:MS});function v8(n,e){return n.classList?n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function x8(n,e){n.classList?n.classList.add(e):v8(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function iE(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function b8(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=iE(n.className,e):n.setAttribute("class",iE(n.className&&n.className.baseVal||"",e))}const $u={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class S8 extends MS{adjustAndStore(e,t,i){const s=t.style[e];t.dataset[e]=s,Yc(t,{[e]:`${parseFloat(Yc(t,e))+i}px`})}restore(e,t){const i=t.dataset[e];i!==void 0&&(delete t.dataset[e],Yc(t,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(x8(t,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Cc(t,$u.FIXED_CONTENT).forEach(r=>this.adjustAndStore(i,r,e.scrollBarWidth)),Cc(t,$u.STICKY_CONTENT).forEach(r=>this.adjustAndStore(s,r,-e.scrollBarWidth)),Cc(t,$u.NAVBAR_TOGGLER).forEach(r=>this.adjustAndStore(s,r,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();b8(t,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Cc(t,$u.FIXED_CONTENT).forEach(r=>this.restore(i,r)),Cc(t,$u.STICKY_CONTENT).forEach(r=>this.restore(s,r)),Cc(t,$u.NAVBAR_TOGGLER).forEach(r=>this.restore(s,r))}}let x1;function w8(n){return x1||(x1=new S8(n)),x1}const HI=O.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=ui(e,"modal-body"),S.jsx(t,{ref:s,className:Sn(n,e),...i})));HI.displayName="ModalBody";const zI=O.createContext({onHide(){}}),FS=O.forwardRef(({bsPrefix:n,className:e,contentClassName:t,centered:i,size:s,fullscreen:r,children:a,scrollable:o,...l},c)=>{n=ui(n,"modal");const u=`${n}-dialog`,d=typeof r=="string"?`${n}-fullscreen-${r}`:`${n}-fullscreen`;return S.jsx("div",{...l,ref:c,className:Sn(u,e,s&&`${n}-${s}`,i&&`${u}-centered`,o&&`${u}-scrollable`,r&&d),children:S.jsx("div",{className:Sn(`${n}-content`,t),children:a})})});FS.displayName="ModalDialog";const WI=O.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=ui(e,"modal-footer"),S.jsx(t,{ref:s,className:Sn(n,e),...i})));WI.displayName="ModalFooter";const _8=O.forwardRef(({closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:i,children:s,...r},a)=>{const o=O.useContext(zI),l=Tb(()=>{o==null||o.onHide(),i==null||i()});return S.jsxs("div",{ref:a,...r,children:[s,t&&S.jsx(CS,{"aria-label":n,variant:e,onClick:l})]})}),VI=O.forwardRef(({bsPrefix:n,className:e,closeLabel:t="Close",closeButton:i=!1,...s},r)=>(n=ui(n,"modal-header"),S.jsx(_8,{ref:r,...s,className:Sn(e,n),closeLabel:t,closeButton:i})));VI.displayName="ModalHeader";const E8=b6("h4"),GI=O.forwardRef(({className:n,bsPrefix:e,as:t=E8,...i},s)=>(e=ui(e,"modal-title"),S.jsx(t,{ref:s,className:Sn(n,e),...i})));GI.displayName="ModalTitle";function T8(n){return S.jsx(kS,{...n,timeout:null})}function A8(n){return S.jsx(kS,{...n,timeout:null})}const YI=O.forwardRef(({bsPrefix:n,className:e,style:t,dialogClassName:i,contentClassName:s,children:r,dialogAs:a=FS,"data-bs-theme":o,"aria-labelledby":l,"aria-describedby":c,"aria-label":u,show:d=!1,animation:h=!0,backdrop:f=!0,keyboard:p=!0,onEscapeKeyDown:m,onShow:v,onHide:y,container:b,autoFocus:x=!0,enforceFocus:_=!0,restoreFocus:T=!0,restoreFocusOptions:C,onEntered:L,onExit:k,onExiting:M,onEnter:D,onEntering:I,onExited:R,backdropClassName:q,manager:Y,...ee},j)=>{const[z,B]=O.useState({}),[U,Q]=O.useState(!1),re=O.useRef(!1),N=O.useRef(!1),W=O.useRef(null),[K,Z]=Z6(),te=SI(j,Z),oe=Tb(y),de=KF();n=ui(n,"modal");const ge=O.useMemo(()=>({onHide:oe}),[oe]);function De(){return Y||w8({isRTL:de})}function Re(We){if(!qd)return;const Lt=De().getScrollbarWidth()>0,zt=We.scrollHeight>Cy(We).documentElement.clientHeight;B({paddingRight:Lt&&!zt?eE():void 0,paddingLeft:!Lt&&zt?eE():void 0})}const Ce=Tb(()=>{K&&Re(K.dialog)});O6(()=>{Eb(window,"resize",Ce),W.current==null||W.current()});const Be=()=>{re.current=!0},Ze=We=>{re.current&&K&&We.target===K.dialog&&(N.current=!0),re.current=!1},ve=()=>{Q(!0),W.current=bI(K.dialog,()=>{Q(!1)})},ne=We=>{We.target===We.currentTarget&&ve()},Qe=We=>{if(f==="static"){ne(We);return}if(N.current||We.target!==We.currentTarget){N.current=!1;return}y==null||y()},Ye=We=>{p?m==null||m(We):(We.preventDefault(),f==="static"&&ve())},he=(We,Lt)=>{We&&Re(We),D==null||D(We,Lt)},Me=We=>{W.current==null||W.current(),k==null||k(We)},Ue=(We,Lt)=>{I==null||I(We,Lt),xI(window,"resize",Ce)},$e=We=>{We&&(We.style.display=""),R==null||R(We),Eb(window,"resize",Ce)},Fe=O.useCallback(We=>S.jsx("div",{...We,className:Sn(`${n}-backdrop`,q,!h&&"show")}),[h,q,n]),Xe={...t,...z};Xe.display="block";const _t=We=>S.jsx("div",{role:"dialog",...We,style:Xe,className:Sn(e,n,U&&`${n}-static`,!h&&"show"),onClick:f?Qe:void 0,onMouseUp:Ze,"data-bs-theme":o,"aria-label":u,"aria-labelledby":l,"aria-describedby":c,children:S.jsx(a,{...ee,onMouseDown:Be,className:i,contentClassName:s,children:r})});return S.jsx(zI.Provider,{value:ge,children:S.jsx(y8,{show:d,ref:te,backdrop:f,container:b,keyboard:!0,autoFocus:x,enforceFocus:_,restoreFocus:T,restoreFocusOptions:C,onEscapeKeyDown:Ye,onShow:v,onHide:y,onEnter:he,onEntering:Ue,onEntered:L,onExit:Me,onExiting:M,onExited:$e,manager:De(),transition:h?T8:void 0,backdropTransition:h?A8:void 0,renderBackdrop:Fe,renderDialog:_t})})});YI.displayName="Modal";const yt=Object.assign(YI,{Body:HI,Header:VI,Title:GI,Footer:WI,Dialog:FS,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),qI=O.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},s)=>(e=ui(e,"nav-item"),S.jsx(t,{ref:s,className:Sn(n,e),...i})));qI.displayName="NavItem";const KI=O.forwardRef(({bsPrefix:n,className:e,as:t=_I,active:i,eventKey:s,disabled:r=!1,...a},o)=>{n=ui(n,"nav-link");const[l,c]=jI({key:IS(s,a.href),active:i,disabled:r,...a});return S.jsx(t,{...a,...l,ref:o,disabled:r,className:Sn(e,n,r&&"disabled",c.isActive&&"active")})});KI.displayName="NavLink";const XI=O.forwardRef((n,e)=>{const{as:t="div",bsPrefix:i,variant:s,fill:r=!1,justify:a=!1,navbar:o,navbarScroll:l,className:c,activeKey:u,...d}=zF(n,{activeKey:"onSelect"}),h=ui(i,"nav");let f,p,m=!1;const v=O.useContext(LI),y=O.useContext(EI);return v?(f=v.bsPrefix,m=o??!0):y&&({cardHeaderBsPrefix:p}=y),S.jsx(J6,{as:t,ref:e,activeKey:u,className:Sn(c,{[h]:!m,[`${f}-nav`]:m,[`${f}-nav-scroll`]:m&&l,[`${p}-${s}`]:!!p,[`${h}-${s}`]:!!s,[`${h}-fill`]:r,[`${h}-justified`]:a}),...d})});XI.displayName="Nav";const xr=Object.assign(XI,{Item:qI,Link:KI}),sE=O.forwardRef(({bsPrefix:n,className:e,striped:t,bordered:i,borderless:s,hover:r,size:a,variant:o,responsive:l,...c},u)=>{const d=ui(n,"table"),h=Sn(e,d,o&&`${d}-${o}`,a&&`${d}-${a}`,t&&`${d}-${typeof t=="string"?`striped-${t}`:"striped"}`,i&&`${d}-bordered`,s&&`${d}-borderless`,r&&`${d}-hover`),f=S.jsx("table",{...c,className:h,ref:u});if(l){let p=`${d}-responsive`;return typeof l=="string"&&(p=`${p}-${l}`),S.jsx("div",{className:p,children:f})}return f});/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qf(){return Qf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Qf.apply(this,arguments)}var kl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(kl||(kl={}));const rE="popstate";function L8(n){n===void 0&&(n={});function e(i,s){let{pathname:r,search:a,hash:o}=i.location;return Lb("",{pathname:r,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:P0(s)}return C8(e,t,null,n)}function yi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function QI(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function k8(){return Math.random().toString(36).substr(2,8)}function aE(n,e){return{usr:n.state,key:n.key,idx:e}}function Lb(n,e,t,i){return t===void 0&&(t=null),Qf({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Kd(e):e,{state:t,key:e&&e.key||i||k8()})}function P0(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Kd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function C8(n,e,t,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,o=kl.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(Qf({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=kl.Pop;let v=u(),y=v==null?null:v-c;c=v,l&&l({action:o,location:m.location,delta:y})}function h(v,y){o=kl.Push;let b=Lb(m.location,v,y);c=u()+1;let x=aE(b,c),_=m.createHref(b);try{a.pushState(x,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(_)}r&&l&&l({action:o,location:m.location,delta:1})}function f(v,y){o=kl.Replace;let b=Lb(m.location,v,y);c=u();let x=aE(b,c),_=m.createHref(b);a.replaceState(x,"",_),r&&l&&l({action:o,location:m.location,delta:0})}function p(v){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof v=="string"?v:P0(v);return b=b.replace(/ $/,"%20"),yi(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return o},get location(){return n(s,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(rE,d),l=v,()=>{s.removeEventListener(rE,d),l=null}},createHref(v){return e(s,v)},createURL:p,encodeLocation(v){let y=p(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(v){return a.go(v)}};return m}var oE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(oE||(oE={}));function I8(n,e,t){return t===void 0&&(t="/"),R8(n,e,t)}function R8(n,e,t,i){let s=typeof e=="string"?Kd(e):e,r=Md(s.pathname||"/",t);if(r==null)return null;let a=JI(n);P8(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=z8(r);o=$8(a[l],c)}return o}function JI(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let s=(r,a,o)=>{let l={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};l.relativePath.startsWith("/")&&(yi(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Wl([i,l.relativePath]),u=t.concat(l);r.children&&r.children.length>0&&(yi(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),JI(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:B8(c,r.index),routesMeta:u})};return n.forEach((r,a)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))s(r,a);else for(let l of ZI(r.path))s(r,a,l)}),e}function ZI(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let a=ZI(i.join("/")),o=[];return o.push(...a.map(l=>l===""?r:[r,l].join("/"))),s&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function P8(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:U8(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const N8=/^:[\w-]+$/,D8=3,O8=2,M8=1,F8=10,j8=-2,lE=n=>n==="*";function B8(n,e){let t=n.split("/"),i=t.length;return t.some(lE)&&(i+=j8),e&&(i+=O8),t.filter(s=>!lE(s)).reduce((s,r)=>s+(N8.test(r)?D8:r===""?M8:F8),i)}function U8(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function $8(n,e,t){let{routesMeta:i}=n,s={},r="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,u=r==="/"?e:e.slice(r.length)||"/",d=kb({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:Wl([r,d.pathname]),pathnameBase:Y8(Wl([r,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(r=Wl([r,d.pathnameBase]))}return a}function kb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=H8(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:i.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let m=o[d]||"";a=r.slice(0,r.length-m.length).replace(/(.)\/+$/,"$1")}const p=o[d];return f&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:a,pattern:n}}function H8(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),QI(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function z8(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return QI(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Md(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function W8(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Kd(n):n;return{pathname:t?t.startsWith("/")?t:V8(t,e):e,search:q8(i),hash:K8(s)}}function V8(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function b1(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G8(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function eR(n,e){let t=G8(n);return e?t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function tR(n,e,t,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Kd(n):(s=Qf({},n),yi(!s.pathname||!s.pathname.includes("?"),b1("?","pathname","search",s)),yi(!s.pathname||!s.pathname.includes("#"),b1("#","pathname","hash",s)),yi(!s.search||!s.search.includes("#"),b1("#","search","hash",s)));let r=n===""||s.pathname==="",a=r?"/":s.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!i&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=W8(s,o),c=a&&a!=="/"&&a.endsWith("/"),u=(r||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Wl=n=>n.join("/").replace(/\/\/+/g,"/"),Y8=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),q8=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,K8=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function X8(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const nR=["post","put","patch","delete"];new Set(nR);const Q8=["get",...nR];new Set(Q8);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jf(){return Jf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Jf.apply(this,arguments)}const Dy=O.createContext(null),iR=O.createContext(null),rc=O.createContext(null),Oy=O.createContext(null),fu=O.createContext({outlet:null,matches:[],isDataRoute:!1}),sR=O.createContext(null);function J8(n,e){let{relative:t}=e===void 0?{}:e;Pp()||yi(!1);let{basename:i,navigator:s}=O.useContext(rc),{hash:r,pathname:a,search:o}=My(n,{relative:t}),l=a;return i!=="/"&&(l=a==="/"?i:Wl([i,a])),s.createHref({pathname:l,search:o,hash:r})}function Pp(){return O.useContext(Oy)!=null}function Np(){return Pp()||yi(!1),O.useContext(Oy).location}function rR(n){O.useContext(rc).static||O.useLayoutEffect(n)}function Z8(){let{isDataRoute:n}=O.useContext(fu);return n?hj():ej()}function ej(){Pp()||yi(!1);let n=O.useContext(Dy),{basename:e,future:t,navigator:i}=O.useContext(rc),{matches:s}=O.useContext(fu),{pathname:r}=Np(),a=JSON.stringify(eR(s,t.v7_relativeSplatPath)),o=O.useRef(!1);return rR(()=>{o.current=!0}),O.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){i.go(c);return}let d=tR(c,JSON.parse(a),r,u.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Wl([e,d.pathname])),(u.replace?i.replace:i.push)(d,u.state,u)},[e,i,a,r,n])}function My(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=O.useContext(rc),{matches:s}=O.useContext(fu),{pathname:r}=Np(),a=JSON.stringify(eR(s,i.v7_relativeSplatPath));return O.useMemo(()=>tR(n,JSON.parse(a),r,t==="path"),[n,a,r,t])}function tj(n,e){return nj(n,e)}function nj(n,e,t,i){Pp()||yi(!1);let{navigator:s,static:r}=O.useContext(rc),{matches:a}=O.useContext(fu),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Np(),d;if(e){var h;let y=typeof e=="string"?Kd(e):e;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||yi(!1),d=y}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let m=I8(n,{pathname:p}),v=oj(m&&m.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Wl([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Wl([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,t,i);return e&&v?O.createElement(Oy.Provider,{value:{location:Jf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:kl.Pop}},v):v}function ij(){let n=dj(),e=X8(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:s},t):null,null)}const sj=O.createElement(ij,null);class rj extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?O.createElement(fu.Provider,{value:this.props.routeContext},O.createElement(sR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aj(n){let{routeContext:e,match:t,children:i}=n,s=O.useContext(Dy);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),O.createElement(fu.Provider,{value:e},i)}function oj(n,e,t,i){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(s=t)==null?void 0:s.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||yi(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=t,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let f,p=!1,m=null,v=null;t&&(f=o&&d.route.id?o[d.route.id]:void 0,m=d.route.errorElement||sj,l&&(c<0&&h===0?(fj("route-fallback"),p=!0,v=null):c===h&&(p=!0,v=d.route.hydrateFallbackElement||null)));let y=e.concat(a.slice(0,h+1)),b=()=>{let x;return f?x=m:p?x=v:d.route.Component?x=O.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=u,O.createElement(aj,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:x})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?O.createElement(rj,{location:t.location,revalidation:t.revalidation,component:m,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var aR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(aR||{}),oR=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(oR||{});function lj(n){let e=O.useContext(Dy);return e||yi(!1),e}function cj(n){let e=O.useContext(iR);return e||yi(!1),e}function uj(n){let e=O.useContext(fu);return e||yi(!1),e}function lR(n){let e=uj(),t=e.matches[e.matches.length-1];return t.route.id||yi(!1),t.route.id}function dj(){var n;let e=O.useContext(sR),t=cj(),i=lR();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function hj(){let{router:n}=lj(aR.UseNavigateStable),e=lR(oR.UseNavigateStable),t=O.useRef(!1);return rR(()=>{t.current=!0}),O.useCallback(function(s,r){r===void 0&&(r={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Jf({fromRouteId:e},r)))},[n,e])}const cE={};function fj(n,e,t){cE[n]||(cE[n]=!0)}function pj(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Bs(n){yi(!1)}function gj(n){let{basename:e="/",children:t=null,location:i,navigationType:s=kl.Pop,navigator:r,static:a=!1,future:o}=n;Pp()&&yi(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:r,static:a,future:Jf({v7_relativeSplatPath:!1},o)}),[l,o,r,a]);typeof i=="string"&&(i=Kd(i));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=i,m=O.useMemo(()=>{let v=Md(u,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:f,key:p},navigationType:s}},[l,u,d,h,f,p,s]);return m==null?null:O.createElement(rc.Provider,{value:c},O.createElement(Oy.Provider,{children:t,value:m}))}function mj(n){let{children:e,location:t}=n;return tj(Cb(e),t)}new Promise(()=>{});function Cb(n,e){e===void 0&&(e=[]);let t=[];return O.Children.forEach(n,(i,s)=>{if(!O.isValidElement(i))return;let r=[...e,s];if(i.type===O.Fragment){t.push.apply(t,Cb(i.props.children,r));return}i.type!==Bs&&yi(!1),!i.props.index||!i.props.children||yi(!1);let a={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Cb(i.props.children,r)),t.push(a)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N0(){return N0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},N0.apply(this,arguments)}function cR(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function yj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function vj(n,e){return n.button===0&&(!e||e==="_self")&&!yj(n)}const xj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],bj=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Sj="6";try{window.__reactRouterVersion=Sj}catch{}const wj=O.createContext({isTransitioning:!1}),_j="startTransition",uE=J3[_j];function Ej(n){let{basename:e,children:t,future:i,window:s}=n,r=O.useRef();r.current==null&&(r.current=L8({window:s,v5Compat:!0}));let a=r.current,[o,l]=O.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},u=O.useCallback(d=>{c&&uE?uE(()=>l(d)):l(d)},[l,c]);return O.useLayoutEffect(()=>a.listen(u),[a,u]),O.useEffect(()=>pj(i),[i]),O.createElement(gj,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:i})}const Tj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Aj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lj=O.forwardRef(function(e,t){let{onClick:i,relative:s,reloadDocument:r,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=cR(e,xj),{basename:f}=O.useContext(rc),p,m=!1;if(typeof c=="string"&&Aj.test(c)&&(p=c,Tj))try{let x=new URL(window.location.href),_=c.startsWith("//")?new URL(x.protocol+c):new URL(c),T=Md(_.pathname,f);_.origin===x.origin&&T!=null?c=T+_.search+_.hash:m=!0}catch{}let v=J8(c,{relative:s}),y=Cj(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:s,viewTransition:d});function b(x){i&&i(x),x.defaultPrevented||y(x)}return O.createElement("a",N0({},h,{href:p||v,onClick:m||r?i:b,ref:t,target:l}))}),Cl=O.forwardRef(function(e,t){let{"aria-current":i="page",caseSensitive:s=!1,className:r="",end:a=!1,style:o,to:l,viewTransition:c,children:u}=e,d=cR(e,bj),h=My(l,{relative:d.relative}),f=Np(),p=O.useContext(iR),{navigator:m,basename:v}=O.useContext(rc),y=p!=null&&Ij(h)&&c===!0,b=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,x=f.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(x=x.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&v&&(_=Md(_,v)||_);const T=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let C=x===b||!a&&x.startsWith(b)&&x.charAt(T)==="/",L=_!=null&&(_===b||!a&&_.startsWith(b)&&_.charAt(b.length)==="/"),k={isActive:C,isPending:L,isTransitioning:y},M=C?i:void 0,D;typeof r=="function"?D=r(k):D=[r,C?"active":null,L?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(k):o;return O.createElement(Lj,N0({},d,{"aria-current":M,className:D,ref:t,style:I,to:l,viewTransition:c}),typeof u=="function"?u(k):u)});var Ib;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ib||(Ib={}));var dE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(dE||(dE={}));function kj(n){let e=O.useContext(Dy);return e||yi(!1),e}function Cj(n,e){let{target:t,replace:i,state:s,preventScrollReset:r,relative:a,viewTransition:o}=e===void 0?{}:e,l=Z8(),c=Np(),u=My(n,{relative:a});return O.useCallback(d=>{if(vj(d,t)){d.preventDefault();let h=i!==void 0?i:P0(c)===P0(u);l(n,{replace:h,state:s,preventScrollReset:r,relative:a,viewTransition:o})}},[c,l,u,i,s,t,n,r,a,o])}function Ij(n,e){e===void 0&&(e={});let t=O.useContext(wj);t==null&&yi(!1);let{basename:i}=kj(Ib.useViewTransitionState),s=My(n,{relative:e.relative});if(!t.isTransitioning)return!1;let r=Md(t.currentLocation.pathname,i)||t.currentLocation.pathname,a=Md(t.nextLocation.pathname,i)||t.nextLocation.pathname;return kb(s.pathname,a)!=null||kb(s.pathname,r)!=null}function Bc({value:n,currency:e="USD",locale:t="en-US"}){console.log("Type of number to be converted",typeof n);const s=new Intl.NumberFormat(t,{style:"currency",currency:e}).format(parseFloat(n));return S.jsx("span",{children:s})}let Rj={data:""},Pj=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||Rj,Nj=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Dj=/\/\*[^]*?\*\/|  +/g,hE=/\n+/g,El=(n,e)=>{let t="",i="",s="";for(let r in n){let a=n[r];r[0]=="@"?r[1]=="i"?t=r+" "+a+";":i+=r[1]=="f"?El(a,r):r+"{"+El(a,r[1]=="k"?"":e)+"}":typeof a=="object"?i+=El(a,e?e.replace(/([^,])+/g,o=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):r):a!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=El.p?El.p(r,a):r+":"+a+";")}return t+(e&&s?e+"{"+s+"}":s)+i},uo={},uR=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+uR(n[t]);return e}return n},Oj=(n,e,t,i,s)=>{let r=uR(n),a=uo[r]||(uo[r]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(r));if(!uo[a]){let l=r!==n?n:(c=>{let u,d,h=[{}];for(;u=Nj.exec(c.replace(Dj,""));)u[4]?h.shift():u[3]?(d=u[3].replace(hE," ").trim(),h.unshift(h[0][d]=h[0][d]||{})):h[0][u[1]]=u[2].replace(hE," ").trim();return h[0]})(n);uo[a]=El(s?{["@keyframes "+a]:l}:l,t?"":"."+a)}let o=t&&uo.g?uo.g:null;return t&&(uo.g=uo[a]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(uo[a],e,i,o),a},Mj=(n,e,t)=>n.reduce((i,s,r)=>{let a=e[r];if(a&&a.call){let o=a(t),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":El(o,""):o===!1?"":o}return i+s+(a??"")},"");function Fy(n){let e=this||{},t=n.call?n(e.p):n;return Oj(t.unshift?t.raw?Mj(t,[].slice.call(arguments,1),e.p):t.reduce((i,s)=>Object.assign(i,s&&s.call?s(e.p):s),{}):t,Pj(e.target),e.g,e.o,e.k)}let dR,Rb,Pb;Fy.bind({g:1});let Wo=Fy.bind({k:1});function Fj(n,e,t,i){El.p=e,dR=n,Rb=t,Pb=i}function ac(n,e){let t=this||{};return function(){let i=arguments;function s(r,a){let o=Object.assign({},r),l=o.className||s.className;t.p=Object.assign({theme:Rb&&Rb()},o),t.o=/ *go\d+/.test(l),o.className=Fy.apply(t,i)+(l?" "+l:"");let c=n;return n[0]&&(c=o.as||n,delete o.as),Pb&&c[0]&&Pb(o),dR(c,o)}return s}}var jj=n=>typeof n=="function",D0=(n,e)=>jj(n)?n(e):n,Bj=(()=>{let n=0;return()=>(++n).toString()})(),hR=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),Uj=20,fR=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,Uj)};case 1:return{...n,toasts:n.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case 2:let{toast:t}=e;return fR(n,{type:n.toasts.find(r=>r.id===t.id)?1:0,toast:t});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(r=>r.id===i||i===void 0?{...r,dismissed:!0,visible:!1}:r)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(r=>r.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let s=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+s}))}}},$m=[],Uc={toasts:[],pausedAt:void 0},pu=n=>{Uc=fR(Uc,n),$m.forEach(e=>{e(Uc)})},$j={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Hj=(n={})=>{let[e,t]=O.useState(Uc),i=O.useRef(Uc);O.useEffect(()=>(i.current!==Uc&&t(Uc),$m.push(t),()=>{let r=$m.indexOf(t);r>-1&&$m.splice(r,1)}),[]);let s=e.toasts.map(r=>{var a,o,l;return{...n,...n[r.type],...r,removeDelay:r.removeDelay||((a=n[r.type])==null?void 0:a.removeDelay)||(n==null?void 0:n.removeDelay),duration:r.duration||((o=n[r.type])==null?void 0:o.duration)||(n==null?void 0:n.duration)||$j[r.type],style:{...n.style,...(l=n[r.type])==null?void 0:l.style,...r.style}}});return{...e,toasts:s}},zj=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||Bj()}),Dp=n=>(e,t)=>{let i=zj(e,n,t);return pu({type:2,toast:i}),i.id},xn=(n,e)=>Dp("blank")(n,e);xn.error=Dp("error");xn.success=Dp("success");xn.loading=Dp("loading");xn.custom=Dp("custom");xn.dismiss=n=>{pu({type:3,toastId:n})};xn.remove=n=>pu({type:4,toastId:n});xn.promise=(n,e,t)=>{let i=xn.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(s=>{let r=e.success?D0(e.success,s):void 0;return r?xn.success(r,{id:i,...t,...t==null?void 0:t.success}):xn.dismiss(i),s}).catch(s=>{let r=e.error?D0(e.error,s):void 0;r?xn.error(r,{id:i,...t,...t==null?void 0:t.error}):xn.dismiss(i)}),n};var Wj=(n,e)=>{pu({type:1,toast:{id:n,height:e}})},Vj=()=>{pu({type:5,time:Date.now()})},pf=new Map,Gj=1e3,Yj=(n,e=Gj)=>{if(pf.has(n))return;let t=setTimeout(()=>{pf.delete(n),pu({type:4,toastId:n})},e);pf.set(n,t)},qj=n=>{let{toasts:e,pausedAt:t}=Hj(n);O.useEffect(()=>{if(t)return;let r=Date.now(),a=e.map(o=>{if(o.duration===1/0)return;let l=(o.duration||0)+o.pauseDuration-(r-o.createdAt);if(l<0){o.visible&&xn.dismiss(o.id);return}return setTimeout(()=>xn.dismiss(o.id),l)});return()=>{a.forEach(o=>o&&clearTimeout(o))}},[e,t]);let i=O.useCallback(()=>{t&&pu({type:6,time:Date.now()})},[t]),s=O.useCallback((r,a)=>{let{reverseOrder:o=!1,gutter:l=8,defaultPosition:c}=a||{},u=e.filter(f=>(f.position||c)===(r.position||c)&&f.height),d=u.findIndex(f=>f.id===r.id),h=u.filter((f,p)=>p<d&&f.visible).length;return u.filter(f=>f.visible).slice(...o?[h+1]:[0,h]).reduce((f,p)=>f+(p.height||0)+l,0)},[e]);return O.useEffect(()=>{e.forEach(r=>{if(r.dismissed)Yj(r.id,r.removeDelay);else{let a=pf.get(r.id);a&&(clearTimeout(a),pf.delete(r.id))}})},[e]),{toasts:e,handlers:{updateHeight:Wj,startPause:Vj,endPause:i,calculateOffset:s}}},Kj=Wo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Xj=Wo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Qj=Wo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Jj=ac("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Kj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Xj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Qj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Zj=Wo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,eB=ac("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${Zj} 1s linear infinite;
`,tB=Wo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,nB=Wo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,iB=ac("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tB} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${nB} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,sB=ac("div")`
  position: absolute;
`,rB=ac("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,aB=Wo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oB=ac("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${aB} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,lB=({toast:n})=>{let{icon:e,type:t,iconTheme:i}=n;return e!==void 0?typeof e=="string"?O.createElement(oB,null,e):e:t==="blank"?null:O.createElement(rB,null,O.createElement(eB,{...i}),t!=="loading"&&O.createElement(sB,null,t==="error"?O.createElement(Jj,{...i}):O.createElement(iB,{...i})))},cB=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,uB=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,dB="0%{opacity:0;} 100%{opacity:1;}",hB="0%{opacity:1;} 100%{opacity:0;}",fB=ac("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,pB=ac("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,gB=(n,e)=>{let t=n.includes("top")?1:-1,[i,s]=hR()?[dB,hB]:[cB(t),uB(t)];return{animation:e?`${Wo(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Wo(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},mB=O.memo(({toast:n,position:e,style:t,children:i})=>{let s=n.height?gB(n.position||e||"top-center",n.visible):{opacity:0},r=O.createElement(lB,{toast:n}),a=O.createElement(pB,{...n.ariaProps},D0(n.message,n));return O.createElement(fB,{className:n.className,style:{...s,...t,...n.style}},typeof i=="function"?i({icon:r,message:a}):O.createElement(O.Fragment,null,r,a))});Fj(O.createElement);var yB=({id:n,className:e,style:t,onHeightUpdate:i,children:s})=>{let r=O.useCallback(a=>{if(a){let o=()=>{let l=a.getBoundingClientRect().height;i(n,l)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[n,i]);return O.createElement("div",{ref:r,className:e,style:t},s)},vB=(n,e)=>{let t=n.includes("top"),i=t?{top:0}:{bottom:0},s=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:hR()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...i,...s}},xB=Fy`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$g=16,jy=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:i,children:s,containerStyle:r,containerClassName:a})=>{let{toasts:o,handlers:l}=qj(t);return O.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:$g,left:$g,right:$g,bottom:$g,pointerEvents:"none",...r},className:a,onMouseEnter:l.startPause,onMouseLeave:l.endPause},o.map(c=>{let u=c.position||e,d=l.calculateOffset(c,{reverseOrder:n,gutter:i,defaultPosition:e}),h=vB(u,d);return O.createElement(yB,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?xB:"",style:h},c.type==="custom"?D0(c.message,c):s?s(c):O.createElement(mB,{toast:c,position:u}))}))};const Hg="name;",Hu="items;",bB="order;",zg="pm;",SB="total;";function wB(){const[n,e]=O.useState(null),[t,i]=O.useState(!1),[s,r]=O.useState(!1),[a,o]=O.useState({}),[l,c]=O.useState({}),[u,d]=O.useState(!1),h={rolls:5,shakes:5,banana:6,puppy:5,drinks:1},[f,p]=O.useState({rolls:!1,shakes:!1,banana:!1,puppy:!1,drinks:!1}),[m,v]=O.useState({VainillaIng:!1,ChocolateIng:!1,FresaIng:!1,NutellaIng:!1,OreoIng:!1,ManIng:!1,AlmendraIng:!1,CocoIng:!1,BizcochoDeVainillaIng:!1,PistachioIng:!1,AmaretoIng:!1,GranolaIng:!1,ParchaIng:!1,MangoIng:!1,CanelaIng:!1,AnsIng:!1,LimnIng:!1,CafIng:!1,BrownieIng:!1,GuineoIng:!1,CameoIng:!1,TronkyIng:!1,ChipsIng:!1,CheesecakeIng:!1,ChocolateBlancoIng:!1,FruityPebblesIng:!1,CocoaPebblesIng:!1,QuesoIng:!1,UvaIng:!1,ChinaIng:!1,GuanabanaIng:!1,ChipsAhoyIng:!1,KitKatIng:!1,BlueberryIng:!1,RedVelvettIng:!1,NuecesIng:!1,CarameloIng:!1,CherryIng:!1,BrandyIng:!1,PinaIng:!1,PinaColadaIng:!1,ManzanaIng:!1,GuayabaIng:!1,BizcochoDeZanahoriaIng:!1,FerreroIng:!1,CrackersIng:!1,MarshmellowIng:!1}),{order:y,setOrder:b}=O.useContext(yn),{name:x,setName:_}=O.useContext(yn),{renderOrdersKey:T,setRenderOrdersKey:C}=O.useContext(yn),{itemCounter:L,setItemCounter:k}=O.useContext(yn),{metodo:M,setMetodo:D}=O.useContext(yn),{newItem:I,setNewItem:R}=O.useContext(yn),{totalToPay:q,setTotalToPay:Y}=O.useContext(yn),{type:ee,setType:j}=O.useContext(yn),{typeCounter:z,setTypeCounter:B}=O.useContext(yn),{favCounter:U,setFavCounter:Q}=O.useContext(yn),{sumToSubstract:re,setSumtoSubstract:N}=O.useContext(yn),{newOrderCounter:W,increaseNewOrderCounter:K}=O.useContext(yn),Z=()=>i(!0),te=()=>i(!1),oe=()=>r(!0),de=()=>r(!1),ge=pe=>{pe.target.value==="ATH"?D("ATH"):D("CASH")};O.useEffect(()=>{const pe=setInterval(()=>{nt.get("/orders").then(we=>{e(we.data)}).catch(we=>{console.log("Error",we)})},500);return()=>clearInterval(pe)},[T]),O.useEffect(()=>{k(L+1)},[I]),O.useEffect(()=>{if(u==!0){R({}),b({}),_(""),d(!1);const pe=["username","password"];for(let we=localStorage.length-1;we>=0;we--){const ct=localStorage.key(we);pe.includes(ct)||localStorage.removeItem(ct)}}},[u]);const De=async pe=>{try{console.log(pe);const we=await nt.delete("/orders",{data:{id:pe}});console.log("Item deleted:",we.data),xn.success("Orden borrada")}catch(we){xn.error("Order failed to delete!"),console.log("error:",we)}Me(!1),C(we=>we+1),reloadChannel.postMessage({action:"reload"})},[Re,Ce]=O.useState(""),Be=()=>{new Audio("/sounds/success.mp3").play()},Ze=async pe=>{b(dt=>({...dt,name:JSON.parse(localStorage.getItem(Hg)),metodo:JSON.parse(localStorage.getItem(zg))}));var we=JSON.parse(localStorage.getItem(bB)),ct=we.items;if(JSON.parse(localStorage.getItem(Hg))==null||JSON.parse(localStorage.getItem(Hg))=="")console.log("Order needs to be under a name"),xn.error("Orden debe estar bajo un nombre");else if(JSON.parse(localStorage.getItem(zg))==null||JSON.parse(localStorage.getItem(zg))=="")xn.error("Orden debe tener mtodo de pago");else{Ce("");try{const dt=await nt.post("/orders",{name:JSON.parse(localStorage.getItem(Hg)),items:ct,payment_method:JSON.parse(localStorage.getItem(zg)),total:q});xn.success("Orden aadida a la cola"),Be(),i(!1),Y(0),D(""),B(z-1),Q(U-1),d(!0),C(_n=>_n+1),K(_n=>_n+1),console.log("Response:",dt.headers)}catch(dt){console.error("Error",dt)}}},ve=pe=>{console.log(y.items),y.items.map(we=>{if(we.item_id===pe){console.log("deleting item from "+y.name+"order");const ct=y.items.filter(dt=>dt.item_id!==pe);b(dt=>({...dt,items:ct})),localStorage.setItem(Hu,JSON.stringify({})),N(h[we.type]*we.qty),console.log("Total Updated"),xn.success("Item borrado")}else console.log("item not found")})},ne=()=>{xn.success("Orden limpia!"),R({}),localStorage.setItem(Hu,JSON.stringify({})),b({}),k(0),Y(0),j(""),_(""),B(z-1),Q(U-1),C(pe=>pe+1),location.reload()},[Qe,Ye]=O.useState(0),[he,Me]=O.useState(!1),Ue=()=>Me(!1),$e=pe=>{Me(!0),Ye(pe)},[Fe,Xe]=O.useState(0),[_t,We]=O.useState(!1),Lt=()=>We(!0),zt=()=>We(!1),ht=pe=>{Xe(pe.target.value)},Ct=()=>{Xe(Fe+.25)},Ve=()=>{Xe(Fe-.25)},ii=()=>{xn.success("Cargo aadido"),console.log("Total",parseFloat(q,10)),console.log("Charge",Fe),console.log("Total To Pay",parseFloat(q,10)+Fe),Y(parseFloat(q,10)+Fe),localStorage.setItem(SB,parseFloat(q,10)+Fe),Xe(0),We(!1)},[qt,Xi]=O.useState(!1),[Gt,Kt]=O.useState({}),ps=pe=>{Xi(!0),Kt(pe)},Xt=()=>Xi(!1),{hideOrders:Ns,toggleHideOrders:un}=O.useContext(yn),as=()=>{un(pe=>!pe)},[cr,wn]=O.useState(!1);O.useEffect(()=>{window.matchMedia("(max-width: 768px)");const pe=new WebSocket(`wss://${window.location.hostname}:${window.location.port}`);return()=>{pe.close()}},[]);const[pt,Qt]=O.useState(!1),[Ws,Dn]=O.useState(!1),[vi,Ii]=O.useState(!1),[ft,ji]=O.useState(!1),[Qi,di]=O.useState(!1),[Fn,jn]=O.useState(""),[Ft,Xn]=O.useState(0),[gs,os]=O.useState(!0),[Ri,xi]=O.useState(()=>{const pe=localStorage.getItem("items");return pe?JSON.parse(pe):[{}]}),Pi=(pe,we)=>{we=="type"?(Qt(ct=>!ct),Xn(Ft===pe?0:pe)):we=="ings"?(Dn(ct=>!ct),Xn(Ft===pe?0:pe)):we=="tops"?(Ii(ct=>!ct),Xn(Ft===pe?0:pe)):we=="qty"?(ji(ct=>!ct),Xn(Ft===pe?0:pe)):we=="comments"&&(di(ct=>!ct),Xn(Ft===pe?0:pe)),console.log("ID of item to edit",Ft)},bi=()=>{xt(bt+1)},Ds=()=>{bt>0&&xt(bt-1)},Bi=(pe,we,ct,dt,_n,Vs)=>{if(xn.success("Cambio guardado!"),Vs!=0){const $i=pe.map(Yt=>Yt.item_id===we?{...Yt,[ct]:Vs}:Yt);xi($i),y.items.map(Yt=>{if(Yt.item_id===we){if(b(eo=>({...eo,items:$i})),localStorage.setItem(Hu,JSON.stringify({})),ct==="qty"){console.log("Past value's cost",h[_n]*Yt.qty),console.log("Type of nQ",typeof Vs),console.log("New value's cost",h[_n]*Vs);var Os=h[_n]*Vs-h[_n]*Yt.qty;console.log("Sum to substract",Os),N(Os),console.log("Total Updated")}}else console.log("item not found")}),Qt(!1),Dn(!1),Ii(!1),ji(!1),Xn(0),f.rolls=!1,f.shakes=!1,f.banana=!1,f.puppy=!1,f.drinks=!1,si(""),gt([]),rt([]),xt(0)}else{if(ct==="type"){const $i=pe.map(Yt=>Yt.item_id===we?{...Yt,[ct]:dt}:Yt);xi($i),y.items.map(Yt=>{if(Yt.item_id===we){b(eo=>({...eo,items:$i})),localStorage.setItem(Hu,JSON.stringify({})),console.log("Past value",_n),console.log("New value",dt),console.log("Past value's cost",h[_n]*Yt.qty),console.log("New value's cost",h[dt]*Yt.qty);var Os=h[dt]*Yt.qty-h[_n]*Yt.qty;console.log("Sum to substract",Os),N(Os),console.log("Total Updated")}else console.log("item not found")})}else if(ct=="comments"||ct==="ings"||ct==="tops"){const $i=pe.map(Yt=>Yt.item_id===we?{...Yt,[ct]:dt}:Yt);xi($i),y.items.map(Yt=>{Yt.item_id===we?(b(Os=>({...Os,items:$i})),localStorage.setItem(Hu,JSON.stringify({}))):console.log("item not found")})}Qt(!1),Dn(!1),Ii(!1),ji(!1),di(!1),Xn(0),f.rolls=!1,f.shakes=!1,f.banana=!1,f.puppy=!1,f.drinks=!1,si(""),gt([]),rt([]),xt(0),kr("")}};O.useEffect(()=>{localStorage.setItem(Hu,JSON.stringify(Ri)),console.log("Updated Items",Ri)},[Ri]);const[Ui,si]=O.useState(""),[Te,gt]=O.useState([]),[Jt,rt]=O.useState([]),[bt,xt]=O.useState(0),[Rn,kr]=O.useState(""),Pe=pe=>{var we=pe.target.value;we=="rolls"?f.rolls==!0?(f.rolls=!1,si("")):(f.rolls=!0,si(we)):we=="shakes"?f.shakes===!0?(f.shakes=!1,si("")):(f.shakes=!0,si(we)):we=="banana"?f.banana===!0?(f.banana=!1,si("")):(f.banana=!0,si(we)):we=="puppy"?f.puppy===!0?(f.puppy=!1,si("")):(f.puppy=!0,si(we)):we=="drinks"&&(f.drinks===!0?(f.drinks=!1,si("")):(f.drinks=!0,si(we)))},[St,wt]=O.useState([]),[jt,Bt]=O.useState(""),[fn,on]=O.useState(""),[ls,Ni]=O.useState([]);O.useEffect(()=>{nt.get("/topping").then(pe=>{const we=pe.data;Ni(we)}).catch(pe=>{console.log("Error",pe)}),nt.get("/ingrediente").then(pe=>{const we=pe.data;wt(we)}).catch(pe=>{console.log("Error",pe)})},[]),O.useEffect(()=>{if(jt!==""){console.log("Ingrediente a Buscar",jt);const pe={nombre:jt};nt.get("/ingrediente",{params:pe}).then(we=>{console.log("Ingredientes encontrados",we.data),wt(we.data)}).catch(we=>{console.log("Error",we)})}else jt===""&&(console.log("Ingrediente a Buscar",jt),nt.get("/ingrediente").then(pe=>{console.log("Ingredientes encontrados",pe.data),wt(pe.data)}).catch(pe=>{console.log("Error",pe)}))},[jt]),O.useEffect(()=>{if(fn!==""){const pe={nombre:fn};nt.get("/topping",{params:pe}).then(we=>{Ni(we.data)}).catch(we=>{console.log("Error",we)})}else fn===""&&nt.get("/topping").then(pe=>{Ni(pe.data)}).catch(pe=>{console.log("Error",pe)})},[fn]);const Qn=pe=>{Bt(pe.target.value)},Pt=pe=>{on(pe.target.value)},It=pe=>{kr(pe.target.value)},Si=pe=>{if(pe.target.classList.contains("active")){if(pe.target.classList.remove("active"),pe.target.classList.contains("ingredients")){const we=Te.filter(ct=>ct!==pe.target.value);gt(we)}else if(pe.target.classList.contains("toppings"))if(pe.target.value!="No toppings"){const we=Jt.filter(ct=>ct!==pe.target.value);rt(we)}else rt([])}else pe.target.classList.contains("active")||(pe.target.classList.add("active"),pe.target.classList.contains("ingredients")?gt(we=>[...we,pe.target.value]):pe.target.classList.contains("toppings")&&(pe.target.value!="No toppings"?rt(we=>[...we,pe.target.value]):rt([])))};return S.jsxs("div",{className:Ns?"bg-white order-container shadow-lg":"d-none bg-white order-container",children:[S.jsxs(yt,{show:qt,onHide:Xt,children:[S.jsx(yt.Header,{closeButton:!0,children:S.jsx(yt.Title,{children:"Detalles de la Orden"})}),S.jsx(yt.Body,{className:"overflow-scroll detalles-body",children:S.jsxs("div",{className:a[Gt._id]?"detalle-de-orden d-flex flex-column bg-primary-subtle p-2":"d-flex  flex-column",children:[S.jsx("div",{className:"d-flex flex-column overflow-scroll bg-secondary-subtle",children:(Gt==null?void 0:Gt.items)&&Gt.items.map(pe=>S.jsxs("div",{className:"border-bottom border-dark",children:[S.jsxs("div",{className:"d-flex flex-column justify-content-around",children:[S.jsx("div",{className:"fw-bold",children:" Type:  "}),S.jsx("div",{className:"",children:S.jsxs("ul",{children:[pe.type==="rolls"&&"Rolls",pe.type==="banana"&&"Banana Split",pe.type==="shakes"&&"Shakes",pe.type==="puppy"&&"Puppy Rolls",pe.type==="drinks"&&"Drinks"]})})]}),S.jsxs("div",{className:"d-flex flex-column justify-content-around",children:[pe&&pe.type!=="drinks"&&S.jsx("div",{className:"fw-bold",children:"Ingredients:"}),S.jsx("ul",{className:"d-flex flex-column",children:pe&&pe.type!=="drinks"&&pe.ings.map(we=>S.jsx("li",{children:we}))})]}),S.jsxs("div",{className:"d-flex flex-column  justify-content-around",children:[pe&&pe.type!=="drinks"&&S.jsx("div",{className:"fw-bold",children:"Toppings:"}),S.jsx("ul",{className:"d-flex flex-column",children:pe.type!=="drinks"&&pe.tops.map(we=>S.jsx("li",{className:"",children:we}))})]}),S.jsxs("div",{className:"d-flex flex-column justify-content-around ",children:[S.jsx("div",{className:"fw-bold ",children:"Quantity:"}),S.jsx("ul",{className:"",children:pe.qty})]}),S.jsxs("div",{className:"d-flex flex-column pb-2 justify-content-around",children:[S.jsx("div",{className:"fw-bold",children:"Comments:"}),S.jsx("ul",{className:"",children:pe.comments})]})]}))}),S.jsx("div",{className:"d-flex flex-column bg-light",children:S.jsxs("div",{className:"fw-bold d-flex flex-row",children:[S.jsx("div",{className:"",children:"Payment Method:"}),S.jsx("div",{className:"fw-normal d-flex justify-content-center align-items-center",children:Gt.payment_method})]})}),S.jsxs("div",{className:"fw-bold d-flex flex-row bg-light",children:[S.jsx("div",{className:"",children:"Total to Pay:"}),S.jsx("div",{className:"fw-normal d-flex justify-content-center align-items-center",children:S.jsx(Bc,{value:Gt.total})})]})]})}),S.jsx(yt.Footer,{children:S.jsx(yr,{variant:"secondary",onClick:Xt,children:"Close"})})]}),S.jsxs(yt,{show:he,onHide:Ue,children:[S.jsx(yt.Header,{closeButton:!0,children:S.jsx(yt.Title,{children:"Deleting Order"})}),S.jsx(yt.Body,{children:"Warning, you're about to delete an order!"}),S.jsxs(yt.Footer,{children:[S.jsx(yr,{variant:"secondary",onClick:Ue,children:"Cancel"}),S.jsx("button",{className:"btn btn-primary",onClick:()=>De(Qe),children:"Delete"})]})]}),S.jsxs("div",{className:"",children:[S.jsxs("div",{className:"d-flex flex-column text-center",style:{height:"15vh"},children:[S.jsxs("div",{className:"d-flex flex-row justify-content-between",children:[S.jsx(xr,{children:S.jsx(xr.Link,{to:"/",as:Cl,className:"btn  p-3  w-100 text-center",children:"Home"})}),S.jsx("button",{className:"p-3 btn btn-outline-light closeShowOrders",onClick:as,children:S.jsx("img",{className:"closeIcon",src:"/close-4.png",alt:""})})]}),S.jsx("div",{className:"d-flex flex-row w-100 justify-content-between p-3 text-start",children:S.jsx("div",{className:"",children:"Queued Orders"})})]}),S.jsx("div",{className:"ordenes-esperando overflow-scroll",children:n?S.jsx("div",{className:"list-group",children:n.map(pe=>S.jsx("div",{children:S.jsxs("div",{className:pe.status=="done"?"bg-success-subtle list-group-item list-group-item-action p-3 d-flex flex-row justify-content-between":" list-group-item list-group-item-action p-3 d-flex flex-row justify-content-between",children:[S.jsx("button",{className:"btn",onClick:()=>ps(pe),children:pe.client_name}),S.jsx("div",{className:"",children:S.jsx("button",{className:"btn text-secondary",onClick:()=>$e(pe._id),children:"Delete"})})]})},pe._id))}):S.jsx("div",{className:"bg-white",children:"No Orders"})})]}),S.jsxs("div",{className:"d-flex flex-column",children:[S.jsxs("div",{className:"p-3 d-flex justify-content-between",children:[S.jsx("div",{children:"Current Order"}),S.jsx("button",{className:"rounded-3 bg-light border-light border-top-0 border-end-0 border-start-0 border-bottom-1 p-2",onClick:ne,children:"Clear"})]}),S.jsxs("div",{className:" w-100  p-3 d-flex flex-row justify-content-between",style:{zIndex:"1"},children:[S.jsxs("div",{className:"",children:[S.jsxs("div",{className:"",children:["Client: ",x]}),S.jsxs("div",{className:"",children:["Total: ",S.jsx(Bc,{value:q,currency:"USD"})]})]}),S.jsx("button",{className:"rounded-3 bg-light border-light border-top-0 border-end-0 border-start-0 border-bottom-1 p-2",onClick:oe,children:"Edit Order"})]}),S.jsx("div",{children:S.jsx("div",{style:y.items?{height:"20vh"}:{height:"0vh"},className:"orden-de-ahora bg-secondary-subtle overflow-scroll mt-3",children:y?(y==null?void 0:y.items)&&y.items.map(pe=>S.jsxs("div",{className:"border-bottom border-dark d-flex flex-row ",children:[S.jsxs("div",{className:"w-100 p-3",children:[S.jsxs("div",{className:"d-flex flex-column",children:[S.jsx("div",{className:"",children:"Type:"}),S.jsxs("ul",{className:"",children:[pe.type==="rolls"&&"Rolls",pe.type==="banana"&&"Banana Split",pe.type==="shakes"&&"Shakes",pe.type==="puppy"&&"Puppy Rolls",pe.type==="drinks"&&"Drinks"]})]}),pe&&pe.type!=="drinks"&&S.jsx("div",{className:"",children:"Ingredients:"}),S.jsx("ul",{className:"",children:pe&&pe.type!=="drinks"&&pe.ings.map(we=>S.jsx("li",{children:we}))}),S.jsxs("div",{className:"",children:[pe&&pe.type!=="drinks"&&S.jsx("div",{className:"",children:"Toppings:"}),"                        ",S.jsx("ul",{children:pe&&pe.type!=="drinks"&&pe.tops.map(we=>S.jsx("li",{className:"",children:we}))})]}),S.jsxs("div",{className:"d-flex flex-column",children:[S.jsx("div",{className:"",children:"Qty:"}),S.jsx("ul",{className:"",children:pe.qty})]}),S.jsxs("div",{className:"d-flex flex-column",children:[S.jsx("div",{className:"",children:"Comments:"}),S.jsx("ul",{className:"",children:pe.comments})]})]}),S.jsx("div",{className:"d-flex justify-content-center align-items-center w-25",children:S.jsx("button",{className:"btn text-secondary",onClick:()=>ve(pe.item_id),children:"Delete"})})]},pe.item_id)):S.jsx("div",{className:""})})}),S.jsxs("div",{className:"botones-actiones d-flex align-items-center justify-content-around flex-column",children:[S.jsx("div",{className:"text-danger",children:Re}),S.jsx("button",{type:"button",onClick:Lt,className:"btn btn-outline-primary rounded-pill p-3",children:" Additional Charge"}),S.jsx("div",{className:"d-flex flex-column w-100 justify-content-around",children:S.jsx("button",{type:"button",onClick:Z,className:"btn btn-primary p-3",children:"Send Order"})})]})]}),S.jsxs(yt,{show:s,onHide:de,centered:!0,size:"xl",children:[S.jsxs(yt.Header,{closeButton:!0,children:[S.jsx(yt.Title,{children:"Editando Orden"}),S.jsx("div",{className:"text-danger",children:Re})]}),S.jsx(yt.Body,{className:"overflow-scroll detalles-body",children:S.jsx("div",{className:" bg-secondary-subtle overflow-scroll",children:y?(y==null?void 0:y.items)&&y.items.map(pe=>S.jsx("div",{className:"border-bottom border-dark d-flex flex-row ",children:S.jsxs("div",{className:"w-100 p-3",children:[S.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Pi(pe.item_id,"type"),children:[S.jsx("div",{className:"",children:"Type:"}),S.jsxs("ul",{className:"",children:[pe.type==="rolls"&&"Rolls",pe.type==="banana"&&"Banana Split",pe.type==="shakes"&&"Shakes",pe.type==="puppy"&&"Puppy Rolls",pe.type==="drinks"&&"Drinks"]})]}),S.jsxs("div",{style:pt&&Ft===pe.item_id?{display:"flex"}:{display:"none"},className:"mt-3 mb-3 flex-column  w-100 justify-content-center align-items-center bg-primary-subtle",children:[S.jsxs("div",{className:" d-flex flex-row w-100 justify-content-around align-items-center ",style:{pointerEvents:"none"},children:[S.jsx("div",{className:" me-1",children:S.jsx("button",{style:{pointerEvents:"auto"},className:f.rolls?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"rolls",onClick:Pe,children:"Rolls"})}),S.jsx("div",{className:" ms-1 me-1",children:S.jsx("button",{style:{pointerEvents:"auto"},className:f.shakes?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"shakes",onClick:Pe,children:"Shakes"})}),S.jsx("div",{className:" ms-1 me-1",children:S.jsx("button",{style:{pointerEvents:"auto"},className:f.banana?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"banana",onClick:Pe,children:"Banana"})}),S.jsx("div",{className:" ms-1 me-1",children:S.jsx("button",{style:{pointerEvents:"auto"},className:f.puppy?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"puppy",onClick:Pe,children:"Puppy"})}),S.jsx("div",{className:" ms-1 me-1",children:S.jsx("button",{style:{pointerEvents:"auto"},className:f.drinks?"btn btn-outline-secondary type active p-3":"btn btn-outline-secondary type p-3",value:"drinks",onClick:Pe,children:"Drinks"})})]}),S.jsx("button",{className:Ui??Ui!=pe.type??Ui!=""?"btn btn-primary p-2 mt-1 w-100":"btn btn-outline-secondary p-2 mt-1 w-100 disabled",onClick:()=>Bi(y.items,pe.item_id,"type",Ui,pe.type,0),children:"Guardar"})]}),S.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Pi(pe.item_id,"ings"),children:[pe&&pe.type!=="drinks"&&S.jsx("div",{className:"",children:"Ingredients:"}),S.jsx("ul",{className:"d-flex flex-column justify-content-start align-items-start",children:pe&&pe.type!=="drinks"&&pe.ings.map(we=>S.jsx("li",{children:we}))})]}),S.jsxs("div",{style:Ws&&Ft===pe.item_id?{display:"flex"}:{display:"none"},className:" flex-column bg-primary-subtle",children:[S.jsx("div",{className:"w-100",children:S.jsx("input",{type:"text",className:"p-1 w-100",onChange:Qn,placeholder:"Buscar ingrediente"})}),S.jsx("div",{className:"d-flex flex-row overflow-scroll",children:St.map(we=>S.jsx("button",{className:"btn btn-outline-secondary m-1 ingredients p-3",value:we.nombre,onClick:Si,children:we.nombre}))}),S.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[S.jsx("div",{className:"",children:"Ingredientes nuevos para este item"}),S.jsx("ul",{className:"d-flex flex-row justify-content-around align-items-center w-100",children:Te&&Te.length!=0&&Te.map(we=>S.jsx("li",{children:we}))})]}),S.jsx("button",{className:Te.length!==0?"btn btn-primary p-2 mt-1 w-100":"btn btn-outline-secondary p-2 mt-1 w-100 disabled",onClick:()=>Bi(y.items,pe.item_id,"ings",Te,pe.ings,0),children:"Guardar"})]}),S.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Pi(pe.item_id,"tops"),children:[pe&&pe.type!=="drinks"&&S.jsx("div",{className:"",children:"Toppings:"}),"                        ",S.jsx("ul",{children:pe&&pe.type!=="drinks"&&pe.tops.map(we=>S.jsx("li",{className:"",children:we}))})]}),S.jsxs("div",{style:vi&&Ft===pe.item_id?{display:"flex"}:{display:"none"},className:" flex-column bg-primary-subtle",children:[S.jsx("div",{className:"w-100",children:S.jsx("input",{type:"text",className:"p-1 w-100",onChange:Pt,placeholder:"Buscar topping"})}),S.jsxs("div",{className:"d-flex flex-row overflow-scroll",children:[S.jsx("button",{className:"btn btn-outline-secondary m-1 toppings p-3",value:"No toppings",onClick:Si,children:"No toppings"}),ls.map(we=>S.jsx("button",{className:"btn btn-outline-secondary m-1 toppings p-3",value:we.nombre,onClick:Si,children:we.nombre}))]}),S.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[S.jsx("div",{className:"",children:"Toppings nuevos para este item"}),S.jsx("ul",{className:"d-flex flex-row justify-content-around align-items-center w-100",children:Jt&&Jt.length!=0&&Jt.map(we=>S.jsx("li",{children:we}))})]}),S.jsx("button",{className:"btn btn-primary p-2 mt-1 w-100",onClick:()=>Bi(y.items,pe.item_id,"tops",Jt,pe.tops,0),children:"Guardar"})]}),S.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Pi(pe.item_id,"qty"),children:[S.jsx("div",{className:"",children:"Qty:"}),S.jsx("ul",{className:"",children:pe.qty})]}),S.jsxs("div",{style:ft&&Ft===pe.item_id?{display:"flex"}:{display:"none"},className:" flex-column bg-primary-subtle justify-content-center align-items-center w-100",children:[S.jsxs("div",{className:" d-flex flex-row w-100 justify-content-around p-2",children:[S.jsx("div",{className:"",children:S.jsx("button",{className:"btn btn-outline-primary rounded-pill",onClick:Ds,children:"-"})}),S.jsx("div",{className:"",children:bt}),S.jsx("div",{className:"",children:S.jsx("button",{className:"btn btn-outline-primary rounded-pill",onClick:bi,children:"+"})})]}),S.jsx("button",{className:"btn btn-primary p-2 mt-1 w-100",onClick:()=>Bi(y.items,pe.item_id,"qty",Ui,pe.type,bt),children:"Guardar"})]}),S.jsxs("div",{className:"btn d-flex flex-column justify-content-start align-items-start",onClick:()=>Pi(pe.item_id,"comments"),children:[S.jsx("div",{className:"",children:"Comments:"}),S.jsx("ul",{className:"",children:pe.comments})]}),S.jsxs("div",{style:Qi&&Ft===pe.item_id?{display:"flex"}:{display:"none"},className:"p-2 flex-column bg-primary-subtle align-items-center justify-content-center",children:[S.jsx("div",{className:"",children:S.jsx("textarea",{name:"",id:"",cols:"60",rows:"4",defaultValue:Rn,onChange:It,className:"rounded-3"})}),S.jsx("button",{className:"btn btn-primary p-2 mt-1 w-100",onClick:()=>Bi(y.items,pe.item_id,"comments",Rn,pe.comments,0),children:"Guardar"})]})]})},pe.item_id)):S.jsx("div",{className:""})})}),S.jsx(yt.Footer,{})]}),S.jsxs(yt,{show:t,onHide:te,centered:!0,children:[S.jsxs(yt.Header,{closeButton:!0,children:[S.jsx(yt.Title,{children:"Mtodo de Pago"}),S.jsx("div",{className:"text-danger",children:Re})]}),S.jsxs(yt.Body,{className:"w-100",children:[S.jsx("button",{className:"btn btn-warning w-50",onClick:ge,value:"ATH",children:"ATH Mvil"}),S.jsx("button",{className:"btn btn-success w-50",onClick:ge,value:"CASH",children:"CASH"})]}),S.jsxs(yt.Footer,{children:[S.jsxs("div",{className:"",children:["Mtodo de pago: ",M]}),S.jsx(yr,{variant:"secondary",onClick:te,children:"Close"}),S.jsx(yr,{variant:"primary",onClick:Ze,children:"Send Order"})]})]}),S.jsxs(yt,{show:_t,onHide:zt,centered:!0,children:[S.jsx(yt.Header,{closeButton:!0,children:S.jsx(yt.Title,{children:"Cargo Adicional"})}),S.jsxs(yt.Body,{className:"w-100 d-flex flex-row justify-content-between",children:[S.jsx("div",{className:"",children:S.jsx("button",{className:"btn btn-outline-primary rounded-pill p-3",onClick:Ve,children:"-"})}),S.jsxs("div",{className:" d-flex flex-row justify-content-center align-items-center",children:[S.jsx("span",{class:"p-3",children:"$"}),S.jsx("input",{type:"number",min:-100,onChange:ht,id:"charge",value:Fe,className:"increment-charge bg-secondary-subtle rounded-3 p-3 border-0"})]}),S.jsx("div",{className:"",children:S.jsx("button",{className:"btn btn-outline-primary rounded-pill p-3",onClick:Ct,children:"+"})})]}),S.jsxs(yt.Footer,{children:[S.jsx(yr,{variant:"secondary",onClick:zt,children:"Cerrar"}),S.jsx(yr,{variant:"primary",onClick:ii,children:"Aadir Cargo"})]})]})]})}function _B(){return S.jsxs("div",{className:"container mt-4",children:[S.jsx("h2",{className:"mb-4",children:"Elige un Tipo"}),S.jsx("div",{className:"d-flex flex-wrap gap-3 justify-content-center"})]})}const fE="name;",pE="type;",S1="ings;",gE="tops;",mE="qty;",yE="cmts;",Wg="items;",Oh="order;",vE="pm;",vc="total;";function EB(){const[n,e]=O.useState(!1),[t,i]=O.useState(!1),[s,r]=O.useState(!1),[a,o]=O.useState(!1),[l,c]=O.useState(!1),[u,d]=O.useState(!1),[h,f]=O.useState(!1),[p,m]=O.useState([]),[v,y]=O.useState([]),[b,x]=O.useState(0),[_,T]=O.useState(0),[C,L]=O.useState(""),[k,M]=O.useState(1),[D,I]=O.useState(!0),[R,q]=O.useState({rolls:!1,shakes:!1,banana:!1,puppy:!1,drinks:!1}),[Y,ee]=O.useState({CookiesAndCream:!1,CocoNut:!1,ILoveCoffee:!1,Smores:!1,CinnamonAndCarrot:!1,StrawberryShortcake:!1}),[j,z]=O.useState({VainillaIng:!1,ChocolateIng:!1,FresaIng:!1,NutellaIng:!1,OreoIng:!1,ManIng:!1,AlmendraIng:!1,CocoIng:!1,BizcochoDeVainillaIng:!1,PistachioIng:!1,AmaretoIng:!1,GranolaIng:!1,ParchaIng:!1,MangoIng:!1,CanelaIng:!1,AnsIng:!1,LimnIng:!1,CafIng:!1,BrownieIng:!1,GuineoIng:!1,CameoIng:!1,TronkyIng:!1,ChipsIng:!1,CheesecakeIng:!1,ChocolateBlancoIng:!1,FruityPebblesIng:!1,CocoaPebblesIng:!1,QuesoIng:!1,UvaIng:!1,ChinaIng:!1,GuanabanaIng:!1,ChipsAhoyIng:!1,KitKatIng:!1,BlueberryIng:!1,RedVelvettIng:!1,NuecesIng:!1,CarameloIng:!1,CherryIng:!1,BrandyIng:!1,PinaIng:!1,PinaColadaIng:!1,ManzanaIng:!1,GuayabaIng:!1,BizcochoDeZanahoriaIng:!1,FerreroIng:!1,CrackersIng:!1,MarshmellowIng:!1}),[B,U]=O.useState({WhippedCreamTop:!1,FresaTop:!1,NutellaTop:!1,OreoTop:!1,ManTop:!1,AlmendraTop:!1,CherryTop:!1,CarameloTop:!1,CanelaTop:!1,NuecesTop:!1,CocoRayadoTop:!1,PiaTop:!1,CafTop:!1,ChipsTop:!1,SprinkesDeColoresTop:!1,SprinkesDeChocolateTop:!1,ChocolateTop:!1,GummiesTop:!1,GranolaTop:!1,MielTop:!1,GuineoTop:!1,CocoaPebblesTop:!1,FruityPebblesTop:!1,MyMTop:!1,MarshmellowTop:!1}),{name:Q,setName:re}=O.useContext(yn),{metodo:N,setMetodo:W}=O.useContext(yn),{newItem:K,setNewItem:Z}=O.useContext(yn),{newDrinkItem:te,setNewDrinkItem:oe}=O.useContext(yn),{renderOrdersKey:de,setRenderOrdersKey:ge}=O.useContext(yn),{itemCounter:De,setItemCounter:Re}=O.useContext(yn),{order:Ce,setOrder:Be}=O.useContext(yn),{totalToPay:Ze,setTotalToPay:ve}=O.useContext(yn),{type:ne,setType:Qe}=O.useContext(yn),{typeCounter:Ye,setTypeCounter:he}=O.useContext(yn),{favCounter:Me,setFavCounter:Ue}=O.useContext(yn),{sumToSubstract:$e,setSumtoSubstract:Fe}=O.useContext(yn),[Xe,_t]=O.useState(!1),[We,Lt]=O.useState(!1),zt=O.useRef(!1),ht=O.useRef(!1),Ct=O.useRef(!1),Ve=O.useRef(!1),ii=O.useRef(!1),qt=O.useRef(!1),Xi=O.useRef(!1),Gt=O.useRef(!1),Kt=O.useRef(!1),ps=O.useRef(!0),[Xt,Ns]=O.useState([]),[un,as]=O.useState(""),[cr,wn]=O.useState([]),[pt,Qt]=O.useState(""),[Ws,Dn]=O.useState([]),[vi,Ii]=O.useState(""),ft={rolls:5,shakes:5,banana:6,puppy:5,drinks:1};O.useEffect(()=>{console.log("Current state of ingsFlag:",j)},[Xt]),O.useEffect(()=>{const Pe=Object.values(Y).some(St=>St===!0);_t(Pe)},[Y]),O.useEffect(()=>{var Pe=JSON.parse(localStorage.getItem("FavFlag")),St=JSON.parse(localStorage.getItem(fE)),wt=JSON.parse(localStorage.getItem(pE)),jt=JSON.parse(localStorage.getItem(S1)),Bt=JSON.parse(localStorage.getItem(gE)),fn=JSON.parse(localStorage.getItem(mE)),on=JSON.parse(localStorage.getItem(yE)),ls=JSON.parse(localStorage.getItem(Wg)),Ni=JSON.parse(localStorage.getItem(Oh)),Qn=JSON.parse(localStorage.getItem(vE));ps&&(Pe&&ee(Pe),St&&re(St),jt&&(m(jt),bi(Pt=>Pt.map(It=>It.ruta==="ingredientes"?{...It,selected:!0}:It)),jt.forEach(function(Pt){var It=Pt+"Ing";if(console.log(It),localStorage.getItem(It)!==null)for(const Si in j)Si===It?localStorage.getItem(It)==="1"?(console.log(),j[It]=!0,console.log("Key set to true",j[It])):(j[It]=!1,console.log("Key set to false",j[It])):console.log("No key found");else console.log("NULL")})),Bt&&(y(Bt),Bt.forEach(function(Pt){var It=Pt+"Top";if(localStorage.getItem(It))for(const Si in B)Si===It&&(localStorage.getItem(It)==="1"?(B[It]=!0,console.log("true")):B[It]=!1)})),wt&&(bi(Pt=>Pt.map(It=>It.ruta==="tipo"?{...It,selected:!0}:It)),wt!=ne&&Qe(wt),wt==="rolls"?R.rolls=!0:wt==="banana"?R.banana=!0:wt==="shakes"?R.shakes=!0:wt==="puppy"?R.puppy=!0:wt==="drinks"&&(R.drinks=!0)),fn&&(bi(Pt=>Pt.map(It=>It.ruta==="cantidad"?{...It,selected:!0}:It)),fn!=b&&x(fn)),on&&(bi(Pt=>Pt.map(It=>It.ruta==="comentarios"?{...It,selected:!0}:It)),on!=C&&L(on)),ls&&ls!=K&&(console.log("Item Type",ls.type),Z(ls)),Ni&&Ni!=Ce&&Be(Ni),Qn&&Qn!=N&&W(Qn)),nt.get("/ingrediente").then(Pt=>{const It=Pt.data;Ns(It)}).catch(Pt=>{console.log("Error",Pt)}),nt.get("/topping").then(Pt=>{const It=Pt.data;wn(It)}).catch(Pt=>{console.log("Error",Pt)}),nt.get("/favorite").then(Pt=>{const It=Pt.data;Dn(It)}).catch(Pt=>{console.log("Error",Pt)}),Bi(!1)},[]);const ji=Pe=>{as(Pe.target.value)},Qi=Pe=>{Ii(Pe.target.value)};O.useEffect(()=>{if(un!==""){console.log("Ingrediente a Buscar",un);const Pe={nombre:un};nt.get("/ingrediente",{params:Pe}).then(St=>{console.log("Ingredientes encontrados",St.data),Ns(St.data)}).catch(St=>{console.log("Error",St)})}else un===""&&(console.log("Ingrediente a Buscar",un),nt.get("/ingrediente").then(Pe=>{console.log("Ingredientes encontrados",Pe.data),Ns(Pe.data)}).catch(Pe=>{console.log("Error",Pe)}))},[un]),O.useEffect(()=>{if(pt!==""){const Pe={nombre:pt};nt.get("/topping",{params:Pe}).then(St=>{wn(St.data)}).catch(St=>{console.log("Error",St)})}else pt===""&&nt.get("/topping").then(Pe=>{wn(Pe.data)}).catch(Pe=>{console.log("Error",Pe)})},[pt]),O.useEffect(()=>{if(vi!==""){const Pe={nombre:vi};nt.get("/favorite",{params:Pe}).then(St=>{Dn(St.data)}).catch(St=>{console.log("Error",St)})}else vi===""&&nt.get("/favorite").then(Pe=>{Dn(Pe.data)}).catch(Pe=>{console.log("Error",Pe)})},[vi]),O.useEffect(()=>{zt.current?localStorage.setItem(fE,JSON.stringify(Q)):zt.current=!0},[Q]),O.useEffect(()=>{ht.current?localStorage.setItem(pE,JSON.stringify(ne)):ht.current=!0},[ne]),O.useEffect(()=>{Ct.current?localStorage.setItem(S1,JSON.stringify(p)):Ct.current=!0},[p]),O.useEffect(()=>{const Pe=Object.values(j).some(St=>St===!0);Lt(Pe)},[j]),O.useEffect(()=>{Ve.current?localStorage.setItem(gE,JSON.stringify(v)):Ve.current=!0},[v]),O.useEffect(()=>{ii.current?localStorage.setItem(mE,JSON.stringify(b)):ii.current=!0},[b]),O.useEffect(()=>{qt.current?localStorage.setItem(yE,JSON.stringify(C)):qt.current=!0},[C]),O.useEffect(()=>{if(Xi.current){if(K.ings!=null||K.type=="drinks"){localStorage.setItem(Wg,JSON.stringify(K));var Pe=JSON.parse(localStorage.getItem(Wg));if(Pe!={})if(console.log("storeNewItem is not empty"),Ce.items!=null){console.log("order.Items is not undefined");var St=!1;Ce.items.map(wt=>{wt.item_id==Pe.item_id&&(St=!0)}),St==!1&&(console.log("Adding Item"),Be(wt=>({...wt,items:[...wt.items,Pe]})))}else Be(wt=>({...wt,items:[JSON.parse(localStorage.getItem(Wg))]}))}}else Xi.current=!0},[De]),O.useEffect(()=>{Fe(0)},[Ze]),O.useEffect(()=>{var Ni;var Pe=!1,St=!1,wt=!1;if(localStorage.getItem(vc)==null&&localStorage.setItem(vc,0),Gt.current){if(((Ni=JSON.parse(localStorage.getItem(Oh)))==null?void 0:Ni.items)!=null&&(Ce==null?void 0:Ce.items)!=null){var jt=JSON.parse(localStorage.getItem(Oh));console.log("Are the items the same in both variables?",(Ce==null?void 0:Ce.items.length)===jt.items.length),console.log("Order State Variable Items: ",Ce==null?void 0:Ce.items),console.log("Order LS Variable Items: ",jt.items),(Ce==null?void 0:Ce.items.length)===jt.items.length&&(JSON.stringify(Ce==null?void 0:Ce.items)===JSON.stringify(jt.items)?(console.log("Mismos"),Pe=!0):(console.log("No son los mismos"),Pe=!1,wt=!0)),(Ce==null?void 0:Ce.items.length)<jt.items.length&&(St=!0)}localStorage.setItem(Oh,JSON.stringify(Ce));var Bt=JSON.parse(localStorage.getItem(Oh)),fn=Bt.items;for(const Qn in fn)if(fn.hasOwnProperty(Qn)){for(const Pt in fn[Qn])if(fn[Qn].hasOwnProperty(Pt)&&Pt=="type"){var on=fn[Qn].qty,ls=ft[fn[Qn][Pt]]*on;Pe==!1&&St==!1?wt==!1?(ve(parseFloat(Ze)+ls),localStorage.setItem(vc,parseFloat(Ze)+ls),console.log("Summed Quantity")):(ve(parseFloat(Ze)+$e),localStorage.setItem(vc,parseFloat(Ze)+$e),console.log("Substracted Quantity",$e)):Pe==!1&&St==!0?(ve(parseFloat(Ze)-$e),localStorage.setItem(vc,parseFloat(Ze)-$e),console.log("Substracted Quantity",$e)):Pe==!0&&(console.log("SAMMMEEEEEE"),console.log("TOTAL to Pay in LS",localStorage.getItem(vc)),ve(localStorage.getItem(vc)))}}}else Gt.current=!0},[Ce]),O.useEffect(()=>{Kt.current?localStorage.setItem(vE,JSON.stringify(N)):Kt.current=!0},[N]);const di=Pe=>{re(Pe.target.value)},Fn=Pe=>{i(St=>!St)},jn=Pe=>{o(St=>!St)},Ft=Pe=>{var St=Pe.target.classList;if(St.contains("ingredients"))if(St.contains("favorite"))f(!1),Pe.target.classList.add("active"),ee(jt=>{const Bt={};for(const fn in jt)Bt[fn]=fn===Pe.target.value;return localStorage.setItem("FavFlag",JSON.stringify(Bt)),Bt}),Pe.target.value=="CookiesAndCream"?m(["Oreo","Chips","Queso"]):Pe.target.value=="CocoNut"?m(["Coco","Nutella","Almendra"]):Pe.target.value=="CinnamonAndCarrot"?m(["BizcochoDeZanahoria","Canela","Queso"]):Pe.target.value=="ILoveCoffee"?m(["Caramelo","Caf","Almendra"]):Pe.target.value=="Smores"?m(["Marshmellow","Crackers","Chocolate"]):Pe.target.value=="StrawberryShortcake"&&m(["Fresa","BizcochoDeVainilla","Queso"]);else if(p.includes(Pe.target.value)){const jt=p.filter(Bt=>Bt!==Pe.target.value);m(jt),console.log("removed "+Pe.target.value+" from ingredient"),Pe.target.classList.remove("active");var wt=Pe.target.value+"Ing";localStorage.setItem(wt,"0"),z(Bt=>({...Bt,[wt]:!1}))}else{m(Bt=>[...Bt,Pe.target.value]),console.log("added "+Pe.target.value+" to ingredient"),Pe.target.classList.add("active");var wt=Pe.target.value+"Ing";localStorage.setItem(wt,"1"),z(Bt=>({...Bt,[wt]:!0}))}else if(St.contains("toppings"))if(v.includes(Pe.target.value)){const jt=v.filter(fn=>fn!==Pe.target.value);y(jt),console.log("removed "+Pe.target.value+" from toppings"),Pe.target.classList.remove("active");var wt=Pe.target.value+"Top";localStorage.setItem(wt,"0"),U(fn=>({...fn,[wt]:!1}))}else{y(Bt=>[...Bt,Pe.target.value]),console.log("added "+Pe.target.value+" to toppings"),Pe.target.classList.add("active");var wt=Pe.target.value+"Top";localStorage.setItem(wt,"1"),U(Bt=>({...Bt,[wt]:!0}))}else St.contains("type")&&(d(!1),Qe(Pe.target.value),Pe.target.classList.add("active"),q(jt=>{const Bt={};for(const fn in jt)Bt[fn]=fn===Pe.target.value;return Bt}))},Xn=()=>{x(b+1)},gs=()=>{b>0&&x(b-1)};new BroadcastChannel("reload-channel");const{hideOrders:os,toggleHideOrders:Ri}=O.useContext(yn),xi=()=>{Ri(Pe=>!Pe)},[Pi,bi]=O.useState([{label:"Tipo",ruta:"tipo",selected:!1},{label:"Ingredientes",ruta:"ingredientes",selected:!1},{label:"Cantidad",ruta:"cantidad",selected:!1},{label:"Toppings",ruta:"toppings",selected:!1}]),[Ds,Bi]=O.useState(!1),[Ui,si]=O.useState(""),Te=Pe=>{console.log(Pe),si(Pe),Bi(!0),setTimeout(()=>{Bi(!1)},500)},[gt,Jt]=O.useState(!1),rt=()=>{Jt(!0)},bt=()=>{window.location.href="/terminal"},xt=O.useRef(null),Rn=()=>{xt.current&&(xt.current.scrollLeft-=150)},kr=()=>{xt.current&&(xt.current.scrollLeft+=150)};return Ds?S.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center vh-100 w-100",children:[S.jsx("span",{className:"spinner-border spinner-border-lg ms-2",role:"status","aria-hidden":"true"}),S.jsx("span",{className:"display-3 mt-4 fw-bold",children:"Cargando..."})]}):Ui=="tipo"?S.jsxs("div",{className:"container mt-4",children:[S.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[S.jsx("button",{className:"btn btn-outline-dark me-2",onClick:bt,children:S.jsx("i",{className:"bi bi-chevron-left"})}),S.jsx("h2",{className:"mb-4",children:"Elige un Tipo"})]}),S.jsxs("div",{className:"d-flex flex-wrap gap-3 justify-content-center align-items-center",children:[u&&S.jsx("div",{className:"text-danger text-center",children:"Only One Type per Item"}),S.jsxs("div",{className:"mt-3 mb-3 d-flex flex-wrap w-100 justify-content-center align-items-center ",style:{height:"80vh"},children:[S.jsxs("div",{className:" d-flex flex-wrap w-100 justify-content-around align-items-center gap-3",children:[S.jsxs("button",{style:{width:"300px",height:"175px"},className:R.rolls?"btn btn-outline-secondary rounded-pill type active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"rolls",onClick:Ft,children:[" ",S.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Rolls"})," "]}),S.jsxs("button",{style:{width:"300px",height:"175px"},className:R.shakes?"btn btn-outline-secondary type rounded-pill active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"shakes",onClick:Ft,children:[" ",S.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Shakes"})," "]}),S.jsxs("button",{style:{width:"300px",height:"175px"},className:R.banana?"btn btn-outline-secondary rounded-pill type active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"banana",onClick:Ft,children:[" ",S.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Banana"})," "]}),S.jsxs("button",{style:{width:"300px",height:"175px"},className:R.puppy?"btn btn-outline-secondary rounded-pill type active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"puppy",onClick:Ft,children:[" ",S.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Puppy"})," "]}),S.jsxs("button",{style:{width:"300px",height:"175px"},className:R.drinks?"btn btn-outline-secondary rounded-pill type active p-3":"rounded-pill btn btn-outline-secondary type p-3",value:"drinks",onClick:Ft,children:[" ",S.jsx("h4",{className:"display-4",style:{pointerEvents:"none"},children:"Drinks"})," "]})]}),S.jsxs("div",{className:"d-flex flex-row align-items-center gap-4 mt-5",children:[S.jsx("button",{className:`btn ${gt?"btn-success":"btn-primary"} rounded-pill p-4 d-flex align-items-center justify-content-center gap-3`,onClick:rt,children:gt?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"bi bi-check-circle-fill text-white display-5"}),S.jsx("h4",{className:"display-4  p-4",children:"Guardado"})]}):S.jsx("h4",{className:"display-4  p-4",children:"Guardar"})}),gt&&S.jsx("button",{className:"btn btn-outline-dark rounded-pill px-5 py-3",onClick:bt,children:S.jsx("h4",{className:" display-4 p-4",children:"Volver"})})]})]})]})]}):Ui=="ingredientes"?S.jsxs("div",{className:"container mt-4 d-flew flex-column justify-content-center align-items-center gap-4",style:{maxHeight:"100vh",maxWidth:"90vw"},children:[S.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",style:{maxWidth:"90vw",minWidth:"90vw"},children:[S.jsx("button",{className:"btn btn-outline-dark",onClick:bt,children:S.jsx("i",{className:"bi bi-chevron-left"})}),S.jsx("h2",{className:"",children:"Elige Ingredientes"})]}),S.jsx("div",{className:" d-flex flex-column align-items-center justify-content-center",children:S.jsxs("div",{className:"",style:{minWidth:"90vw"},children:[S.jsxs("div",{className:"",children:[S.jsxs("button",{className:`rounded-3 w-100 col d-flex flex-row text-start justify-content-between border border-light p-4 ${We?"bg-secondary-subtle":"bg-light"}`,disabled:We,children:[S.jsx("div",{className:"lead",onClick:We?void 0:jn,children:"Favorites"}),Xe&&S.jsx("button",{className:"btn btn-outline-danger p-3 rounded-pill",onClick:()=>{ee({CookiesAndCream:!1,CocoNut:!1,ILoveCoffee:!1,Smores:!1,CinnamonAndCarrot:!1,StrawberryShortcake:!1}),m([]),localStorage.setItem("FavFlag",JSON.stringify({CookiesAndCream:!1,CocoNut:!1,ILoveCoffee:!1,Smores:!1,CinnamonAndCarrot:!1,StrawberryShortcake:!1})),localStorage.setItem(S1,JSON.stringify([]))},children:"Quitar seleccin"}),S.jsxs("div",{className:"d-flex align-items-center gap-2",children:[S.jsx("i",{className:"bi bi-search"}),S.jsx("input",{type:"text",className:"form-control form-control-md",style:{maxWidth:"150px"},onChange:We?void 0:Qi,placeholder:"Search",disabled:We})]})]}),S.jsx("div",{className:"overflow-scroll d-flex flex-wrap",style:{opacity:We?.5:1,pointerEvents:We?"none":"auto"},children:Ws.map(Pe=>S.jsx("button",{className:Y[Pe.nombre]?"btn btn-outline-secondary m-1 ingredients rounded-pill favorite active p-4":"rounded-pill btn btn-outline-secondary m-1 favorite ingredients p-4",value:Pe.nombre,onClick:Ft,disabled:We,children:Pe.nombre},Pe.nombre))})]}),S.jsxs("div",{className:" d-flex flex-column align-items-center justify-content-center",children:[S.jsxs("button",{className:`rounded-3 w-100 col d-flex flex-row text-start justify-content-between border align-items-center border-light p-4 m-2 ${Xe?"bg-secondary-subtle":"bg-light"}`,disabled:Xe,children:[S.jsx("div",{className:"lead",onClick:Xe?void 0:Fn,children:"Ingredients"}),S.jsxs("div",{className:"d-flex align-items-center gap-2",children:[S.jsx("i",{className:"bi bi-search"}),S.jsx("input",{type:"text",className:"form-control form-control-md",style:{maxWidth:"150px"},onChange:Xe?void 0:ji,placeholder:"Search",disabled:Xe})]})]}),S.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center w-100 mt-3 mb-3 m-2",children:[S.jsx("button",{className:"btn btn-outline-dark",onClick:Xe?void 0:Rn,disabled:Xe,children:S.jsx("i",{className:"bi bi-chevron-left"})}),S.jsx("button",{className:"btn btn-outline-dark",onClick:Xe?void 0:kr,disabled:Xe,children:S.jsx("i",{className:"bi bi-chevron-right"})})]}),S.jsx("div",{className:"d-flex align-items-center",children:S.jsx("div",{className:"overflow-scroll d-flex flex-row flex-nowrap",ref:xt,style:{maxWidth:"90vw",maxHeight:"30vh",opacity:Xe?.5:1,pointerEvents:Xe?"none":"auto"},children:Xt.map(Pe=>S.jsx("button",{className:j[`${Pe.nombre}Ing`]?"btn btn-outline-secondary m-1 ingredients active p-4 rounded-pill w-100":"btn btn-outline-secondary m-1 ingredients p-4 rounded-pill w-100",value:Pe.nombre,onClick:Ft,disabled:Xe,children:Pe.nombre},Pe.nombre))})}),S.jsx("div",{className:"",style:{maxWidth:"90vw",minWidth:"90vw",maxHeight:"30vh",overflowY:"auto"},children:p.length>0&&S.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[S.jsx("div",{className:" position-fixed  bottom-0 m-4",style:{zIndex:1e3},children:S.jsxs("div",{className:"d-flex flex-row align-items-center gap-4",children:[S.jsx("button",{className:`btn ${gt?"btn-success":"btn-dark"} rounded-pill p-4 d-flex align-items-center justify-content-center gap-3`,onClick:rt,children:gt?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"bi bi-check-circle-fill text-white lead"}),S.jsx("h4",{className:"lead",children:"Guardado"})]}):S.jsx("h4",{className:"lead",children:"Guardar"})}),gt&&S.jsx("button",{className:"btn btn-dark rounded-pill px-5 py-3",onClick:bt,children:S.jsx("h4",{className:"lead",children:"Volver"})})]})}),S.jsxs("div",{className:"mt-3 bg-primary p-4 rounded-5 ",style:{maxWidth:"90vw",minWidth:"90vw",maxHeight:"30vh",overflowY:"auto"},children:[S.jsx("h4",{className:"text-center text-light lead fw-bold",children:"Ingredientes Seleccionados"}),S.jsx("ul",{className:"list-group d-flex flex-row flex-wrap justify-content-around w-100",children:p.map((Pe,St)=>S.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center p-4 mb-1 rounded-5 bg-light",children:[S.jsx("div",{className:"lead",children:Pe}),!Xe&&S.jsx("button",{className:"btn btn-danger btn-md ms-4",onClick:()=>{const wt=p.filter(Bt=>Bt!==Pe);m(wt);var jt=Pe+"Ing";localStorage.setItem(jt,"0"),z(Bt=>({...Bt,[jt]:!1}))},children:S.jsx("i",{className:"bi bi-x"})})]},St))})]})]})})]})]})})]}):Ui=="toppings"?S.jsxs("div",{className:"container mt-4",children:[S.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[S.jsx("button",{className:"btn btn-outline-dark me-2",onClick:bt,children:S.jsx("i",{className:"bi bi-chevron-left"})}),S.jsx("h2",{className:"mb-4",children:"Elige Toppings"})]}),S.jsx("div",{className:"d-flex flex-wrap gap-3 justify-content-center"})]}):Ui=="cantidad"?S.jsxs("div",{className:"container mt-4",children:[S.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[S.jsx("button",{className:"btn btn-outline-dark me-2",onClick:bt,children:S.jsx("i",{className:"bi bi-chevron-left"})}),S.jsx("h2",{className:"mb-4",children:"Elige Cantidad"})]}),S.jsxs("div",{className:"d-flex flex-wrap gap-3 justify-content-center",children:[S.jsxs("div",{className:" d-flex flex-column m-2 p-3  justify-content-center align-items-center gap-3",style:{width:"90vw"},children:[S.jsx("div",{className:" display-6",children:"Cantidad"}),S.jsxs("div",{className:" d-flex flex-row w-100 justify-content-around align-items-center",children:[S.jsx("button",{className:"btn btn-primary rounded-pill display-6",onClick:gs,children:"-"}),S.jsx("div",{className:" display-6 ",children:b}),S.jsx("button",{className:"btn btn-primary rounded-pill display-6",onClick:Xn,children:"+"})]})]}),S.jsxs("div",{className:"d-flex flex-row align-items-center gap-4 mt-5",children:[S.jsx("button",{className:`btn ${gt?"btn-success":"btn-primary"} rounded-pill p-4 d-flex align-items-center justify-content-center gap-3`,onClick:rt,children:gt?S.jsxs(S.Fragment,{children:[S.jsx("i",{className:"bi bi-check-circle-fill text-white display-5"}),S.jsx("h4",{className:"display-4  p-4",children:"Guardado"})]}):S.jsx("h4",{className:"display-4  p-4",children:"Guardar"})}),gt&&S.jsx("button",{className:"btn btn-outline-dark rounded-pill px-5 py-3",onClick:bt,children:S.jsx("h4",{className:" display-4 p-4",children:"Volver"})})]})]})]}):Ui=="comentarios"?S.jsxs("div",{className:"container mt-4",children:[S.jsxs("div",{className:"d-flex flex-row justify-content-between align-items-center",children:[S.jsx("button",{className:"btn btn-outline-dark me-2",onClick:bt,children:S.jsx("i",{className:"bi bi-chevron-left"})}),S.jsx("h2",{className:"mb-4",children:"Escribe Comentarios"})]}),S.jsx("div",{className:"d-flex flex-wrap gap-3 justify-content-center"})]}):S.jsxs("div",{className:"bg-light terminal-screen",children:[S.jsxs("div",{className:" w-100 d-flex flex-row justify-content-around align-items-center",style:{width:"90vw"},children:[S.jsx("div",{className:" d-flex  align-items-center justify-content-center btn rounded-pill btn-outline-primary p-2 mt-4",onClick:xi,children:S.jsx("div",{className:"lead p-3",children:"Orders Screen"})}),S.jsx("div",{className:"  pt-4 ",children:S.jsx("div",{className:" ",children:S.jsx("input",{type:"text",name:"cliente",className:"form-control border p-3 border-dark rounded-3 fs-3",placeholder:"Nombre del Ciente",value:Q,onChange:di})})})]}),S.jsx("div",{className:" w-100 d-flex flex-wrap justify-content-around align-items-center",style:{width:"90vw",height:"80vh"},children:S.jsx("div",{className:"d-flex flex-wrap gap-3 justify-content-center mt-4",children:Pi.map((Pe,St)=>{let wt=!1;return St===1&&ne===0&&(wt=!0),St===2&&p.length==0&&(wt=!0),St===3&&b==0&&(wt=!0),S.jsxs("button",{className:`btn btn-outline-dark rounded text-center d-flex flex-column align-items-center justify-content-center ${Pe.ruta}`,style:{width:"450px",height:"200px",backgroundColor:wt?"#dee2e6":"transparent",color:wt?"#6c757d":"inherit",cursor:wt?"not-allowed":"pointer"},onClick:()=>Te(Pe.ruta),disabled:wt,children:[Pe.selected&&S.jsx("i",{className:"me-3 bi bi-check-circle-fill text-success display-3"}),S.jsx("h4",{className:"display-3 m-0",children:Pe.label})]},St)})})})]})}function TB(){return S.jsxs("div",{className:"d-flex flex-row",children:[S.jsx(wB,{}),S.jsx(EB,{})]})}const AB="admin",LB="admin",kB="employee",CB="employee",w1="username",_1="password";function IB(){const[n,e]=O.useState(!1),[t,i]=O.useState(""),[s,r]=O.useState(""),[a,o]=O.useState(!1),[l,c]=O.useState(!1);O.useEffect(()=>{var x=localStorage.getItem(w1),_=localStorage.getItem(_1);x!=null&&_!=null&&(i(x),r(_),e(!0),x=="admin"&&_=="admin"&&c(!0))},[]);const u=x=>{x.preventDefault(),t==AB&&s==LB?(c(!0),e(!0),localStorage.setItem(w1,t),localStorage.setItem(_1,s)):t==kB&&s==CB?(c(!1),e(!0),localStorage.setItem(w1,t),localStorage.setItem(_1,s)):(o(!0),e(!1))},d=x=>{x.preventDefault(),e(!1)},h=x=>{i(x.target.value)},f=x=>{r(x.target.value)},[p,m]=O.useState(!1),v=()=>m(!1),y=()=>m(!0),b=async x=>{x.preventDefault();const _=x.target,T=new FormData(_),C=T.get("name"),L=T.get("message");console.log({name:C,message:L}),console.log("Form submitted!"),xn.success("Mensaje sometido, Puedes cerrar el menu");const k=await nt.post("/sales",{nombre:C,mensaje:L});console.log(k),v()};return S.jsxs("div",{className:"  justify-content-center  align-items-center d-flex flex-column home",style:{height:"100vh"},children:[S.jsx("div",{className:"",children:S.jsx("h1",{className:"fw-bold text-light",children:"Oasis POS System"})}),n?S.jsxs("div",{className:"d-flex flex-column text-center",children:[S.jsxs(xr,{children:[S.jsx(xr.Link,{to:"/terminal",as:Cl,className:"btn btn-outline-primary text-light m-3",children:"Terminal"}),S.jsx(xr.Link,{to:"/queue",as:Cl,className:"btn btn-outline-primary text-light m-3",children:"Queue"}),S.jsx(xr.Link,{to:"https://oasis-i2.herokuapp.com",as:Cl,className:"btn btn-outline-primary text-light m-3",children:"Inventory"}),l&&S.jsx(xr.Link,{to:"/ventas",as:Cl,className:"btn btn-outline-primary text-light m-3",children:"Sales"})]}),S.jsx("button",{className:"btn rounded-pill btn-outline-light",onClick:d,children:"Sign Out"}),l&&S.jsxs("div",{className:"mt-5",style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",zIndex:1050},children:[S.jsx(yr,{variant:"primary",onClick:y,children:"No vas a abrir hoy? Deja registrado porque"}),S.jsxs(yt,{show:p,onHide:v,children:[S.jsx(jy,{position:"top-right"}),S.jsx(yt.Header,{closeButton:!0,children:S.jsx(yt.Title,{children:"Motivo de cierre"})}),S.jsx(yt.Body,{children:S.jsxs(ta,{onSubmit:b,children:[S.jsxs(ta.Group,{className:"mb-3",controlId:"formName",children:[S.jsx(ta.Label,{children:"Nombre"}),S.jsx(ta.Control,{name:"name",type:"text",placeholder:"Nombre",required:!0})]}),S.jsxs(ta.Group,{name:"name",className:"mb-3",controlId:"formMessage",children:[S.jsx(ta.Label,{children:"Mensaje"}),S.jsx(ta.Control,{name:"message",type:"text",placeholder:"Mensaje",required:!0})]}),S.jsx(yr,{variant:"primary",type:"submit",children:"Someter"})]})})]})]})]}):S.jsxs("div",{className:"d-flex flex-column",children:[a&&S.jsx("div",{className:"text-danger text-center",children:"Incorrect Credentials"}),S.jsxs(ta,{children:[S.jsxs(ta.Group,{className:"mb-3",controlId:"formBasicEmail",children:[S.jsx(ta.Control,{type:"text",placeholder:"Username",className:"m-1",value:t,onChange:h}),S.jsx(ta.Control,{type:"password",placeholder:"Password",className:"m-1",value:s,onChange:f})]}),S.jsx("button",{className:"btn btn-outline-primary rounded-pill p-2 w-100",onClick:u,children:"Login"})]})]})]})}function RB(){const[n,e]=O.useState(null);new BroadcastChannel("reload-channel");const{renderOrdersKey:t,setRenderOrdersKey:i}=O.useContext(yn),{newOrderCounter:s,increaseNewOrderCounter:r}=O.useContext(yn),a=async()=>{const j=await nt.get("/orders/pending_orders");L(j.data)};O.useEffect(()=>{const j=setInterval(()=>{console.log("This will run every 5 seconds"),a(),nt.get("/orders").then(z=>{console.log("Response",z.data),e(z.data)}).catch(z=>{console.log("Error",z)})},500);return()=>clearInterval(j)},[t]);const o=async j=>{try{console.log(j);const z=await nt.delete("/orders",{data:{id:j}});console.log("Item deleted:",z.data)}catch(z){console.log("error:",z)}i(z=>z+1),y(!1),location.reload()},l=async j=>{var z;if(j.status=="done")z={id:j._id,updated_record:{client_name:j.client_name,items:j.items,payment_method:j.payment_method,total:j.total,status:"in progress"}};else if(j.status=="in progress")var z={id:j._id,updated_record:{client_name:j.client_name,items:j.items,payment_method:j.payment_method,total:j.total,status:"done"}};try{const B=await nt.put("/orders/",z);console.log("Order status updated successfully:",B.data),location.reload()}catch(B){console.error("Failed to update order status:",B)}location.reload()},[c,u]=O.useState({}),[d,h]=O.useState({}),f=j=>{u(z=>({...z,[j]:!z[j]}))},[p,m]=O.useState(0),[v,y]=O.useState(!1),b=()=>y(!1),x=j=>{y(!0),m(j)},[_,T]=O.useState(!1),[C,L]=O.useState([]),k=async j=>{await nt.patch(`/orders/pending_orders/${j}/confirm`),a(),T(!1)},[M,D]=O.useState(null),[I,R]=O.useState(null);console.log(C);const q=C==null?void 0:C.filter(j=>j.paymentConfirmed!==void 0&&j.paymentConfirmed===!1),[Y,ee]=O.useState({});return S.jsxs("div",{children:[S.jsxs(yt,{show:v,onHide:b,children:[S.jsx(yt.Header,{closeButton:!0,children:S.jsx(yt.Title,{children:"Deleting Order"})}),S.jsx(yt.Body,{children:"Warning, you're about to delete an order!"}),S.jsxs(yt.Footer,{children:[S.jsx(yr,{variant:"secondary",onClick:b,children:"Cancel"}),S.jsx(yr,{variant:"primary",onClick:()=>o(p),children:"Delete"})]})]}),S.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between m-2",children:[S.jsx("div",{className:"d-flex pt-3 w-25 pb-3 text-center align-items-center justify-content-center",children:S.jsx(xr,{children:S.jsx(xr.Link,{to:"/",as:Cl,className:"btn ",style:{fontSize:"1rem"},children:"Home"})})}),S.jsx("div",{className:"pt-3 pb-3 d-flex w-75 text-center justify-content-center align-items-center display-6",children:"rdenes Pendientes"}),S.jsxs("button",{className:"btn btn-dark w-25 rounded-pill shadow-sm py-3 px-4 fw-semibold text-white d-flex align-items-center justify-content-center gap-2",style:{maxWidth:"400px",fontSize:"1rem",letterSpacing:"0.3px"},onClick:()=>T(!0),children:[q.length>0&&S.jsx("span",{className:"badge rounded-pill bg-danger",style:{fontSize:"1rem"},children:q.length}),"rdenes de Kiosko"]}),S.jsxs(yt,{show:_,onHide:()=>T(!1),centered:!0,size:"lg",children:[S.jsx(yt.Header,{closeButton:!0,children:S.jsx(yt.Title,{children:"rdenes Pendientes"})}),S.jsx(yt.Body,{style:{maxHeight:"60vh",overflowY:"auto"},children:C.map(j=>{var z;return S.jsxs("div",{className:"border rounded p-3 mb-3",children:[S.jsxs("p",{children:[S.jsx("strong",{children:"Cliente:"})," ",j.client_name]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Total:"})," $",j.total]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Pago:"})," ",j.payment_method]}),S.jsxs("div",{className:"mt-2",children:[S.jsx("strong",{children:"Helados:"}),(z=j.items)==null?void 0:z.map((B,U)=>{var Q,re;return S.jsxs("div",{className:"border rounded p-2 mt-2",children:[S.jsxs("p",{children:[S.jsxs("strong",{children:["#",U+1,":"]})," ",B.combination||"Helado"]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Toppings:"})," ",M===j._id?S.jsx("input",{className:"form-control",type:"text",value:((re=(Q=I==null?void 0:I.items[U])==null?void 0:Q.toppings)==null?void 0:re.join(", "))||"",onChange:N=>{const W=N.target.value.split(",").map(Z=>Z.trim()),K=[...I.items];K[U].toppings=W,R({...I,items:K})}}):B.toppings&&B.toppings.length>0?B.toppings.join(", "):"Ninguno"]})]},U)})]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Confirmado?:"})," ",j.paymentConfirmed?"S":"No"]}),!j.paymentConfirmed&&M===j._id?S.jsx(S.Fragment,{children:S.jsxs("div",{className:"d-flex gap-2 mt-3",children:[S.jsxs("select",{className:"form-select",value:I.payment_method,onChange:B=>R({...I,payment_method:B.target.value}),children:[S.jsx("option",{value:"ATH",children:"ATH"}),S.jsx("option",{value:"CASH",children:"CASH"})]}),S.jsx("button",{className:"btn btn-success",onClick:async()=>{await nt.patch(`/orders/pending_orders/${j._id}/edit`,I),D(null),a()},children:"Guardar cambios"}),S.jsx("button",{className:"btn btn-secondary",onClick:()=>D(null),children:"Cancelar"})]})}):!j.paymentConfirmed&&S.jsxs("div",{className:"d-flex gap-2 mt-3",children:[S.jsx("button",{className:"btn btn-primary",onClick:()=>k(j._id),children:"Confirmar"}),S.jsx("button",{className:"btn btn-warning",onClick:()=>{D(j._id),R(JSON.parse(JSON.stringify(j)))},children:"Modificar"})]})]},j._id)})}),S.jsx(yt.Footer,{children:S.jsx("button",{className:"btn btn-secondary",onClick:()=>T(!1),children:"Cerrar"})})]}),S.jsxs("div",{className:"",children:[S.jsx("img",{src:"",alt:""}),S.jsx("div",{className:"container mt-5"})]})]}),n?S.jsx("div",{className:"list-group h-100",children:n.map(j=>S.jsxs("div",{className:`d-flex justify-content-center align-items-center flex-column list-group-item list-group-item-action p-3 border rounded-2 m-2 ${j.status==="done"?"bg-success-subtle":""}`,children:[S.jsxs("div",{className:"d-flex flex-row w-100 justify-content-between align-items-center",children:[S.jsx("button",{className:"btn fs-4",style:{width:"100px"},children:j.client_name},j._id),S.jsx("button",{className:"btn fs-4",onClick:()=>f(j._id),children:S.jsx("i",{className:`bi ${c[j._id]==!0?"bi-eye-slash":"bi-eye"}`})},j._id),S.jsxs("button",{className:"btn text-secondary fs-4",onClick:()=>x(j._id),children:["  ",S.jsx("i",{className:"bi bi-trash"})]}),S.jsxs("button",{className:`btn fs-5 px-3 py-2 fw-semibold d-flex align-items-center gap-2 
                        ${j.status==="done"?"btn-success text-white":"btn-outline-secondary"}`,onClick:()=>l(j),children:[S.jsx("i",{className:`bi ${j.status==="done"?"bi-check-circle-fill":"bi-hourglass-split"}`}),j.status==="done"?"Done":"In Progress"]})]}),S.jsxs("div",{className:c[j._id]?"d-flex flex-column bg-secondary-subtle p-3 w-100":"d-none bg-secondary-subtle ",children:[S.jsx("div",{className:"d-flex flex-column w-100 ",children:j.items.map(z=>S.jsxs("div",{className:" border-bottom border-dark w-100",children:[S.jsxs("div",{className:"d-flex flex-row bg-danger-subtle p-3",children:[S.jsx("div",{className:"fw-bold fs-4",children:" Tipo:  "}),S.jsx("div",{className:"fs-4",children:z.type})]}),S.jsxs("div",{className:"d-flex flex-column bg-warning-subtle p-3",children:[z&&z.type!=="drinks"&&S.jsx("div",{className:"fw-bold fs-4",children:"Ingredientes:"}),S.jsx("ul",{className:"d-flex flex-column",children:z.type!=="drinks"&&z.ings.map(B=>S.jsx("li",{className:"fs-4",children:B}))})]}),S.jsxs("div",{className:"d-flex flex-column bg-primary-subtle p-3",children:[z&&z.type!=="drinks"&&S.jsx("div",{className:"fw-bold fs-4",children:"Toppings:"}),S.jsx("ul",{className:"d-flex flex-column",children:z.type!=="drinks"&&z.tops.map(B=>S.jsx("li",{className:"fs-4",children:B}))})]}),S.jsxs("div",{className:"d-flex flex-column bg-info-subtle p-3",children:[S.jsx("div",{className:"fw-bold fs-4",children:"Cantidad:"}),S.jsx("ul",{className:"col d-flex flex-row w-100 justify-content-between fs-4",children:z.qty})]}),S.jsxs("div",{className:"d-flex flex-column pb-2 bg-success-subtle p-3",children:[S.jsx("div",{className:"fw-bold fs-4",children:"Comentarios:"}),S.jsx("ul",{className:"d-flex flex-column fs-4",children:z.comments})]})]}))}),S.jsxs("div",{className:"d-flex flex-column",children:[S.jsxs("div",{className:"fw-bold d-flex flex-row w-100",children:[S.jsx("div",{className:"fs-4",children:"Mtodo de Pago:"}),S.jsx("div",{className:"fw-normal d-flex justify-content-center align-items-center fs-4",children:j.payment_method})]}),S.jsxs("div",{className:"fw-bold d-flex flex-row w-100",children:[S.jsx("div",{className:"fs-4",children:"Total:"}),S.jsx("div",{className:"fw-normal d-flex justify-content-center align-items-cente fs-4",children:S.jsx(Bc,{value:j.total})})]}),S.jsx("div",{className:d[j._id]?"d-flex justify-content-center align-items-center h-100":"d-none",children:S.jsx("div",{className:"",children:S.jsx("button",{className:"btn btn-primary",onClick:()=>handleUpdate(j._id,j.name,j.items,j.payment_method),children:"Save"})})})]})]})]}))}):S.jsx("p",{children:"No hay rdenes"})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Op(n){return n+.5|0}const Il=(n,e,t)=>Math.max(Math.min(n,t),e);function Qh(n){return Il(Op(n*2.55),0,255)}function Vl(n){return Il(Op(n*255),0,255)}function Eo(n){return Il(Op(n/2.55)/100,0,1)}function xE(n){return Il(Op(n*100),0,100)}const Mr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Nb=[..."0123456789ABCDEF"],PB=n=>Nb[n&15],NB=n=>Nb[(n&240)>>4]+Nb[n&15],Vg=n=>(n&240)>>4===(n&15),DB=n=>Vg(n.r)&&Vg(n.g)&&Vg(n.b)&&Vg(n.a);function OB(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Mr[n[1]]*17,g:255&Mr[n[2]]*17,b:255&Mr[n[3]]*17,a:e===5?Mr[n[4]]*17:255}:(e===7||e===9)&&(t={r:Mr[n[1]]<<4|Mr[n[2]],g:Mr[n[3]]<<4|Mr[n[4]],b:Mr[n[5]]<<4|Mr[n[6]],a:e===9?Mr[n[7]]<<4|Mr[n[8]]:255})),t}const MB=(n,e)=>n<255?e(n):"";function FB(n){var e=DB(n)?PB:NB;return n?"#"+e(n.r)+e(n.g)+e(n.b)+MB(n.a,e):void 0}const jB=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function pR(n,e,t){const i=e*Math.min(t,1-t),s=(r,a=(r+n/30)%12)=>t-i*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function BB(n,e,t){const i=(s,r=(s+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function UB(n,e,t){const i=pR(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)i[s]*=1-e-t,i[s]+=e;return i}function $B(n,e,t,i,s){return n===s?(e-t)/i+(e<t?6:0):e===s?(t-n)/i+2:(n-e)/i+4}function jS(n){const t=n.r/255,i=n.g/255,s=n.b/255,r=Math.max(t,i,s),a=Math.min(t,i,s),o=(r+a)/2;let l,c,u;return r!==a&&(u=r-a,c=o>.5?u/(2-r-a):u/(r+a),l=$B(t,i,s,u,r),l=l*60+.5),[l|0,c||0,o]}function BS(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Vl)}function US(n,e,t){return BS(pR,n,e,t)}function HB(n,e,t){return BS(UB,n,e,t)}function zB(n,e,t){return BS(BB,n,e,t)}function gR(n){return(n%360+360)%360}function WB(n){const e=jB.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Qh(+e[5]):Vl(+e[5]));const s=gR(+e[2]),r=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?i=HB(s,r,a):e[1]==="hsv"?i=zB(s,r,a):i=US(s,r,a),{r:i[0],g:i[1],b:i[2],a:t}}function VB(n,e){var t=jS(n);t[0]=gR(t[0]+e),t=US(t),n.r=t[0],n.g=t[1],n.b=t[2]}function GB(n){if(!n)return;const e=jS(n),t=e[0],i=xE(e[1]),s=xE(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${s}%, ${Eo(n.a)})`:`hsl(${t}, ${i}%, ${s}%)`}const bE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},SE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function YB(){const n={},e=Object.keys(SE),t=Object.keys(bE);let i,s,r,a,o;for(i=0;i<e.length;i++){for(a=o=e[i],s=0;s<t.length;s++)r=t[s],o=o.replace(r,bE[r]);r=parseInt(SE[a],16),n[o]=[r>>16&255,r>>8&255,r&255]}return n}let Gg;function qB(n){Gg||(Gg=YB(),Gg.transparent=[0,0,0,0]);const e=Gg[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const KB=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function XB(n){const e=KB.exec(n);let t=255,i,s,r;if(e){if(e[7]!==i){const a=+e[7];t=e[8]?Qh(a):Il(a*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Qh(i):Il(i,0,255)),s=255&(e[4]?Qh(s):Il(s,0,255)),r=255&(e[6]?Qh(r):Il(r,0,255)),{r:i,g:s,b:r,a:t}}}function QB(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Eo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const E1=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,zu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function JB(n,e,t){const i=zu(Eo(n.r)),s=zu(Eo(n.g)),r=zu(Eo(n.b));return{r:Vl(E1(i+t*(zu(Eo(e.r))-i))),g:Vl(E1(s+t*(zu(Eo(e.g))-s))),b:Vl(E1(r+t*(zu(Eo(e.b))-r))),a:n.a+t*(e.a-n.a)}}function Yg(n,e,t){if(n){let i=jS(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=US(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function mR(n,e){return n&&Object.assign(e||{},n)}function wE(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Vl(n[3]))):(e=mR(n,{r:0,g:0,b:0,a:1}),e.a=Vl(e.a)),e}function ZB(n){return n.charAt(0)==="r"?XB(n):WB(n)}class Zf{constructor(e){if(e instanceof Zf)return e;const t=typeof e;let i;t==="object"?i=wE(e):t==="string"&&(i=OB(e)||qB(e)||ZB(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=mR(this._rgb);return e&&(e.a=Eo(e.a)),e}set rgb(e){this._rgb=wE(e)}rgbString(){return this._valid?QB(this._rgb):void 0}hexString(){return this._valid?FB(this._rgb):void 0}hslString(){return this._valid?GB(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,s=e.rgb;let r;const a=t===r?.5:t,o=2*a-1,l=i.a-s.a,c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=a*i.a+(1-a)*s.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=JB(this._rgb,e._rgb,t)),this}clone(){return new Zf(this.rgb)}alpha(e){return this._rgb.a=Vl(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Op(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Yg(this._rgb,2,e),this}darken(e){return Yg(this._rgb,2,-e),this}saturate(e){return Yg(this._rgb,1,e),this}desaturate(e){return Yg(this._rgb,1,-e),this}rotate(e){return VB(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ho(){}const e7=(()=>{let n=0;return()=>n++})();function en(n){return n==null}function ei(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function sn(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function mi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function pr(n,e){return mi(n)?n:e}function Ht(n,e){return typeof n>"u"?e:n}const t7=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,yR=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function $n(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function An(n,e,t,i){let s,r,a;if(ei(n))for(r=n.length,s=0;s<r;s++)e.call(t,n[s],s);else if(sn(n))for(a=Object.keys(n),r=a.length,s=0;s<r;s++)e.call(t,n[a[s]],a[s])}function O0(n,e){let t,i,s,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(s=n[t],r=e[t],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function M0(n){if(ei(n))return n.map(M0);if(sn(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let s=0;for(;s<i;++s)e[t[s]]=M0(n[t[s]]);return e}return n}function vR(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function n7(n,e,t,i){if(!vR(n))return;const s=e[n],r=t[n];sn(s)&&sn(r)?ep(s,r,i):e[n]=M0(r)}function ep(n,e,t){const i=ei(e)?e:[e],s=i.length;if(!sn(n))return n;t=t||{};const r=t.merger||n7;let a;for(let o=0;o<s;++o){if(a=i[o],!sn(a))continue;const l=Object.keys(a);for(let c=0,u=l.length;c<u;++c)r(l[c],n,a,t)}return n}function gf(n,e){return ep(n,e,{merger:i7})}function i7(n,e,t){if(!vR(n))return;const i=e[n],s=t[n];sn(i)&&sn(s)?gf(i,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=M0(s))}const _E={"":n=>n,x:n=>n.x,y:n=>n.y};function s7(n){const e=n.split("."),t=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function r7(n){const e=s7(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Xl(n,e){return(_E[e]||(_E[e]=r7(e)))(n)}function $S(n){return n.charAt(0).toUpperCase()+n.slice(1)}const tp=n=>typeof n<"u",Ql=n=>typeof n=="function",EE=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function a7(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Yn=Math.PI,Gn=2*Yn,o7=Gn+Yn,F0=Number.POSITIVE_INFINITY,l7=Yn/180,Ci=Yn/2,xc=Yn/4,TE=Yn*2/3,Rl=Math.log10,Ya=Math.sign;function mf(n,e,t){return Math.abs(n-e)<t}function AE(n){const e=Math.round(n);n=mf(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Rl(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function c7(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((s,r)=>s-r).pop(),e}function u7(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Fd(n){return!u7(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function d7(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function xR(n,e,t){let i,s,r;for(i=0,s=n.length;i<s;i++)r=n[i][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function da(n){return n*(Yn/180)}function HS(n){return n*(180/Yn)}function LE(n){if(!mi(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function bR(n,e){const t=e.x-n.x,i=e.y-n.y,s=Math.sqrt(t*t+i*i);let r=Math.atan2(i,t);return r<-.5*Yn&&(r+=Gn),{angle:r,distance:s}}function Db(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function h7(n,e){return(n-e+o7)%Gn-Yn}function mr(n){return(n%Gn+Gn)%Gn}function np(n,e,t,i){const s=mr(n),r=mr(e),a=mr(t),o=mr(r-s),l=mr(a-s),c=mr(s-r),u=mr(s-a);return s===r||s===a||i&&r===a||o>l&&c<u}function ss(n,e,t){return Math.max(e,Math.min(t,n))}function f7(n){return ss(n,-32768,32767)}function ko(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function zS(n,e,t){t=t||(a=>n[a]<e);let i=n.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,t(r)?s=r:i=r;return{lo:s,hi:i}}const Co=(n,e,t,i)=>zS(n,t,i?s=>{const r=n[s][e];return r<t||r===t&&n[s+1][e]===t}:s=>n[s][e]<t),p7=(n,e,t)=>zS(n,t,i=>n[i][e]>=t);function g7(n,e,t){let i=0,s=n.length;for(;i<s&&n[i]<e;)i++;for(;s>i&&n[s-1]>t;)s--;return i>0||s<n.length?n.slice(i,s):n}const SR=["push","pop","shift","splice","unshift"];function m7(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),SR.forEach(t=>{const i="_onData"+$S(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const a=s.apply(this,r);return n._chartjs.listeners.forEach(o=>{typeof o[i]=="function"&&o[i](...r)}),a}})})}function kE(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(SR.forEach(r=>{delete n[r]}),delete n._chartjs)}function wR(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const _R=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function ER(n,e){let t=[],i=!1;return function(...s){t=s,i||(i=!0,_R.call(window,()=>{i=!1,n.apply(e,t)}))}}function y7(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const WS=n=>n==="start"?"left":n==="end"?"right":"center",Es=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,v7=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function TR(n,e,t){const i=e.length;let s=0,r=i;if(n._sorted){const{iScale:a,vScale:o,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(s=Math.min(Co(l,u,d).lo,t?i:Co(e,u,a.getPixelForValue(d)).lo),c){const m=l.slice(0,s+1).reverse().findIndex(v=>!en(v[o.axis]));s-=Math.max(0,m)}s=ss(s,0,i-1)}if(p){let m=Math.max(Co(l,a.axis,h,!0).hi+1,t?0:Co(e,u,a.getPixelForValue(h),!0).hi+1);if(c){const v=l.slice(m-1).findIndex(y=>!en(y[o.axis]));m+=Math.max(0,v)}r=ss(m,s,i)-s}else r=i-s}return{start:s,count:r}}function AR(n){const{xScale:e,yScale:t,_scaleRanges:i}=n,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,s),r}const qg=n=>n===0||n===1,CE=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Gn/t)),IE=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Gn/t)+1,yf={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ci)+1,easeOutSine:n=>Math.sin(n*Ci),easeInOutSine:n=>-.5*(Math.cos(Yn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>qg(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>qg(n)?n:CE(n,.075,.3),easeOutElastic:n=>qg(n)?n:IE(n,.075,.3),easeInOutElastic(n){return qg(n)?n:n<.5?.5*CE(n*2,.1125,.45):.5+.5*IE(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-yf.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?yf.easeInBounce(n*2)*.5:yf.easeOutBounce(n*2-1)*.5+.5};function VS(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function RE(n){return VS(n)?n:new Zf(n)}function T1(n){return VS(n)?n:new Zf(n).saturate(.5).darken(.1).hexString()}const x7=["x","y","borderWidth","radius","tension"],b7=["color","borderColor","backgroundColor"];function S7(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:b7},numbers:{type:"number",properties:x7}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function w7(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const PE=new Map;function _7(n,e){e=e||{};const t=n+JSON.stringify(e);let i=PE.get(t);return i||(i=new Intl.NumberFormat(n,e),PE.set(t,i)),i}function Mp(n,e,t){return _7(e,t).format(n)}const LR={values(n){return ei(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let s,r=n;if(t.length>1){const c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=E7(n,t)}const a=Rl(Math.abs(r)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Mp(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";const i=t[e].significand||n/Math.pow(10,Math.floor(Rl(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?LR.numeric.call(this,n,e,t):""}};function E7(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var By={formatters:LR};function T7(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:By.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const lu=Object.create(null),Ob=Object.create(null);function vf(n,e){if(!e)return n;const t=e.split(".");for(let i=0,s=t.length;i<s;++i){const r=t[i];n=n[r]||(n[r]=Object.create(null))}return n}function A1(n,e,t){return typeof e=="string"?ep(vf(n,e),t):ep(vf(n,""),e)}class A7{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>T1(s.backgroundColor),this.hoverBorderColor=(i,s)=>T1(s.borderColor),this.hoverColor=(i,s)=>T1(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return A1(this,e,t)}get(e){return vf(this,e)}describe(e,t){return A1(Ob,e,t)}override(e,t){return A1(lu,e,t)}route(e,t,i,s){const r=vf(this,e),a=vf(this,i),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[o],c=a[s];return sn(l)?Object.assign({},c,l):Ht(l,c)},set(l){this[o]=l}}})}apply(e){e.forEach(t=>t(this))}}var ti=new A7({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[S7,w7,T7]);function L7(n){return!n||en(n.size)||en(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function j0(n,e,t,i,s){let r=e[s];return r||(r=e[s]=n.measureText(s).width,t.push(s)),r>i&&(i=r),i}function k7(n,e,t,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let a=0;const o=t.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=t[l],d!=null&&!ei(d))a=j0(n,s,r,a,d);else if(ei(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!ei(h)&&(a=j0(n,s,r,a,h));n.restore();const f=r.length/2;if(f>t.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return a}function bc(n,e,t){const i=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*i)/i+s}function NE(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Mb(n,e,t,i){kR(n,e,t,i,null)}function kR(n,e,t,i,s){let r,a,o,l,c,u,d,h;const f=e.pointStyle,p=e.rotation,m=e.radius;let v=(p||0)*l7;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(v),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),f){default:s?n.ellipse(t,i,s/2,m,0,0,Gn):n.arc(t,i,m,0,Gn),n.closePath();break;case"triangle":u=s?s/2:m,n.moveTo(t+Math.sin(v)*u,i-Math.cos(v)*m),v+=TE,n.lineTo(t+Math.sin(v)*u,i-Math.cos(v)*m),v+=TE,n.lineTo(t+Math.sin(v)*u,i-Math.cos(v)*m),n.closePath();break;case"rectRounded":c=m*.516,l=m-c,a=Math.cos(v+xc)*l,d=Math.cos(v+xc)*(s?s/2-c:l),o=Math.sin(v+xc)*l,h=Math.sin(v+xc)*(s?s/2-c:l),n.arc(t-d,i-o,c,v-Yn,v-Ci),n.arc(t+h,i-a,c,v-Ci,v),n.arc(t+d,i+o,c,v,v+Ci),n.arc(t-h,i+a,c,v+Ci,v+Yn),n.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=s?s/2:l,n.rect(t-u,i-l,2*u,2*l);break}v+=xc;case"rectRot":d=Math.cos(v)*(s?s/2:m),a=Math.cos(v)*m,o=Math.sin(v)*m,h=Math.sin(v)*(s?s/2:m),n.moveTo(t-d,i-o),n.lineTo(t+h,i-a),n.lineTo(t+d,i+o),n.lineTo(t-h,i+a),n.closePath();break;case"crossRot":v+=xc;case"cross":d=Math.cos(v)*(s?s/2:m),a=Math.cos(v)*m,o=Math.sin(v)*m,h=Math.sin(v)*(s?s/2:m),n.moveTo(t-d,i-o),n.lineTo(t+d,i+o),n.moveTo(t+h,i-a),n.lineTo(t-h,i+a);break;case"star":d=Math.cos(v)*(s?s/2:m),a=Math.cos(v)*m,o=Math.sin(v)*m,h=Math.sin(v)*(s?s/2:m),n.moveTo(t-d,i-o),n.lineTo(t+d,i+o),n.moveTo(t+h,i-a),n.lineTo(t-h,i+a),v+=xc,d=Math.cos(v)*(s?s/2:m),a=Math.cos(v)*m,o=Math.sin(v)*m,h=Math.sin(v)*(s?s/2:m),n.moveTo(t-d,i-o),n.lineTo(t+d,i+o),n.moveTo(t+h,i-a),n.lineTo(t-h,i+a);break;case"line":a=s?s/2:Math.cos(v)*m,o=Math.sin(v)*m,n.moveTo(t-a,i-o),n.lineTo(t+a,i+o);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(v)*(s?s/2:m),i+Math.sin(v)*m);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Io(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Uy(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function $y(n){n.restore()}function C7(n,e,t,i,s){if(!e)return n.lineTo(t.x,t.y);if(s==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else s==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function I7(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function R7(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),en(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function P7(n,e,t,i,s){if(s.strikethrough||s.underline){const r=n.measureText(i),a=e-r.actualBoundingBoxLeft,o=e+r.actualBoundingBoxRight,l=t-r.actualBoundingBoxAscent,c=t+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(a,u),n.lineTo(o,u),n.stroke()}}function N7(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function cu(n,e,t,i,s,r={}){const a=ei(e)?e:[e],o=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,R7(n,r),l=0;l<a.length;++l)c=a[l],r.backdrop&&N7(n,r.backdrop),o&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),en(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(c,t,i,r.maxWidth)),n.fillText(c,t,i,r.maxWidth),P7(n,t,i,c,r),i+=Number(s.lineHeight);n.restore()}function ip(n,e){const{x:t,y:i,w:s,h:r,radius:a}=e;n.arc(t+a.topLeft,i+a.topLeft,a.topLeft,1.5*Yn,Yn,!0),n.lineTo(t,i+r-a.bottomLeft),n.arc(t+a.bottomLeft,i+r-a.bottomLeft,a.bottomLeft,Yn,Ci,!0),n.lineTo(t+s-a.bottomRight,i+r),n.arc(t+s-a.bottomRight,i+r-a.bottomRight,a.bottomRight,Ci,0,!0),n.lineTo(t+s,i+a.topRight),n.arc(t+s-a.topRight,i+a.topRight,a.topRight,0,-Ci,!0),n.lineTo(t+a.topLeft,i)}const D7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,O7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function M7(n,e){const t=(""+n).match(D7);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const F7=n=>+n||0;function GS(n,e){const t={},i=sn(e),s=i?Object.keys(e):e,r=sn(n)?i?a=>Ht(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of s)t[a]=F7(r(a));return t}function CR(n){return GS(n,{top:"y",right:"x",bottom:"y",left:"x"})}function qc(n){return GS(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ps(n){const e=CR(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function qi(n,e){n=n||{},e=e||ti.font;let t=Ht(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Ht(n.style,e.style);i&&!(""+i).match(O7)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Ht(n.family,e.family),lineHeight:M7(Ht(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Ht(n.weight,e.weight),string:""};return s.string=L7(s),s}function Jh(n,e,t,i){let s,r,a;for(s=0,r=n.length;s<r;++s)if(a=n[s],a!==void 0&&a!==void 0)return a}function j7(n,e,t){const{min:i,max:s}=n,r=yR(e,(s-i)/2),a=(o,l)=>t&&o===0?0:o+l;return{min:a(i,-Math.abs(r)),max:a(s,r)}}function oc(n,e){return Object.assign(Object.create(n),e)}function YS(n,e=[""],t,i,s=()=>n[0]){const r=t||n;typeof i>"u"&&(i=NR("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:i,_getTarget:s,override:o=>YS([o,...n],e,r,i)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete n[0][l],!0},get(o,l){return RR(o,l,()=>G7(l,e,n,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,l){return OE(o).includes(l)},ownKeys(o){return OE(o)},set(o,l,c){const u=o._storage||(o._storage=s());return o[l]=u[l]=c,delete o._keys,!0}})}function jd(n,e,t,i){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:IR(n,i),setContext:r=>jd(n,r,t,i),override:r=>jd(n.override(r),e,t,i)};return new Proxy(s,{deleteProperty(r,a){return delete r[a],delete n[a],!0},get(r,a,o){return RR(r,a,()=>U7(r,a,o))},getOwnPropertyDescriptor(r,a){return r._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(r,a,o){return n[a]=o,delete r[a],!0}})}function IR(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:i,isScriptable:Ql(t)?t:()=>t,isIndexable:Ql(i)?i:()=>i}}const B7=(n,e)=>n?n+$S(e):e,qS=(n,e)=>sn(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function RR(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function U7(n,e,t){const{_proxy:i,_context:s,_subProxy:r,_descriptors:a}=n;let o=i[e];return Ql(o)&&a.isScriptable(e)&&(o=$7(e,o,n,t)),ei(o)&&o.length&&(o=H7(e,o,n,a.isIndexable)),qS(e,o)&&(o=jd(o,s,r&&r[e],a)),o}function $7(n,e,t,i){const{_proxy:s,_context:r,_subProxy:a,_stack:o}=t;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let l=e(r,a||i);return o.delete(n),qS(n,l)&&(l=KS(s._scopes,s,n,l)),l}function H7(n,e,t,i){const{_proxy:s,_context:r,_subProxy:a,_descriptors:o}=t;if(typeof r.index<"u"&&i(n))return e[r.index%e.length];if(sn(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=KS(c,s,n,u);e.push(jd(d,r,a&&a[n],o))}}return e}function PR(n,e,t){return Ql(n)?n(e,t):n}const z7=(n,e)=>n===!0?e:typeof n=="string"?Xl(e,n):void 0;function W7(n,e,t,i,s){for(const r of e){const a=z7(t,r);if(a){n.add(a);const o=PR(a._fallback,t,s);if(typeof o<"u"&&o!==t&&o!==i)return o}else if(a===!1&&typeof i<"u"&&t!==i)return null}return!1}function KS(n,e,t,i){const s=e._rootScopes,r=PR(e._fallback,t,i),a=[...n,...s],o=new Set;o.add(i);let l=DE(o,a,t,r||t,i);return l===null||typeof r<"u"&&r!==t&&(l=DE(o,a,r,l,i),l===null)?!1:YS(Array.from(o),[""],s,r,()=>V7(e,t,i))}function DE(n,e,t,i,s){for(;t;)t=W7(n,e,t,i,s);return t}function V7(n,e,t){const i=n._getTarget();e in i||(i[e]={});const s=i[e];return ei(s)&&sn(t)?t:s||{}}function G7(n,e,t,i){let s;for(const r of e)if(s=NR(B7(r,n),t),typeof s<"u")return qS(n,s)?KS(t,i,n,s):s}function NR(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function OE(n){let e=n._keys;return e||(e=n._keys=Y7(n._scopes)),e}function Y7(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function DR(n,e,t,i){const{iScale:s}=n,{key:r="r"}=this._parsing,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+t,u=e[c],a[o]={r:s.parse(Xl(u,r),c)};return a}const q7=Number.EPSILON||1e-14,Bd=(n,e)=>e<n.length&&!n[e].skip&&n[e],OR=n=>n==="x"?"y":"x";function K7(n,e,t,i){const s=n.skip?e:n,r=e,a=t.skip?e:t,o=Db(r,s),l=Db(a,r);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:r.x-d*(a.x-s.x),y:r.y-d*(a.y-s.y)},next:{x:r.x+h*(a.x-s.x),y:r.y+h*(a.y-s.y)}}}function X7(n,e,t){const i=n.length;let s,r,a,o,l,c=Bd(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Bd(n,u+1),!(!l||!c)){if(mf(e[u],0,q7)){t[u]=t[u+1]=0;continue}s=t[u]/e[u],r=t[u+1]/e[u],o=Math.pow(s,2)+Math.pow(r,2),!(o<=9)&&(a=3/Math.sqrt(o),t[u]=s*a*e[u],t[u+1]=r*a*e[u])}}function Q7(n,e,t="x"){const i=OR(t),s=n.length;let r,a,o,l=Bd(n,0);for(let c=0;c<s;++c){if(a=o,o=l,l=Bd(n,c+1),!o)continue;const u=o[t],d=o[i];a&&(r=(u-a[t])/3,o[`cp1${t}`]=u-r,o[`cp1${i}`]=d-r*e[c]),l&&(r=(l[t]-u)/3,o[`cp2${t}`]=u+r,o[`cp2${i}`]=d+r*e[c])}}function J7(n,e="x"){const t=OR(e),i=n.length,s=Array(i).fill(0),r=Array(i);let a,o,l,c=Bd(n,0);for(a=0;a<i;++a)if(o=l,l=c,c=Bd(n,a+1),!!l){if(c){const u=c[e]-l[e];s[a]=u!==0?(c[t]-l[t])/u:0}r[a]=o?c?Ya(s[a-1])!==Ya(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}X7(n,s,r),Q7(n,r,e)}function Kg(n,e,t){return Math.max(Math.min(n,t),e)}function Z7(n,e){let t,i,s,r,a,o=Io(n[0],e);for(t=0,i=n.length;t<i;++t)a=r,r=o,o=t<i-1&&Io(n[t+1],e),r&&(s=n[t],a&&(s.cp1x=Kg(s.cp1x,e.left,e.right),s.cp1y=Kg(s.cp1y,e.top,e.bottom)),o&&(s.cp2x=Kg(s.cp2x,e.left,e.right),s.cp2y=Kg(s.cp2y,e.top,e.bottom)))}function eU(n,e,t,i,s){let r,a,o,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")J7(n,s);else{let c=i?n[n.length-1]:n[0];for(r=0,a=n.length;r<a;++r)o=n[r],l=K7(c,o,n[Math.min(r+1,a-(i?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,c=o}e.capBezierPoints&&Z7(n,t)}function XS(){return typeof window<"u"&&typeof document<"u"}function QS(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function B0(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const Hy=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function tU(n,e){return Hy(n).getPropertyValue(e)}const nU=["top","right","bottom","left"];function Kc(n,e,t){const i={};t=t?"-"+t:"";for(let s=0;s<4;s++){const r=nU[s];i[r]=parseFloat(n[e+"-"+r+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const iU=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function sU(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:s,offsetY:r}=i;let a=!1,o,l;if(iU(s,r,n.target))o=s,l=r;else{const c=e.getBoundingClientRect();o=i.clientX-c.left,l=i.clientY-c.top,a=!0}return{x:o,y:l,box:a}}function Ic(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,s=Hy(t),r=s.boxSizing==="border-box",a=Kc(s,"padding"),o=Kc(s,"border","width"),{x:l,y:c,box:u}=sU(n,t),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:f,height:p}=e;return r&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-d)/f*t.width/i),y:Math.round((c-h)/p*t.height/i)}}function rU(n,e,t){let i,s;if(e===void 0||t===void 0){const r=n&&QS(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const a=r.getBoundingClientRect(),o=Hy(r),l=Kc(o,"border","width"),c=Kc(o,"padding");e=a.width-c.width-l.width,t=a.height-c.height-l.height,i=B0(o.maxWidth,r,"clientWidth"),s=B0(o.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:i||F0,maxHeight:s||F0}}const Xg=n=>Math.round(n*10)/10;function aU(n,e,t,i){const s=Hy(n),r=Kc(s,"margin"),a=B0(s.maxWidth,n,"clientWidth")||F0,o=B0(s.maxHeight,n,"clientHeight")||F0,l=rU(n,e,t);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const h=Kc(s,"border","width"),f=Kc(s,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=Xg(Math.min(c,a,l.maxWidth)),u=Xg(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Xg(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Xg(Math.floor(u*i))),{width:c,height:u}}function ME(n,e,t){const i=e||1,s=Math.floor(n.height*i),r=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const a=n.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||a.height!==s||a.width!==r?(n.currentDevicePixelRatio=i,a.height=s,a.width=r,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const oU=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};XS()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function FE(n,e){const t=tU(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Rc(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function lU(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function cU(n,e,t,i){const s={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},a=Rc(n,s,t),o=Rc(s,r,t),l=Rc(r,e,t),c=Rc(a,o,t),u=Rc(o,l,t);return Rc(c,u,t)}const uU=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},dU=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function wd(n,e,t){return n?uU(e,t):dU()}function MR(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function FR(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function jR(n){return n==="angle"?{between:np,compare:h7,normalize:mr}:{between:ko,compare:(e,t)=>e-t,normalize:e=>e}}function jE({start:n,end:e,count:t,loop:i,style:s}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:s}}function hU(n,e,t){const{property:i,start:s,end:r}=t,{between:a,normalize:o}=jR(i),l=e.length;let{start:c,end:u,loop:d}=n,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&a(o(e[c%l][i]),s,r);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function BR(n,e,t){if(!t)return[n];const{property:i,start:s,end:r}=t,a=e.length,{compare:o,between:l,normalize:c}=jR(i),{start:u,end:d,loop:h,style:f}=hU(n,e,t),p=[];let m=!1,v=null,y,b,x;const _=()=>l(s,x,y)&&o(s,x)!==0,T=()=>o(r,y)===0||l(r,x,y),C=()=>m||_(),L=()=>!m||T();for(let k=u,M=u;k<=d;++k)b=e[k%a],!b.skip&&(y=c(b[i]),y!==x&&(m=l(y,s,r),v===null&&C()&&(v=o(y,s)===0?k:M),v!==null&&L()&&(p.push(jE({start:v,end:k,loop:h,count:a,style:f})),v=null),M=k,x=y));return v!==null&&p.push(jE({start:v,end:d,loop:h,count:a,style:f})),p}function UR(n,e){const t=[],i=n.segments;for(let s=0;s<i.length;s++){const r=BR(i[s],n.points,e);r.length&&t.push(...r)}return t}function fU(n,e,t,i){let s=0,r=e-1;if(t&&!i)for(;s<e&&!n[s].skip;)s++;for(;s<e&&n[s].skip;)s++;for(s%=e,t&&(r+=s);r>s&&n[r%e].skip;)r--;return r%=e,{start:s,end:r}}function pU(n,e,t,i){const s=n.length,r=[];let a=e,o=n[e],l;for(l=e+1;l<=t;++l){const c=n[l%s];c.skip||c.stop?o.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=a=c.stop?l:null):(a=l,o.skip&&(e=l)),o=c}return a!==null&&r.push({start:e%s,end:a%s,loop:i}),r}function gU(n,e){const t=n.points,i=n.options.spanGaps,s=t.length;if(!s)return[];const r=!!n._loop,{start:a,end:o}=fU(t,s,r,i);if(i===!0)return BE(n,[{start:a,end:o,loop:r}],t,e);const l=o<a?o+s:o,c=!!n._fullLoop&&a===0&&o===s-1;return BE(n,pU(t,a,l,c),t,e)}function BE(n,e,t,i){return!i||!i.setContext||!t?e:mU(n,e,t,i)}function mU(n,e,t,i){const s=n._chart.getContext(),r=UE(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,l=t.length,c=[];let u=r,d=e[0].start,h=d;function f(p,m,v,y){const b=o?-1:1;if(p!==m){for(p+=l;t[p%l].skip;)p-=b;for(;t[m%l].skip;)m+=b;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:v,style:y}),u=y,d=m%l)}}for(const p of e){d=o?d:p.start;let m=t[d%l],v;for(h=d+1;h<=p.end;h++){const y=t[h%l];v=UE(i.setContext(oc(s,{type:"segment",p0:m,p1:y,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),yU(v,u)&&f(d,h-1,p.loop,u),m=y,u=v}d<h-1&&f(d,h-1,p.loop,u)}return c}function UE(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function yU(n,e){if(!e)return!1;const t=[],i=function(s,r){return VS(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,i)!==JSON.stringify(e,i)}function Qg(n,e,t){return n.options.clip?n[t]:e[t]}function vU(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Qg(t,e,"left"),right:Qg(t,e,"right"),top:Qg(i,e,"top"),bottom:Qg(i,e,"bottom")}:e}function $R(n,e){const t=e._clip;if(t.disabled)return!1;const i=vU(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class xU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,s){const r=t.listeners[s],a=t.duration;r.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(i-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=_R.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let a=r.length-1,o=!1,l;for(;a>=0;--a)l=r[a],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var yo=new xU;const $E="transparent",bU={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=RE(n||$E),s=i.valid&&RE(e||$E);return s&&s.valid?s.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class SU{constructor(e,t,i,s){const r=t[i];s=Jh([e.to,s,r,e.from]);const a=Jh([e.from,r,s]);this._active=!0,this._fn=e.fn||bU[e.type||typeof a],this._easing=yf[e.easing]||yf.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,a=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Jh([e.to,t,s,e.from]),this._from=Jh([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,s=this._prop,r=this._from,a=this._loop,o=this._to;let l;if(this._active=r!==o&&(a||t<i),!this._active){this._target[s]=o,this._notify(!0);return}if(t<0){this._target[s]=r;return}l=t/i%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][t]()}}class HR{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!sn(e))return;const t=Object.keys(ti.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!sn(r))return;const a={};for(const o of t)a[o]=r[o];(ei(r.properties)&&r.properties||[s]).forEach(o=>{(o===s||!i.has(o))&&i.set(o,a)})})}_animateOptions(e,t){const i=t.options,s=_U(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&wU(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,t){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,t));continue}const u=t[c];let d=r[c];const h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,o);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}r[c]=d=new SU(h,e,c,u),s.push(d)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return yo.add(this._chart,i),!0}}function wU(n,e){const t=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=n[i[s]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function _U(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function HE(n,e){const t=n&&n.options||{},i=t.reverse,s=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function EU(n,e,t){if(t===!1)return!1;const i=HE(n,t),s=HE(e,t);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function TU(n){let e,t,i,s;return sn(n)?(e=n.top,t=n.right,i=n.bottom,s=n.left):e=t=i=s=n,{top:e,right:t,bottom:i,left:s,disabled:n===!1}}function zR(n,e){const t=[],i=n._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)t.push(i[s].index);return t}function zE(n,e,t,i={}){const s=n.keys,r=i.mode==="single";let a,o,l,c;if(e===null)return;let u=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===t){if(u=!0,i.all)continue;break}c=n.values[l],mi(c)&&(r||e===0||Ya(e)===Ya(c))&&(e+=c)}return!u&&!i.all?0:e}function AU(n,e){const{iScale:t,vScale:i}=e,s=t.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[s]:u,[r]:n[u]};return o}function L1(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function LU(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function kU(n){const{min:e,max:t,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function CU(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function WE(n,e,t,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=n[s.index];if(t&&r>0||!t&&r<0)return s.index}return null}function VE(n,e){const{chart:t,_cachedMeta:i}=n,s=t._stacks||(t._stacks={}),{iScale:r,vScale:a,index:o}=i,l=r.axis,c=a.axis,u=LU(r,a,i),d=e.length;let h;for(let f=0;f<d;++f){const p=e[f],{[l]:m,[c]:v}=p,y=p._stacks||(p._stacks={});h=y[c]=CU(s,u,m),h[o]=v,h._top=WE(h,a,!0,i.type),h._bottom=WE(h,a,!1,i.type);const b=h._visualValues||(h._visualValues={});b[o]=v}}function k1(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function IU(n,e){return oc(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function RU(n,e,t){return oc(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Mh(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][t]===void 0)return;delete r[i][t],r[i]._visualValues!==void 0&&r[i]._visualValues[t]!==void 0&&delete r[i]._visualValues[t]}}}const C1=n=>n==="reset"||n==="none",GE=(n,e)=>e?n:Object.assign({},n),PU=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:zR(t,!0),values:null};class ga{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=L1(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Mh(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),s=(d,h,f,p)=>d==="x"?h:d==="r"?p:f,r=t.xAxisID=Ht(i.xAxisID,k1(e,"x")),a=t.yAxisID=Ht(i.yAxisID,k1(e,"y")),o=t.rAxisID=Ht(i.rAxisID,k1(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,r,a,o),u=t.vAxisID=s(l,a,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&kE(this._data,this),e._stacked&&Mh(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(sn(t)){const s=this._cachedMeta;this._data=AU(t,s)}else if(i!==t){if(i){kE(i,this);const s=this._cachedMeta;Mh(s),s._parsed=[]}t&&Object.isExtensible(t)&&m7(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=t._stacked;t._stacked=L1(t.vScale,t),t.stack!==i.stack&&(s=!0,Mh(t),t.stack=i.stack),this._resyncElements(e),(s||r!==t._stacked)&&(VE(this,t._parsed),t._stacked=L1(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:a}=i,o=r.axis;let l=e===0&&t===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,h;if(this._parsing===!1)i._parsed=s,i._sorted=!0,h=s;else{ei(s[e])?h=this.parseArrayData(i,s,e,t):sn(s[e])?h=this.parseObjectData(i,s,e,t):h=this.parsePrimitiveData(i,s,e,t);const f=()=>d[o]===null||c&&d[o]<c[o];for(u=0;u<t;++u)i._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),c=d);i._sorted=l}a&&VE(this,h)}parsePrimitiveData(e,t,i,s){const{iScale:r,vScale:a}=e,o=r.axis,l=a.axis,c=r.getLabels(),u=r===a,d=new Array(s);let h,f,p;for(h=0,f=s;h<f;++h)p=h+i,d[h]={[o]:u||r.parse(c[p],p),[l]:a.parse(t[p],p)};return d}parseArrayData(e,t,i,s){const{xScale:r,yScale:a}=e,o=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+i,d=t[u],o[l]={x:r.parse(d[0],u),y:a.parse(d[1],u)};return o}parseObjectData(e,t,i,s){const{xScale:r,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,d,h,f;for(u=0,d=s;u<d;++u)h=u+i,f=t[h],c[u]={x:r.parse(Xl(f,o),h),y:a.parse(Xl(f,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const s=this.chart,r=this._cachedMeta,a=t[e.axis],o={keys:zR(s,!0),values:t._stacks[e.axis]._visualValues};return zE(o,a,r.index,{mode:i})}updateRangeFromParsed(e,t,i,s){const r=i[t.axis];let a=r===null?NaN:r;const o=s&&i._stacks[t.axis];s&&o&&(s.values=o,a=zE(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,a=s.length,o=this._getOtherScale(e),l=PU(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=kU(o);let h,f;function p(){f=s[h];const m=f[o.axis];return!mi(f[e.axis])||u>m||d<m}for(h=0;h<a&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),r));++h);if(r){for(h=a-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let s,r,a;for(s=0,r=t.length;s<r;++s)a=t[s][e.axis],mi(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,s=t.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=TU(Ht(this.options.clip,EU(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,s=i.data||[],r=t.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||s.length-o,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,o,l),u=o;u<o+l;++u){const d=s[u];d.hidden||(d.active&&c?a.push(d):d.draw(e,r))}for(u=0;u<a.length;++u)a[u].draw(e,r)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];r=a.$context||(a.$context=RU(this.getContext(),e,a)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=IU(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const s=t==="active",r=this._cachedDataOpts,a=e+"-"+t,o=r[a],l=this.enableOptionSharing&&tp(i);if(o)return GE(o,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(ti.elements[e]),p=()=>this.getContext(i,s,t),m=c.resolveNamedOptions(h,f,p,d);return m.$shared&&(m.$shared=l,r[a]=Object.freeze(GE(m,l))),m}_resolveAnimations(e,t,i){const s=this.chart,r=this._cachedDataOpts,a=`animation-${t}`,o=r[a];if(o)return o;let l;if(s.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,t),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,i,t))}const c=new HR(s,l&&l.animations);return l&&l._cacheable&&(r[a]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||C1(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),s=this._sharedOptions,r=this.getSharedOptions(i),a=this.includeOptions(t,r)||r!==s;return this.updateSharedOptions(r,t,i),{sharedOptions:r,includeOptions:a}}updateElement(e,t,i,s){C1(s)?Object.assign(e,i):this._resolveAnimations(t,s).update(e,i)}updateSharedOptions(e,t,i){e&&!C1(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,s){e.active=s;const r=this.getStyle(t,s);this._resolveAnimations(t,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[o,l,c]of this._syncList)this[o](l,c);this._syncList=[];const s=i.length,r=t.length,a=Math.min(r,s);a&&this.parse(0,a),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,t,i=!0){const s=this._cachedMeta,r=s.data,a=e+t;let o;const l=c=>{for(c.length+=t,o=c.length-1;o>=a;o--)c[o]=c[o-t]};for(l(r),o=e;o<a;++o)r[o]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),i&&this.updateElements(r,e,t,"reset")}updateElements(e,t,i,s){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,t);i._stacked&&Mh(i,s)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,s]=e;this[t](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ge(ga,"defaults",{}),Ge(ga,"datasetElementType",null),Ge(ga,"dataElementType",null);function NU(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=t.length;s<r;s++)i=i.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=wR(i.sort((s,r)=>s-r))}return n._cache.$bar}function DU(n){const e=n.iScale,t=NU(e,n.type);let i=e._length,s,r,a,o;const l=()=>{a===32767||a===-32768||(tp(o)&&(i=Math.min(i,Math.abs(a-o)||i)),o=a)};for(s=0,r=t.length;s<r;++s)a=e.getPixelForValue(t[s]),l();for(o=void 0,s=0,r=e.ticks.length;s<r;++s)a=e.getPixelForTick(s),l();return i}function OU(n,e,t,i){const s=t.barThickness;let r,a;return en(s)?(r=e.min*t.categoryPercentage,a=t.barPercentage):(r=s*i,a=1),{chunk:r/i,ratio:a,start:e.pixels[n]-r/2}}function MU(n,e,t,i){const s=e.pixels,r=s[n];let a=n>0?s[n-1]:null,o=n<s.length-1?s[n+1]:null;const l=t.categoryPercentage;a===null&&(a=r-(o===null?e.end-e.start:o-r)),o===null&&(o=r+r-a);const c=r-(r-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:t.barPercentage,start:c}}function FU(n,e,t,i){const s=t.parse(n[0],i),r=t.parse(n[1],i),a=Math.min(s,r),o=Math.max(s,r);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:a,max:o}}function WR(n,e,t,i){return ei(n)?FU(n,e,t,i):e[t.axis]=t.parse(n,i),e}function YE(n,e,t,i){const s=n.iScale,r=n.vScale,a=s.getLabels(),o=s===r,l=[];let c,u,d,h;for(c=t,u=t+i;c<u;++c)h=e[c],d={},d[s.axis]=o||s.parse(a[c],c),l.push(WR(h,d,r,c));return l}function I1(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function jU(n,e,t){return n!==0?Ya(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function BU(n){let e,t,i,s,r;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:t,end:i,reverse:e,top:s,bottom:r}}function UU(n,e,t,i){let s=e.borderSkipped;const r={};if(!s){n.borderSkipped=r;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:c,bottom:u}=BU(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?s=c:(t._bottom||0)===i?s=u:(r[qE(u,a,o,l)]=!0,s=c)),r[qE(s,a,o,l)]=!0,n.borderSkipped=r}function qE(n,e,t,i){return i?(n=$U(n,e,t),n=KE(n,t,e)):n=KE(n,e,t),n}function $U(n,e,t){return n===e?t:n===t?e:n}function KE(n,e,t){return n==="start"?e:n==="end"?t:n}function HU(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class xf extends ga{parsePrimitiveData(e,t,i,s){return YE(e,t,i,s)}parseArrayData(e,t,i,s){return YE(e,t,i,s)}parseObjectData(e,t,i,s){const{iScale:r,vScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?o:l,u=a.axis==="x"?o:l,d=[];let h,f,p,m;for(h=i,f=i+s;h<f;++h)m=t[h],p={},p[r.axis]=r.parse(Xl(m,c),h),d.push(WR(Xl(m,u),p,a,h));return d}updateRangeFromParsed(e,t,i,s){super.updateRangeFromParsed(e,t,i,s);const r=i._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:s}=t,r=this.getParsed(e),a=r._custom,o=I1(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,s){const r=s==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),c=o.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:h}=this._getSharedOptions(t,s);for(let f=t;f<t+i;f++){const p=this.getParsed(f),m=r||en(p[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),v=this._calculateBarIndexPixels(f,u),y=(p._stacks||{})[o.axis],b={horizontal:c,base:m.base,enableBorderRadius:!y||I1(p._custom)||a===y._top||a===y._bottom,x:c?m.head:v.center,y:c?v.center:m.head,height:c?v.size:Math.abs(m.size),width:c?Math.abs(m.size):v.size};h&&(b.options=d||this.resolveDataElementOptions(f,e[f].active?"active":s));const x=b.options||e[f].options;UU(b,x,y,a),HU(b,x,u.ratio),this.updateElement(e[f],f,b,s)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=i.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(t),l=o&&o[i.axis],c=u=>{const d=u._parsed.find(f=>f[i.axis]===l),h=d&&d[u.vScale.axis];if(en(h)||isNaN(h))return!0};for(const u of s)if(!(t!==void 0&&c(u))&&((r===!1||a.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,i){const s=this._getStacks(e,i),r=t!==void 0?s.indexOf(t):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,s=[];let r,a;for(r=0,a=t.data.length;r<a;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const o=e.barThickness;return{min:o||DU(t),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:s},options:{base:r,minBarLength:a}}=this,o=r||0,l=this.getParsed(e),c=l._custom,u=I1(c);let d=l[t.axis],h=0,f=i?this.applyStack(t,l,i):d,p,m;f!==d&&(h=f-d,f=d),u&&(d=c.barStart,f=c.barEnd-c.barStart,d!==0&&Ya(d)!==Ya(c.barEnd)&&(h=0),h+=d);const v=!en(r)&&!u?r:h;let y=t.getPixelForValue(v);if(this.chart.getDataVisibility(e)?p=t.getPixelForValue(h+f):p=y,m=p-y,Math.abs(m)<a){m=jU(m,t,o)*a,d===o&&(y-=m/2);const b=t.getPixelForDecimal(0),x=t.getPixelForDecimal(1),_=Math.min(b,x),T=Math.max(b,x);y=Math.max(Math.min(y,T),_),p=y+m,i&&!u&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(p)-t.getValueForPixel(y))}if(y===t.getPixelForValue(o)){const b=Ya(m)*t.getLineWidthForValue(o)/2;y+=b,m-=b}return{size:m,base:y,head:p,center:p+m/2}}_calculateBarIndexPixels(e,t){const i=t.scale,s=this.options,r=s.skipNull,a=Ht(s.maxBarThickness,1/0);let o,l;if(t.grouped){const c=r?this._getStackCount(e):t.stackCount,u=s.barThickness==="flex"?MU(e,t,s,c):OU(e,t,s,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);o=u.start+u.chunk*d+u.chunk/2,l=Math.min(a,u.chunk*u.ratio)}else o=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(a,t.min*t.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[t.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}Ge(xf,"id","bar"),Ge(xf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ge(xf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Hm extends ga{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,i,s){const r=super.parsePrimitiveData(e,t,i,s);for(let a=0;a<r.length;a++)r[a]._custom=this.resolveDataElementOptions(a+i).radius;return r}parseArrayData(e,t,i,s){const r=super.parseArrayData(e,t,i,s);for(let a=0;a<r.length;a++){const o=t[i+a];r[a]._custom=Ht(o[2],this.resolveDataElementOptions(a+i).radius)}return r}parseObjectData(e,t,i,s){const r=super.parseObjectData(e,t,i,s);for(let a=0;a<r.length;a++){const o=t[i+a];r[a]._custom=Ht(o&&o.r&&+o.r,this.resolveDataElementOptions(a+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,a=this.getParsed(e),o=s.getLabelForValue(a.x),l=r.getLabelForValue(a.y),c=a._custom;return{label:i[e]||"",value:"("+o+", "+l+(c?", "+c:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(t,s),u=a.axis,d=o.axis;for(let h=t;h<t+i;h++){const f=e[h],p=!r&&this.getParsed(h),m={},v=m[u]=r?a.getPixelForDecimal(.5):a.getPixelForValue(p[u]),y=m[d]=r?o.getBasePixel():o.getPixelForValue(p[d]);m.skip=isNaN(v)||isNaN(y),c&&(m.options=l||this.resolveDataElementOptions(h,f.active?"active":s),r&&(m.options.radius=0)),this.updateElement(f,h,m,s)}}resolveDataElementOptions(e,t){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return t!=="active"&&(s.radius=0),s.radius+=Ht(i&&i._custom,r),s}}Ge(Hm,"id","bubble"),Ge(Hm,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ge(Hm,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function zU(n,e,t){let i=1,s=1,r=0,a=0;if(e<Gn){const o=n,l=o+e,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),f=(x,_,T)=>np(x,o,l,!0)?1:Math.max(_,_*t,T,T*t),p=(x,_,T)=>np(x,o,l,!0)?-1:Math.min(_,_*t,T,T*t),m=f(0,c,d),v=f(Ci,u,h),y=p(Yn,c,d),b=p(Yn+Ci,u,h);i=(m-y)/2,s=(v-b)/2,r=-(m+y)/2,a=-(v+b)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:a}}class $c extends ga{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(sn(i[e])){const{key:l="value"}=this._parsing;r=c=>+Xl(i[c],l)}let a,o;for(a=e,o=e+t;a<o;++a)s._parsed[a]=r(a)}}_getRotation(){return da(this.options.rotation-90)}_getCircumference(){return da(this.options.circumference)}_getRotationExtents(){let e=Gn,t=-Gn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),a=s._getCircumference();e=Math.min(e,r),t=Math.max(t,r+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,s=this._cachedMeta,r=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(t7(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:h,ratioY:f,offsetX:p,offsetY:m}=zU(d,u,l),v=(i.width-a)/h,y=(i.height-a)/f,b=Math.max(Math.min(v,y)/2,0),x=yR(this.options.radius,b),_=Math.max(x*l,0),T=(x-_)/this._getVisibleDatasetWeightTotal();this.offsetX=p*x,this.offsetY=m*x,s.total=this.calculateTotal(),this.outerRadius=x-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/Gn)}updateElements(e,t,i,s){const r=s==="reset",a=this.chart,o=a.chartArea,c=a.options.animation,u=(o.left+o.right)/2,d=(o.top+o.bottom)/2,h=r&&c.animateScale,f=h?0:this.innerRadius,p=h?0:this.outerRadius,{sharedOptions:m,includeOptions:v}=this._getSharedOptions(t,s);let y=this._getRotation(),b;for(b=0;b<t;++b)y+=this._circumference(b,r);for(b=t;b<t+i;++b){const x=this._circumference(b,r),_=e[b],T={x:u+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+x,circumference:x,outerRadius:p,innerRadius:f};v&&(T.options=m||this.resolveDataElementOptions(b,_.active?"active":s)),y+=x,this.updateElement(_,b,T,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,s;for(s=0;s<t.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Gn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Mp(t._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const i=this.chart;let s,r,a,o,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),e=a.data,o=a.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=o.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(Ht(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ge($c,"id","doughnut"),Ge($c,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ge($c,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ge($c,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,a)=>{const l=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});class zm extends ga{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=t,a=this.chart._animationsDisabled;let{start:o,count:l}=TR(t,s,a);this._drawStart=o,this._drawCount=l,AR(t)&&(o=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:c},e),this.updateElements(s,o,l,e)}updateElements(e,t,i,s){const r=s==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,s),h=a.axis,f=o.axis,{spanGaps:p,segment:m}=this.options,v=Fd(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||s==="none",b=t+i,x=e.length;let _=t>0&&this.getParsed(t-1);for(let T=0;T<x;++T){const C=e[T],L=y?C:{};if(T<t||T>=b){L.skip=!0;continue}const k=this.getParsed(T),M=en(k[f]),D=L[h]=a.getPixelForValue(k[h],T),I=L[f]=r||M?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,k,l):k[f],T);L.skip=isNaN(D)||isNaN(I)||M,L.stop=T>0&&Math.abs(k[h]-_[h])>v,m&&(L.parsed=k,L.raw=c.data[T]),d&&(L.options=u||this.resolveDataElementOptions(T,C.active?"active":s)),y||this.updateElement(C,T,L,s),_=k}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,i=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ge(zm,"id","line"),Ge(zm,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ge(zm,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class bf extends ga{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Mp(t._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,t,i,s){return DR.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,i=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(s/2,0),a=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),o=(r-a)/e.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,i,s){const r=s==="reset",a=this.chart,l=a.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,d=c.yCenter,h=c.getIndexAngle(0)-.5*Yn;let f=h,p;const m=360/this.countVisibleElements();for(p=0;p<t;++p)f+=this._computeAngle(p,s,m);for(p=t;p<t+i;p++){const v=e[p];let y=f,b=f+this._computeAngle(p,s,m),x=a.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=b,r&&(l.animateScale&&(x=0),l.animateRotate&&(y=b=h));const _={x:u,y:d,innerRadius:0,outerRadius:x,startAngle:y,endAngle:b,options:this.resolveDataElementOptions(p,v.active?"active":s)};this.updateElement(v,p,_,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,i){return this.chart.getDataVisibility(e)?da(this.resolveDataElementOptions(e,t).angle||i):0}}Ge(bf,"id","polarArea"),Ge(bf,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ge(bf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return t.labels.map((r,a)=>{const l=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Fb extends $c{}Ge(Fb,"id","pie"),Ge(Fb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Wm extends ga{getLabelAndValue(e){const t=this._cachedMeta.vScale,i=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(i[t.axis])}}parseObjectData(e,t,i,s){return DR.bind(this)(e,t,i,s)}update(e){const t=this._cachedMeta,i=t.dataset,s=t.data||[],r=t.iScale.getLabels();if(i.points=s,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===s.length,options:a};this.updateElement(i,void 0,o,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,i,s){const r=this._cachedMeta.rScale,a=s==="reset";for(let o=t;o<t+i;o++){const l=e[o],c=this.resolveDataElementOptions(o,l.active?"active":s),u=r.getPointPositionForValue(o,this.getParsed(o).r),d=a?r.xCenter:u.x,h=a?r.yCenter:u.y,f={x:d,y:h,angle:u.angle,skip:isNaN(d)||isNaN(h),options:c};this.updateElement(l,o,f,s)}}}Ge(Wm,"id","radar"),Ge(Wm,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ge(Wm,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Sf extends ga{getLabelAndValue(e){const t=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=t,a=this.getParsed(e),o=s.getLabelForValue(a.x),l=r.getLabelForValue(a.y);return{label:i[e]||"",value:"("+o+", "+l+")"}}update(e){const t=this._cachedMeta,{data:i=[]}=t,s=this.chart._animationsDisabled;let{start:r,count:a}=TR(t,i,s);if(this._drawStart=r,this._drawCount=a,AR(t)&&(r=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:l}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!l._decimated,o.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(o,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(i,r,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,i,s){const r=s==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(t,s),d=this.getSharedOptions(u),h=this.includeOptions(s,d),f=a.axis,p=o.axis,{spanGaps:m,segment:v}=this.options,y=Fd(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||s==="none";let x=t>0&&this.getParsed(t-1);for(let _=t;_<t+i;++_){const T=e[_],C=this.getParsed(_),L=b?T:{},k=en(C[p]),M=L[f]=a.getPixelForValue(C[f],_),D=L[p]=r||k?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,C,l):C[p],_);L.skip=isNaN(M)||isNaN(D)||k,L.stop=_>0&&Math.abs(C[f]-x[f])>y,v&&(L.parsed=C,L.raw=c.data[_]),h&&(L.options=d||this.resolveDataElementOptions(_,T.active?"active":s)),b||this.updateElement(T,_,L,s),x=C}this.updateSharedOptions(d,s,u)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let o=0;for(let l=t.length-1;l>=0;--l)o=Math.max(o,t[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!t.length)return s;const r=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,r,a)/2}}Ge(Sf,"id","scatter"),Ge(Sf,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ge(Sf,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var WU=Object.freeze({__proto__:null,BarController:xf,BubbleController:Hm,DoughnutController:$c,LineController:zm,PieController:Fb,PolarAreaController:bf,RadarController:Wm,ScatterController:Sf});function Sc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class JS{constructor(e){Ge(this,"options");this.options=e||{}}static override(e){Object.assign(JS.prototype,e)}init(){}formats(){return Sc()}parse(){return Sc()}format(){return Sc()}add(){return Sc()}diff(){return Sc()}startOf(){return Sc()}endOf(){return Sc()}}var VU={_date:JS};function GU(n,e,t,i){const{controller:s,data:r,_sorted:a}=n,o=s._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&r.length){const c=o._reversePixels?p7:Co;if(i){if(s._sharedOptions){const u=r[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(r,e,t-d),f=c(r,e,t+d);return{lo:h.lo,hi:f.hi}}}}else{const u=c(r,e,t);if(l){const{vScale:d}=s._cachedMeta,{_parsed:h}=n,f=h.slice(0,u.lo+1).reverse().findIndex(m=>!en(m[d.axis]));u.lo-=Math.max(0,f);const p=h.slice(u.hi).findIndex(m=>!en(m[d.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:r.length-1}}function zy(n,e,t,i,s){const r=n.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,l=r.length;o<l;++o){const{index:c,data:u}=r[o],{lo:d,hi:h}=GU(r[o],e,a,s);for(let f=d;f<=h;++f){const p=u[f];p.skip||i(p,c,f)}}}function YU(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,a=t?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(a,2))}}function R1(n,e,t,i,s){const r=[];return!s&&!n.isPointInArea(e)||zy(n,t,e,function(o,l,c){!s&&!Io(o,n.chartArea,0)||o.inRange(e.x,e.y,i)&&r.push({element:o,datasetIndex:l,index:c})},!0),r}function qU(n,e,t,i){let s=[];function r(a,o,l){const{startAngle:c,endAngle:u}=a.getProps(["startAngle","endAngle"],i),{angle:d}=bR(a,{x:e.x,y:e.y});np(d,c,u)&&s.push({element:a,datasetIndex:o,index:l})}return zy(n,t,e,r),s}function KU(n,e,t,i,s,r){let a=[];const o=YU(t);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(e.x,e.y,s);if(i&&!f)return;const p=u.getCenterPoint(s);if(!(!!r||n.isPointInArea(p))&&!f)return;const v=o(e,p);v<l?(a=[{element:u,datasetIndex:d,index:h}],l=v):v===l&&a.push({element:u,datasetIndex:d,index:h})}return zy(n,t,e,c),a}function P1(n,e,t,i,s,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!i?qU(n,e,t,s):KU(n,e,t,i,s,r)}function XE(n,e,t,i,s){const r=[],a=t==="x"?"inXRange":"inYRange";let o=!1;return zy(n,t,e,(l,c,u)=>{l[a]&&l[a](e[t],s)&&(r.push({element:l,datasetIndex:c,index:u}),o=o||l.inRange(e.x,e.y,s))}),i&&!o?[]:r}var XU={modes:{index(n,e,t,i){const s=Ic(e,n),r=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?R1(n,s,r,i,a):P1(n,s,r,!1,i,a),l=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const u=o[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){const s=Ic(e,n),r=t.axis||"xy",a=t.includeInvisible||!1;let o=t.intersect?R1(n,s,r,i,a):P1(n,s,r,!1,i,a);if(o.length>0){const l=o[0].datasetIndex,c=n.getDatasetMeta(l).data;o=[];for(let u=0;u<c.length;++u)o.push({element:c[u],datasetIndex:l,index:u})}return o},point(n,e,t,i){const s=Ic(e,n),r=t.axis||"xy",a=t.includeInvisible||!1;return R1(n,s,r,i,a)},nearest(n,e,t,i){const s=Ic(e,n),r=t.axis||"xy",a=t.includeInvisible||!1;return P1(n,s,r,t.intersect,i,a)},x(n,e,t,i){const s=Ic(e,n);return XE(n,s,"x",t.intersect,i)},y(n,e,t,i){const s=Ic(e,n);return XE(n,s,"y",t.intersect,i)}}};const VR=["left","top","right","bottom"];function Fh(n,e){return n.filter(t=>t.pos===e)}function QE(n,e){return n.filter(t=>VR.indexOf(t.pos)===-1&&t.box.axis===e)}function jh(n,e){return n.sort((t,i)=>{const s=e?i:t,r=e?t:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function QU(n){const e=[];let t,i,s,r,a,o;for(t=0,i=(n||[]).length;t<i;++t)s=n[t],{position:r,options:{stack:a,stackWeight:o=1}}=s,e.push({index:t,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&r+a,stackWeight:o});return e}function JU(n){const e={};for(const t of n){const{stack:i,pos:s,stackWeight:r}=t;if(!i||!VR.includes(s))continue;const a=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=r}return e}function ZU(n,e){const t=JU(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,a,o;for(r=0,a=n.length;r<a;++r){o=n[r];const{fullSize:l}=o.box,c=t[o.stack],u=c&&o.stackWeight/c.weight;o.horizontal?(o.width=u?u*i:l&&e.availableWidth,o.height=s):(o.width=i,o.height=u?u*s:l&&e.availableHeight)}return t}function e$(n){const e=QU(n),t=jh(e.filter(c=>c.box.fullSize),!0),i=jh(Fh(e,"left"),!0),s=jh(Fh(e,"right")),r=jh(Fh(e,"top"),!0),a=jh(Fh(e,"bottom")),o=QE(e,"x"),l=QE(e,"y");return{fullSize:t,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:Fh(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(a).concat(o)}}function JE(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function GR(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function t$(n,e,t,i){const{pos:s,box:r}=t,a=n.maxPadding;if(!sn(s)){t.size&&(n[s]-=t.size);const d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?r.height:r.width),t.size=d.size/d.count,n[s]+=t.size}r.getPadding&&GR(a,r.getPadding());const o=Math.max(0,e.outerWidth-JE(a,n,"left","right")),l=Math.max(0,e.outerHeight-JE(a,n,"top","bottom")),c=o!==n.w,u=l!==n.h;return n.w=o,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function n$(n){const e=n.maxPadding;function t(i){const s=Math.max(e[i]-n[i],0);return n[i]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function i$(n,e){const t=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{r[a]=Math.max(e[a],t[a])}),r}return i(n?["left","right"]:["top","bottom"])}function Zh(n,e,t,i){const s=[];let r,a,o,l,c,u;for(r=0,a=n.length,c=0;r<a;++r){o=n[r],l=o.box,l.update(o.width||e.w,o.height||e.h,i$(o.horizontal,e));const{same:d,other:h}=t$(e,t,o,i);c|=d&&s.length,u=u||h,l.fullSize||s.push(o)}return c&&Zh(s,e,t,i)||u}function Jg(n,e,t,i,s){n.top=t,n.left=e,n.right=e+i,n.bottom=t+s,n.width=i,n.height=s}function ZE(n,e,t,i){const s=t.padding;let{x:r,y:a}=e;for(const o of n){const l=o.box,c=i[o.stack]||{placed:0,weight:1},u=o.stackWeight/c.weight||1;if(o.horizontal){const d=e.w*u,h=c.size||l.height;tp(c.start)&&(a=c.start),l.fullSize?Jg(l,s.left,a,t.outerWidth-s.right-s.left,h):Jg(l,e.left+c.placed,a,d,h),c.start=a,c.placed+=d,a=l.bottom}else{const d=e.h*u,h=c.size||l.width;tp(c.start)&&(r=c.start),l.fullSize?Jg(l,r,s.top,h,t.outerHeight-s.bottom-s.top):Jg(l,r,e.top+c.placed,h,d),c.start=r,c.placed+=d,r=l.right}}e.x=r,e.y=a}var Cs={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const s=Ps(n.options.layout.padding),r=Math.max(e-s.width,0),a=Math.max(t-s.height,0),o=e$(n.boxes),l=o.vertical,c=o.horizontal;An(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,v)=>v.box.options&&v.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},s);GR(h,Ps(i));const f=Object.assign({maxPadding:h,w:r,h:a,x:s.left,y:s.top},s),p=ZU(l.concat(c),d);Zh(o.fullSize,f,d,p),Zh(l,f,d,p),Zh(c,f,d,p)&&Zh(l,f,d,p),n$(f),ZE(o.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,ZE(o.rightAndBottom,f,d,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},An(o.chartArea,m=>{const v=m.box;Object.assign(v,n.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class YR{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,s){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):i)}}isAttached(e){return!0}updateConfig(e){}}class s$ extends YR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Vm="$chartjs",r$={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},eT=n=>n===null||n==="";function a$(n,e){const t=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Vm]={initial:{height:i,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",eT(s)){const r=FE(n,"width");r!==void 0&&(n.width=r)}if(eT(i))if(n.style.height==="")n.height=n.width/(e||2);else{const r=FE(n,"height");r!==void 0&&(n.height=r)}return n}const qR=oU?{passive:!0}:!1;function o$(n,e,t){n&&n.addEventListener(e,t,qR)}function l$(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,qR)}function c$(n,e){const t=r$[n.type]||n.type,{x:i,y:s}=Ic(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function U0(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function u$(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||U0(o.addedNodes,i),a=a&&!U0(o.removedNodes,i);a&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function d$(n,e,t){const i=n.canvas,s=new MutationObserver(r=>{let a=!1;for(const o of r)a=a||U0(o.removedNodes,i),a=a&&!U0(o.addedNodes,i);a&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const sp=new Map;let tT=0;function KR(){const n=window.devicePixelRatio;n!==tT&&(tT=n,sp.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function h$(n,e){sp.size||window.addEventListener("resize",KR),sp.set(n,e)}function f$(n){sp.delete(n),sp.size||window.removeEventListener("resize",KR)}function p$(n,e,t){const i=n.canvas,s=i&&QS(i);if(!s)return;const r=ER((o,l)=>{const c=s.clientWidth;t(o,l),c<s.clientWidth&&t()},window),a=new ResizeObserver(o=>{const l=o[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return a.observe(s),h$(n,r),a}function N1(n,e,t){t&&t.disconnect(),e==="resize"&&f$(n)}function g$(n,e,t){const i=n.canvas,s=ER(r=>{n.ctx!==null&&t(c$(r,n))},n);return o$(i,e,s),s}class m$ extends YR{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(a$(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Vm])return!1;const i=t[Vm].initial;["height","width"].forEach(r=>{const a=i[r];en(a)?t.removeAttribute(r):t.setAttribute(r,a)});const s=i.style||{};return Object.keys(s).forEach(r=>{t.style[r]=s[r]}),t.width=t.width,delete t[Vm],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),a={attach:u$,detach:d$,resize:p$}[t]||g$;s[t]=a(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),s=i[t];if(!s)return;({attach:N1,detach:N1,resize:N1}[t]||l$)(e,t,s),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,s){return aU(e,t,i,s)}isAttached(e){const t=e&&QS(e);return!!(t&&t.isConnected)}}function y$(n){return!XS()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?s$:m$}class ya{constructor(){Ge(this,"x");Ge(this,"y");Ge(this,"active",!1);Ge(this,"options");Ge(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Fd(this.x)&&Fd(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}Ge(ya,"defaults",{}),Ge(ya,"defaultRoutes");function v$(n,e){const t=n.options.ticks,i=x$(n),s=Math.min(t.maxTicksLimit||i,i),r=t.major.enabled?S$(e):[],a=r.length,o=r[0],l=r[a-1],c=[];if(a>s)return w$(e,c,r,a/s),c;const u=b$(r,e,s);if(a>0){let d,h;const f=a>1?Math.round((l-o)/(a-1)):null;for(Zg(e,c,u,en(f)?0:o-f,o),d=0,h=a-1;d<h;d++)Zg(e,c,u,r[d],r[d+1]);return Zg(e,c,u,l,en(f)?e.length:l+f),c}return Zg(e,c,u),c}function x$(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(i,s))}function b$(n,e,t){const i=_$(n),s=e.length/t;if(!i)return Math.max(s,1);const r=c7(i);for(let a=0,o=r.length-1;a<o;a++){const l=r[a];if(l>s)return l}return Math.max(s,1)}function S$(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function w$(n,e,t,i){let s=0,r=t[0],a;for(i=Math.ceil(i),a=0;a<n.length;a++)a===r&&(e.push(n[a]),s++,r=t[s*i])}function Zg(n,e,t,i,s){const r=Ht(i,0),a=Math.min(Ht(s,n.length),n.length);let o=0,l,c,u;for(t=Math.ceil(t),s&&(l=s-i,t=l/Math.floor(l/t)),u=r;u<0;)o++,u=Math.round(r+o*t);for(c=Math.max(r,0);c<a;c++)c===u&&(e.push(n[c]),o++,u=Math.round(r+o*t))}function _$(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const E$=n=>n==="left"?"right":n==="right"?"left":n,nT=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,iT=(n,e)=>Math.min(e||n,n);function sT(n,e){const t=[],i=n.length/e,s=n.length;let r=0;for(;r<s;r+=i)t.push(n[Math.floor(r)]);return t}function T$(n,e,t){const i=n.ticks.length,s=Math.min(e,i-1),r=n._startPixel,a=n._endPixel,o=1e-6;let l=n.getPixelForTick(s),c;if(!(t&&(i===1?c=Math.max(l-r,a-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-o||l>a+o)))return l}function A$(n,e){An(n,t=>{const i=t.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete t.data[i[r]];i.splice(0,s)}})}function Bh(n){return n.drawTicks?n.tickLength:0}function rT(n,e){if(!n.display)return 0;const t=qi(n.font,e),i=Ps(n.padding);return(ei(n.text)?n.text.length:1)*t.lineHeight+i.height}function L$(n,e){return oc(n,{scale:e,type:"scale"})}function k$(n,e,t){return oc(n,{tick:t,index:e,type:"tick"})}function C$(n,e,t){let i=WS(n);return(t&&e!=="right"||!t&&e==="right")&&(i=E$(i)),i}function I$(n,e,t,i){const{top:s,left:r,bottom:a,right:o,chart:l}=n,{chartArea:c,scales:u}=l;let d=0,h,f,p;const m=a-s,v=o-r;if(n.isHorizontal()){if(f=Es(i,r,o),sn(t)){const y=Object.keys(t)[0],b=t[y];p=u[y].getPixelForValue(b)+m-e}else t==="center"?p=(c.bottom+c.top)/2+m-e:p=nT(n,t,e);h=o-r}else{if(sn(t)){const y=Object.keys(t)[0],b=t[y];f=u[y].getPixelForValue(b)-v+e}else t==="center"?f=(c.left+c.right)/2-v+e:f=nT(n,t,e);p=Es(i,a,s),d=t==="left"?-Ci:Ci}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}class gu extends ya{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:s}=this;return e=pr(e,Number.POSITIVE_INFINITY),t=pr(t,Number.NEGATIVE_INFINITY),i=pr(i,Number.POSITIVE_INFINITY),s=pr(s,Number.NEGATIVE_INFINITY),{min:pr(e,i),max:pr(t,s),minDefined:mi(e),maxDefined:mi(t)}}getMinMax(e){let{min:t,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),a;if(s&&r)return{min:t,max:i};const o=this.getMatchingVisibleMetas();for(let l=0,c=o.length;l<c;++l)a=o[l].controller.getMinMax(this,e),s||(t=Math.min(t,a.min)),r||(i=Math.max(i,a.max));return t=r&&t>i?i:t,i=s&&t>i?t:i,{min:pr(t,pr(i,t)),max:pr(i,pr(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$n(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:s,grace:r,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=j7(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?sT(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=v$(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$n(this.options.afterUpdate,[this])}beforeSetDimensions(){$n(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$n(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),$n(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$n(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=$n(t.callback,[r.value,i,e],this)}afterTickToLabelConversion(){$n(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$n(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=iT(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,r=t.maxRotation;let a=s,o,l,c;if(!this._isVisible()||!t.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=ss(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/i:f/(i-1),d+6>o&&(o=f/(i-(e.offset?.5:1)),l=this.maxHeight-Bh(e.grid)-t.padding-rT(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),a=HS(Math.min(Math.asin(ss((u.highest.height+6)/o,-1,1)),Math.asin(ss(l/c,-1,1))-Math.asin(ss(h/c,-1,1)))),a=Math.max(s,Math.min(r,a))),this.labelRotation=a}afterCalculateLabelRotation(){$n(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$n(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:s,grid:r}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=rT(s,t.options.font);if(o?(e.width=this.maxWidth,e.height=Bh(r)+l):(e.height=this.maxHeight,e.width=Bh(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,p=da(this.labelRotation),m=Math.cos(p),v=Math.sin(p);if(o){const y=i.mirror?0:v*d.width+m*h.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=i.mirror?0:m*d.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,v,m)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,s){const{ticks:{align:r,padding:a},position:o}=this.options,l=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=s*e.width,f=i*t.height):(h=i*e.height,f=s*t.width):r==="start"?f=t.width:r==="end"?h=e.width:r!=="inner"&&(h=e.width/2,f=t.width/2),this.paddingLeft=Math.max((h-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+a)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;r==="start"?(u=0,d=e.height):r==="end"&&(u=t.height,d=0),this.paddingTop=u+a,this.paddingBottom=d+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){$n(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)en(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=sT(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:s,_longestTextCache:r}=this,a=[],o=[],l=Math.floor(t/iT(t,i));let c=0,u=0,d,h,f,p,m,v,y,b,x,_,T;for(d=0;d<t;d+=l){if(p=e[d].label,m=this._resolveTickFontOptions(d),s.font=v=m.string,y=r[v]=r[v]||{data:{},gc:[]},b=m.lineHeight,x=_=0,!en(p)&&!ei(p))x=j0(s,y.data,y.gc,x,p),_=b;else if(ei(p))for(h=0,f=p.length;h<f;++h)T=p[h],!en(T)&&!ei(T)&&(x=j0(s,y.data,y.gc,x,T),_+=b);a.push(x),o.push(_),c=Math.max(x,c),u=Math.max(_,u)}A$(r,t);const C=a.indexOf(c),L=o.indexOf(u),k=M=>({width:a[M]||0,height:o[M]||0});return{first:k(0),last:k(t-1),widest:k(C),highest:k(L),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return f7(this._alignToPixels?bc(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=k$(this.getContext(),e,i))}return this.$context||(this.$context=L$(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=da(this.labelRotation),i=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),r=this._getLabelSizes(),a=e.autoSkipPadding||0,o=r?r.widest.width+a:0,l=r?r.highest.height+a:0;return this.isHorizontal()?l*i>o*s?o/i:l/s:l*s<o*i?l/i:o/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,s=this.options,{grid:r,position:a,border:o}=s,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Bh(r),f=[],p=o.setContext(this.getContext()),m=p.display?p.width:0,v=m/2,y=function(j){return bc(i,j,m)};let b,x,_,T,C,L,k,M,D,I,R,q;if(a==="top")b=y(this.bottom),L=this.bottom-h,M=b-v,I=y(e.top)+v,q=e.bottom;else if(a==="bottom")b=y(this.top),I=e.top,q=y(e.bottom)-v,L=b+v,M=this.top+h;else if(a==="left")b=y(this.right),C=this.right-h,k=b-v,D=y(e.left)+v,R=e.right;else if(a==="right")b=y(this.left),D=e.left,R=y(e.right)-v,C=b+v,k=this.left+h;else if(t==="x"){if(a==="center")b=y((e.top+e.bottom)/2+.5);else if(sn(a)){const j=Object.keys(a)[0],z=a[j];b=y(this.chart.scales[j].getPixelForValue(z))}I=e.top,q=e.bottom,L=b+v,M=L+h}else if(t==="y"){if(a==="center")b=y((e.left+e.right)/2);else if(sn(a)){const j=Object.keys(a)[0],z=a[j];b=y(this.chart.scales[j].getPixelForValue(z))}C=b-v,k=C-h,D=e.left,R=e.right}const Y=Ht(s.ticks.maxTicksLimit,d),ee=Math.max(1,Math.ceil(d/Y));for(x=0;x<d;x+=ee){const j=this.getContext(x),z=r.setContext(j),B=o.setContext(j),U=z.lineWidth,Q=z.color,re=B.dash||[],N=B.dashOffset,W=z.tickWidth,K=z.tickColor,Z=z.tickBorderDash||[],te=z.tickBorderDashOffset;_=T$(this,x,l),_!==void 0&&(T=bc(i,_,U),c?C=k=D=R=T:L=M=I=q=T,f.push({tx1:C,ty1:L,tx2:k,ty2:M,x1:D,y1:I,x2:R,y2:q,width:U,color:Q,borderDash:re,borderDashOffset:N,tickWidth:W,tickColor:K,tickBorderDash:Z,tickBorderDashOffset:te}))}return this._ticksLength=d,this._borderValue=b,f}_computeLabelItems(e){const t=this.axis,i=this.options,{position:s,ticks:r}=i,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,h=Bh(i.grid),f=h+u,p=d?-u:f,m=-da(this.labelRotation),v=[];let y,b,x,_,T,C,L,k,M,D,I,R,q="middle";if(s==="top")C=this.bottom-p,L=this._getXAxisLabelAlignment();else if(s==="bottom")C=this.top+p,L=this._getXAxisLabelAlignment();else if(s==="left"){const ee=this._getYAxisLabelAlignment(h);L=ee.textAlign,T=ee.x}else if(s==="right"){const ee=this._getYAxisLabelAlignment(h);L=ee.textAlign,T=ee.x}else if(t==="x"){if(s==="center")C=(e.top+e.bottom)/2+f;else if(sn(s)){const ee=Object.keys(s)[0],j=s[ee];C=this.chart.scales[ee].getPixelForValue(j)+f}L=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")T=(e.left+e.right)/2-f;else if(sn(s)){const ee=Object.keys(s)[0],j=s[ee];T=this.chart.scales[ee].getPixelForValue(j)}L=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(l==="start"?q="top":l==="end"&&(q="bottom"));const Y=this._getLabelSizes();for(y=0,b=o.length;y<b;++y){x=o[y],_=x.label;const ee=r.setContext(this.getContext(y));k=this.getPixelForTick(y)+r.labelOffset,M=this._resolveTickFontOptions(y),D=M.lineHeight,I=ei(_)?_.length:1;const j=I/2,z=ee.color,B=ee.textStrokeColor,U=ee.textStrokeWidth;let Q=L;a?(T=k,L==="inner"&&(y===b-1?Q=this.options.reverse?"left":"right":y===0?Q=this.options.reverse?"right":"left":Q="center"),s==="top"?c==="near"||m!==0?R=-I*D+D/2:c==="center"?R=-Y.highest.height/2-j*D+D:R=-Y.highest.height+D/2:c==="near"||m!==0?R=D/2:c==="center"?R=Y.highest.height/2-j*D:R=Y.highest.height-I*D,d&&(R*=-1),m!==0&&!ee.showLabelBackdrop&&(T+=D/2*Math.sin(m))):(C=k,R=(1-I)*D/2);let re;if(ee.showLabelBackdrop){const N=Ps(ee.backdropPadding),W=Y.heights[y],K=Y.widths[y];let Z=R-N.top,te=0-N.left;switch(q){case"middle":Z-=W/2;break;case"bottom":Z-=W;break}switch(L){case"center":te-=K/2;break;case"right":te-=K;break;case"inner":y===b-1?te-=K:y>0&&(te-=K/2);break}re={left:te,top:Z,width:K+N.width,height:W+N.height,color:ee.backdropColor}}v.push({label:_,font:M,textOffset:R,options:{rotation:m,color:z,strokeColor:B,strokeWidth:U,textAlign:Q,textBaseline:q,translation:[T,C],backdrop:re}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-da(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,a=this._getLabelSizes(),o=e+r,l=a.widest.width;let c,u;return t==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-o,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+o,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:s,width:r,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,s,r,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,a;const o=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(r=0,a=s.length;r<a;++r){const l=s[r];t.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),a=i.display?r.width:0;if(!a)return;const o=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=bc(e,this.left,a)-a/2,u=bc(e,this.right,o)+o/2,d=h=l):(d=bc(e,this.top,a)-a/2,h=bc(e,this.bottom,o)+o/2,c=u=l),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(c,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Uy(i,s);const r=this.getLabelItems(e);for(const a of r){const o=a.options,l=a.font,c=a.label,u=a.textOffset;cu(i,c,0,u,l,o)}s&&$y(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:s}}=this;if(!i.display)return;const r=qi(i.font),a=Ps(i.padding),o=i.align;let l=r.lineHeight/2;t==="bottom"||t==="center"||sn(t)?(l+=a.bottom,ei(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=a.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=I$(this,l,t,o);cu(e,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:h,textAlign:C$(o,t,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Ht(e.grid&&e.grid.z,-1),s=Ht(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==gu.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,a;for(r=0,a=t.length;r<a;++r){const o=t[r];o[i]===this.id&&(!e||o.type===e)&&s.push(o)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return qi(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class em{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;N$(t)&&(i=this.register(t));const s=this.items,r=e.id,a=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,R$(e,a,i),this.override&&ti.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,s=this.scope;i in t&&delete t[i],s&&i in ti[s]&&(delete ti[s][i],this.override&&delete lu[i])}}function R$(n,e,t){const i=ep(Object.create(null),[t?ti.get(t):{},ti.get(e),n.defaults]);ti.set(e,i),n.defaultRoutes&&P$(e,n.defaultRoutes),n.descriptors&&ti.describe(e,n.descriptors)}function P$(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),s=i.pop(),r=[n].concat(i).join("."),a=e[t].split("."),o=a.pop(),l=a.join(".");ti.route(r,s,l,o)})}function N$(n){return"id"in n&&"defaults"in n}class D${constructor(){this.controllers=new em(ga,"datasets",!0),this.elements=new em(ya,"elements"),this.plugins=new em(Object,"plugins"),this.scales=new em(gu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):An(s,a=>{const o=i||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,i){const s=$S(e);$n(i["before"+s],[],i),t[e](i),$n(i["after"+s],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Oa=new D$;class O${constructor(){this._init=[]}notify(e,t,i,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(r,e,t,i);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,i,s){s=s||{};for(const r of e){const a=r.plugin,o=a[i],l=[t,s,r.options];if($n(o,l,a)===!1&&s.cancelable)return!1}return!0}invalidate(){en(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,s=Ht(i.options&&i.options.plugins,{}),r=M$(i);return s===!1&&!t?[]:j$(e,r,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,s=(r,a)=>r.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(s(t,i),e,"stop"),this._notify(s(i,t),e,"start")}}function M$(n){const e={},t=[],i=Object.keys(Oa.plugins.items);for(let r=0;r<i.length;r++)t.push(Oa.getPlugin(i[r]));const s=n.plugins||[];for(let r=0;r<s.length;r++){const a=s[r];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function F$(n,e){return!e&&n===!1?null:n===!0?{}:n}function j$(n,{plugins:e,localIds:t},i,s){const r=[],a=n.getContext();for(const o of e){const l=o.id,c=F$(i[l],s);c!==null&&r.push({plugin:o,options:B$(n.config,{plugin:o,local:t[l]},c,a)})}return r}function B$(n,{plugin:e,local:t},i,s){const r=n.pluginScopeKeys(e),a=n.getOptionScopes(i,r);return t&&e.defaults&&a.push(e.defaults),n.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jb(n,e){const t=ti.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function U$(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function $$(n,e){return n===e?"_index_":"_value_"}function aT(n){if(n==="x"||n==="y"||n==="r")return n}function H$(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Bb(n,...e){if(aT(n))return n;for(const t of e){const i=t.axis||H$(t.position)||n.length>1&&aT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function oT(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function z$(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return oT(n,"x",t[0])||oT(n,"y",t[0])}return{}}function W$(n,e){const t=lu[n.type]||{scales:{}},i=e.scales||{},s=jb(n.type,e),r=Object.create(null);return Object.keys(i).forEach(a=>{const o=i[a];if(!sn(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=Bb(a,o,z$(a,n),ti.scales[o.type]),c=$$(l,s),u=t.scales||{};r[a]=gf(Object.create(null),[{axis:l},o,u[l],u[c]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,l=a.indexAxis||jb(o,e),u=(lu[o]||{}).scales||{};Object.keys(u).forEach(d=>{const h=U$(d,l),f=a[h+"AxisID"]||h;r[f]=r[f]||Object.create(null),gf(r[f],[{axis:h},i[f],u[d]])})}),Object.keys(r).forEach(a=>{const o=r[a];gf(o,[ti.scales[o.type],ti.scale])}),r}function XR(n){const e=n.options||(n.options={});e.plugins=Ht(e.plugins,{}),e.scales=W$(n,e)}function QR(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function V$(n){return n=n||{},n.data=QR(n.data),XR(n),n}const lT=new Map,JR=new Set;function tm(n,e){let t=lT.get(n);return t||(t=e(),lT.set(n,t),JR.add(t)),t}const Uh=(n,e,t)=>{const i=Xl(e,t);i!==void 0&&n.add(i)};class G${constructor(e){this._config=V$(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=QR(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),XR(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return tm(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return tm(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return tm(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return tm(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let s=i.get(e);return(!s||t)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,t,i){const{options:s,type:r}=this,a=this._cachedScopes(e,i),o=a.get(t);if(o)return o;const l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(d=>Uh(l,e,d))),u.forEach(d=>Uh(l,s,d)),u.forEach(d=>Uh(l,lu[r]||{},d)),u.forEach(d=>Uh(l,ti,d)),u.forEach(d=>Uh(l,Ob,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),JR.has(t)&&a.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,lu[t]||{},ti.datasets[t]||{},{type:t},ti,Ob]}resolveNamedOptions(e,t,i,s=[""]){const r={$shared:!0},{resolver:a,subPrefixes:o}=cT(this._resolverCache,e,s);let l=a;if(q$(a,t)){r.$shared=!1,i=Ql(i)?i():i;const c=this.createResolver(e,i,o);l=jd(a,i,c)}for(const c of t)r[c]=l[c];return r}createResolver(e,t,i=[""],s){const{resolver:r}=cT(this._resolverCache,e,i);return sn(t)?jd(r,t,void 0,s):r}}function cT(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const s=t.join();let r=i.get(s);return r||(r={resolver:YS(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},i.set(s,r)),r}const Y$=n=>sn(n)&&Object.getOwnPropertyNames(n).some(e=>Ql(n[e]));function q$(n,e){const{isScriptable:t,isIndexable:i}=IR(n);for(const s of e){const r=t(s),a=i(s),o=(a||r)&&n[s];if(r&&(Ql(o)||Y$(o))||a&&ei(o))return!0}return!1}var K$="4.4.9";const X$=["top","bottom","left","right","chartArea"];function uT(n,e){return n==="top"||n==="bottom"||X$.indexOf(n)===-1&&e==="x"}function dT(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function hT(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),$n(t&&t.onComplete,[n],e)}function Q$(n){const e=n.chart,t=e.options.animation;$n(t&&t.onProgress,[n],e)}function ZR(n){return XS()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Gm={},fT=n=>{const e=ZR(n);return Object.values(Gm).filter(t=>t.canvas===e).pop()};function J$(n,e,t){const i=Object.keys(n);for(const s of i){const r=+s;if(r>=e){const a=n[s];delete n[s],(t>0||r>e)&&(n[r+t]=a)}}}function Z$(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}var ml;let Xd=(ml=class{static register(...e){Oa.add(...e),pT()}static unregister(...e){Oa.remove(...e),pT()}constructor(e,t){const i=this.config=new G$(t),s=ZR(e),r=fT(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||y$(s)),this.platform.updateConfig(i);const o=this.platform.acquireContext(s,a.aspectRatio),l=o&&o.canvas,c=l&&l.height,u=l&&l.width;if(this.id=e7(),this.ctx=o,this.canvas=l,this.width=u,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new O$,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=y7(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],Gm[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}yo.listen(this,"complete",hT),yo.listen(this,"progress",Q$),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:s,_aspectRatio:r}=this;return en(e)?t&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Oa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ME(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return NE(this.canvas,this.ctx),this}stop(){return yo.stop(this),this}resize(e,t){yo.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,t,r),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,ME(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),$n(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};An(t,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,s=Object.keys(i).reduce((a,o)=>(a[o]=!1,a),{});let r=[];t&&(r=r.concat(Object.keys(t).map(a=>{const o=t[a],l=Bb(a,o),c=l==="r",u=l==="x";return{options:o,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),An(r,a=>{const o=a.options,l=o.id,c=Bb(l,o),u=Ht(o.type,a.dtype);(o.position===void 0||uT(o.position,c)!==uT(a.dposition))&&(o.position=a.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const h=Oa.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(o,e)}),An(s,(a,o)=>{a||delete i[o]}),An(i,a=>{Cs.configure(this,a,a.options),Cs.addBox(this,a)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>t){for(let s=t;s<i;++s)this._destroyDatasetMeta(s);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(dT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,s)=>{t.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=t.length;i<s;i++){const r=t[i];let a=this.getDatasetMeta(i);const o=r.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=o,a.indexAxis=r.indexAxis||jb(o,this.options),a.order=r.order||0,a.index=i,a.label=""+r.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const l=Oa.getController(o),{datasetElementType:c,dataElementType:u}=ti.datasets[o];Object.assign(l,{dataElementType:Oa.getElement(u),datasetElementType:c&&Oa.getElement(c)}),a.controller=new l(this,i),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){An(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!s&&r.indexOf(d)===-1;d.buildOrUpdateElements(h),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||An(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(dT("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){An(this.scales,e=>{Cs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!EE(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of t){const a=i==="_removeElements"?-r:r;J$(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=r=>new Set(e.filter(a=>a[0]===r).map((a,o)=>o+","+a.splice(1).join(","))),s=i(0);for(let r=1;r<t;r++)if(!EE(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Cs.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],An(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,Ql(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(yo.has(this)?this.attached&&!yo.running(this)&&yo.start(this):(this.draw(),hT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let s,r;for(s=0,r=t.length;s<r;++s){const a=t[s];(!e||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=$R(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Uy(t,s),e.controller.draw(),s&&$y(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Io(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,s){const r=XU.modes[t];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=oc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),a=r.controller._resolveAnimations(void 0,s);tp(t)?(r.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),a.update(r,{visible:i}),this.update(o=>o.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),yo.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),NE(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Gm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(r,a)=>{t.addEventListener(this,r,a),e[r]=a},s=(r,a,o)=>{r.offsetX=a,r.offsetY=o,this._eventHandler(r)};An(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(l,c)=>{t.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(t.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const o=()=>{s("attach",o),this.attached=!0,this.resize(),i("resize",r),i("detach",a)};a=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){An(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},An(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const s=i?"set":"remove";let r,a,o,l;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:r,index:a})=>{const o=this.getDatasetMeta(r);if(!o)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:o.data[a],index:a}});!O0(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),a=r(t,e),o=i?e:r(e,t);a.length&&this.updateHoverStyle(a,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:s=[],options:r}=this,a=t,o=this._getActiveElements(e,s,i,a),l=a7(e),c=Z$(e,this._lastEvent,i,l);i&&(this._lastEvent=null,$n(r.onHover,[e,o,this],this),l&&$n(r.onClick,[e,o,this],this));const u=!O0(o,s);return(u||t)&&(this._active=o,this._updateHoverStyles(o,s,t)),this._lastEvent=c,u}_getActiveElements(e,t,i,s){if(e.type==="mouseout")return[];if(!i)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}},Ge(ml,"defaults",ti),Ge(ml,"instances",Gm),Ge(ml,"overrides",lu),Ge(ml,"registry",Oa),Ge(ml,"version",K$),Ge(ml,"getChart",fT),ml);function pT(){return An(Xd.instances,n=>n._plugins.invalidate())}function e9(n,e,t){const{startAngle:i,pixelMargin:s,x:r,y:a,outerRadius:o,innerRadius:l}=e;let c=s/o;n.beginPath(),n.arc(r,a,o,i-c,t+c),l>s?(c=s/l,n.arc(r,a,l,t+c,i-c,!0)):n.arc(r,a,s,t+Ci,i-Ci),n.closePath(),n.clip()}function t9(n){return GS(n,["outerStart","outerEnd","innerStart","innerEnd"])}function n9(n,e,t,i){const s=t9(n.options.borderRadius),r=(t-e)/2,a=Math.min(r,i*e/2),o=l=>{const c=(t-Math.min(r,l))*i/2;return ss(l,0,Math.min(r,c))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:ss(s.innerStart,0,a),innerEnd:ss(s.innerEnd,0,a)}}function Wu(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function $0(n,e,t,i,s,r){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-c,0),h=u>0?u+i+t+c:0;let f=0;const p=s-l;if(i){const ee=u>0?u-i:0,j=d>0?d-i:0,z=(ee+j)/2,B=z!==0?p*z/(z+i):p;f=(p-B)/2}const m=Math.max(.001,p*d-t/Yn)/d,v=(p-m)/2,y=l+v+f,b=s-v-f,{outerStart:x,outerEnd:_,innerStart:T,innerEnd:C}=n9(e,h,d,b-y),L=d-x,k=d-_,M=y+x/L,D=b-_/k,I=h+T,R=h+C,q=y+T/I,Y=b-C/R;if(n.beginPath(),r){const ee=(M+D)/2;if(n.arc(a,o,d,M,ee),n.arc(a,o,d,ee,D),_>0){const U=Wu(k,D,a,o);n.arc(U.x,U.y,_,D,b+Ci)}const j=Wu(R,b,a,o);if(n.lineTo(j.x,j.y),C>0){const U=Wu(R,Y,a,o);n.arc(U.x,U.y,C,b+Ci,Y+Math.PI)}const z=(b-C/h+(y+T/h))/2;if(n.arc(a,o,h,b-C/h,z,!0),n.arc(a,o,h,z,y+T/h,!0),T>0){const U=Wu(I,q,a,o);n.arc(U.x,U.y,T,q+Math.PI,y-Ci)}const B=Wu(L,y,a,o);if(n.lineTo(B.x,B.y),x>0){const U=Wu(L,M,a,o);n.arc(U.x,U.y,x,y-Ci,M)}}else{n.moveTo(a,o);const ee=Math.cos(M)*d+a,j=Math.sin(M)*d+o;n.lineTo(ee,j);const z=Math.cos(D)*d+a,B=Math.sin(D)*d+o;n.lineTo(z,B)}n.closePath()}function i9(n,e,t,i,s){const{fullCircles:r,startAngle:a,circumference:o}=e;let l=e.endAngle;if(r){$0(n,e,t,i,l,s);for(let c=0;c<r;++c)n.fill();isNaN(o)||(l=a+(o%Gn||Gn))}return $0(n,e,t,i,l,s),n.fill(),l}function s9(n,e,t,i,s){const{fullCircles:r,startAngle:a,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,f?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let p=e.endAngle;if(r){$0(n,e,t,i,p,s);for(let m=0;m<r;++m)n.stroke();isNaN(o)||(p=a+(o%Gn||Gn))}f&&e9(n,e,p),r||($0(n,e,t,i,p,s),n.stroke())}class ef extends ya{constructor(t){super();Ge(this,"circumference");Ge(this,"endAngle");Ge(this,"fullCircles");Ge(this,"innerRadius");Ge(this,"outerRadius");Ge(this,"pixelMargin");Ge(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.getProps(["x","y"],s),{angle:a,distance:o}=bR(r,{x:t,y:i}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=(this.options.spacing+this.options.borderWidth)/2,p=Ht(h,c-l),m=np(a,l,c)&&l!==c,v=p>=Gn||m,y=ko(o,u+f,d+f);return v&&y}getCenterPoint(t){const{x:i,y:s,startAngle:r,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,d=(r+a)/2,h=(o+l+u+c)/2;return{x:i+Math.cos(d)*h,y:s+Math.sin(d)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:s}=this,r=(i.offset||0)/4,a=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>Gn?Math.floor(s/Gn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Yn,s||0)),u=r*c;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,i9(t,this,u,a,o),s9(t,this,u,a,o),t.restore()}}Ge(ef,"id","arc"),Ge(ef,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ge(ef,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ge(ef,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function eP(n,e,t=e){n.lineCap=Ht(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Ht(t.borderDash,e.borderDash)),n.lineDashOffset=Ht(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Ht(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Ht(t.borderWidth,e.borderWidth),n.strokeStyle=Ht(t.borderColor,e.borderColor)}function r9(n,e,t){n.lineTo(t.x,t.y)}function a9(n){return n.stepped?C7:n.tension||n.cubicInterpolationMode==="monotone"?I7:r9}function tP(n,e,t={}){const i=n.length,{start:s=0,end:r=i-1}=t,{start:a,end:o}=e,l=Math.max(s,a),c=Math.min(r,o),u=s<a&&r<a||s>o&&r>o;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function o9(n,e,t,i){const{points:s,options:r}=e,{count:a,start:o,loop:l,ilen:c}=tP(s,t,i),u=a9(r);let{move:d=!0,reverse:h}=i||{},f,p,m;for(f=0;f<=c;++f)p=s[(o+(h?c-f:f))%a],!p.skip&&(d?(n.moveTo(p.x,p.y),d=!1):u(n,m,p,h,r.stepped),m=p);return l&&(p=s[(o+(h?c:0))%a],u(n,m,p,h,r.stepped)),!!l}function l9(n,e,t,i){const s=e.points,{count:r,start:a,ilen:o}=tP(s,t,i),{move:l=!0,reverse:c}=i||{};let u=0,d=0,h,f,p,m,v,y;const b=_=>(a+(c?o-_:_))%r,x=()=>{m!==v&&(n.lineTo(u,v),n.lineTo(u,m),n.lineTo(u,y))};for(l&&(f=s[b(0)],n.moveTo(f.x,f.y)),h=0;h<=o;++h){if(f=s[b(h)],f.skip)continue;const _=f.x,T=f.y,C=_|0;C===p?(T<m?m=T:T>v&&(v=T),u=(d*u+_)/++d):(x(),n.lineTo(_,T),p=C,d=0,m=v=T),y=T}x()}function Ub(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?l9:o9}function c9(n){return n.stepped?lU:n.tension||n.cubicInterpolationMode==="monotone"?cU:Rc}function u9(n,e,t,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,i)&&s.closePath()),eP(n,e.options),n.stroke(s)}function d9(n,e,t,i){const{segments:s,options:r}=e,a=Ub(e);for(const o of s)eP(n,r,o.style),n.beginPath(),a(n,e,o,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}const h9=typeof Path2D=="function";function f9(n,e,t,i){h9&&!e.options.segment?u9(n,e,t,i):d9(n,e,t,i)}class Ro extends ya{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;eU(this._points,i,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=gU(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,s=e[t],r=this.points,a=UR(this,{property:t,start:s,end:s});if(!a.length)return;const o=[],l=c9(i);let c,u;for(c=0,u=a.length;c<u;++c){const{start:d,end:h}=a[c],f=r[d],p=r[h];if(f===p){o.push(f);continue}const m=Math.abs((s-f[t])/(p[t]-f[t])),v=l(f,p,m,i.stepped);v[t]=e[t],o.push(v)}return o.length===1?o[0]:o}pathSegment(e,t,i){return Ub(this)(e,this,t,i)}path(e,t,i){const s=this.segments,r=Ub(this);let a=this._loop;t=t||0,i=i||this.points.length-t;for(const o of s)a&=r(e,this,o,{start:t,end:t+i-1});return!!a}draw(e,t,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),f9(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ge(Ro,"id","line"),Ge(Ro,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ge(Ro,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ge(Ro,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function gT(n,e,t,i){const s=n.options,{[t]:r}=n.getProps([t],i);return Math.abs(e-r)<s.radius+s.hitRadius}class wf extends ya{constructor(t){super();Ge(this,"parsed");Ge(this,"skip");Ge(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,s){const r=this.options,{x:a,y:o}=this.getProps(["x","y"],s);return Math.pow(t-a,2)+Math.pow(i-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,i){return gT(this,t,"x",i)}inYRange(t,i){return gT(this,t,"y",i)}getCenterPoint(t){const{x:i,y:s}=this.getProps(["x","y"],t);return{x:i,y:s}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const s=i&&t.borderWidth||0;return(i+s)*2}draw(t,i){const s=this.options;this.skip||s.radius<.1||!Io(this,i,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,Mb(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}Ge(wf,"id","point"),Ge(wf,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ge(wf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function nP(n,e){const{x:t,y:i,base:s,width:r,height:a}=n.getProps(["x","y","base","width","height"],e);let o,l,c,u,d;return n.horizontal?(d=a/2,o=Math.min(t,s),l=Math.max(t,s),c=i-d,u=i+d):(d=r/2,o=t-d,l=t+d,c=Math.min(i,s),u=Math.max(i,s)),{left:o,top:c,right:l,bottom:u}}function Pl(n,e,t,i){return n?0:ss(e,t,i)}function p9(n,e,t){const i=n.options.borderWidth,s=n.borderSkipped,r=CR(i);return{t:Pl(s.top,r.top,0,t),r:Pl(s.right,r.right,0,e),b:Pl(s.bottom,r.bottom,0,t),l:Pl(s.left,r.left,0,e)}}function g9(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,r=qc(s),a=Math.min(e,t),o=n.borderSkipped,l=i||sn(s);return{topLeft:Pl(!l||o.top||o.left,r.topLeft,0,a),topRight:Pl(!l||o.top||o.right,r.topRight,0,a),bottomLeft:Pl(!l||o.bottom||o.left,r.bottomLeft,0,a),bottomRight:Pl(!l||o.bottom||o.right,r.bottomRight,0,a)}}function m9(n){const e=nP(n),t=e.right-e.left,i=e.bottom-e.top,s=p9(n,t/2,i/2),r=g9(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function D1(n,e,t,i){const s=e===null,r=t===null,o=n&&!(s&&r)&&nP(n,i);return o&&(s||ko(e,o.left,o.right))&&(r||ko(t,o.top,o.bottom))}function y9(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function v9(n,e){n.rect(e.x,e.y,e.w,e.h)}function O1(n,e,t={}){const i=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-i,a=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+r,h:n.h+a,radius:n.radius}}class _f extends ya{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:a}=m9(this),o=y9(a.radius)?ip:v9;e.save(),(a.w!==r.w||a.h!==r.h)&&(e.beginPath(),o(e,O1(a,t,r)),e.clip(),o(e,O1(r,-t,a)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),o(e,O1(r,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,i){return D1(this,e,t,i)}inXRange(e,t){return D1(this,e,null,t)}inYRange(e,t){return D1(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+s)/2:t,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ge(_f,"id","bar"),Ge(_f,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ge(_f,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var x9=Object.freeze({__proto__:null,ArcElement:ef,BarElement:_f,LineElement:Ro,PointElement:wf});const $b=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],mT=$b.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function iP(n){return $b[n%$b.length]}function sP(n){return mT[n%mT.length]}function b9(n,e){return n.borderColor=iP(e),n.backgroundColor=sP(e),++e}function S9(n,e){return n.backgroundColor=n.data.map(()=>iP(e++)),e}function w9(n,e){return n.backgroundColor=n.data.map(()=>sP(e++)),e}function _9(n){let e=0;return(t,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof $c?e=S9(t,e):s instanceof bf?e=w9(t,e):s&&(e=b9(t,e))}}function yT(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function E9(n){return n&&(n.borderColor||n.backgroundColor)}function T9(){return ti.borderColor!=="rgba(0,0,0,0.1)"||ti.backgroundColor!=="rgba(0,0,0,0.1)"}var A9={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:r}=s,a=yT(i)||E9(s)||r&&yT(r)||T9();if(!t.forceOverride&&a)return;const o=_9(n);i.forEach(o)}};function L9(n,e,t,i,s){const r=s.samples||i;if(r>=t)return n.slice(e,e+t);const a=[],o=(t-2)/(r-2);let l=0;const c=e+t-1;let u=e,d,h,f,p,m;for(a[l++]=n[u],d=0;d<r-2;d++){let v=0,y=0,b;const x=Math.floor((d+1)*o)+1+e,_=Math.min(Math.floor((d+2)*o)+1,t)+e,T=_-x;for(b=x;b<_;b++)v+=n[b].x,y+=n[b].y;v/=T,y/=T;const C=Math.floor(d*o)+1+e,L=Math.min(Math.floor((d+1)*o)+1,t)+e,{x:k,y:M}=n[u];for(f=p=-1,b=C;b<L;b++)p=.5*Math.abs((k-v)*(n[b].y-M)-(k-n[b].x)*(y-M)),p>f&&(f=p,h=n[b],m=b);a[l++]=h,u=m}return a[l++]=n[c],a}function k9(n,e,t,i){let s=0,r=0,a,o,l,c,u,d,h,f,p,m;const v=[],y=e+t-1,b=n[e].x,_=n[y].x-b;for(a=e;a<e+t;++a){o=n[a],l=(o.x-b)/_*i,c=o.y;const T=l|0;if(T===u)c<p?(p=c,d=a):c>m&&(m=c,h=a),s=(r*s+o.x)/++r;else{const C=a-1;if(!en(d)&&!en(h)){const L=Math.min(d,h),k=Math.max(d,h);L!==f&&L!==C&&v.push({...n[L],x:s}),k!==f&&k!==C&&v.push({...n[k],x:s})}a>0&&C!==f&&v.push(n[C]),v.push(o),u=T,r=0,p=m=c,d=h=f=a}}return v}function rP(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function vT(n){n.data.datasets.forEach(e=>{rP(e)})}function C9(n,e){const t=e.length;let i=0,s;const{iScale:r}=n,{min:a,max:o,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=ss(Co(e,r.axis,a).lo,0,t-1)),c?s=ss(Co(e,r.axis,o).hi+1,i,t)-i:s=t-i,{start:i,count:s}}var I9={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){vT(n);return}const i=n.width;n.data.datasets.forEach((s,r)=>{const{_data:a,indexAxis:o}=s,l=n.getDatasetMeta(r),c=a||s.data;if(Jh([o,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=C9(l,c);const f=t.threshold||4*i;if(h<=f){rP(s);return}en(a)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let p;switch(t.algorithm){case"lttb":p=L9(c,d,h,i,t);break;case"min-max":p=k9(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=p})},destroy(n){vT(n)}};function R9(n,e,t){const i=n.segments,s=n.points,r=e.points,a=[];for(const o of i){let{start:l,end:c}=o;c=ZS(l,c,s);const u=Hb(t,s[l],s[c],o.loop);if(!e.segments){a.push({source:o,target:u,start:s[l],end:s[c]});continue}const d=UR(e,u);for(const h of d){const f=Hb(t,r[h.start],r[h.end],h.loop),p=BR(o,s,f);for(const m of p)a.push({source:m,target:h,start:{[t]:xT(u,f,"start",Math.max)},end:{[t]:xT(u,f,"end",Math.min)}})}}return a}function Hb(n,e,t,i){if(i)return;let s=e[n],r=t[n];return n==="angle"&&(s=mr(s),r=mr(r)),{property:n,start:s,end:r}}function P9(n,e){const{x:t=null,y:i=null}=n||{},s=e.points,r=[];return e.segments.forEach(({start:a,end:o})=>{o=ZS(a,o,s);const l=s[a],c=s[o];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):t!==null&&(r.push({x:t,y:l.y}),r.push({x:t,y:c.y}))}),r}function ZS(n,e,t){for(;e>n;e--){const i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function xT(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function aP(n,e){let t=[],i=!1;return ei(n)?(i=!0,t=n):t=P9(n,e),t.length?new Ro({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function bT(n){return n&&n.fill!==!1}function N9(n,e,t){let s=n[e].fill;const r=[e];let a;if(!t)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!mi(s))return s;if(a=n[s],!a)return!1;if(a.visible)return s;r.push(s),s=a.fill}return!1}function D9(n,e,t){const i=j9(n);if(sn(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return mi(s)&&Math.floor(s)===s?O9(i[0],e,s,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function O9(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function M9(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:sn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function F9(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:sn(n)?i=n.value:i=e.getBaseValue(),i}function j9(n){const e=n.options,t=e.fill;let i=Ht(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function B9(n){const{scale:e,index:t,line:i}=n,s=[],r=i.segments,a=i.points,o=U9(e,t);o.push(aP({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)$9(s,a[u],o)}return new Ro({points:s,options:{}})}function U9(n,e){const t=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function $9(n,e,t){const i=[];for(let s=0;s<t.length;s++){const r=t[s],{first:a,last:o,point:l}=H9(r,e,"x");if(!(!l||a&&o)){if(a)i.unshift(l);else if(n.push(l),!o)break}}n.push(...i)}function H9(n,e,t){const i=n.interpolate(e,t);if(!i)return{};const s=i[t],r=n.segments,a=n.points;let o=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=a[u.start][t],h=a[u.end][t];if(ko(s,d,h)){o=s===d,l=s===h;break}}return{first:o,last:l,point:i}}class oP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){const{x:s,y:r,radius:a}=this;return t=t||{start:0,end:Gn},e.arc(s,r,a,t.end,t.start,!0),!i.bounds}interpolate(e){const{x:t,y:i,radius:s}=this,r=e.angle;return{x:t+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function z9(n){const{chart:e,fill:t,line:i}=n;if(mi(t))return W9(e,t);if(t==="stack")return B9(n);if(t==="shape")return!0;const s=V9(n);return s instanceof oP?s:aP(s,i)}function W9(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function V9(n){return(n.scale||{}).getPointPositionForValue?Y9(n):G9(n)}function G9(n){const{scale:e={},fill:t}=n,i=M9(t,e);if(mi(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function Y9(n){const{scale:e,fill:t}=n,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,a=F9(t,e,r),o=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new oP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(a)})}for(let l=0;l<s;++l)o.push(e.getPointPositionForValue(l,a));return o}function M1(n,e,t){const i=z9(e),{chart:s,index:r,line:a,scale:o,axis:l}=e,c=a.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},p=s.getDatasetMeta(r),m=$R(s,p);i&&a.points.length&&(Uy(n,t),q9(n,{line:a,target:i,above:h,below:f,area:t,scale:o,axis:l,clip:m}),$y(n))}function q9(n,e){const{line:t,target:i,above:s,below:r,area:a,scale:o,clip:l}=e,c=t._loop?"angle":e.axis;n.save(),c==="x"&&r!==s&&(ST(n,i,a.top),wT(n,{line:t,target:i,color:s,scale:o,property:c,clip:l}),n.restore(),n.save(),ST(n,i,a.bottom)),wT(n,{line:t,target:i,color:r,scale:o,property:c,clip:l}),n.restore()}function ST(n,e,t){const{segments:i,points:s}=e;let r=!0,a=!1;n.beginPath();for(const o of i){const{start:l,end:c}=o,u=s[l],d=s[ZS(l,c,s)];r?(n.moveTo(u.x,u.y),r=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),a=!!e.pathSegment(n,o,{move:a}),a?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function wT(n,e){const{line:t,target:i,property:s,color:r,scale:a,clip:o}=e,l=R9(t,i,s);for(const{source:c,target:u,start:d,end:h}of l){const{style:{backgroundColor:f=r}={}}=c,p=i!==!0;n.save(),n.fillStyle=f,K9(n,a,o,p&&Hb(s,d,h)),n.beginPath();const m=!!t.pathSegment(n,c);let v;if(p){m?n.closePath():_T(n,i,h,s);const y=!!i.pathSegment(n,u,{move:m,reverse:!0});v=m&&y,v||_T(n,i,d,s)}n.closePath(),n.fill(v?"evenodd":"nonzero"),n.restore()}}function K9(n,e,t,i){const s=e.chart.chartArea,{property:r,start:a,end:o}=i||{};if(r==="x"||r==="y"){let l,c,u,d;r==="x"?(l=a,c=s.top,u=o,d=s.bottom):(l=s.left,c=a,u=s.right,d=o),n.beginPath(),t&&(l=Math.max(l,t.left),u=Math.min(u,t.right),c=Math.max(c,t.top),d=Math.min(d,t.bottom)),n.rect(l,c,u-l,d-c),n.clip()}}function _T(n,e,t,i){const s=e.interpolate(t,i);s&&n.lineTo(s.x,s.y)}var X9={id:"filler",afterDatasetsUpdate(n,e,t){const i=(n.data.datasets||[]).length,s=[];let r,a,o,l;for(a=0;a<i;++a)r=n.getDatasetMeta(a),o=r.dataset,l=null,o&&o.options&&o instanceof Ro&&(l={visible:n.isDatasetVisible(a),index:a,fill:D9(o,a,i),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:o}),r.$filler=l,s.push(l);for(a=0;a<i;++a)l=s[a],!(!l||l.fill===!1)&&(l.fill=N9(s,a,t.propagate))},beforeDraw(n,e,t){const i=t.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let a=s.length-1;a>=0;--a){const o=s[a].$filler;o&&(o.line.updateControlPoints(r,o.axis),i&&o.fill&&M1(n.ctx,o,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;bT(r)&&M1(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const i=e.meta.$filler;!bT(i)||t.drawTime!=="beforeDatasetDraw"||M1(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ET=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},Q9=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class TT extends ya{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=$n(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=qi(i.font),r=s.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=ET(i,r);let c,u;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(a,r,o,l)+10):(u=this.maxHeight,c=this._fitCols(a,s,o,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,s){const{ctx:r,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+o;let d=e;r.textAlign="left",r.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,m)=>{const v=i+t/2+r.measureText(p.text).width;(m===0||c[c.length-1]+v+2*o>a)&&(d+=u,c[c.length-(m>0?0:1)]=0,f+=u,h++),l[m]={left:0,top:f,row:h,width:v,height:s},c[c.length-1]+=v+o}),d}_fitCols(e,t,i,s){const{ctx:r,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=a-e;let d=o,h=0,f=0,p=0,m=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:b,itemHeight:x}=J9(i,t,r,v,s);y>0&&f+x+2*o>u&&(d+=h+o,c.push({width:h,height:f}),p+=h+o,m++,h=f=0),l[y]={left:p,top:f,col:m,width:b,height:x},h=Math.max(h,b),f+=x+o}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:s},rtl:r}}=this,a=wd(r,this.left,this.width);if(this.isHorizontal()){let o=0,l=Es(i,this.left+s,this.right-this.lineWidths[o]);for(const c of t)o!==c.row&&(o=c.row,l=Es(i,this.left+s,this.right-this.lineWidths[o])),c.top+=this.top+e+s,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+s}else{let o=0,l=Es(i,this.top+e+s,this.bottom-this.columnSizes[o].height);for(const c of t)c.col!==o&&(o=c.col,l=Es(i,this.top+e+s,this.bottom-this.columnSizes[o].height)),c.top=l,c.left+=this.left+s,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Uy(e,this),this._draw(),$y(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:s}=this,{align:r,labels:a}=e,o=ti.color,l=wd(e.rtl,this.left,this.width),c=qi(a.font),{padding:u}=a,d=c.size,h=d/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:v}=ET(a,d),y=function(C,L,k){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;s.save();const M=Ht(k.lineWidth,1);if(s.fillStyle=Ht(k.fillStyle,o),s.lineCap=Ht(k.lineCap,"butt"),s.lineDashOffset=Ht(k.lineDashOffset,0),s.lineJoin=Ht(k.lineJoin,"miter"),s.lineWidth=M,s.strokeStyle=Ht(k.strokeStyle,o),s.setLineDash(Ht(k.lineDash,[])),a.usePointStyle){const D={radius:m*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:M},I=l.xPlus(C,p/2),R=L+h;kR(s,D,I,R,a.pointStyleWidth&&p)}else{const D=L+Math.max((d-m)/2,0),I=l.leftForLtr(C,p),R=qc(k.borderRadius);s.beginPath(),Object.values(R).some(q=>q!==0)?ip(s,{x:I,y:D,w:p,h:m,radius:R}):s.rect(I,D,p,m),s.fill(),M!==0&&s.stroke()}s.restore()},b=function(C,L,k){cu(s,k.text,C,L+v/2,c,{strikethrough:k.hidden,textAlign:l.textAlign(k.textAlign)})},x=this.isHorizontal(),_=this._computeTitleHeight();x?f={x:Es(r,this.left+u,this.right-i[0]),y:this.top+u+_,line:0}:f={x:this.left+u,y:Es(r,this.top+_+u,this.bottom-t[0].height),line:0},MR(this.ctx,e.textDirection);const T=v+u;this.legendItems.forEach((C,L)=>{s.strokeStyle=C.fontColor,s.fillStyle=C.fontColor;const k=s.measureText(C.text).width,M=l.textAlign(C.textAlign||(C.textAlign=a.textAlign)),D=p+h+k;let I=f.x,R=f.y;l.setWidth(this.width),x?L>0&&I+D+u>this.right&&(R=f.y+=T,f.line++,I=f.x=Es(r,this.left+u,this.right-i[f.line])):L>0&&R+T>this.bottom&&(I=f.x=I+t[f.line].width+u,f.line++,R=f.y=Es(r,this.top+_+u,this.bottom-t[f.line].height));const q=l.x(I);if(y(q,R,C),I=v7(M,I+p+h,x?I+D:this.right,e.rtl),b(l.x(I),R,C),x)f.x+=D+u;else if(typeof C.text!="string"){const Y=c.lineHeight;f.y+=lP(C,Y)+u}else f.y+=T}),FR(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=qi(t.font),s=Ps(t.padding);if(!t.display)return;const r=wd(e.rtl,this.left,this.width),a=this.ctx,o=t.position,l=i.size/2,c=s.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Es(e.align,d,this.right-h);else{const p=this.columnSizes.reduce((m,v)=>Math.max(m,v.height),0);u=c+Es(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=Es(o,d,d+h);a.textAlign=r.textAlign(WS(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=i.string,cu(a,t.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,t=qi(e.font),i=Ps(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,s,r;if(ko(e,this.left,this.right)&&ko(t,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],ko(e,s.left,s.left+s.width)&&ko(t,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!tH(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=Q9(s,i);s&&!r&&$n(t.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&$n(t.onHover,[e,i,this],this)}else i&&$n(t.onClick,[e,i,this],this)}}function J9(n,e,t,i,s){const r=Z9(i,n,e,t),a=eH(s,i,e.lineHeight);return{itemWidth:r,itemHeight:a}}function Z9(n,e,t,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((r,a)=>r.length>a.length?r:a)),e+t.size/2+i.measureText(s).width}function eH(n,e,t){let i=n;return typeof e.text!="string"&&(i=lP(e,t)),i}function lP(n,e){const t=n.text?n.text.length:0;return e*t}function tH(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var ew={id:"legend",_element:TT,start(n,e,t){const i=n.legend=new TT({ctx:n.ctx,options:t,chart:n});Cs.configure(n,i,t),Cs.addBox(n,i)},stop(n){Cs.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;Cs.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,s=t.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:s,color:r,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(t?0:void 0),u=Ps(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:a&&(o||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class tw extends ya{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=ei(i.text)?i.text.length:1;this._padding=Ps(i.padding);const r=s*qi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:s,right:r,options:a}=this,o=a.align;let l=0,c,u,d;return this.isHorizontal()?(u=Es(o,i,r),d=t+e,c=r-i):(a.position==="left"?(u=i+e,d=Es(o,s,t),l=Yn*-.5):(u=r-e,d=Es(o,t,s),l=Yn*.5),c=s-t),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=qi(t.font),r=i.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:c}=this._drawArgs(r);cu(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:WS(t.align),textBaseline:"middle",translation:[a,o]})}}function nH(n,e){const t=new tw({ctx:n.ctx,options:e,chart:n});Cs.configure(n,t,e),Cs.addBox(n,t),n.titleBlock=t}var cP={id:"title",_element:tw,start(n,e,t){nH(n,t)},stop(n){const e=n.titleBlock;Cs.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;Cs.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const nm=new WeakMap;var iH={id:"subtitle",start(n,e,t){const i=new tw({ctx:n.ctx,options:t,chart:n});Cs.configure(n,i,t),Cs.addBox(n,i),nm.set(n,i)},stop(n){Cs.removeBox(n,nm.get(n)),nm.delete(n)},beforeUpdate(n,e,t){const i=nm.get(n);Cs.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const tf={average(n){if(!n.length)return!1;let e,t,i=new Set,s=0,r=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((o,l)=>o+l)/i.size,y:s/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,a,o;for(r=0,a=n.length;r<a;++r){const l=n[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Db(e,c);u<s&&(s=u,o=l)}}if(o){const l=o.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Pa(n,e){return e&&(ei(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function vo(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function sH(n,e){const{element:t,datasetIndex:i,index:s}=e,r=n.getDatasetMeta(i).controller,{label:a,value:o}=r.getLabelAndValue(s);return{chart:n,label:a,parsed:r.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:o,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:t}}function AT(n,e){const t=n.chart.ctx,{body:i,footer:s,title:r}=n,{boxWidth:a,boxHeight:o}=e,l=qi(e.bodyFont),c=qi(e.titleFont),u=qi(e.footerFont),d=r.length,h=s.length,f=i.length,p=Ps(e.padding);let m=p.height,v=0,y=i.reduce((_,T)=>_+T.before.length+T.lines.length+T.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){const _=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;m+=f*_+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}h&&(m+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let b=0;const x=function(_){v=Math.max(v,t.measureText(_).width+b)};return t.save(),t.font=c.string,An(n.title,x),t.font=l.string,An(n.beforeBody.concat(n.afterBody),x),b=e.displayColors?a+2+e.boxPadding:0,An(i,_=>{An(_.before,x),An(_.lines,x),An(_.after,x)}),b=0,t.font=u.string,An(n.footer,x),t.restore(),v+=p.width,{width:v,height:m}}function rH(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function aH(n,e,t,i){const{x:s,width:r}=i,a=t.caretSize+t.caretPadding;if(n==="left"&&s+r+a>e.width||n==="right"&&s-r-a<0)return!0}function oH(n,e,t,i){const{x:s,width:r}=t,{width:a,chartArea:{left:o,right:l}}=n;let c="center";return i==="center"?c=s<=(o+l)/2?"left":"right":s<=r/2?c="left":s>=a-r/2&&(c="right"),aH(c,n,e,t)&&(c="center"),c}function LT(n,e,t){const i=t.yAlign||e.yAlign||rH(n,t);return{xAlign:t.xAlign||e.xAlign||oH(n,e,t,i),yAlign:i}}function lH(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function cH(n,e,t){let{y:i,height:s}=n;return e==="top"?i+=t:e==="bottom"?i-=s+t:i-=s/2,i}function kT(n,e,t,i){const{caretSize:s,caretPadding:r,cornerRadius:a}=n,{xAlign:o,yAlign:l}=t,c=s+r,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=qc(a);let p=lH(e,o);const m=cH(e,l,c);return l==="center"?o==="left"?p+=c:o==="right"&&(p-=c):o==="left"?p-=Math.max(u,h)+s:o==="right"&&(p+=Math.max(d,f)+s),{x:ss(p,0,i.width-e.width),y:ss(m,0,i.height-e.height)}}function im(n,e,t){const i=Ps(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function CT(n){return Pa([],vo(n))}function uH(n,e,t){return oc(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function IT(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const uP={beforeTitle:ho,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:ho,beforeBody:ho,beforeLabel:ho,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return en(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ho,afterBody:ho,beforeFooter:ho,footer:ho,afterFooter:ho};function Xs(n,e,t,i){const s=n[e].call(t,i);return typeof s>"u"?uP[e].call(t,i):s}class zb extends ya{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&t.options.animation&&i.animations,r=new HR(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=uH(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,s=Xs(i,"beforeTitle",this,e),r=Xs(i,"title",this,e),a=Xs(i,"afterTitle",this,e);let o=[];return o=Pa(o,vo(s)),o=Pa(o,vo(r)),o=Pa(o,vo(a)),o}getBeforeBody(e,t){return CT(Xs(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,s=[];return An(e,r=>{const a={before:[],lines:[],after:[]},o=IT(i,r);Pa(a.before,vo(Xs(o,"beforeLabel",this,r))),Pa(a.lines,Xs(o,"label",this,r)),Pa(a.after,vo(Xs(o,"afterLabel",this,r))),s.push(a)}),s}getAfterBody(e,t){return CT(Xs(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,s=Xs(i,"beforeFooter",this,e),r=Xs(i,"footer",this,e),a=Xs(i,"afterFooter",this,e);let o=[];return o=Pa(o,vo(s)),o=Pa(o,vo(r)),o=Pa(o,vo(a)),o}_createItems(e){const t=this._active,i=this.chart.data,s=[],r=[],a=[];let o=[],l,c;for(l=0,c=t.length;l<c;++l)o.push(sH(this.chart,t[l]));return e.filter&&(o=o.filter((u,d,h)=>e.filter(u,d,h,i))),e.itemSort&&(o=o.sort((u,d)=>e.itemSort(u,d,i))),An(o,u=>{const d=IT(e.callbacks,u);s.push(Xs(d,"labelColor",this,u)),r.push(Xs(d,"labelPointStyle",this,u)),a.push(Xs(d,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=o,o}update(e,t){const i=this.options.setContext(this.getContext()),s=this._active;let r,a=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const o=tf[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const l=this._size=AT(this,i),c=Object.assign({},o,l),u=LT(this.chart,i,c),d=kT(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,s){const r=this.getCaretPosition(e,i,s);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,i){const{xAlign:s,yAlign:r}=this,{caretSize:a,cornerRadius:o}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=qc(o),{x:h,y:f}=e,{width:p,height:m}=t;let v,y,b,x,_,T;return r==="center"?(_=f+m/2,s==="left"?(v=h,y=v-a,x=_+a,T=_-a):(v=h+p,y=v+a,x=_-a,T=_+a),b=v):(s==="left"?y=h+Math.max(l,u)+a:s==="right"?y=h+p-Math.max(c,d)-a:y=this.caretX,r==="top"?(x=f,_=x-a,v=y-a,b=y+a):(x=f+m,_=x+a,v=y+a,b=y-a),T=x),{x1:v,x2:y,x3:b,y1:x,y2:_,y3:T}}drawTitle(e,t,i){const s=this.title,r=s.length;let a,o,l;if(r){const c=wd(i.rtl,this.x,this.width);for(e.x=im(this,i.titleAlign,i),t.textAlign=c.textAlign(i.titleAlign),t.textBaseline="middle",a=qi(i.titleFont),o=i.titleSpacing,t.fillStyle=i.titleColor,t.font=a.string,l=0;l<r;++l)t.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===r&&(e.y+=i.titleMarginBottom-o)}}_drawColorBox(e,t,i,s,r){const a=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=qi(r.bodyFont),d=im(this,"left",r),h=s.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=t.y+f;if(r.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},v=s.leftForLtr(h,c)+c/2,y=p+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Mb(e,m,v,y),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Mb(e,m,v,y)}else{e.lineWidth=sn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const m=s.leftForLtr(h,c),v=s.leftForLtr(s.xPlus(h,1),c-2),y=qc(a.borderRadius);Object.values(y).some(b=>b!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,ip(e,{x:m,y:p,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),ip(e,{x:v,y:p+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(m,p,c,l),e.strokeRect(m,p,c,l),e.fillStyle=a.backgroundColor,e.fillRect(v,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:s}=this,{bodySpacing:r,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=qi(i.bodyFont);let h=d.lineHeight,f=0;const p=wd(i.rtl,this.x,this.width),m=function(k){t.fillText(k,p.x(e.x+f),e.y+h/2),e.y+=h+r},v=p.textAlign(a);let y,b,x,_,T,C,L;for(t.textAlign=a,t.textBaseline="middle",t.font=d.string,e.x=im(this,v,i),t.fillStyle=i.bodyColor,An(this.beforeBody,m),f=o&&v!=="right"?a==="center"?c/2+u:c+2+u:0,_=0,C=s.length;_<C;++_){for(y=s[_],b=this.labelTextColors[_],t.fillStyle=b,An(y.before,m),x=y.lines,o&&x.length&&(this._drawColorBox(t,e,_,p,i),h=Math.max(d.lineHeight,l)),T=0,L=x.length;T<L;++T)m(x[T]),h=d.lineHeight;An(y.after,m)}f=0,h=d.lineHeight,An(this.afterBody,m),e.y-=r}drawFooter(e,t,i){const s=this.footer,r=s.length;let a,o;if(r){const l=wd(i.rtl,this.x,this.width);for(e.x=im(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=l.textAlign(i.footerAlign),t.textBaseline="middle",a=qi(i.footerFont),t.fillStyle=i.footerColor,t.font=a.string,o=0;o<r;++o)t.fillText(s[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+i.footerSpacing}}drawBackground(e,t,i,s){const{xAlign:r,yAlign:a}=this,{x:o,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:p}=qc(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(o+d,l),a==="top"&&this.drawCaret(e,t,i,s),t.lineTo(o+c-h,l),t.quadraticCurveTo(o+c,l,o+c,l+h),a==="center"&&r==="right"&&this.drawCaret(e,t,i,s),t.lineTo(o+c,l+u-p),t.quadraticCurveTo(o+c,l+u,o+c-p,l+u),a==="bottom"&&this.drawCaret(e,t,i,s),t.lineTo(o+f,l+u),t.quadraticCurveTo(o,l+u,o,l+u-f),a==="center"&&r==="left"&&this.drawCaret(e,t,i,s),t.lineTo(o,l+d),t.quadraticCurveTo(o,l,o+d,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const a=tf[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=AT(this,e),l=Object.assign({},a,this._size),c=LT(t,e,l),u=kT(e,l,c,t);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=Ps(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,t),MR(e,t.textDirection),r.y+=a.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),FR(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,s=e.map(({datasetIndex:o,index:l})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[l],index:l}}),r=!O0(i,s),a=this._positionChanged(s,t);(r||a)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],a=this._getActiveElements(e,r,t,i),o=this._positionChanged(a,e),l=t||!O0(a,r)||o;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:i,caretY:s,options:r}=this,a=tf[r.position].call(this,e,t);return a!==!1&&(i!==a.x||s!==a.y)}}Ge(zb,"positioners",tf);var nw={id:"tooltip",_element:zb,positioners:tf,afterInit(n,e,t){t&&(n.tooltip=new zb({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:uP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},dH=Object.freeze({__proto__:null,Colors:A9,Decimation:I9,Filler:X9,Legend:ew,SubTitle:iH,Title:cP,Tooltip:nw});const hH=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function fH(n,e,t,i){const s=n.indexOf(e);if(s===-1)return hH(n,e,t,i);const r=n.lastIndexOf(e);return s!==r?t:s}const pH=(n,e)=>n===null?null:ss(Math.round(n),0,e);function RT(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class rp extends gu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:s,label:r}of t)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(en(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:fH(i,e,Ht(t,e),this._addedLabels),pH(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=e;a<=t;a++)s.push({value:a});return s}getLabelForValue(e){return RT.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ge(rp,"id","category"),Ge(rp,"defaults",{ticks:{callback:RT}});function gH(n,e){const t=[],{bounds:s,step:r,min:a,max:o,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,f=r||1,p=u-1,{min:m,max:v}=e,y=!en(a),b=!en(o),x=!en(c),_=(v-m)/(d+1);let T=AE((v-m)/p/f)*f,C,L,k,M;if(T<1e-14&&!y&&!b)return[{value:m},{value:v}];M=Math.ceil(v/T)-Math.floor(m/T),M>p&&(T=AE(M*T/p/f)*f),en(l)||(C=Math.pow(10,l),T=Math.ceil(T*C)/C),s==="ticks"?(L=Math.floor(m/T)*T,k=Math.ceil(v/T)*T):(L=m,k=v),y&&b&&r&&d7((o-a)/r,T/1e3)?(M=Math.round(Math.min((o-a)/T,u)),T=(o-a)/M,L=a,k=o):x?(L=y?a:L,k=b?o:k,M=c-1,T=(k-L)/M):(M=(k-L)/T,mf(M,Math.round(M),T/1e3)?M=Math.round(M):M=Math.ceil(M));const D=Math.max(LE(T),LE(L));C=Math.pow(10,en(l)?D:l),L=Math.round(L*C)/C,k=Math.round(k*C)/C;let I=0;for(y&&(h&&L!==a?(t.push({value:a}),L<a&&I++,mf(Math.round((L+I*T)*C)/C,a,PT(a,_,n))&&I++):L<a&&I++);I<M;++I){const R=Math.round((L+I*T)*C)/C;if(b&&R>o)break;t.push({value:R})}return b&&h&&k!==o?t.length&&mf(t[t.length-1].value,o,PT(o,_,n))?t[t.length-1].value=o:t.push({value:o}):(!b||k===o)&&t.push({value:k}),t}function PT(n,e,{horizontal:t,minRotation:i}){const s=da(i),r=(t?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+n).length;return Math.min(e/r,a)}class H0 extends gu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return en(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const a=l=>s=t?s:l,o=l=>r=i?r:l;if(e){const l=Ya(s),c=Ya(r);l<0&&c<0?o(0):l>0&&c>0&&a(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);o(r+l),e||a(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,a=gH(s,r);return e.bounds==="ticks"&&xR(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-t)/Math.max(e.length-1,1)/2;t-=s,i+=s}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Mp(e,this.chart.options.locale,this.options.ticks.format)}}class ap extends H0{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=mi(e)?e:0,this.max=mi(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=da(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ge(ap,"id","linear"),Ge(ap,"defaults",{ticks:{callback:By.formatters.numeric}});const op=n=>Math.floor(Rl(n)),wc=(n,e)=>Math.pow(10,op(n)+e);function NT(n){return n/Math.pow(10,op(n))===1}function DT(n,e,t){const i=Math.pow(10,t),s=Math.floor(n/i);return Math.ceil(e/i)-s}function mH(n,e){const t=e-n;let i=op(t);for(;DT(n,e,i)>10;)i++;for(;DT(n,e,i)<10;)i--;return Math.min(i,op(n))}function yH(n,{min:e,max:t}){e=pr(n.min,e);const i=[],s=op(e);let r=mH(e,t),a=r<0?Math.pow(10,Math.abs(r)):1;const o=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*a)/a,u=Math.floor((e-l)/o/10)*o*10;let d=Math.floor((c-u)/Math.pow(10,r)),h=pr(n.min,Math.round((l+u+d*Math.pow(10,r))*a)/a);for(;h<t;)i.push({value:h,major:NT(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,a=r>=0?1:a),h=Math.round((l+u+d*Math.pow(10,r))*a)/a;const f=pr(n.max,h);return i.push({value:f,major:NT(f),significand:d}),i}class Wb extends gu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const i=H0.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return mi(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=mi(e)?Math.max(0,e):null,this.max=mi(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!mi(this._userMin)&&(this.min=e===wc(this.min,0)?wc(this.min,-1):wc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let i=this.min,s=this.max;const r=o=>i=e?i:o,a=o=>s=t?s:o;i===s&&(i<=0?(r(1),a(10)):(r(wc(i,-1)),a(wc(s,1)))),i<=0&&r(wc(s,-1)),s<=0&&a(wc(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},i=yH(t,this);return e.bounds==="ticks"&&xR(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Mp(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Rl(e),this._valueRange=Rl(this.max)-Rl(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Rl(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}Ge(Wb,"id","logarithmic"),Ge(Wb,"defaults",{ticks:{callback:By.formatters.logarithmic,major:{enabled:!0}}});function Vb(n){const e=n.ticks;if(e.display&&n.display){const t=Ps(e.backdropPadding);return Ht(e.font&&e.font.size,ti.font.size)+t.height}return 0}function vH(n,e,t){return t=ei(t)?t:[t],{w:k7(n,e.string,t),h:t.length*e.lineHeight}}function OT(n,e,t,i,s){return n===i||n===s?{start:e-t/2,end:e+t/2}:n<i||n>s?{start:e-t,end:e}:{start:e,end:e+t}}function xH(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],s=[],r=n._pointLabels.length,a=n.options.pointLabels,o=a.centerPointLabels?Yn/r:0;for(let l=0;l<r;l++){const c=a.setContext(n.getPointLabelContext(l));s[l]=c.padding;const u=n.getPointPosition(l,n.drawingArea+s[l],o),d=qi(c.font),h=vH(n.ctx,d,n._pointLabels[l]);i[l]=h;const f=mr(n.getIndexAngle(l)+o),p=Math.round(HS(f)),m=OT(p,u.x,h.w,0,180),v=OT(p,u.y,h.h,90,270);bH(t,e,f,m,v)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=_H(n,i,s)}function bH(n,e,t,i,s){const r=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));let o=0,l=0;i.start<e.l?(o=(e.l-i.start)/r,n.l=Math.min(n.l,e.l-o)):i.end>e.r&&(o=(i.end-e.r)/r,n.r=Math.max(n.r,e.r+o)),s.start<e.t?(l=(e.t-s.start)/a,n.t=Math.min(n.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/a,n.b=Math.max(n.b,e.b+l))}function SH(n,e,t){const i=n.drawingArea,{extra:s,additionalAngle:r,padding:a,size:o}=t,l=n.getPointPosition(e,i+s+a,r),c=Math.round(HS(mr(l.angle+Ci))),u=AH(l.y,o.h,c),d=EH(c),h=TH(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function wH(n,e){if(!e)return!0;const{left:t,top:i,right:s,bottom:r}=n;return!(Io({x:t,y:i},e)||Io({x:t,y:r},e)||Io({x:s,y:i},e)||Io({x:s,y:r},e))}function _H(n,e,t){const i=[],s=n._pointLabels.length,r=n.options,{centerPointLabels:a,display:o}=r.pointLabels,l={extra:Vb(r)/2,additionalAngle:a?Yn/s:0};let c;for(let u=0;u<s;u++){l.padding=t[u],l.size=e[u];const d=SH(n,u,l);i.push(d),o==="auto"&&(d.visible=wH(d,c),d.visible&&(c=d))}return i}function EH(n){return n===0||n===180?"center":n<180?"left":"right"}function TH(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function AH(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function LH(n,e,t){const{left:i,top:s,right:r,bottom:a}=t,{backdropColor:o}=e;if(!en(o)){const l=qc(e.borderRadius),c=Ps(e.backdropPadding);n.fillStyle=o;const u=i-c.left,d=s-c.top,h=r-i+c.width,f=a-s+c.height;Object.values(l).some(p=>p!==0)?(n.beginPath(),ip(n,{x:u,y:d,w:h,h:f,radius:l}),n.fill()):n.fillRect(u,d,h,f)}}function kH(n,e){const{ctx:t,options:{pointLabels:i}}=n;for(let s=e-1;s>=0;s--){const r=n._pointLabelItems[s];if(!r.visible)continue;const a=i.setContext(n.getPointLabelContext(s));LH(t,a,r);const o=qi(a.font),{x:l,y:c,textAlign:u}=r;cu(t,n._pointLabels[s],l,c+o.lineHeight/2,o,{color:a.color,textAlign:u,textBaseline:"middle"})}}function dP(n,e,t,i){const{ctx:s}=n;if(t)s.arc(n.xCenter,n.yCenter,e,0,Gn);else{let r=n.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let a=1;a<i;a++)r=n.getPointPosition(a,e),s.lineTo(r.x,r.y)}}function CH(n,e,t,i,s){const r=n.ctx,a=e.circular,{color:o,lineWidth:l}=e;!a&&!i||!o||!l||t<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),dP(n,t,a,i),r.closePath(),r.stroke(),r.restore())}function IH(n,e,t){return oc(n,{label:t,index:e,type:"pointLabel"})}class nf extends H0{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ps(Vb(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=mi(e)&&!isNaN(e)?e:0,this.max=mi(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Vb(this.options))}generateTickLabels(e){H0.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{const s=$n(this.options.pointLabels.callback,[t,i],this);return s||s===0?s:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?xH(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,s))}getIndexAngle(e){const t=Gn/(this._pointLabels.length||1),i=this.options.startAngle||0;return mr(e*t+da(i))}getDistanceFromCenterForValue(e){if(en(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(en(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const i=t[e];return IH(this.getContext(),e,i)}}getPointPosition(e,t,i=0){const s=this.getIndexAngle(e)-Ci+i;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:t,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),dP(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:i,grid:s,border:r}=t,a=this._pointLabels.length;let o,l,c;if(t.pointLabels.display&&kH(this,a),s.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(d),f=s.setContext(h),p=r.setContext(h);CH(this,f,l,a,p)}}),i.display){for(e.save(),o=a-1;o>=0;o--){const u=i.setContext(this.getPointLabelContext(o)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const c=i.setContext(this.getContext(l)),u=qi(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,a=e.measureText(o.label).width,e.fillStyle=c.backdropColor;const d=Ps(c.backdropPadding);e.fillRect(-a/2-d.left,-r-u.size/2-d.top,a+d.width,u.size+d.height)}cu(e,o.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ge(nf,"id","radialLinear"),Ge(nf,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:By.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ge(nf,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ge(nf,"descriptors",{angleLines:{_fallback:"grid"}});const Wy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},tr=Object.keys(Wy);function MT(n,e){return n-e}function FT(n,e){if(en(e))return null;const t=n._adapter,{parser:i,round:s,isoWeekday:r}=n._parseOpts;let a=e;return typeof i=="function"&&(a=i(a)),mi(a)||(a=typeof i=="string"?t.parse(a,i):t.parse(a)),a===null?null:(s&&(a=s==="week"&&(Fd(r)||r===!0)?t.startOf(a,"isoWeek",r):t.startOf(a,s)),+a)}function jT(n,e,t,i){const s=tr.length;for(let r=tr.indexOf(n);r<s-1;++r){const a=Wy[tr[r]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=i)return tr[r]}return tr[s-1]}function RH(n,e,t,i,s){for(let r=tr.length-1;r>=tr.indexOf(t);r--){const a=tr[r];if(Wy[a].common&&n._adapter.diff(s,i,a)>=e-1)return a}return tr[t?tr.indexOf(t):0]}function PH(n){for(let e=tr.indexOf(n)+1,t=tr.length;e<t;++e)if(Wy[tr[e]].common)return tr[e]}function BT(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:s}=zS(t,e),r=t[i]>=e?t[i]:t[s];n[r]=!0}}function NH(n,e,t,i){const s=n._adapter,r=+s.startOf(e[0].value,i),a=e[e.length-1].value;let o,l;for(o=r;o<=a;o=+s.add(o,1,i))l=t[o],l>=0&&(e[l].major=!0);return e}function UT(n,e,t){const i=[],s={},r=e.length;let a,o;for(a=0;a<r;++a)o=e[a],s[o]=a,i.push({value:o,major:!1});return r===0||!t?i:NH(n,i,s,t)}class lp extends gu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),s=this._adapter=new VU._date(e.adapters.date);s.init(t),gf(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:FT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:a,maxDefined:o}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!o&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=mi(s)&&!isNaN(s)?s:+t.startOf(Date.now(),i),r=mi(r)&&!isNaN(r)?r:+t.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,a=this.max,o=g7(s,r,a);return this._unit=t.unit||(i.autoSkip?jT(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):RH(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:PH(this._unit),this.initOffsets(s),e.reverse&&o.reverse(),UT(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;t=ss(t,0,a),i=ss(i,0,a),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,s=this.options,r=s.time,a=r.unit||jT(r.minUnit,t,i,this._getLabelCapacity(t)),o=Ht(s.ticks.stepSize,1),l=a==="week"?r.isoWeekday:!1,c=Fd(l)||l===!0,u={};let d=t,h,f;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":a),e.diff(i,t,a)>1e5*o)throw new Error(t+" and "+i+" are too far apart with stepSize of "+o+" "+a);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<i;h=+e.add(h,o,a),f++)BT(u,h,p);return(h===i||s.bounds==="ticks"||f===1)&&BT(u,h,p),Object.keys(u).sort(MT).map(m=>+m)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,r=this._unit,a=t||s[r];return this._adapter.format(e,a)}_tickFormatFunction(e,t,i,s){const r=this.options,a=r.ticks.callback;if(a)return $n(a,[e,t,i],this);const o=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&o[l],d=c&&o[c],h=i[t],f=c&&d&&h&&h.major;return this._adapter.format(e,s||(f?d:u))}generateTickLabels(e){let t,i,s;for(t=0,i=e.length;t<i;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,s=da(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(s),a=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:i*r+o*a,h:i*a+o*r}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,s=i[t.unit]||i.millisecond,r=this._tickFormatFunction(e,0,UT(this,[e],this._majorUnit),s),a=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,i=s.length;t<i;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const s=this.getLabels();for(t=0,i=s.length;t<i;++t)e.push(FT(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return wR(e.sort(MT))}}Ge(lp,"id","time"),Ge(lp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function sm(n,e,t){let i=0,s=n.length-1,r,a,o,l;t?(e>=n[i].pos&&e<=n[s].pos&&({lo:i,hi:s}=Co(n,"pos",e)),{pos:r,time:o}=n[i],{pos:a,time:l}=n[s]):(e>=n[i].time&&e<=n[s].time&&({lo:i,hi:s}=Co(n,"time",e)),{time:r,pos:o}=n[i],{time:a,pos:l}=n[s]);const c=a-r;return c?o+(l-o)*(e-r)/c:o}class Gb extends lp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=sm(t,this.min),this._tableRange=sm(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,s=[],r=[];let a,o,l,c,u;for(a=0,o=e.length;a<o;++a)c=e[a],c>=t&&c<=i&&s.push(c);if(s.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(a=0,o=s.length;a<o;++a)u=s[a+1],l=s[a-1],c=s[a],Math.round((u+l)/2)!==c&&r.push({time:c,pos:a/(o-1)});return r}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(sm(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return sm(this._table,i*this._tableRange+this._minPos,!0)}}Ge(Gb,"id","timeseries"),Ge(Gb,"defaults",lp.defaults);var DH=Object.freeze({__proto__:null,CategoryScale:rp,LinearScale:ap,LogarithmicScale:Wb,RadialLinearScale:nf,TimeScale:lp,TimeSeriesScale:Gb});const OH=[WU,x9,dH,DH],hP="label";function $T(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function MH(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function fP(n,e){n.labels=e}function pP(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hP;const i=[];n.datasets=e.map(s=>{const r=n.datasets.find(a=>a[t]===s[t]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function FH(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hP;const t={labels:[],datasets:[]};return fP(t,n.labels),pP(t,n.datasets,e),t}function jH(n,e){const{height:t=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:a,data:o,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=n,f=O.useRef(null),p=O.useRef(null),m=()=>{f.current&&(p.current=new Xd(f.current,{type:a,data:FH(o,r),options:l&&{...l},plugins:c}),$T(e,p.current))},v=()=>{$T(e,null),p.current&&(p.current.destroy(),p.current=null)};return O.useEffect(()=>{!s&&p.current&&l&&MH(p.current,l)},[s,l]),O.useEffect(()=>{!s&&p.current&&fP(p.current.config.data,o.labels)},[s,o.labels]),O.useEffect(()=>{!s&&p.current&&o.datasets&&pP(p.current.config.data,o.datasets,r)},[s,o.datasets]),O.useEffect(()=>{p.current&&(s?(v(),setTimeout(m)):p.current.update(d))},[s,l,o.labels,o.datasets,d]),O.useEffect(()=>{p.current&&(v(),setTimeout(m))},[a]),O.useEffect(()=>(m(),()=>v()),[]),ua.createElement("canvas",{ref:f,role:"img",height:t,width:i,...h},u)}const BH=O.forwardRef(jH);function gP(n,e){return Xd.register(e),O.forwardRef((t,i)=>ua.createElement(BH,{...t,ref:i,type:n}))}const UH=gP("bar",xf),$H=gP("scatter",Sf);Xd.register(rp,ap,_f,cP,nw,ew);function _c({keys:n,values:e}){const t={labels:n,datasets:[{data:e,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]},i={responsive:!0,scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}};return S.jsx(UH,{data:t,options:i})}Xd.register(rp,ap,wf,Ro,nw,ew);function HH({dataPoints:n}){const e=["02 PM","03 PM","04 PM","05 PM","06 PM","07 PM","08 PM","09 PM"],t=n.reduce((o,l)=>(o[l.day]||(o[l.day]=[]),o[l.day].push({x:l.hour,y:l.avg}),o),{});Object.keys(t).forEach(o=>{t[o].sort((l,c)=>e.indexOf(l.x)-e.indexOf(c.x))});const i=["rgba(255, 99, 132, 0.7)","rgba(54, 162, 235, 0.7)","rgba(255, 206, 86, 0.7)","rgba(75, 192, 192, 0.7)","rgba(153, 102, 255, 0.7)","rgba(255, 159, 64, 0.7)","rgba(201, 203, 207, 0.7)"],r={labels:e,datasets:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((o,l)=>({label:o,data:t[o]||[],backgroundColor:i[l%i.length],pointRadius:6,pointHoverRadius:8}))},a={responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"category",title:{display:!0,text:"Hora"},ticks:{padding:10}},y:{beginAtZero:!0,title:{display:!0,text:"Promedio"},ticks:{callback:o=>o.toFixed(2)}}},plugins:{legend:{display:!0}}};return S.jsx("div",{style:{width:"100%",height:"500px"},children:S.jsx($H,{data:r,options:a})})}const zH="modulepreload",WH=function(n){return"/"+n},HT={},Yb=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=WH(l),l in HT)return;HT[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":zH,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};function kn(n){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(n)}var ks=Uint8Array,Sr=Uint16Array,iw=Int32Array,Vy=new ks([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gy=new ks([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qb=new ks([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mP=function(n,e){for(var t=new Sr(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var s=new iw(t[30]),i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)s[r]=r-t[i]<<5|i;return{b:t,r:s}},yP=mP(Vy,2),vP=yP.b,Kb=yP.r;vP[28]=258,Kb[258]=28;var xP=mP(Gy,0),VH=xP.b,zT=xP.r,Xb=new Sr(32768);for(var Wn=0;Wn<32768;++Wn){var hl=(Wn&43690)>>1|(Wn&21845)<<1;hl=(hl&52428)>>2|(hl&13107)<<2,hl=(hl&61680)>>4|(hl&3855)<<4,Xb[Wn]=((hl&65280)>>8|(hl&255)<<8)>>1}var qa=function(n,e,t){for(var i=n.length,s=0,r=new Sr(e);s<i;++s)n[s]&&++r[n[s]-1];var a=new Sr(e);for(s=1;s<e;++s)a[s]=a[s-1]+r[s-1]<<1;var o;if(t){o=new Sr(1<<e);var l=15-e;for(s=0;s<i;++s)if(n[s])for(var c=s<<4|n[s],u=e-n[s],d=a[n[s]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[Xb[d]>>l]=c}else for(o=new Sr(i),s=0;s<i;++s)n[s]&&(o[s]=Xb[a[n[s]-1]++]>>15-n[s]);return o},Jl=new ks(288);for(var Wn=0;Wn<144;++Wn)Jl[Wn]=8;for(var Wn=144;Wn<256;++Wn)Jl[Wn]=9;for(var Wn=256;Wn<280;++Wn)Jl[Wn]=7;for(var Wn=280;Wn<288;++Wn)Jl[Wn]=8;var cp=new ks(32);for(var Wn=0;Wn<32;++Wn)cp[Wn]=5;var GH=qa(Jl,9,0),YH=qa(Jl,9,1),qH=qa(cp,5,0),KH=qa(cp,5,1),F1=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},na=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},j1=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},sw=function(n){return(n+7)/8|0},bP=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new ks(n.subarray(e,t))},XH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],aa=function(n,e,t){var i=new Error(e||XH[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,aa),!t)throw i;return i},QH=function(n,e,t,i){var s=n.length,r=0;if(!s||e.f&&!e.l)return t||new ks(0);var a=!t,o=a||e.i!=2,l=e.i;a&&(t=new ks(s*3));var c=function(Re){var Ce=t.length;if(Re>Ce){var Be=new ks(Math.max(Ce*2,Re));Be.set(t),t=Be}},u=e.f||0,d=e.p||0,h=e.b||0,f=e.l,p=e.d,m=e.m,v=e.n,y=s*8;do{if(!f){u=na(n,d,1);var b=na(n,d+1,3);if(d+=3,b)if(b==1)f=YH,p=KH,m=9,v=5;else if(b==2){var C=na(n,d,31)+257,L=na(n,d+10,15)+4,k=C+na(n,d+5,31)+1;d+=14;for(var M=new ks(k),D=new ks(19),I=0;I<L;++I)D[qb[I]]=na(n,d+I*3,7);d+=L*3;for(var R=F1(D),q=(1<<R)-1,Y=qa(D,R,1),I=0;I<k;){var ee=Y[na(n,d,q)];d+=ee&15;var x=ee>>4;if(x<16)M[I++]=x;else{var j=0,z=0;for(x==16?(z=3+na(n,d,3),d+=2,j=M[I-1]):x==17?(z=3+na(n,d,7),d+=3):x==18&&(z=11+na(n,d,127),d+=7);z--;)M[I++]=j}}var B=M.subarray(0,C),U=M.subarray(C);m=F1(B),v=F1(U),f=qa(B,m,1),p=qa(U,v,1)}else aa(1);else{var x=sw(d)+4,_=n[x-4]|n[x-3]<<8,T=x+_;if(T>s){l&&aa(0);break}o&&c(h+_),t.set(n.subarray(x,T),h),e.b=h+=_,e.p=d=T*8,e.f=u;continue}if(d>y){l&&aa(0);break}}o&&c(h+131072);for(var Q=(1<<m)-1,re=(1<<v)-1,N=d;;N=d){var j=f[j1(n,d)&Q],W=j>>4;if(d+=j&15,d>y){l&&aa(0);break}if(j||aa(2),W<256)t[h++]=W;else if(W==256){N=d,f=null;break}else{var K=W-254;if(W>264){var I=W-257,Z=Vy[I];K=na(n,d,(1<<Z)-1)+vP[I],d+=Z}var te=p[j1(n,d)&re],oe=te>>4;te||aa(3),d+=te&15;var U=VH[oe];if(oe>3){var Z=Gy[oe];U+=j1(n,d)&(1<<Z)-1,d+=Z}if(d>y){l&&aa(0);break}o&&c(h+131072);var de=h+K;if(h<U){var ge=r-U,De=Math.min(U,de);for(ge+h<0&&aa(3);h<De;++h)t[h]=i[ge+h]}for(;h<de;++h)t[h]=t[h-U]}}e.l=f,e.p=N,e.b=h,e.f=u,f&&(u=1,e.m=m,e.d=p,e.n=v)}while(!u);return h!=t.length&&a?bP(t,0,h):t.subarray(0,h)},fo=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},$h=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},B1=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var s=t.length,r=t.slice();if(!s)return{t:wP,l:0};if(s==1){var a=new ks(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(T,C){return T.f-C.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=s-1;)o=t[t[c].f<t[d].f?c++:d++],l=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var h=r[0].s,i=1;i<s;++i)r[i].s>h&&(h=r[i].s);var f=new Sr(h+1),p=Qb(t[u-1],f,0);if(p>e){var i=0,m=0,v=p-e,y=1<<v;for(r.sort(function(C,L){return f[L.s]-f[C.s]||C.f-L.f});i<s;++i){var b=r[i].s;if(f[b]>e)m+=y-(1<<p-f[b]),f[b]=e;else break}for(m>>=v;m>0;){var x=r[i].s;f[x]<e?m-=1<<e-f[x]++-1:++i}for(;i>=0&&m;--i){var _=r[i].s;f[_]==e&&(--f[_],++m)}p=e}return{t:new ks(f),l:p}},Qb=function(n,e,t){return n.s==-1?Math.max(Qb(n.l,e,t+1),Qb(n.r,e,t+1)):e[n.s]=t},WT=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Sr(++e),i=0,s=n[0],r=1,a=function(l){t[i++]=l},o=1;o<=e;++o)if(n[o]==s&&o!=e)++r;else{if(!s&&r>2){for(;r>138;r-=138)a(32754);r>2&&(a(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(a(s),--r;r>6;r-=6)a(8304);r>2&&(a(r-3<<5|8208),r=0)}for(;r--;)a(s);r=1,s=n[o]}return{c:t.subarray(0,i),n:e}},Hh=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},SP=function(n,e,t){var i=t.length,s=sw(e+2);n[s]=i&255,n[s+1]=i>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var r=0;r<i;++r)n[s+r+4]=t[r];return(s+4+i)*8},VT=function(n,e,t,i,s,r,a,o,l,c,u){fo(e,u++,t),++s[256];for(var d=B1(s,15),h=d.t,f=d.l,p=B1(r,15),m=p.t,v=p.l,y=WT(h),b=y.c,x=y.n,_=WT(m),T=_.c,C=_.n,L=new Sr(19),k=0;k<b.length;++k)++L[b[k]&31];for(var k=0;k<T.length;++k)++L[T[k]&31];for(var M=B1(L,7),D=M.t,I=M.l,R=19;R>4&&!D[qb[R-1]];--R);var q=c+5<<3,Y=Hh(s,Jl)+Hh(r,cp)+a,ee=Hh(s,h)+Hh(r,m)+a+14+3*R+Hh(L,D)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&q<=Y&&q<=ee)return SP(e,u,n.subarray(l,l+c));var j,z,B,U;if(fo(e,u,1+(ee<Y)),u+=2,ee<Y){j=qa(h,f,0),z=h,B=qa(m,v,0),U=m;var Q=qa(D,I,0);fo(e,u,x-257),fo(e,u+5,C-1),fo(e,u+10,R-4),u+=14;for(var k=0;k<R;++k)fo(e,u+3*k,D[qb[k]]);u+=3*R;for(var re=[b,T],N=0;N<2;++N)for(var W=re[N],k=0;k<W.length;++k){var K=W[k]&31;fo(e,u,Q[K]),u+=D[K],K>15&&(fo(e,u,W[k]>>5&127),u+=W[k]>>12)}}else j=GH,z=Jl,B=qH,U=cp;for(var k=0;k<o;++k){var Z=i[k];if(Z>255){var K=Z>>18&31;$h(e,u,j[K+257]),u+=z[K+257],K>7&&(fo(e,u,Z>>23&31),u+=Vy[K]);var te=Z&31;$h(e,u,B[te]),u+=U[te],te>3&&($h(e,u,Z>>5&8191),u+=Gy[te])}else $h(e,u,j[Z]),u+=z[Z]}return $h(e,u,j[256]),u+z[256]},JH=new iw([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wP=new ks(0),ZH=function(n,e,t,i,s,r){var a=r.z||n.length,o=new ks(i+a+5*(1+Math.ceil(a/7e3))+s),l=o.subarray(i,o.length-s),c=r.l,u=(r.r||0)&7;if(e){u&&(l[0]=r.r>>3);for(var d=JH[e-1],h=d>>13,f=d&8191,p=(1<<t)-1,m=r.p||new Sr(32768),v=r.h||new Sr(p+1),y=Math.ceil(t/3),b=2*y,x=function(Ze){return(n[Ze]^n[Ze+1]<<y^n[Ze+2]<<b)&p},_=new iw(25e3),T=new Sr(288),C=new Sr(32),L=0,k=0,M=r.i||0,D=0,I=r.w||0,R=0;M+2<a;++M){var q=x(M),Y=M&32767,ee=v[q];if(m[Y]=ee,v[q]=Y,I<=M){var j=a-M;if((L>7e3||D>24576)&&(j>423||!c)){u=VT(n,l,0,_,T,C,k,D,R,M-R,u),D=L=k=0,R=M;for(var z=0;z<286;++z)T[z]=0;for(var z=0;z<30;++z)C[z]=0}var B=2,U=0,Q=f,re=Y-ee&32767;if(j>2&&q==x(M-re))for(var N=Math.min(h,j)-1,W=Math.min(32767,M),K=Math.min(258,j);re<=W&&--Q&&Y!=ee;){if(n[M+B]==n[M+B-re]){for(var Z=0;Z<K&&n[M+Z]==n[M+Z-re];++Z);if(Z>B){if(B=Z,U=re,Z>N)break;for(var te=Math.min(re,Z-2),oe=0,z=0;z<te;++z){var de=M-re+z&32767,ge=m[de],De=de-ge&32767;De>oe&&(oe=De,ee=de)}}}Y=ee,ee=m[Y],re+=Y-ee&32767}if(U){_[D++]=268435456|Kb[B]<<18|zT[U];var Re=Kb[B]&31,Ce=zT[U]&31;k+=Vy[Re]+Gy[Ce],++T[257+Re],++C[Ce],I=M+B,++L}else _[D++]=n[M],++T[n[M]]}}for(M=Math.max(M,I);M<a;++M)_[D++]=n[M],++T[n[M]];u=VT(n,l,c,_,T,C,k,D,R,M-R,u),c||(r.r=u&7|l[u/8|0]<<3,u-=7,r.h=v,r.p=m,r.i=M,r.w=I)}else{for(var M=r.w||0;M<a+c;M+=65535){var Be=M+65535;Be>=a&&(l[u/8|0]=c,Be=a),u=SP(l,u+1,n.subarray(M,Be))}r.i=a}return bP(o,0,i+sw(u)+s)},_P=function(){var n=1,e=0;return{p:function(t){for(var i=n,s=e,r=t.length|0,a=0;a!=r;){for(var o=Math.min(a+2655,r);a<o;++a)s+=i+=t[a];i=(i&65535)+15*(i>>16),s=(s&65535)+15*(s>>16)}n=i,e=s},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},ez=function(n,e,t,i,s){if(!s&&(s={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),a=new ks(r.length+n.length);a.set(r),a.set(n,r.length),n=a,s.w=r.length}return ZH(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,s)},EP=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},tz=function(n,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=i<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var s=_P();s.p(e.dictionary),EP(n,2,s.d())}},nz=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&aa(6,"invalid zlib data"),(n[1]>>5&1)==1&&aa(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Jb(n,e){e||(e={});var t=_P();t.p(n);var i=ez(n,e,e.dictionary?6:2,4);return tz(i,e),EP(i,i.length-4,t.d()),i}function iz(n,e){return QH(n.subarray(nz(n),-4),{i:2},e,e)}var sz=typeof TextDecoder<"u"&&new TextDecoder,rz=0;try{sz.decode(wP,{stream:!0}),rz=1}catch{}var kt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function U1(){kt.console&&typeof kt.console.log=="function"&&kt.console.log.apply(kt.console,arguments)}var Mn={log:U1,warn:function(n){kt.console&&(typeof kt.console.warn=="function"?kt.console.warn.apply(kt.console,arguments):U1.call(null,arguments))},error:function(n){kt.console&&(typeof kt.console.error=="function"?kt.console.error.apply(kt.console,arguments):U1(n))}};function $1(n,e,t){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){Pc(i.response,e,t)},i.onerror=function(){Mn.error("could not download file")},i.send()}function GT(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function rm(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Ef,Zb,Pc=kt.saveAs||((typeof window>"u"?"undefined":kn(window))!=="object"||window!==kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var i=kt.URL||kt.webkitURL,s=document.createElement("a");e=e||n.name||"download",s.download=e,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?GT(s.href)?$1(n,e,t):rm(s,s.target="_blank"):rm(s)):(s.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){rm(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(GT(n))$1(n,e,t);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){rm(i)})}else navigator.msSaveOrOpenBlob(function(s,r){return r===void 0?r={autoBom:!1}:kn(r)!=="object"&&(Mn.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(n,t),e)}:function(n,e,t,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return $1(n,e,t);var s=n.type==="application/octet-stream",r=/constructor/i.test(kt.HTMLElement)||kt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&r)&&(typeof FileReader>"u"?"undefined":kn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=u:location=u,i=null},o.readAsDataURL(n)}else{var l=kt.URL||kt.webkitURL,c=l.createObjectURL(n);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function TP(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<t.length;i++){var s=t[i].re,r=t[i].process,a=s.exec(n);a&&(e=r(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function H1(n,e){var t=n[0],i=n[1],s=n[2],r=n[3];t=bs(t,i,s,r,e[0],7,-680876936),r=bs(r,t,i,s,e[1],12,-389564586),s=bs(s,r,t,i,e[2],17,606105819),i=bs(i,s,r,t,e[3],22,-1044525330),t=bs(t,i,s,r,e[4],7,-176418897),r=bs(r,t,i,s,e[5],12,1200080426),s=bs(s,r,t,i,e[6],17,-1473231341),i=bs(i,s,r,t,e[7],22,-45705983),t=bs(t,i,s,r,e[8],7,1770035416),r=bs(r,t,i,s,e[9],12,-1958414417),s=bs(s,r,t,i,e[10],17,-42063),i=bs(i,s,r,t,e[11],22,-1990404162),t=bs(t,i,s,r,e[12],7,1804603682),r=bs(r,t,i,s,e[13],12,-40341101),s=bs(s,r,t,i,e[14],17,-1502002290),t=Ss(t,i=bs(i,s,r,t,e[15],22,1236535329),s,r,e[1],5,-165796510),r=Ss(r,t,i,s,e[6],9,-1069501632),s=Ss(s,r,t,i,e[11],14,643717713),i=Ss(i,s,r,t,e[0],20,-373897302),t=Ss(t,i,s,r,e[5],5,-701558691),r=Ss(r,t,i,s,e[10],9,38016083),s=Ss(s,r,t,i,e[15],14,-660478335),i=Ss(i,s,r,t,e[4],20,-405537848),t=Ss(t,i,s,r,e[9],5,568446438),r=Ss(r,t,i,s,e[14],9,-1019803690),s=Ss(s,r,t,i,e[3],14,-187363961),i=Ss(i,s,r,t,e[8],20,1163531501),t=Ss(t,i,s,r,e[13],5,-1444681467),r=Ss(r,t,i,s,e[2],9,-51403784),s=Ss(s,r,t,i,e[7],14,1735328473),t=ws(t,i=Ss(i,s,r,t,e[12],20,-1926607734),s,r,e[5],4,-378558),r=ws(r,t,i,s,e[8],11,-2022574463),s=ws(s,r,t,i,e[11],16,1839030562),i=ws(i,s,r,t,e[14],23,-35309556),t=ws(t,i,s,r,e[1],4,-1530992060),r=ws(r,t,i,s,e[4],11,1272893353),s=ws(s,r,t,i,e[7],16,-155497632),i=ws(i,s,r,t,e[10],23,-1094730640),t=ws(t,i,s,r,e[13],4,681279174),r=ws(r,t,i,s,e[0],11,-358537222),s=ws(s,r,t,i,e[3],16,-722521979),i=ws(i,s,r,t,e[6],23,76029189),t=ws(t,i,s,r,e[9],4,-640364487),r=ws(r,t,i,s,e[12],11,-421815835),s=ws(s,r,t,i,e[15],16,530742520),t=_s(t,i=ws(i,s,r,t,e[2],23,-995338651),s,r,e[0],6,-198630844),r=_s(r,t,i,s,e[7],10,1126891415),s=_s(s,r,t,i,e[14],15,-1416354905),i=_s(i,s,r,t,e[5],21,-57434055),t=_s(t,i,s,r,e[12],6,1700485571),r=_s(r,t,i,s,e[3],10,-1894986606),s=_s(s,r,t,i,e[10],15,-1051523),i=_s(i,s,r,t,e[1],21,-2054922799),t=_s(t,i,s,r,e[8],6,1873313359),r=_s(r,t,i,s,e[15],10,-30611744),s=_s(s,r,t,i,e[6],15,-1560198380),i=_s(i,s,r,t,e[13],21,1309151649),t=_s(t,i,s,r,e[4],6,-145523070),r=_s(r,t,i,s,e[11],10,-1120210379),s=_s(s,r,t,i,e[2],15,718787259),i=_s(i,s,r,t,e[9],21,-343485551),n[0]=Nl(t,n[0]),n[1]=Nl(i,n[1]),n[2]=Nl(s,n[2]),n[3]=Nl(r,n[3])}function Yy(n,e,t,i,s,r){return e=Nl(Nl(e,n),Nl(i,r)),Nl(e<<s|e>>>32-s,t)}function bs(n,e,t,i,s,r,a){return Yy(e&t|~e&i,n,e,s,r,a)}function Ss(n,e,t,i,s,r,a){return Yy(e&i|t&~i,n,e,s,r,a)}function ws(n,e,t,i,s,r,a){return Yy(e^t^i,n,e,s,r,a)}function _s(n,e,t,i,s,r,a){return Yy(t^(e|~i),n,e,s,r,a)}function AP(n){var e,t=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)H1(i,az(n.substring(e-64,e)));n=n.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)s[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(H1(i,s),e=0;e<16;e++)s[e]=0;return s[14]=8*t,H1(i,s),i}function az(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Ef=kt.atob.bind(kt),Zb=kt.btoa.bind(kt);var YT="0123456789abcdef".split("");function oz(n){for(var e="",t=0;t<4;t++)e+=YT[n>>8*t+4&15]+YT[n>>8*t&15];return e}function lz(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function e2(n){return AP(n).map(lz).join("")}var cz=function(n){for(var e=0;e<n.length;e++)n[e]=oz(n[e]);return n.join("")}(AP("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nl(n,e){if(cz){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function t2(n,e){var t,i,s,r;if(n!==t){for(var a=(s=n,r=1+(256/n.length>>0),new Array(r+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+a.charCodeAt(l))%256,o[l]=o[c],o[c]=u}t=n,i=o}else o=i;var d=e.length,h=0,f=0,p="";for(l=0;l<d;l++)f=(f+(u=o[h=(h+1)%256]))%256,o[h]=o[f],o[f]=u,a=o[(o[h]+o[f])%256],p+=String.fromCharCode(e.charCodeAt(l)^a);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var qT={print:4,modify:8,copy:16,"annot-forms":32};function Ju(n,e,t,i){this.v=1,this.r=2;var s=192;n.forEach(function(o){if(qT.perm!==void 0)throw new Error("Invalid permission: "+o);s+=qT[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var r=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,a),this.P=-(1+(255^s)),this.encryptionKey=e2(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=t2(this.encryptionKey,this.padding)}function Zu(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,i=0;i<t;i++){var s=n.charCodeAt(i);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=n[i]}return e}function KT(n){if(kn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,i,s){if(s=s||!1,typeof t!="string"||typeof i!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[i,!!s],r},this.unsubscribe=function(t){for(var i in e)if(e[i][t])return delete e[i][t],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var i=Array.prototype.slice.call(arguments,1),s=[];for(var r in e[t]){var a=e[t][r];try{a[0].apply(n,i)}catch(o){kt.console&&Mn.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(r)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function up(n){if(!(this instanceof up))return new up(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function LP(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Tl(n,e,t,i,s){if(!(this instanceof Tl))return new Tl(n,e,t,i,s);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,LP.call(this,i,s)}function Hc(n,e,t,i,s){if(!(this instanceof Hc))return new Hc(n,e,t,i,s);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,LP.call(this,i,s)}function Tt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],s=arguments[2],r=arguments[3],a=[],o=1,l=16,c="S",u=null;kn(n=n||{})==="object"&&(t=n.orientation,i=n.unit||i,s=n.format||s,r=n.compress||n.compressPdf||r,(u=n.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),a=n.filters||(r===!0?["FlateEncode"]:a),i=i||"mm",t=(""+(t||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=KT;var p="1.3",m=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(E){p=E};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return v};var y=f.__private__.getPageFormat=function(E){return v[E]};s=s||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},x=b.COMPAT;function _(){this.saveGraphicsState(),ne(new ft(Ve,0,0,-Ve,0,Zo()*Ve).toString()+" cm"),this.setFontSize(this.getFontSize()/Ve),c="n",x=b.ADVANCED}function T(){this.restoreGraphicsState(),c="S",x=b.COMPAT}var C=f.__private__.combineFontStyleAndFontWeight=function(E,H){if(E=="bold"&&H=="normal"||E=="bold"&&H==400||E=="normal"&&H=="italic"||E=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(E=H==400||H==="normal"?E==="italic"?"italic":"normal":H!=700&&H!=="bold"||E!=="normal"?(H==700?"bold":H)+""+E:"bold"),E};f.advancedAPI=function(E){var H=x===b.COMPAT;return H&&_.call(this),typeof E!="function"||(E(this),H&&T.call(this)),this},f.compatAPI=function(E){var H=x===b.ADVANCED;return H&&T.call(this),typeof E!="function"||(E(this),H&&_.call(this)),this},f.isAdvancedAPI=function(){return x===b.ADVANCED};var L,k=function(E){if(x!==b.ADVANCED)throw new Error(E+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=f.roundToPrecision=f.__private__.roundToPrecision=function(E,H){var se=e||H;if(isNaN(E)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return E.toFixed(se).replace(/0+$/,"")};L=f.hpf=f.__private__.hpf=typeof l=="number"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return M(E,l)}:l==="smart"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return M(E,E>-1&&E<1?16:5)}:function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return M(E,16)};var D=f.f2=f.__private__.f2=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f2");return M(E,2)},I=f.__private__.f3=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f3");return M(E,3)},R=f.scale=f.__private__.scale=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.scale");return x===b.COMPAT?E*Ve:x===b.ADVANCED?E:void 0},q=function(E){return x===b.COMPAT?Zo()-E:x===b.ADVANCED?E:void 0},Y=function(E){return R(q(E))};f.__private__.setPrecision=f.setPrecision=function(E){typeof parseInt(E,10)=="number"&&(e=parseInt(E,10))};var ee,j="00000000000000000000000000000000",z=f.__private__.getFileId=function(){return j},B=f.__private__.setFileId=function(E){return j=E!==void 0&&/^[a-fA-F0-9]{32}$/.test(E)?E.toUpperCase():j.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(ms=new Ju(u.userPermissions,u.userPassword,u.ownerPassword,j)),j};f.setFileId=function(E){return B(E),this},f.getFileId=function(){return z()};var U=f.__private__.convertDateToPDFDate=function(E){var H=E.getTimezoneOffset(),se=H<0?"+":"-",ae=Math.floor(Math.abs(H/60)),me=Math.abs(H%60),Ae=[se,K(ae),"'",K(me),"'"].join("");return["D:",E.getFullYear(),K(E.getMonth()+1),K(E.getDate()),K(E.getHours()),K(E.getMinutes()),K(E.getSeconds()),Ae].join("")},Q=f.__private__.convertPDFDateToDate=function(E){var H=parseInt(E.substr(2,4),10),se=parseInt(E.substr(6,2),10)-1,ae=parseInt(E.substr(8,2),10),me=parseInt(E.substr(10,2),10),Ae=parseInt(E.substr(12,2),10),je=parseInt(E.substr(14,2),10);return new Date(H,se,ae,me,Ae,je,0)},re=f.__private__.setCreationDate=function(E){var H;if(E===void 0&&(E=new Date),E instanceof Date)H=U(E);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(E))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=E}return ee=H},N=f.__private__.getCreationDate=function(E){var H=ee;return E==="jsDate"&&(H=Q(ee)),H};f.setCreationDate=function(E){return re(E),this},f.getCreationDate=function(E){return N(E)};var W,K=f.__private__.padd2=function(E){return("0"+parseInt(E)).slice(-2)},Z=f.__private__.padd2Hex=function(E){return("00"+(E=E.toString())).substr(E.length)},te=0,oe=[],de=[],ge=0,De=[],Re=[],Ce=!1,Be=de,Ze=function(){te=0,ge=0,de=[],oe=[],De=[],gs=jn(),os=jn()};f.__private__.setCustomOutputDestination=function(E){Ce=!0,Be=E};var ve=function(E){Ce||(Be=E)};f.__private__.resetCustomOutputDestination=function(){Ce=!1,Be=de};var ne=f.__private__.out=function(E){return E=E.toString(),ge+=E.length+1,Be.push(E),Be},Qe=f.__private__.write=function(E){return ne(arguments.length===1?E.toString():Array.prototype.join.call(arguments," "))},Ye=f.__private__.getArrayBuffer=function(E){for(var H=E.length,se=new ArrayBuffer(H),ae=new Uint8Array(se);H--;)ae[H]=E.charCodeAt(H);return se},he=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return he};var Me=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(E){return Me=x===b.ADVANCED?E/Ve:E,this};var Ue,$e=f.__private__.getFontSize=f.getFontSize=function(){return x===b.COMPAT?Me:Me*Ve},Fe=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(E){return Fe=E,this},f.__private__.getR2L=f.getR2L=function(){return Fe};var Xe,_t=f.__private__.setZoomMode=function(E){var H=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(E))Ue=E;else if(isNaN(E)){if(H.indexOf(E)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+E+'" is not recognized.');Ue=E}else Ue=parseInt(E,10)};f.__private__.getZoomMode=function(){return Ue};var We,Lt=f.__private__.setPageMode=function(E){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(E)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+E+'" is not recognized.');Xe=E};f.__private__.getPageMode=function(){return Xe};var zt=f.__private__.setLayoutMode=function(E){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(E)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+E+'" is not recognized.');We=E};f.__private__.getLayoutMode=function(){return We},f.__private__.setDisplayMode=f.setDisplayMode=function(E,H,se){return _t(E),zt(H),Lt(se),this};var ht={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(E){if(Object.keys(ht).indexOf(E)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ht[E]},f.__private__.getDocumentProperties=function(){return ht},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(E){for(var H in ht)ht.hasOwnProperty(H)&&E[H]&&(ht[H]=E[H]);return this},f.__private__.setDocumentProperty=function(E,H){if(Object.keys(ht).indexOf(E)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ht[E]=H};var Ct,Ve,ii,qt,Xi,Gt={},Kt={},ps=[],Xt={},Ns={},un={},as={},cr=null,wn=0,pt=[],Qt=new KT(f),Ws=n.hotfixes||[],Dn={},vi={},Ii=[],ft=function E(H,se,ae,me,Ae,je){if(!(this instanceof E))return new E(H,se,ae,me,Ae,je);isNaN(H)&&(H=1),isNaN(se)&&(se=0),isNaN(ae)&&(ae=0),isNaN(me)&&(me=1),isNaN(Ae)&&(Ae=0),isNaN(je)&&(je=0),this._matrix=[H,se,ae,me,Ae,je]};Object.defineProperty(ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ft.prototype.join=function(E){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(E)},ft.prototype.multiply=function(E){var H=E.sx*this.sx+E.shy*this.shx,se=E.sx*this.shy+E.shy*this.sy,ae=E.shx*this.sx+E.sy*this.shx,me=E.shx*this.shy+E.sy*this.sy,Ae=E.tx*this.sx+E.ty*this.shx+this.tx,je=E.tx*this.shy+E.ty*this.sy+this.ty;return new ft(H,se,ae,me,Ae,je)},ft.prototype.decompose=function(){var E=this.sx,H=this.shy,se=this.shx,ae=this.sy,me=this.tx,Ae=this.ty,je=Math.sqrt(E*E+H*H),tt=(E/=je)*se+(H/=je)*ae;se-=E*tt,ae-=H*tt;var mt=Math.sqrt(se*se+ae*ae);return tt/=mt,E*(ae/=mt)<H*(se/=mt)&&(E=-E,H=-H,tt=-tt,je=-je),{scale:new ft(je,0,0,mt,0,0),translate:new ft(1,0,0,1,me,Ae),rotate:new ft(E,H,-H,E,0,0),skew:new ft(1,0,tt,1,0,0)}},ft.prototype.toString=function(E){return this.join(" ")},ft.prototype.inversed=function(){var E=this.sx,H=this.shy,se=this.shx,ae=this.sy,me=this.tx,Ae=this.ty,je=1/(E*ae-H*se),tt=ae*je,mt=-H*je,Mt=-se*je,Nt=E*je;return new ft(tt,mt,Mt,Nt,-tt*me-Mt*Ae,-mt*me-Nt*Ae)},ft.prototype.applyToPoint=function(E){var H=E.x*this.sx+E.y*this.shx+this.tx,se=E.x*this.shy+E.y*this.sy+this.ty;return new _u(H,se)},ft.prototype.applyToRectangle=function(E){var H=this.applyToPoint(E),se=this.applyToPoint(new _u(E.x+E.w,E.y+E.h));return new ah(H.x,H.y,se.x-H.x,se.y-H.y)},ft.prototype.clone=function(){var E=this.sx,H=this.shy,se=this.shx,ae=this.sy,me=this.tx,Ae=this.ty;return new ft(E,H,se,ae,me,Ae)},f.Matrix=ft;var ji=f.matrixMult=function(E,H){return H.multiply(E)},Qi=new ft(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Qi;var di=function(E,H){if(!Ns[E]){var se=(H instanceof Tl?"Sh":"P")+(Object.keys(Xt).length+1).toString(10);H.id=se,Ns[E]=se,Xt[se]=H,Qt.publish("addPattern",H)}};f.ShadingPattern=Tl,f.TilingPattern=Hc,f.addShadingPattern=function(E,H){return k("addShadingPattern()"),di(E,H),this},f.beginTilingPattern=function(E){k("beginTilingPattern()"),Xp(E.boundingBox[0],E.boundingBox[1],E.boundingBox[2]-E.boundingBox[0],E.boundingBox[3]-E.boundingBox[1],E.matrix)},f.endTilingPattern=function(E,H){k("endTilingPattern()"),H.stream=Re[W].join(`
`),di(E,H),Qt.publish("endTilingPattern",H),Ii.pop().restore()};var Fn=f.__private__.newObject=function(){var E=jn();return Ft(E,!0),E},jn=f.__private__.newObjectDeferred=function(){return te++,oe[te]=function(){return ge},te},Ft=function(E,H){return H=typeof H=="boolean"&&H,oe[E]=ge,H&&ne(E+" 0 obj"),E},Xn=f.__private__.newAdditionalObject=function(){var E={objId:jn(),content:""};return De.push(E),E},gs=jn(),os=jn(),Ri=f.__private__.decodeColorString=function(E){var H=E.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length===5&&(H[4]==="k"||H[4]==="K")&&(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var se=parseFloat(H[0]);H=[se,se,se,"r"]}for(var ae="#",me=0;me<3;me++)ae+=("0"+Math.floor(255*parseFloat(H[me])).toString(16)).slice(-2);return ae},xi=f.__private__.encodeColorString=function(E){var H;typeof E=="string"&&(E={ch1:E});var se=E.ch1,ae=E.ch2,me=E.ch3,Ae=E.ch4,je=E.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var tt=new TP(se);if(tt.ok)se=tt.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var mt=parseInt(se.substr(1),16);se=mt>>16&255,ae=mt>>8&255,me=255&mt}if(ae===void 0||Ae===void 0&&se===ae&&ae===me)if(typeof se=="string")H=se+" "+je[0];else switch(E.precision){case 2:H=D(se/255)+" "+je[0];break;case 3:default:H=I(se/255)+" "+je[0]}else if(Ae===void 0||kn(Ae)==="object"){if(Ae&&!isNaN(Ae.a)&&Ae.a===0)return H=["1.","1.","1.",je[1]].join(" ");if(typeof se=="string")H=[se,ae,me,je[1]].join(" ");else switch(E.precision){case 2:H=[D(se/255),D(ae/255),D(me/255),je[1]].join(" ");break;default:case 3:H=[I(se/255),I(ae/255),I(me/255),je[1]].join(" ")}}else if(typeof se=="string")H=[se,ae,me,Ae,je[2]].join(" ");else switch(E.precision){case 2:H=[D(se),D(ae),D(me),D(Ae),je[2]].join(" ");break;case 3:default:H=[I(se),I(ae),I(me),I(Ae),je[2]].join(" ")}return H},Pi=f.__private__.getFilters=function(){return a},bi=f.__private__.putStream=function(E){var H=(E=E||{}).data||"",se=E.filters||Pi(),ae=E.alreadyAppliedFilters||[],me=E.addLength1||!1,Ae=H.length,je=E.objectId,tt=function(ys){return ys};if(u!==null&&je===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(tt=ms.encryptor(je,0));var mt={};se===!0&&(se=["FlateEncode"]);var Mt=E.additionalKeyValues||[],Nt=(mt=Tt.API.processDataByFilters!==void 0?Tt.API.processDataByFilters(H,se):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(ae)?ae.join(" "):ae.toString());if(mt.data.length!==0&&(Mt.push({key:"Length",value:mt.data.length}),me===!0&&Mt.push({key:"Length1",value:Ae})),Nt.length!=0)if(Nt.split("/").length-1==1)Mt.push({key:"Filter",value:Nt});else{Mt.push({key:"Filter",value:"["+Nt+"]"});for(var ln=0;ln<Mt.length;ln+=1)if(Mt[ln].key==="DecodeParms"){for(var ri=[],hi=0;hi<mt.reverseChain.split("/").length-1;hi+=1)ri.push("null");ri.push(Mt[ln].value),Mt[ln].value="["+ri.join(" ")+"]"}}ne("<<");for(var Di=0;Di<Mt.length;Di++)ne("/"+Mt[Di].key+" "+Mt[Di].value);ne(">>"),mt.data.length!==0&&(ne("stream"),ne(tt(mt.data)),ne("endstream"))},Ds=f.__private__.putPage=function(E){var H=E.number,se=E.data,ae=E.objId,me=E.contentsObjId;Ft(ae,!0),ne("<</Type /Page"),ne("/Parent "+E.rootDictionaryObjId+" 0 R"),ne("/Resources "+E.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(L(E.mediaBox.bottomLeftX))+" "+parseFloat(L(E.mediaBox.bottomLeftY))+" "+L(E.mediaBox.topRightX)+" "+L(E.mediaBox.topRightY)+"]"),E.cropBox!==null&&ne("/CropBox ["+L(E.cropBox.bottomLeftX)+" "+L(E.cropBox.bottomLeftY)+" "+L(E.cropBox.topRightX)+" "+L(E.cropBox.topRightY)+"]"),E.bleedBox!==null&&ne("/BleedBox ["+L(E.bleedBox.bottomLeftX)+" "+L(E.bleedBox.bottomLeftY)+" "+L(E.bleedBox.topRightX)+" "+L(E.bleedBox.topRightY)+"]"),E.trimBox!==null&&ne("/TrimBox ["+L(E.trimBox.bottomLeftX)+" "+L(E.trimBox.bottomLeftY)+" "+L(E.trimBox.topRightX)+" "+L(E.trimBox.topRightY)+"]"),E.artBox!==null&&ne("/ArtBox ["+L(E.artBox.bottomLeftX)+" "+L(E.artBox.bottomLeftY)+" "+L(E.artBox.topRightX)+" "+L(E.artBox.topRightY)+"]"),typeof E.userUnit=="number"&&E.userUnit!==1&&ne("/UserUnit "+E.userUnit),Qt.publish("putPage",{objId:ae,pageContext:pt[H],pageNumber:H,page:se}),ne("/Contents "+me+" 0 R"),ne(">>"),ne("endobj");var Ae=se.join(`
`);return x===b.ADVANCED&&(Ae+=`
Q`),Ft(me,!0),bi({data:Ae,filters:Pi(),objectId:me}),ne("endobj"),ae},Bi=f.__private__.putPages=function(){var E,H,se=[];for(E=1;E<=wn;E++)pt[E].objId=jn(),pt[E].contentsObjId=jn();for(E=1;E<=wn;E++)se.push(Ds({number:E,data:Re[E],objId:pt[E].objId,contentsObjId:pt[E].contentsObjId,mediaBox:pt[E].mediaBox,cropBox:pt[E].cropBox,bleedBox:pt[E].bleedBox,trimBox:pt[E].trimBox,artBox:pt[E].artBox,userUnit:pt[E].userUnit,rootDictionaryObjId:gs,resourceDictionaryObjId:os}));Ft(gs,!0),ne("<</Type /Pages");var ae="/Kids [";for(H=0;H<wn;H++)ae+=se[H]+" 0 R ";ne(ae+"]"),ne("/Count "+wn),ne(">>"),ne("endobj"),Qt.publish("postPutPages")},Ui=function(E){Qt.publish("putFont",{font:E,out:ne,newObject:Fn,putStream:bi}),E.isAlreadyPutted!==!0&&(E.objectNumber=Fn(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+Zu(E.postScriptName)),ne("/Subtype /Type1"),typeof E.encoding=="string"&&ne("/Encoding /"+E.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},si=function(){for(var E in Gt)Gt.hasOwnProperty(E)&&(d===!1||d===!0&&h.hasOwnProperty(E))&&Ui(Gt[E])},Te=function(E){E.objectNumber=Fn();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[L(E.x),L(E.y),L(E.x+E.width),L(E.y+E.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+E.matrix.toString()+"]"});var se=E.pages[1].join(`
`);bi({data:se,additionalKeyValues:H,objectId:E.objectNumber}),ne("endobj")},gt=function(){for(var E in Dn)Dn.hasOwnProperty(E)&&Te(Dn[E])},Jt=function(E,H){var se,ae=[],me=1/(H-1);for(se=0;se<1;se+=me)ae.push(se);if(ae.push(1),E[0].offset!=0){var Ae={offset:0,color:E[0].color};E.unshift(Ae)}if(E[E.length-1].offset!=1){var je={offset:1,color:E[E.length-1].color};E.push(je)}for(var tt="",mt=0,Mt=0;Mt<ae.length;Mt++){for(se=ae[Mt];se>E[mt+1].offset;)mt++;var Nt=E[mt].offset,ln=(se-Nt)/(E[mt+1].offset-Nt),ri=E[mt].color,hi=E[mt+1].color;tt+=Z(Math.round((1-ln)*ri[0]+ln*hi[0]).toString(16))+Z(Math.round((1-ln)*ri[1]+ln*hi[1]).toString(16))+Z(Math.round((1-ln)*ri[2]+ln*hi[2]).toString(16))}return tt.trim()},rt=function(E,H){H||(H=21);var se=Fn(),ae=Jt(E.colors,H),me=[];me.push({key:"FunctionType",value:"0"}),me.push({key:"Domain",value:"[0.0 1.0]"}),me.push({key:"Size",value:"["+H+"]"}),me.push({key:"BitsPerSample",value:"8"}),me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),bi({data:ae,additionalKeyValues:me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),ne("endobj"),E.objectNumber=Fn(),ne("<< /ShadingType "+E.type),ne("/ColorSpace /DeviceRGB");var Ae="/Coords ["+L(parseFloat(E.coords[0]))+" "+L(parseFloat(E.coords[1]))+" ";E.type===2?Ae+=L(parseFloat(E.coords[2]))+" "+L(parseFloat(E.coords[3])):Ae+=L(parseFloat(E.coords[2]))+" "+L(parseFloat(E.coords[3]))+" "+L(parseFloat(E.coords[4]))+" "+L(parseFloat(E.coords[5])),ne(Ae+="]"),E.matrix&&ne("/Matrix ["+E.matrix.toString()+"]"),ne("/Function "+se+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},bt=function(E,H){var se=jn(),ae=Fn();H.push({resourcesOid:se,objectOid:ae}),E.objectNumber=ae;var me=[];me.push({key:"Type",value:"/Pattern"}),me.push({key:"PatternType",value:"1"}),me.push({key:"PaintType",value:"1"}),me.push({key:"TilingType",value:"1"}),me.push({key:"BBox",value:"["+E.boundingBox.map(L).join(" ")+"]"}),me.push({key:"XStep",value:L(E.xStep)}),me.push({key:"YStep",value:L(E.yStep)}),me.push({key:"Resources",value:se+" 0 R"}),E.matrix&&me.push({key:"Matrix",value:"["+E.matrix.toString()+"]"}),bi({data:E.stream,additionalKeyValues:me,objectId:E.objectNumber}),ne("endobj")},xt=function(E){var H;for(H in Xt)Xt.hasOwnProperty(H)&&(Xt[H]instanceof Tl?rt(Xt[H]):Xt[H]instanceof Hc&&bt(Xt[H],E))},Rn=function(E){for(var H in E.objectNumber=Fn(),ne("<<"),E)switch(H){case"opacity":ne("/ca "+D(E[H]));break;case"stroke-opacity":ne("/CA "+D(E[H]))}ne(">>"),ne("endobj")},kr=function(){var E;for(E in un)un.hasOwnProperty(E)&&Rn(un[E])},Pe=function(){for(var E in ne("/XObject <<"),Dn)Dn.hasOwnProperty(E)&&Dn[E].objectNumber>=0&&ne("/"+E+" "+Dn[E].objectNumber+" 0 R");Qt.publish("putXobjectDict"),ne(">>")},St=function(){ms.oid=Fn(),ne("<<"),ne("/Filter /Standard"),ne("/V "+ms.v),ne("/R "+ms.r),ne("/U <"+ms.toHexString(ms.U)+">"),ne("/O <"+ms.toHexString(ms.O)+">"),ne("/P "+ms.P),ne(">>"),ne("endobj")},wt=function(){for(var E in ne("/Font <<"),Gt)Gt.hasOwnProperty(E)&&(d===!1||d===!0&&h.hasOwnProperty(E))&&ne("/"+E+" "+Gt[E].objectNumber+" 0 R");ne(">>")},jt=function(){if(Object.keys(Xt).length>0){for(var E in ne("/Shading <<"),Xt)Xt.hasOwnProperty(E)&&Xt[E]instanceof Tl&&Xt[E].objectNumber>=0&&ne("/"+E+" "+Xt[E].objectNumber+" 0 R");Qt.publish("putShadingPatternDict"),ne(">>")}},Bt=function(E){if(Object.keys(Xt).length>0){for(var H in ne("/Pattern <<"),Xt)Xt.hasOwnProperty(H)&&Xt[H]instanceof f.TilingPattern&&Xt[H].objectNumber>=0&&Xt[H].objectNumber<E&&ne("/"+H+" "+Xt[H].objectNumber+" 0 R");Qt.publish("putTilingPatternDict"),ne(">>")}},fn=function(){if(Object.keys(un).length>0){var E;for(E in ne("/ExtGState <<"),un)un.hasOwnProperty(E)&&un[E].objectNumber>=0&&ne("/"+E+" "+un[E].objectNumber+" 0 R");Qt.publish("putGStateDict"),ne(">>")}},on=function(E){Ft(E.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),wt(),jt(),Bt(E.objectOid),fn(),Pe(),ne(">>"),ne("endobj")},ls=function(){var E=[];si(),kr(),gt(),xt(E),Qt.publish("putResources"),E.forEach(on),on({resourcesOid:os,objectOid:Number.MAX_SAFE_INTEGER}),Qt.publish("postPutResources")},Ni=function(){Qt.publish("putAdditionalObjects");for(var E=0;E<De.length;E++){var H=De[E];Ft(H.objId,!0),ne(H.content),ne("endobj")}Qt.publish("postPutAdditionalObjects")},Qn=function(E){Kt[E.fontName]=Kt[E.fontName]||{},Kt[E.fontName][E.fontStyle]=E.id},Pt=function(E,H,se,ae,me){var Ae={id:"F"+(Object.keys(Gt).length+1).toString(10),postScriptName:E,fontName:H,fontStyle:se,encoding:ae,isStandardFont:me||!1,metadata:{}};return Qt.publish("addFont",{font:Ae,instance:this}),Gt[Ae.id]=Ae,Qn(Ae),Ae.id},It=function(E){for(var H=0,se=he.length;H<se;H++){var ae=Pt.call(this,E[H][0],E[H][1],E[H][2],he[H][3],!0);d===!1&&(h[ae]=!0);var me=E[H][0].split("-");Qn({id:ae,fontName:me[0],fontStyle:me[1]||""})}Qt.publish("addFonts",{fonts:Gt,dictionary:Kt})},Si=function(E){return E.foo=function(){try{return E.apply(this,arguments)}catch(ae){var H=ae.stack||"";~H.indexOf(" at ")&&(H=H.split(" at ")[1]);var se="Error in function "+H.split(`
`)[0].split("<")[0]+": "+ae.message;if(!kt.console)throw new Error(se);kt.console.error(se,ae),kt.alert&&alert(se)}},E.foo.bar=E,E.foo},pe=function(E,H){var se,ae,me,Ae,je,tt,mt,Mt,Nt;if(me=(H=H||{}).sourceEncoding||"Unicode",je=H.outputEncoding,(H.autoencode||je)&&Gt[Ct].metadata&&Gt[Ct].metadata[me]&&Gt[Ct].metadata[me].encoding&&(Ae=Gt[Ct].metadata[me].encoding,!je&&Gt[Ct].encoding&&(je=Gt[Ct].encoding),!je&&Ae.codePages&&(je=Ae.codePages[0]),typeof je=="string"&&(je=Ae[je]),je)){for(mt=!1,tt=[],se=0,ae=E.length;se<ae;se++)(Mt=je[E.charCodeAt(se)])?tt.push(String.fromCharCode(Mt)):tt.push(E[se]),tt[se].charCodeAt(0)>>8&&(mt=!0);E=tt.join("")}for(se=E.length;mt===void 0&&se!==0;)E.charCodeAt(se-1)>>8&&(mt=!0),se--;if(!mt)return E;for(tt=H.noBOM?[]:[254,255],se=0,ae=E.length;se<ae;se++){if((Nt=(Mt=E.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+E+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");tt.push(Nt),tt.push(Mt-(Nt<<8))}return String.fromCharCode.apply(void 0,tt)},we=f.__private__.pdfEscape=f.pdfEscape=function(E,H){return pe(E,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ct=f.__private__.beginPage=function(E){Re[++wn]=[],pt[wn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(E[0]),topRightY:Number(E[1])}},Vs(wn),ve(Re[W])},dt=function(E,H){var se,ae,me;switch(t=H||t,typeof E=="string"&&(se=y(E.toLowerCase()),Array.isArray(se)&&(ae=se[0],me=se[1])),Array.isArray(E)&&(ae=E[0]*Ve,me=E[1]*Ve),isNaN(ae)&&(ae=s[0],me=s[1]),(ae>14400||me>14400)&&(Mn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ae=Math.min(14400,ae),me=Math.min(14400,me)),s=[ae,me],t.substr(0,1)){case"l":me>ae&&(s=[me,ae]);break;case"p":ae>me&&(s=[me,ae])}ct(s),Vp(nh),ne(Xr),sh!==0&&ne(sh+" J"),rh!==0&&ne(rh+" j"),Qt.publish("addPage",{pageNumber:wn})},_n=function(E){E>0&&E<=wn&&(Re.splice(E,1),pt.splice(E,1),wn--,W>wn&&(W=wn),this.setPage(W))},Vs=function(E){E>0&&E<=wn&&(W=E)},$i=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Re.length-1},Yt=function(E,H,se){var ae,me=void 0;return se=se||{},E=E!==void 0?E:Gt[Ct].fontName,H=H!==void 0?H:Gt[Ct].fontStyle,ae=E.toLowerCase(),Kt[ae]!==void 0&&Kt[ae][H]!==void 0?me=Kt[ae][H]:Kt[E]!==void 0&&Kt[E][H]!==void 0?me=Kt[E][H]:se.disableWarning===!1&&Mn.warn("Unable to look up font label for font '"+E+"', '"+H+"'. Refer to getFontList() for available fonts."),me||se.noFallback||(me=Kt.times[H])==null&&(me=Kt.times.normal),me},Os=f.__private__.putInfo=function(){var E=Fn(),H=function(ae){return ae};for(var se in u!==null&&(H=ms.encryptor(E,0)),ne("<<"),ne("/Producer ("+we(H("jsPDF "+Tt.version))+")"),ht)ht.hasOwnProperty(se)&&ht[se]&&ne("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+we(H(ht[se]))+")");ne("/CreationDate ("+we(H(ee))+")"),ne(">>"),ne("endobj")},eo=f.__private__.putCatalog=function(E){var H=(E=E||{}).rootDictionaryObjId||gs;switch(Fn(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+H+" 0 R"),Ue||(Ue="fullwidth"),Ue){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+Ue;se.substr(se.length-1)==="%"&&(Ue=parseInt(Ue)/100),typeof Ue=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+D(Ue)+"]")}switch(We||(We="continuous"),We){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}Xe&&ne("/PageMode /"+Xe),Qt.publish("putCatalog"),ne(">>"),ne("endobj")},ov=f.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(te+1)),ne("/Root "+te+" 0 R"),ne("/Info "+(te-1)+" 0 R"),u!==null&&ne("/Encrypt "+ms.oid+" 0 R"),ne("/ID [ <"+j+"> <"+j+"> ]"),ne(">>")},lv=f.__private__.putHeader=function(){ne("%PDF-"+p),ne("%")},cv=f.__private__.putXRef=function(){var E="0000000000";ne("xref"),ne("0 "+(te+1)),ne("0000000000 65535 f ");for(var H=1;H<=te;H++)typeof oe[H]=="function"?ne((E+oe[H]()).slice(-10)+" 00000 n "):oe[H]!==void 0?ne((E+oe[H]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},to=f.__private__.buildDocument=function(){Ze(),ve(de),Qt.publish("buildDocument"),lv(),Bi(),Ni(),ls(),u!==null&&St(),Os(),eo();var E=ge;return cv(),ov(),ne("startxref"),ne(""+E),ne("%%EOF"),ve(Re[W]),de.join(`
`)},vu=f.__private__.getBlob=function(E){return new Blob([Ye(E)],{type:"application/pdf"})},xu=f.output=f.__private__.output=Si(function(E,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",E){case void 0:return to();case"save":f.save(H.filename);break;case"arraybuffer":return Ye(to());case"blob":return vu(to());case"bloburi":case"bloburl":if(kt.URL!==void 0&&typeof kt.URL.createObjectURL=="function")return kt.URL&&kt.URL.createObjectURL(vu(to()))||void 0;Mn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",ae=to();try{se=Zb(ae)}catch{se=Zb(unescape(encodeURIComponent(ae)))}return"data:application/pdf;filename="+H.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(me=H.pdfObjectUrl,Ae="");var je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+me+'"'+Ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",tt=kt.open();return tt!==null&&tt.document.write(je),tt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kt)==="[object Window]"){var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',Mt=kt.open();if(Mt!==null){Mt.document.write(mt);var Nt=this;Mt.document.documentElement.querySelector("#pdfViewer").onload=function(){Mt.document.title=H.filename,Mt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nt.output("bloburl"))}}return Mt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ln='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',ri=kt.open();if(ri!==null&&(ri.document.write(ln),ri.document.title=H.filename),ri||typeof safari>"u")return ri;break;case"datauri":case"dataurl":return kt.document.location.href=this.output("datauristring",H);default:return null}}),$p=function(E){return Array.isArray(Ws)===!0&&Ws.indexOf(E)>-1};switch(i){case"pt":Ve=1;break;case"mm":Ve=72/25.4;break;case"cm":Ve=72/2.54;break;case"in":Ve=72;break;case"px":Ve=$p("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ve=12;break;case"ex":Ve=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Ve=i}var ms=null;re(),B();var uv=function(E){return u!==null?ms.encryptor(E,0):function(H){return H}},Hp=f.__private__.getPageInfo=f.getPageInfo=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pt[E].objId,pageNumber:E,pageContext:pt[E]}},Rt=f.__private__.getPageInfoByObjId=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in pt)if(pt[H].objId===E)break;return Hp(H)},dv=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:pt[W].objId,pageNumber:W,pageContext:pt[W]}};f.addPage=function(){return dt.apply(this,arguments),this},f.setPage=function(){return Vs.apply(this,arguments),ve.call(this,Re[W]),this},f.insertPage=function(E){return this.addPage(),this.movePage(W,E),this},f.movePage=function(E,H){var se,ae;if(E>H){se=Re[E],ae=pt[E];for(var me=E;me>H;me--)Re[me]=Re[me-1],pt[me]=pt[me-1];Re[H]=se,pt[H]=ae,this.setPage(H)}else if(E<H){se=Re[E],ae=pt[E];for(var Ae=E;Ae<H;Ae++)Re[Ae]=Re[Ae+1],pt[Ae]=pt[Ae+1];Re[H]=se,pt[H]=ae,this.setPage(H)}return this},f.deletePage=function(){return _n.apply(this,arguments),this},f.__private__.text=f.text=function(E,H,se,ae,me){var Ae,je,tt,mt,Mt,Nt,ln,ri,hi,Di=(ae=ae||{}).scope||this;if(typeof E=="number"&&typeof H=="number"&&(typeof se=="string"||Array.isArray(se))){var ys=se;se=H,H=E,E=ys}if(arguments[3]instanceof ft?(k("The transform parameter of text() with a Matrix value"),hi=me):(tt=arguments[4],mt=arguments[5],kn(ln=arguments[3])==="object"&&ln!==null||(typeof tt=="string"&&(mt=tt,tt=null),typeof ln=="string"&&(mt=ln,ln=null),typeof ln=="number"&&(tt=ln,ln=null),ae={flags:ln,angle:tt,align:mt})),isNaN(H)||isNaN(se)||E==null)throw new Error("Invalid arguments passed to jsPDF.text");if(E.length===0)return Di;var Ji="",Qr=!1,ur=typeof ae.lineHeightFactor=="number"?ae.lineHeightFactor:cc,Aa=Di.internal.scaleFactor;function Qp(Bn){return Bn=Bn.split("	").join(Array(ae.TabLen||9).join(" ")),we(Bn,ln)}function uh(Bn){for(var Un,_i=Bn.concat(),Hi=[],ao=_i.length;ao--;)typeof(Un=_i.shift())=="string"?Hi.push(Un):Array.isArray(Bn)&&(Un.length===1||Un[1]===void 0&&Un[2]===void 0)?Hi.push(Un[0]):Hi.push([Un[0],Un[1],Un[2]]);return Hi}function dh(Bn,Un){var _i;if(typeof Bn=="string")_i=Un(Bn)[0];else if(Array.isArray(Bn)){for(var Hi,ao,xh=Bn.concat(),Du=[],ng=xh.length;ng--;)typeof(Hi=xh.shift())=="string"?Du.push(Un(Hi)[0]):Array.isArray(Hi)&&typeof Hi[0]=="string"&&(ao=Un(Hi[0],Hi[1],Hi[2]),Du.push([ao[0],ao[1],ao[2]]));_i=Du}return _i}var Tu=!1,hh=!0;if(typeof E=="string")Tu=!0;else if(Array.isArray(E)){var fh=E.concat();je=[];for(var Au,cs=fh.length;cs--;)(typeof(Au=fh.shift())!="string"||Array.isArray(Au)&&typeof Au[0]!="string")&&(hh=!1);Tu=hh}if(Tu===!1)throw new Error('Type of text must be string or Array. "'+E+'" is not recognized.');typeof E=="string"&&(E=E.match(/[\r?\n]/)?E.split(/\r\n|\r|\n/g):[E]);var Lu=Me/Di.internal.scaleFactor,ku=Lu*(ur-1);switch(ae.baseline){case"bottom":se-=ku;break;case"top":se+=Lu-ku;break;case"hanging":se+=Lu-2*ku;break;case"middle":se+=Lu/2-ku}if((Nt=ae.maxWidth||0)>0&&(typeof E=="string"?E=Di.splitTextToSize(E,Nt):Object.prototype.toString.call(E)==="[object Array]"&&(E=E.reduce(function(Bn,Un){return Bn.concat(Di.splitTextToSize(Un,Nt))},[]))),Ae={text:E,x:H,y:se,options:ae,mutex:{pdfEscape:we,activeFontKey:Ct,fonts:Gt,activeFontSize:Me}},Qt.publish("preProcessText",Ae),E=Ae.text,tt=(ae=Ae.options).angle,!(hi instanceof ft)&&tt&&typeof tt=="number"){tt*=Math.PI/180,ae.rotationDirection===0&&(tt=-tt),x===b.ADVANCED&&(tt=-tt);var Cu=Math.cos(tt),ph=Math.sin(tt);hi=new ft(Cu,ph,-ph,Cu,0,0)}else tt&&tt instanceof ft&&(hi=tt);x!==b.ADVANCED||hi||(hi=Qi),(Mt=ae.charSpace||wu)!==void 0&&(Ji+=L(R(Mt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ri=ae.horizontalScale)!==void 0&&(Ji+=L(100*ri)+` Tz
`),ae.lang;var Gs=-1,Sv=ae.renderingMode!==void 0?ae.renderingMode:ae.stroke,gh=Di.internal.getCurrentPageInfo().pageContext;switch(Sv){case 0:case!1:case"fill":Gs=0;break;case 1:case!0:case"stroke":Gs=1;break;case 2:case"fillThenStroke":Gs=2;break;case 3:case"invisible":Gs=3;break;case 4:case"fillAndAddForClipping":Gs=4;break;case 5:case"strokeAndAddPathForClipping":Gs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gs=6;break;case 7:case"addToPathForClipping":Gs=7}var Jp=gh.usedRenderingMode!==void 0?gh.usedRenderingMode:-1;Gs!==-1?Ji+=Gs+` Tr
`:Jp!==-1&&(Ji+=`0 Tr
`),Gs!==-1&&(gh.usedRenderingMode=Gs),mt=ae.align||"left";var Cr,Iu=Me*ur,Zp=Di.internal.pageSize.getWidth(),eg=Gt[Ct];Mt=ae.charSpace||wu,Nt=ae.maxWidth||0,ln=Object.assign({autoencode:!0,noBOM:!0},ae.flags);var el=[],hc=function(Bn){return Di.getStringUnitWidth(Bn,{font:eg,charSpace:Mt,fontSize:Me,doKerning:!1})*Me/Aa};if(Object.prototype.toString.call(E)==="[object Array]"){var Ys;je=uh(E),mt!=="left"&&(Cr=je.map(hc));var Ms,tl=0;if(mt==="right"){H-=Cr[0],E=[],cs=je.length;for(var io=0;io<cs;io++)io===0?(Ms=Ta(H),Ys=no(se)):(Ms=R(tl-Cr[io]),Ys=-Iu),E.push([je[io],Ms,Ys]),tl=Cr[io]}else if(mt==="center"){H-=Cr[0]/2,E=[],cs=je.length;for(var so=0;so<cs;so++)so===0?(Ms=Ta(H),Ys=no(se)):(Ms=R((tl-Cr[so])/2),Ys=-Iu),E.push([je[so],Ms,Ys]),tl=Cr[so]}else if(mt==="left"){E=[],cs=je.length;for(var Ru=0;Ru<cs;Ru++)E.push(je[Ru])}else if(mt==="justify"&&eg.encoding==="Identity-H"){E=[],cs=je.length,Nt=Nt!==0?Nt:Zp;for(var ro=0,wi=0;wi<cs;wi++)if(Ys=wi===0?no(se):-Iu,Ms=wi===0?Ta(H):ro,wi<cs-1){var mh=R((Nt-Cr[wi])/(je[wi].split(" ").length-1)),Fs=je[wi].split(" ");E.push([Fs[0]+" ",Ms,Ys]),ro=0;for(var Ir=1;Ir<Fs.length;Ir++){var Pu=(hc(Fs[Ir-1]+" "+Fs[Ir])-hc(Fs[Ir]))*Aa+mh;Ir==Fs.length-1?E.push([Fs[Ir],Pu,0]):E.push([Fs[Ir]+" ",Pu,0]),ro-=Pu}}else E.push([je[wi],Ms,Ys]);E.push(["",ro,0])}else{if(mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(E=[],cs=je.length,Nt=Nt!==0?Nt:Zp,wi=0;wi<cs;wi++)Ys=wi===0?no(se):-Iu,Ms=wi===0?Ta(H):0,wi<cs-1?el.push(L(R((Nt-Cr[wi])/(je[wi].split(" ").length-1)))):el.push(0),E.push([je[wi],Ms,Ys])}}var tg=typeof ae.R2L=="boolean"?ae.R2L:Fe;tg===!0&&(E=dh(E,function(Bn,Un,_i){return[Bn.split("").reverse().join(""),Un,_i]})),Ae={text:E,x:H,y:se,options:ae,mutex:{pdfEscape:we,activeFontKey:Ct,fonts:Gt,activeFontSize:Me}},Qt.publish("postProcessText",Ae),E=Ae.text,Qr=Ae.mutex.isHex||!1;var yh=Gt[Ct].encoding;yh!=="WinAnsiEncoding"&&yh!=="StandardEncoding"||(E=dh(E,function(Bn,Un,_i){return[Qp(Bn),Un,_i]})),je=uh(E),E=[];for(var fc,pc,nl,gc=0,Nu=1,mc=Array.isArray(je[0])?Nu:gc,il="",vh=function(Bn,Un,_i){var Hi="";return _i instanceof ft?(_i=typeof ae.angle=="number"?ji(_i,new ft(1,0,0,1,Bn,Un)):ji(new ft(1,0,0,1,Bn,Un),_i),x===b.ADVANCED&&(_i=ji(new ft(1,0,0,-1,0,0),_i)),Hi=_i.join(" ")+` Tm
`):Hi=L(Bn)+" "+L(Un)+` Td
`,Hi},Rr=0;Rr<je.length;Rr++){switch(il="",mc){case Nu:nl=(Qr?"<":"(")+je[Rr][0]+(Qr?">":")"),fc=parseFloat(je[Rr][1]),pc=parseFloat(je[Rr][2]);break;case gc:nl=(Qr?"<":"(")+je[Rr]+(Qr?">":")"),fc=Ta(H),pc=no(se)}el!==void 0&&el[Rr]!==void 0&&(il=el[Rr]+` Tw
`),Rr===0?E.push(il+vh(fc,pc,hi)+nl):mc===gc?E.push(il+nl):mc===Nu&&E.push(il+vh(fc,pc,hi)+nl)}E=mc===gc?E.join(` Tj
T* `):E.join(` Tj
`),E+=` Tj
`;var Pr=`BT
/`;return Pr+=Ct+" "+Me+` Tf
`,Pr+=L(Me*ur)+` TL
`,Pr+=uc+`
`,Pr+=Ji,Pr+=E,ne(Pr+="ET"),h[Ct]=!0,Di};var hv=f.__private__.clip=f.clip=function(E){return ne(E==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return hv("evenodd")},f.__private__.discardPath=f.discardPath=function(){return ne("n"),this};var Ea=f.__private__.isValidStyle=function(E){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(E)!==-1&&(H=!0),H};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(E){return Ea(E)&&(c=E),this};var zp=f.__private__.getStyle=f.getStyle=function(E){var H=c;switch(E){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=E}return H},Wp=f.close=function(){return ne("h"),this};f.stroke=function(){return ne("S"),this},f.fill=function(E){return bu("f",E),this},f.fillEvenOdd=function(E){return bu("f*",E),this},f.fillStroke=function(E){return bu("B",E),this},f.fillStrokeEvenOdd=function(E){return bu("B*",E),this};var bu=function(E,H){kn(H)==="object"?pv(H,E):ne(E)},eh=function(E){E===null||x===b.ADVANCED&&E===void 0||(E=zp(E),ne(E))};function fv(E,H,se,ae,me){var Ae=new Hc(H||this.boundingBox,se||this.xStep,ae||this.yStep,this.gState,me||this.matrix);Ae.stream=this.stream;var je=E+"$$"+this.cloneIndex+++"$$";return di(je,Ae),Ae}var pv=function(E,H){var se=Ns[E.key],ae=Xt[se];if(ae instanceof Tl)ne("q"),ne(gv(H)),ae.gState&&f.setGState(ae.gState),ne(E.matrix.toString()+" cm"),ne("/"+se+" sh"),ne("Q");else if(ae instanceof Hc){var me=new ft(1,0,0,-1,0,Zo());E.matrix&&(me=me.multiply(E.matrix||Qi),se=fv.call(ae,E.key,E.boundingBox,E.xStep,E.yStep,me).id),ne("q"),ne("/Pattern cs"),ne("/"+se+" scn"),ae.gState&&f.setGState(ae.gState),ne(H),ne("Q")}},gv=function(E){switch(E){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},th=f.moveTo=function(E,H){return ne(L(R(E))+" "+L(Y(H))+" m"),this},lc=f.lineTo=function(E,H){return ne(L(R(E))+" "+L(Y(H))+" l"),this},Qo=f.curveTo=function(E,H,se,ae,me,Ae){return ne([L(R(E)),L(Y(H)),L(R(se)),L(Y(ae)),L(R(me)),L(Y(Ae)),"c"].join(" ")),this};f.__private__.line=f.line=function(E,H,se,ae,me){if(isNaN(E)||isNaN(H)||isNaN(se)||isNaN(ae)||!Ea(me))throw new Error("Invalid arguments passed to jsPDF.line");return x===b.COMPAT?this.lines([[se-E,ae-H]],E,H,[1,1],me||"S"):this.lines([[se-E,ae-H]],E,H,[1,1]).stroke()},f.__private__.lines=f.lines=function(E,H,se,ae,me,Ae){var je,tt,mt,Mt,Nt,ln,ri,hi,Di,ys,Ji,Qr;if(typeof E=="number"&&(Qr=se,se=H,H=E,E=Qr),ae=ae||[1,1],Ae=Ae||!1,isNaN(H)||isNaN(se)||!Array.isArray(E)||!Array.isArray(ae)||!Ea(me)||typeof Ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(th(H,se),je=ae[0],tt=ae[1],Mt=E.length,ys=H,Ji=se,mt=0;mt<Mt;mt++)(Nt=E[mt]).length===2?(ys=Nt[0]*je+ys,Ji=Nt[1]*tt+Ji,lc(ys,Ji)):(ln=Nt[0]*je+ys,ri=Nt[1]*tt+Ji,hi=Nt[2]*je+ys,Di=Nt[3]*tt+Ji,ys=Nt[4]*je+ys,Ji=Nt[5]*tt+Ji,Qo(ln,ri,hi,Di,ys,Ji));return Ae&&Wp(),eh(me),this},f.path=function(E){for(var H=0;H<E.length;H++){var se=E[H],ae=se.c;switch(se.op){case"m":th(ae[0],ae[1]);break;case"l":lc(ae[0],ae[1]);break;case"c":Qo.apply(this,ae);break;case"h":Wp()}}return this},f.__private__.rect=f.rect=function(E,H,se,ae,me){if(isNaN(E)||isNaN(H)||isNaN(se)||isNaN(ae)||!Ea(me))throw new Error("Invalid arguments passed to jsPDF.rect");return x===b.COMPAT&&(ae=-ae),ne([L(R(E)),L(Y(H)),L(R(se)),L(R(ae)),"re"].join(" ")),eh(me),this},f.__private__.triangle=f.triangle=function(E,H,se,ae,me,Ae,je){if(isNaN(E)||isNaN(H)||isNaN(se)||isNaN(ae)||isNaN(me)||isNaN(Ae)||!Ea(je))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-E,ae-H],[me-se,Ae-ae],[E-me,H-Ae]],E,H,[1,1],je,!0),this},f.__private__.roundedRect=f.roundedRect=function(E,H,se,ae,me,Ae,je){if(isNaN(E)||isNaN(H)||isNaN(se)||isNaN(ae)||isNaN(me)||isNaN(Ae)||!Ea(je))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var tt=4/3*(Math.SQRT2-1);return me=Math.min(me,.5*se),Ae=Math.min(Ae,.5*ae),this.lines([[se-2*me,0],[me*tt,0,me,Ae-Ae*tt,me,Ae],[0,ae-2*Ae],[0,Ae*tt,-me*tt,Ae,-me,Ae],[2*me-se,0],[-me*tt,0,-me,-Ae*tt,-me,-Ae],[0,2*Ae-ae],[0,-Ae*tt,me*tt,-Ae,me,-Ae]],E+me,H,[1,1],je,!0),this},f.__private__.ellipse=f.ellipse=function(E,H,se,ae,me){if(isNaN(E)||isNaN(H)||isNaN(se)||isNaN(ae)||!Ea(me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ae=4/3*(Math.SQRT2-1)*se,je=4/3*(Math.SQRT2-1)*ae;return th(E+se,H),Qo(E+se,H-je,E+Ae,H-ae,E,H-ae),Qo(E-Ae,H-ae,E-se,H-je,E-se,H),Qo(E-se,H+je,E-Ae,H+ae,E,H+ae),Qo(E+Ae,H+ae,E+se,H+je,E+se,H),eh(me),this},f.__private__.circle=f.circle=function(E,H,se,ae){if(isNaN(E)||isNaN(H)||isNaN(se)||!Ea(ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(E,H,se,se,ae)},f.setFont=function(E,H,se){return se&&(H=C(H,se)),Ct=Yt(E,H,{disableWarning:!1}),this};var mv=f.__private__.getFont=f.getFont=function(){return Gt[Yt.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var E,H,se={};for(E in Kt)if(Kt.hasOwnProperty(E))for(H in se[E]=[],Kt[E])Kt[E].hasOwnProperty(H)&&se[E].push(H);return se},f.addFont=function(E,H,se,ae,me){var Ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ae.indexOf(arguments[3])!==-1?me=arguments[3]:arguments[3]&&Ae.indexOf(arguments[3])==-1&&(se=C(se,ae)),me=me||"Identity-H",Pt.call(this,E,H,se,me)};var cc,nh=n.lineWidth||.200025,Su=f.__private__.getLineWidth=f.getLineWidth=function(){return nh},Vp=f.__private__.setLineWidth=f.setLineWidth=function(E){return nh=E,ne(L(R(E))+" w"),this};f.__private__.setLineDash=Tt.API.setLineDash=Tt.API.setLineDashPattern=function(E,H){if(E=E||[],H=H||0,isNaN(H)||!Array.isArray(E))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return E=E.map(function(se){return L(R(se))}).join(" "),H=L(R(H)),ne("["+E+"] "+H+" d"),this};var Gp=f.__private__.getLineHeight=f.getLineHeight=function(){return Me*cc};f.__private__.getLineHeight=f.getLineHeight=function(){return Me*cc};var Yp=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(E){return typeof(E=E||1.15)=="number"&&(cc=E),this},qp=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return cc};Yp(n.lineHeight);var Ta=f.__private__.getHorizontalCoordinate=function(E){return R(E)},no=f.__private__.getVerticalCoordinate=function(E){return x===b.ADVANCED?E:pt[W].mediaBox.topRightY-pt[W].mediaBox.bottomLeftY-R(E)},yv=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(E){return L(Ta(E))},Jo=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(E){return L(no(E))},Xr=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Ri(Xr)},f.__private__.setStrokeColor=f.setDrawColor=function(E,H,se,ae){return Xr=xi({ch1:E,ch2:H,ch3:se,ch4:ae,pdfColorType:"draw",precision:2}),ne(Xr),this};var ih=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Ri(ih)},f.__private__.setFillColor=f.setFillColor=function(E,H,se,ae){return ih=xi({ch1:E,ch2:H,ch3:se,ch4:ae,pdfColorType:"fill",precision:2}),ne(ih),this};var uc=n.textColor||"0 g",vv=f.__private__.getTextColor=f.getTextColor=function(){return Ri(uc)};f.__private__.setTextColor=f.setTextColor=function(E,H,se,ae){return uc=xi({ch1:E,ch2:H,ch3:se,ch4:ae,pdfColorType:"text",precision:3}),this};var wu=n.charSpace,xv=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(wu||0)};f.__private__.setCharSpace=f.setCharSpace=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return wu=E,this};var sh=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(E){var H=f.CapJoinStyles[E];if(H===void 0)throw new Error("Line cap style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sh=H,ne(H+" J"),this};var rh=0;f.__private__.setLineJoin=f.setLineJoin=function(E){var H=f.CapJoinStyles[E];if(H===void 0)throw new Error("Line join style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rh=H,ne(H+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(E){if(E=E||0,isNaN(E))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(L(R(E))+" M"),this},f.GState=up,f.setGState=function(E){(E=typeof E=="string"?un[as[E]]:Kp(null,E)).equals(cr)||(ne("/"+E.id+" gs"),cr=E)};var Kp=function(E,H){if(!E||!as[E]){var se=!1;for(var ae in un)if(un.hasOwnProperty(ae)&&un[ae].equals(H)){se=!0;break}if(se)H=un[ae];else{var me="GS"+(Object.keys(un).length+1).toString(10);un[me]=H,H.id=me}return E&&(as[E]=H.id),Qt.publish("addGState",H),H}};f.addGState=function(E,H){return Kp(E,H),this},f.saveGraphicsState=function(){return ne("q"),ps.push({key:Ct,size:Me,color:uc}),this},f.restoreGraphicsState=function(){ne("Q");var E=ps.pop();return Ct=E.key,Me=E.size,uc=E.color,cr=null,this},f.setCurrentTransformationMatrix=function(E){return ne(E.toString()+" cm"),this},f.comment=function(E){return ne("#"+E),this};var _u=function(E,H){var se=E||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(Ae){isNaN(Ae)||(se=parseFloat(Ae))}});var ae=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ae},set:function(Ae){isNaN(Ae)||(ae=parseFloat(Ae))}});var me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return me},set:function(Ae){me=Ae.toString()}}),this},ah=function(E,H,se,ae){_u.call(this,E,H),this.type="rect";var me=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return me},set:function(je){isNaN(je)||(me=parseFloat(je))}});var Ae=ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ae},set:function(je){isNaN(je)||(Ae=parseFloat(je))}}),this},oh=function(){this.page=wn,this.currentPage=W,this.pages=Re.slice(0),this.pagesContext=pt.slice(0),this.x=ii,this.y=qt,this.matrix=Xi,this.width=dc(W),this.height=Zo(W),this.outputDestination=Be,this.id="",this.objectNumber=-1};oh.prototype.restore=function(){wn=this.page,W=this.currentPage,pt=this.pagesContext,Re=this.pages,ii=this.x,qt=this.y,Xi=this.matrix,lh(W,this.width),ch(W,this.height),Be=this.outputDestination};var Xp=function(E,H,se,ae,me){Ii.push(new oh),wn=W=0,Re=[],ii=E,qt=H,Xi=me,ct([se,ae])},bv=function(E){if(vi[E])Ii.pop().restore();else{var H=new oh,se="Xo"+(Object.keys(Dn).length+1).toString(10);H.id=se,vi[E]=se,Dn[se]=H,Qt.publish("addFormObject",H),Ii.pop().restore()}};for(var Eu in f.beginFormObject=function(E,H,se,ae,me){return Xp(E,H,se,ae,me),this},f.endFormObject=function(E){return bv(E),this},f.doFormObject=function(E,H){var se=Dn[vi[E]];return ne("q"),ne(H.toString()+" cm"),ne("/"+se.id+" Do"),ne("Q"),this},f.getFormObject=function(E){var H=Dn[vi[E]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},f.save=function(E,H){return E=E||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Pc(vu(to()),E),typeof Pc.unload=="function"&&kt.setTimeout&&setTimeout(Pc.unload,911),this):new Promise(function(se,ae){try{var me=Pc(vu(to()),E);typeof Pc.unload=="function"&&kt.setTimeout&&setTimeout(Pc.unload,911),se(me)}catch(Ae){ae(Ae.message)}})},Tt.API)Tt.API.hasOwnProperty(Eu)&&(Eu==="events"&&Tt.API.events.length?function(E,H){var se,ae,me;for(me=H.length-1;me!==-1;me--)se=H[me][0],ae=H[me][1],E.subscribe.apply(E,[se].concat(typeof ae=="function"?[ae]:ae))}(Qt,Tt.API.events):f[Eu]=Tt.API[Eu]);var dc=f.getPageWidth=function(E){return(pt[E=E||W].mediaBox.topRightX-pt[E].mediaBox.bottomLeftX)/Ve},lh=f.setPageWidth=function(E,H){pt[E].mediaBox.topRightX=H*Ve+pt[E].mediaBox.bottomLeftX},Zo=f.getPageHeight=function(E){return(pt[E=E||W].mediaBox.topRightY-pt[E].mediaBox.bottomLeftY)/Ve},ch=f.setPageHeight=function(E,H){pt[E].mediaBox.topRightY=H*Ve+pt[E].mediaBox.bottomLeftY};return f.internal={pdfEscape:we,getStyle:zp,getFont:mv,getFontSize:$e,getCharSpace:xv,getTextColor:vv,getLineHeight:Gp,getLineHeightFactor:qp,getLineWidth:Su,write:Qe,getHorizontalCoordinate:Ta,getVerticalCoordinate:no,getCoordinateString:yv,getVerticalCoordinateString:Jo,collections:{},newObject:Fn,newAdditionalObject:Xn,newObjectDeferred:jn,newObjectDeferredBegin:Ft,getFilters:Pi,putStream:bi,events:Qt,scaleFactor:Ve,pageSize:{getWidth:function(){return dc(W)},setWidth:function(E){lh(W,E)},getHeight:function(){return Zo(W)},setHeight:function(E){ch(W,E)}},encryptionOptions:u,encryption:ms,getEncryptor:uv,output:xu,getNumberOfPages:$i,pages:Re,out:ne,f2:D,f3:I,getPageInfo:Hp,getPageInfoByObjId:Rt,getCurrentPageInfo:dv,getPDFVersion:m,Point:_u,Rectangle:ah,Matrix:ft,hasHotfix:$p},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return dc(W)},set:function(E){lh(W,E)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Zo(W)},set:function(E){ch(W,E)},enumerable:!0,configurable:!0}),It.call(f,he),Ct="F1",dt(s,t),Qt.publish("initialized"),f}Ju.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Ju.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ju.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Ju.prototype.processOwnerPassword=function(n,e){return t2(e2(e).substr(0,5),n)},Ju.prototype.encryptor=function(n,e){var t=e2(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return t2(t,i)}},up.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||kn(n)!==kn(this))return!1;var i=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;i++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&i--;return i===0},Tt.API={events:[]},Tt.version="2.5.2";var pi=Tt.API,rw=1,mu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vu=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Dt=function(n){return n.toFixed(2)},fl=function(n){return n.toFixed(5)};pi.__acroform__={};var lr=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},XT=function(n){return n*rw},Na=function(n){var e=new CP,t=ot.internal.getHeight(n)||0,i=ot.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Dt(i)),Number(Dt(t))],e},uz=pi.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},dz=pi.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},hz=pi.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Ai=pi.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hz(n,e-1)},Li=pi.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uz(n,e-1)},ki=pi.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return dz(n,e-1)},fz=pi.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,s=n[0],r=n[1],a=n[2],o=n[3],l={};return l.lowerLeft_X=t(s)||0,l.lowerLeft_Y=i(r+o)||0,l.upperRight_X=t(s+a)||0,l.upperRight_Y=i(r)||0,[Number(Dt(l.lowerLeft_X)),Number(Dt(l.lowerLeft_Y)),Number(Dt(l.upperRight_X)),Number(Dt(l.upperRight_Y))]},pz=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,i=n2(n,t),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+s+" "+Dt(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var r=Na(n);return r.scope=n.scope,r.stream=e.join(`
`),r}},n2=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=n.multiline?s.map(function(I){return I.split(`
`)}):s.map(function(I){return[I]});var r=t,a=ot.internal.getHeight(n)||0;a=a<0?-a:a;var o=ot.internal.getWidth(n)||0;o=o<0?-o:o;var l=function(I,R,q){if(I+1<s.length){var Y=R+" "+s[I+1][0];return am(Y,n,q).width<=o-4}return!1};r++;e:for(;r>0;){e="",r--;var c,u,d=am("3",n,r).height,h=n.multiline?a-r:(a-d)/2,f=h+=2,p=0,m=0,v=0;if(r<=0){e=`(...) Tj
`,e+="% Width of Text: "+am(e,n,r=12).width+", FieldWidth:"+o+`
`;break}for(var y="",b=0,x=0;x<s.length;x++)if(s.hasOwnProperty(x)){var _=!1;if(s[x].length!==1&&v!==s[x].length-1){if((d+2)*(b+2)+2>a)continue e;y+=s[x][v],_=!0,m=x,x--}else{y=(y+=s[x][v]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var T=parseInt(x),C=l(T,y,r),L=x>=s.length-1;if(C&&!L){y+=" ",v=0;continue}if(C||L){if(L)m=T;else if(n.multiline&&(d+2)*(b+2)+2>a)continue e}else{if(!n.multiline||(d+2)*(b+2)+2>a)continue e;m=T}}for(var k="",M=p;M<=m;M++){var D=s[M];if(n.multiline){if(M===m){k+=D[v]+" ",v=(v+1)%D.length;continue}if(M===p){k+=D[D.length-1]+" ";continue}}k+=D[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,u=am(k,n,r).width,n.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}e+=Dt(c)+" "+Dt(f)+` Td
`,e+="("+mu(k)+`) Tj
`,e+=-Dt(c)+` 0 Td
`,f=-(r+2),u=0,p=_?m:m+1,b++,y=""}break}return i.text=e,i.fontSize=r,i},am=function(n,e,t){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:s}},gz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},mz=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===t.type&&i.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},yz=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var i=t,s=n[t];e.internal.newObjectDeferredBegin(s.objId,!0),kn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete n[i]}},vz=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Sa.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(gz)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");rw=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new IP,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in i)if(i.hasOwnProperty(s)){var r=i[s];r.objId=void 0,r.hasAnnotation&&mz(r,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(i,s){var r=!i;for(var a in i||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var o=i[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=fz(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=ot.createDefaultAppearanceStream(o),kn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=pz(o);l.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var d="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var f=o.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var p=f[a];typeof p=="function"&&(p=p.call(s,o)),d+="/"+a+" "+p+" ",s.internal.acroformPlugin.xForms.indexOf(p)>=0||s.internal.acroformPlugin.xForms.push(p)}}else typeof(p=f)=="function"&&(p=p.call(s,o)),d+="/"+a+" "+p,s.internal.acroformPlugin.xForms.indexOf(p)>=0||s.internal.acroformPlugin.xForms.push(p);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}r&&yz(s.internal.acroformPlugin.xForms,s)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},kP=pi.__acroform__.arrayToPdfArray=function(n,e,t){var i=function(a){return a};if(Array.isArray(n)){for(var s="[",r=0;r<n.length;r++)switch(r!==0&&(s+=" "),kn(n[r])){case"boolean":case"number":case"object":s+=n[r].toString();break;case"string":n[r].substr(0,1)!=="/"?(e!==void 0&&t&&(i=t.internal.getEncryptor(e)),s+="("+mu(i(n[r].toString()))+")"):s+=n[r].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},z1=function(n,e,t){var i=function(s){return s};return e!==void 0&&t&&(i=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+mu(i(n))+")"},$a=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$a.prototype.toString=function(){return this.objId+" 0 R"},$a.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},$a.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var i=e[t],s=this[i];s&&(Array.isArray(s)?n.push({key:i,value:kP(s,this.objId,this.scope)}):s instanceof $a?(s.scope=this.scope,n.push({key:i,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:i,value:s}))}return n};var CP=function(){$a.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};lr(CP,$a);var IP=function(){$a.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(i){return i};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+mu(t(n))+")"}},set:function(t){n=t}})};lr(IP,$a);var Sa=function n(){$a.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ai(e,3)},set:function(y){y?this.F=Li(e,3):this.F=ki(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');t=y}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(y){i=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(y){i[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(y){i[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(y){i[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(y){i[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof z0)return;r="FieldObject"+n.FieldNum++}var y=function(b){return b};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+mu(y(r))+")"},set:function(y){r=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(y){r=y}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(y){a=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/rw:c},set:function(y){c=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof z0||this instanceof Gl))return z1(d,this.objId,this.scope)},set:function(y){y=y.toString(),d=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Vi?h:z1(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof Vi?y:y.substr(0,1)==="("?Vu(y.substr(1,y.length-2)):Vu(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi?Vu(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof Vi?"/"+y:y}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Vi?f:z1(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof Vi?y:y.substr(0,1)==="("?Vu(y.substr(1,y.length-2)):Vu(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vi?Vu(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof Vi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(y){y=!!y,m=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(y){p=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,1)},set:function(y){y?this.Ff=Li(this.Ff,1):this.Ff=ki(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,2)},set:function(y){y?this.Ff=Li(this.Ff,2):this.Ff=ki(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,3)},set:function(y){y?this.Ff=Li(this.Ff,3):this.Ff=ki(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');v=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(v){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};lr(Sa,$a);var Xc=function(){Sa.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return kP(e,this.objId,this.scope)},set:function(t){var i,s;s=[],typeof(i=t)=="string"&&(s=function(r,a,o){o||(o=1);for(var l,c=[];l=a.exec(r);)c.push(l[o]);return c}(i,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,18)},set:function(t){t?this.Ff=Li(this.Ff,18):this.Ff=ki(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Li(this.Ff,19):this.Ff=ki(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,20)},set:function(t){t?(this.Ff=Li(this.Ff,20),e.sort()):this.Ff=ki(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,22)},set:function(t){t?this.Ff=Li(this.Ff,22):this.Ff=ki(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,23)},set:function(t){t?this.Ff=Li(this.Ff,23):this.Ff=ki(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,27)},set:function(t){t?this.Ff=Li(this.Ff,27):this.Ff=ki(this.Ff,27)}}),this.hasAppearanceStream=!1};lr(Xc,Sa);var Qc=function(){Xc.call(this),this.fontName="helvetica",this.combo=!1};lr(Qc,Xc);var Jc=function(){Qc.call(this),this.combo=!0};lr(Jc,Qc);var Tf=function(){Jc.call(this),this.edit=!0};lr(Tf,Jc);var Vi=function(){Sa.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,15)},set:function(t){t?this.Ff=Li(this.Ff,15):this.Ff=ki(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,16)},set:function(t){t?this.Ff=Li(this.Ff,16):this.Ff=ki(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,17)},set:function(t){t?this.Ff=Li(this.Ff,17):this.Ff=ki(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,26)},set:function(t){t?this.Ff=Li(this.Ff,26):this.Ff=ki(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(r){return r};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,s=[];for(i in s.push("<<"),e)s.push("/"+i+" ("+mu(t(e[i]))+")");return s.push(">>"),s.join(`
`)}},set:function(t){kn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};lr(Vi,Sa);var Af=function(){Vi.call(this),this.pushButton=!0};lr(Af,Vi);var Zc=function(){Vi.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};lr(Zc,Vi);var z0=function(){var n,e;Sa.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var t,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var r,a=[];for(r in a.push("<<"),i)a.push("/"+r+" ("+mu(s(i[r]))+")");return a.push(">>"),a.join(`
`)},set:function(s){kn(s)==="object"&&(i=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(s){typeof s=="string"&&(i.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};lr(z0,Sa),Zc.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Zc.prototype.createOption=function(n){var e=new z0;return e.Parent=this,e.optionName=n,this.Kids.push(e),xz.call(this.scope,e),e};var Lf=function(){Vi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ot.CheckBox.createAppearanceStream()};lr(Lf,Vi);var Gl=function(){Sa.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,13)},set:function(e){e?this.Ff=Li(this.Ff,13):this.Ff=ki(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,21)},set:function(e){e?this.Ff=Li(this.Ff,21):this.Ff=ki(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,23)},set:function(e){e?this.Ff=Li(this.Ff,23):this.Ff=ki(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,24)},set:function(e){e?this.Ff=Li(this.Ff,24):this.Ff=ki(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,25)},set:function(e){e?this.Ff=Li(this.Ff,25):this.Ff=ki(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,26)},set:function(e){e?this.Ff=Li(this.Ff,26):this.Ff=ki(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};lr(Gl,Sa);var kf=function(){Gl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ai(this.Ff,14)},set:function(n){n?this.Ff=Li(this.Ff,14):this.Ff=ki(this.Ff,14)}}),this.password=!0};lr(kf,Gl);var ot={CheckBox:{createAppearanceStream:function(){return{N:{On:ot.CheckBox.YesNormal},D:{On:ot.CheckBox.YesPushDown,Off:ot.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Na(n);e.scope=n.scope;var t=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),r=n2(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Dt(ot.internal.getWidth(n))+" "+Dt(ot.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+i+" "+Dt(r.fontSize)+" Tf "+s),t.push("BT"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Na(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=[],r=ot.internal.getHeight(n),a=ot.internal.getWidth(n),o=n2(n,n.caption);return s.push("1 g"),s.push("0 0 "+Dt(a)+" "+Dt(r)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Dt(a-1)+" "+Dt(r-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+t+" "+Dt(o.fontSize)+" Tf "+i),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Na(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Dt(ot.internal.getWidth(n))+" "+Dt(ot.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:ot.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=ot.RadioButton.Circle.YesNormal,e.D[n]=ot.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Na(n);e.scope=n.scope;var t=[],i=ot.internal.getWidth(n)<=ot.internal.getHeight(n)?ot.internal.getWidth(n)/4:ot.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=ot.internal.Bezier_C,r=Number((i*s).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+fl(ot.internal.getWidth(n)/2)+" "+fl(ot.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),t.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),t.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),t.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Na(n);e.scope=n.scope;var t=[],i=ot.internal.getWidth(n)<=ot.internal.getHeight(n)?ot.internal.getWidth(n)/4:ot.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),r=Number((s*ot.internal.Bezier_C).toFixed(5)),a=Number((i*ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+fl(ot.internal.getWidth(n)/2)+" "+fl(ot.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),t.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),t.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),t.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+fl(ot.internal.getWidth(n)/2)+" "+fl(ot.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),t.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),t.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),t.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Na(n);e.scope=n.scope;var t=[],i=ot.internal.getWidth(n)<=ot.internal.getHeight(n)?ot.internal.getWidth(n)/4:ot.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),r=Number((s*ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+fl(ot.internal.getWidth(n)/2)+" "+fl(ot.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),t.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),t.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),t.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:ot.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=ot.RadioButton.Cross.YesNormal,e.D[n]=ot.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Na(n);e.scope=n.scope;var t=[],i=ot.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Dt(ot.internal.getWidth(n)-2)+" "+Dt(ot.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Dt(i.x1.x)+" "+Dt(i.x1.y)+" m"),t.push(Dt(i.x2.x)+" "+Dt(i.x2.y)+" l"),t.push(Dt(i.x4.x)+" "+Dt(i.x4.y)+" m"),t.push(Dt(i.x3.x)+" "+Dt(i.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Na(n);e.scope=n.scope;var t=ot.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+Dt(ot.internal.getWidth(n))+" "+Dt(ot.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Dt(ot.internal.getWidth(n)-2)+" "+Dt(ot.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(Dt(t.x1.x)+" "+Dt(t.x1.y)+" m"),i.push(Dt(t.x2.x)+" "+Dt(t.x2.y)+" l"),i.push(Dt(t.x4.x)+" "+Dt(t.x4.y)+" m"),i.push(Dt(t.x3.x)+" "+Dt(t.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Na(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Dt(ot.internal.getWidth(n))+" "+Dt(ot.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};ot.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=ot.internal.getWidth(n),t=ot.internal.getHeight(n),i=Math.min(e,t);return{x1:{x:(e-i)/2,y:(t-i)/2+i},x2:{x:(e-i)/2+i,y:(t-i)/2},x3:{x:(e-i)/2,y:(t-i)/2},x4:{x:(e-i)/2+i,y:(t-i)/2+i}}}},ot.internal.getWidth=function(n){var e=0;return kn(n)==="object"&&(e=XT(n.Rect[2])),e},ot.internal.getHeight=function(n){var e=0;return kn(n)==="object"&&(e=XT(n.Rect[3])),e};var xz=pi.addField=function(n){if(vz(this,n),!(n instanceof Sa))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};pi.AcroFormChoiceField=Xc,pi.AcroFormListBox=Qc,pi.AcroFormComboBox=Jc,pi.AcroFormEditBox=Tf,pi.AcroFormButton=Vi,pi.AcroFormPushButton=Af,pi.AcroFormRadioButton=Zc,pi.AcroFormCheckBox=Lf,pi.AcroFormTextField=Gl,pi.AcroFormPasswordField=kf,pi.AcroFormAppearance=ot,pi.AcroForm={ChoiceField:Xc,ListBox:Qc,ComboBox:Jc,EditBox:Tf,Button:Vi,PushButton:Af,RadioButton:Zc,CheckBox:Lf,TextField:Gl,PasswordField:kf,Appearance:ot},Tt.AcroForm={ChoiceField:Xc,ListBox:Qc,ComboBox:Jc,EditBox:Tf,Button:Vi,PushButton:Af,RadioButton:Zc,CheckBox:Lf,TextField:Gl,PasswordField:kf,Appearance:ot};var bz=Tt.AcroForm;function RP(n){return n.reduce(function(e,t,i){return e[t]=i,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(I,R){var q,Y,ee,j,z,B=e;if((R=R||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(C(I))for(z in t)for(ee=t[z],q=0;q<ee.length;q+=1){for(j=!0,Y=0;Y<ee[q].length;Y+=1)if(ee[q][Y]!==void 0&&ee[q][Y]!==I[Y]){j=!1;break}if(j===!0){B=z;break}}else for(z in t)for(ee=t[z],q=0;q<ee.length;q+=1){for(j=!0,Y=0;Y<ee[q].length;Y+=1)if(ee[q][Y]!==void 0&&ee[q][Y]!==I.charCodeAt(Y)){j=!1;break}if(j===!0){B=z;break}}return B===e&&R!==e&&(B=R),B},s=function I(R){for(var q=this.internal.write,Y=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var j=[];if(j.push({key:"Type",value:"/XObject"}),j.push({key:"Subtype",value:"/Image"}),j.push({key:"Width",value:R.width}),j.push({key:"Height",value:R.height}),R.colorSpace===v.INDEXED?j.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(j.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===v.DEVICE_CMYK&&j.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),j.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&j.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var z="",B=0,U=R.transparency.length;B<U;B++)z+=R.transparency[B]+" "+R.transparency[B]+" ";j.push({key:"Mask",value:"["+z+"]"})}R.sMask!==void 0&&j.push({key:"SMask",value:R.objectId+1+" 0 R"});var Q=R.filter!==void 0?["/"+R.filter]:void 0;if(Y({data:R.data,additionalKeyValues:j,alreadyAppliedFilters:Q,objectId:R.objectId}),q("endobj"),"sMask"in R&&R.sMask!==void 0){var re="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,N={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:re,data:R.sMask};"filter"in R&&(N.filter=R.filter),I.call(this,N)}if(R.colorSpace===v.INDEXED){var W=this.internal.newObject();Y({data:k(new Uint8Array(R.palette)),objectId:W}),q("endobj")}},r=function(){var I=this.internal.collections.addImage_images;for(var R in I)s.call(this,I[R])},a=function(){var I,R=this.internal.collections.addImage_images,q=this.internal.write;for(var Y in R)q("/I"+(I=R[Y]).index,I.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var I=this.internal.collections.addImage_images;return o.call(this),I},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(I){return typeof n["process"+I.toUpperCase()]=="function"},d=function(I){return kn(I)==="object"&&I.nodeType===1},h=function(I,R){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var q=""+I.getAttribute("src");if(q.indexOf("data:image/")===0)return Ef(unescape(q).split("base64,").pop());var Y=n.loadFile(q,!0);if(Y!==void 0)return Y}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var ee;switch(R){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return Ef(I.toDataURL(ee,1).split("base64,").pop())}},f=function(I){var R=this.internal.collections.addImage_images;if(R){for(var q in R)if(I===R[q].alias)return R[q]}},p=function(I,R,q){return I||R||(I=-96,R=-96),I<0&&(I=-1*q.width*72/I/this.internal.scaleFactor),R<0&&(R=-1*q.height*72/R/this.internal.scaleFactor),I===0&&(I=R*q.width/q.height),R===0&&(R=I*q.height/q.width),[I,R]},m=function(I,R,q,Y,ee,j){var z=p.call(this,q,Y,ee),B=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,Q=l.call(this);if(q=z[0],Y=z[1],Q[ee.index]=ee,j){j*=Math.PI/180;var re=Math.cos(j),N=Math.sin(j),W=function(Z){return Z.toFixed(4)},K=[W(re),W(N),W(-1*N),W(re),0,0,"cm"]}this.internal.write("q"),j?(this.internal.write([1,"0","0",1,B(I),U(R+Y),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([B(q),"0","0",B(Y),"0","0","cm"].join(" "))):this.internal.write([B(q),"0","0",B(Y),B(I),U(R+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},v=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=n.__addimage__.sHashCode=function(I){var R,q,Y=0;if(typeof I=="string")for(q=I.length,R=0;R<q;R++)Y=(Y<<5)-Y+I.charCodeAt(R),Y|=0;else if(C(I))for(q=I.byteLength/2,R=0;R<q;R++)Y=(Y<<5)-Y+I[R],Y|=0;return Y},x=n.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var R=!0;return I.length===0&&(R=!1),I.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(R=!1),R},_=n.__addimage__.extractImageFromDataUrl=function(I){var R=(I=I||"").split("base64,"),q=null;if(R.length===2){var Y=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(R[0]);Array.isArray(Y)&&(q={mimeType:Y[1],charset:Y[2],data:R[1]})}return q},T=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(I){return T()&&I instanceof ArrayBuffer};var C=n.__addimage__.isArrayBufferView=function(I){return T()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},L=n.__addimage__.binaryStringToUint8Array=function(I){for(var R=I.length,q=new Uint8Array(R),Y=0;Y<R;Y++)q[Y]=I.charCodeAt(Y);return q},k=n.__addimage__.arrayBufferToBinaryString=function(I){for(var R="",q=C(I)?I:new Uint8Array(I),Y=0;Y<q.length;Y+=8192)R+=String.fromCharCode.apply(null,q.subarray(Y,Y+8192));return R};n.addImage=function(){var I,R,q,Y,ee,j,z,B,U;if(typeof arguments[1]=="number"?(R=e,q=arguments[1],Y=arguments[2],ee=arguments[3],j=arguments[4],z=arguments[5],B=arguments[6],U=arguments[7]):(R=arguments[1],q=arguments[2],Y=arguments[3],ee=arguments[4],j=arguments[5],z=arguments[6],B=arguments[7],U=arguments[8]),kn(I=arguments[0])==="object"&&!d(I)&&"imageData"in I){var Q=I;I=Q.imageData,R=Q.format||R||e,q=Q.x||q||0,Y=Q.y||Y||0,ee=Q.w||Q.width||ee,j=Q.h||Q.height||j,z=Q.alias||z,B=Q.compression||B,U=Q.rotation||Q.angle||U}var re=this.internal.getFilters();if(B===void 0&&re.indexOf("FlateEncode")!==-1&&(B="SLOW"),isNaN(q)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var N=M.call(this,I,R,z,B);return m.call(this,q,Y,ee,j,N,U),this};var M=function(I,R,q,Y){var ee,j,z;if(typeof I=="string"&&i(I)===e){I=unescape(I);var B=D(I,!1);(B!==""||(B=n.loadFile(I,!0))!==void 0)&&(I=B)}if(d(I)&&(I=h(I,R)),R=i(I,R),!u(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((z=q)==null||z.length===0)&&(q=function(U){return typeof U=="string"||C(U)?b(U):C(U.data)?b(U.data):null}(I)),(ee=f.call(this,q))||(T()&&(I instanceof Uint8Array||R==="RGBA"||(j=I,I=L(I))),ee=this["process"+R.toUpperCase()](I,c.call(this),q,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in n.image_compression?U:y.NONE}(Y),j)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},D=n.__addimage__.convertBase64ToBinaryString=function(I,R){var q;R=typeof R!="boolean"||R;var Y,ee="";if(typeof I=="string"){Y=(q=_(I))!==null?q.data:I;try{ee=Ef(Y)}catch(j){if(R)throw x(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+j.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};n.getImageProperties=function(I){var R,q,Y="";if(d(I)&&(I=h(I)),typeof I=="string"&&i(I)===e&&((Y=D(I,!1))===""&&(Y=n.loadFile(I)||""),I=Y),q=i(I),!u(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(!T()||I instanceof Uint8Array||(I=L(I)),!(R=this["process"+q.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=q,R}})(Tt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Tt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var i,s,r,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((i=c[d]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){i=c[h];var f=this.internal.pdfEscape,p=this.internal.getEncryptor(t.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var m=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(m.objId),b=i.title||"Note";r="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+f(y(i.contents))+")",r+=" /Popup "+v.objId+" 0 R",r+=" /P "+l.objId+" 0 R",r+=" /T ("+f(y(b))+") >>",m.content=r;var x=m.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+x,i.open&&(r+=" /Open true"),r+=" >>",v.content=r,this.internal.write(m.objId,"0 R",v.objId,"0 R");break;case"freetext":s="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var _=i.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+f(p(i.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(i.options.name){var T=this.annotations._nameMap[i.options.name];i.options.pageNumber=T.page,i.options.top=T.y}else i.options.top||(i.options.top=0);if(s="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",r="",i.options.url)r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+f(p(i.options.url))+") >>";else if(i.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,r+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var C=o(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),r+=" /XYZ "+i.options.left+" "+C+" "+i.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var i=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":i.pageContext.annotations.push(t)}},n.link=function(t,i,s,r,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:c(i),w:l(t+s),h:c(i+r)},options:a,type:"link"})},n.textWithLink=function(t,i,s,r){var a,o,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){o=r.maxWidth;var u=this.splitTextToSize(t,o).length;a=Math.ceil(c*u)}else o=l,a=c;return this.text(t,i,s,r),s+=.2*c,r.align==="center"&&(i-=l/2),r.align==="right"&&(i-=l),this.link(i,s-c,o,a,r),l},n.getTextWidth=function(t){var i=this.internal.getFontSize();return this.getStringUnitWidth(t)*i/this.internal.scaleFactor}}(Tt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var r=n.__arabicParser__.isInArabicSubstitutionA=function(m){return e[m.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(m){return typeof m=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(m)},o=n.__arabicParser__.isArabicEndLetter=function(m){return a(m)&&r(m)&&e[m.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(m){return a(m)&&s.indexOf(m.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(m){return a(m)&&r(m)&&e[m.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(m){return a(m)&&r(m)&&e[m.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(m){return a(m)&&r(m)&&e[m.charCodeAt(0)].length>=3};var u=n.__arabicParser__.arabicLetterHasMedialForm=function(m){return a(m)&&r(m)&&e[m.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(m){var v=0,y=t,b="",x=0;for(v=0;v<m.length;v+=1)y[m.charCodeAt(v)]!==void 0?(x++,typeof(y=y[m.charCodeAt(v)])=="number"&&(b+=String.fromCharCode(y),y=t,x=0),v===m.length-1&&(y=t,b+=m.charAt(v-(x-1)),v-=x-1,x=0)):(y=t,b+=m.charAt(v-x),v-=x,x=0);return b};n.__arabicParser__.isArabicDiacritic=function(m){return m!==void 0&&i[m.charCodeAt(0)]!==void 0};var h=n.__arabicParser__.getCorrectForm=function(m,v,y){return a(m)?r(m)===!1?-1:!c(m)||!a(v)&&!a(y)||!a(y)&&o(v)||o(m)&&!a(v)||o(m)&&l(v)||o(m)&&o(v)?0:u(m)&&a(v)&&!o(v)&&a(y)&&c(y)?3:o(m)||!a(y)?1:2:-1},f=function(m){var v=0,y=0,b=0,x="",_="",T="",C=(m=m||"").split("\\s+"),L=[];for(v=0;v<C.length;v+=1){for(L.push(""),y=0;y<C[v].length;y+=1)x=C[v][y],_=C[v][y-1],T=C[v][y+1],a(x)?(b=h(x,_,T),L[v]+=b!==-1?String.fromCharCode(e[x.charCodeAt(0)][b]):x):L[v]+=x;L[v]=d(L[v])}return L.join(" ")},p=n.__arabicParser__.processArabic=n.processArabic=function(){var m,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(v)){var b=0;for(y=[],b=0;b<v.length;b+=1)Array.isArray(v[b])?y.push([f(v[b][0]),v[b][1],v[b][2]]):y.push([f(v[b])]);m=y}else m=f(v);return typeof arguments[0]=="string"?m:(arguments[0].text=m,arguments[0])};n.events.push(["preProcessText",p])}(Tt.API),Tt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(o){r=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,i){var s;if((t=t||"2d")!=="2d")return null;for(s in i)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=i[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Tt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(m){l=m}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(m){c=m}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(m){u=m}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(m){d=m}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(m){h=m}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(m){f=m}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(m){p=m}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){i.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,f=0,p=0,m=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=c.maxWidth;y>0?typeof l=="string"?l=this.splitTextToSize(l,y):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(x,_){return x.concat(v.splitTextToSize(_,y))},[])):l=Array.isArray(l)?l:[l];for(var b=0;b<l.length;b++)f<(m=this.getStringUnitWidth(l[b],{font:d})*u)&&(f=m);return f!==0&&(p=l.length),{w:f/=h,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new r(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var l;l=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,u,d,h){if(i.call(this),!u)throw new Error("No data for PDF table.");var f,p,m,v,y=[],b=[],x=[],_={},T={},C=[],L=[],k=(h=h||{}).autoSize||!1,M=h.printHeaders!==!1,D=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,I=h.margins||Object.assign({width:this.getPageWidth()},e),R=typeof h.padding=="number"?h.padding:3,q=h.headerBackgroundColor||"#c8c8c8",Y=h.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=Y,this.setFontSize(D),d==null)b=y=Object.keys(u[0]),x=y.map(function(){return"left"});else if(Array.isArray(d)&&kn(d[0])==="object")for(y=d.map(function(Q){return Q.name}),b=d.map(function(Q){return Q.prompt||Q.name||""}),x=d.map(function(Q){return Q.align||"left"}),f=0;f<d.length;f+=1)T[d[f].name]=d[f].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(b=y=d,x=y.map(function(){return"left"}));if(k||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<y.length;f+=1){for(_[v=y[f]]=u.map(function(Q){return Q[v]}),this.setFont(void 0,"bold"),C.push(this.getTextDimensions(b[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=_[v],this.setFont(void 0,"normal"),m=0;m<p.length;m+=1)C.push(this.getTextDimensions(p[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);T[v]=Math.max.apply(null,C)+R+R,C=[]}if(M){var ee={};for(f=0;f<y.length;f+=1)ee[y[f]]={},ee[y[f]].text=b[f],ee[y[f]].align=x[f];var j=o.call(this,ee,T);L=y.map(function(Q){return new r(l,c,T[Q],j,ee[Q].text,void 0,ee[Q].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var z=d.reduce(function(Q,re){return Q[re.name]=re.align,Q},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var B=o.call(this,u[f],T);for(m=0;m<y.length;m+=1){var U=u[f][y[m]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:m,data:U},this),a.call(this,new r(l,c,T[y[m]],B,U,f+2,z[y[m]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var p=l[f];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,p){return Math.max(f,p)},0)};n.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(p)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),t=!1}}(Tt.API);var PP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},NP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],i2=RP(NP),DP=[100,200,300,400,500,600,700,800,900],Sz=RP(DP);function s2(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(r){return PP[r=r||"normal"]?r:"normal"}(n.style),i=function(r){if(!r)return 400;if(typeof r=="number")return r>=100&&r<=900&&r%100==0?r:400;if(/^\d00$/.test(r))return parseInt(r);switch(r){case"bold":return 700;case"normal":default:return 400}}(n.weight),s=function(r){return typeof i2[r=r||"normal"]=="number"?r:"normal"}(n.stretch);return{family:e,style:t,weight:i,stretch:s,src:n.src||[],ref:n.ref||{name:e,style:[s,t,i].join(" ")}}}function QT(n,e,t,i){var s;for(s=t;s>=0&&s<e.length;s+=i)if(n[e[s]])return n[e[s]];for(s=t;s>=0&&s<e.length;s-=i)if(n[e[s]])return n[e[s]]}var wz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},JT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ZT(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function _z(n,e,t){for(var i=(t=t||{}).defaultFontFamily||"times",s=Object.assign({},wz,t.genericFontFamilies||{}),r=null,a=null,o=0;o<e.length;++o)if(s[(r=s2(e[o])).family]&&(r.family=s[r.family]),n.hasOwnProperty(r.family)){a=n[r.family];break}if(!(a=a||n[i]))throw new Error("Could not find a font-family for the rule '"+ZT(r)+"' and default family '"+i+"'.");if(a=function(l,c){if(c[l])return c[l];var u=i2[l],d=u<=i2.normal?-1:1,h=QT(c,NP,u,d);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(r.stretch,a),a=function(l,c){if(c[l])return c[l];for(var u=PP[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(r.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=Sz[l],d=QT(c,DP,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(r.weight,a)))throw new Error("Failed to resolve a font for the rule '"+ZT(r)+"'.");return a}function eA(n){return n.trimLeft()}function Ez(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Tz(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var om,tA,nA,W1=["times"];(function(n){var e,t,i,s,r,a,o,l,c,u=function(N){return N=N||{},this.isStrokeTransparent=N.isStrokeTransparent||!1,this.strokeOpacity=N.strokeOpacity||1,this.strokeStyle=N.strokeStyle||"#000000",this.fillStyle=N.fillStyle||"#000000",this.isFillTransparent=N.isFillTransparent||!1,this.fillOpacity=N.fillOpacity||1,this.font=N.font||"10px sans-serif",this.textBaseline=N.textBaseline||"alphabetic",this.textAlign=N.textAlign||"left",this.lineWidth=N.lineWidth||1,this.lineJoin=N.lineJoin||"miter",this.lineCap=N.lineCap||"butt",this.path=N.path||[],this.transform=N.transform!==void 0?N.transform.clone():new l,this.globalCompositeOperation=N.globalCompositeOperation||"normal",this.globalAlpha=N.globalAlpha||1,this.clip_path=N.clip_path||[],this.currentPoint=N.currentPoint||new a,this.miterLimit=N.miterLimit||10,this.lastPoint=N.lastPoint||new a,this.lineDashOffset=N.lineDashOffset||0,this.lineDash=N.lineDash||[],this.margin=N.margin||[0,0,0,0],this.prevPageLastElemOffset=N.prevPageLastElemOffset||0,this.ignoreClearRect=typeof N.ignoreClearRect!="boolean"||N.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(N){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=N;Object.defineProperty(this,"pdf",{get:function(){return W}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(ve){K=!!ve}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(ve){Z=!!ve}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(ve){isNaN(ve)||(te=ve)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(ve){isNaN(ve)||(oe=ve)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ve){var ne;typeof ve=="number"?ne=[ve,ve,ve,ve]:((ne=new Array(4))[0]=ve[0],ne[1]=ve.length>=2?ve[1]:ne[0],ne[2]=ve.length>=3?ve[2]:ne[0],ne[3]=ve.length>=4?ve[3]:ne[1]),c.margin=ne}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(ve){de=ve}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(ve){ge=ve}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(ve){De=ve}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ve){ve instanceof u&&(c=ve)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ve){c.path=ve}});var Re=[];Object.defineProperty(this,"ctxStack",{get:function(){return Re},set:function(ve){Re=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var ne;ne=h(ve),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var ne=h(ve);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var Ce=null;function Be(ve,ne){if(Ce===null){var Qe=function(Ye){var he=[];return Object.keys(Ye).forEach(function(Me){Ye[Me].forEach(function(Ue){var $e=null;switch(Ue){case"bold":$e={family:Me,weight:"bold"};break;case"italic":$e={family:Me,style:"italic"};break;case"bolditalic":$e={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":$e={family:Me}}$e!==null&&($e.ref={name:Me,style:Ue},he.push($e))})}),he}(ve.getFontList());Ce=function(Ye){for(var he={},Me=0;Me<Ye.length;++Me){var Ue=s2(Ye[Me]),$e=Ue.family,Fe=Ue.stretch,Xe=Ue.style,_t=Ue.weight;he[$e]=he[$e]||{},he[$e][Fe]=he[$e][Fe]||{},he[$e][Fe][Xe]=he[$e][Fe][Xe]||{},he[$e][Fe][Xe][_t]=Ue}return he}(Qe.concat(ne))}return Ce}var Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(ve){Ce=null,Ze=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var ne;if(this.ctx.font=ve,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var Qe=ne[1],Ye=(ne[2],ne[3]),he=ne[4],Me=(ne[5],ne[6]),Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(he)[2];he=Math.floor(Ue==="px"?parseFloat(he)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(he)*this.pdf.getFontSize():parseFloat(he)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(he);var $e=function(ht){var Ct,Ve,ii=[],qt=ht.trim();if(qt==="")return W1;if(qt in JT)return[JT[qt]];for(;qt!=="";){switch(Ve=null,Ct=(qt=eA(qt)).charAt(0)){case'"':case"'":Ve=Ez(qt.substring(1),Ct);break;default:Ve=Tz(qt)}if(Ve===null||(ii.push(Ve[0]),(qt=eA(Ve[1]))!==""&&qt.charAt(0)!==","))return W1;qt=qt.replace(/^,/,"")}return ii}(Me);if(this.fontFaces){var Fe=_z(Be(this.pdf,this.fontFaces),$e.map(function(ht){return{family:ht,stretch:"normal",weight:Ye,style:Qe}}));this.pdf.setFont(Fe.ref.name,Fe.ref.style)}else{var Xe="";(Ye==="bold"||parseInt(Ye,10)>=700||Qe==="bold")&&(Xe="bold"),Qe==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var _t="",We={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Lt=0;Lt<$e.length;Lt++){if(this.pdf.internal.getFont($e[Lt],Xe,{noFallback:!0,disableWarning:!0})!==void 0){_t=$e[Lt];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont($e[Lt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_t=$e[Lt],Xe="bold";else if(this.pdf.internal.getFont($e[Lt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_t=$e[Lt],Xe="normal";break}}if(_t===""){for(var zt=0;zt<$e.length;zt++)if(We[$e[zt]]){_t=We[$e[zt]];break}}_t=_t===""?"Times":_t,this.pdf.setFont(_t,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};d.prototype.setLineDash=function(N){this.lineDash=N},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){_.call(this,"fill",!1)},d.prototype.stroke=function(){_.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(N,W){if(isNaN(N)||isNaN(W))throw Mn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new a(N,W));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(N,W)},d.prototype.closePath=function(){var N=new a(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&kn(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){N=new a(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(N.x,N.y)},d.prototype.lineTo=function(N,W){if(isNaN(N)||isNaN(W))throw Mn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new a(N,W));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(K.x,K.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},d.prototype.quadraticCurveTo=function(N,W,K,Z){if(isNaN(K)||isNaN(Z)||isNaN(N)||isNaN(W))throw Mn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new a(K,Z)),oe=this.ctx.transform.applyToPoint(new a(N,W));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},d.prototype.bezierCurveTo=function(N,W,K,Z,te,oe){if(isNaN(te)||isNaN(oe)||isNaN(N)||isNaN(W)||isNaN(K)||isNaN(Z))throw Mn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new a(te,oe)),ge=this.ctx.transform.applyToPoint(new a(N,W)),De=this.ctx.transform.applyToPoint(new a(K,Z));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:De.x,y2:De.y,x:de.x,y:de.y}),this.ctx.lastPoint=new a(de.x,de.y)},d.prototype.arc=function(N,W,K,Z,te,oe){if(isNaN(N)||isNaN(W)||isNaN(K)||isNaN(Z)||isNaN(te))throw Mn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new a(N,W));N=de.x,W=de.y;var ge=this.ctx.transform.applyToPoint(new a(0,K)),De=this.ctx.transform.applyToPoint(new a(0,0));K=Math.sqrt(Math.pow(ge.x-De.x,2)+Math.pow(ge.y-De.y,2))}Math.abs(te-Z)>=2*Math.PI&&(Z=0,te=2*Math.PI),this.path.push({type:"arc",x:N,y:W,radius:K,startAngle:Z,endAngle:te,counterclockwise:oe})},d.prototype.arcTo=function(N,W,K,Z,te){throw new Error("arcTo not implemented.")},d.prototype.rect=function(N,W,K,Z){if(isNaN(N)||isNaN(W)||isNaN(K)||isNaN(Z))throw Mn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(N,W),this.lineTo(N+K,W),this.lineTo(N+K,W+Z),this.lineTo(N,W+Z),this.lineTo(N,W),this.lineTo(N+K,W),this.lineTo(N,W)},d.prototype.fillRect=function(N,W,K,Z){if(isNaN(N)||isNaN(W)||isNaN(K)||isNaN(Z))throw Mn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(N,W,K,Z),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},d.prototype.strokeRect=function(N,W,K,Z){if(isNaN(N)||isNaN(W)||isNaN(K)||isNaN(Z))throw Mn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(N,W,K,Z),this.stroke())},d.prototype.clearRect=function(N,W,K,Z){if(isNaN(N)||isNaN(W)||isNaN(K)||isNaN(Z))throw Mn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(N,W,K,Z))},d.prototype.save=function(N){N=typeof N!="boolean"||N;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),N){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},d.prototype.restore=function(N){N=typeof N!="boolean"||N;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(W),N&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(N){var W,K,Z,te;if(N.isCanvasGradient===!0&&(N=N.getColor()),!N)return{r:0,g:0,b:0,a:0,style:N};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(N))W=0,K=0,Z=0,te=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(N);if(oe!==null)W=parseInt(oe[1]),K=parseInt(oe[2]),Z=parseInt(oe[3]),te=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(N))!==null)W=parseInt(oe[1]),K=parseInt(oe[2]),Z=parseInt(oe[3]),te=parseFloat(oe[4]);else{if(te=1,typeof N=="string"&&N.charAt(0)!=="#"){var de=new TP(N);N=de.ok?de.toHex():"#000000"}N.length===4?(W=N.substring(1,2),W+=W,K=N.substring(2,3),K+=K,Z=N.substring(3,4),Z+=Z):(W=N.substring(1,3),K=N.substring(3,5),Z=N.substring(5,7)),W=parseInt(W,16),K=parseInt(K,16),Z=parseInt(Z,16)}}return{r:W,g:K,b:Z,a:te,style:N}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(N,W,K,Z){if(isNaN(W)||isNaN(K)||typeof N!="string")throw Mn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!f.call(this)){var te=B(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;R.call(this,{text:N,x:W,y:K,scale:oe,angle:te,align:this.textAlign,maxWidth:Z})}},d.prototype.strokeText=function(N,W,K,Z){if(isNaN(W)||isNaN(K)||typeof N!="string")throw Mn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){Z=isNaN(Z)?void 0:Z;var te=B(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;R.call(this,{text:N,x:W,y:K,scale:oe,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:Z})}},d.prototype.measureText=function(N){if(typeof N!="string")throw Mn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,K=this.pdf.internal.scaleFactor,Z=W.internal.getFontSize(),te=W.getStringUnitWidth(N)*Z/W.internal.scaleFactor,oe=function(de){var ge=(de=de||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ge}}),this};return new oe({width:te*=Math.round(96*K/72*1e4)/1e4})},d.prototype.scale=function(N,W){if(isNaN(N)||isNaN(W))throw Mn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(N,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.rotate=function(N){if(isNaN(N))throw Mn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new l(Math.cos(N),Math.sin(N),-Math.sin(N),Math.cos(N),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},d.prototype.translate=function(N,W){if(isNaN(N)||isNaN(W))throw Mn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,N,W);this.ctx.transform=this.ctx.transform.multiply(K)},d.prototype.transform=function(N,W,K,Z,te,oe){if(isNaN(N)||isNaN(W)||isNaN(K)||isNaN(Z)||isNaN(te)||isNaN(oe))throw Mn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new l(N,W,K,Z,te,oe);this.ctx.transform=this.ctx.transform.multiply(de)},d.prototype.setTransform=function(N,W,K,Z,te,oe){N=isNaN(N)?1:N,W=isNaN(W)?0:W,K=isNaN(K)?0:K,Z=isNaN(Z)?1:Z,te=isNaN(te)?0:te,oe=isNaN(oe)?0:oe,this.ctx.transform=new l(N,W,K,Z,te,oe)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(N,W,K,Z,te,oe,de,ge,De){var Re=this.pdf.getImageProperties(N),Ce=1,Be=1,Ze=1,ve=1;Z!==void 0&&ge!==void 0&&(Ze=ge/Z,ve=De/te,Ce=Re.width/Z*ge/Z,Be=Re.height/te*De/te),oe===void 0&&(oe=W,de=K,W=0,K=0),Z!==void 0&&ge===void 0&&(ge=Z,De=te),Z===void 0&&ge===void 0&&(ge=Re.width,De=Re.height);for(var ne,Qe=this.ctx.transform.decompose(),Ye=B(Qe.rotate.shx),he=new l,Me=(he=(he=(he=he.multiply(Qe.translate)).multiply(Qe.skew)).multiply(Qe.scale)).applyToRectangle(new o(oe-W*Ze,de-K*ve,Z*Ce,te*Be)),Ue=v.call(this,Me),$e=[],Fe=0;Fe<Ue.length;Fe+=1)$e.indexOf(Ue[Fe])===-1&&$e.push(Ue[Fe]);if(x($e),this.autoPaging)for(var Xe=$e[0],_t=$e[$e.length-1],We=Xe;We<_t+1;We++){this.pdf.setPage(We);var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],zt=We===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=We===1?0:ht+(We-2)*Ct;if(this.ctx.clip_path.length!==0){var ii=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(ne,this.posX+this.margin[3],-Ve+zt+this.ctx.prevPageLastElemOffset),T.call(this,"fill",!0),this.path=ii}var qt=JSON.parse(JSON.stringify(Me));qt=b([qt],this.posX+this.margin[3],-Ve+zt+this.ctx.prevPageLastElemOffset)[0];var Xi=(We>Xe||We<_t)&&m.call(this);Xi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,Ct,null).clip().discardPath()),this.pdf.addImage(N,"JPEG",qt.x,qt.y,qt.w,qt.h,null,null,Ye),Xi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(N,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,Ye)};var v=function(N,W,K){var Z=[];W=W||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(N.type){default:case"mt":case"lt":Z.push(Math.floor((N.y+te)/K)+1);break;case"arc":Z.push(Math.floor((N.y+te-N.radius)/K)+1),Z.push(Math.floor((N.y+te+N.radius)/K)+1);break;case"qct":var oe=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x,N.y);Z.push(Math.floor((oe.y+te)/K)+1),Z.push(Math.floor((oe.y+oe.h+te)/K)+1);break;case"bct":var de=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,N.x1,N.y1,N.x2,N.y2,N.x,N.y);Z.push(Math.floor((de.y+te)/K)+1),Z.push(Math.floor((de.y+de.h+te)/K)+1);break;case"rect":Z.push(Math.floor((N.y+te)/K)+1),Z.push(Math.floor((N.y+N.h+te)/K)+1)}for(var ge=0;ge<Z.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<Z[ge];)y.call(this);return Z},y=function(){var N=this.fillStyle,W=this.strokeStyle,K=this.font,Z=this.lineCap,te=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=N,this.strokeStyle=W,this.font=K,this.lineCap=Z,this.lineWidth=te,this.lineJoin=oe},b=function(N,W,K){for(var Z=0;Z<N.length;Z++)switch(N[Z].type){case"bct":N[Z].x2+=W,N[Z].y2+=K;case"qct":N[Z].x1+=W,N[Z].y1+=K;case"mt":case"lt":case"arc":default:N[Z].x+=W,N[Z].y+=K}return N},x=function(N){return N.sort(function(W,K){return W-K})},_=function(N,W){for(var K,Z,te=this.fillStyle,oe=this.strokeStyle,de=this.lineCap,ge=this.lineWidth,De=Math.abs(ge*this.ctx.transform.scaleX),Re=this.lineJoin,Ce=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),Ze=[],ve=0;ve<Be.length;ve++)if(Be[ve].x!==void 0)for(var ne=v.call(this,Be[ve]),Qe=0;Qe<ne.length;Qe+=1)Ze.indexOf(ne[Qe])===-1&&Ze.push(ne[Qe]);for(var Ye=0;Ye<Ze.length;Ye++)for(;this.pdf.internal.getNumberOfPages()<Ze[Ye];)y.call(this);if(x(Ze),this.autoPaging)for(var he=Ze[0],Me=Ze[Ze.length-1],Ue=he;Ue<Me+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=te,this.strokeStyle=oe,this.lineCap=de,this.lineWidth=De,this.lineJoin=Re;var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Fe=Ue===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=Ue===1?0:Xe+(Ue-2)*_t;if(this.ctx.clip_path.length!==0){var Lt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(K,this.posX+this.margin[3],-We+Fe+this.ctx.prevPageLastElemOffset),T.call(this,N,!0),this.path=Lt}if(Z=JSON.parse(JSON.stringify(Ce)),this.path=b(Z,this.posX+this.margin[3],-We+Fe+this.ctx.prevPageLastElemOffset),W===!1||Ue===0){var zt=(Ue>he||Ue<Me)&&m.call(this);zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,_t,null).clip().discardPath()),T.call(this,N,W),zt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=De,T.call(this,N,W),this.lineWidth=ge;this.path=Ce},T=function(N,W){if((N!=="stroke"||W||!p.call(this))&&(N==="stroke"||W||!f.call(this))){for(var K,Z,te=[],oe=this.path,de=0;de<oe.length;de++){var ge=oe[de];switch(ge.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:ge,deltas:[],abs:[]});break;case"lt":var De=te.length;if(oe[de-1]&&!isNaN(oe[de-1].x)&&(K=[ge.x-oe[de-1].x,ge.y-oe[de-1].y],De>0)){for(;De>=0;De--)if(te[De-1].close!==!0&&te[De-1].begin!==!0){te[De-1].deltas.push(K),te[De-1].abs.push(ge);break}}break;case"bct":K=[ge.x1-oe[de-1].x,ge.y1-oe[de-1].y,ge.x2-oe[de-1].x,ge.y2-oe[de-1].y,ge.x-oe[de-1].x,ge.y-oe[de-1].y],te[te.length-1].deltas.push(K);break;case"qct":var Re=oe[de-1].x+2/3*(ge.x1-oe[de-1].x),Ce=oe[de-1].y+2/3*(ge.y1-oe[de-1].y),Be=ge.x+2/3*(ge.x1-ge.x),Ze=ge.y+2/3*(ge.y1-ge.y),ve=ge.x,ne=ge.y;K=[Re-oe[de-1].x,Ce-oe[de-1].y,Be-oe[de-1].x,Ze-oe[de-1].y,ve-oe[de-1].x,ne-oe[de-1].y],te[te.length-1].deltas.push(K);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(ge)}}Z=W?null:N==="stroke"?"stroke":"fill";for(var Qe=!1,Ye=0;Ye<te.length;Ye++)if(te[Ye].arc)for(var he=te[Ye].abs,Me=0;Me<he.length;Me++){var Ue=he[Me];Ue.type==="arc"?k.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,W,!Qe):q.call(this,Ue.x,Ue.y),Qe=!0}else if(te[Ye].close===!0)this.pdf.internal.out("h"),Qe=!1;else if(te[Ye].begin!==!0){var $e=te[Ye].start.x,Fe=te[Ye].start.y;Y.call(this,te[Ye].deltas,$e,Fe),Qe=!0}Z&&M.call(this,Z),W&&D.call(this)}},C=function(N){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return N-K;case"top":return N+W-K;case"hanging":return N+W-2*K;case"middle":return N+W/2-K;case"ideographic":return N;case"alphabetic":default:return N}},L=function(N){return N+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var N=function(){};return N.colorStops=[],N.addColorStop=function(W,K){this.colorStops.push([W,K])},N.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},N.isCanvasGradient=!0,N},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(N,W,K,Z,te,oe,de,ge,De){for(var Re=j.call(this,K,Z,te,oe),Ce=0;Ce<Re.length;Ce++){var Be=Re[Ce];Ce===0&&(De?I.call(this,Be.x1+N,Be.y1+W):q.call(this,Be.x1+N,Be.y1+W)),ee.call(this,N,W,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}ge?D.call(this):M.call(this,de)},M=function(N){switch(N){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(N,W){this.pdf.internal.out(t(N)+" "+i(W)+" m")},R=function(N){var W;switch(N.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var K=this.pdf.getTextDimensions(N.text),Z=C.call(this,N.y),te=L.call(this,Z)-K.h,oe=this.ctx.transform.applyToPoint(new a(N.x,Z)),de=this.ctx.transform.decompose(),ge=new l;ge=(ge=(ge=ge.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var De,Re,Ce,Be=this.ctx.transform.applyToRectangle(new o(N.x,Z,K.w,K.h)),Ze=ge.applyToRectangle(new o(N.x,te,K.w,K.h)),ve=v.call(this,Ze),ne=[],Qe=0;Qe<ve.length;Qe+=1)ne.indexOf(ve[Qe])===-1&&ne.push(ve[Qe]);if(x(ne),this.autoPaging)for(var Ye=ne[0],he=ne[ne.length-1],Me=Ye;Me<he+1;Me++){this.pdf.setPage(Me);var Ue=Me===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[2],Xe=Fe-this.margin[0],_t=this.pdf.internal.pageSize.width-this.margin[1],We=_t-this.margin[3],Lt=Me===1?0:$e+(Me-2)*Xe;if(this.ctx.clip_path.length!==0){var zt=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(De,this.posX+this.margin[3],-1*Lt+Ue),T.call(this,"fill",!0),this.path=zt}var ht=b([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-Lt+Ue+this.ctx.prevPageLastElemOffset)[0];N.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*N.scale),Ce=this.lineWidth,this.lineWidth=Ce*N.scale);var Ct=this.autoPaging!=="text";if(Ct||ht.y+ht.h<=Fe){if(Ct||ht.y>=Ue&&ht.x<=_t){var Ve=Ct?N.text:this.pdf.splitTextToSize(N.text,N.maxWidth||_t-ht.x)[0],ii=b([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-Lt+Ue+this.ctx.prevPageLastElemOffset)[0],qt=Ct&&(Me>Ye||Me<he)&&m.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,Xe,null).clip().discardPath()),this.pdf.text(Ve,ii.x,ii.y,{angle:N.angle,align:W,renderingMode:N.renderingMode}),qt&&this.pdf.restoreGraphicsState()}}else ht.y<Fe&&(this.ctx.prevPageLastElemOffset+=Fe-ht.y);N.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=Ce)}else N.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*N.scale),Ce=this.lineWidth,this.lineWidth=Ce*N.scale),this.pdf.text(N.text,oe.x+this.posX,oe.y+this.posY,{angle:N.angle,align:W,renderingMode:N.renderingMode,maxWidth:N.maxWidth}),N.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=Ce)},q=function(N,W,K,Z){K=K||0,Z=Z||0,this.pdf.internal.out(t(N+K)+" "+i(W+Z)+" l")},Y=function(N,W,K){return this.pdf.lines(N,W,K,null,null)},ee=function(N,W,K,Z,te,oe,de,ge){this.pdf.internal.out([e(s(K+N)),e(r(Z+W)),e(s(te+N)),e(r(oe+W)),e(s(de+N)),e(r(ge+W)),"c"].join(" "))},j=function(N,W,K,Z){for(var te=2*Math.PI,oe=Math.PI/2;W>K;)W-=te;var de=Math.abs(K-W);de<te&&Z&&(de=te-de);for(var ge=[],De=Z?-1:1,Re=W;de>1e-5;){var Ce=Re+De*Math.min(de,oe);ge.push(z.call(this,N,Re,Ce)),de-=Math.abs(Ce-Re),Re=Ce}return ge},z=function(N,W,K){var Z=(K-W)/2,te=N*Math.cos(Z),oe=N*Math.sin(Z),de=te,ge=-oe,De=de*de+ge*ge,Re=De+de*te+ge*oe,Ce=4/3*(Math.sqrt(2*De*Re)-Re)/(de*oe-ge*te),Be=de-Ce*ge,Ze=ge+Ce*de,ve=Be,ne=-Ze,Qe=Z+W,Ye=Math.cos(Qe),he=Math.sin(Qe);return{x1:N*Math.cos(W),y1:N*Math.sin(W),x2:Be*Ye-Ze*he,y2:Be*he+Ze*Ye,x3:ve*Ye-ne*he,y3:ve*he+ne*Ye,x4:N*Math.cos(K),y4:N*Math.sin(K)}},B=function(N){return 180*N/Math.PI},U=function(N,W,K,Z,te,oe){var de=N+.5*(K-N),ge=W+.5*(Z-W),De=te+.5*(K-te),Re=oe+.5*(Z-oe),Ce=Math.min(N,te,de,De),Be=Math.max(N,te,de,De),Ze=Math.min(W,oe,ge,Re),ve=Math.max(W,oe,ge,Re);return new o(Ce,Ze,Be-Ce,ve-Ze)},Q=function(N,W,K,Z,te,oe,de,ge){var De,Re,Ce,Be,Ze,ve,ne,Qe,Ye,he,Me,Ue,$e,Fe,Xe=K-N,_t=Z-W,We=te-K,Lt=oe-Z,zt=de-te,ht=ge-oe;for(Re=0;Re<41;Re++)Ye=(ne=(Ce=N+(De=Re/40)*Xe)+De*((Ze=K+De*We)-Ce))+De*(Ze+De*(te+De*zt-Ze)-ne),he=(Qe=(Be=W+De*_t)+De*((ve=Z+De*Lt)-Be))+De*(ve+De*(oe+De*ht-ve)-Qe),Re==0?(Me=Ye,Ue=he,$e=Ye,Fe=he):(Me=Math.min(Me,Ye),Ue=Math.min(Ue,he),$e=Math.max($e,Ye),Fe=Math.max(Fe,he));return new o(Math.round(Me),Math.round(Ue),Math.round($e-Me),Math.round(Fe-Ue))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var N,W,K=(N=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:N,lineDashOffset:W}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Tt.API),function(n){var e=function(r){var a,o,l,c,u,d,h,f,p,m;for(o=[],l=0,c=(r+=a="\0\0\0\0".slice(r.length%4||4)).length;c>l;l+=4)(u=(r.charCodeAt(l)<<24)+(r.charCodeAt(l+1)<<16)+(r.charCodeAt(l+2)<<8)+r.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(m=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)-(h=u%85))/85)%85,o.push(d+33,h+33,f+33,p+33,m+33)):o.push(122);return function(v,y){for(var b=y;b>0;b--)v.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(r){var a,o,l,c,u,d=String,h="length",f=255,p="charCodeAt",m="slice",v="replace";for(r[m](-2),r=r[m](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),l=[],c=0,u=(r+=a="uuuuu"[m](r[h]%5||5))[h];u>c;c+=5)o=52200625*(r[p](c)-33)+614125*(r[p](c+1)-33)+7225*(r[p](c+2)-33)+85*(r[p](c+3)-33)+(r[p](c+4)-33),l.push(f&o>>24,f&o>>16,f&o>>8,f&o);return function(y,b){for(var x=b;x>0;x--)y.pop()}(l,a[h]),d.fromCharCode.apply(d,l)},i=function(r){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((r=r.replace(/\s/g,"")).indexOf(">")!==-1&&(r=r.substr(0,r.indexOf(">"))),r.length%2&&(r+="0"),a.test(r)===!1)return"";for(var o="",l=0;l<r.length;l+=2)o+=String.fromCharCode("0x"+(r[l]+r[l+1]));return o},s=function(r){for(var a=new Uint8Array(r.length),o=r.length;o--;)a[o]=r.charCodeAt(o);return r=(a=Jb(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};n.processDataByFilters=function(r,a){var o=0,l=r||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Tt.API),function(n){n.loadFile=function(e,t,i){return function(s,r,a){r=r!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,u){var d=new XMLHttpRequest,h=0,f=function(p){var m=p.length,v=[],y=String.fromCharCode;for(h=0;h<m;h+=1)v.push(y(255&p.charCodeAt(h)));return v.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(f(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return f(d.responseText)}(s,r,a)}catch{}return o}(e,t,i)},n.loadImageFile=n.loadFile}(Tt.API),function(n){function e(){return(kt.html2canvas?Promise.resolve(kt.html2canvas):Yb(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(kt.DOMPurify?Promise.resolve(kt.DOMPurify):Yb(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var i=function(a){var o=kn(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(a,o){var l=document.createElement(a);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},r=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(r.prototype=Object.create(Promise.prototype)).constructor=r,r.convert=function(a,o){return a.__proto__=o||r.prototype,a},r.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},r.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(l){return this.set({src:s("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},r.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},r.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},r.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},r.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var f=c[h],p=f.src.find(function(m){return m.format==="truetype"});p&&l.addFont(p.url,f.ref.name,f.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),o(this.prop.container,d)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},r.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},r.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},r.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},r.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},r.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},r.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},r.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},r.prototype.set=function(a){if(i(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in r.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},r.prototype.get=function(a,o){return this.then(function(){var l=a in r.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},r.prototype.setMargin=function(a){return this.then(function(){switch(i(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},r.prototype.setPageSize=function(a){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||Tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},r.prototype.setProgress=function(a,o,l,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},r.prototype.updateProgress=function(a,o,l,c){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},r.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},r.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:r.convert(Object.assign({},this),Promise.prototype),u=l.call(c,a,o);return r.convert(u,this.__proto__)},r.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},r.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},r.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return r.convert(o,this)},r.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},r.prototype.error=function(a){return this.then(function(){throw new Error(a)})},r.prototype.using=r.prototype.set,r.prototype.saveAs=r.prototype.save,r.prototype.export=r.prototype.output,r.prototype.run=r.prototype.then,Tt.getPageSize=function(a,o,l){if(kn(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var f,p=0,m=0;if(h.hasOwnProperty(d))p=h[d][1]/u,m=h[d][0]/u;else try{p=l[1],m=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",m>p&&(f=m,m=p,p=f);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",p>m&&(f=m,m=p,p=f)}return{width:m,height:p,unit:o,k:u,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(s2):null;var l=new r(o);return o.worker?l:l.from(a).doCallback()}}(Tt.API),Tt.API.addJS=function(n){return nA=n,this.internal.events.subscribe("postPutResources",function(){om=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(om+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),tA=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+nA+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){om!==void 0&&tA!==void 0&&this.internal.out("/Names <</JavaScript "+om+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=t.outline.render().split(/\r\n/),r=0;r<s.length;r++){var a=s[r],o=i.exec(a);if(o!=null){var l=o[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(r=0;r<c;r++){var d=t.internal.newObject();u.push(d);var h=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<u.length;r++)t.internal.write("(page_"+(r+1)+")"+u[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(i,s,r){var a={title:s,options:r,children:[]};return i==null&&(i=this.root),i.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(i){i.id=t.internal.newObjectDeferred();for(var s=0;s<i.children.length;s++)this.genIds_r(i.children[s])},t.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},t.outline.renderItems=function(i){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<i.children.length;r++){var a=i.children[r];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),r>0&&this.line("/Prev "+this.makeRef(i.children[r-1])),r<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[r+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},t.outline.line=function(i){this.ctx.val+=i+`\r
`},t.outline.makeRef=function(i){return i.id+" 0 R"},t.outline.makeString=function(i){return"("+t.internal.pdfEscape(i)+")"},t.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(i,s){for(var r=0;r<s.children.length;r++)i.count++,this.count_r(i,s.children[r]);return i.count}}])}(Tt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,i,s,r,a,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),p=d.length,m={width:0,height:0,numcomponents:1},v=4;v<p;v+=2){if(v+=f,e.indexOf(d.charCodeAt(v+1))!==-1){h=256*d.charCodeAt(v+5)+d.charCodeAt(v+6),m={width:256*d.charCodeAt(v+7)+d.charCodeAt(v+8),height:h,numcomponents:d.charCodeAt(v+9)};break}f=256*d.charCodeAt(v+2)+d.charCodeAt(v+3)}return m}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:i,alias:s}}return u}}(Tt.API);var Gu,lm,iA,sA,rA,Az=function(){var n,e,t;function i(r){var a,o,l,c,u,d,h,f,p,m,v,y,b,x;for(this.data=r,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),p=(function(){var _,T;for(T=[],_=0;_<4;++_)T.push(String.fromCharCode(this.data[this.pos++]));return T}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(p==="fdAT"&&(this.pos+=4,a-=4),r=(d!=null?d.data:void 0)||this.imgData,y=0;0<=a?y<a:y>a;0<=a?++y:--y)r.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((m=l-this.transparency.indexed.length)>0)for(b=0;0<=m?b<m:b>m;0<=m?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":h=(v=this.read(a)).indexOf(0),f=String.fromCharCode.apply(String,v.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(x=this.colorType)===4||x===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(r){var a,o;for(o=[],a=0;0<=r?a<r:a>r;0<=r?++a:--a)o.push(this.data[this.pos++]);return o},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(r){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,c=this;if(r==null&&(r=this.imgData),r.length===0)return new Uint8Array(0);function u(d,h,f,p){var m,v,y,b,x,_,T,C,L,k,M,D,I,R,q,Y,ee,j,z,B,U,Q=Math.ceil((c.width-d)/f),re=Math.ceil((c.height-h)/p),N=c.width==Q&&c.height==re;for(R=a*Q,D=N?o:new Uint8Array(R*re),_=r.length,I=0,v=0;I<re&&l<_;){switch(r[l++]){case 0:for(b=ee=0;ee<R;b=ee+=1)D[v++]=r[l++];break;case 1:for(b=j=0;j<R;b=j+=1)m=r[l++],x=b<a?0:D[v-a],D[v++]=(m+x)%256;break;case 2:for(b=z=0;z<R;b=z+=1)m=r[l++],y=(b-b%a)/a,q=I&&D[(I-1)*R+y*a+b%a],D[v++]=(q+m)%256;break;case 3:for(b=B=0;B<R;b=B+=1)m=r[l++],y=(b-b%a)/a,x=b<a?0:D[v-a],q=I&&D[(I-1)*R+y*a+b%a],D[v++]=(m+Math.floor((x+q)/2))%256;break;case 4:for(b=U=0;U<R;b=U+=1)m=r[l++],y=(b-b%a)/a,x=b<a?0:D[v-a],I===0?q=Y=0:(q=D[(I-1)*R+y*a+b%a],Y=y&&D[(I-1)*R+(y-1)*a+b%a]),T=x+q-Y,C=Math.abs(T-x),k=Math.abs(T-q),M=Math.abs(T-Y),L=C<=k&&C<=M?x:k<=M?q:Y,D[v++]=(m+L)%256;break;default:throw new Error("Invalid filter algorithm: "+r[l-1])}if(!N){var W=((h+I*p)*c.width+d)*a,K=I*R;for(b=0;b<Q;b+=1){for(var Z=0;Z<a;Z+=1)o[W++]=D[K++];W+=(f-1)*a}}I++}}return r=iz(r),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},i.prototype.decodePalette=function(){var r,a,o,l,c,u,d,h,f;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),l=0,r=0,a=d=0,h=o.length;d<h;a=d+=3)c[l++]=o[a],c[l++]=o[a+1],c[l++]=o[a+2],c[l++]=(f=u[r++])!=null?f:255;return c},i.prototype.copyToImageData=function(r,a){var o,l,c,u,d,h,f,p,m,v,y;if(l=this.colors,m=null,o=this.hasAlphaChannel,this.palette.length&&(m=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),l=4,o=!0),p=(c=r.data||r).length,d=m||a,u=h=0,l===1)for(;u<p;)f=m?4*a[u/4]:h,v=d[f++],c[u++]=v,c[u++]=v,c[u++]=v,c[u++]=o?d[f++]:255,h=f;else for(;u<p;)f=m?4*a[u/4]:h,c[u++]=d[f++],c[u++]=d[f++],c[u++]=d[f++],c[u++]=o?d[f++]:255,h=f},i.prototype.decode=function(){var r;return r=new Uint8Array(this.width*this.height*4),this.copyToImageData(r,this.decodePixels()),r};var s=function(){if(Object.prototype.toString.call(kt)==="[object Window]"){try{e=kt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),n=function(r){var a;if(s()===!0)return t.width=r.width,t.height=r.height,t.clearRect(0,0,r.width,r.height),t.putImageData(r,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(r){var a,o,l,c,u,d,h,f;if(this.animation){for(f=[],o=u=0,d=(h=this.animation.frames).length;u<d;o=++u)a=h[o],l=r.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,f.push(a.image=n(l));return f}},i.prototype.renderFrame=function(r,a){var o,l,c;return o=(l=this.animation.frames)[a],c=l[a-1],a===0&&r.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?r.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&r.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&r.clearRect(o.xOffset,o.yOffset,o.width,o.height),r.drawImage(o.image,o.xOffset,o.yOffset)},i.prototype.animate=function(r){var a,o,l,c,u,d,h=this;return o=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(a=function(){var f,p;if(f=o++%c,p=l[f],h.renderFrame(r,f),c>1&&o/c<u)return h.animation._timeout=setTimeout(a,p.delay)})()},i.prototype.stopAnimation=function(){var r;return clearTimeout((r=this.animation)!=null?r._timeout:void 0)},i.prototype.render=function(r){var a,o;return r._png&&r._png.stopAnimation(),r._png=this,r.width=this.width,r.height=this.height,a=r.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Lz(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,i=n[e++]|n[e++]<<8,s=n[e++],r=s>>7,a=1<<(7&s)+1;n[e++],n[e++];var o=null,l=null;r&&(o=e,l=a,e+=3*a);var c=!0,u=[],d=0,h=null,f=0,p=null;for(this.width=t,this.height=i;c&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,p=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var m=n[e++];d=n[e++]|n[e++]<<8,h=n[e++],!(1&m)&&(h=null),f=m>>2&7,e++;break;case 254:for(;;){if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var v=n[e++]|n[e++]<<8,y=n[e++]|n[e++]<<8,b=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,_=n[e++],T=_>>6&1,C=1<<(7&_)+1,L=o,k=l,M=!1;_>>7&&(M=!0,L=e,k=C,e+=3*C);var D=e;for(e++;;){var I;if(!((I=n[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}u.push({x:v,y,width:b,height:x,has_local_palette:M,palette_offset:L,palette_size:k,data_offset:D,data_length:e-D,transparent_index:h,interlaced:!!T,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(R){if(R<0||R>=u.length)throw new Error("Frame index out of range.");return u[R]},this.decodeAndBlitFrameBGRA=function(R,q){var Y=this.frameInfo(R),ee=Y.width*Y.height,j=new Uint8Array(ee);aA(n,Y.data_offset,j,ee);var z=Y.palette_offset,B=Y.transparent_index;B===null&&(B=256);var U=Y.width,Q=t-U,re=U,N=4*(Y.y*t+Y.x),W=4*((Y.y+Y.height)*t+Y.x),K=N,Z=4*Q;Y.interlaced===!0&&(Z+=4*t*7);for(var te=8,oe=0,de=j.length;oe<de;++oe){var ge=j[oe];if(re===0&&(re=U,(K+=Z)>=W&&(Z=4*Q+4*t*(te-1),K=N+(U+Q)*(te<<1),te>>=1)),ge===B)K+=4;else{var De=n[z+3*ge],Re=n[z+3*ge+1],Ce=n[z+3*ge+2];q[K++]=Ce,q[K++]=Re,q[K++]=De,q[K++]=255}--re}},this.decodeAndBlitFrameRGBA=function(R,q){var Y=this.frameInfo(R),ee=Y.width*Y.height,j=new Uint8Array(ee);aA(n,Y.data_offset,j,ee);var z=Y.palette_offset,B=Y.transparent_index;B===null&&(B=256);var U=Y.width,Q=t-U,re=U,N=4*(Y.y*t+Y.x),W=4*((Y.y+Y.height)*t+Y.x),K=N,Z=4*Q;Y.interlaced===!0&&(Z+=4*t*7);for(var te=8,oe=0,de=j.length;oe<de;++oe){var ge=j[oe];if(re===0&&(re=U,(K+=Z)>=W&&(Z=4*Q+4*t*(te-1),K=N+(U+Q)*(te<<1),te>>=1)),ge===B)K+=4;else{var De=n[z+3*ge],Re=n[z+3*ge+1],Ce=n[z+3*ge+2];q[K++]=De,q[K++]=Re,q[K++]=Ce,q[K++]=255}--re}}}function aA(n,e,t,i){for(var s=n[e++],r=1<<s,a=r+1,o=a+1,l=s+1,c=(1<<l)-1,u=0,d=0,h=0,f=n[e++],p=new Int32Array(4096),m=null;;){for(;u<16&&f!==0;)d|=n[e++]<<u,u+=8,f===1?f=n[e++]:--f;if(u<l)break;var v=d&c;if(d>>=l,u-=l,v!==r){if(v===a)break;for(var y=v<o?v:m,b=0,x=y;x>r;)x=p[x]>>8,++b;var _=x;if(h+b+(y!==v?1:0)>i)return void Mn.log("Warning, gif stream longer than expected.");t[h++]=_;var T=h+=b;for(y!==v&&(t[h++]=_),x=y;b--;)x=p[x],t[--T]=255&x,x>>=8;m!==null&&o<4096&&(p[o++]=m<<8|_,o>=c+1&&l<12&&(++l,c=c<<1|1)),m=v}else o=a+1,c=(1<<(l=s+1))-1,m=null}return h!==i&&Mn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function V1(n){var e,t,i,s,r,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),p=new Array(64),m=[],v=0,y=7,b=new Array(64),x=new Array(64),_=new Array(64),T=new Array(256),C=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function j(N,W){for(var K=0,Z=0,te=new Array,oe=1;oe<=16;oe++){for(var de=1;de<=N[oe];de++)te[W[Z]]=[],te[W[Z]][0]=K,te[W[Z]][1]=oe,Z++,K++;K*=2}return te}function z(N){for(var W=N[0],K=N[1]-1;K>=0;)W&1<<K&&(v|=1<<y),K--,--y<0&&(v==255?(B(255),B(0)):B(v),y=7,v=0)}function B(N){m.push(N)}function U(N){B(N>>8&255),B(255&N)}function Q(N,W,K,Z,te){for(var oe,de=te[0],ge=te[240],De=function(he,Me){var Ue,$e,Fe,Xe,_t,We,Lt,zt,ht,Ct,Ve=0;for(ht=0;ht<8;++ht){Ue=he[Ve],$e=he[Ve+1],Fe=he[Ve+2],Xe=he[Ve+3],_t=he[Ve+4],We=he[Ve+5],Lt=he[Ve+6];var ii=Ue+(zt=he[Ve+7]),qt=Ue-zt,Xi=$e+Lt,Gt=$e-Lt,Kt=Fe+We,ps=Fe-We,Xt=Xe+_t,Ns=Xe-_t,un=ii+Xt,as=ii-Xt,cr=Xi+Kt,wn=Xi-Kt;he[Ve]=un+cr,he[Ve+4]=un-cr;var pt=.707106781*(wn+as);he[Ve+2]=as+pt,he[Ve+6]=as-pt;var Qt=.382683433*((un=Ns+ps)-(wn=Gt+qt)),Ws=.5411961*un+Qt,Dn=1.306562965*wn+Qt,vi=.707106781*(cr=ps+Gt),Ii=qt+vi,ft=qt-vi;he[Ve+5]=ft+Ws,he[Ve+3]=ft-Ws,he[Ve+1]=Ii+Dn,he[Ve+7]=Ii-Dn,Ve+=8}for(Ve=0,ht=0;ht<8;++ht){Ue=he[Ve],$e=he[Ve+8],Fe=he[Ve+16],Xe=he[Ve+24],_t=he[Ve+32],We=he[Ve+40],Lt=he[Ve+48];var ji=Ue+(zt=he[Ve+56]),Qi=Ue-zt,di=$e+Lt,Fn=$e-Lt,jn=Fe+We,Ft=Fe-We,Xn=Xe+_t,gs=Xe-_t,os=ji+Xn,Ri=ji-Xn,xi=di+jn,Pi=di-jn;he[Ve]=os+xi,he[Ve+32]=os-xi;var bi=.707106781*(Pi+Ri);he[Ve+16]=Ri+bi,he[Ve+48]=Ri-bi;var Ds=.382683433*((os=gs+Ft)-(Pi=Fn+Qi)),Bi=.5411961*os+Ds,Ui=1.306562965*Pi+Ds,si=.707106781*(xi=Ft+Fn),Te=Qi+si,gt=Qi-si;he[Ve+40]=gt+Bi,he[Ve+24]=gt-Bi,he[Ve+8]=Te+Ui,he[Ve+56]=Te-Ui,Ve++}for(ht=0;ht<64;++ht)Ct=he[ht]*Me[ht],f[ht]=Ct>0?Ct+.5|0:Ct-.5|0;return f}(N,W),Re=0;Re<64;++Re)p[L[Re]]=De[Re];var Ce=p[0]-K;K=p[0],Ce==0?z(Z[0]):(z(Z[h[oe=32767+Ce]]),z(d[oe]));for(var Be=63;Be>0&&p[Be]==0;)Be--;if(Be==0)return z(de),K;for(var Ze,ve=1;ve<=Be;){for(var ne=ve;p[ve]==0&&ve<=Be;)++ve;var Qe=ve-ne;if(Qe>=16){Ze=Qe>>4;for(var Ye=1;Ye<=Ze;++Ye)z(ge);Qe&=15}oe=32767+p[ve],z(te[(Qe<<4)+h[oe]]),z(d[oe]),ve++}return Be!=63&&z(de),K}function re(N){N=Math.min(Math.max(N,1),100),r!=N&&(function(W){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var te=a((K[Z]*W+50)/100);te=Math.min(Math.max(te,1),255),o[L[Z]]=te}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var ge=a((oe[de]*W+50)/100);ge=Math.min(Math.max(ge,1),255),l[L[de]]=ge}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Re=0,Ce=0;Ce<8;Ce++)for(var Be=0;Be<8;Be++)c[Re]=1/(o[L[Re]]*De[Ce]*De[Be]*8),u[Re]=1/(l[L[Re]]*De[Ce]*De[Be]*8),Re++}(N<50?Math.floor(5e3/N):Math.floor(200-2*N)),r=N)}this.encode=function(N,W){W&&re(W),m=new Array,v=0,y=7,U(65496),U(65504),U(16),B(74),B(70),B(73),B(70),B(0),B(1),B(1),B(0),U(1),U(1),B(0),B(0),function(){U(65499),U(132),B(0);for(var $e=0;$e<64;$e++)B(o[$e]);B(1);for(var Fe=0;Fe<64;Fe++)B(l[Fe])}(),function($e,Fe){U(65472),U(17),B(8),U(Fe),U($e),B(3),B(1),B(17),B(0),B(2),B(17),B(1),B(3),B(17),B(1)}(N.width,N.height),function(){U(65476),U(418),B(0);for(var $e=0;$e<16;$e++)B(k[$e+1]);for(var Fe=0;Fe<=11;Fe++)B(M[Fe]);B(16);for(var Xe=0;Xe<16;Xe++)B(D[Xe+1]);for(var _t=0;_t<=161;_t++)B(I[_t]);B(1);for(var We=0;We<16;We++)B(R[We+1]);for(var Lt=0;Lt<=11;Lt++)B(q[Lt]);B(17);for(var zt=0;zt<16;zt++)B(Y[zt+1]);for(var ht=0;ht<=161;ht++)B(ee[ht])}(),U(65498),U(12),B(3),B(1),B(0),B(2),B(17),B(3),B(17),B(0),B(63),B(0);var K=0,Z=0,te=0;v=0,y=7,this.encode.displayName="_encode_";for(var oe,de,ge,De,Re,Ce,Be,Ze,ve,ne=N.data,Qe=N.width,Ye=N.height,he=4*Qe,Me=0;Me<Ye;){for(oe=0;oe<he;){for(Re=he*Me+oe,Be=-1,Ze=0,ve=0;ve<64;ve++)Ce=Re+(Ze=ve>>3)*he+(Be=4*(7&ve)),Me+Ze>=Ye&&(Ce-=he*(Me+1+Ze-Ye)),oe+Be>=he&&(Ce-=oe+Be-he+4),de=ne[Ce++],ge=ne[Ce++],De=ne[Ce++],b[ve]=(C[de]+C[ge+256>>0]+C[De+512>>0]>>16)-128,x[ve]=(C[de+768>>0]+C[ge+1024>>0]+C[De+1280>>0]>>16)-128,_[ve]=(C[de+1280>>0]+C[ge+1536>>0]+C[De+1792>>0]>>16)-128;K=Q(b,c,K,e,i),Z=Q(x,u,Z,t,s),te=Q(_,u,te,t,s),oe+=32}Me+=8}if(y>=0){var Ue=[];Ue[1]=y+1,Ue[0]=(1<<y+1)-1,z(Ue)}return U(65497),new Uint8Array(m)},n=n||50,function(){for(var N=String.fromCharCode,W=0;W<256;W++)T[W]=N(W)}(),e=j(k,M),t=j(R,q),i=j(D,I),s=j(Y,ee),function(){for(var N=1,W=2,K=1;K<=15;K++){for(var Z=N;Z<W;Z++)h[32767+Z]=K,d[32767+Z]=[],d[32767+Z][1]=K,d[32767+Z][0]=Z;for(var te=-(W-1);te<=-N;te++)h[32767+te]=K,d[32767+te]=[],d[32767+te][1]=K,d[32767+te][0]=W-1+te;N<<=1,W<<=1}}(),function(){for(var N=0;N<256;N++)C[N]=19595*N,C[N+256>>0]=38470*N,C[N+512>>0]=7471*N+32768,C[N+768>>0]=-11059*N,C[N+1024>>0]=-21709*N,C[N+1280>>0]=32768*N+8421375,C[N+1536>>0]=-27439*N,C[N+1792>>0]=-5329*N}(),re(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ia(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function oA(n){function e(k){if(!k)throw Error("assert :P")}function t(k,M,D){for(var I=0;4>I;I++)if(k[M+I]!=D.charCodeAt(I))return!0;return!1}function i(k,M,D,I,R){for(var q=0;q<R;q++)k[M+q]=D[I+q]}function s(k,M,D,I){for(var R=0;R<I;R++)k[M+R]=D}function r(k){return new Int32Array(k)}function a(k,M){for(var D=[],I=0;I<k;I++)D.push(new M);return D}function o(k,M){var D=[];return function I(R,q,Y){for(var ee=Y[q],j=0;j<ee&&(R.push(Y.length>q+1?[]:new M),!(Y.length<q+1));j++)I(R[j],q+1,Y)}(D,0,k),D}var l=function(){var k=this;function M(g,w){for(var A=1<<w-1>>>0;g&A;)A>>>=1;return A?(g&A-1)+A:g}function D(g,w,A,P,$){e(!(P%A));do g[w+(P-=A)]=$;while(0<P)}function I(g,w,A,P,$){if(e(2328>=$),512>=$)var V=r(512);else if((V=r($))==null)return 0;return function(G,X,J,ie,le,be){var Se,fe,Ne=X,Ee=1<<J,ce=r(16),ue=r(16);for(e(le!=0),e(ie!=null),e(G!=null),e(0<J),fe=0;fe<le;++fe){if(15<ie[fe])return 0;++ce[ie[fe]]}if(ce[0]==le)return 0;for(ue[1]=0,Se=1;15>Se;++Se){if(ce[Se]>1<<Se)return 0;ue[Se+1]=ue[Se]+ce[Se]}for(fe=0;fe<le;++fe)Se=ie[fe],0<ie[fe]&&(be[ue[Se]++]=fe);if(ue[15]==1)return(ie=new R).g=0,ie.value=be[0],D(G,Ne,1,Ee,ie),Ee;var ke,Oe=-1,Ie=Ee-1,it=0,qe=1,Et=1,Ke=1<<J;for(fe=0,Se=1,le=2;Se<=J;++Se,le<<=1){if(qe+=Et<<=1,0>(Et-=ce[Se]))return 0;for(;0<ce[Se];--ce[Se])(ie=new R).g=Se,ie.value=be[fe++],D(G,Ne+it,le,Ke,ie),it=M(it,Se)}for(Se=J+1,le=2;15>=Se;++Se,le<<=1){if(qe+=Et<<=1,0>(Et-=ce[Se]))return 0;for(;0<ce[Se];--ce[Se]){if(ie=new R,(it&Ie)!=Oe){for(Ne+=Ke,ke=1<<(Oe=Se)-J;15>Oe&&!(0>=(ke-=ce[Oe]));)++Oe,ke<<=1;Ee+=Ke=1<<(ke=Oe-J),G[X+(Oe=it&Ie)].g=ke+J,G[X+Oe].value=Ne-X-Oe}ie.g=Se-J,ie.value=be[fe++],D(G,Ne+(it>>J),le,Ke,ie),it=M(it,Se)}}return qe!=2*ue[15]-1?0:Ee}(g,w,A,P,$,V)}function R(){this.value=this.g=0}function q(){this.value=this.g=0}function Y(){this.G=a(5,R),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(cs,q)}function ee(g,w,A,P){e(g!=null),e(w!=null),e(2147483648>P),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=w,g.pa=A,g.Jd=w,g.Yc=A+P,g.Zc=4<=P?A+P-4+1:A,oe(g)}function j(g,w){for(var A=0;0<w--;)A|=ge(g,128)<<w;return A}function z(g,w){var A=j(g,w);return de(g)?-A:A}function B(g,w,A,P){var $,V=0;for(e(g!=null),e(w!=null),e(4294967288>P),g.Sb=P,g.Ra=0,g.u=0,g.h=0,4<P&&(P=4),$=0;$<P;++$)V+=w[A+$]<<8*$;g.Ra=V,g.bb=P,g.oa=w,g.pa=A}function U(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Cu-8>>>0,++g.bb,g.u-=8;K(g)&&(g.h=1,g.u=0)}function Q(g,w){if(e(0<=w),!g.h&&w<=ku){var A=W(g)&Lu[w];return g.u+=w,U(g),A}return g.h=1,g.u=0}function re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function N(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(g){return g.Ra>>>(g.u&Cu-1)>>>0}function K(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Cu}function Z(g,w){g.u=w,g.h=K(g)}function te(g){g.u>=ph&&(e(g.u>=ph),U(g))}function oe(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function de(g){return j(g,1)}function ge(g,w){var A=g.Ca;0>g.b&&oe(g);var P=g.b,$=A*w>>>8,V=(g.I>>>P>$)+0;for(V?(A-=$,g.I-=$+1<<P>>>0):A=$+1,P=A,$=0;256<=P;)$+=8,P>>=8;return P=7^$+Gs[P],g.b-=P,g.Ca=(A<<P)-1,V}function De(g,w,A){g[w+0]=A>>24&255,g[w+1]=A>>16&255,g[w+2]=A>>8&255,g[w+3]=A>>0&255}function Re(g,w){return g[w+0]<<0|g[w+1]<<8}function Ce(g,w){return Re(g,w)|g[w+2]<<16}function Be(g,w){return Re(g,w)|Re(g,w+2)<<16}function Ze(g,w){var A=1<<w;return e(g!=null),e(0<w),g.X=r(A),g.X==null?0:(g.Mb=32-w,g.Xa=w,1)}function ve(g,w){e(g!=null),e(w!=null),e(g.Xa==w.Xa),i(w.X,0,g.X,0,1<<w.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function Qe(g,w,A,P){e(A!=null),e(P!=null);var $=A[0],V=P[0];return $==0&&($=(g*V+w/2)/w),V==0&&(V=(w*$+g/2)/g),0>=$||0>=V?0:(A[0]=$,P[0]=V,1)}function Ye(g,w){return g+(1<<w)-1>>>w}function he(g,w){return((4278255360&g)+(4278255360&w)>>>0&4278255360)+((16711935&g)+(16711935&w)>>>0&16711935)>>>0}function Me(g,w){k[w]=function(A,P,$,V,G,X,J){var ie;for(ie=0;ie<G;++ie){var le=k[g](X[J+ie-1],$,V+ie);X[J+ie]=he(A[P+ie],le)}}}function Ue(){this.ud=this.hd=this.jd=0}function $e(g,w){return((4278124286&(g^w))>>>1)+(g&w)>>>0}function Fe(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Xe(g,w){return Fe(g+(g-w+.5>>1))}function _t(g,w,A){return Math.abs(w-A)-Math.abs(g-A)}function We(g,w,A,P,$,V,G){for(P=V[G-1],A=0;A<$;++A)V[G+A]=P=he(g[w+A],P)}function Lt(g,w,A,P,$){var V;for(V=0;V<A;++V){var G=g[w+V],X=G>>8&255,J=16711935&(J=(J=16711935&G)+((X<<16)+X));P[$+V]=(4278255360&G)+J>>>0}}function zt(g,w){w.jd=g>>0&255,w.hd=g>>8&255,w.ud=g>>16&255}function ht(g,w,A,P,$,V){var G;for(G=0;G<P;++G){var X=w[A+G],J=X>>>8,ie=X,le=255&(le=(le=X>>>16)+((g.jd<<24>>24)*(J<<24>>24)>>>5));ie=255&(ie=(ie=ie+((g.hd<<24>>24)*(J<<24>>24)>>>5))+((g.ud<<24>>24)*(le<<24>>24)>>>5)),$[V+G]=(4278255360&X)+(le<<16)+ie}}function Ct(g,w,A,P,$){k[w]=function(V,G,X,J,ie,le,be,Se,fe){for(J=be;J<Se;++J)for(be=0;be<fe;++be)ie[le++]=$(X[P(V[G++])])},k[g]=function(V,G,X,J,ie,le,be){var Se=8>>V.b,fe=V.Ea,Ne=V.K[0],Ee=V.w;if(8>Se)for(V=(1<<V.b)-1,Ee=(1<<Se)-1;G<X;++G){var ce,ue=0;for(ce=0;ce<fe;++ce)ce&V||(ue=P(J[ie++])),le[be++]=$(Ne[ue&Ee]),ue>>=Se}else k["VP8LMapColor"+A](J,ie,Ne,Ee,le,be,G,X,fe)}}function Ve(g,w,A,P,$){for(A=w+A;w<A;){var V=g[w++];P[$++]=V>>16&255,P[$++]=V>>8&255,P[$++]=V>>0&255}}function ii(g,w,A,P,$){for(A=w+A;w<A;){var V=g[w++];P[$++]=V>>16&255,P[$++]=V>>8&255,P[$++]=V>>0&255,P[$++]=V>>24&255}}function qt(g,w,A,P,$){for(A=w+A;w<A;){var V=(G=g[w++])>>16&240|G>>12&15,G=G>>0&240|G>>28&15;P[$++]=V,P[$++]=G}}function Xi(g,w,A,P,$){for(A=w+A;w<A;){var V=(G=g[w++])>>16&248|G>>13&7,G=G>>5&224|G>>3&31;P[$++]=V,P[$++]=G}}function Gt(g,w,A,P,$){for(A=w+A;w<A;){var V=g[w++];P[$++]=V>>0&255,P[$++]=V>>8&255,P[$++]=V>>16&255}}function Kt(g,w,A,P,$,V){if(V==0)for(A=w+A;w<A;)De(P,((V=g[w++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),$+=32;else i(P,$,g,w,A)}function ps(g,w){k[w][0]=k[g+"0"],k[w][1]=k[g+"1"],k[w][2]=k[g+"2"],k[w][3]=k[g+"3"],k[w][4]=k[g+"4"],k[w][5]=k[g+"5"],k[w][6]=k[g+"6"],k[w][7]=k[g+"7"],k[w][8]=k[g+"8"],k[w][9]=k[g+"9"],k[w][10]=k[g+"10"],k[w][11]=k[g+"11"],k[w][12]=k[g+"12"],k[w][13]=k[g+"13"],k[w][14]=k[g+"0"],k[w][15]=k[g+"0"]}function Xt(g){return g==Ev||g==Tv||g==lg||g==Av}function Ns(){this.eb=[],this.size=this.A=this.fb=0}function un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function as(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ns,this.f.kb=new un,this.sd=null}function cr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pt(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Qt(g,w){var A=g.T,P=w.ba.f.RGBA,$=P.eb,V=P.fb+g.ka*P.A,G=Dr[w.ba.S],X=g.y,J=g.O,ie=g.f,le=g.N,be=g.ea,Se=g.W,fe=w.cc,Ne=w.dc,Ee=w.Mc,ce=w.Nc,ue=g.ka,ke=g.ka+g.T,Oe=g.U,Ie=Oe+1>>1;for(ue==0?G(X,J,null,null,ie,le,be,Se,ie,le,be,Se,$,V,null,null,Oe):(G(w.ec,w.fc,X,J,fe,Ne,Ee,ce,ie,le,be,Se,$,V-P.A,$,V,Oe),++A);ue+2<ke;ue+=2)fe=ie,Ne=le,Ee=be,ce=Se,le+=g.Rc,Se+=g.Rc,V+=2*P.A,G(X,(J+=2*g.fa)-g.fa,X,J,fe,Ne,Ee,ce,ie,le,be,Se,$,V-P.A,$,V,Oe);return J+=g.fa,g.j+ke<g.o?(i(w.ec,w.fc,X,J,Oe),i(w.cc,w.dc,ie,le,Ie),i(w.Mc,w.Nc,be,Se,Ie),A--):1&ke||G(X,J,null,null,ie,le,be,Se,ie,le,be,Se,$,V+P.A,null,null,Oe),A}function Ws(g,w,A){var P=g.F,$=[g.J];if(P!=null){var V=g.U,G=w.ba.S,X=G==og||G==lg;w=w.ba.f.RGBA;var J=[0],ie=g.ka;J[0]=g.T,g.Kb&&(ie==0?--J[0]:(--ie,$[0]-=g.width),g.j+g.ka+g.T==g.o&&(J[0]=g.o-g.j-ie));var le=w.eb;ie=w.fb+ie*w.A,g=Un(P,$[0],g.width,V,J,le,ie+(X?0:3),w.A),e(A==J),g&&Xt(G)&&Pr(le,ie,X,V,J,w.A)}return 0}function Dn(g){var w=g.ma,A=w.ba.S,P=11>A,$=A==rg||A==ag||A==og||A==_v||A==12||Xt(A);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!hh(w.Oa,g,$?11:12))return 0;if($&&Xt(A)&&je(),g.da)alert("todo:use_scaling");else{if(P){if(w.Ib=pt,g.Kb){if(A=g.U+1>>1,w.memory=r(g.U+2*A),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+g.U,w.Mc=w.cc,w.Nc=w.dc+A,w.Ib=Qt,je()}}else alert("todo:EmitYUV");$&&(w.Jb=Ws,P&&me())}if(P&&!r5){for(g=0;256>g;++g)p3[g]=89858*(g-128)+ug>>cg,y3[g]=-22014*(g-128)+ug,m3[g]=-45773*(g-128),g3[g]=113618*(g-128)+ug>>cg;for(g=Sh;g<Cv;++g)w=76283*(g-16)+ug>>cg,v3[g-Sh]=ur(w,255),x3[g-Sh]=ur(w+8>>4,15);r5=1}return 1}function vi(g){var w=g.ma,A=g.U,P=g.T;return e(!(1&g.ka)),0>=A||0>=P?0:(A=w.Ib(g,w),w.Jb!=null&&w.Jb(g,w,A),w.Dc+=A,1)}function Ii(g){g.ma.memory=null}function ft(g,w,A,P){return Q(g,8)!=47?0:(w[0]=Q(g,14)+1,A[0]=Q(g,14)+1,P[0]=Q(g,1),Q(g,3)!=0?0:!g.h)}function ji(g,w){if(4>g)return g+1;var A=g-2>>1;return(2+(1&g)<<A)+Q(w,A)+1}function Qi(g,w){return 120<w?w-120:1<=(A=((A=e3[w-1])>>4)*g+(8-(15&A)))?A:1;var A}function di(g,w,A){var P=W(A),$=g[w+=255&P].g-8;return 0<$&&(Z(A,A.u+8),P=W(A),w+=g[w].value,w+=P&(1<<$)-1),Z(A,A.u+g[w].g),g[w].value}function Fn(g,w,A){return A.g+=g.g,A.value+=g.value<<w>>>0,e(8>=A.g),g.g}function jn(g,w,A){var P=g.xc;return e((w=P==0?0:g.vc[g.md*(A>>P)+(w>>P)])<g.Wb),g.Ya[w]}function Ft(g,w,A,P){var $=g.ab,V=g.c*w,G=g.C;w=G+w;var X=A,J=P;for(P=g.Ta,A=g.Ua;0<$--;){var ie=g.gc[$],le=G,be=w,Se=X,fe=J,Ne=(J=P,X=A,ie.Ea);switch(e(le<be),e(be<=ie.nc),ie.hc){case 2:Jp(Se,fe,(be-le)*Ne,J,X);break;case 0:var Ee=le,ce=be,ue=J,ke=X,Oe=(Ke=ie).Ea;Ee==0&&(Sv(Se,fe,null,null,1,ue,ke),We(Se,fe+1,0,0,Oe-1,ue,ke+1),fe+=Oe,ke+=Oe,++Ee);for(var Ie=1<<Ke.b,it=Ie-1,qe=Ye(Oe,Ke.b),Et=Ke.K,Ke=Ke.w+(Ee>>Ke.b)*qe;Ee<ce;){var mn=Et,En=Ke,dn=1;for(gh(Se,fe,ue,ke-Oe,1,ue,ke);dn<Oe;){var nn=(dn&~it)+Ie;nn>Oe&&(nn=Oe),(0,el[mn[En++]>>8&15])(Se,fe+ +dn,ue,ke+dn-Oe,nn-dn,ue,ke+dn),dn=nn}fe+=Oe,ke+=Oe,++Ee&it||(Ke+=qe)}be!=ie.nc&&i(J,X-Ne,J,X+(be-le-1)*Ne,Ne);break;case 1:for(Ne=Se,ce=fe,Oe=(Se=ie.Ea)-(ke=Se&~(ue=(fe=1<<ie.b)-1)),Ee=Ye(Se,ie.b),Ie=ie.K,ie=ie.w+(le>>ie.b)*Ee;le<be;){for(it=Ie,qe=ie,Et=new Ue,Ke=ce+ke,mn=ce+Se;ce<Ke;)zt(it[qe++],Et),hc(Et,Ne,ce,fe,J,X),ce+=fe,X+=fe;ce<mn&&(zt(it[qe++],Et),hc(Et,Ne,ce,Oe,J,X),ce+=Oe,X+=Oe),++le&ue||(ie+=Ee)}break;case 3:if(Se==J&&fe==X&&0<ie.b){for(ce=J,Se=Ne=X+(be-le)*Ne-(ke=(be-le)*Ye(ie.Ea,ie.b)),fe=J,ue=X,Ee=[],ke=(Oe=ke)-1;0<=ke;--ke)Ee[ke]=fe[ue+ke];for(ke=Oe-1;0<=ke;--ke)ce[Se+ke]=Ee[ke];Cr(ie,le,be,J,Ne,J,X)}else Cr(ie,le,be,Se,fe,J,X)}X=P,J=A}J!=A&&i(P,A,X,J,V)}function Xn(g,w){var A=g.V,P=g.Ba+g.c*g.C,$=w-g.C;if(e(w<=g.l.o),e(16>=$),0<$){var V=g.l,G=g.Ta,X=g.Ua,J=V.width;if(Ft(g,$,A,P),$=X=[X],e((A=g.C)<(P=w)),e(V.v<V.va),P>V.o&&(P=V.o),A<V.j){var ie=V.j-A;A=V.j,$[0]+=ie*J}if(A>=P?A=0:($[0]+=4*V.v,V.ka=A-V.j,V.U=V.va-V.v,V.T=P-A,A=1),A){if(X=X[0],11>(A=g.ca).S){var le=A.f.RGBA,be=(P=A.S,$=V.U,V=V.T,ie=le.eb,le.A),Se=V;for(le=le.fb+g.Ma*le.A;0<Se--;){var fe=G,Ne=X,Ee=$,ce=ie,ue=le;switch(P){case sg:Ys(fe,Ne,Ee,ce,ue);break;case rg:Ms(fe,Ne,Ee,ce,ue);break;case Ev:Ms(fe,Ne,Ee,ce,ue),Pr(ce,ue,0,Ee,1,0);break;case Xw:so(fe,Ne,Ee,ce,ue);break;case ag:Kt(fe,Ne,Ee,ce,ue,1);break;case Tv:Kt(fe,Ne,Ee,ce,ue,1),Pr(ce,ue,0,Ee,1,0);break;case og:Kt(fe,Ne,Ee,ce,ue,0);break;case lg:Kt(fe,Ne,Ee,ce,ue,0),Pr(ce,ue,1,Ee,1,0);break;case _v:tl(fe,Ne,Ee,ce,ue);break;case Av:tl(fe,Ne,Ee,ce,ue),Bn(ce,ue,Ee,1,0);break;case Qw:io(fe,Ne,Ee,ce,ue);break;default:e(0)}X+=J,le+=be}g.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=A.height)}}g.C=w,e(g.C<=g.i)}function gs(g){var w;if(0<g.ua)return 0;for(w=0;w<g.Wb;++w){var A=g.Ya[w].G,P=g.Ya[w].H;if(0<A[1][P[1]+0].g||0<A[2][P[2]+0].g||0<A[3][P[3]+0].g)return 0}return 1}function os(g,w,A,P,$,V){if(g.Z!=0){var G=g.qd,X=g.rd;for(e(rl[g.Z]!=null);w<A;++w)rl[g.Z](G,X,P,$,P,$,V),G=P,X=$,$+=V;g.qd=G,g.rd=X}}function Ri(g,w){var A=g.l.ma,P=A.Z==0||A.Z==1?g.l.j:g.C;if(P=g.C<P?P:g.C,e(w<=g.l.o),w>P){var $=g.l.width,V=A.ca,G=A.tb+$*P,X=g.V,J=g.Ba+g.c*P,ie=g.gc;e(g.ab==1),e(ie[0].hc==3),Zp(ie[0],P,w,X,J,V,G),os(A,P,w,V,G,$)}g.C=g.Ma=w}function xi(g,w,A,P,$,V,G){var X=g.$/P,J=g.$%P,ie=g.m,le=g.s,be=A+g.$,Se=be;$=A+P*$;var fe=A+P*V,Ne=280+le.ua,Ee=g.Pb?X:16777216,ce=0<le.ua?le.Wa:null,ue=le.wc,ke=be<fe?jn(le,J,X):null;e(g.C<V),e(fe<=$);var Oe=!1;e:for(;;){for(;Oe||be<fe;){var Ie=0;if(X>=Ee){var it=be-A;e((Ee=g).Pb),Ee.wd=Ee.m,Ee.xd=it,0<Ee.s.ua&&ve(Ee.s.Wa,Ee.s.vb),Ee=X+n3}if(J&ue||(ke=jn(le,J,X)),e(ke!=null),ke.Qb&&(w[be]=ke.qb,Oe=!0),!Oe)if(te(ie),ke.jc){Ie=ie,it=w;var qe=be,Et=ke.pd[W(Ie)&cs-1];e(ke.jc),256>Et.g?(Z(Ie,Ie.u+Et.g),it[qe]=Et.value,Ie=0):(Z(Ie,Ie.u+Et.g-256),e(256<=Et.value),Ie=Et.value),Ie==0&&(Oe=!0)}else Ie=di(ke.G[0],ke.H[0],ie);if(ie.h)break;if(Oe||256>Ie){if(!Oe)if(ke.nd)w[be]=(ke.qb|Ie<<8)>>>0;else{if(te(ie),Oe=di(ke.G[1],ke.H[1],ie),te(ie),it=di(ke.G[2],ke.H[2],ie),qe=di(ke.G[3],ke.H[3],ie),ie.h)break;w[be]=(qe<<24|Oe<<16|Ie<<8|it)>>>0}if(Oe=!1,++be,++J>=P&&(J=0,++X,G!=null&&X<=V&&!(X%16)&&G(g,X),ce!=null))for(;Se<be;)Ie=w[Se++],ce.X[(506832829*Ie&4294967295)>>>ce.Mb]=Ie}else if(280>Ie){if(Ie=ji(Ie-256,ie),it=di(ke.G[4],ke.H[4],ie),te(ie),it=Qi(P,it=ji(it,ie)),ie.h)break;if(be-A<it||$-be<Ie)break e;for(qe=0;qe<Ie;++qe)w[be+qe]=w[be+qe-it];for(be+=Ie,J+=Ie;J>=P;)J-=P,++X,G!=null&&X<=V&&!(X%16)&&G(g,X);if(e(be<=$),J&ue&&(ke=jn(le,J,X)),ce!=null)for(;Se<be;)Ie=w[Se++],ce.X[(506832829*Ie&4294967295)>>>ce.Mb]=Ie}else{if(!(Ie<Ne))break e;for(Oe=Ie-280,e(ce!=null);Se<be;)Ie=w[Se++],ce.X[(506832829*Ie&4294967295)>>>ce.Mb]=Ie;Ie=be,e(!(Oe>>>(it=ce).Xa)),w[Ie]=it.X[Oe],Oe=!0}Oe||e(ie.h==K(ie))}if(g.Pb&&ie.h&&be<$)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&ve(g.s.vb,g.s.Wa);else{if(ie.h)break e;G!=null&&G(g,X>V?V:X),g.a=0,g.$=be-A}return 1}return g.a=3,0}function Pi(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var w=g.Wa;w!=null&&(w.X=null),g.vb=null,e(g!=null)}function bi(){var g=new bv;return g==null?null:(g.a=0,g.xb=e5,ps("Predictor","VP8LPredictors"),ps("Predictor","VP8LPredictors_C"),ps("PredictorAdd","VP8LPredictorsAdd"),ps("PredictorAdd","VP8LPredictorsAdd_C"),Jp=Lt,hc=ht,Ys=Ve,Ms=ii,tl=qt,io=Xi,so=Gt,k.VP8LMapColor32b=Iu,k.VP8LMapColor8b=eg,g)}function Ds(g,w,A,P,$){var V=1,G=[g],X=[w],J=P.m,ie=P.s,le=null,be=0;e:for(;;){if(A)for(;V&&Q(J,1);){var Se=G,fe=X,Ne=P,Ee=1,ce=Ne.m,ue=Ne.gc[Ne.ab],ke=Q(ce,2);if(Ne.Oc&1<<ke)V=0;else{switch(Ne.Oc|=1<<ke,ue.hc=ke,ue.Ea=Se[0],ue.nc=fe[0],ue.K=[null],++Ne.ab,e(4>=Ne.ab),ke){case 0:case 1:ue.b=Q(ce,3)+2,Ee=Ds(Ye(ue.Ea,ue.b),Ye(ue.nc,ue.b),0,Ne,ue.K),ue.K=ue.K[0];break;case 3:var Oe,Ie=Q(ce,8)+1,it=16<Ie?0:4<Ie?1:2<Ie?2:3;if(Se[0]=Ye(ue.Ea,it),ue.b=it,Oe=Ee=Ds(Ie,1,0,Ne,ue.K)){var qe,Et=Ie,Ke=ue,mn=1<<(8>>Ke.b),En=r(mn);if(En==null)Oe=0;else{var dn=Ke.K[0],nn=Ke.w;for(En[0]=Ke.K[0][0],qe=1;qe<1*Et;++qe)En[qe]=he(dn[nn+qe],En[qe-1]);for(;qe<4*mn;++qe)En[qe]=0;Ke.K[0]=null,Ke.K[0]=En,Oe=1}}Ee=Oe;break;case 2:break;default:e(0)}V=Ee}}if(G=G[0],X=X[0],V&&Q(J,1)&&!(V=1<=(be=Q(J,4))&&11>=be)){P.a=3;break e}var On;if(On=V)t:{var Pn,Ut,Oi,qs=P,Mi=G,Ks=X,Tn=be,hr=A,fr=qs.m,Zi=qs.s,us=[null],js=1,Or=0,La=t3[Tn];n:for(;;){if(hr&&Q(fr,1)){var es=Q(fr,3)+2,lo=Ye(Mi,es),yc=Ye(Ks,es),Ou=lo*yc;if(!Ds(lo,yc,0,qs,us))break n;for(us=us[0],Zi.xc=es,Pn=0;Pn<Ou;++Pn){var al=us[Pn]>>8&65535;us[Pn]=al,al>=js&&(js=al+1)}}if(fr.h)break n;for(Ut=0;5>Ut;++Ut){var fi=Jw[Ut];!Ut&&0<Tn&&(fi+=1<<Tn),Or<fi&&(Or=fi)}var Iv=a(js*La,R),l5=js,c5=a(l5,Y);if(c5==null)var hg=null;else e(65536>=l5),hg=c5;var wh=r(Or);if(hg==null||wh==null||Iv==null){qs.a=1;break n}var fg=Iv;for(Pn=Oi=0;Pn<js;++Pn){var Zr=hg[Pn],Mu=Zr.G,Fu=Zr.H,u5=0,pg=1,d5=0;for(Ut=0;5>Ut;++Ut){fi=Jw[Ut],Mu[Ut]=fg,Fu[Ut]=Oi,!Ut&&0<Tn&&(fi+=1<<Tn);s:{var gg,Rv=fi,mg=qs,_h=wh,w3=fg,_3=Oi,Pv=0,ol=mg.m,E3=Q(ol,1);if(s(_h,0,0,Rv),E3){var T3=Q(ol,1)+1,A3=Q(ol,1),h5=Q(ol,A3==0?1:8);_h[h5]=1,T3==2&&(_h[h5=Q(ol,8)]=1);var yg=1}else{var f5=r(19),p5=Q(ol,4)+4;if(19<p5){mg.a=3;var vg=0;break s}for(gg=0;gg<p5;++gg)f5[ZD[gg]]=Q(ol,3);var Nv=void 0,Eh=void 0,g5=mg,L3=f5,xg=Rv,m5=_h,Dv=0,ll=g5.m,y5=8,v5=a(128,R);i:for(;I(v5,0,7,L3,19);){if(Q(ll,1)){var k3=2+2*Q(ll,3);if((Nv=2+Q(ll,k3))>xg)break i}else Nv=xg;for(Eh=0;Eh<xg&&Nv--;){te(ll);var x5=v5[0+(127&W(ll))];Z(ll,ll.u+x5.g);var ju=x5.value;if(16>ju)m5[Eh++]=ju,ju!=0&&(y5=ju);else{var C3=ju==16,b5=ju-16,I3=QD[b5],S5=Q(ll,XD[b5])+I3;if(Eh+S5>xg)break i;for(var R3=C3?y5:0;0<S5--;)m5[Eh++]=R3}}Dv=1;break i}Dv||(g5.a=3),yg=Dv}(yg=yg&&!ol.h)&&(Pv=I(w3,_3,8,_h,Rv)),yg&&Pv!=0?vg=Pv:(mg.a=3,vg=0)}if(vg==0)break n;if(pg&&JD[Ut]==1&&(pg=fg[Oi].g==0),u5+=fg[Oi].g,Oi+=vg,3>=Ut){var Th,Ov=wh[0];for(Th=1;Th<fi;++Th)wh[Th]>Ov&&(Ov=wh[Th]);d5+=Ov}}if(Zr.nd=pg,Zr.Qb=0,pg&&(Zr.qb=(Mu[3][Fu[3]+0].value<<24|Mu[1][Fu[1]+0].value<<16|Mu[2][Fu[2]+0].value)>>>0,u5==0&&256>Mu[0][Fu[0]+0].value&&(Zr.Qb=1,Zr.qb+=Mu[0][Fu[0]+0].value<<8)),Zr.jc=!Zr.Qb&&6>d5,Zr.jc){var bg,co=Zr;for(bg=0;bg<cs;++bg){var cl=bg,ul=co.pd[cl],Sg=co.G[0][co.H[0]+cl];256<=Sg.value?(ul.g=Sg.g+256,ul.value=Sg.value):(ul.g=0,ul.value=0,cl>>=Fn(Sg,8,ul),cl>>=Fn(co.G[1][co.H[1]+cl],16,ul),cl>>=Fn(co.G[2][co.H[2]+cl],0,ul),Fn(co.G[3][co.H[3]+cl],24,ul))}}}Zi.vc=us,Zi.Wb=js,Zi.Ya=hg,Zi.yc=Iv,On=1;break t}On=0}if(!(V=On)){P.a=3;break e}if(0<be){if(ie.ua=1<<be,!Ze(ie.Wa,be)){P.a=1,V=0;break e}}else ie.ua=0;var Mv=P,w5=G,P3=X,Fv=Mv.s,jv=Fv.xc;if(Mv.c=w5,Mv.i=P3,Fv.md=Ye(w5,jv),Fv.wc=jv==0?-1:(1<<jv)-1,A){P.xb=c3;break e}if((le=r(G*X))==null){P.a=1,V=0;break e}V=(V=xi(P,le,0,G,X,X,null))&&!J.h;break e}return V?($!=null?$[0]=le:(e(le==null),e(A)),P.$=0,A||Pi(ie)):Pi(ie),V}function Bi(g,w){var A=g.c*g.i,P=A+w+16*w;return e(g.c<=w),g.V=r(P),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+A+w,1)}function Ui(g,w){var A=g.C,P=w-A,$=g.V,V=g.Ba+g.c*A;for(e(w<=g.l.o);0<P;){var G=16<P?16:P,X=g.l.ma,J=g.l.width,ie=J*G,le=X.ca,be=X.tb+J*A,Se=g.Ta,fe=g.Ua;Ft(g,G,$,V),_i(Se,fe,le,be,ie),os(X,A,A+G,le,be,J),P-=G,$+=G*g.c,A+=G}e(A==w),g.C=g.Ma=w}function si(){this.ub=this.yd=this.td=this.Rb=0}function Te(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function gt(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function Jt(){this.Yb=function(){var g=[];return function w(A,P,$){for(var V=$[P],G=0;G<V&&(A.push($.length>P+1?[]:0),!($.length<P+1));G++)w(A[G],P+1,$)}(g,0,[3,11]),g}()}function rt(){this.jb=r(3),this.Wc=o([4,8],Jt),this.Xc=o([4,17],Jt)}function bt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function xt(){this.ld=this.La=this.dd=this.tc=0}function Rn(){this.Na=this.la=0}function kr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pe(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function St(){this.uc=this.M=this.Nb=0,this.wa=Array(new xt),this.Y=0,this.ya=Array(new Pe),this.aa=0,this.l=new Bt}function wt(){this.y=r(16),this.f=r(8),this.ea=r(8)}function jt(){this.cb=this.a=0,this.sc="",this.m=new re,this.Od=new si,this.Kc=new Te,this.ed=new bt,this.Qa=new gt,this.Ic=this.$c=this.Aa=0,this.D=new St,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,re),this.ia=0,this.pb=a(4,kr),this.Pa=new rt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new wt),this.Hd=0,this.rb=Array(new Rn),this.sb=0,this.wa=Array(new xt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pe),this.L=this.aa=0,this.gd=o([4,2],xt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Bt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fn(){var g=new jt;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,bh||(bh=Qn)),g}function on(g,w,A){return g.a==0&&(g.a=w,g.sc=A,g.cb=0),0}function ls(g,w,A){return 3<=A&&g[w+0]==157&&g[w+1]==1&&g[w+2]==42}function Ni(g,w){if(g==null)return 0;if(g.a=0,g.sc="OK",w==null)return on(g,2,"null VP8Io passed to VP8GetHeaders()");var A=w.data,P=w.w,$=w.ha;if(4>$)return on(g,7,"Truncated header.");var V=A[P+0]|A[P+1]<<8|A[P+2]<<16,G=g.Od;if(G.Rb=!(1&V),G.td=V>>1&7,G.yd=V>>4&1,G.ub=V>>5,3<G.td)return on(g,3,"Incorrect keyframe parameters.");if(!G.yd)return on(g,4,"Frame not displayable.");P+=3,$-=3;var X=g.Kc;if(G.Rb){if(7>$)return on(g,7,"cannot parse picture header");if(!ls(A,P,$))return on(g,3,"Bad code word");X.c=16383&(A[P+4]<<8|A[P+3]),X.Td=A[P+4]>>6,X.i=16383&(A[P+6]<<8|A[P+5]),X.Ud=A[P+6]>>6,P+=7,$-=7,g.za=X.c+15>>4,g.Ub=X.i+15>>4,w.width=X.c,w.height=X.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,s((V=g.Pa).jb,0,255,V.jb.length),e((V=g.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,s(V.Zb,0,0,V.Zb.length),s(V.Lb,0,0,V.Lb)}if(G.ub>$)return on(g,7,"bad partition length");ee(V=g.m,A,P,G.ub),P+=G.ub,$-=G.ub,G.Rb&&(X.Ld=de(V),X.Kd=de(V)),X=g.Qa;var J,ie=g.Pa;if(e(V!=null),e(X!=null),X.Cb=de(V),X.Cb){if(X.Bb=de(V),de(V)){for(X.Fb=de(V),J=0;4>J;++J)X.Zb[J]=de(V)?z(V,7):0;for(J=0;4>J;++J)X.Lb[J]=de(V)?z(V,6):0}if(X.Bb)for(J=0;3>J;++J)ie.jb[J]=de(V)?j(V,8):255}else X.Bb=0;if(V.Ka)return on(g,3,"cannot parse segment header");if((X=g.ed).zd=de(V),X.Tb=j(V,6),X.wb=j(V,3),X.Pc=de(V),X.Pc&&de(V)){for(ie=0;4>ie;++ie)de(V)&&(X.vd[ie]=z(V,6));for(ie=0;4>ie;++ie)de(V)&&(X.od[ie]=z(V,6))}if(g.L=X.Tb==0?0:X.zd?1:2,V.Ka)return on(g,3,"cannot parse filter header");var le=$;if($=J=P,P=J+le,X=le,g.Xb=(1<<j(g.m,2))-1,le<3*(ie=g.Xb))A=7;else{for(J+=3*ie,X-=3*ie,le=0;le<ie;++le){var be=A[$+0]|A[$+1]<<8|A[$+2]<<16;be>X&&(be=X),ee(g.Jc[+le],A,J,be),J+=be,X-=be,$+=3}ee(g.Jc[+ie],A,J,X),A=J<P?0:5}if(A!=0)return on(g,A,"cannot parse partitions");for(A=j(J=g.m,7),$=de(J)?z(J,4):0,P=de(J)?z(J,4):0,X=de(J)?z(J,4):0,ie=de(J)?z(J,4):0,J=de(J)?z(J,4):0,le=g.Qa,be=0;4>be;++be){if(le.Cb){var Se=le.Zb[be];le.Fb||(Se+=A)}else{if(0<be){g.pb[be]=g.pb[0];continue}Se=A}var fe=g.pb[be];fe.Sc[0]=Lv[ur(Se+$,127)],fe.Sc[1]=kv[ur(Se+0,127)],fe.Eb[0]=2*Lv[ur(Se+P,127)],fe.Eb[1]=101581*kv[ur(Se+X,127)]>>16,8>fe.Eb[1]&&(fe.Eb[1]=8),fe.Qc[0]=Lv[ur(Se+ie,117)],fe.Qc[1]=kv[ur(Se+J,127)],fe.lc=Se+J}if(!G.Rb)return on(g,4,"Not a key frame.");for(de(V),G=g.Pa,A=0;4>A;++A){for($=0;8>$;++$)for(P=0;3>P;++P)for(X=0;11>X;++X)ie=ge(V,o3[A][$][P][X])?j(V,8):r3[A][$][P][X],G.Wc[A][$].Yb[P][X]=ie;for($=0;17>$;++$)G.Xc[A][$]=G.Wc[A][l3[$]]}return g.kc=de(V),g.kc&&(g.Bd=j(V,8)),g.cb=1}function Qn(g,w,A,P,$,V,G){var X=w[$].Yb[A];for(A=0;16>$;++$){if(!ge(g,X[A+0]))return $;for(;!ge(g,X[A+1]);)if(X=w[++$].Yb[0],A=0,$==16)return 16;var J=w[$+1].Yb;if(ge(g,X[A+2])){var ie=g,le=0;if(ge(ie,(Se=X)[(be=A)+3]))if(ge(ie,Se[be+6])){for(X=0,be=2*(le=ge(ie,Se[be+8]))+(Se=ge(ie,Se[be+9+le])),le=0,Se=i3[be];Se[X];++X)le+=le+ge(ie,Se[X]);le+=3+(8<<be)}else ge(ie,Se[be+7])?(le=7+2*ge(ie,165),le+=ge(ie,145)):le=5+ge(ie,159);else le=ge(ie,Se[be+4])?3+ge(ie,Se[be+5]):2;X=J[2]}else le=1,X=J[1];J=G+s3[$],0>(ie=g).b&&oe(ie);var be,Se=ie.b,fe=(be=ie.Ca>>1)-(ie.I>>Se)>>31;--ie.b,ie.Ca+=fe,ie.Ca|=1,ie.I-=(be+1&fe)<<Se,V[J]=((le^fe)-fe)*P[(0<$)+0]}return 16}function Pt(g){var w=g.rb[g.sb-1];w.la=0,w.Na=0,s(g.zc,0,0,g.zc.length),g.ja=0}function It(g,w){if(g==null)return 0;if(w==null)return on(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!Ni(g,w))return 0;if(e(g.cb),w.ac==null||w.ac(w)){w.ob&&(g.L=0);var A=dg[g.L];if(g.L==2?(g.yb=0,g.zb=0):(g.yb=w.v-A>>4,g.zb=w.j-A>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=w.o+15+A>>4,g.Hb=w.va+15+A>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var P=g.ed;for(A=0;4>A;++A){var $;if(g.Qa.Cb){var V=g.Qa.Lb[A];g.Qa.Fb||(V+=P.Tb)}else V=P.Tb;for($=0;1>=$;++$){var G=g.gd[A][$],X=V;if(P.Pc&&(X+=P.vd[0],$&&(X+=P.od[0])),0<(X=0>X?0:63<X?63:X)){var J=X;0<P.wb&&(J=4<P.wb?J>>2:J>>1)>9-P.wb&&(J=9-P.wb),1>J&&(J=1),G.dd=J,G.tc=2*X+J,G.ld=40<=X?2:15<=X?1:0}else G.tc=0;G.La=$}}}A=0}else on(g,6,"Frame setup failed"),A=g.a;if(A=A==0){if(A){g.$c=0,0<g.Aa||(g.Ic=S3);e:{A=g.Ic,P=4*(J=g.za);var ie=32*J,le=J+1,be=0<g.L?J*(0<g.Aa?2:1):0,Se=(g.Aa==2?2:1)*J;if((G=P+832+($=3*(16*A+dg[g.L])/2*ie)+(V=g.Fa!=null&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=G)A=0;else{if(G>g.Vb){if(g.Vb=0,g.Ec=r(G),g.Fc=0,g.Ec==null){A=on(g,1,"no memory during frame initialization.");break e}g.Vb=G}G=g.Ec,X=g.Fc,g.Ac=G,g.Bc=X,X+=P,g.Gd=a(ie,wt),g.Hd=0,g.rb=a(le+1,Rn),g.sb=1,g.wa=be?a(be,xt):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=J),e(!0),g.oc=G,g.pc=X,X+=832,g.ya=a(Se,Pe),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,g.Aa==2&&(g.D.aa+=J),g.R=16*J,g.B=8*J,J=(ie=dg[g.L])*g.R,ie=ie/2*g.B,g.sa=G,g.ta=X+J,g.qa=g.sa,g.ra=g.ta+16*A*g.R+ie,g.Ha=g.qa,g.Ia=g.ra+8*A*g.B+ie,g.$c=0,X+=$,g.mb=V?G:null,g.nb=V?X:null,e(X+V<=g.Fc+g.Vb),Pt(g),s(g.Ac,g.Bc,0,P),A=1}}if(A){if(w.ka=0,w.y=g.sa,w.O=g.ta,w.f=g.qa,w.N=g.ra,w.ea=g.Ha,w.Vd=g.Ia,w.fa=g.R,w.Rc=g.B,w.F=null,w.J=0,!ng){for(A=-255;255>=A;++A)Hi[255+A]=0>A?-A:A;for(A=-1020;1020>=A;++A)ao[1020+A]=-128>A?-128:127<A?127:A;for(A=-112;112>=A;++A)xh[112+A]=-16>A?-16:15<A?15:A;for(A=-255;510>=A;++A)Du[255+A]=0>A?0:255<A?255:A;ng=1}Ru=Os,ro=_n,mh=Vs,Fs=$i,Ir=Yt,wi=dt,Pu=ih,tg=uc,yh=xv,fc=sh,pc=vv,nl=wu,gc=rh,Nu=Kp,mc=qp,il=Ta,vh=no,Rr=yv,Jr[0]=Ea,Jr[1]=ov,Jr[2]=dv,Jr[3]=hv,Jr[4]=zp,Jr[5]=bu,Jr[6]=Wp,Jr[7]=eh,Jr[8]=pv,Jr[9]=fv,sl[0]=$p,sl[1]=cv,sl[2]=to,sl[3]=vu,sl[4]=ms,sl[5]=uv,sl[6]=Hp,oo[0]=Qo,oo[1]=lv,oo[2]=gv,oo[3]=th,oo[4]=cc,oo[5]=mv,oo[6]=nh,A=1}else A=0}A&&(A=function(fe,Ne){for(fe.M=0;fe.M<fe.Va;++fe.M){var Ee,ce=fe.Jc[fe.M&fe.Xb],ue=fe.m,ke=fe;for(Ee=0;Ee<ke.za;++Ee){var Oe=ue,Ie=ke,it=Ie.Ac,qe=Ie.Bc+4*Ee,Et=Ie.zc,Ke=Ie.ya[Ie.aa+Ee];if(Ie.Qa.Bb?Ke.$b=ge(Oe,Ie.Pa.jb[0])?2+ge(Oe,Ie.Pa.jb[2]):ge(Oe,Ie.Pa.jb[1]):Ke.$b=0,Ie.kc&&(Ke.Ad=ge(Oe,Ie.Bd)),Ke.Za=!ge(Oe,145)+0,Ke.Za){var mn=Ke.Ob,En=0;for(Ie=0;4>Ie;++Ie){var dn,nn=Et[0+Ie];for(dn=0;4>dn;++dn){nn=a3[it[qe+dn]][nn];for(var On=Zw[ge(Oe,nn[0])];0<On;)On=Zw[2*On+ge(Oe,nn[On])];nn=-On,it[qe+dn]=nn}i(mn,En,it,qe,4),En+=4,Et[0+Ie]=nn}}else nn=ge(Oe,156)?ge(Oe,128)?1:3:ge(Oe,163)?2:0,Ke.Ob[0]=nn,s(it,qe,nn,4),s(Et,0,nn,4);Ke.Dd=ge(Oe,142)?ge(Oe,114)?ge(Oe,183)?1:3:2:0}if(ke.m.Ka)return on(fe,7,"Premature end-of-partition0 encountered.");for(;fe.ja<fe.za;++fe.ja){if(ke=ce,Oe=(ue=fe).rb[ue.sb-1],it=ue.rb[ue.sb+ue.ja],Ee=ue.ya[ue.aa+ue.ja],qe=ue.kc?Ee.Ad:0)Oe.la=it.la=0,Ee.Za||(Oe.Na=it.Na=0),Ee.Hc=0,Ee.Gc=0,Ee.ia=0;else{var Pn,Ut;if(Oe=it,it=ke,qe=ue.Pa.Xc,Et=ue.ya[ue.aa+ue.ja],Ke=ue.pb[Et.$b],Ie=Et.ad,mn=0,En=ue.rb[ue.sb-1],nn=dn=0,s(Ie,mn,0,384),Et.Za)var Oi=0,qs=qe[3];else{On=r(16);var Mi=Oe.Na+En.Na;if(Mi=bh(it,qe[1],Mi,Ke.Eb,0,On,0),Oe.Na=En.Na=(0<Mi)+0,1<Mi)Ru(On,0,Ie,mn);else{var Ks=On[0]+3>>3;for(On=0;256>On;On+=16)Ie[mn+On]=Ks}Oi=1,qs=qe[0]}var Tn=15&Oe.la,hr=15&En.la;for(On=0;4>On;++On){var fr=1&hr;for(Ks=Ut=0;4>Ks;++Ks)Tn=Tn>>1|(fr=(Mi=bh(it,qs,Mi=fr+(1&Tn),Ke.Sc,Oi,Ie,mn))>Oi)<<7,Ut=Ut<<2|(3<Mi?3:1<Mi?2:Ie[mn+0]!=0),mn+=16;Tn>>=4,hr=hr>>1|fr<<7,dn=(dn<<8|Ut)>>>0}for(qs=Tn,Oi=hr>>4,Pn=0;4>Pn;Pn+=2){for(Ut=0,Tn=Oe.la>>4+Pn,hr=En.la>>4+Pn,On=0;2>On;++On){for(fr=1&hr,Ks=0;2>Ks;++Ks)Mi=fr+(1&Tn),Tn=Tn>>1|(fr=0<(Mi=bh(it,qe[2],Mi,Ke.Qc,0,Ie,mn)))<<3,Ut=Ut<<2|(3<Mi?3:1<Mi?2:Ie[mn+0]!=0),mn+=16;Tn>>=2,hr=hr>>1|fr<<5}nn|=Ut<<4*Pn,qs|=Tn<<4<<Pn,Oi|=(240&hr)<<Pn}Oe.la=qs,En.la=Oi,Et.Hc=dn,Et.Gc=nn,Et.ia=43690&nn?0:Ke.ia,qe=!(dn|nn)}if(0<ue.L&&(ue.wa[ue.Y+ue.ja]=ue.gd[Ee.$b][Ee.Za],ue.wa[ue.Y+ue.ja].La|=!qe),ke.Ka)return on(fe,7,"Premature end-of-file encountered.")}if(Pt(fe),ue=Ne,ke=1,Ee=(ce=fe).D,Oe=0<ce.L&&ce.M>=ce.zb&&ce.M<=ce.Va,ce.Aa==0)e:{if(Ee.M=ce.M,Ee.uc=Oe,dh(ce,Ee),ke=1,Ee=(Ut=ce.D).Nb,Oe=(nn=dg[ce.L])*ce.R,it=nn/2*ce.B,On=16*Ee*ce.R,Ks=8*Ee*ce.B,qe=ce.sa,Et=ce.ta-Oe+On,Ke=ce.qa,Ie=ce.ra-it+Ks,mn=ce.Ha,En=ce.Ia-it+Ks,hr=(Tn=Ut.M)==0,dn=Tn>=ce.Va-1,ce.Aa==2&&dh(ce,Ut),Ut.uc)for(fr=(Mi=ce).D.M,e(Mi.D.uc),Ut=Mi.yb;Ut<Mi.Hb;++Ut){Oi=Ut,qs=fr;var Zi=(us=(fi=Mi).D).Nb;Pn=fi.R;var us=us.wa[us.Y+Oi],js=fi.sa,Or=fi.ta+16*Zi*Pn+16*Oi,La=us.dd,es=us.tc;if(es!=0)if(e(3<=es),fi.L==1)0<Oi&&il(js,Or,Pn,es+4),us.La&&Rr(js,Or,Pn,es),0<qs&&mc(js,Or,Pn,es+4),us.La&&vh(js,Or,Pn,es);else{var lo=fi.B,yc=fi.qa,Ou=fi.ra+8*Zi*lo+8*Oi,al=fi.Ha,fi=fi.Ia+8*Zi*lo+8*Oi;Zi=us.ld,0<Oi&&(tg(js,Or,Pn,es+4,La,Zi),fc(yc,Ou,al,fi,lo,es+4,La,Zi)),us.La&&(nl(js,Or,Pn,es,La,Zi),Nu(yc,Ou,al,fi,lo,es,La,Zi)),0<qs&&(Pu(js,Or,Pn,es+4,La,Zi),yh(yc,Ou,al,fi,lo,es+4,La,Zi)),us.La&&(pc(js,Or,Pn,es,La,Zi),gc(yc,Ou,al,fi,lo,es,La,Zi))}}if(ce.ia&&alert("todo:DitherRow"),ue.put!=null){if(Ut=16*Tn,Tn=16*(Tn+1),hr?(ue.y=ce.sa,ue.O=ce.ta+On,ue.f=ce.qa,ue.N=ce.ra+Ks,ue.ea=ce.Ha,ue.W=ce.Ia+Ks):(Ut-=nn,ue.y=qe,ue.O=Et,ue.f=Ke,ue.N=Ie,ue.ea=mn,ue.W=En),dn||(Tn-=nn),Tn>ue.o&&(Tn=ue.o),ue.F=null,ue.J=null,ce.Fa!=null&&0<ce.Fa.length&&Ut<Tn&&(ue.J=ch(ce,ue,Ut,Tn-Ut),ue.F=ce.mb,ue.F==null&&ue.F.length==0)){ke=on(ce,3,"Could not decode alpha data.");break e}Ut<ue.j&&(nn=ue.j-Ut,Ut=ue.j,e(!(1&nn)),ue.O+=ce.R*nn,ue.N+=ce.B*(nn>>1),ue.W+=ce.B*(nn>>1),ue.F!=null&&(ue.J+=ue.width*nn)),Ut<Tn&&(ue.O+=ue.v,ue.N+=ue.v>>1,ue.W+=ue.v>>1,ue.F!=null&&(ue.J+=ue.v),ue.ka=Ut-ue.j,ue.U=ue.va-ue.v,ue.T=Tn-Ut,ke=ue.put(ue))}Ee+1!=ce.Ic||dn||(i(ce.sa,ce.ta-Oe,qe,Et+16*ce.R,Oe),i(ce.qa,ce.ra-it,Ke,Ie+8*ce.B,it),i(ce.Ha,ce.Ia-it,mn,En+8*ce.B,it))}if(!ke)return on(fe,6,"Output aborted.")}return 1}(g,w)),w.bc!=null&&w.bc(w),A&=1}return A?(g.cb=0,A):0}function Si(g,w,A,P,$){$=g[w+A+32*P]+($>>3),g[w+A+32*P]=-256&$?0>$?0:255:$}function pe(g,w,A,P,$,V){Si(g,w,0,A,P+$),Si(g,w,1,A,P+V),Si(g,w,2,A,P-V),Si(g,w,3,A,P-$)}function we(g){return(20091*g>>16)+g}function ct(g,w,A,P){var $,V=0,G=r(16);for($=0;4>$;++$){var X=g[w+0]+g[w+8],J=g[w+0]-g[w+8],ie=(35468*g[w+4]>>16)-we(g[w+12]),le=we(g[w+4])+(35468*g[w+12]>>16);G[V+0]=X+le,G[V+1]=J+ie,G[V+2]=J-ie,G[V+3]=X-le,V+=4,w++}for($=V=0;4>$;++$)X=(g=G[V+0]+4)+G[V+8],J=g-G[V+8],ie=(35468*G[V+4]>>16)-we(G[V+12]),Si(A,P,0,0,X+(le=we(G[V+4])+(35468*G[V+12]>>16))),Si(A,P,1,0,J+ie),Si(A,P,2,0,J-ie),Si(A,P,3,0,X-le),V++,P+=32}function dt(g,w,A,P){var $=g[w+0]+4,V=35468*g[w+4]>>16,G=we(g[w+4]),X=35468*g[w+1]>>16;pe(A,P,0,$+G,g=we(g[w+1]),X),pe(A,P,1,$+V,g,X),pe(A,P,2,$-V,g,X),pe(A,P,3,$-G,g,X)}function _n(g,w,A,P,$){ct(g,w,A,P),$&&ct(g,w+16,A,P+4)}function Vs(g,w,A,P){ro(g,w+0,A,P,1),ro(g,w+32,A,P+128,1)}function $i(g,w,A,P){var $;for(g=g[w+0]+4,$=0;4>$;++$)for(w=0;4>w;++w)Si(A,P,w,$,g)}function Yt(g,w,A,P){g[w+0]&&Fs(g,w+0,A,P),g[w+16]&&Fs(g,w+16,A,P+4),g[w+32]&&Fs(g,w+32,A,P+128),g[w+48]&&Fs(g,w+48,A,P+128+4)}function Os(g,w,A,P){var $,V=r(16);for($=0;4>$;++$){var G=g[w+0+$]+g[w+12+$],X=g[w+4+$]+g[w+8+$],J=g[w+4+$]-g[w+8+$],ie=g[w+0+$]-g[w+12+$];V[0+$]=G+X,V[8+$]=G-X,V[4+$]=ie+J,V[12+$]=ie-J}for($=0;4>$;++$)G=(g=V[0+4*$]+3)+V[3+4*$],X=V[1+4*$]+V[2+4*$],J=V[1+4*$]-V[2+4*$],ie=g-V[3+4*$],A[P+0]=G+X>>3,A[P+16]=ie+J>>3,A[P+32]=G-X>>3,A[P+48]=ie-J>>3,P+=64}function eo(g,w,A){var P,$=w-32,V=dr,G=255-g[$-1];for(P=0;P<A;++P){var X,J=V,ie=G+g[w-1];for(X=0;X<A;++X)g[w+X]=J[ie+g[$+X]];w+=32}}function ov(g,w){eo(g,w,4)}function lv(g,w){eo(g,w,8)}function cv(g,w){eo(g,w,16)}function to(g,w){var A;for(A=0;16>A;++A)i(g,w+32*A,g,w-32,16)}function vu(g,w){var A;for(A=16;0<A;--A)s(g,w,g[w-1],16),w+=32}function xu(g,w,A){var P;for(P=0;16>P;++P)s(w,A+32*P,g,16)}function $p(g,w){var A,P=16;for(A=0;16>A;++A)P+=g[w-1+32*A]+g[w+A-32];xu(P>>5,g,w)}function ms(g,w){var A,P=8;for(A=0;16>A;++A)P+=g[w-1+32*A];xu(P>>4,g,w)}function uv(g,w){var A,P=8;for(A=0;16>A;++A)P+=g[w+A-32];xu(P>>4,g,w)}function Hp(g,w){xu(128,g,w)}function Rt(g,w,A){return g+2*w+A+2>>2}function dv(g,w){var A,P=w-32;for(P=new Uint8Array([Rt(g[P-1],g[P+0],g[P+1]),Rt(g[P+0],g[P+1],g[P+2]),Rt(g[P+1],g[P+2],g[P+3]),Rt(g[P+2],g[P+3],g[P+4])]),A=0;4>A;++A)i(g,w+32*A,P,0,P.length)}function hv(g,w){var A=g[w-1],P=g[w-1+32],$=g[w-1+64],V=g[w-1+96];De(g,w+0,16843009*Rt(g[w-1-32],A,P)),De(g,w+32,16843009*Rt(A,P,$)),De(g,w+64,16843009*Rt(P,$,V)),De(g,w+96,16843009*Rt($,V,V))}function Ea(g,w){var A,P=4;for(A=0;4>A;++A)P+=g[w+A-32]+g[w-1+32*A];for(P>>=3,A=0;4>A;++A)s(g,w+32*A,P,4)}function zp(g,w){var A=g[w-1+0],P=g[w-1+32],$=g[w-1+64],V=g[w-1-32],G=g[w+0-32],X=g[w+1-32],J=g[w+2-32],ie=g[w+3-32];g[w+0+96]=Rt(P,$,g[w-1+96]),g[w+1+96]=g[w+0+64]=Rt(A,P,$),g[w+2+96]=g[w+1+64]=g[w+0+32]=Rt(V,A,P),g[w+3+96]=g[w+2+64]=g[w+1+32]=g[w+0+0]=Rt(G,V,A),g[w+3+64]=g[w+2+32]=g[w+1+0]=Rt(X,G,V),g[w+3+32]=g[w+2+0]=Rt(J,X,G),g[w+3+0]=Rt(ie,J,X)}function Wp(g,w){var A=g[w+1-32],P=g[w+2-32],$=g[w+3-32],V=g[w+4-32],G=g[w+5-32],X=g[w+6-32],J=g[w+7-32];g[w+0+0]=Rt(g[w+0-32],A,P),g[w+1+0]=g[w+0+32]=Rt(A,P,$),g[w+2+0]=g[w+1+32]=g[w+0+64]=Rt(P,$,V),g[w+3+0]=g[w+2+32]=g[w+1+64]=g[w+0+96]=Rt($,V,G),g[w+3+32]=g[w+2+64]=g[w+1+96]=Rt(V,G,X),g[w+3+64]=g[w+2+96]=Rt(G,X,J),g[w+3+96]=Rt(X,J,J)}function bu(g,w){var A=g[w-1+0],P=g[w-1+32],$=g[w-1+64],V=g[w-1-32],G=g[w+0-32],X=g[w+1-32],J=g[w+2-32],ie=g[w+3-32];g[w+0+0]=g[w+1+64]=V+G+1>>1,g[w+1+0]=g[w+2+64]=G+X+1>>1,g[w+2+0]=g[w+3+64]=X+J+1>>1,g[w+3+0]=J+ie+1>>1,g[w+0+96]=Rt($,P,A),g[w+0+64]=Rt(P,A,V),g[w+0+32]=g[w+1+96]=Rt(A,V,G),g[w+1+32]=g[w+2+96]=Rt(V,G,X),g[w+2+32]=g[w+3+96]=Rt(G,X,J),g[w+3+32]=Rt(X,J,ie)}function eh(g,w){var A=g[w+0-32],P=g[w+1-32],$=g[w+2-32],V=g[w+3-32],G=g[w+4-32],X=g[w+5-32],J=g[w+6-32],ie=g[w+7-32];g[w+0+0]=A+P+1>>1,g[w+1+0]=g[w+0+64]=P+$+1>>1,g[w+2+0]=g[w+1+64]=$+V+1>>1,g[w+3+0]=g[w+2+64]=V+G+1>>1,g[w+0+32]=Rt(A,P,$),g[w+1+32]=g[w+0+96]=Rt(P,$,V),g[w+2+32]=g[w+1+96]=Rt($,V,G),g[w+3+32]=g[w+2+96]=Rt(V,G,X),g[w+3+64]=Rt(G,X,J),g[w+3+96]=Rt(X,J,ie)}function fv(g,w){var A=g[w-1+0],P=g[w-1+32],$=g[w-1+64],V=g[w-1+96];g[w+0+0]=A+P+1>>1,g[w+2+0]=g[w+0+32]=P+$+1>>1,g[w+2+32]=g[w+0+64]=$+V+1>>1,g[w+1+0]=Rt(A,P,$),g[w+3+0]=g[w+1+32]=Rt(P,$,V),g[w+3+32]=g[w+1+64]=Rt($,V,V),g[w+3+64]=g[w+2+64]=g[w+0+96]=g[w+1+96]=g[w+2+96]=g[w+3+96]=V}function pv(g,w){var A=g[w-1+0],P=g[w-1+32],$=g[w-1+64],V=g[w-1+96],G=g[w-1-32],X=g[w+0-32],J=g[w+1-32],ie=g[w+2-32];g[w+0+0]=g[w+2+32]=A+G+1>>1,g[w+0+32]=g[w+2+64]=P+A+1>>1,g[w+0+64]=g[w+2+96]=$+P+1>>1,g[w+0+96]=V+$+1>>1,g[w+3+0]=Rt(X,J,ie),g[w+2+0]=Rt(G,X,J),g[w+1+0]=g[w+3+32]=Rt(A,G,X),g[w+1+32]=g[w+3+64]=Rt(P,A,G),g[w+1+64]=g[w+3+96]=Rt($,P,A),g[w+1+96]=Rt(V,$,P)}function gv(g,w){var A;for(A=0;8>A;++A)i(g,w+32*A,g,w-32,8)}function th(g,w){var A;for(A=0;8>A;++A)s(g,w,g[w-1],8),w+=32}function lc(g,w,A){var P;for(P=0;8>P;++P)s(w,A+32*P,g,8)}function Qo(g,w){var A,P=8;for(A=0;8>A;++A)P+=g[w+A-32]+g[w-1+32*A];lc(P>>4,g,w)}function mv(g,w){var A,P=4;for(A=0;8>A;++A)P+=g[w+A-32];lc(P>>3,g,w)}function cc(g,w){var A,P=4;for(A=0;8>A;++A)P+=g[w-1+32*A];lc(P>>3,g,w)}function nh(g,w){lc(128,g,w)}function Su(g,w,A){var P=g[w-A],$=g[w+0],V=3*($-P)+wv[1020+g[w-2*A]-g[w+A]],G=ig[112+(V+4>>3)];g[w-A]=dr[255+P+ig[112+(V+3>>3)]],g[w+0]=dr[255+$-G]}function Vp(g,w,A,P){var $=g[w+0],V=g[w+A];return Nr[255+g[w-2*A]-g[w-A]]>P||Nr[255+V-$]>P}function Gp(g,w,A,P){return 4*Nr[255+g[w-A]-g[w+0]]+Nr[255+g[w-2*A]-g[w+A]]<=P}function Yp(g,w,A,P,$){var V=g[w-3*A],G=g[w-2*A],X=g[w-A],J=g[w+0],ie=g[w+A],le=g[w+2*A],be=g[w+3*A];return 4*Nr[255+X-J]+Nr[255+G-ie]>P?0:Nr[255+g[w-4*A]-V]<=$&&Nr[255+V-G]<=$&&Nr[255+G-X]<=$&&Nr[255+be-le]<=$&&Nr[255+le-ie]<=$&&Nr[255+ie-J]<=$}function qp(g,w,A,P){var $=2*P+1;for(P=0;16>P;++P)Gp(g,w+P,A,$)&&Su(g,w+P,A)}function Ta(g,w,A,P){var $=2*P+1;for(P=0;16>P;++P)Gp(g,w+P*A,1,$)&&Su(g,w+P*A,1)}function no(g,w,A,P){var $;for($=3;0<$;--$)qp(g,w+=4*A,A,P)}function yv(g,w,A,P){var $;for($=3;0<$;--$)Ta(g,w+=4,A,P)}function Jo(g,w,A,P,$,V,G,X){for(V=2*V+1;0<$--;){if(Yp(g,w,A,V,G))if(Vp(g,w,A,X))Su(g,w,A);else{var J=g,ie=w,le=A,be=J[ie-2*le],Se=J[ie-le],fe=J[ie+0],Ne=J[ie+le],Ee=J[ie+2*le],ce=27*(ke=wv[1020+3*(fe-Se)+wv[1020+be-Ne]])+63>>7,ue=18*ke+63>>7,ke=9*ke+63>>7;J[ie-3*le]=dr[255+J[ie-3*le]+ke],J[ie-2*le]=dr[255+be+ue],J[ie-le]=dr[255+Se+ce],J[ie+0]=dr[255+fe-ce],J[ie+le]=dr[255+Ne-ue],J[ie+2*le]=dr[255+Ee-ke]}w+=P}}function Xr(g,w,A,P,$,V,G,X){for(V=2*V+1;0<$--;){if(Yp(g,w,A,V,G))if(Vp(g,w,A,X))Su(g,w,A);else{var J=g,ie=w,le=A,be=J[ie-le],Se=J[ie+0],fe=J[ie+le],Ne=ig[112+((Ee=3*(Se-be))+4>>3)],Ee=ig[112+(Ee+3>>3)],ce=Ne+1>>1;J[ie-2*le]=dr[255+J[ie-2*le]+ce],J[ie-le]=dr[255+be+Ee],J[ie+0]=dr[255+Se-Ne],J[ie+le]=dr[255+fe-ce]}w+=P}}function ih(g,w,A,P,$,V){Jo(g,w,A,1,16,P,$,V)}function uc(g,w,A,P,$,V){Jo(g,w,1,A,16,P,$,V)}function vv(g,w,A,P,$,V){var G;for(G=3;0<G;--G)Xr(g,w+=4*A,A,1,16,P,$,V)}function wu(g,w,A,P,$,V){var G;for(G=3;0<G;--G)Xr(g,w+=4,1,A,16,P,$,V)}function xv(g,w,A,P,$,V,G,X){Jo(g,w,$,1,8,V,G,X),Jo(A,P,$,1,8,V,G,X)}function sh(g,w,A,P,$,V,G,X){Jo(g,w,1,$,8,V,G,X),Jo(A,P,1,$,8,V,G,X)}function rh(g,w,A,P,$,V,G,X){Xr(g,w+4*$,$,1,8,V,G,X),Xr(A,P+4*$,$,1,8,V,G,X)}function Kp(g,w,A,P,$,V,G,X){Xr(g,w+4,1,$,8,V,G,X),Xr(A,P+4,1,$,8,V,G,X)}function _u(){this.ba=new as,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ah(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function oh(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xp(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new R}function bv(){this.xb=this.a=0,this.l=new Bt,this.ca=new as,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new N,this.Pb=0,this.wd=new N,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xp,this.ab=0,this.gc=a(4,oh),this.Oc=0}function Eu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Bt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function dc(g,w,A,P,$,V,G){for(g=g==null?0:g[w+0],w=0;w<G;++w)$[V+w]=g+A[P+w]&255,g=$[V+w]}function lh(g,w,A,P,$,V,G){var X;if(g==null)dc(null,null,A,P,$,V,G);else for(X=0;X<G;++X)$[V+X]=g[w+X]+A[P+X]&255}function Zo(g,w,A,P,$,V,G){if(g==null)dc(null,null,A,P,$,V,G);else{var X,J=g[w+0],ie=J,le=J;for(X=0;X<G;++X)ie=le+(J=g[w+X])-ie,le=A[P+X]+(-256&ie?0>ie?0:255:ie)&255,ie=J,$[V+X]=le}}function ch(g,w,A,P){var $=w.width,V=w.o;if(e(g!=null&&w!=null),0>A||0>=P||A+P>V)return null;if(!g.Cc){if(g.ga==null){var G;if(g.ga=new Eu,(G=g.ga==null)||(G=w.width*w.o,e(g.Gb.length==0),g.Gb=r(G),g.Uc=0,g.Gb==null?G=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,G=1),G=!G),!G){G=g.ga;var X=g.Fa,J=g.P,ie=g.qc,le=g.mb,be=g.nb,Se=J+1,fe=ie-1,Ne=G.l;if(e(X!=null&&le!=null&&w!=null),rl[0]=null,rl[1]=dc,rl[2]=lh,rl[3]=Zo,G.ca=le,G.tb=be,G.c=w.width,G.i=w.height,e(0<G.c&&0<G.i),1>=ie)w=0;else if(G.$a=X[J+0]>>0&3,G.Z=X[J+0]>>2&3,G.Lc=X[J+0]>>4&3,J=X[J+0]>>6&3,0>G.$a||1<G.$a||4<=G.Z||1<G.Lc||J)w=0;else if(Ne.put=vi,Ne.ac=Dn,Ne.bc=Ii,Ne.ma=G,Ne.width=w.width,Ne.height=w.height,Ne.Da=w.Da,Ne.v=w.v,Ne.va=w.va,Ne.j=w.j,Ne.o=w.o,G.$a)e:{e(G.$a==1),w=bi();t:for(;;){if(w==null){w=0;break e}if(e(G!=null),G.mc=w,w.c=G.c,w.i=G.i,w.l=G.l,w.l.ma=G,w.l.width=G.c,w.l.height=G.i,w.a=0,B(w.m,X,Se,fe),!Ds(G.c,G.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&gs(w.s)?(G.ic=1,X=w.c*w.i,w.Ta=null,w.Ua=0,w.V=r(X),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(G.ic=0,w=Bi(w,G.c)),!w))break t;w=1;break e}G.mc=null,w=0}else w=fe>=G.c*G.i;G=!w}if(G)return null;g.ga.Lc!=1?g.Ga=0:P=V-A}e(g.ga!=null),e(A+P<=V);e:{if(w=(X=g.ga).c,V=X.l.o,X.$a==0){if(Se=g.rc,fe=g.Vc,Ne=g.Fa,J=g.P+1+A*w,ie=g.mb,le=g.nb+A*w,e(J<=g.P+g.qc),X.Z!=0)for(e(rl[X.Z]!=null),G=0;G<P;++G)rl[X.Z](Se,fe,Ne,J,ie,le,w),Se=ie,fe=le,le+=w,J+=w;else for(G=0;G<P;++G)i(ie,le,Ne,J,w),Se=ie,fe=le,le+=w,J+=w;g.rc=Se,g.Vc=fe}else{if(e(X.mc!=null),w=A+P,e((G=X.mc)!=null),e(w<=G.i),G.C>=w)w=1;else if(X.ic||me(),X.ic){X=G.V,Se=G.Ba,fe=G.c;var Ee=G.i,ce=(Ne=1,J=G.$/fe,ie=G.$%fe,le=G.m,be=G.s,G.$),ue=fe*Ee,ke=fe*w,Oe=be.wc,Ie=ce<ke?jn(be,ie,J):null;e(ce<=ue),e(w<=Ee),e(gs(be));t:for(;;){for(;!le.h&&ce<ke;){if(ie&Oe||(Ie=jn(be,ie,J)),e(Ie!=null),te(le),256>(Ee=di(Ie.G[0],Ie.H[0],le)))X[Se+ce]=Ee,++ce,++ie>=fe&&(ie=0,++J<=w&&!(J%16)&&Ri(G,J));else{if(!(280>Ee)){Ne=0;break t}Ee=ji(Ee-256,le);var it,qe=di(Ie.G[4],Ie.H[4],le);if(te(le),!(ce>=(qe=Qi(fe,qe=ji(qe,le)))&&ue-ce>=Ee)){Ne=0;break t}for(it=0;it<Ee;++it)X[Se+ce+it]=X[Se+ce+it-qe];for(ce+=Ee,ie+=Ee;ie>=fe;)ie-=fe,++J<=w&&!(J%16)&&Ri(G,J);ce<ke&&ie&Oe&&(Ie=jn(be,ie,J))}e(le.h==K(le))}Ri(G,J>w?w:J);break t}!Ne||le.h&&ce<ue?(Ne=0,G.a=le.h?5:3):G.$=ce,w=Ne}else w=xi(G,G.V,G.Ba,G.c,G.i,w,Ui);if(!w){P=0;break e}}A+P>=V&&(g.Cc=1),P=1}if(!P)return null;if(g.Cc&&((P=g.ga)!=null&&(P.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+A*$}function E(g,w,A,P,$,V){for(;0<$--;){var G,X=g,J=w+(A?1:0),ie=g,le=w+(A?0:3);for(G=0;G<P;++G){var be=ie[le+4*G];be!=255&&(be*=32897,X[J+4*G+0]=X[J+4*G+0]*be>>23,X[J+4*G+1]=X[J+4*G+1]*be>>23,X[J+4*G+2]=X[J+4*G+2]*be>>23)}w+=V}}function H(g,w,A,P,$){for(;0<P--;){var V;for(V=0;V<A;++V){var G=g[w+2*V+0],X=15&(ie=g[w+2*V+1]),J=4369*X,ie=(240&ie|ie>>4)*J>>16;g[w+2*V+0]=(240&G|G>>4)*J>>16&240|(15&G|G<<4)*J>>16>>4&15,g[w+2*V+1]=240&ie|X}w+=$}}function se(g,w,A,P,$,V,G,X){var J,ie,le=255;for(ie=0;ie<$;++ie){for(J=0;J<P;++J){var be=g[w+J];V[G+4*J]=be,le&=be}w+=A,G+=X}return le!=255}function ae(g,w,A,P,$){var V;for(V=0;V<$;++V)A[P+V]=g[w+V]>>8}function me(){Pr=E,Bn=H,Un=se,_i=ae}function Ae(g,w,A){k[g]=function(P,$,V,G,X,J,ie,le,be,Se,fe,Ne,Ee,ce,ue,ke,Oe){var Ie,it=Oe-1>>1,qe=X[J+0]|ie[le+0]<<16,Et=be[Se+0]|fe[Ne+0]<<16;e(P!=null);var Ke=3*qe+Et+131074>>2;for(w(P[$+0],255&Ke,Ke>>16,Ee,ce),V!=null&&(Ke=3*Et+qe+131074>>2,w(V[G+0],255&Ke,Ke>>16,ue,ke)),Ie=1;Ie<=it;++Ie){var mn=X[J+Ie]|ie[le+Ie]<<16,En=be[Se+Ie]|fe[Ne+Ie]<<16,dn=qe+mn+Et+En+524296,nn=dn+2*(mn+Et)>>3;Ke=nn+qe>>1,qe=(dn=dn+2*(qe+En)>>3)+mn>>1,w(P[$+2*Ie-1],255&Ke,Ke>>16,Ee,ce+(2*Ie-1)*A),w(P[$+2*Ie-0],255&qe,qe>>16,Ee,ce+(2*Ie-0)*A),V!=null&&(Ke=dn+Et>>1,qe=nn+En>>1,w(V[G+2*Ie-1],255&Ke,Ke>>16,ue,ke+(2*Ie-1)*A),w(V[G+2*Ie+0],255&qe,qe>>16,ue,ke+(2*Ie+0)*A)),qe=mn,Et=En}1&Oe||(Ke=3*qe+Et+131074>>2,w(P[$+Oe-1],255&Ke,Ke>>16,Ee,ce+(Oe-1)*A),V!=null&&(Ke=3*Et+qe+131074>>2,w(V[G+Oe-1],255&Ke,Ke>>16,ue,ke+(Oe-1)*A)))}}function je(){Dr[sg]=u3,Dr[rg]=t5,Dr[Xw]=d3,Dr[ag]=n5,Dr[og]=i5,Dr[_v]=s5,Dr[Qw]=h3,Dr[Ev]=t5,Dr[Tv]=n5,Dr[lg]=i5,Dr[Av]=s5}function tt(g){return g&-16384?0>g?0:255:g>>f3}function mt(g,w){return tt((19077*g>>8)+(26149*w>>8)-14234)}function Mt(g,w,A){return tt((19077*g>>8)-(6419*w>>8)-(13320*A>>8)+8708)}function Nt(g,w){return tt((19077*g>>8)+(33050*w>>8)-17685)}function ln(g,w,A,P,$){P[$+0]=mt(g,A),P[$+1]=Mt(g,w,A),P[$+2]=Nt(g,w)}function ri(g,w,A,P,$){P[$+0]=Nt(g,w),P[$+1]=Mt(g,w,A),P[$+2]=mt(g,A)}function hi(g,w,A,P,$){var V=Mt(g,w,A);w=V<<3&224|Nt(g,w)>>3,P[$+0]=248&mt(g,A)|V>>5,P[$+1]=w}function Di(g,w,A,P,$){var V=240&Nt(g,w)|15;P[$+0]=240&mt(g,A)|Mt(g,w,A)>>4,P[$+1]=V}function ys(g,w,A,P,$){P[$+0]=255,ln(g,w,A,P,$+1)}function Ji(g,w,A,P,$){ri(g,w,A,P,$),P[$+3]=255}function Qr(g,w,A,P,$){ln(g,w,A,P,$),P[$+3]=255}function ur(g,w){return 0>g?0:g>w?w:g}function Aa(g,w,A){k[g]=function(P,$,V,G,X,J,ie,le,be){for(var Se=le+(-2&be)*A;le!=Se;)w(P[$+0],V[G+0],X[J+0],ie,le),w(P[$+1],V[G+0],X[J+0],ie,le+A),$+=2,++G,++J,le+=2*A;1&be&&w(P[$+0],V[G+0],X[J+0],ie,le)}}function Qp(g,w,A){return A==0?g==0?w==0?6:5:w==0?4:0:A}function uh(g,w,A,P,$){switch(g>>>30){case 3:ro(w,A,P,$,0);break;case 2:wi(w,A,P,$);break;case 1:Fs(w,A,P,$)}}function dh(g,w){var A,P,$=w.M,V=w.Nb,G=g.oc,X=g.pc+40,J=g.oc,ie=g.pc+584,le=g.oc,be=g.pc+600;for(A=0;16>A;++A)G[X+32*A-1]=129;for(A=0;8>A;++A)J[ie+32*A-1]=129,le[be+32*A-1]=129;for(0<$?G[X-1-32]=J[ie-1-32]=le[be-1-32]=129:(s(G,X-32-1,127,21),s(J,ie-32-1,127,9),s(le,be-32-1,127,9)),P=0;P<g.za;++P){var Se=w.ya[w.aa+P];if(0<P){for(A=-1;16>A;++A)i(G,X+32*A-4,G,X+32*A+12,4);for(A=-1;8>A;++A)i(J,ie+32*A-4,J,ie+32*A+4,4),i(le,be+32*A-4,le,be+32*A+4,4)}var fe=g.Gd,Ne=g.Hd+P,Ee=Se.ad,ce=Se.Hc;if(0<$&&(i(G,X-32,fe[Ne].y,0,16),i(J,ie-32,fe[Ne].f,0,8),i(le,be-32,fe[Ne].ea,0,8)),Se.Za){var ue=G,ke=X-32+16;for(0<$&&(P>=g.za-1?s(ue,ke,fe[Ne].y[15],4):i(ue,ke,fe[Ne+1].y,0,4)),A=0;4>A;A++)ue[ke+128+A]=ue[ke+256+A]=ue[ke+384+A]=ue[ke+0+A];for(A=0;16>A;++A,ce<<=2)ue=G,ke=X+a5[A],Jr[Se.Ob[A]](ue,ke),uh(ce,Ee,16*+A,ue,ke)}else if(ue=Qp(P,$,Se.Ob[0]),sl[ue](G,X),ce!=0)for(A=0;16>A;++A,ce<<=2)uh(ce,Ee,16*+A,G,X+a5[A]);for(A=Se.Gc,ue=Qp(P,$,Se.Dd),oo[ue](J,ie),oo[ue](le,be),ce=Ee,ue=J,ke=ie,255&(Se=A>>0)&&(170&Se?mh(ce,256,ue,ke):Ir(ce,256,ue,ke)),Se=le,ce=be,255&(A>>=8)&&(170&A?mh(Ee,320,Se,ce):Ir(Ee,320,Se,ce)),$<g.Ub-1&&(i(fe[Ne].y,0,G,X+480,16),i(fe[Ne].f,0,J,ie+224,8),i(fe[Ne].ea,0,le,be+224,8)),A=8*V*g.B,fe=g.sa,Ne=g.ta+16*P+16*V*g.R,Ee=g.qa,Se=g.ra+8*P+A,ce=g.Ha,ue=g.Ia+8*P+A,A=0;16>A;++A)i(fe,Ne+A*g.R,G,X+32*A,16);for(A=0;8>A;++A)i(Ee,Se+A*g.B,J,ie+32*A,8),i(ce,ue+A*g.B,le,be+32*A,8)}}function Tu(g,w,A,P,$,V,G,X,J){var ie=[0],le=[0],be=0,Se=J!=null?J.kd:0,fe=J??new ah;if(g==null||12>A)return 7;fe.data=g,fe.w=w,fe.ha=A,w=[w],A=[A],fe.gb=[fe.gb];e:{var Ne=w,Ee=A,ce=fe.gb;if(e(g!=null),e(Ee!=null),e(ce!=null),ce[0]=0,12<=Ee[0]&&!t(g,Ne[0],"RIFF")){if(t(g,Ne[0]+8,"WEBP")){ce=3;break e}var ue=Be(g,Ne[0]+4);if(12>ue||4294967286<ue){ce=3;break e}if(Se&&ue>Ee[0]-8){ce=7;break e}ce[0]=ue,Ne[0]+=12,Ee[0]-=12}ce=0}if(ce!=0)return ce;for(ue=0<fe.gb[0],A=A[0];;){e:{var ke=g;Ee=w,ce=A;var Oe=ie,Ie=le,it=Ne=[0];if((Ke=be=[be])[0]=0,8>ce[0])ce=7;else{if(!t(ke,Ee[0],"VP8X")){if(Be(ke,Ee[0]+4)!=10){ce=3;break e}if(18>ce[0]){ce=7;break e}var qe=Be(ke,Ee[0]+8),Et=1+Ce(ke,Ee[0]+12);if(2147483648<=Et*(ke=1+Ce(ke,Ee[0]+15))){ce=3;break e}it!=null&&(it[0]=qe),Oe!=null&&(Oe[0]=Et),Ie!=null&&(Ie[0]=ke),Ee[0]+=18,ce[0]-=18,Ke[0]=1}ce=0}}if(be=be[0],Ne=Ne[0],ce!=0)return ce;if(Ee=!!(2&Ne),!ue&&be)return 3;if(V!=null&&(V[0]=!!(16&Ne)),G!=null&&(G[0]=Ee),X!=null&&(X[0]=0),G=ie[0],Ne=le[0],be&&Ee&&J==null){ce=0;break}if(4>A){ce=7;break}if(ue&&be||!ue&&!be&&!t(g,w[0],"ALPH")){A=[A],fe.na=[fe.na],fe.P=[fe.P],fe.Sa=[fe.Sa];e:{qe=g,ce=w,ue=A;var Ke=fe.gb;Oe=fe.na,Ie=fe.P,it=fe.Sa,Et=22,e(qe!=null),e(ue!=null),ke=ce[0];var mn=ue[0];for(e(Oe!=null),e(it!=null),Oe[0]=null,Ie[0]=null,it[0]=0;;){if(ce[0]=ke,ue[0]=mn,8>mn){ce=7;break e}var En=Be(qe,ke+4);if(4294967286<En){ce=3;break e}var dn=8+En+1&-2;if(Et+=dn,0<Ke&&Et>Ke){ce=3;break e}if(!t(qe,ke,"VP8 ")||!t(qe,ke,"VP8L")){ce=0;break e}if(mn[0]<dn){ce=7;break e}t(qe,ke,"ALPH")||(Oe[0]=qe,Ie[0]=ke+8,it[0]=En),ke+=dn,mn-=dn}}if(A=A[0],fe.na=fe.na[0],fe.P=fe.P[0],fe.Sa=fe.Sa[0],ce!=0)break}A=[A],fe.Ja=[fe.Ja],fe.xa=[fe.xa];e:if(Ke=g,ce=w,ue=A,Oe=fe.gb[0],Ie=fe.Ja,it=fe.xa,qe=ce[0],ke=!t(Ke,qe,"VP8 "),Et=!t(Ke,qe,"VP8L"),e(Ke!=null),e(ue!=null),e(Ie!=null),e(it!=null),8>ue[0])ce=7;else{if(ke||Et){if(Ke=Be(Ke,qe+4),12<=Oe&&Ke>Oe-12){ce=3;break e}if(Se&&Ke>ue[0]-8){ce=7;break e}Ie[0]=Ke,ce[0]+=8,ue[0]-=8,it[0]=Et}else it[0]=5<=ue[0]&&Ke[qe+0]==47&&!(Ke[qe+4]>>5),Ie[0]=ue[0];ce=0}if(A=A[0],fe.Ja=fe.Ja[0],fe.xa=fe.xa[0],w=w[0],ce!=0)break;if(4294967286<fe.Ja)return 3;if(X==null||Ee||(X[0]=fe.xa?2:1),G=[G],Ne=[Ne],fe.xa){if(5>A){ce=7;break}X=G,Se=Ne,Ee=V,g==null||5>A?g=0:5<=A&&g[w+0]==47&&!(g[w+4]>>5)?(ue=[0],Ke=[0],Oe=[0],B(Ie=new N,g,w,A),ft(Ie,ue,Ke,Oe)?(X!=null&&(X[0]=ue[0]),Se!=null&&(Se[0]=Ke[0]),Ee!=null&&(Ee[0]=Oe[0]),g=1):g=0):g=0}else{if(10>A){ce=7;break}X=Ne,g==null||10>A||!ls(g,w+3,A-3)?g=0:(Se=g[w+0]|g[w+1]<<8|g[w+2]<<16,Ee=16383&(g[w+7]<<8|g[w+6]),g=16383&(g[w+9]<<8|g[w+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=fe.Ja||!Ee||!g?g=0:(G&&(G[0]=Ee),X&&(X[0]=g),g=1))}if(!g||(G=G[0],Ne=Ne[0],be&&(ie[0]!=G||le[0]!=Ne)))return 3;J!=null&&(J[0]=fe,J.offset=w-J.w,e(4294967286>w-J.w),e(J.offset==J.ha-A));break}return ce==0||ce==7&&be&&J==null?(V!=null&&(V[0]|=fe.na!=null&&0<fe.na.length),P!=null&&(P[0]=G),$!=null&&($[0]=Ne),0):ce}function hh(g,w,A){var P=w.width,$=w.height,V=0,G=0,X=P,J=$;if(w.Da=g!=null&&0<g.Da,w.Da&&(X=g.cd,J=g.bd,V=g.v,G=g.j,11>A||(V&=-2,G&=-2),0>V||0>G||0>=X||0>=J||V+X>P||G+J>$))return 0;if(w.v=V,w.j=G,w.va=V+X,w.o=G+J,w.U=X,w.T=J,w.da=g!=null&&0<g.da,w.da){if(!Qe(X,J,A=[g.ib],V=[g.hb]))return 0;w.ib=A[0],w.hb=V[0]}return w.ob=g!=null&&g.ob,w.Kb=g==null||!g.Sd,w.da&&(w.ob=w.ib<3*P/4&&w.hb<3*$/4,w.Kb=0),1}function fh(g){if(g==null)return 2;if(11>g.S){var w=g.f.RGBA;w.fb+=(g.height-1)*w.A,w.A=-w.A}else w=g.f.kb,g=g.height,w.O+=(g-1)*w.fa,w.fa=-w.fa,w.N+=(g-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(g-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(g-1)*w.lb,w.lb=-w.lb);return 0}function Au(g,w,A,P){if(P==null||0>=g||0>=w)return 2;if(A!=null){if(A.Da){var $=A.cd,V=A.bd,G=-2&A.v,X=-2&A.j;if(0>G||0>X||0>=$||0>=V||G+$>g||X+V>w)return 2;g=$,w=V}if(A.da){if(!Qe(g,w,$=[A.ib],V=[A.hb]))return 2;g=$[0],w=V[0]}}P.width=g,P.height=w;e:{var J=P.width,ie=P.height;if(g=P.S,0>=J||0>=ie||!(g>=sg&&13>g))g=2;else{if(0>=P.Rd&&P.sd==null){G=V=$=w=0;var le=(X=J*o5[g])*ie;if(11>g||(V=(ie+1)/2*(w=(J+1)/2),g==12&&(G=($=J)*ie)),(ie=r(le+2*V+G))==null){g=1;break e}P.sd=ie,11>g?((J=P.f.RGBA).eb=ie,J.fb=0,J.A=X,J.size=le):((J=P.f.kb).y=ie,J.O=0,J.fa=X,J.Fd=le,J.f=ie,J.N=0+le,J.Ab=w,J.Cd=V,J.ea=ie,J.W=0+le+V,J.Db=w,J.Ed=V,g==12&&(J.F=ie,J.J=0+le+2*V),J.Tc=G,J.lb=$)}if(w=1,$=P.S,V=P.width,G=P.height,$>=sg&&13>$)if(11>$)g=P.f.RGBA,w&=(X=Math.abs(g.A))*(G-1)+V<=g.size,w&=X>=V*o5[$],w&=g.eb!=null;else{g=P.f.kb,X=(V+1)/2,le=(G+1)/2,J=Math.abs(g.fa),ie=Math.abs(g.Ab);var be=Math.abs(g.Db),Se=Math.abs(g.lb),fe=Se*(G-1)+V;w&=J*(G-1)+V<=g.Fd,w&=ie*(le-1)+X<=g.Cd,w=(w&=be*(le-1)+X<=g.Ed)&J>=V&ie>=X&be>=X,w&=g.y!=null,w&=g.f!=null,w&=g.ea!=null,$==12&&(w&=Se>=V,w&=fe<=g.Tc,w&=g.F!=null)}else w=0;g=w?0:2}}return g!=0||A!=null&&A.fd&&(g=fh(P)),g}var cs=64,Lu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ku=24,Cu=32,ph=8,Gs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(g){return g},k.Predictor2=function(g,w,A){return w[A+0]},k.Predictor3=function(g,w,A){return w[A+1]},k.Predictor4=function(g,w,A){return w[A-1]},k.Predictor5=function(g,w,A){return $e($e(g,w[A+1]),w[A+0])},k.Predictor6=function(g,w,A){return $e(g,w[A-1])},k.Predictor7=function(g,w,A){return $e(g,w[A+0])},k.Predictor8=function(g,w,A){return $e(w[A-1],w[A+0])},k.Predictor9=function(g,w,A){return $e(w[A+0],w[A+1])},k.Predictor10=function(g,w,A){return $e($e(g,w[A-1]),$e(w[A+0],w[A+1]))},k.Predictor11=function(g,w,A){var P=w[A+0];return 0>=_t(P>>24&255,g>>24&255,(w=w[A-1])>>24&255)+_t(P>>16&255,g>>16&255,w>>16&255)+_t(P>>8&255,g>>8&255,w>>8&255)+_t(255&P,255&g,255&w)?P:g},k.Predictor12=function(g,w,A){var P=w[A+0];return(Fe((g>>24&255)+(P>>24&255)-((w=w[A-1])>>24&255))<<24|Fe((g>>16&255)+(P>>16&255)-(w>>16&255))<<16|Fe((g>>8&255)+(P>>8&255)-(w>>8&255))<<8|Fe((255&g)+(255&P)-(255&w)))>>>0},k.Predictor13=function(g,w,A){var P=w[A-1];return(Xe((g=$e(g,w[A+0]))>>24&255,P>>24&255)<<24|Xe(g>>16&255,P>>16&255)<<16|Xe(g>>8&255,P>>8&255)<<8|Xe(g>>0&255,P>>0&255))>>>0};var Sv=k.PredictorAdd0;k.PredictorAdd1=We,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var gh=k.PredictorAdd2;Ct("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),Ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Jp,Cr=k.ColorIndexInverseTransform,Iu=k.MapARGB,Zp=k.VP8LColorIndexInverseTransformAlpha,eg=k.MapAlpha,el=k.VP8LPredictorsAdd=[];el.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var hc,Ys,Ms,tl,io,so,Ru,ro,wi,mh,Fs,Ir,Pu,tg,yh,fc,pc,nl,gc,Nu,mc,il,vh,Rr,Pr,Bn,Un,_i,Hi=r(511),ao=r(2041),xh=r(225),Du=r(767),ng=0,wv=ao,ig=xh,dr=Du,Nr=Hi,sg=0,rg=1,Xw=2,ag=3,og=4,_v=5,Qw=6,Ev=7,Tv=8,lg=9,Av=10,XD=[2,3,7],QD=[3,3,11],Jw=[280,256,256,256,40],JD=[0,1,1,1,0],ZD=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],e3=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],t3=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],n3=8,Lv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],bh=null,i3=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],s3=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Zw=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],r3=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],a3=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],o3=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],l3=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],sl=[],Jr=[],oo=[],c3=1,e5=2,rl=[],Dr=[];Ae("UpsampleRgbLinePair",ln,3),Ae("UpsampleBgrLinePair",ri,3),Ae("UpsampleRgbaLinePair",Qr,4),Ae("UpsampleBgraLinePair",Ji,4),Ae("UpsampleArgbLinePair",ys,4),Ae("UpsampleRgba4444LinePair",Di,2),Ae("UpsampleRgb565LinePair",hi,2);var u3=k.UpsampleRgbLinePair,d3=k.UpsampleBgrLinePair,t5=k.UpsampleRgbaLinePair,n5=k.UpsampleBgraLinePair,i5=k.UpsampleArgbLinePair,s5=k.UpsampleRgba4444LinePair,h3=k.UpsampleRgb565LinePair,cg=16,ug=1<<cg-1,Sh=-227,Cv=482,f3=6,r5=0,p3=r(256),g3=r(256),m3=r(256),y3=r(256),v3=r(Cv-Sh),x3=r(Cv-Sh);Aa("YuvToRgbRow",ln,3),Aa("YuvToBgrRow",ri,3),Aa("YuvToRgbaRow",Qr,4),Aa("YuvToBgraRow",Ji,4),Aa("YuvToArgbRow",ys,4),Aa("YuvToRgba4444Row",Di,2),Aa("YuvToRgb565Row",hi,2);var a5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],dg=[0,2,8],b3=[8,7,6,4,4,2,2,2,1,1,1,1],S3=1;this.WebPDecodeRGBA=function(g,w,A,P,$){var V=rg,G=new _u,X=new as;G.ba=X,X.S=V,X.width=[X.width],X.height=[X.height];var J=X.width,ie=X.height,le=new cr;if(le==null||g==null)var be=2;else e(le!=null),be=Tu(g,w,A,le.width,le.height,le.Pd,le.Qd,le.format,null);if(be!=0?J=0:(J!=null&&(J[0]=le.width[0]),ie!=null&&(ie[0]=le.height[0]),J=1),J){X.width=X.width[0],X.height=X.height[0],P!=null&&(P[0]=X.width),$!=null&&($[0]=X.height);e:{if(P=new Bt,($=new ah).data=g,$.w=w,$.ha=A,$.kd=1,w=[0],e($!=null),((g=Tu($.data,$.w,$.ha,null,null,null,w,null,$))==0||g==7)&&w[0]&&(g=4),(w=g)==0){if(e(G!=null),P.data=$.data,P.w=$.w+$.offset,P.ha=$.ha-$.offset,P.put=vi,P.ac=Dn,P.bc=Ii,P.ma=G,$.xa){if((g=bi())==null){G=1;break e}if(function(Se,fe){var Ne=[0],Ee=[0],ce=[0];t:for(;;){if(Se==null)return 0;if(fe==null)return Se.a=2,0;if(Se.l=fe,Se.a=0,B(Se.m,fe.data,fe.w,fe.ha),!ft(Se.m,Ne,Ee,ce)){Se.a=3;break t}if(Se.xb=e5,fe.width=Ne[0],fe.height=Ee[0],!Ds(Ne[0],Ee[0],1,Se,null))break t;return 1}return e(Se.a!=0),0}(g,P)){if(P=(w=Au(P.width,P.height,G.Oa,G.ba))==0){t:{P=g;n:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((A=P.l)!=null),e(($=A.ma)!=null),P.xb!=0){if(P.ca=$.ba,P.tb=$.tb,e(P.ca!=null),!hh($.Oa,A,ag)){P.a=2;break n}if(!Bi(P,A.width)||A.da)break n;if((A.da||Xt(P.ca.S))&&me(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&me()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!Ze(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!xi(P,P.V,P.Ba,P.c,P.i,A.o,Xn))break n;$.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(w=g.a)}else w=g.a}else{if((g=new fn)==null){G=1;break e}if(g.Fa=$.na,g.P=$.P,g.qc=$.Sa,Ni(g,P)){if((w=Au(P.width,P.height,G.Oa,G.ba))==0){if(g.Aa=0,A=G.Oa,e(($=g)!=null),A!=null){if(0<(J=0>(J=A.Md)?0:100<J?255:255*J/100)){for(ie=le=0;4>ie;++ie)12>(be=$.pb[ie]).lc&&(be.ia=J*b3[0>be.lc?0:be.lc]>>3),le|=be.ia;le&&(alert("todo:VP8InitRandom"),$.ia=1)}$.Ga=A.Id,100<$.Ga?$.Ga=100:0>$.Ga&&($.Ga=0)}It(g,P)||(w=g.a)}}else w=g.a}w==0&&G.Oa!=null&&G.Oa.fd&&(w=fh(G.ba))}G=w}V=G!=0?null:11>V?X.f.RGBA.eb:X.f.kb.y}else V=null;return V};var o5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(k,M){for(var D="",I=0;I<4;I++)D+=String.fromCharCode(k[M++]);return D}function u(k,M){return(k[M+0]<<0|k[M+1]<<8|k[M+2]<<16)>>>0}function d(k,M){return(k[M+0]<<0|k[M+1]<<8|k[M+2]<<16|k[M+3]<<24)>>>0}new l;var h=[0],f=[0],p=[],m=new l,v=n,y=function(k,M){var D={},I=0,R=!1,q=0,Y=0;if(D.frames=[],!function(W,K,Z,te){for(var oe=0;oe<te;oe++)if(W[K+oe]!=Z.charCodeAt(oe))return!0;return!1}(k,M,"RIFF",4)){var ee,j;for(d(k,M+=4),M+=8;M<k.length;){var z=c(k,M),B=d(k,M+=4);M+=4;var U=B+(1&B);switch(z){case"VP8 ":case"VP8L":D.frames[I]===void 0&&(D.frames[I]={}),(N=D.frames[I]).src_off=R?Y:M-8,N.src_size=q+B+8,I++,R&&(R=!1,q=0,Y=0);break;case"VP8X":(N=D.header={}).feature_flags=k[M];var Q=M+4;N.canvas_width=1+u(k,Q),Q+=3,N.canvas_height=1+u(k,Q),Q+=3;break;case"ALPH":R=!0,q=U+8,Y=M-8;break;case"ANIM":(N=D.header).bgcolor=d(k,M),Q=M+4,N.loop_count=(ee=k)[(j=Q)+0]<<0|ee[j+1]<<8,Q+=2;break;case"ANMF":var re,N;(N=D.frames[I]={}).offset_x=2*u(k,M),M+=3,N.offset_y=2*u(k,M),M+=3,N.width=1+u(k,M),M+=3,N.height=1+u(k,M),M+=3,N.duration=u(k,M),M+=3,re=k[M++],N.dispose=1&re,N.blend=re>>1&1}z!="ANMF"&&(M+=U)}return D}}(v,0);y.response=v,y.rgbaoutput=!0,y.dataurl=!1;var b=y.header?y.header:null,x=y.frames?y.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],f=[b.canvas_width];for(var _=0;_<x.length&&x[_].blend!=0;_++);}var T=x[0],C=m.WebPDecodeRGBA(v,T.src_off,T.src_size,f,h);T.rgba=C,T.imgwidth=f[0],T.imgheight=h[0];for(var L=0;L<f[0]*h[0]*4;L++)p[L]=C[L];return this.width=f,this.height=h,this.data=p,this}(function(n){var e=function(){return typeof Jb=="function"},t=function(h,f,p,m){var v=4,y=a;switch(m){case n.image_compression.FAST:v=1,y=r;break;case n.image_compression.MEDIUM:v=6,y=o;break;case n.image_compression.SLOW:v=9,y=l}h=i(h,f,p,y);var b=Jb(h,{level:v});return n.__addimage__.arrayBufferToBinaryString(b)},i=function(h,f,p,m){for(var v,y,b,x=h.length/f,_=new Uint8Array(h.length+x),T=u(),C=0;C<x;C+=1){if(b=C*f,v=h.subarray(b,b+f),m)_.set(m(v,p,y),b+C);else{for(var L,k=T.length,M=[];L<k;L+=1)M[L]=T[L](v,p,y);var D=d(M.concat());_.set(M[D],b+C)}y=v}return _},s=function(h){var f=Array.apply([],h);return f.unshift(0),f},r=function(h,f){var p,m=[],v=h.length;m[0]=1;for(var y=0;y<v;y+=1)p=h[y-f]||0,m[y+1]=h[y]-p+256&255;return m},a=function(h,f,p){var m,v=[],y=h.length;v[0]=2;for(var b=0;b<y;b+=1)m=p&&p[b]||0,v[b+1]=h[b]-m+256&255;return v},o=function(h,f,p){var m,v,y=[],b=h.length;y[0]=3;for(var x=0;x<b;x+=1)m=h[x-f]||0,v=p&&p[x]||0,y[x+1]=h[x]+256-(m+v>>>1)&255;return y},l=function(h,f,p){var m,v,y,b,x=[],_=h.length;x[0]=4;for(var T=0;T<_;T+=1)m=h[T-f]||0,v=p&&p[T]||0,y=p&&p[T-f]||0,b=c(m,v,y),x[T+1]=h[T]-b+256&255;return x},c=function(h,f,p){if(h===f&&f===p)return h;var m=Math.abs(f-p),v=Math.abs(h-p),y=Math.abs(h+f-p-p);return m<=v&&m<=y?h:v<=y?f:p},u=function(){return[s,r,a,o,l]},d=function(h){var f=h.map(function(p){return p.reduce(function(m,v){return m+Math.abs(v)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(h,f,p,m){var v,y,b,x,_,T,C,L,k,M,D,I,R,q,Y,ee=this.decode.FLATE_DECODE,j="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(b=new Az(h)).imgData,y=b.bits,v=b.colorSpace,_=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){k=(L=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,D=new Uint8Array(k*b.colors),M=new Uint8Array(k);var z,B=b.pixelBitlength-b.bits;for(q=0,Y=0;q<k;q++){for(R=L[q],z=0;z<B;)D[Y++]=R>>>z&255,z+=b.bits;M[q]=R>>>z&255}}if(b.bits===16){k=(L=new Uint32Array(b.decodePixels().buffer)).length,D=new Uint8Array(k*(32/b.pixelBitlength)*b.colors),M=new Uint8Array(k*(32/b.pixelBitlength)),I=b.colors>1,q=0,Y=0;for(var U=0;q<k;)R=L[q++],D[Y++]=R>>>0&255,I&&(D[Y++]=R>>>16&255,R=L[q++],D[Y++]=R>>>0&255),M[U++]=R>>>16&255;y=8}m!==n.image_compression.NONE&&e()?(h=t(D,b.width*b.colors,b.colors,m),C=t(M,b.width,1,m)):(h=D,C=M,ee=void 0)}if(b.colorType===3&&(v=this.color_spaces.INDEXED,T=b.palette,b.transparency.indexed)){var Q=b.transparency.indexed,re=0;for(q=0,k=Q.length;q<k;++q)re+=Q[q];if((re/=255)===k-1&&Q.indexOf(0)!==-1)x=[Q.indexOf(0)];else if(re!==k){for(L=b.decodePixels(),M=new Uint8Array(L.length),q=0,k=L.length;q<k;q++)M[q]=Q[L[q]];C=t(M,b.width,1)}}var N=function(W){var K;switch(W){case n.image_compression.FAST:K=11;break;case n.image_compression.MEDIUM:K=13;break;case n.image_compression.SLOW:K=14;break;default:K=12}return K}(m);return ee===this.decode.FLATE_DECODE&&(j="/Predictor "+N+" "),j+="/Colors "+_+" /BitsPerComponent "+y+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(C&&this.__addimage__.isArrayBuffer(C)||this.__addimage__.isArrayBufferView(C))&&(C=this.__addimage__.arrayBufferToBinaryString(C)),{alias:p,data:h,index:f,filter:ee,decodeParameters:j,transparency:x,palette:T,sMask:C,predictor:N,width:b.width,height:b.height,bitsPerComponent:y,colorSpace:v}}}})(Tt.API),function(n){n.processGIF89A=function(e,t,i,s){var r=new Lz(e),a=r.width,o=r.height,l=[];r.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},u=new V1(100).encode(c,100);return n.processJPEG.call(this,u,t,i,s)},n.processGIF87A=n.processGIF89A}(Tt.API),ia.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:i,blue:t,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ia.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Mn.log("bit decode error:"+t)}},ia.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<e;s++)for(var r=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[r>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},ia.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<n;s++){var r=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*s*4,o=r>>4,l=15&r,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},ia.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),r=t*this.width*4+4*i;if(s<this.palette.length){var a=this.palette[s];this.data[r]=a.red,this.data[r+1]=a.green,this.data[r+2]=a.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}n!==0&&(this.pos+=4-n)}},ia.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(r&e)/e*255|0,o=(r>>5&e)/e*255|0,l=(r>>10&e)/e*255|0,c=r>>15?255:0,u=i*this.width*4+4*s;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=n}},ia.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,l=(a>>5&t)/t*255|0,c=(a>>11)/e*255|0,u=s*this.width*4+4*r;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=n}},ia.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=r,this.data[a+1]=s,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},ia.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=r,this.data[o+1]=s,this.data[o+2]=i,this.data[o+3]=a}},ia.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,i,s){var r=new ia(e,!1),a=r.width,o=r.height,l={data:r.getData(),width:a,height:o},c=new V1(100).encode(l,100);return n.processJPEG.call(this,c,t,i,s)}}(Tt.API),oA.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,i,s){var r=new oA(e),a=r.width,o=r.height,l={data:r.getData(),width:a,height:o},c=new V1(100).encode(l,100);return n.processJPEG.call(this,c,t,i,s)}}(Tt.API),Tt.API.processRGBA=function(n,e,t){for(var i=n.data,s=i.length,r=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,l=0,c=0;c<s;c+=4){var u=i[c],d=i[c+1],h=i[c+2],f=i[c+3];r[o++]=u,r[o++]=d,r[o++]=h,a[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:p,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Tt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Gu=Tt.API,lm=Gu.getCharWidthsArray=function(n,e){var t,i,s=(e=e||{}).font||this.internal.getFont(),r=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,f=n.length,p=0,m=o[0]||l,v=[];for(t=0;t<f;t++)i=n.charCodeAt(t),typeof s.metadata.widthOfString=="function"?v.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+a*(1e3/r)||0)/1e3):(h=d&&kn(c[i])==="object"&&!isNaN(parseInt(c[i][p],10))?c[i][p]/u:0,v.push((o[i]||m)/l+h)),p=i;return v},iA=Gu.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Gu.processArabic&&(n=Gu.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,t,s)/t:lm.apply(this,arguments).reduce(function(r,a){return r+a},0)},sA=function(n,e,t,i){for(var s=[],r=0,a=n.length,o=0;r!==a&&o+e[r]<t;)o+=e[r],r++;s.push(n.slice(0,r));var l=r;for(o=0;r!==a;)o+e[r]>i&&(s.push(n.slice(l,r)),o=0,l=r),o+=e[r],r++;return l!==r&&s.push(n.slice(l,r)),s},rA=function(n,e,t){t||(t={});var i,s,r,a,o,l,c,u=[],d=[u],h=t.textIndent||0,f=0,p=0,m=n.split(" "),v=lm.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?m[0].length+2:t.lineIndent||0){var y=Array(l).join(" "),b=[];m.map(function(_){(_=_.split(/\s*\n/)).length>1?b=b.concat(_.map(function(T,C){return(C&&T.length?`
`:"")+T})):b.push(_[0])}),m=b,l=iA.apply(this,[y,t])}for(r=0,a=m.length;r<a;r++){var x=0;if(i=m[r],l&&i[0]==`
`&&(i=i.substr(1),x=1),h+f+(p=(s=lm.apply(this,[i,t])).reduce(function(_,T){return _+T},0))>e||x){if(p>e){for(o=sA.apply(this,[i,s,e-(h+f),e]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);p=s.slice(i.length-(u[0]?u[0].length:0)).reduce(function(_,T){return _+T},0)}else u=[i];d.push(u),h=p+l,f=v}else u.push(i),h+=f+p,f=v}return c=l?function(_,T){return(T?y:"")+_.join(" ")}:function(_){return _.join(" ")},d.map(c)},Gu.splitTextToSize=function(n,e,t){var i,s=(t=t||{}).fontSize||this.internal.getFontSize(),r=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;r.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/s:0,r.lineIndent=t.lineIndent;var o,l,c=[];for(o=0,l=i.length;o<l;o++)c=c.concat(rA.apply(this,[i[o],a,r]));return c},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},i={},s=0;s<e.length;s++)t[e[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=e[s];var r=function(d){return"0x"+parseInt(d,10).toString(16)},a=n.__fontmetrics__.compress=function(d){var h,f,p,m,v=["{"];for(var y in d){if(h=d[y],isNaN(parseInt(y,10))?f="'"+y+"'":(y=parseInt(y,10),f=(f=r(y).slice(2)).slice(0,-1)+i[f.slice(-1)]),typeof h=="number")h<0?(p=r(h).slice(3),m="-"):(p=r(h).slice(2),m=""),p=m+p.slice(0,-1)+i[p.slice(-1)];else{if(kn(h)!=="object")throw new Error("Don't know what to do with value type "+kn(h)+".");p=a(h)}v.push(f+p)}return v.push("}"),v.join("")},o=n.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,p,m,v={},y=1,b=v,x=[],_="",T="",C=d.length-1,L=1;L<C;L+=1)(m=d[L])=="'"?h?(p=h.join(""),h=void 0):h=[]:h?h.push(m):m=="{"?(x.push([b,p]),b={},p=void 0):m=="}"?((f=x.pop())[0][f[1]]=b,p=void 0,b=f[0]):m=="-"?y=-1:p===void 0?t.hasOwnProperty(m)?(_+=t[m],p=parseInt(_,16)*y,y=1,_=""):_+=m:t.hasOwnProperty(m)?(T+=t[m],b[p]=parseInt(T,16)*y,y=1,p=void 0,T=""):T+=m;return v},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(d){var h=d.font,f=u.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var p=c.Unicode[h.postScriptName];p&&(h.metadata.Unicode.encoding=p,h.encoding=p.codePages[0])}])}(Tt.API),function(n){var e=function(t){for(var i=t.length,s=new Uint8Array(i),r=0;r<i;r++)s[r]=t.charCodeAt(r);return s};n.API.events.push(["addFont",function(t){var i=void 0,s=t.font,r=t.instance;if(!s.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(i=r.existsFileInVFS(s.postScriptName)===!1?r.loadFile(s.postScriptName):r.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Ef(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,i)}}])}(Tt),function(n){function e(){return(kt.canvg?Promise.resolve(kt.canvg):Yb(()=>import("./index.es-DOBlRFUR.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Tt.API.addSvgAsImage=function(t,i,s,r,a,o,l,c){if(isNaN(i)||isNaN(s))throw Mn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(a))throw Mn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=r,u.height=a;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(p){return p.fromString(d,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(h)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),i,s,r,a,l,c)})}}(),Tt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var s=0;s<this.internal.pages[i].length;s++)this.internal.pages[i][s]=this.internal.pages[i][s].replace(e,t);return this},Tt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var i,s,r,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,u=0,d=0;function h(p,m){var v,y=!1;for(v=0;v<p.length;v+=1)p[v]===m&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=o.length;for(d=0;d<f;d+=1)t[o[d]].value=t[o[d]].defaultValue,t[o[d]].explicitSet=!1}if(kn(n)==="object"){for(s in n)if(r=n[s],h(o,s)&&r!==void 0){if(t[s].type==="boolean"&&typeof r=="boolean")t[s].value=r;else if(t[s].type==="name"&&h(t[s].valueSet,r))t[s].value=r;else if(t[s].type==="integer"&&Number.isInteger(r))t[s].value=r;else if(t[s].type==="array"){for(c=0;c<r.length;c+=1)if(i=!0,r[c].length===1&&typeof r[c][0]=="number")l.push(String(r[c]-1));else if(r[c].length>1){for(u=0;u<r[c].length;u+=1)typeof r[c][u]!="number"&&(i=!1);i===!0&&l.push([r[c][0]-1,r[c][1]-1].join(" "))}t[s].value="["+l.join(" ")+"]"}else t[s].value=t[s].defaultValue;t[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,m=[];for(p in t)t[p].explicitSet===!0&&(t[p].type==="name"?m.push("/"+p+" /"+t[p].value):m.push("/"+p+" "+t[p].value));m.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+m.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(i)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=r.length+a.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+r+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Tt.API),function(n){var e=n.API,t=e.pdfEscape16=function(r,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=r.length;d<h;++d){if(o=a.metadata.characterToGlyph(r.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=r.charCodeAt(d),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},i=function(r){var a,o,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(o=Object.keys(r).sort(function(f,p){return f-p})).length;d<h;d++)a=o[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),r[a]!==void 0&&r[a]!==null&&typeof r[a].toString=="function"&&(c=("0000"+r[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(r){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var m=c();u({data:f,addLength1:!0,objectId:m}),l("endobj");var v=c();u({data:i(o.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var y=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Zu(o.fontName)),l("/FontFile2 "+m+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var b=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Zu(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+n.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+Zu(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+b+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(r)}]),e.events.push(["putFont",function(r){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var p=c();u({data:h,addLength1:!0,objectId:p}),l("endobj");var m=c();u({data:i(o.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var v=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+p+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Zu(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+m+" 0 R/BaseFont/"+Zu(o.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(r)}]);var s=function(r){var a,o=r.text||"",l=r.x,c=r.y,u=r.options||{},d=r.mutex||{},h=d.pdfEscape,f=d.activeFontKey,p=d.fonts,m=f,v="",y=0,b="",x=p[m].encoding;if(p[m].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:d};for(b=o,m=f,Array.isArray(o)&&(b=o[0]),y=0;y<b.length;y+=1)p[m].metadata.hasOwnProperty("cmap")&&(a=p[m].metadata.cmap.unicode.codeMap[b[y].charCodeAt(0)]),a||b[y].charCodeAt(0)<256&&p[m].metadata.hasOwnProperty("Unicode")?v+=b[y]:v+="";var _="";return parseInt(m.slice(1))<14||x==="WinAnsiEncoding"?_=h(v,m).split("").map(function(T){return T.charCodeAt(0).toString(16)}).join(""):x==="Identity-H"&&(_=t(v,p[m])),d.isHex=!0,{text:_,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(r){var a=r.text||"",o=[],l={text:a,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([s(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(s(Object.assign({},l,{text:a[c]})).text);r.text=o}else r.text=s(Object.assign({},l,{text:a})).text}])}(Tt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,i){return e.call(this),this.internal.vFS[t]=i,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Tt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var s,r,a,o,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,x=0;this.__bidiEngine__={};var _=function(I){var R=I.charCodeAt(),q=R>>8,Y=m[q];return Y!==void 0?d[256*Y+(255&R)]:q===252||q===253?"AL":y.test(q)?"L":q===8?"R":"N"},T=function(I){for(var R,q=0;q<I.length;q++){if((R=_(I.charAt(q)))==="L")return!1;if(R==="R")return!0}return!1},C=function(I,R,q,Y){var ee,j,z,B,U=R[Y];switch(U){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(U="AN");break;case"AL":b=!0,U="R";break;case"WS":U="N";break;case"CS":Y<1||Y+1>=R.length||(ee=q[Y-1])!=="EN"&&ee!=="AN"||(j=R[Y+1])!=="EN"&&j!=="AN"?U="N":b&&(j="AN"),U=j===ee?j:"N";break;case"ES":U=(ee=Y>0?q[Y-1]:"B")==="EN"&&Y+1<R.length&&R[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&q[Y-1]==="EN"){U="EN";break}if(b){U="N";break}for(z=Y+1,B=R.length;z<B&&R[z]==="ET";)z++;U=z<B&&R[z]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(B=R.length,z=Y+1;z<B&&R[z]==="NSM";)z++;if(z<B){var Q=I[Y],re=Q>=1425&&Q<=2303||Q===64286;if(ee=R[z],re&&(ee==="R"||ee==="AL")){U="R";break}}}U=Y<1||(ee=R[Y-1])==="B"?"N":q[Y-1];break;case"B":b=!1,s=!0,U=x;break;case"S":r=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":U="N"}return U},L=function(I,R,q){var Y=I.split("");return q&&k(Y,q,{hiLevel:x}),Y.reverse(),R&&R.reverse(),Y.join("")},k=function(I,R,q){var Y,ee,j,z,B,U=-1,Q=I.length,re=0,N=[],W=x?f:h,K=[];for(b=!1,s=!1,r=!1,ee=0;ee<Q;ee++)K[ee]=_(I[ee]);for(j=0;j<Q;j++){if(B=re,N[j]=C(I,K,N,j),Y=240&(re=W[B][p[N[j]]]),re&=15,R[j]=z=W[re][5],Y>0)if(Y===16){for(ee=U;ee<j;ee++)R[ee]=1;U=-1}else U=-1;if(W[re][6])U===-1&&(U=j);else if(U>-1){for(ee=U;ee<j;ee++)R[ee]=z;U=-1}K[j]==="B"&&(R[j]=0),q.hiLevel|=z}r&&function(Z,te,oe){for(var de=0;de<oe;de++)if(Z[de]==="S"){te[de]=x;for(var ge=de-1;ge>=0&&Z[ge]==="WS";ge--)te[ge]=x}}(K,R,Q)},M=function(I,R,q,Y,ee){if(!(ee.hiLevel<I)){if(I===1&&x===1&&!s)return R.reverse(),void(q&&q.reverse());for(var j,z,B,U,Q=R.length,re=0;re<Q;){if(Y[re]>=I){for(B=re+1;B<Q&&Y[B]>=I;)B++;for(U=re,z=B-1;U<z;U++,z--)j=R[U],R[U]=R[z],R[z]=j,q&&(j=q[U],q[U]=q[z],q[z]=j);re=B}re++}}},D=function(I,R,q){var Y=I.split(""),ee={hiLevel:x};return q||(q=[]),k(Y,q,ee),function(j,z,B){if(B.hiLevel!==0&&u)for(var U,Q=0;Q<j.length;Q++)z[Q]===1&&(U=v.indexOf(j[Q]))>=0&&(j[Q]=v[U+1])}(Y,q,ee),M(2,Y,R,q,ee),M(1,Y,R,q,ee),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(I,R,q){if(function(ee,j){if(j)for(var z=0;z<ee.length;z++)j[z]=z;o===void 0&&(o=T(ee)),c===void 0&&(c=T(ee))}(I,R),a||!l||c)if(a&&l&&o^c)x=o?1:0,I=L(I,R,q);else if(!a&&l&&c)x=o?1:0,I=D(I,R,q),I=L(I,R);else if(!a||o||l||c){if(a&&!l&&o^c)I=L(I,R),o?(x=0,I=D(I,R,q)):(x=1,I=D(I,R,q),I=L(I,R));else if(a&&o&&!l&&c)x=1,I=D(I,R,q),I=L(I,R);else if(!a&&!l&&o^c){var Y=u;o?(x=1,I=D(I,R,q),x=0,u=!1,I=D(I,R,q),u=Y):(x=0,I=D(I,R,q),I=L(I,R),x=1,u=!1,I=D(I,R,q),u=Y,I=L(I,R))}}else x=0,I=D(I,R,q);else x=o?1:0,I=D(I,R,q);return I},this.__bidiEngine__.setOptions=function(I){I&&(a=I.isInputVisual,l=I.isOutputVisual,o=I.isInputRtl,c=I.isOutputRtl,u=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var s=i.text,r=(i.x,i.y,i.options||{}),a=(i.mutex,r.lang,[]);if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,t.setOptions(r),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([t.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([t.doBidiReorder(s[o])]);i.text=a}else i.text=t.doBidiReorder(s);t.setOptions({isInputVisual:!0})}])}(Tt),Tt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Zl(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Hz(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new kz(this.contents),this.head=new Iz(this),this.name=new Oz(this),this.cmap=new OP(this),this.toUnicode={},this.hhea=new Rz(this),this.maxp=new Mz(this),this.hmtx=new Fz(this),this.post=new Nz(this),this.os2=new Pz(this),this.loca=new $z(this),this.glyf=new jz(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,i,s,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)e=l[a],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(i=255&(s=this.post.italic_angle),32768&(t=s>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,i){var s,r,a,o;for(a=0,r=0,o=(e=""+e).length;0<=o?r<o:r>o;r=0<=o?++r:--r)s=e.charCodeAt(r),a+=this.widthOfGlyph(this.characterToGlyph(s))+i*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var i;return t==null&&(t=!1),i=t?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},n}();var wa,Zl=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)i[t]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(e){var t,i,s;for(s=[],t=0,i=e.length;0<=i?t<i:t>i;t=0<=i?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,i,s,r,a,o,l;return e=this.readByte(),t=this.readByte(),i=this.readByte(),s=this.readByte(),r=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^s)+16777216*(255^r)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*i+4294967296*s+16777216*r+65536*a+256*o+l},n.prototype.writeLongLong=function(e){var t,i;return t=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,i;for(t=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)t.push(this.readByte());return t},n.prototype.write=function(e){var t,i,s,r;for(r=[],i=0,s=e.length;i<s;i++)t=e[i],r.push(this.writeByte(t));return r},n}(),kz=function(){var n;function e(t){var i,s,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},s=0,r=this.tableCount;0<=r?s<r:s>r;s=0<=r?++s:--s)i={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(t){var i,s,r,a,o,l,c,u,d,h,f,p,m;for(m in f=Object.keys(t).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),a=Math.floor(d/l),u=16*f-d,(s=new Zl).writeInt(this.scalarType),s.writeShort(f),s.writeShort(d),s.writeShort(a),s.writeShort(u),r=16*f,c=s.pos+r,o=null,p=[],t)for(h=t[m],s.writeString(m),s.writeInt(n(h)),s.writeInt(c),s.writeInt(h.length),p=p.concat(h),m==="head"&&(o=c),c+=h.length;c%4;)p.push(0),c++;return s.write(p),i=2981146554-n(s.data),s.pos=o+8,s.writeUInt32(i),s.data},n=function(t){var i,s,r,a;for(t=MP.call(t);t.length%4;)t.push(0);for(r=new Zl(t),s=0,i=0,a=t.length;i<a;i=i+=4)s+=r.readUInt32();return 4294967295&s},e}(),Cz={}.hasOwnProperty,Qa=function(n,e){for(var t in e)Cz.call(e,t)&&(n[t]=e[t]);function i(){this.constructor=n}return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n};wa=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Iz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var i;return(i=new Zl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(t),i.writeShort(this.glyphDataFormat),i.data},e}(),lA=function(){function n(e,t){var i,s,r,a,o,l,c,u,d,h,f,p,m,v,y,b,x;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,r=function(){var _,T;for(T=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)T.push(e.readUInt16());return T}(),e.pos+=2,m=function(){var _,T;for(T=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)T.push(e.readUInt16());return T}(),c=function(){var _,T;for(T=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)T.push(e.readUInt16());return T}(),u=function(){var _,T;for(T=[],l=_=0;0<=h?_<h:_>h;l=0<=h?++_:--_)T.push(e.readUInt16());return T}(),s=(this.length-e.pos+this.offset)/2,o=function(){var _,T;for(T=[],l=_=0;0<=s?_<s:_>s;l=0<=s?++_:--_)T.push(e.readUInt16());return T}(),l=y=0,x=r.length;y<x;l=++y)for(v=r[l],i=b=p=m[l];p<=v?b<=v:b>=v;i=p<=v?++b:--b)u[l]===0?a=i+c[l]:(a=o[u[l]/2+(i-p)-(h-l)]||0)!==0&&(a+=c[l]),this.codeMap[i]=65535&a}e.pos=d}return n.encode=function(e,t){var i,s,r,a,o,l,c,u,d,h,f,p,m,v,y,b,x,_,T,C,L,k,M,D,I,R,q,Y,ee,j,z,B,U,Q,re,N,W,K,Z,te,oe,de,ge,De,Re,Ce;switch(Y=new Zl,a=Object.keys(e).sort(function(Be,Ze){return Be-Ze}),t){case"macroman":for(m=0,v=function(){var Be=[];for(p=0;p<256;++p)Be.push(0);return Be}(),b={0:0},r={},ee=0,U=a.length;ee<U;ee++)b[ge=e[s=a[ee]]]==null&&(b[ge]=++m),r[s]={old:e[s],new:b[e[s]]},v[s]=b[e[s]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(v),{charMap:r,subtable:Y.data,maxGlyphID:m+1};case"unicode":for(R=[],d=[],x=0,b={},i={},y=c=null,j=0,Q=a.length;j<Q;j++)b[T=e[s=a[j]]]==null&&(b[T]=++x),i[s]={old:T,new:b[T]},o=b[T]-s,y!=null&&o===c||(y&&d.push(y),R.push(s),c=o),y=s;for(y&&d.push(y),d.push(65535),R.push(65535),D=2*(M=R.length),k=2*Math.pow(Math.log(M)/Math.LN2,2),h=Math.log(k/2)/Math.LN2,L=2*M-k,l=[],C=[],f=[],p=z=0,re=R.length;z<re;p=++z){if(I=R[p],u=d[p],I===65535){l.push(0),C.push(0);break}if(I-(q=i[I].new)>=32768)for(l.push(0),C.push(2*(f.length+M-p)),s=B=I;I<=u?B<=u:B>=u;s=I<=u?++B:--B)f.push(i[s].new);else l.push(q-I),C.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*M+2*f.length),Y.writeUInt16(0),Y.writeUInt16(D),Y.writeUInt16(k),Y.writeUInt16(h),Y.writeUInt16(L),oe=0,N=d.length;oe<N;oe++)s=d[oe],Y.writeUInt16(s);for(Y.writeUInt16(0),de=0,W=R.length;de<W;de++)s=R[de],Y.writeUInt16(s);for(De=0,K=l.length;De<K;De++)o=l[De],Y.writeUInt16(o);for(Re=0,Z=C.length;Re<Z;Re++)_=C[Re],Y.writeUInt16(_);for(Ce=0,te=f.length;Ce<te;Ce++)m=f[Ce],Y.writeUInt16(m);return{charMap:i,subtable:Y.data,maxGlyphID:x+1}}},n}(),OP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="cmap",e.prototype.parse=function(t){var i,s,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i=new lA(t,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(t,i){var s,r;return i==null&&(i="macroman"),s=lA.encode(t,i),(r=new Zl).writeUInt16(0),r.writeUInt16(1),s.table=r.data.concat(s.subtable),s},e}(),Rz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Pz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var i,s;for(s=[],i=0;i<10;++i)s.push(t.readByte());return s}(),this.charRange=function(){var i,s;for(s=[],i=0;i<4;++i)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var i,s;for(s=[],i=0;i<2;i=++i)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Nz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="post",e.prototype.parse=function(t){var i,s,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(s=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)i=t.readByte(),r.push(this.names.push(t.readString(i)));return r;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),Dz=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Oz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="name",e.prototype.parse=function(t){var i,s,r,a,o,l,c,u,d,h,f;for(t.pos=this.offset,t.readShort(),i=t.readShort(),l=t.readShort(),s=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},a=d=0,h=s.length;d<h;a=++d)r=s[a],t.pos=r.offset,u=t.readString(r.length),o=new Dz(u,r),c[f=r.nameID]==null&&(c[f]=[]),c[r.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Mz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Fz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="hmtx",e.prototype.parse=function(t){var i,s,r,a,o,l,c;for(t.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],i=u=0;0<=r?u<r:u>r;i=0<=r?++u:--u)d.push(t.readInt16());return d}(),this.widths=(function(){var u,d,h,f;for(f=[],u=0,d=(h=this.metrics).length;u<d;u++)a=h[u],f.push(a.advance);return f}).call(this),s=this.widths[this.widths.length-1],c=[],i=o=0;0<=r?o<r:o>r;i=0<=r?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),MP=[].slice,jz=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var i,s,r,a,o,l,c,u,d,h;return t in this.cache?this.cache[t]:(a=this.file.loca,i=this.file.contents,s=a.indexOf(t),(r=a.lengthOf(t))===0?this.cache[t]=null:(i.pos=this.offset+s,o=(l=new Zl(i.read(r))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[t]=o===-1?new Uz(l,u,h,c,d):new Bz(l,o,u,h,c,d),this.cache[t]))},e.prototype.encode=function(t,i,s){var r,a,o,l,c;for(o=[],a=[],l=0,c=i.length;l<c;l++)r=t[i[l]],a.push(o.length),r&&(o=o.concat(r.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),Bz=function(){function n(e,t,i,s,r,a){this.raw=e,this.numberOfContours=t,this.xMin=i,this.yMin=s,this.xMax=r,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Uz=function(){function n(e,t,i,s,r){var a,o;for(this.raw=e,this.xMin=t,this.yMin=i,this.xMax=s,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,i;for(t=new Zl(MP.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),$z=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Qa(e,wa),e.prototype.tag="loca",e.prototype.parse=function(t){var i,s;return t.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var r,a;for(a=[],s=0,r=this.length;s<r;s+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var r,a;for(a=[],s=0,r=this.length;s<r;s+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,i){for(var s=new Uint32Array(this.offsets.length),r=0,a=0,o=0;o<s.length;++o)if(s[o]=r,a<i.length&&i[a]==o){++a,s[o]=r;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(r+=c)}for(var u=new Array(4*s.length),d=0;d<s.length;++d)u[4*d+3]=255&s[d],u[4*d+2]=(65280&s[d])>>8,u[4*d+1]=(16711680&s[d])>>16,u[4*d]=(4278190080&s[d])>>24;return u},e}(),Hz=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,i,s,r;for(t in s=this.font.cmap.tables[0].codeMap,e={},r=this.subset)i=r[t],e[t]=s[i];return e},n.prototype.glyphsFor=function(e){var t,i,s,r,a,o,l;for(s={},a=0,o=e.length;a<o;a++)s[r=e[a]]=this.font.glyf.glyphFor(r);for(r in t=[],s)(i=s[r])!=null&&i.compound&&t.push.apply(t,i.glyphIDs);if(t.length>0)for(r in l=this.glyphsFor(t))i=l[r],s[r]=i;return s},n.prototype.encode=function(e,t){var i,s,r,a,o,l,c,u,d,h,f,p,m,v,y;for(s in i=OP.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),f={0:0},y=i.charMap)f[(l=y[s]).old]=l.new;for(p in h=i.maxGlyphID,a)p in f||(f[p]=h++);return u=function(b){var x,_;for(x in _={},b)_[b[x]]=x;return _}(f),d=Object.keys(u).sort(function(b,x){return b-x}),m=function(){var b,x,_;for(_=[],b=0,x=d.length;b<x;b++)o=d[b],_.push(u[o]);return _}(),r=this.font.glyf.encode(a,m,f),c=this.font.loca.encode(r.offsets,m),v={cmap:this.font.cmap.raw(),glyf:r.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},n}();Tt.API.PDFObject=function(){var n;function e(){}return n=function(t,i){return(Array(i+1).join("0")+t).slice(-i)},e.convert=function(t){var i,s,r,a;if(Array.isArray(t))return"["+function(){var o,l,c;for(c=[],o=0,l=t.length;o<l;o++)i=t[o],c.push(e.convert(i));return c}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(s in r=["<<"],t)a=t[s],r.push("/"+s+" "+e.convert(a));return r.push(">>"),r.join(`
`)}return""+t},e}();const zz=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:bz,AcroFormAppearance:ot,AcroFormButton:Vi,AcroFormCheckBox:Lf,AcroFormChoiceField:Xc,AcroFormComboBox:Jc,AcroFormEditBox:Tf,AcroFormListBox:Qc,AcroFormPasswordField:kf,AcroFormPushButton:Af,AcroFormRadioButton:Zc,AcroFormTextField:Gl,GState:up,ShadingPattern:Tl,TilingPattern:Hc,default:Tt,jsPDF:Tt},Symbol.toStringTag,{value:"Module"}));var FP={exports:{}};const Wz=M3(zz);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(n,e){(function(i,s){n.exports=s(function(){try{return Wz}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Bv<"u"?Bv:typeof window<"u"?window:typeof self<"u"?self:Bv,function(t){return function(){var i={172:function(o,l){var c=this&&this.__extends||function(){var h=function(f,p){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(m[y]=v[y])},h(f,p)};return function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");h(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var u=function(){function h(f,p,m){this.table=p,this.pageNumber=p.pageNumber,this.pageCount=this.pageNumber,this.settings=p.settings,this.cursor=m,this.doc=f.getDocument()}return h}();l.HookData=u;var d=function(h){c(f,h);function f(p,m,v,y,b,x){var _=h.call(this,p,m,x)||this;return _.cell=v,_.row=y,_.column=b,_.section=y.section,_}return f}(u);l.CellHookData=d},340:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0});var u=c(4),d=c(136),h=c(744),f=c(776),p=c(664),m=c(972);function v(y){y.API.autoTable=function(){for(var b=[],x=0;x<arguments.length;x++)b[x]=arguments[x];var _;b.length===1?_=b[0]:(console.error("Use of deprecated autoTable initiation"),_=b[2]||{},_.columns=b[0],_.body=b[1]);var T=(0,f.parseInput)(this,_),C=(0,m.createTable)(this,T);return(0,p.drawTable)(this,C),this},y.API.lastAutoTable=!1,y.API.previousAutoTable=!1,y.API.autoTable.previous=!1,y.API.autoTableText=function(b,x,_,T){(0,d.default)(b,x,_,T,this)},y.API.autoTableSetDefaults=function(b){return h.DocHandler.setDefaults(b,this),this},y.autoTableSetDefaults=function(b,x){h.DocHandler.setDefaults(b,x)},y.API.autoTableHtmlToJson=function(b,x){var _;if(x===void 0&&(x=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var T=new h.DocHandler(this),C=(0,u.parseHtml)(T,b,window,x,!1),L=C.head,k=C.body,M=((_=L[0])===null||_===void 0?void 0:_.map(function(D){return D.content}))||[];return{columns:M,rows:k,data:k}},y.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var b=this.lastAutoTable;return b&&b.finalY?b.finalY:0},y.API.autoTableAddPageContent=function(b){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),y.API.autoTable.globalDefaults||(y.API.autoTable.globalDefaults={}),y.API.autoTable.globalDefaults.addPageContent=b,this},y.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=v},136:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function c(u,d,h,f,p){f=f||{};var m=1.15,v=p.internal.scaleFactor,y=p.internal.getFontSize()/v,b=p.getLineHeightFactor?p.getLineHeightFactor():m,x=y*b,_=/\r\n|\r|\n/g,T="",C=1;if((f.valign==="middle"||f.valign==="bottom"||f.halign==="center"||f.halign==="right")&&(T=typeof u=="string"?u.split(_):u,C=T.length||1),h+=y*(2-m),f.valign==="middle"?h-=C/2*x:f.valign==="bottom"&&(h-=C*x),f.halign==="center"||f.halign==="right"){var L=y;if(f.halign==="center"&&(L*=.5),T&&C>=1){for(var k=0;k<T.length;k++)p.text(T[k],d-p.getStringUnitWidth(T[k])*L,h),h+=x;return p}d-=p.getStringUnitWidth(u)*L}return f.halign==="justify"?p.text(u,d,h,{maxWidth:f.maxWidth||100,align:"justify"}):p.text(u,d,h),p}l.default=c},420:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(p,m,v){v.applyStyles(m,!0);var y=Array.isArray(p)?p:[p],b=y.map(function(x){return v.getTextWidth(x)}).reduce(function(x,_){return Math.max(x,_)},0);return b}l.getStringWidth=c;function u(p,m,v,y){var b=m.settings.tableLineWidth,x=m.settings.tableLineColor;p.applyStyles({lineWidth:b,lineColor:x});var _=d(b,!1);_&&p.rect(v.x,v.y,m.getWidth(p.pageSize().width),y.y-v.y,_)}l.addTableBorder=u;function d(p,m){var v=p>0,y=m||m===0;return v&&y?"DF":v?"S":y?"F":null}l.getFillStyle=d;function h(p,m){var v,y,b,x;if(p=p||m,Array.isArray(p)){if(p.length>=4)return{top:p[0],right:p[1],bottom:p[2],left:p[3]};if(p.length===3)return{top:p[0],right:p[1],bottom:p[2],left:p[1]};if(p.length===2)return{top:p[0],right:p[1],bottom:p[0],left:p[1]};p.length===1?p=p[0]:p=m}return typeof p=="object"?(typeof p.vertical=="number"&&(p.top=p.vertical,p.bottom=p.vertical),typeof p.horizontal=="number"&&(p.right=p.horizontal,p.left=p.horizontal),{left:(v=p.left)!==null&&v!==void 0?v:m,top:(y=p.top)!==null&&y!==void 0?y:m,right:(b=p.right)!==null&&b!==void 0?b:m,bottom:(x=p.bottom)!==null&&x!==void 0?x:m}):(typeof p!="number"&&(p=m),{top:p,right:p,bottom:p,left:p})}l.parseSpacing=h;function f(p,m){var v=h(m.settings.margin,0);return p.pageSize().width-(v.left+v.right)}l.getPageAvailableWidth=f},796:function(o,l){var c=this&&this.__extends||function(){var f=function(p,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(v[b]=y[b])},f(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");f(p,m);function v(){this.constructor=p}p.prototype=m===null?Object.create(m):(v.prototype=m.prototype,new v)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var u=function(f){c(p,f);function p(m){var v=f.call(this)||this;return v._element=m,v}return p}(Array);l.HtmlRowInput=u;function d(f){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/f,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=d;function h(f){var p={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return p[f]}l.getTheme=h},903:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var u=c(420);function d(v,y,b,x,_){var T={},C=1.3333333333333333,L=f(y,function(U){return _.getComputedStyle(U).backgroundColor});L!=null&&(T.fillColor=L);var k=f(y,function(U){return _.getComputedStyle(U).color});k!=null&&(T.textColor=k);var M=m(x,b);M&&(T.cellPadding=M);var D="borderTopColor",I=C*b,R=x.borderTopWidth;if(x.borderBottomWidth===R&&x.borderRightWidth===R&&x.borderLeftWidth===R){var q=(parseFloat(R)||0)/I;q&&(T.lineWidth=q)}else T.lineWidth={top:(parseFloat(x.borderTopWidth)||0)/I,right:(parseFloat(x.borderRightWidth)||0)/I,bottom:(parseFloat(x.borderBottomWidth)||0)/I,left:(parseFloat(x.borderLeftWidth)||0)/I},T.lineWidth.top||(T.lineWidth.right?D="borderRightColor":T.lineWidth.bottom?D="borderBottomColor":T.lineWidth.left&&(D="borderLeftColor"));var Y=f(y,function(U){return _.getComputedStyle(U)[D]});Y!=null&&(T.lineColor=Y);var ee=["left","right","center","justify"];ee.indexOf(x.textAlign)!==-1&&(T.halign=x.textAlign),ee=["middle","bottom","top"],ee.indexOf(x.verticalAlign)!==-1&&(T.valign=x.verticalAlign);var j=parseInt(x.fontSize||"");isNaN(j)||(T.fontSize=j/C);var z=h(x);z&&(T.fontStyle=z);var B=(x.fontFamily||"").toLowerCase();return v.indexOf(B)!==-1&&(T.font=B),T}l.parseCss=d;function h(v){var y="";return(v.fontWeight==="bold"||v.fontWeight==="bolder"||parseInt(v.fontWeight)>=700)&&(y="bold"),(v.fontStyle==="italic"||v.fontStyle==="oblique")&&(y+="italic"),y}function f(v,y){var b=p(v,y);if(!b)return null;var x=b.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!x||!Array.isArray(x))return null;var _=[parseInt(x[1]),parseInt(x[2]),parseInt(x[3])],T=parseInt(x[4]);return T===0||isNaN(_[0])||isNaN(_[1])||isNaN(_[2])?null:_}function p(v,y){var b=y(v);return b==="rgba(0, 0, 0, 0)"||b==="transparent"||b==="initial"||b==="inherit"?v.parentElement==null?null:p(v.parentElement,y):b}function m(v,y){var b=[v.paddingTop,v.paddingRight,v.paddingBottom,v.paddingLeft],x=96/(72/y),_=(parseInt(v.lineHeight)-parseInt(v.fontSize))/y/2,T=b.map(function(L){return parseInt(L||"0")/x}),C=(0,u.parseSpacing)(T,0);return _>C.top&&(C.top=_),_>C.bottom&&(C.bottom=_),C}},744:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},u=function(){function d(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return d.setDefaults=function(h,f){f===void 0&&(f=null),f?f.__autoTableDocumentDefaults=h:c=h},d.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},d.prototype.applyStyles=function(h,f){var p,m,v;f===void 0&&(f=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var y=this.jsPDFDocument.internal.getFont(),b=y.fontStyle,x=y.fontName;if(h.font&&(x=h.font),h.fontStyle){b=h.fontStyle;var _=this.getFontList()[x];_&&_.indexOf(b)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(_[0]),b=_[0])}if(this.jsPDFDocument.setFont(x,b),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!f){var T=d.unifyColor(h.fillColor);T&&(p=this.jsPDFDocument).setFillColor.apply(p,T),T=d.unifyColor(h.textColor),T&&(m=this.jsPDFDocument).setTextColor.apply(m,T),T=d.unifyColor(h.lineColor),T&&(v=this.jsPDFDocument).setDrawColor.apply(v,T),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},d.prototype.splitTextToSize=function(h,f,p){return this.jsPDFDocument.splitTextToSize(h,f,p)},d.prototype.rect=function(h,f,p,m,v){return this.jsPDFDocument.rect(h,f,p,m,v)},d.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},d.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},d.prototype.getDocument=function(){return this.jsPDFDocument},d.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},d.prototype.addPage=function(){return this.jsPDFDocument.addPage()},d.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},d.prototype.getGlobalOptions=function(){return c||{}},d.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},d.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},d.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},d.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},d.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},d.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},d}();l.DocHandler=u},4:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var u=c(903),d=c(796);function h(m,v,y,b,x){var _,T;b===void 0&&(b=!1),x===void 0&&(x=!1);var C;typeof v=="string"?C=y.document.querySelector(v):C=v;var L=Object.keys(m.getFontList()),k=m.scaleFactor(),M=[],D=[],I=[];if(!C)return console.error("Html table could not be found with input: ",v),{head:M,body:D,foot:I};for(var R=0;R<C.rows.length;R++){var q=C.rows[R],Y=(T=(_=q==null?void 0:q.parentElement)===null||_===void 0?void 0:_.tagName)===null||T===void 0?void 0:T.toLowerCase(),ee=f(L,k,y,q,b,x);ee&&(Y==="thead"?M.push(ee):Y==="tfoot"?I.push(ee):D.push(ee))}return{head:M,body:D,foot:I}}l.parseHtml=h;function f(m,v,y,b,x,_){for(var T=new d.HtmlRowInput(b),C=0;C<b.cells.length;C++){var L=b.cells[C],k=y.getComputedStyle(L);if(x||k.display!=="none"){var M=void 0;_&&(M=(0,u.parseCss)(m,L,v,k,y)),T.push({rowSpan:L.rowSpan,colSpan:L.colSpan,styles:M,_element:L,content:p(L)})}}var D=y.getComputedStyle(b);if(T.length>0&&(x||D.display!=="none"))return T}function p(m){var v=m.cloneNode(!0);return v.innerHTML=v.innerHTML.replace(/\n/g,"").replace(/ +/g," "),v.innerHTML=v.innerHTML.split(/<br.*?>/).map(function(y){return y.trim()}).join(`
`),v.innerText||v.textContent||""}},776:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var u=c(4),d=c(356),h=c(420),f=c(744),p=c(792);function m(C,L){var k=new f.DocHandler(C),M=k.getDocumentOptions(),D=k.getGlobalOptions();(0,p.default)(k,D,M,L);var I=(0,d.assign)({},D,M,L),R;typeof window<"u"&&(R=window);var q=v(D,M,L),Y=y(D,M,L),ee=b(k,I),j=_(k,I,R);return{id:L.tableId,content:j,hooks:Y,styles:q,settings:ee}}l.parseInput=m;function v(C,L,k){for(var M={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},D=function(Y){if(Y==="columnStyles"){var ee=C[Y],j=L[Y],z=k[Y];M.columnStyles=(0,d.assign)({},ee,j,z)}else{var B=[C,L,k],U=B.map(function(Q){return Q[Y]||{}});M[Y]=(0,d.assign)({},U[0],U[1],U[2])}},I=0,R=Object.keys(M);I<R.length;I++){var q=R[I];D(q)}return M}function y(C,L,k){for(var M=[C,L,k],D={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},I=0,R=M;I<R.length;I++){var q=R[I];q.didParseCell&&D.didParseCell.push(q.didParseCell),q.willDrawCell&&D.willDrawCell.push(q.willDrawCell),q.didDrawCell&&D.didDrawCell.push(q.didDrawCell),q.willDrawPage&&D.willDrawPage.push(q.willDrawPage),q.didDrawPage&&D.didDrawPage.push(q.didDrawPage)}return D}function b(C,L){var k,M,D,I,R,q,Y,ee,j,z,B,U,Q=(0,h.parseSpacing)(L.margin,40/C.scaleFactor()),re=(k=x(C,L.startY))!==null&&k!==void 0?k:Q.top,N;L.showFoot===!0?N="everyPage":L.showFoot===!1?N="never":N=(M=L.showFoot)!==null&&M!==void 0?M:"everyPage";var W;L.showHead===!0?W="everyPage":L.showHead===!1?W="never":W=(D=L.showHead)!==null&&D!==void 0?D:"everyPage";var K=(I=L.useCss)!==null&&I!==void 0?I:!1,Z=L.theme||(K?"plain":"striped"),te=!!L.horizontalPageBreak,oe=(R=L.horizontalPageBreakRepeat)!==null&&R!==void 0?R:null;return{includeHiddenHtml:(q=L.includeHiddenHtml)!==null&&q!==void 0?q:!1,useCss:K,theme:Z,startY:re,margin:Q,pageBreak:(Y=L.pageBreak)!==null&&Y!==void 0?Y:"auto",rowPageBreak:(ee=L.rowPageBreak)!==null&&ee!==void 0?ee:"auto",tableWidth:(j=L.tableWidth)!==null&&j!==void 0?j:"auto",showHead:W,showFoot:N,tableLineWidth:(z=L.tableLineWidth)!==null&&z!==void 0?z:0,tableLineColor:(B=L.tableLineColor)!==null&&B!==void 0?B:200,horizontalPageBreak:te,horizontalPageBreakRepeat:oe,horizontalPageBreakBehaviour:(U=L.horizontalPageBreakBehaviour)!==null&&U!==void 0?U:"afterAllRows"}}function x(C,L){var k=C.getLastAutoTable(),M=C.scaleFactor(),D=C.pageNumber(),I=!1;if(k&&k.startPageNumber){var R=k.startPageNumber+k.pageNumber-1;I=R===D}return typeof L=="number"?L:(L==null||L===!1)&&I&&(k==null?void 0:k.finalY)!=null?k.finalY+20/M:null}function _(C,L,k){var M=L.head||[],D=L.body||[],I=L.foot||[];if(L.html){var R=L.includeHiddenHtml;if(k){var q=(0,u.parseHtml)(C,L.html,k,R,L.useCss)||{};M=q.head||M,D=q.body||M,I=q.foot||M}else console.error("Cannot parse html in non browser environment")}var Y=L.columns||T(M,D,I);return{columns:Y,head:M,body:D,foot:I}}function T(C,L,k){var M=C[0]||L[0]||k[0]||[],D=[];return Object.keys(M).filter(function(I){return I!=="_element"}).forEach(function(I){var R=1,q;Array.isArray(M)?q=M[parseInt(I)]:q=M[I],typeof q=="object"&&!Array.isArray(q)&&(R=(q==null?void 0:q.colSpan)||1);for(var Y=0;Y<R;Y++){var ee=void 0;Array.isArray(M)?ee=D.length:ee=I+(Y>0?"_".concat(Y):"");var j={dataKey:ee};D.push(j)}}),D}},792:function(o,l){Object.defineProperty(l,"__esModule",{value:!0});function c(d,h,f,p){for(var m=function(x){x&&typeof x!="object"&&console.error("The options parameter should be of type object, is: "+typeof x),typeof x.extendWidth<"u"&&(x.tableWidth=x.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof x.margins<"u"&&(typeof x.margin>"u"&&(x.margin=x.margins),console.error("Use of deprecated option: margins, use margin instead.")),x.startY&&typeof x.startY!="number"&&(console.error("Invalid value for startY option",x.startY),delete x.startY),!x.didDrawPage&&(x.afterPageContent||x.beforePageContent||x.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),x.didDrawPage=function(I){d.applyStyles(d.userStyles),x.beforePageContent&&x.beforePageContent(I),d.applyStyles(d.userStyles),x.afterPageContent&&x.afterPageContent(I),d.applyStyles(d.userStyles),x.afterPageAdd&&I.pageNumber>1&&I.afterPageAdd(I),d.applyStyles(d.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(I){x[I]&&console.error('The "'.concat(I,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(I){var R=I[0],q=I[1];x[q]&&(console.error("Use of deprecated option ".concat(q,". Use ").concat(R," instead")),x[R]=x[q])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(I){var R=typeof I=="string"?I:I[0],q=typeof I=="string"?I:I[1];typeof x[R]<"u"&&(typeof x.styles[q]>"u"&&(x.styles[q]=x[R]),console.error("Use of deprecated option: "+R+", use the style "+q+" instead."))});for(var _=0,T=["styles","bodyStyles","headStyles","footStyles"];_<T.length;_++){var C=T[_];u(x[C]||{})}for(var L=x.columnStyles||{},k=0,M=Object.keys(L);k<M.length;k++){var D=M[k];u(L[D]||{})}},v=0,y=[h,f,p];v<y.length;v++){var b=y[v];m(b)}}l.default=c;function u(d){d.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),d.minCellHeight||(d.minCellHeight=d.rowHeight)):d.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),d.cellWidth||(d.cellWidth=d.columnWidth))}},260:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var u=c(796),d=c(172),h=c(420),f=function(){function y(b,x){this.pageNumber=1,this.pageCount=1,this.id=b.id,this.settings=b.settings,this.styles=b.styles,this.hooks=b.hooks,this.columns=x.columns,this.head=x.head,this.body=x.body,this.foot=x.foot}return y.prototype.getHeadHeight=function(b){return this.head.reduce(function(x,_){return x+_.getMaxCellHeight(b)},0)},y.prototype.getFootHeight=function(b){return this.foot.reduce(function(x,_){return x+_.getMaxCellHeight(b)},0)},y.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},y.prototype.callCellHooks=function(b,x,_,T,C,L){for(var k=0,M=x;k<M.length;k++){var D=M[k],I=new d.CellHookData(b,this,_,T,C,L),R=D(I)===!1;if(_.text=Array.isArray(_.text)?_.text:[_.text],R)return!1}return!0},y.prototype.callEndPageHooks=function(b,x){b.applyStyles(b.userStyles);for(var _=0,T=this.hooks.didDrawPage;_<T.length;_++){var C=T[_];C(new d.HookData(b,this,x))}},y.prototype.callWillDrawPageHooks=function(b,x){for(var _=0,T=this.hooks.willDrawPage;_<T.length;_++){var C=T[_];C(new d.HookData(b,this,x))}},y.prototype.getWidth=function(b){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var x=this.columns.reduce(function(T,C){return T+C.wrappedWidth},0);return x}else{var _=this.settings.margin;return b-_.left-_.right}},y}();l.Table=f;var p=function(){function y(b,x,_,T,C){C===void 0&&(C=!1),this.height=0,this.raw=b,b instanceof u.HtmlRowInput&&(this.raw=b._element,this.element=b._element),this.index=x,this.section=_,this.cells=T,this.spansMultiplePages=C}return y.prototype.getMaxCellHeight=function(b){var x=this;return b.reduce(function(_,T){var C;return Math.max(_,((C=x.cells[T.index])===null||C===void 0?void 0:C.height)||0)},0)},y.prototype.hasRowSpan=function(b){var x=this;return b.filter(function(_){var T=x.cells[_.index];return T?T.rowSpan>1:!1}).length>0},y.prototype.canEntireRowFit=function(b,x){return this.getMaxCellHeight(x)<=b},y.prototype.getMinimumRowHeight=function(b,x){var _=this;return b.reduce(function(T,C){var L=_.cells[C.index];if(!L)return 0;var k=x.getLineHeight(L.styles.fontSize),M=L.padding("vertical"),D=M+k;return D>T?D:T},0)},y}();l.Row=p;var m=function(){function y(b,x,_){var T,C;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=x,this.section=_,this.raw=b;var L=b;b!=null&&typeof b=="object"&&!Array.isArray(b)?(this.rowSpan=b.rowSpan||1,this.colSpan=b.colSpan||1,L=(C=(T=b.content)!==null&&T!==void 0?T:b.title)!==null&&C!==void 0?C:b,b._element&&(this.raw=b._element)):(this.rowSpan=1,this.colSpan=1);var k=L!=null?""+L:"",M=/\r\n|\r|\n/g;this.text=k.split(M)}return y.prototype.getTextPos=function(){var b;if(this.styles.valign==="top")b=this.y+this.padding("top");else if(this.styles.valign==="bottom")b=this.y+this.height-this.padding("bottom");else{var x=this.height-this.padding("vertical");b=this.y+x/2+this.padding("top")}var _;if(this.styles.halign==="right")_=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var T=this.width-this.padding("horizontal");_=this.x+T/2+this.padding("left")}else _=this.x+this.padding("left");return{x:_,y:b}},y.prototype.getContentHeight=function(b,x){x===void 0&&(x=1.15);var _=Array.isArray(this.text)?this.text.length:1,T=this.styles.fontSize/b*x,C=_*T+this.padding("vertical");return Math.max(C,this.styles.minCellHeight)},y.prototype.padding=function(b){var x=(0,h.parseSpacing)(this.styles.cellPadding,0);return b==="vertical"?x.top+x.bottom:b==="horizontal"?x.left+x.right:x[b]},y}();l.Cell=m;var v=function(){function y(b,x,_){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=b,this.raw=x,this.index=_}return y.prototype.getMaxCustomCellWidth=function(b){for(var x=0,_=0,T=b.allRows();_<T.length;_++){var C=T[_],L=C.cells[this.index];L&&typeof L.styles.cellWidth=="number"&&(x=Math.max(x,L.styles.cellWidth))}return x},y}();l.Column=v},356:function(o,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(u,d,h,f,p){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var m=Object(u),v=1;v<arguments.length;v++){var y=arguments[v];if(y!=null)for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])}return m}l.assign=c},972:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var u=c(744),d=c(260),h=c(324),f=c(796),p=c(356);function m(C,L){var k=new u.DocHandler(C),M=v(L,k.scaleFactor()),D=new d.Table(L,M);return(0,h.calculateWidths)(k,D),k.applyStyles(k.userStyles),D}l.createTable=m;function v(C,L){var k=C.content,M=_(k.columns);if(k.head.length===0){var D=b(M,"head");D&&k.head.push(D)}if(k.foot.length===0){var D=b(M,"foot");D&&k.foot.push(D)}var I=C.settings.theme,R=C.styles;return{columns:M,head:y("head",k.head,M,R,I,L),body:y("body",k.body,M,R,I,L),foot:y("foot",k.foot,M,R,I,L)}}function y(C,L,k,M,D,I){var R={},q=L.map(function(Y,ee){for(var j=0,z={},B=0,U=0,Q=0,re=k;Q<re.length;Q++){var N=re[Q];if(R[N.index]==null||R[N.index].left===0)if(U===0){var W=void 0;Array.isArray(Y)?W=Y[N.index-B-j]:W=Y[N.dataKey];var K={};typeof W=="object"&&!Array.isArray(W)&&(K=(W==null?void 0:W.styles)||{});var Z=T(C,N,ee,D,M,I,K),te=new d.Cell(W,Z,C);z[N.dataKey]=te,z[N.index]=te,U=te.colSpan-1,R[N.index]={left:te.rowSpan-1,times:U}}else U--,B++;else R[N.index].left--,U=R[N.index].times,j++}return new d.Row(Y,ee,C,z)});return q}function b(C,L){var k={};return C.forEach(function(M){if(M.raw!=null){var D=x(L,M.raw);D!=null&&(k[M.dataKey]=D)}}),Object.keys(k).length>0?k:null}function x(C,L){if(C==="head"){if(typeof L=="object")return L.header||L.title||null;if(typeof L=="string"||typeof L=="number")return L}else if(C==="foot"&&typeof L=="object")return L.footer;return null}function _(C){return C.map(function(L,k){var M,D,I;return typeof L=="object"?I=(D=(M=L.dataKey)!==null&&M!==void 0?M:L.key)!==null&&D!==void 0?D:k:I=k,new d.Column(I,L,k)})}function T(C,L,k,M,D,I,R){var q=(0,f.getTheme)(M),Y;C==="head"?Y=D.headStyles:C==="body"?Y=D.bodyStyles:C==="foot"&&(Y=D.footStyles);var ee=(0,p.assign)({},q.table,q[C],D.styles,Y),j=D.columnStyles[L.dataKey]||D.columnStyles[L.index]||{},z=C==="body"?j:{},B=C==="body"&&k%2===0?(0,p.assign)({},q.alternateRow,D.alternateRowStyles):{},U=(0,f.defaultStyles)(I),Q=(0,p.assign)({},U,ee,B,z);return(0,p.assign)(Q,R)}},664:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var u=c(420),d=c(260),h=c(744),f=c(356),p=c(136),m=c(224);function v(j,z){var B=z.settings,U=B.startY,Q=B.margin,re={x:Q.left,y:U},N=z.getHeadHeight(z.columns)+z.getFootHeight(z.columns),W=U+Q.bottom+N;if(B.pageBreak==="avoid"){var K=z.body,Z=K.reduce(function(de,ge){return de+ge.height},0);W+=Z}var te=new h.DocHandler(j);(B.pageBreak==="always"||B.startY!=null&&W>te.pageSize().height)&&(ee(te),re.y=Q.top),z.callWillDrawPageHooks(te,re);var oe=(0,f.assign)({},re);z.startPageNumber=te.pageNumber(),B.horizontalPageBreak?y(te,z,oe,re):(te.applyStyles(te.userStyles),(B.showHead==="firstPage"||B.showHead==="everyPage")&&z.head.forEach(function(de){return D(te,z,de,re,z.columns)}),te.applyStyles(te.userStyles),z.body.forEach(function(de,ge){var De=ge===z.body.length-1;M(te,z,de,De,oe,re,z.columns)}),te.applyStyles(te.userStyles),(B.showFoot==="lastPage"||B.showFoot==="everyPage")&&z.foot.forEach(function(de){return D(te,z,de,re,z.columns)})),(0,u.addTableBorder)(te,z,oe,re),z.callEndPageHooks(te,re),z.finalY=re.y,j.lastAutoTable=z,j.previousAutoTable=z,j.autoTable&&(j.autoTable.previous=z),te.applyStyles(te.userStyles)}l.drawTable=v;function y(j,z,B,U){var Q=(0,m.calculateAllColumnsCanFitInPage)(j,z),re=z.settings;if(re.horizontalPageBreakBehaviour==="afterAllRows")Q.forEach(function(Z,te){j.applyStyles(j.userStyles),te>0?Y(j,z,B,U,Z.columns,!0):b(j,z,U,Z.columns),x(j,z,B,U,Z.columns),T(j,z,U,Z.columns)});else for(var N=-1,W=Q[0],K=function(){var Z=N;if(W){j.applyStyles(j.userStyles);var te=W.columns;N>=0?Y(j,z,B,U,te,!0):b(j,z,U,te),Z=_(j,z,N+1,U,te),T(j,z,U,te)}var oe=Z-N;Q.slice(1).forEach(function(de){j.applyStyles(j.userStyles),Y(j,z,B,U,de.columns,!0),_(j,z,N+1,U,de.columns,oe),T(j,z,U,de.columns)}),N=Z};N<z.body.length-1;)K()}function b(j,z,B,U){var Q=z.settings;j.applyStyles(j.userStyles),(Q.showHead==="firstPage"||Q.showHead==="everyPage")&&z.head.forEach(function(re){return D(j,z,re,B,U)})}function x(j,z,B,U,Q){j.applyStyles(j.userStyles),z.body.forEach(function(re,N){var W=N===z.body.length-1;M(j,z,re,W,B,U,Q)})}function _(j,z,B,U,Q,re){j.applyStyles(j.userStyles),re=re??z.body.length;var N=Math.min(B+re,z.body.length),W=-1;return z.body.slice(B,N).forEach(function(K,Z){var te=B+Z===z.body.length-1,oe=q(j,z,te,U);K.canEntireRowFit(oe,Q)&&(D(j,z,K,U,Q),W=B+Z)}),W}function T(j,z,B,U){var Q=z.settings;j.applyStyles(j.userStyles),(Q.showFoot==="lastPage"||Q.showFoot==="everyPage")&&z.foot.forEach(function(re){return D(j,z,re,B,U)})}function C(j,z,B){var U=B.getLineHeight(j.styles.fontSize),Q=j.padding("vertical"),re=Math.floor((z-Q)/U);return Math.max(0,re)}function L(j,z,B,U){var Q={};j.spansMultiplePages=!0,j.height=0;for(var re=0,N=0,W=B.columns;N<W.length;N++){var K=W[N],Z=j.cells[K.index];if(Z){Array.isArray(Z.text)||(Z.text=[Z.text]);var te=new d.Cell(Z.raw,Z.styles,Z.section);te=(0,f.assign)(te,Z),te.text=[];var oe=C(Z,z,U);Z.text.length>oe&&(te.text=Z.text.splice(oe,Z.text.length));var de=U.scaleFactor(),ge=U.getLineHeightFactor();Z.contentHeight=Z.getContentHeight(de,ge),Z.contentHeight>=z&&(Z.contentHeight=z,te.styles.minCellHeight-=z),Z.contentHeight>j.height&&(j.height=Z.contentHeight),te.contentHeight=te.getContentHeight(de,ge),te.contentHeight>re&&(re=te.contentHeight),Q[K.index]=te}}var De=new d.Row(j.raw,-1,j.section,Q,!0);De.height=re;for(var Re=0,Ce=B.columns;Re<Ce.length;Re++){var K=Ce[Re],te=De.cells[K.index];te&&(te.height=De.height);var Z=j.cells[K.index];Z&&(Z.height=j.height)}return De}function k(j,z,B,U){var Q=j.pageSize().height,re=U.settings.margin,N=re.top+re.bottom,W=Q-N;z.section==="body"&&(W-=U.getHeadHeight(U.columns)+U.getFootHeight(U.columns));var K=z.getMinimumRowHeight(U.columns,j),Z=K<B;if(K>W)return console.error("Will not be able to print row ".concat(z.index," correctly since it's minimum height is larger than page height")),!0;if(!Z)return!1;var te=z.hasRowSpan(U.columns),oe=z.getMaxCellHeight(U.columns)>W;return oe?(te&&console.error("The content of row ".concat(z.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(te||U.settings.rowPageBreak==="avoid")}function M(j,z,B,U,Q,re,N){var W=q(j,z,U,re);if(B.canEntireRowFit(W,N))D(j,z,B,re,N);else if(k(j,B,W,z)){var K=L(B,W,z,j);D(j,z,B,re,N),Y(j,z,Q,re,N),M(j,z,K,U,Q,re,N)}else Y(j,z,Q,re,N),M(j,z,B,U,Q,re,N)}function D(j,z,B,U,Q){U.x=z.settings.margin.left;for(var re=0,N=Q;re<N.length;re++){var W=N[re],K=B.cells[W.index];if(!K){U.x+=W.width;continue}j.applyStyles(K.styles),K.x=U.x,K.y=U.y;var Z=z.callCellHooks(j,z.hooks.willDrawCell,K,B,W,U);if(Z===!1){U.x+=W.width;continue}I(j,K,U);var te=K.getTextPos();(0,p.default)(K.text,te.x,te.y,{halign:K.styles.halign,valign:K.styles.valign,maxWidth:Math.ceil(K.width-K.padding("left")-K.padding("right"))},j.getDocument()),z.callCellHooks(j,z.hooks.didDrawCell,K,B,W,U),U.x+=W.width}U.y+=B.height}function I(j,z,B){var U=z.styles;if(j.getDocument().setFillColor(j.getDocument().getFillColor()),typeof U.lineWidth=="number"){var Q=(0,u.getFillStyle)(U.lineWidth,U.fillColor);Q&&j.rect(z.x,B.y,z.width,z.height,Q)}else typeof U.lineWidth=="object"&&(U.fillColor&&j.rect(z.x,B.y,z.width,z.height,"F"),R(j,z,B,U.lineWidth))}function R(j,z,B,U){var Q,re,N,W;U.top&&(Q=B.x,re=B.y,N=B.x+z.width,W=B.y,U.right&&(N+=.5*U.right),U.left&&(Q-=.5*U.left),K(U.top,Q,re,N,W)),U.bottom&&(Q=B.x,re=B.y+z.height,N=B.x+z.width,W=B.y+z.height,U.right&&(N+=.5*U.right),U.left&&(Q-=.5*U.left),K(U.bottom,Q,re,N,W)),U.left&&(Q=B.x,re=B.y,N=B.x,W=B.y+z.height,U.top&&(re-=.5*U.top),U.bottom&&(W+=.5*U.bottom),K(U.left,Q,re,N,W)),U.right&&(Q=B.x+z.width,re=B.y,N=B.x+z.width,W=B.y+z.height,U.top&&(re-=.5*U.top),U.bottom&&(W+=.5*U.bottom),K(U.right,Q,re,N,W));function K(Z,te,oe,de,ge){j.getDocument().setLineWidth(Z),j.getDocument().line(te,oe,de,ge,"S")}}function q(j,z,B,U){var Q=z.settings.margin.bottom,re=z.settings.showFoot;return(re==="everyPage"||re==="lastPage"&&B)&&(Q+=z.getFootHeight(z.columns)),j.pageSize().height-U.y-Q}function Y(j,z,B,U,Q,re){Q===void 0&&(Q=[]),re===void 0&&(re=!1),j.applyStyles(j.userStyles),z.settings.showFoot==="everyPage"&&!re&&z.foot.forEach(function(W){return D(j,z,W,U,Q)}),z.callEndPageHooks(j,U);var N=z.settings.margin;(0,u.addTableBorder)(j,z,B,U),ee(j),z.pageNumber++,z.pageCount++,U.x=N.left,U.y=N.top,B.y=N.top,z.callWillDrawPageHooks(j,U),z.settings.showHead==="everyPage"&&(z.head.forEach(function(W){return D(j,z,W,U,Q)}),j.applyStyles(j.userStyles))}l.addPage=Y;function ee(j){var z=j.pageNumber();j.setPage(z+1);var B=j.pageNumber();return B===z?(j.addPage(),!0):!1}},224:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var u=c(420);function d(f,p,m){var v;m===void 0&&(m={});var y=(0,u.getPageAvailableWidth)(f,p),b=new Map,x=[],_=[],T=[];p.settings.horizontalPageBreakRepeat,Array.isArray(p.settings.horizontalPageBreakRepeat)?T=p.settings.horizontalPageBreakRepeat:(typeof p.settings.horizontalPageBreakRepeat=="string"||typeof p.settings.horizontalPageBreakRepeat=="number")&&(T=[p.settings.horizontalPageBreakRepeat]),T.forEach(function(M){var D=p.columns.find(function(I){return I.dataKey===M||I.index===M});D&&!b.has(D.index)&&(b.set(D.index,!0),x.push(D.index),_.push(p.columns[D.index]),y-=D.wrappedWidth)});for(var C=!0,L=(v=m==null?void 0:m.start)!==null&&v!==void 0?v:0;L<p.columns.length;){if(b.has(L)){L++;continue}var k=p.columns[L].wrappedWidth;if(C||y>=k)C=!1,x.push(L),_.push(p.columns[L]),y-=k;else break;L++}return{colIndexes:x,columns:_,lastIndex:L-1}}function h(f,p){for(var m=[],v=0;v<p.columns.length;v++){var y=d(f,p,{start:v});y.columns.length&&(m.push(y),v=y.lastIndex)}return m}l.calculateAllColumnsCanFitInPage=h},324:function(o,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var u=c(420);function d(x,_){h(x,_);var T=[],C=0;_.columns.forEach(function(k){var M=k.getMaxCustomCellWidth(_);M?k.width=M:(k.width=k.wrappedWidth,T.push(k)),C+=k.width});var L=_.getWidth(x.pageSize().width)-C;L&&(L=f(T,L,function(k){return Math.max(k.minReadableWidth,k.minWidth)})),L&&(L=f(T,L,function(k){return k.minWidth})),L=Math.abs(L),!_.settings.horizontalPageBreak&&L>.1/x.scaleFactor()&&(L=L<1?L:Math.round(L),console.warn("Of the table content, ".concat(L," units width could not fit page"))),m(_),v(_,x),p(_)}l.calculateWidths=d;function h(x,_){var T=x.scaleFactor(),C=_.settings.horizontalPageBreak,L=(0,u.getPageAvailableWidth)(x,_);_.allRows().forEach(function(k){for(var M=0,D=_.columns;M<D.length;M++){var I=D[M],R=k.cells[I.index];if(R){var q=_.hooks.didParseCell;_.callCellHooks(x,q,R,k,I,null);var Y=R.padding("horizontal");R.contentWidth=(0,u.getStringWidth)(R.text,R.styles,x)+Y;var ee=(0,u.getStringWidth)(R.text.join(" ").split(/[^\S\u00A0]+/),R.styles,x);if(R.minReadableWidth=ee+R.padding("horizontal"),typeof R.styles.cellWidth=="number")R.minWidth=R.styles.cellWidth,R.wrappedWidth=R.styles.cellWidth;else if(R.styles.cellWidth==="wrap"||C===!0)R.contentWidth>L?(R.minWidth=L,R.wrappedWidth=L):(R.minWidth=R.contentWidth,R.wrappedWidth=R.contentWidth);else{var j=10/T;R.minWidth=R.styles.minCellWidth||j,R.wrappedWidth=R.contentWidth,R.minWidth>R.wrappedWidth&&(R.wrappedWidth=R.minWidth)}}}}),_.allRows().forEach(function(k){for(var M=0,D=_.columns;M<D.length;M++){var I=D[M],R=k.cells[I.index];if(R&&R.colSpan===1)I.wrappedWidth=Math.max(I.wrappedWidth,R.wrappedWidth),I.minWidth=Math.max(I.minWidth,R.minWidth),I.minReadableWidth=Math.max(I.minReadableWidth,R.minReadableWidth);else{var q=_.styles.columnStyles[I.dataKey]||_.styles.columnStyles[I.index]||{},Y=q.cellWidth||q.minCellWidth;Y&&typeof Y=="number"&&(I.minWidth=Y,I.wrappedWidth=Y)}R&&(R.colSpan>1&&!I.minWidth&&(I.minWidth=R.minWidth),R.colSpan>1&&!I.wrappedWidth&&(I.wrappedWidth=R.minWidth))}})}function f(x,_,T){for(var C=_,L=x.reduce(function(j,z){return j+z.wrappedWidth},0),k=0;k<x.length;k++){var M=x[k],D=M.wrappedWidth/L,I=C*D,R=M.width+I,q=T(M),Y=R<q?q:R;_-=Y-M.width,M.width=Y}if(_=Math.round(_*1e10)/1e10,_){var ee=x.filter(function(j){return _<0?j.width>T(j):!0});ee.length&&(_=f(ee,_,T))}return _}l.resizeColumns=f;function p(x){for(var _={},T=1,C=x.allRows(),L=0;L<C.length;L++)for(var k=C[L],M=0,D=x.columns;M<D.length;M++){var I=D[M],R=_[I.index];if(T>1)T--,delete k.cells[I.index];else if(R)R.cell.height+=k.height,T=R.cell.colSpan,delete k.cells[I.index],R.left--,R.left<=1&&delete _[I.index];else{var q=k.cells[I.index];if(!q)continue;if(q.height=k.height,q.rowSpan>1){var Y=C.length-L,ee=q.rowSpan>Y?Y:q.rowSpan;_[I.index]={cell:q,left:ee,row:k}}}}}function m(x){for(var _=x.allRows(),T=0;T<_.length;T++)for(var C=_[T],L=null,k=0,M=0,D=0;D<x.columns.length;D++){var I=x.columns[D];if(M-=1,M>1&&x.columns[D+1])k+=I.width,delete C.cells[I.index];else if(L){var R=L;delete C.cells[I.index],L=null,R.width=I.width+k}else{var R=C.cells[I.index];if(!R)continue;if(M=R.colSpan,k=0,R.colSpan>1){L=R,k+=I.width;continue}R.width=I.width+k}}}function v(x,_){for(var T={count:0,height:0},C=0,L=x.allRows();C<L.length;C++){for(var k=L[C],M=0,D=x.columns;M<D.length;M++){var I=D[M],R=k.cells[I.index];if(R){_.applyStyles(R.styles,!0);var q=R.width-R.padding("horizontal");if(R.styles.overflow==="linebreak")R.text=_.splitTextToSize(R.text,q+1/_.scaleFactor(),{fontSize:R.styles.fontSize});else if(R.styles.overflow==="ellipsize")R.text=y(R.text,q,R.styles,_,"...");else if(R.styles.overflow==="hidden")R.text=y(R.text,q,R.styles,_,"");else if(typeof R.styles.overflow=="function"){var Y=R.styles.overflow(R.text,q);typeof Y=="string"?R.text=[Y]:R.text=Y}R.contentHeight=R.getContentHeight(_.scaleFactor(),_.getLineHeightFactor());var ee=R.contentHeight/R.rowSpan;R.rowSpan>1&&T.count*T.height<ee*R.rowSpan?T={height:ee,count:R.rowSpan}:T&&T.count>0&&T.height>ee&&(ee=T.height),ee>k.height&&(k.height=ee)}}T.count--}}function y(x,_,T,C,L){return x.map(function(k){return b(k,_,T,C,L)})}l.ellipsize=y;function b(x,_,T,C,L){var k=1e4*C.scaleFactor();if(_=Math.ceil(_*k)/k,_>=(0,u.getStringWidth)(x,T,C))return x;for(;_<(0,u.getStringWidth)(x+L,T,C)&&!(x.length<=1);)x=x.substring(0,x.length-1);return x.trim()+L}},964:function(o){if(typeof t>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}o.exports=t}},s={};function r(o){var l=s[o];if(l!==void 0)return l.exports;var c=s[o]={exports:{}};return i[o].call(c.exports,c,c.exports,r),c.exports}var a={};return function(){var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=o.Column=o.Row=o.Table=o.CellHookData=o.__drawTable=o.__createTable=o.applyPlugin=void 0;var l=r(340),c=r(776),u=r(664),d=r(972),h=r(260);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return h.Table}});var f=r(172);Object.defineProperty(o,"CellHookData",{enumerable:!0,get:function(){return f.CellHookData}});var p=r(260);Object.defineProperty(o,"Cell",{enumerable:!0,get:function(){return p.Cell}}),Object.defineProperty(o,"Column",{enumerable:!0,get:function(){return p.Column}}),Object.defineProperty(o,"Row",{enumerable:!0,get:function(){return p.Row}});function m(_){(0,l.default)(_)}o.applyPlugin=m;function v(_,T){var C=(0,c.parseInput)(_,T),L=(0,d.createTable)(_,C);(0,u.drawTable)(_,L)}function y(_,T){var C=(0,c.parseInput)(_,T);return(0,d.createTable)(_,C)}o.__createTable=y;function b(_,T){(0,u.drawTable)(_,T)}o.__drawTable=b;try{var x=r(964);x.jsPDF&&(x=x.jsPDF),m(x)}catch{}o.default=v}(),a}()})})(FP);var Vz=FP.exports;const cm=_p(Vz);Xd.register(...OH);function Gz({tasks:n}){const[e,t]=O.useState(new Date),[i,s]=O.useState([]),[r,a]=O.useState(null);console.log("calendar tasks: ",n);const o=new Date,l=()=>{t(x=>new Date(x.getFullYear(),x.getMonth()-1,1))},c=()=>{t(x=>new Date(x.getFullYear(),x.getMonth()+1,1))},u=()=>{t(new Date)},d=e.toLocaleString("default",{month:"long",year:"numeric"}),h=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;O.useEffect(()=>{f(e)},[e,n,r]);const f=x=>{const _=x.getFullYear(),T=x.getMonth(),C=new Date(_,T,1),L=new Date(_,T+1,0),k=C.getDay()||7,M=L.getDate(),D=new Date(_,T-1),I=new Date(D.getFullYear(),D.getMonth()+1,0).getDate(),R=42,q=[];for(let ee=k-1;ee>0;ee--){const j=new Date(_,T-1,I-ee+1);q.push({date:v(j),events:p(v(j)),isCurrentMonth:!1,isToday:m(j,o),isSelected:r===v(j)})}for(let ee=1;ee<=M;ee++){const j=new Date(_,T,ee);q.push({date:v(j),events:p(v(j)),isCurrentMonth:!0,isToday:m(j,o),isSelected:r===v(j)})}let Y=1;for(;q.length<R;){const ee=new Date(_,T+1,Y++);q.push({date:v(ee),events:p(v(ee)),isCurrentMonth:!1,isToday:m(ee,o),isSelected:r===v(ee)})}s(q)},p=x=>n.filter(_=>_.Date.startsWith(x)).map(_=>({id:_._id,datetime:_.Date})),m=(x,_)=>x.getFullYear()===_.getFullYear()&&x.getMonth()===_.getMonth()&&x.getDate()===_.getDate(),v=x=>`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}-${String(x.getDate()).padStart(2,"0")}`,y=r?n.filter(x=>x.Date.startsWith(r)):[],b=x=>{window.open(x,"_blank")};return S.jsxs("div",{className:"d-lg-flex h-100 flex-column",children:[r&&S.jsxs("div",{className:"mt-4 p-3 bg-white rounded shadow-sm",children:[S.jsxs("h3",{className:"h6 fw-semibold text-dark mb-3",children:["Report for ",r]}),y.map(x=>(new Date(x.Date),S.jsxs("div",{className:"d-flex flex-md-row flex-column justify-content-between align-items-center border p-2 rounded mb-2 bg-light",children:[S.jsxs("span",{className:"fw-medium",children:["Date: ",x.Date]}),S.jsxs("span",{className:"fw-medium",children:["Total:$",x.Total]}),x.Report?S.jsx("button",{className:"btn text-secondary",onClick:()=>b(x.Report),children:"Open Report"}):"No Report"]},x._id)))]}),S.jsxs("header",{className:"d-flex align-items-center justify-content-between border-bottom px-4 py-3",children:[S.jsx("h1",{className:"h5 fw-semibold text-dark mb-0",children:S.jsx("time",{dateTime:h,children:d})}),S.jsx("div",{className:"d-flex align-items-center",children:S.jsxs("div",{className:"d-flex align-items-center bg-white shadow-sm rounded border",children:[S.jsx("button",{type:"button",onClick:l,className:"btn btn-light border-end rounded-start",children:S.jsx("i",{className:"bi bi-chevron-left"})}),S.jsx("button",{type:"button",onClick:u,className:"btn btn-light d-none d-md-block border-start border-end",children:"Today"}),S.jsx("button",{type:"button",onClick:c,className:"btn btn-light border-start rounded-end",children:S.jsx("i",{className:"bi bi-chevron-right"})})]})})]}),S.jsxs("div",{className:"shadow border",children:[S.jsx("div",{className:"text-center border-bottom fw-semibold text-muted d-flex flex-row w-100",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(x=>S.jsx("div",{className:"py-2 border-end w-100",children:x},x))}),S.jsx("div",{className:"d-none d-md-flex flex-wrap",children:i.map(x=>S.jsxs("div",{onClick:()=>a(x.date),className:`position-relative p-2 border ${x.isCurrentMonth,x.isSelected&&"bg-dark text-white"}`,style:{cursor:"pointer",minHeight:"80px",border:x.isSelected?"2px solid #0d6efd":"",borderRadius:x.isSelected?"0.25rem":"",backgroundColor:x.isSelected?"#0d6efd":"",color:x.isSelected?"white":"",width:"14.28%"},children:[S.jsx("time",{dateTime:x.date,className:`d-flex justify-content-center align-items-center rounded-circle ${x.isToday?"bg-primary text-white fw-bold":""}`,style:{width:"24px",height:"24px",marginBottom:"5px"},children:parseInt(x.date.split("-")[2])}),x.events.length>0&&S.jsxs("ul",{className:"list-unstyled mt-2 mb-0",children:[x.events.slice(0,2).map(_=>S.jsx("li",{className:"text-truncate small fw-medium text-dark",children:_.Date},_._id)),x.events.length>2&&S.jsxs("li",{className:"text-muted small",children:["+ ",x.events.length-2," more"]})]}),S.jsx("div",{className:"d-flex flex-wrap-reverse mt-auto",children:x.events.map(_=>S.jsx("span",{className:"me-1 mb-1 rounded-circle bg-secondary",style:{width:"6px",height:"6px"}},_.id))})]},x.date))}),S.jsx("div",{className:"d-lg-none",style:{display:"grid",gridTemplateColumns:"repeat(7, minmax(0, 1fr))",width:"80vw",gap:"4px",padding:"0 8px"},children:i.map(x=>S.jsxs("button",{onClick:()=>a(x.date),type:"button",className:`btn p-2 d-flex flex-column align-items-start ${x.isSelected?"text-white bg-dark":x.isToday?"text-primary fw-semibold":x.isCurrentMonth?"text-dark":"text-muted"}`,style:{cursor:"pointer",minHeight:"80px",border:x.isSelected?"2px solid #0d6efd":"",borderRadius:x.isSelected?"0.25rem":"",backgroundColor:x.isSelected?"#0d6efd":"",color:x.isSelected?"white":"",height:"90px",width:"100%"},children:[S.jsx("time",{className:`${x.isSelected?"bg-dark rounded-circle d-flex justify-content-center align-items-center text-white":""}`,children:parseInt(x.date.split("-")[2])}),S.jsxs("span",{className:"visually-hidden",children:[x.events.length," events"]}),x.events.length>0&&S.jsx("div",{className:"d-flex flex-wrap-reverse mt-auto",children:x.events.map(_=>S.jsx("span",{className:"me-1 mb-1 rounded-circle bg-secondary",style:{width:"6px",height:"6px"}},_.id))})]},x.date))})]})]})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var jP;function et(){return jP.apply(null,arguments)}function Yz(n){jP=n}function va(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function eu(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function pn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function aw(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if(pn(n,e))return!1;return!0}function Js(n){return n===void 0}function Vo(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function Fp(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function BP(n,e){var t=[],i,s=n.length;for(i=0;i<s;++i)t.push(e(n[i],i));return t}function Dl(n,e){for(var t in e)pn(e,t)&&(n[t]=e[t]);return pn(e,"toString")&&(n.toString=e.toString),pn(e,"valueOf")&&(n.valueOf=e.valueOf),n}function Ja(n,e,t,i){return lN(n,e,t,i,!0).utc()}function qz(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Wt(n){return n._pf==null&&(n._pf=qz()),n._pf}var r2;Array.prototype.some?r2=Array.prototype.some:r2=function(n){var e=Object(this),t=e.length>>>0,i;for(i=0;i<t;i++)if(i in e&&n.call(this,e[i],i,e))return!0;return!1};function ow(n){var e=null,t=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(e=Wt(n),t=r2.call(e.parsedDateParts,function(s){return s!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),n._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function qy(n){var e=Ja(NaN);return n!=null?Dl(Wt(e),n):Wt(e).userInvalidated=!0,e}var cA=et.momentProperties=[],G1=!1;function lw(n,e){var t,i,s,r=cA.length;if(Js(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),Js(e._i)||(n._i=e._i),Js(e._f)||(n._f=e._f),Js(e._l)||(n._l=e._l),Js(e._strict)||(n._strict=e._strict),Js(e._tzm)||(n._tzm=e._tzm),Js(e._isUTC)||(n._isUTC=e._isUTC),Js(e._offset)||(n._offset=e._offset),Js(e._pf)||(n._pf=Wt(e)),Js(e._locale)||(n._locale=e._locale),r>0)for(t=0;t<r;t++)i=cA[t],s=e[i],Js(s)||(n[i]=s);return n}function jp(n){lw(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),G1===!1&&(G1=!0,et.updateOffset(this),G1=!1)}function xa(n){return n instanceof jp||n!=null&&n._isAMomentObject!=null}function UP(n){et.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function qr(n,e){var t=!0;return Dl(function(){if(et.deprecationHandler!=null&&et.deprecationHandler(null,n),t){var i=[],s,r,a,o=arguments.length;for(r=0;r<o;r++){if(s="",typeof arguments[r]=="object"){s+=`
[`+r+"] ";for(a in arguments[0])pn(arguments[0],a)&&(s+=a+": "+arguments[0][a]+", ");s=s.slice(0,-2)}else s=arguments[r];i.push(s)}UP(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var uA={};function $P(n,e){et.deprecationHandler!=null&&et.deprecationHandler(n,e),uA[n]||(UP(e),uA[n]=!0)}et.suppressDeprecationWarnings=!1;et.deprecationHandler=null;function Za(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function Kz(n){var e,t;for(t in n)pn(n,t)&&(e=n[t],Za(e)?this[t]=e:this["_"+t]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function a2(n,e){var t=Dl({},n),i;for(i in e)pn(e,i)&&(eu(n[i])&&eu(e[i])?(t[i]={},Dl(t[i],n[i]),Dl(t[i],e[i])):e[i]!=null?t[i]=e[i]:delete t[i]);for(i in n)pn(n,i)&&!pn(e,i)&&eu(n[i])&&(t[i]=Dl({},t[i]));return t}function cw(n){n!=null&&this.set(n)}var o2;Object.keys?o2=Object.keys:o2=function(n){var e,t=[];for(e in n)pn(n,e)&&t.push(e);return t};var Xz={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Qz(n,e,t){var i=this._calendar[n]||this._calendar.sameElse;return Za(i)?i.call(e,t):i}function Ka(n,e,t){var i=""+Math.abs(n),s=e-i.length,r=n>=0;return(r?t?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var uw=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,um=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Y1={},_d={};function vt(n,e,t,i){var s=i;typeof i=="string"&&(s=function(){return this[i]()}),n&&(_d[n]=s),e&&(_d[e[0]]=function(){return Ka(s.apply(this,arguments),e[1],e[2])}),t&&(_d[t]=function(){return this.localeData().ordinal(s.apply(this,arguments),n)})}function Jz(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function Zz(n){var e=n.match(uw),t,i;for(t=0,i=e.length;t<i;t++)_d[e[t]]?e[t]=_d[e[t]]:e[t]=Jz(e[t]);return function(s){var r="",a;for(a=0;a<i;a++)r+=Za(e[a])?e[a].call(s,n):e[a];return r}}function Ym(n,e){return n.isValid()?(e=HP(e,n.localeData()),Y1[e]=Y1[e]||Zz(e),Y1[e](n)):n.localeData().invalidDate()}function HP(n,e){var t=5;function i(s){return e.longDateFormat(s)||s}for(um.lastIndex=0;t>=0&&um.test(n);)n=n.replace(um,i),um.lastIndex=0,t-=1;return n}var eW={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function tW(n){var e=this._longDateFormat[n],t=this._longDateFormat[n.toUpperCase()];return e||!t?e:(this._longDateFormat[n]=t.match(uw).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var nW="Invalid date";function iW(){return this._invalidDate}var sW="%d",rW=/\d{1,2}/;function aW(n){return this._ordinal.replace("%d",n)}var oW={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function lW(n,e,t,i){var s=this._relativeTime[t];return Za(s)?s(n,e,t,i):s.replace(/%d/i,n)}function cW(n,e){var t=this._relativeTime[n>0?"future":"past"];return Za(t)?t(e):t.replace(/%s/i,e)}var dA={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Kr(n){return typeof n=="string"?dA[n]||dA[n.toLowerCase()]:void 0}function dw(n){var e={},t,i;for(i in n)pn(n,i)&&(t=Kr(i),t&&(e[t]=n[i]));return e}var uW={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function dW(n){var e=[],t;for(t in n)pn(n,t)&&e.push({unit:t,priority:uW[t]});return e.sort(function(i,s){return i.priority-s.priority}),e}var zP=/\d/,Lr=/\d\d/,WP=/\d{3}/,hw=/\d{4}/,Ky=/[+-]?\d{6}/,Kn=/\d\d?/,VP=/\d\d\d\d?/,GP=/\d\d\d\d\d\d?/,Xy=/\d{1,3}/,fw=/\d{1,4}/,Qy=/[+-]?\d{1,6}/,Qd=/\d+/,Jy=/[+-]?\d+/,hW=/Z|[+-]\d\d:?\d\d/gi,Zy=/Z|[+-]\d\d(?::?\d\d)?/gi,fW=/[+-]?\d+(\.\d{1,3})?/,Bp=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Jd=/^[1-9]\d?/,pw=/^([1-9]\d|\d)/,W0;W0={};function st(n,e,t){W0[n]=Za(e)?e:function(i,s){return i&&t?t:e}}function pW(n,e){return pn(W0,n)?W0[n](e._strict,e._locale):new RegExp(gW(n))}function gW(n){return Fo(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,s,r){return t||i||s||r}))}function Fo(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $r(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function rn(n){var e=+n,t=0;return e!==0&&isFinite(e)&&(t=$r(e)),t}var l2={};function Nn(n,e){var t,i=e,s;for(typeof n=="string"&&(n=[n]),Vo(e)&&(i=function(r,a){a[e]=rn(r)}),s=n.length,t=0;t<s;t++)l2[n[t]]=i}function Up(n,e){Nn(n,function(t,i,s,r){s._w=s._w||{},e(t,s._w,s,r)})}function mW(n,e,t){e!=null&&pn(l2,n)&&l2[n](e,t._a,t,n)}function ev(n){return n%4===0&&n%100!==0||n%400===0}var Is=0,Po=1,Ua=2,Ki=3,ha=4,No=5,zc=6,yW=7,vW=8;vt("Y",0,0,function(){var n=this.year();return n<=9999?Ka(n,4):"+"+n});vt(0,["YY",2],0,function(){return this.year()%100});vt(0,["YYYY",4],0,"year");vt(0,["YYYYY",5],0,"year");vt(0,["YYYYYY",6,!0],0,"year");st("Y",Jy);st("YY",Kn,Lr);st("YYYY",fw,hw);st("YYYYY",Qy,Ky);st("YYYYYY",Qy,Ky);Nn(["YYYYY","YYYYYY"],Is);Nn("YYYY",function(n,e){e[Is]=n.length===2?et.parseTwoDigitYear(n):rn(n)});Nn("YY",function(n,e){e[Is]=et.parseTwoDigitYear(n)});Nn("Y",function(n,e){e[Is]=parseInt(n,10)});function Cf(n){return ev(n)?366:365}et.parseTwoDigitYear=function(n){return rn(n)+(rn(n)>68?1900:2e3)};var YP=Zd("FullYear",!0);function xW(){return ev(this.year())}function Zd(n,e){return function(t){return t!=null?(qP(this,n,t),et.updateOffset(this,e),this):dp(this,n)}}function dp(n,e){if(!n.isValid())return NaN;var t=n._d,i=n._isUTC;switch(e){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function qP(n,e,t){var i,s,r,a,o;if(!(!n.isValid()||isNaN(t))){switch(i=n._d,s=n._isUTC,e){case"Milliseconds":return void(s?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(s?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(s?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(s?i.setUTCHours(t):i.setHours(t));case"Date":return void(s?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}r=t,a=n.month(),o=n.date(),o=o===29&&a===1&&!ev(r)?28:o,s?i.setUTCFullYear(r,a,o):i.setFullYear(r,a,o)}}function bW(n){return n=Kr(n),Za(this[n])?this[n]():this}function SW(n,e){if(typeof n=="object"){n=dw(n);var t=dW(n),i,s=t.length;for(i=0;i<s;i++)this[t[i].unit](n[t[i].unit])}else if(n=Kr(n),Za(this[n]))return this[n](e);return this}function wW(n,e){return(n%e+e)%e}var Ei;Array.prototype.indexOf?Ei=Array.prototype.indexOf:Ei=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function gw(n,e){if(isNaN(n)||isNaN(e))return NaN;var t=wW(e,12);return n+=(e-t)/12,t===1?ev(n)?29:28:31-t%7%2}vt("M",["MM",2],"Mo",function(){return this.month()+1});vt("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});vt("MMMM",0,0,function(n){return this.localeData().months(this,n)});st("M",Kn,Jd);st("MM",Kn,Lr);st("MMM",function(n,e){return e.monthsShortRegex(n)});st("MMMM",function(n,e){return e.monthsRegex(n)});Nn(["M","MM"],function(n,e){e[Po]=rn(n)-1});Nn(["MMM","MMMM"],function(n,e,t,i){var s=t._locale.monthsParse(n,i,t._strict);s!=null?e[Po]=s:Wt(t).invalidMonth=n});var _W="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),KP="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),XP=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,EW=Bp,TW=Bp;function AW(n,e){return n?va(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||XP).test(e)?"format":"standalone"][n.month()]:va(this._months)?this._months:this._months.standalone}function LW(n,e){return n?va(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[XP.test(e)?"format":"standalone"][n.month()]:va(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function kW(n,e,t){var i,s,r,a=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=Ja([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return t?e==="MMM"?(s=Ei.call(this._shortMonthsParse,a),s!==-1?s:null):(s=Ei.call(this._longMonthsParse,a),s!==-1?s:null):e==="MMM"?(s=Ei.call(this._shortMonthsParse,a),s!==-1?s:(s=Ei.call(this._longMonthsParse,a),s!==-1?s:null)):(s=Ei.call(this._longMonthsParse,a),s!==-1?s:(s=Ei.call(this._shortMonthsParse,a),s!==-1?s:null))}function CW(n,e,t){var i,s,r;if(this._monthsParseExact)return kW.call(this,n,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=Ja([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(t&&e==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!t&&this._monthsParse[i].test(n))return i}}function QP(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=rn(e);else if(e=n.localeData().monthsParse(e),!Vo(e))return n}var t=e,i=n.date();return i=i<29?i:Math.min(i,gw(n.year(),t)),n._isUTC?n._d.setUTCMonth(t,i):n._d.setMonth(t,i),n}function JP(n){return n!=null?(QP(this,n),et.updateOffset(this,!0),this):dp(this,"Month")}function IW(){return gw(this.year(),this.month())}function RW(n){return this._monthsParseExact?(pn(this,"_monthsRegex")||ZP.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(pn(this,"_monthsShortRegex")||(this._monthsShortRegex=EW),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function PW(n){return this._monthsParseExact?(pn(this,"_monthsRegex")||ZP.call(this),n?this._monthsStrictRegex:this._monthsRegex):(pn(this,"_monthsRegex")||(this._monthsRegex=TW),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function ZP(){function n(l,c){return c.length-l.length}var e=[],t=[],i=[],s,r,a,o;for(s=0;s<12;s++)r=Ja([2e3,s]),a=Fo(this.monthsShort(r,"")),o=Fo(this.months(r,"")),e.push(a),t.push(o),i.push(o),i.push(a);e.sort(n),t.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function NW(n,e,t,i,s,r,a){var o;return n<100&&n>=0?(o=new Date(n+400,e,t,i,s,r,a),isFinite(o.getFullYear())&&o.setFullYear(n)):o=new Date(n,e,t,i,s,r,a),o}function hp(n){var e,t;return n<100&&n>=0?(t=Array.prototype.slice.call(arguments),t[0]=n+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function V0(n,e,t){var i=7+e-t,s=(7+hp(n,0,i).getUTCDay()-e)%7;return-s+i-1}function eN(n,e,t,i,s){var r=(7+t-i)%7,a=V0(n,i,s),o=1+7*(e-1)+r+a,l,c;return o<=0?(l=n-1,c=Cf(l)+o):o>Cf(n)?(l=n+1,c=o-Cf(n)):(l=n,c=o),{year:l,dayOfYear:c}}function fp(n,e,t){var i=V0(n.year(),e,t),s=Math.floor((n.dayOfYear()-i-1)/7)+1,r,a;return s<1?(a=n.year()-1,r=s+jo(a,e,t)):s>jo(n.year(),e,t)?(r=s-jo(n.year(),e,t),a=n.year()+1):(a=n.year(),r=s),{week:r,year:a}}function jo(n,e,t){var i=V0(n,e,t),s=V0(n+1,e,t);return(Cf(n)-i+s)/7}vt("w",["ww",2],"wo","week");vt("W",["WW",2],"Wo","isoWeek");st("w",Kn,Jd);st("ww",Kn,Lr);st("W",Kn,Jd);st("WW",Kn,Lr);Up(["w","ww","W","WW"],function(n,e,t,i){e[i.substr(0,1)]=rn(n)});function DW(n){return fp(n,this._week.dow,this._week.doy).week}var OW={dow:0,doy:6};function MW(){return this._week.dow}function FW(){return this._week.doy}function jW(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function BW(n){var e=fp(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}vt("d",0,"do","day");vt("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});vt("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});vt("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});vt("e",0,0,"weekday");vt("E",0,0,"isoWeekday");st("d",Kn);st("e",Kn);st("E",Kn);st("dd",function(n,e){return e.weekdaysMinRegex(n)});st("ddd",function(n,e){return e.weekdaysShortRegex(n)});st("dddd",function(n,e){return e.weekdaysRegex(n)});Up(["dd","ddd","dddd"],function(n,e,t,i){var s=t._locale.weekdaysParse(n,i,t._strict);s!=null?e.d=s:Wt(t).invalidWeekday=n});Up(["d","e","E"],function(n,e,t,i){e[i]=rn(n)});function UW(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function $W(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function mw(n,e){return n.slice(e,7).concat(n.slice(0,e))}var HW="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),tN="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),zW="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),WW=Bp,VW=Bp,GW=Bp;function YW(n,e){var t=va(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?mw(t,this._week.dow):n?t[n.day()]:t}function qW(n){return n===!0?mw(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function KW(n){return n===!0?mw(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function XW(n,e,t){var i,s,r,a=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=Ja([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return t?e==="dddd"?(s=Ei.call(this._weekdaysParse,a),s!==-1?s:null):e==="ddd"?(s=Ei.call(this._shortWeekdaysParse,a),s!==-1?s:null):(s=Ei.call(this._minWeekdaysParse,a),s!==-1?s:null):e==="dddd"?(s=Ei.call(this._weekdaysParse,a),s!==-1||(s=Ei.call(this._shortWeekdaysParse,a),s!==-1)?s:(s=Ei.call(this._minWeekdaysParse,a),s!==-1?s:null)):e==="ddd"?(s=Ei.call(this._shortWeekdaysParse,a),s!==-1||(s=Ei.call(this._weekdaysParse,a),s!==-1)?s:(s=Ei.call(this._minWeekdaysParse,a),s!==-1?s:null)):(s=Ei.call(this._minWeekdaysParse,a),s!==-1||(s=Ei.call(this._weekdaysParse,a),s!==-1)?s:(s=Ei.call(this._shortWeekdaysParse,a),s!==-1?s:null))}function QW(n,e,t){var i,s,r;if(this._weekdaysParseExact)return XW.call(this,n,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=Ja([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(t&&e==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(t&&e==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!t&&this._weekdaysParse[i].test(n))return i}}function JW(n){if(!this.isValid())return n!=null?this:NaN;var e=dp(this,"Day");return n!=null?(n=UW(n,this.localeData()),this.add(n-e,"d")):e}function ZW(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function eV(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=$W(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function tV(n){return this._weekdaysParseExact?(pn(this,"_weekdaysRegex")||yw.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(pn(this,"_weekdaysRegex")||(this._weekdaysRegex=WW),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function nV(n){return this._weekdaysParseExact?(pn(this,"_weekdaysRegex")||yw.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(pn(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=VW),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function iV(n){return this._weekdaysParseExact?(pn(this,"_weekdaysRegex")||yw.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(pn(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=GW),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function yw(){function n(u,d){return d.length-u.length}var e=[],t=[],i=[],s=[],r,a,o,l,c;for(r=0;r<7;r++)a=Ja([2e3,1]).day(r),o=Fo(this.weekdaysMin(a,"")),l=Fo(this.weekdaysShort(a,"")),c=Fo(this.weekdays(a,"")),e.push(o),t.push(l),i.push(c),s.push(o),s.push(l),s.push(c);e.sort(n),t.sort(n),i.sort(n),s.sort(n),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function vw(){return this.hours()%12||12}function sV(){return this.hours()||24}vt("H",["HH",2],0,"hour");vt("h",["hh",2],0,vw);vt("k",["kk",2],0,sV);vt("hmm",0,0,function(){return""+vw.apply(this)+Ka(this.minutes(),2)});vt("hmmss",0,0,function(){return""+vw.apply(this)+Ka(this.minutes(),2)+Ka(this.seconds(),2)});vt("Hmm",0,0,function(){return""+this.hours()+Ka(this.minutes(),2)});vt("Hmmss",0,0,function(){return""+this.hours()+Ka(this.minutes(),2)+Ka(this.seconds(),2)});function nN(n,e){vt(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}nN("a",!0);nN("A",!1);function iN(n,e){return e._meridiemParse}st("a",iN);st("A",iN);st("H",Kn,pw);st("h",Kn,Jd);st("k",Kn,Jd);st("HH",Kn,Lr);st("hh",Kn,Lr);st("kk",Kn,Lr);st("hmm",VP);st("hmmss",GP);st("Hmm",VP);st("Hmmss",GP);Nn(["H","HH"],Ki);Nn(["k","kk"],function(n,e,t){var i=rn(n);e[Ki]=i===24?0:i});Nn(["a","A"],function(n,e,t){t._isPm=t._locale.isPM(n),t._meridiem=n});Nn(["h","hh"],function(n,e,t){e[Ki]=rn(n),Wt(t).bigHour=!0});Nn("hmm",function(n,e,t){var i=n.length-2;e[Ki]=rn(n.substr(0,i)),e[ha]=rn(n.substr(i)),Wt(t).bigHour=!0});Nn("hmmss",function(n,e,t){var i=n.length-4,s=n.length-2;e[Ki]=rn(n.substr(0,i)),e[ha]=rn(n.substr(i,2)),e[No]=rn(n.substr(s)),Wt(t).bigHour=!0});Nn("Hmm",function(n,e,t){var i=n.length-2;e[Ki]=rn(n.substr(0,i)),e[ha]=rn(n.substr(i))});Nn("Hmmss",function(n,e,t){var i=n.length-4,s=n.length-2;e[Ki]=rn(n.substr(0,i)),e[ha]=rn(n.substr(i,2)),e[No]=rn(n.substr(s))});function rV(n){return(n+"").toLowerCase().charAt(0)==="p"}var aV=/[ap]\.?m?\.?/i,oV=Zd("Hours",!0);function lV(n,e,t){return n>11?t?"pm":"PM":t?"am":"AM"}var sN={calendar:Xz,longDateFormat:eW,invalidDate:nW,ordinal:sW,dayOfMonthOrdinalParse:rW,relativeTime:oW,months:_W,monthsShort:KP,week:OW,weekdays:HW,weekdaysMin:zW,weekdaysShort:tN,meridiemParse:aV},Jn={},zh={},pp;function cV(n,e){var t,i=Math.min(n.length,e.length);for(t=0;t<i;t+=1)if(n[t]!==e[t])return t;return i}function hA(n){return n&&n.toLowerCase().replace("_","-")}function uV(n){for(var e=0,t,i,s,r;e<n.length;){for(r=hA(n[e]).split("-"),t=r.length,i=hA(n[e+1]),i=i?i.split("-"):null;t>0;){if(s=tv(r.slice(0,t).join("-")),s)return s;if(i&&i.length>=t&&cV(r,i)>=t-1)break;t--}e++}return pp}function dV(n){return!!(n&&n.match("^[^/\\\\]*$"))}function tv(n){var e=null,t;if(Jn[n]===void 0&&typeof module<"u"&&module&&module.exports&&dV(n))try{e=pp._abbr,t=require,t("./locale/"+n),Yl(e)}catch{Jn[n]=null}return Jn[n]}function Yl(n,e){var t;return n&&(Js(e)?t=qo(n):t=xw(n,e),t?pp=t:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),pp._abbr}function xw(n,e){if(e!==null){var t,i=sN;if(e.abbr=n,Jn[n]!=null)$P("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Jn[n]._config;else if(e.parentLocale!=null)if(Jn[e.parentLocale]!=null)i=Jn[e.parentLocale]._config;else if(t=tv(e.parentLocale),t!=null)i=t._config;else return zh[e.parentLocale]||(zh[e.parentLocale]=[]),zh[e.parentLocale].push({name:n,config:e}),null;return Jn[n]=new cw(a2(i,e)),zh[n]&&zh[n].forEach(function(s){xw(s.name,s.config)}),Yl(n),Jn[n]}else return delete Jn[n],null}function hV(n,e){if(e!=null){var t,i,s=sN;Jn[n]!=null&&Jn[n].parentLocale!=null?Jn[n].set(a2(Jn[n]._config,e)):(i=tv(n),i!=null&&(s=i._config),e=a2(s,e),i==null&&(e.abbr=n),t=new cw(e),t.parentLocale=Jn[n],Jn[n]=t),Yl(n)}else Jn[n]!=null&&(Jn[n].parentLocale!=null?(Jn[n]=Jn[n].parentLocale,n===Yl()&&Yl(n)):Jn[n]!=null&&delete Jn[n]);return Jn[n]}function qo(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return pp;if(!va(n)){if(e=tv(n),e)return e;n=[n]}return uV(n)}function fV(){return o2(Jn)}function bw(n){var e,t=n._a;return t&&Wt(n).overflow===-2&&(e=t[Po]<0||t[Po]>11?Po:t[Ua]<1||t[Ua]>gw(t[Is],t[Po])?Ua:t[Ki]<0||t[Ki]>24||t[Ki]===24&&(t[ha]!==0||t[No]!==0||t[zc]!==0)?Ki:t[ha]<0||t[ha]>59?ha:t[No]<0||t[No]>59?No:t[zc]<0||t[zc]>999?zc:-1,Wt(n)._overflowDayOfYear&&(e<Is||e>Ua)&&(e=Ua),Wt(n)._overflowWeeks&&e===-1&&(e=yW),Wt(n)._overflowWeekday&&e===-1&&(e=vW),Wt(n).overflow=e),n}var pV=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gV=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mV=/Z|[+-]\d\d(?::?\d\d)?/,dm=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],q1=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],yV=/^\/?Date\((-?\d+)/i,vV=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,xV={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function rN(n){var e,t,i=n._i,s=pV.exec(i)||gV.exec(i),r,a,o,l,c=dm.length,u=q1.length;if(s){for(Wt(n).iso=!0,e=0,t=c;e<t;e++)if(dm[e][1].exec(s[1])){a=dm[e][0],r=dm[e][2]!==!1;break}if(a==null){n._isValid=!1;return}if(s[3]){for(e=0,t=u;e<t;e++)if(q1[e][1].exec(s[3])){o=(s[2]||" ")+q1[e][0];break}if(o==null){n._isValid=!1;return}}if(!r&&o!=null){n._isValid=!1;return}if(s[4])if(mV.exec(s[4]))l="Z";else{n._isValid=!1;return}n._f=a+(o||"")+(l||""),ww(n)}else n._isValid=!1}function bV(n,e,t,i,s,r){var a=[SV(n),KP.indexOf(e),parseInt(t,10),parseInt(i,10),parseInt(s,10)];return r&&a.push(parseInt(r,10)),a}function SV(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function wV(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function _V(n,e,t){if(n){var i=tN.indexOf(n),s=new Date(e[0],e[1],e[2]).getDay();if(i!==s)return Wt(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function EV(n,e,t){if(n)return xV[n];if(e)return 0;var i=parseInt(t,10),s=i%100,r=(i-s)/100;return r*60+s}function aN(n){var e=vV.exec(wV(n._i)),t;if(e){if(t=bV(e[4],e[3],e[2],e[5],e[6],e[7]),!_V(e[1],t,n))return;n._a=t,n._tzm=EV(e[8],e[9],e[10]),n._d=hp.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),Wt(n).rfc2822=!0}else n._isValid=!1}function TV(n){var e=yV.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(rN(n),n._isValid===!1)delete n._isValid;else return;if(aN(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:et.createFromInputFallback(n)}et.createFromInputFallback=qr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function ed(n,e,t){return n??e??t}function AV(n){var e=new Date(et.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Sw(n){var e,t,i=[],s,r,a;if(!n._d){for(s=AV(n),n._w&&n._a[Ua]==null&&n._a[Po]==null&&LV(n),n._dayOfYear!=null&&(a=ed(n._a[Is],s[Is]),(n._dayOfYear>Cf(a)||n._dayOfYear===0)&&(Wt(n)._overflowDayOfYear=!0),t=hp(a,0,n._dayOfYear),n._a[Po]=t.getUTCMonth(),n._a[Ua]=t.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=i[e]=s[e];for(;e<7;e++)n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[Ki]===24&&n._a[ha]===0&&n._a[No]===0&&n._a[zc]===0&&(n._nextDay=!0,n._a[Ki]=0),n._d=(n._useUTC?hp:NW).apply(null,i),r=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[Ki]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==r&&(Wt(n).weekdayMismatch=!0)}}function LV(n){var e,t,i,s,r,a,o,l,c;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(r=1,a=4,t=ed(e.GG,n._a[Is],fp(qn(),1,4).year),i=ed(e.W,1),s=ed(e.E,1),(s<1||s>7)&&(l=!0)):(r=n._locale._week.dow,a=n._locale._week.doy,c=fp(qn(),r,a),t=ed(e.gg,n._a[Is],c.year),i=ed(e.w,c.week),e.d!=null?(s=e.d,(s<0||s>6)&&(l=!0)):e.e!=null?(s=e.e+r,(e.e<0||e.e>6)&&(l=!0)):s=r),i<1||i>jo(t,r,a)?Wt(n)._overflowWeeks=!0:l!=null?Wt(n)._overflowWeekday=!0:(o=eN(t,i,s,r,a),n._a[Is]=o.year,n._dayOfYear=o.dayOfYear)}et.ISO_8601=function(){};et.RFC_2822=function(){};function ww(n){if(n._f===et.ISO_8601){rN(n);return}if(n._f===et.RFC_2822){aN(n);return}n._a=[],Wt(n).empty=!0;var e=""+n._i,t,i,s,r,a,o=e.length,l=0,c,u;for(s=HP(n._f,n._locale).match(uw)||[],u=s.length,t=0;t<u;t++)r=s[t],i=(e.match(pW(r,n))||[])[0],i&&(a=e.substr(0,e.indexOf(i)),a.length>0&&Wt(n).unusedInput.push(a),e=e.slice(e.indexOf(i)+i.length),l+=i.length),_d[r]?(i?Wt(n).empty=!1:Wt(n).unusedTokens.push(r),mW(r,i,n)):n._strict&&!i&&Wt(n).unusedTokens.push(r);Wt(n).charsLeftOver=o-l,e.length>0&&Wt(n).unusedInput.push(e),n._a[Ki]<=12&&Wt(n).bigHour===!0&&n._a[Ki]>0&&(Wt(n).bigHour=void 0),Wt(n).parsedDateParts=n._a.slice(0),Wt(n).meridiem=n._meridiem,n._a[Ki]=kV(n._locale,n._a[Ki],n._meridiem),c=Wt(n).era,c!==null&&(n._a[Is]=n._locale.erasConvertYear(c,n._a[Is])),Sw(n),bw(n)}function kV(n,e,t){var i;return t==null?e:n.meridiemHour!=null?n.meridiemHour(e,t):(n.isPM!=null&&(i=n.isPM(t),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function CV(n){var e,t,i,s,r,a,o=!1,l=n._f.length;if(l===0){Wt(n).invalidFormat=!0,n._d=new Date(NaN);return}for(s=0;s<l;s++)r=0,a=!1,e=lw({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[s],ww(e),ow(e)&&(a=!0),r+=Wt(e).charsLeftOver,r+=Wt(e).unusedTokens.length*10,Wt(e).score=r,o?r<i&&(i=r,t=e):(i==null||r<i||a)&&(i=r,t=e,a&&(o=!0));Dl(n,t||e)}function IV(n){if(!n._d){var e=dw(n._i),t=e.day===void 0?e.date:e.day;n._a=BP([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),Sw(n)}}function RV(n){var e=new jp(bw(oN(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function oN(n){var e=n._i,t=n._f;return n._locale=n._locale||qo(n._l),e===null||t===void 0&&e===""?qy({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),xa(e)?new jp(bw(e)):(Fp(e)?n._d=e:va(t)?CV(n):t?ww(n):PV(n),ow(n)||(n._d=null),n))}function PV(n){var e=n._i;Js(e)?n._d=new Date(et.now()):Fp(e)?n._d=new Date(e.valueOf()):typeof e=="string"?TV(n):va(e)?(n._a=BP(e.slice(0),function(t){return parseInt(t,10)}),Sw(n)):eu(e)?IV(n):Vo(e)?n._d=new Date(e):et.createFromInputFallback(n)}function lN(n,e,t,i,s){var r={};return(e===!0||e===!1)&&(i=e,e=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(eu(n)&&aw(n)||va(n)&&n.length===0)&&(n=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=t,r._i=n,r._f=e,r._strict=i,RV(r)}function qn(n,e,t,i){return lN(n,e,t,i,!1)}var NV=qr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=qn.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:qy()}),DV=qr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=qn.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:qy()});function cN(n,e){var t,i;if(e.length===1&&va(e[0])&&(e=e[0]),!e.length)return qn();for(t=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][n](t))&&(t=e[i]);return t}function OV(){var n=[].slice.call(arguments,0);return cN("isBefore",n)}function MV(){var n=[].slice.call(arguments,0);return cN("isAfter",n)}var FV=function(){return Date.now?Date.now():+new Date},Wh=["year","quarter","month","week","day","hour","minute","second","millisecond"];function jV(n){var e,t=!1,i,s=Wh.length;for(e in n)if(pn(n,e)&&!(Ei.call(Wh,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(i=0;i<s;++i)if(n[Wh[i]]){if(t)return!1;parseFloat(n[Wh[i]])!==rn(n[Wh[i]])&&(t=!0)}return!0}function BV(){return this._isValid}function UV(){return _a(NaN)}function nv(n){var e=dw(n),t=e.year||0,i=e.quarter||0,s=e.month||0,r=e.week||e.isoWeek||0,a=e.day||0,o=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=jV(e),this._milliseconds=+u+c*1e3+l*6e4+o*1e3*60*60,this._days=+a+r*7,this._months=+s+i*3+t*12,this._data={},this._locale=qo(),this._bubble()}function qm(n){return n instanceof nv}function c2(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function $V(n,e,t){var i=Math.min(n.length,e.length),s=Math.abs(n.length-e.length),r=0,a;for(a=0;a<i;a++)rn(n[a])!==rn(e[a])&&r++;return r+s}function uN(n,e){vt(n,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+Ka(~~(t/60),2)+e+Ka(~~t%60,2)})}uN("Z",":");uN("ZZ","");st("Z",Zy);st("ZZ",Zy);Nn(["Z","ZZ"],function(n,e,t){t._useUTC=!0,t._tzm=_w(Zy,n)});var HV=/([\+\-]|\d\d)/gi;function _w(n,e){var t=(e||"").match(n),i,s,r;return t===null?null:(i=t[t.length-1]||[],s=(i+"").match(HV)||["-",0,0],r=+(s[1]*60)+rn(s[2]),r===0?0:s[0]==="+"?r:-r)}function Ew(n,e){var t,i;return e._isUTC?(t=e.clone(),i=(xa(n)||Fp(n)?n.valueOf():qn(n).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),et.updateOffset(t,!1),t):qn(n).local()}function u2(n){return-Math.round(n._d.getTimezoneOffset())}et.updateOffset=function(){};function zV(n,e,t){var i=this._offset||0,s;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=_w(Zy,n),n===null)return this}else Math.abs(n)<16&&!t&&(n=n*60);return!this._isUTC&&e&&(s=u2(this)),this._offset=n,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==n&&(!e||this._changeInProgress?fN(this,_a(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,et.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:u2(this)}function WV(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function VV(n){return this.utcOffset(0,n)}function GV(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(u2(this),"m")),this}function YV(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=_w(hW,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function qV(n){return this.isValid()?(n=n?qn(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function KV(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function XV(){if(!Js(this._isDSTShifted))return this._isDSTShifted;var n={},e;return lw(n,this),n=oN(n),n._a?(e=n._isUTC?Ja(n._a):qn(n._a),this._isDSTShifted=this.isValid()&&$V(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function QV(){return this.isValid()?!this._isUTC:!1}function JV(){return this.isValid()?this._isUTC:!1}function dN(){return this.isValid()?this._isUTC&&this._offset===0:!1}var ZV=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,eG=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function _a(n,e){var t=n,i=null,s,r,a;return qm(n)?t={ms:n._milliseconds,d:n._days,M:n._months}:Vo(n)||!isNaN(+n)?(t={},e?t[e]=+n:t.milliseconds=+n):(i=ZV.exec(n))?(s=i[1]==="-"?-1:1,t={y:0,d:rn(i[Ua])*s,h:rn(i[Ki])*s,m:rn(i[ha])*s,s:rn(i[No])*s,ms:rn(c2(i[zc]*1e3))*s}):(i=eG.exec(n))?(s=i[1]==="-"?-1:1,t={y:Ec(i[2],s),M:Ec(i[3],s),w:Ec(i[4],s),d:Ec(i[5],s),h:Ec(i[6],s),m:Ec(i[7],s),s:Ec(i[8],s)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(a=tG(qn(t.from),qn(t.to)),t={},t.ms=a.milliseconds,t.M=a.months),r=new nv(t),qm(n)&&pn(n,"_locale")&&(r._locale=n._locale),qm(n)&&pn(n,"_isValid")&&(r._isValid=n._isValid),r}_a.fn=nv.prototype;_a.invalid=UV;function Ec(n,e){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*e}function fA(n,e){var t={};return t.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+n.clone().add(t.months,"M"),t}function tG(n,e){var t;return n.isValid()&&e.isValid()?(e=Ew(e,n),n.isBefore(e)?t=fA(n,e):(t=fA(e,n),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function hN(n,e){return function(t,i){var s,r;return i!==null&&!isNaN(+i)&&($P(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=t,t=i,i=r),s=_a(t,i),fN(this,s,n),this}}function fN(n,e,t,i){var s=e._milliseconds,r=c2(e._days),a=c2(e._months);n.isValid()&&(i=i??!0,a&&QP(n,dp(n,"Month")+a*t),r&&qP(n,"Date",dp(n,"Date")+r*t),s&&n._d.setTime(n._d.valueOf()+s*t),i&&et.updateOffset(n,r||a))}var nG=hN(1,"add"),iG=hN(-1,"subtract");function pN(n){return typeof n=="string"||n instanceof String}function sG(n){return xa(n)||Fp(n)||pN(n)||Vo(n)||aG(n)||rG(n)||n===null||n===void 0}function rG(n){var e=eu(n)&&!aw(n),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,r,a=i.length;for(s=0;s<a;s+=1)r=i[s],t=t||pn(n,r);return e&&t}function aG(n){var e=va(n),t=!1;return e&&(t=n.filter(function(i){return!Vo(i)&&pN(n)}).length===0),e&&t}function oG(n){var e=eu(n)&&!aw(n),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,r;for(s=0;s<i.length;s+=1)r=i[s],t=t||pn(n,r);return e&&t}function lG(n,e){var t=n.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function cG(n,e){arguments.length===1&&(arguments[0]?sG(arguments[0])?(n=arguments[0],e=void 0):oG(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var t=n||qn(),i=Ew(t,this).startOf("day"),s=et.calendarFormat(this,i)||"sameElse",r=e&&(Za(e[s])?e[s].call(this,t):e[s]);return this.format(r||this.localeData().calendar(s,this,qn(t)))}function uG(){return new jp(this)}function dG(n,e){var t=xa(n)?n:qn(n);return this.isValid()&&t.isValid()?(e=Kr(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function hG(n,e){var t=xa(n)?n:qn(n);return this.isValid()&&t.isValid()?(e=Kr(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function fG(n,e,t,i){var s=xa(n)?n:qn(n),r=xa(e)?e:qn(e);return this.isValid()&&s.isValid()&&r.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(s,t):!this.isBefore(s,t))&&(i[1]===")"?this.isBefore(r,t):!this.isAfter(r,t))):!1}function pG(n,e){var t=xa(n)?n:qn(n),i;return this.isValid()&&t.isValid()?(e=Kr(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function gG(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function mG(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function yG(n,e,t){var i,s,r;if(!this.isValid())return NaN;if(i=Ew(n,this),!i.isValid())return NaN;switch(s=(i.utcOffset()-this.utcOffset())*6e4,e=Kr(e),e){case"year":r=Km(this,i)/12;break;case"month":r=Km(this,i);break;case"quarter":r=Km(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-s)/864e5;break;case"week":r=(this-i-s)/6048e5;break;default:r=this-i}return t?r:$r(r)}function Km(n,e){if(n.date()<e.date())return-Km(e,n);var t=(e.year()-n.year())*12+(e.month()-n.month()),i=n.clone().add(t,"months"),s,r;return e-i<0?(s=n.clone().add(t-1,"months"),r=(e-i)/(i-s)):(s=n.clone().add(t+1,"months"),r=(e-i)/(s-i)),-(t+r)||0}et.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";et.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function vG(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function xG(n){if(!this.isValid())return null;var e=n!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?Ym(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Za(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Ym(t,"Z")):Ym(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function bG(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",t,i,s,r;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]',this.format(t+i+s+r)}function SG(n){n||(n=this.isUtc()?et.defaultFormatUtc:et.defaultFormat);var e=Ym(this,n);return this.localeData().postformat(e)}function wG(n,e){return this.isValid()&&(xa(n)&&n.isValid()||qn(n).isValid())?_a({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function _G(n){return this.from(qn(),n)}function EG(n,e){return this.isValid()&&(xa(n)&&n.isValid()||qn(n).isValid())?_a({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function TG(n){return this.to(qn(),n)}function gN(n){var e;return n===void 0?this._locale._abbr:(e=qo(n),e!=null&&(this._locale=e),this)}var mN=qr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function yN(){return this._locale}var G0=1e3,Ed=60*G0,Y0=60*Ed,vN=(365*400+97)*24*Y0;function Td(n,e){return(n%e+e)%e}function xN(n,e,t){return n<100&&n>=0?new Date(n+400,e,t)-vN:new Date(n,e,t).valueOf()}function bN(n,e,t){return n<100&&n>=0?Date.UTC(n+400,e,t)-vN:Date.UTC(n,e,t)}function AG(n){var e,t;if(n=Kr(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?bN:xN,n){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Td(e+(this._isUTC?0:this.utcOffset()*Ed),Y0);break;case"minute":e=this._d.valueOf(),e-=Td(e,Ed);break;case"second":e=this._d.valueOf(),e-=Td(e,G0);break}return this._d.setTime(e),et.updateOffset(this,!0),this}function LG(n){var e,t;if(n=Kr(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?bN:xN,n){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Y0-Td(e+(this._isUTC?0:this.utcOffset()*Ed),Y0)-1;break;case"minute":e=this._d.valueOf(),e+=Ed-Td(e,Ed)-1;break;case"second":e=this._d.valueOf(),e+=G0-Td(e,G0)-1;break}return this._d.setTime(e),et.updateOffset(this,!0),this}function kG(){return this._d.valueOf()-(this._offset||0)*6e4}function CG(){return Math.floor(this.valueOf()/1e3)}function IG(){return new Date(this.valueOf())}function RG(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function PG(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function NG(){return this.isValid()?this.toISOString():null}function DG(){return ow(this)}function OG(){return Dl({},Wt(this))}function MG(){return Wt(this).overflow}function FG(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}vt("N",0,0,"eraAbbr");vt("NN",0,0,"eraAbbr");vt("NNN",0,0,"eraAbbr");vt("NNNN",0,0,"eraName");vt("NNNNN",0,0,"eraNarrow");vt("y",["y",1],"yo","eraYear");vt("y",["yy",2],0,"eraYear");vt("y",["yyy",3],0,"eraYear");vt("y",["yyyy",4],0,"eraYear");st("N",Tw);st("NN",Tw);st("NNN",Tw);st("NNNN",qG);st("NNNNN",KG);Nn(["N","NN","NNN","NNNN","NNNNN"],function(n,e,t,i){var s=t._locale.erasParse(n,i,t._strict);s?Wt(t).era=s:Wt(t).invalidEra=n});st("y",Qd);st("yy",Qd);st("yyy",Qd);st("yyyy",Qd);st("yo",XG);Nn(["y","yy","yyy","yyyy"],Is);Nn(["yo"],function(n,e,t,i){var s;t._locale._eraYearOrdinalRegex&&(s=n.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[Is]=t._locale.eraYearOrdinalParse(n,s):e[Is]=parseInt(n,10)});function jG(n,e){var t,i,s,r=this._eras||qo("en")._eras;for(t=0,i=r.length;t<i;++t){switch(typeof r[t].since){case"string":s=et(r[t].since).startOf("day"),r[t].since=s.valueOf();break}switch(typeof r[t].until){case"undefined":r[t].until=1/0;break;case"string":s=et(r[t].until).startOf("day").valueOf(),r[t].until=s.valueOf();break}}return r}function BG(n,e,t){var i,s,r=this.eras(),a,o,l;for(n=n.toUpperCase(),i=0,s=r.length;i<s;++i)if(a=r[i].name.toUpperCase(),o=r[i].abbr.toUpperCase(),l=r[i].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(o===n)return r[i];break;case"NNNN":if(a===n)return r[i];break;case"NNNNN":if(l===n)return r[i];break}else if([a,o,l].indexOf(n)>=0)return r[i]}function UG(n,e){var t=n.since<=n.until?1:-1;return e===void 0?et(n.since).year():et(n.since).year()+(e-n.offset)*t}function $G(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].name;return""}function HG(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].narrow;return""}function zG(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].abbr;return""}function WG(){var n,e,t,i,s=this.localeData().eras();for(n=0,e=s.length;n<e;++n)if(t=s[n].since<=s[n].until?1:-1,i=this.clone().startOf("day").valueOf(),s[n].since<=i&&i<=s[n].until||s[n].until<=i&&i<=s[n].since)return(this.year()-et(s[n].since).year())*t+s[n].offset;return this.year()}function VG(n){return pn(this,"_erasNameRegex")||Aw.call(this),n?this._erasNameRegex:this._erasRegex}function GG(n){return pn(this,"_erasAbbrRegex")||Aw.call(this),n?this._erasAbbrRegex:this._erasRegex}function YG(n){return pn(this,"_erasNarrowRegex")||Aw.call(this),n?this._erasNarrowRegex:this._erasRegex}function Tw(n,e){return e.erasAbbrRegex(n)}function qG(n,e){return e.erasNameRegex(n)}function KG(n,e){return e.erasNarrowRegex(n)}function XG(n,e){return e._eraYearOrdinalRegex||Qd}function Aw(){var n=[],e=[],t=[],i=[],s,r,a,o,l,c=this.eras();for(s=0,r=c.length;s<r;++s)a=Fo(c[s].name),o=Fo(c[s].abbr),l=Fo(c[s].narrow),e.push(a),n.push(o),t.push(l),i.push(a),i.push(o),i.push(l);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}vt(0,["gg",2],0,function(){return this.weekYear()%100});vt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function iv(n,e){vt(0,[n,n.length],0,e)}iv("gggg","weekYear");iv("ggggg","weekYear");iv("GGGG","isoWeekYear");iv("GGGGG","isoWeekYear");st("G",Jy);st("g",Jy);st("GG",Kn,Lr);st("gg",Kn,Lr);st("GGGG",fw,hw);st("gggg",fw,hw);st("GGGGG",Qy,Ky);st("ggggg",Qy,Ky);Up(["gggg","ggggg","GGGG","GGGGG"],function(n,e,t,i){e[i.substr(0,2)]=rn(n)});Up(["gg","GG"],function(n,e,t,i){e[i]=et.parseTwoDigitYear(n)});function QG(n){return SN.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function JG(n){return SN.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function ZG(){return jo(this.year(),1,4)}function eY(){return jo(this.isoWeekYear(),1,4)}function tY(){var n=this.localeData()._week;return jo(this.year(),n.dow,n.doy)}function nY(){var n=this.localeData()._week;return jo(this.weekYear(),n.dow,n.doy)}function SN(n,e,t,i,s){var r;return n==null?fp(this,i,s).year:(r=jo(n,i,s),e>r&&(e=r),iY.call(this,n,e,t,i,s))}function iY(n,e,t,i,s){var r=eN(n,e,t,i,s),a=hp(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}vt("Q",0,"Qo","quarter");st("Q",zP);Nn("Q",function(n,e){e[Po]=(rn(n)-1)*3});function sY(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}vt("D",["DD",2],"Do","date");st("D",Kn,Jd);st("DD",Kn,Lr);st("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Nn(["D","DD"],Ua);Nn("Do",function(n,e){e[Ua]=rn(n.match(Kn)[0])});var wN=Zd("Date",!0);vt("DDD",["DDDD",3],"DDDo","dayOfYear");st("DDD",Xy);st("DDDD",WP);Nn(["DDD","DDDD"],function(n,e,t){t._dayOfYear=rn(n)});function rY(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}vt("m",["mm",2],0,"minute");st("m",Kn,pw);st("mm",Kn,Lr);Nn(["m","mm"],ha);var aY=Zd("Minutes",!1);vt("s",["ss",2],0,"second");st("s",Kn,pw);st("ss",Kn,Lr);Nn(["s","ss"],No);var oY=Zd("Seconds",!1);vt("S",0,0,function(){return~~(this.millisecond()/100)});vt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});vt(0,["SSS",3],0,"millisecond");vt(0,["SSSS",4],0,function(){return this.millisecond()*10});vt(0,["SSSSS",5],0,function(){return this.millisecond()*100});vt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});vt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});vt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});vt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});st("S",Xy,zP);st("SS",Xy,Lr);st("SSS",Xy,WP);var Ol,_N;for(Ol="SSSS";Ol.length<=9;Ol+="S")st(Ol,Qd);function lY(n,e){e[zc]=rn(("0."+n)*1e3)}for(Ol="S";Ol.length<=9;Ol+="S")Nn(Ol,lY);_N=Zd("Milliseconds",!1);vt("z",0,0,"zoneAbbr");vt("zz",0,0,"zoneName");function cY(){return this._isUTC?"UTC":""}function uY(){return this._isUTC?"Coordinated Universal Time":""}var ze=jp.prototype;ze.add=nG;ze.calendar=cG;ze.clone=uG;ze.diff=yG;ze.endOf=LG;ze.format=SG;ze.from=wG;ze.fromNow=_G;ze.to=EG;ze.toNow=TG;ze.get=bW;ze.invalidAt=MG;ze.isAfter=dG;ze.isBefore=hG;ze.isBetween=fG;ze.isSame=pG;ze.isSameOrAfter=gG;ze.isSameOrBefore=mG;ze.isValid=DG;ze.lang=mN;ze.locale=gN;ze.localeData=yN;ze.max=DV;ze.min=NV;ze.parsingFlags=OG;ze.set=SW;ze.startOf=AG;ze.subtract=iG;ze.toArray=RG;ze.toObject=PG;ze.toDate=IG;ze.toISOString=xG;ze.inspect=bG;typeof Symbol<"u"&&Symbol.for!=null&&(ze[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ze.toJSON=NG;ze.toString=vG;ze.unix=CG;ze.valueOf=kG;ze.creationData=FG;ze.eraName=$G;ze.eraNarrow=HG;ze.eraAbbr=zG;ze.eraYear=WG;ze.year=YP;ze.isLeapYear=xW;ze.weekYear=QG;ze.isoWeekYear=JG;ze.quarter=ze.quarters=sY;ze.month=JP;ze.daysInMonth=IW;ze.week=ze.weeks=jW;ze.isoWeek=ze.isoWeeks=BW;ze.weeksInYear=tY;ze.weeksInWeekYear=nY;ze.isoWeeksInYear=ZG;ze.isoWeeksInISOWeekYear=eY;ze.date=wN;ze.day=ze.days=JW;ze.weekday=ZW;ze.isoWeekday=eV;ze.dayOfYear=rY;ze.hour=ze.hours=oV;ze.minute=ze.minutes=aY;ze.second=ze.seconds=oY;ze.millisecond=ze.milliseconds=_N;ze.utcOffset=zV;ze.utc=VV;ze.local=GV;ze.parseZone=YV;ze.hasAlignedHourOffset=qV;ze.isDST=KV;ze.isLocal=QV;ze.isUtcOffset=JV;ze.isUtc=dN;ze.isUTC=dN;ze.zoneAbbr=cY;ze.zoneName=uY;ze.dates=qr("dates accessor is deprecated. Use date instead.",wN);ze.months=qr("months accessor is deprecated. Use month instead",JP);ze.years=qr("years accessor is deprecated. Use year instead",YP);ze.zone=qr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",WV);ze.isDSTShifted=qr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",XV);function dY(n){return qn(n*1e3)}function hY(){return qn.apply(null,arguments).parseZone()}function EN(n){return n}var gn=cw.prototype;gn.calendar=Qz;gn.longDateFormat=tW;gn.invalidDate=iW;gn.ordinal=aW;gn.preparse=EN;gn.postformat=EN;gn.relativeTime=lW;gn.pastFuture=cW;gn.set=Kz;gn.eras=jG;gn.erasParse=BG;gn.erasConvertYear=UG;gn.erasAbbrRegex=GG;gn.erasNameRegex=VG;gn.erasNarrowRegex=YG;gn.months=AW;gn.monthsShort=LW;gn.monthsParse=CW;gn.monthsRegex=PW;gn.monthsShortRegex=RW;gn.week=DW;gn.firstDayOfYear=FW;gn.firstDayOfWeek=MW;gn.weekdays=YW;gn.weekdaysMin=KW;gn.weekdaysShort=qW;gn.weekdaysParse=QW;gn.weekdaysRegex=tV;gn.weekdaysShortRegex=nV;gn.weekdaysMinRegex=iV;gn.isPM=rV;gn.meridiem=lV;function q0(n,e,t,i){var s=qo(),r=Ja().set(i,e);return s[t](r,n)}function TN(n,e,t){if(Vo(n)&&(e=n,n=void 0),n=n||"",e!=null)return q0(n,e,t,"month");var i,s=[];for(i=0;i<12;i++)s[i]=q0(n,i,t,"month");return s}function Lw(n,e,t,i){typeof n=="boolean"?(Vo(e)&&(t=e,e=void 0),e=e||""):(e=n,t=e,n=!1,Vo(e)&&(t=e,e=void 0),e=e||"");var s=qo(),r=n?s._week.dow:0,a,o=[];if(t!=null)return q0(e,(t+r)%7,i,"day");for(a=0;a<7;a++)o[a]=q0(e,(a+r)%7,i,"day");return o}function fY(n,e){return TN(n,e,"months")}function pY(n,e){return TN(n,e,"monthsShort")}function gY(n,e,t){return Lw(n,e,t,"weekdays")}function mY(n,e,t){return Lw(n,e,t,"weekdaysShort")}function yY(n,e,t){return Lw(n,e,t,"weekdaysMin")}Yl("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,t=rn(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+t}});et.lang=qr("moment.lang is deprecated. Use moment.locale instead.",Yl);et.langData=qr("moment.langData is deprecated. Use moment.localeData instead.",qo);var po=Math.abs;function vY(){var n=this._data;return this._milliseconds=po(this._milliseconds),this._days=po(this._days),this._months=po(this._months),n.milliseconds=po(n.milliseconds),n.seconds=po(n.seconds),n.minutes=po(n.minutes),n.hours=po(n.hours),n.months=po(n.months),n.years=po(n.years),this}function AN(n,e,t,i){var s=_a(e,t);return n._milliseconds+=i*s._milliseconds,n._days+=i*s._days,n._months+=i*s._months,n._bubble()}function xY(n,e){return AN(this,n,e,1)}function bY(n,e){return AN(this,n,e,-1)}function pA(n){return n<0?Math.floor(n):Math.ceil(n)}function SY(){var n=this._milliseconds,e=this._days,t=this._months,i=this._data,s,r,a,o,l;return n>=0&&e>=0&&t>=0||n<=0&&e<=0&&t<=0||(n+=pA(d2(t)+e)*864e5,e=0,t=0),i.milliseconds=n%1e3,s=$r(n/1e3),i.seconds=s%60,r=$r(s/60),i.minutes=r%60,a=$r(r/60),i.hours=a%24,e+=$r(a/24),l=$r(LN(e)),t+=l,e-=pA(d2(l)),o=$r(t/12),t%=12,i.days=e,i.months=t,i.years=o,this}function LN(n){return n*4800/146097}function d2(n){return n*146097/4800}function wY(n){if(!this.isValid())return NaN;var e,t,i=this._milliseconds;if(n=Kr(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+i/864e5,t=this._months+LN(e),n){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(d2(this._months)),n){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+n)}}function Ko(n){return function(){return this.as(n)}}var kN=Ko("ms"),_Y=Ko("s"),EY=Ko("m"),TY=Ko("h"),AY=Ko("d"),LY=Ko("w"),kY=Ko("M"),CY=Ko("Q"),IY=Ko("y"),RY=kN;function PY(){return _a(this)}function NY(n){return n=Kr(n),this.isValid()?this[n+"s"]():NaN}function yu(n){return function(){return this.isValid()?this._data[n]:NaN}}var DY=yu("milliseconds"),OY=yu("seconds"),MY=yu("minutes"),FY=yu("hours"),jY=yu("days"),BY=yu("months"),UY=yu("years");function $Y(){return $r(this.days()/7)}var bo=Math.round,pd={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function HY(n,e,t,i,s){return s.relativeTime(e||1,!!t,n,i)}function zY(n,e,t,i){var s=_a(n).abs(),r=bo(s.as("s")),a=bo(s.as("m")),o=bo(s.as("h")),l=bo(s.as("d")),c=bo(s.as("M")),u=bo(s.as("w")),d=bo(s.as("y")),h=r<=t.ss&&["s",r]||r<t.s&&["ss",r]||a<=1&&["m"]||a<t.m&&["mm",a]||o<=1&&["h"]||o<t.h&&["hh",o]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(h=h||u<=1&&["w"]||u<t.w&&["ww",u]),h=h||c<=1&&["M"]||c<t.M&&["MM",c]||d<=1&&["y"]||["yy",d],h[2]=e,h[3]=+n>0,h[4]=i,HY.apply(null,h)}function WY(n){return n===void 0?bo:typeof n=="function"?(bo=n,!0):!1}function VY(n,e){return pd[n]===void 0?!1:e===void 0?pd[n]:(pd[n]=e,n==="s"&&(pd.ss=e-1),!0)}function GY(n,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=pd,s,r;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(t=n),typeof e=="object"&&(i=Object.assign({},pd,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),s=this.localeData(),r=zY(this,!t,i,s),t&&(r=s.pastFuture(+this,r)),s.postformat(r)}var K1=Math.abs;function Yu(n){return(n>0)-(n<0)||+n}function sv(){if(!this.isValid())return this.localeData().invalidDate();var n=K1(this._milliseconds)/1e3,e=K1(this._days),t=K1(this._months),i,s,r,a,o=this.asSeconds(),l,c,u,d;return o?(i=$r(n/60),s=$r(i/60),n%=60,i%=60,r=$r(t/12),t%=12,a=n?n.toFixed(3).replace(/\.?0+$/,""):"",l=o<0?"-":"",c=Yu(this._months)!==Yu(o)?"-":"",u=Yu(this._days)!==Yu(o)?"-":"",d=Yu(this._milliseconds)!==Yu(o)?"-":"",l+"P"+(r?c+r+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(s||i||n?"T":"")+(s?d+s+"H":"")+(i?d+i+"M":"")+(n?d+a+"S":"")):"P0D"}var cn=nv.prototype;cn.isValid=BV;cn.abs=vY;cn.add=xY;cn.subtract=bY;cn.as=wY;cn.asMilliseconds=kN;cn.asSeconds=_Y;cn.asMinutes=EY;cn.asHours=TY;cn.asDays=AY;cn.asWeeks=LY;cn.asMonths=kY;cn.asQuarters=CY;cn.asYears=IY;cn.valueOf=RY;cn._bubble=SY;cn.clone=PY;cn.get=NY;cn.milliseconds=DY;cn.seconds=OY;cn.minutes=MY;cn.hours=FY;cn.days=jY;cn.weeks=$Y;cn.months=BY;cn.years=UY;cn.humanize=GY;cn.toISOString=sv;cn.toString=sv;cn.toJSON=sv;cn.locale=gN;cn.localeData=yN;cn.toIsoString=qr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",sv);cn.lang=mN;vt("X",0,0,"unix");vt("x",0,0,"valueOf");st("x",Jy);st("X",fW);Nn("X",function(n,e,t){t._d=new Date(parseFloat(n)*1e3)});Nn("x",function(n,e,t){t._d=new Date(rn(n))});//! moment.js
et.version="2.30.1";Yz(qn);et.fn=ze;et.min=OV;et.max=MV;et.now=FV;et.utc=Ja;et.unix=dY;et.months=fY;et.isDate=Fp;et.locale=Yl;et.invalid=qy;et.duration=_a;et.isMoment=xa;et.weekdays=gY;et.parseZone=hY;et.localeData=qo;et.isDuration=qm;et.monthsShort=pY;et.weekdaysMin=yY;et.defineLocale=xw;et.updateLocale=hV;et.locales=fV;et.weekdaysShort=mY;et.normalizeUnits=Kr;et.relativeTimeRounding=WY;et.relativeTimeThreshold=VY;et.calendarFormat=lG;et.prototype=ze;et.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Ia=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(n);function YY(){const[n,e]=O.useState(0),[t,i]=O.useState(0),[s,r]=O.useState(0),[a,o]=O.useState(0),[l,c]=O.useState(0),[u,d]=O.useState(0),[h,f]=O.useState(0),[p,m]=O.useState(!1),[v,y]=O.useState([]),[b,x]=O.useState([]),[_,T]=O.useState([]),[C,L]=O.useState([]),[k,M]=O.useState([]),[D,I]=O.useState([]),R=et().format("YYYY-MM-DD hh:mm:ss"),{renderOrdersKey:q,setRenderOrdersKey:Y}=O.useContext(yn),[ee,j]=O.useState(""),[z,B]=O.useState(!1),[U,Q]=O.useState(!1),[re,N]=O.useState(!1),[W,K]=O.useState(!1),[Z,te]=O.useState(!0),[oe,de]=O.useState([]),[ge,De]=O.useState(""),[Re,Ce]=O.useState(""),[Be,Ze]=O.useState(""),[ve,ne]=O.useState("2025"),[Qe,Ye]=O.useState(!1),[he,Me]=O.useState([]),[Ue,$e]=O.useState("0"),Fe=new Tt;O.useEffect(()=>{ee=="Ice Creams per type"?(B(!0),U==!0?Q(!1):re==!0?N(!1):W==!0&&K(!1)):ee=="Top 5 Ingredients"?(Q(!0),z==!0?B(!1):re==!0?N(!1):W==!0&&K(!1)):ee=="Top 5 Toppings"?(N(!0),z==!0?B(!1):U==!0?Q(!1):W==!0&&K(!1)):ee=="Crunch Time"?(K(!0),z==!0?B(!1):U==!0?Q(!1):re==!0&&N(!1)):(B(!1),Q(!1),N(!1),K(!1))},[ee]),O.useEffect(()=>{console.log("Sale Charts",he),console.log("Sale Charts Values",Object.values(he)),console.log("Sale Chart Array",he),Ue=="2"&&he.map(Te=>{Bi(gt=>[...gt,Te.hour]),si(gt=>[...gt,Te.count])})},[he]),O.useEffect(()=>{let Te=["01","02","03","04","05","06","07","08","09","10","11","12"],gt=["2025","2024"];Me([]),Ue==="0"?gt.forEach(Jt=>{Te.forEach(rt=>{nt.get("/sales/sum",{params:{month:rt,year:Jt}}).then(bt=>{console.log("Response",bt.data);let xt=bt.data.totals;console.log("SUMMMMMMMMMMMM",xt),Me(Rn=>[...Rn,xt])}).catch(bt=>{console.log("Error",bt)})})}):Ue==="1"?(console.log("Average"),gt.forEach(Jt=>{Te.forEach(rt=>{nt.get("/sales/avg_week_sales",{params:{month:rt,year:Jt}}).then(bt=>{console.log("Response",bt.data);let xt=bt.data.totals;console.log("SUMMMMMMMMMMMM",xt),Me(Rn=>[...Rn,xt])}).catch(bt=>{console.log("Error",bt)})})})):Ue==="2"&&(console.log("Average"),nt.get("/old_orders/avgICperHourPerDay",{}).then(Jt=>{console.log("Response",Jt.data),Me(Jt.data)}).catch(Jt=>{console.log("Error",Jt)}))},[Ue]);const Xe=O.useRef();O.useEffect(()=>{nt.get("/sales").then(rt=>{console.log("Response",rt.data),de(rt.data)}).catch(rt=>{console.log("Error",rt)});const Te=setInterval(()=>{nt.get("/sales").then(rt=>{console.log("Response",rt.data),de(rt.data)}).catch(rt=>{console.log("Error",rt)})},6e5),gt=setInterval(()=>{nt.get("/orders/ordersATH").then(rt=>{console.log("Response ATH",rt.data.totalSalesATH),e(rt.data.totalSalesATH)}).catch(rt=>{console.log("Error",rt)}),nt.get("/orders/ordersCASH").then(rt=>{console.log("Response",typeof rt.data),i(rt.data.totalSalesCASH)}).catch(rt=>{console.log("Error",rt)}),nt.get("/orders/count").then(rt=>{console.log("Count Response",rt.data);var bt=rt.data;console.log("Map",bt),bt.forEach(xt=>{console.log("iterating calculations"),console.log("object to look: ",xt),xt._id=="rolls"?(console.log("There are rolls"),r(xt.totalQuantity)):xt._id=="shakes"?(console.log("There are shakes"),o(xt.totalQuantity)):xt._id=="banana"?c(xt.totalQuantity):xt._id=="puppy"?d(xt.totalQuantity):xt._id=="drinks"?f(xt.totalQuantity):console.log("Types not found")})}).catch(rt=>{console.log("Error",rt)}),nt.get("/orders/countIngredients").then(rt=>{var bt=[],xt=[];rt.data.forEach(Rn=>{bt.push(Rn._id),xt.push(Rn.totalQuantity)}),console.log("Labels: ",bt),console.log("Data: ",xt),y(bt),x(xt)}).catch(rt=>{console.log("Error",rt)}),nt.get("/orders/countToppings").then(rt=>{var bt=[],xt=[];rt.data.forEach(Rn=>{bt.push(Rn._id),xt.push(Rn.totalQuantity)}),console.log("Labels: ",bt),console.log("Data: ",xt),T(bt),M(xt)}).catch(rt=>{console.log("Error",rt)}),nt.get("/orders/getCrunchTime").then(rt=>{console.log("Response",rt);var bt=[],xt=[];rt.data.forEach(Rn=>{bt.push(Rn.hour),xt.push(Rn.count)}),console.log("Labels: ",bt),console.log("Data: ",xt),L(bt),I(xt)}).catch(rt=>{console.log("Error",rt)}),m(!0)},500),Jt=setInterval(()=>{const rt=new Date,bt=rt.toLocaleTimeString("en-US",{hour12:!0,timeZone:"America/Puerto_Rico"}),xt=rt.toLocaleDateString("en-US",{timeZone:"America/Puerto_Rico"}),Rn=localStorage.getItem("reportSubmittedDate");bt.startsWith("11:30:00 PM")&&Rn!=xt&&(ft(),xn.success(`its time!${bt}`),Xe.current.click(),localStorage.setItem("reportSubmittedDate",xt),clearInterval(Jt),Ii())},1e3);return()=>{clearInterval(gt),clearInterval(Te),clearInterval(Jt)}},[]);const _t=Te=>{j(Te.target.value)},We=Te=>{De(Te.target.value)},Lt=Te=>{Ce(Te.target.value)},zt=Te=>{Ze(Te.target.value)},ht=Te=>{ne(Te.target.value)},Ct=Te=>{$e(Te.target.value)},[Ve,ii]=O.useState(!1),[qt,Xi]=O.useState(!1),[Gt,Kt]=O.useState(""),ps=async Te=>{Ye(!0);const gt="Daily Report",Jt=Fe.internal.pageSize.getHeight(),rt=Fe.internal.pageSize.getWidth(),bt=100,xt=Fe.getStringUnitWidth(gt)*Fe.internal.getFontSize()/Fe.internal.scaleFactor,Rn=(rt-xt)/2;Fe.text(gt,Rn,10);const kr=(we,ct)=>we+ct>Jt-20?(Fe.addPage(),20):we;Fe.setDrawColor(0),Fe.setLineWidth(.5),Fe.line(20,15,rt-20,15),Fe.text("Orders",20,25);let St=[];Kt("Getting Orders...");try{St=(await nt.get("/orders")).data}catch(we){console.error("Error fetching orders:",we)}const wt=["Order ID","Client Name","Payment Method","Total"],jt=St.map(we=>[we._id,we.client_name,we.payment_method,Ia(we.total)]);console.error("Order Rows: ",jt),cm(Fe,{head:[wt],body:jt,startY:30,theme:"grid"});let Bt=Fe.lastAutoTable.finalY||40;Fe.text("Total Sale",20,Bt+20);const on=["Date","Ice Creams","Drinks","Ath","Cash","Total"];console.log("Timestamp",R);const ls=[[R,s+a+l+u,h,Ia(n),Ia(t),Ia(n+t)]];cm(Fe,{head:[on],body:ls,startY:Bt+25,theme:"grid",headStyles:{fillColor:[255,165,0]}}),Kt("Counting Orders..."),nt.get("/orders/count").then(we=>{console.log("Count Response",we.data);var ct=we.data;console.log("Map",ct),ct.forEach(dt=>{console.log("iterating calculations"),console.log("object to look: ",dt),dt._id=="rolls"?(console.log("There are rolls"),r(dt.totalQuantity)):dt._id=="shakes"?(console.log("There are shakes"),o(dt.totalQuantity)):dt._id=="banana"?c(dt.totalQuantity):dt._id=="puppy"?d(dt.totalQuantity):dt._id=="drinks"?f(dt.totalQuantity):console.log("Types not found")})}).catch(we=>{console.log("Error",we)}),Kt("Counting Ingredients on All Orders..."),nt.get("/orders/countIngredients").then(we=>{var ct=[],dt=[];we.data.forEach(_n=>{ct.push(_n._id),dt.push(_n.totalQuantity)}),console.log("Labels: ",ct),console.log("Data: ",dt),y(ct),x(dt)}).catch(we=>{console.log("Error",we)}),Kt("Counting Toppings on All Orders..."),nt.get("/orders/countToppings").then(we=>{var ct=[],dt=[];we.data.forEach(_n=>{ct.push(_n._id),dt.push(_n.totalQuantity)}),console.log("Labels: ",ct),console.log("Data: ",dt),T(ct),M(dt)}).catch(we=>{console.log("Error",we)}),Fe.lastAutoTable.finalY;const Ni=()=>{const we="0123456789ABCDEF";let ct="#";for(let dt=0;dt<6;dt++)ct+=we[Math.floor(Math.random()*16)];return ct},Qn=(we,ct,dt)=>{const _n=Ni(),Vs=Ni(),$i={type:"bar",data:{labels:ct.map(Yt=>Yt),datasets:[{label:ct,data:we,backgroundColor:_n,borderColor:Vs,borderWidth:1}]},options:{responsive:!1,maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!1},title:{display:!0,text:dt,font:{size:16}},plugins:{datalabels:{anchor:"center",align:"center    ",color:"black",font:{weight:"bold"},formatter:Yt=>Yt}}}};return`https://quickchart.io/chart?c=${encodeURIComponent(JSON.stringify($i))}`},Pt=[Qn(b.map(we=>we),v,"Top 5 Ingredients"),Qn(k.map(we=>we),_,"Top 5 Toppings"),Qn([s,a,l,u],["Rolls","Shakes","Banana","Puppy"],"Ice Creams by type"),Qn(D.map(we=>we),C,"Crunch Time")];let It=Fe.previousAutoTable.finalY+20;const Si=(we,ct)=>new Promise(dt=>{const _n=new Image;_n.src=we,_n.onload=()=>{ct=kr(ct,bt),Fe.addImage(_n,"PNG",10,ct,rt-20,bt),dt(ct+bt+10)}}),pe=async()=>{for(const dt of Pt)It=await Si(dt,It);let we=new FormData;const ct=Fe.output("blob");we.append("file",ct,`${R}.pdf`);try{Kt("Uploading...");const dt=await nt.post("/upload",we,{headers:{"Content-Type":"multipart/form-data"}});if(dt.status===200&&(dt!=null&&dt.data)){console.log("Respuesta",dt.data);const _n=Object.keys(dt.data.response);console.log("Keys",_n);const Vs=dt.data.response.shareableLink;Kt("Posting Sale...");try{const $i=await nt.post("/sales",{ice_creams:s+a+l+u,drinks:h,ath:n,cash:t,total:n+t,report:Vs});console.log("Response:",$i.data.sale_id),ii(!0),await nt.post("/orders/copy_orders",{sale_id:$i.data.sale_id}).then(Yt=>{console.log(Yt.data),Y(Os=>Os+1),location.reload()}).catch(Yt=>{console.log("Error",Yt)}),await nt.delete("/orders").then(Yt=>{console.log(Yt.data),Y(Os=>Os+1),location.reload()}).catch(Yt=>{console.log("Error",Yt)}),window.location.reload()}catch($i){console.error("Error",$i)}}}catch(dt){Kt("Error Uploading..."),console.error("Error uploading file:",dt)}console.log("Report generated"),vi(!1)};Kt("Generating Charts..."),pe(),console.log("No longer deleting")},Xt=Te=>{console.log("Month",Re),console.log("Year",Be),console.log("Day",ge),nt.get("/sales",{params:{month:Re,day:ge,year:Be}}).then(gt=>{console.log("Response",gt.data),de(gt.data)}).catch(gt=>{console.log("Error",gt)})},Ns=async Te=>{try{console.log(Te);const gt=await nt.delete("/sales",{data:{id:Te}});console.log("Item deleted:",gt.data),nt.get("/sales").then(Jt=>{console.log("Response",Jt.data),de(Jt.data)}).catch(Jt=>{console.log("Error",Jt)})}catch(gt){console.log("error:",gt)}pt(!1)},un=Te=>{console.log("Sales to be reported",oe),nt.get("/sales/sum",{params:{month:Re,day:ge,year:Be}}).then(gt=>{console.log("Response",gt.data);let Jt=gt.data.totals;console.log("SUMMMMMMMMMMMM",Jt);const rt="Searched Report",bt=Fe.internal.pageSize.getWidth(),xt=Fe.getStringUnitWidth(rt)*Fe.internal.getFontSize()/Fe.internal.scaleFactor,Rn=(bt-xt)/2;Fe.text(rt,Rn,10),Fe.setDrawColor(0),Fe.setLineWidth(.5),Fe.line(20,15,bt-20,15);const kr=["Ice Creams","Drinks","Ath","Cash","Total"];let Pe=Jt.IceCreams,St=Jt.Drinks,wt=Jt.ATH,jt=Jt.Cash,Bt=Jt.Total;const fn=[[Pe,St,Ia(wt),Ia(jt),Ia(Bt)]];cm(Fe,{head:[kr],body:fn,startY:20,theme:"grid"});let on=Fe.lastAutoTable.finalY||40;Fe.text("Sales By Day",20,on+20);const Ni=["Date","Ice Creams","Drinks","Ath","Cash","Total"];console.log("Timestamp",R);const Qn=[];oe.forEach(Pt=>{const It=[Pt.Date,Pt.IceCreams,Pt.Drinks,Ia(Pt.ATH),Ia(Pt.CASH),Ia(Pt.Total)];Qn.push(It)}),cm(Fe,{head:[Ni],body:Qn,startY:on+25,theme:"grid"}),Fe.save(`${R}.pdf`),console.log("Report generated")}).catch(gt=>{console.log("Error",gt)})},[as,cr]=O.useState(0),[wn,pt]=O.useState(!1),Qt=()=>pt(!1),Ws=Te=>{pt(!0),cr(Te)},[Dn,vi]=O.useState(!1),Ii=()=>vi(!1),ft=()=>vi(!0),ji=Te=>{window.open(Te,"_blank")},[Qi,di]=O.useState(!1),[Fn,jn]=O.useState(!0),[Ft,Xn]=O.useState(1),gs=10,os=Math.ceil(oe.length/gs),Ri=(Ft-1)*gs,xi=oe.slice(Ri,Ri+gs);console.log("Current Rows",xi[1]);const Pi=()=>{Ft<os&&Xn(Ft+1)},bi=()=>{Ft>1&&Xn(Ft-1)},[Ds,Bi]=O.useState([]),[Ui,si]=O.useState([]);return S.jsxs("div",{children:[S.jsx(yt,{show:Dn,onHide:Ii,children:Qe?S.jsxs(yt.Body,{children:["Submiting Report:",Gt]}):S.jsxs(S.Fragment,{children:[S.jsx(yt.Header,{closeButton:!0,children:S.jsx(yt.Title,{children:"Submmiting Sale"})}),S.jsx(yt.Body,{children:"Warning, you're about to submit a sale!"}),S.jsxs(yt.Footer,{children:[S.jsx(yr,{variant:"secondary",onClick:Ii,children:"Cancel"}),S.jsx("button",{ref:Xe,className:"btn btn-primary",onClick:ps,children:"Submit"})]})]})}),S.jsxs(yt,{show:wn,onHide:Qt,children:[S.jsx(yt.Header,{closeButton:!0,children:S.jsx(yt.Title,{children:"Deleting Sale"})}),S.jsx(yt.Body,{children:"Warning, you're about to delete a sale!"}),S.jsxs(yt.Footer,{children:[S.jsx(yr,{variant:"secondary",onClick:Qt,children:"Cancel"}),S.jsx("button",{className:"btn btn-primary",onClick:()=>Ns(as),children:"Delete"})]})]}),S.jsxs("div",{className:"w-100 d-flex flex-row justify-content-between",style:{height:"10vh"},children:[S.jsx("div",{className:"d-flex pt-3 w-25 pb-3 text-center align-items-center justify-content-center",children:S.jsx(xr,{children:S.jsx(xr.Link,{to:"/",as:Cl,className:"btn ",style:{fontSize:"1rem"},children:"Home"})})}),S.jsx("div",{className:"pt-3 pb-3 d-flex w-75 text-center justify-content-center align-items-center display-6",children:"Ventas"}),S.jsx("div",{className:"d-flex justify-content-center pt-3 pb-3 w-25"})]}),S.jsxs("div",{className:"d-flex justify-content-start align-items-center flex-column",children:[S.jsx("div",{className:"d-flex flex-row",children:S.jsxs("div",{className:"btn-group rounded-pill border border-dark overflow-hidden",style:{width:"350px",height:"60px"},children:[S.jsx("button",{className:`btn w-50 ${Z?"btn-dark text-white":"btn-outline-dark"}`,onClick:()=>te(!0),style:{fontSize:"1rem"},children:"Ventas de Hoy"}),S.jsx("button",{className:`btn w-50 ${Z?"btn-outline-dark":"btn-dark text-white"}`,onClick:()=>te(!1),style:{fontSize:"1rem"},children:"Todas las Ventas"})]})}),Z?S.jsxs("div",{className:"text-center",children:[S.jsx("div",{className:"d-flex justify-content-around align-items-center flex-row",children:p&&S.jsx("button",{className:"btn btn-success rounded-pill p-3 m-2",onClick:ft,children:" Someter Reporte de Hoy"})}),p&&S.jsxs("div",{className:"w-100 d-flex text-center flex-column align-items-center justify-content-center w-100 mt-5",children:[S.jsxs(sE,{className:"w-100",striped:!0,bordered:!0,hover:!0,size:"lg",responsive:"md",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"text-center",children:[S.jsx("th",{children:"Date"}),S.jsx("th",{children:"ICs"}),S.jsx("th",{children:"Drinks"}),S.jsx("th",{children:"ATH"}),S.jsx("th",{children:"CASH"}),S.jsx("th",{children:"Total"})]})}),S.jsx("tbody",{children:S.jsxs("tr",{className:"text-center",children:[S.jsx("td",{children:R}),S.jsx("td",{children:s+a+l+u}),S.jsx("td",{children:h}),S.jsx("td",{children:S.jsx(Bc,{value:n})}),S.jsx("td",{children:S.jsx(Bc,{value:t})}),S.jsx("td",{children:S.jsx(Bc,{value:n+t})})]})})]}),S.jsxs("div",{className:"container w-100 text-center d-flex flex-row justify-content-around",children:[S.jsx("h6",{children:"Statistic Chart"}),S.jsxs("select",{value:ee,onChange:_t,className:"p-2",children:[S.jsx("option",{value:"",children:"Choose Chart"}),S.jsx("option",{value:"Ice Creams per type",children:"Ice Creams per type"}),S.jsx("option",{value:"Top 5 Ingredients",children:"Top 5 Ingredients"}),S.jsx("option",{value:"Top 5 Toppings",children:"Top 5 Toppings"}),S.jsx("option",{value:"Crunch Time",children:"Crunch Time"})]})]}),S.jsxs("div",{className:"container d-flex ",children:[z&&S.jsx(_c,{className:"m-2",keys:["Rolls","Shakes","Banana","Puppy"],values:[s,a,l,u]}),U&&S.jsx(_c,{className:"m-2",keys:v,values:b}),re&&S.jsx(_c,{className:"m-2",keys:_,values:k}),W&&S.jsx(_c,{className:"m-2",keys:C,values:D})]}),Ve&&S.jsx(S.Fragment,{children:xn.success("File Uploaded")}),S.jsx(jy,{position:"top-right"})]})]}):S.jsxs("div",{className:"container w-100 text-center d-flex flex-column justify-content-center align-items-center",children:[S.jsx("div",{className:"",children:S.jsx("div",{className:"d-flex justify-content-center m-3",children:S.jsxs("div",{className:"btn-group rounded-pill border border-success overflow-hidden",style:{width:"350px",height:"60px"},children:[S.jsx("button",{className:`btn w-50 ${Qi?"btn-success text-white":"btn-outline-success"}`,onClick:()=>di(!0),style:{fontSize:"1rem"},children:"Reportes"}),S.jsx("button",{className:`btn w-50 ${Qi?"btn-outline-success":"btn-success text-white"}`,onClick:()=>di(!1),style:{fontSize:"1rem"},children:"Grficas"})]})})}),Qi?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"d-flex justify-content-center ",children:S.jsxs("div",{className:"btn-group rounded-pill border border-primary overflow-hidden",style:{width:"350px",height:"60px"},children:[S.jsx("button",{className:`btn w-50 ${Fn?"btn-primary text-white":"btn-outline-primary"}`,onClick:()=>jn(!0),style:{fontSize:"1rem"},children:"Vista de Lista"}),S.jsx("button",{className:`btn w-50 ${Fn?"btn-outline-primary":"btn-primary text-white"}`,onClick:()=>jn(!1),style:{fontSize:"1rem"},children:"Vista de Calendario"})]})}),Fn?S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"m-5 container w-100 text-center d-flex flex-row justify-content-around",children:[S.jsxs("select",{value:ge,onChange:We,className:"p-2",children:[S.jsx("option",{value:"",children:"Day"}),Array.from({length:31},(Te,gt)=>S.jsx("option",{value:`0${gt+1}`,children:gt+1},gt))]}),S.jsxs("select",{value:Re,onChange:Lt,className:"p-2",children:[S.jsx("option",{value:"",children:"Month"}),S.jsx("option",{value:"01",children:"January"}),S.jsx("option",{value:"02",children:"February"}),S.jsx("option",{value:"03",children:"March"}),S.jsx("option",{value:"04",children:"April"}),S.jsx("option",{value:"05",children:"May"}),S.jsx("option",{value:"06",children:"June"}),S.jsx("option",{value:"07",children:"July"}),S.jsx("option",{value:"08",children:"August"}),S.jsx("option",{value:"09",children:"September"}),S.jsx("option",{value:"10",children:"October"}),S.jsx("option",{value:"11",children:"November"}),S.jsx("option",{value:"12",children:"December"})]}),S.jsxs("select",{value:Be,className:"p-2",onChange:zt,children:[S.jsx("option",{value:"",children:"Year"}),S.jsx("option",{value:"2024",children:"2024"}),S.jsx("option",{value:"2025",children:"2025"})]}),S.jsx("button",{className:"p-2 btn",onClick:Xt,children:"Search"})]}),S.jsxs(sE,{className:"",striped:!0,bordered:!0,hover:!0,children:[S.jsx("thead",{children:S.jsxs("tr",{className:"text-center",children:[S.jsx("th",{children:"Date"}),S.jsx("th",{children:"Total"}),S.jsx("th",{children:"Report"})," ",S.jsx("th",{children:"Actions"})]})}),S.jsx("tbody",{children:oe.length===0?S.jsx("tr",{children:S.jsx("td",{colSpan:4,className:"text-center text-muted py-3",children:"No sales found"})}):xi.length>0?xi.map(Te=>Te._doc.Closed===!0?S.jsxs("tr",{children:[S.jsx("td",{colSpan:1,className:"text-center text-muted py-3",children:Te.Date||"No hay fecha"}),S.jsx("td",{colSpan:1,className:"text-center text-muted py-3",children:Te._doc.Name||"Annimo"}),S.jsx("td",{colSpan:1,className:"text-center text-muted py-3",children:Te._doc.Message||"Da cerrado"}),S.jsx("td",{colSpan:1,children:S.jsx("button",{className:"btn text-secondary",onClick:()=>Ws(Te._id),children:"Delete"})})]},Te._id):S.jsxs("tr",{className:"text-center",children:[S.jsx("td",{children:Te.Date}),S.jsx("td",{children:S.jsx(Bc,{value:Te.Total})}),S.jsx("td",{children:Te.Report?S.jsx("button",{className:"btn text-secondary",onClick:()=>ji(Te.Report),children:"Open"}):"No Report"}),S.jsx("td",{children:S.jsx("button",{className:"btn text-secondary",onClick:()=>Ws(Te._id),children:"Delete"})})]},Te._id)):S.jsx("tr",{children:S.jsx("td",{colSpan:4,className:"text-center text-muted py-3",children:"No data found"})})})]}),S.jsxs("div",{className:"d-flex justify-content-around align-items-center mt-3 w-100",children:[S.jsx("button",{onClick:bi,disabled:Ft===1,className:"btn btn-outline-dark rounded-pill p-3",children:"Previous"}),S.jsxs("span",{children:["Page ",Ft," of ",os]}),S.jsx("button",{onClick:Pi,disabled:Ft===os,className:"btn btn-outline-dark rounded-pill p-3",children:"Next"})]}),S.jsx("button",{className:"btn btn-outline-dark rounded-pill p-3 m-2",onClick:un,children:"Generate Report of Search"})]}):S.jsx(S.Fragment,{children:S.jsx("div",{className:"text-center m-2",children:S.jsx("div",{className:"d-flex flex-wrap align-items-center ms-auto gap-3",children:S.jsx(Gz,{className:"me-2",tasks:oe})})})})]}):S.jsxs("div",{className:" d-flex flex-column justify-content-around align-items-center w-100 ",children:[S.jsxs("div",{className:"mt-4 mb-4",children:[S.jsxs("select",{value:Ue,lassName:"p-2 m-4",onChange:Ct,children:[S.jsx("option",{value:"0",children:"Total Sales"}),S.jsx("option",{value:"1",children:"Average sale by day of the week"}),S.jsx("option",{value:"2",children:"Average Ice Creams per hour"})]}),he.length>0&&Ue=="2"?S.jsx(S.Fragment,{}):S.jsxs("select",{value:ve,className:"p-2 m-4",onChange:ht,children:[S.jsx("option",{value:"2025",children:"2025"}),S.jsx("option",{value:"2024",children:"2024"})]})]}),he.length>0&&Ue=="0"?S.jsx("div",{className:" d-flex flex-wrap w-100 justify-content-around ",children:Object.keys(he).sort((Te,gt)=>parseInt(he[Te].Month)-parseInt(he[gt].Month)).map(Te=>ve===he[Te].Year?S.jsxs("div",{children:[he[Te].Month=="01"?S.jsxs("p",{children:["January ",he[Te].Year," Sales"]}):he[Te].Month=="02"?S.jsxs(S.Fragment,{children:["February ",he[Te].Year," Sales"]}):he[Te].Month=="03"?S.jsxs(S.Fragment,{children:["March ",he[Te].Year," Sales"]}):he[Te].Month=="04"?S.jsxs(S.Fragment,{children:["April ",he[Te].Year," Sales"]}):he[Te].Month=="05"?S.jsxs(S.Fragment,{children:["May ",he[Te].Year," Sales"]}):he[Te].Month=="06"?S.jsxs(S.Fragment,{children:["June ",he[Te].Year," Sales"]}):he[Te].Month=="07"?S.jsxs(S.Fragment,{children:["July ",he[Te].Year," Sales"]}):he[Te].Month=="08"?S.jsxs(S.Fragment,{children:["August ",he[Te].Year," Sales"]}):he[Te].Month=="09"?S.jsxs(S.Fragment,{children:["September ",he[Te].Year," Sales"]}):he[Te].Month=="10"?S.jsxs(S.Fragment,{children:["October ",he[Te].Year," Sales"]}):he[Te].Month=="11"?S.jsxs(S.Fragment,{children:["November ",he[Te].Year," Sales"]}):he[Te].Month=="12"?S.jsxs(S.Fragment,{children:["December ",he[Te].Year," Sales"]}):S.jsx(S.Fragment,{children:"Other Month"}),S.jsx(_c,{className:"m-5",keys:["Ice Creams","Drinks","ATH","Cash","Total"],values:[he[Te].IceCreams,he[Te].Drinks,he[Te].ATH,he[Te].Cash,he[Te].Total]})]},Te):S.jsx(S.Fragment,{}))}):he.length>0&&Ue=="1"?S.jsx("div",{className:" d-flex flex-wrap w-100 justify-content-around ",children:Object.keys(he).sort((Te,gt)=>parseInt(he[Te].Month)-parseInt(he[gt].Month)).map(Te=>ve===he[Te].Year?S.jsxs("div",{children:[he[Te].Month=="01"?S.jsxs("p",{children:["January ",he[Te].Year," Sales"]}):he[Te].Month=="02"?S.jsxs(S.Fragment,{children:["February ",he[Te].Year," Sales"]}):he[Te].Month=="03"?S.jsxs(S.Fragment,{children:["March ",he[Te].Year," Sales"]}):he[Te].Month=="04"?S.jsxs(S.Fragment,{children:["April ",he[Te].Year," Sales"]}):he[Te].Month=="05"?S.jsxs(S.Fragment,{children:["May ",he[Te].Year," Sales"]}):he[Te].Month=="06"?S.jsxs(S.Fragment,{children:["June ",he[Te].Year," Sales"]}):he[Te].Month=="07"?S.jsxs(S.Fragment,{children:["July ",he[Te].Year," Sales"]}):he[Te].Month=="08"?S.jsxs(S.Fragment,{children:["August ",he[Te].Year," Sales"]}):he[Te].Month=="09"?S.jsxs(S.Fragment,{children:["September ",he[Te].Year," Sales"]}):he[Te].Month=="10"?S.jsxs(S.Fragment,{children:["October ",he[Te].Year," Sales"]}):he[Te].Month=="11"?S.jsxs(S.Fragment,{children:["November ",he[Te].Year," Sales"]}):he[Te].Month=="12"?S.jsxs(S.Fragment,{children:["December ",he[Te].Year," Sales"]}):S.jsx(S.Fragment,{children:"Other Month"}),he[Te].DayTotals?S.jsx(_c,{className:"m-5",keys:["Sundays","Mondays","Tuesdays","Wednesdays","Thursdays","Fridays","Saturdays"],values:[he[Te].DayTotals.Mondays,he[Te].DayTotals.Tuesdays,he[Te].DayTotals.Wednesdays,he[Te].DayTotals.Thursdays,he[Te].DayTotals.Fridays,he[Te].DayTotals.Saturdays,he[Te].DayTotals.Sundays]}):S.jsx(_c,{className:"m-5",keys:["Sundays","Mondays","Tuesdays","Wednesdays","Thursdays","Fridays","Saturdays"],values:[0,0,0,0,0,0,0]})]},Te):S.jsx(S.Fragment,{}))}):he.length>0&&Ue=="2"?S.jsx("div",{className:"d-flex flex-wrap w-100 justify-content-around h-100",children:S.jsx(HH,{className:"m-5",dataPoints:he})}):S.jsx(S.Fragment,{children:"No Sales"})]})]})]})]})}const Je=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},qY=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=KY},KY=Number.MAX_SAFE_INTEGER||9007199254740991;let ut=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),xe=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",n.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",n.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.ASSET_LIST_LOAD_ERROR="assetListLoadError",n.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",n.ASSET_LIST_PARSING_ERROR="assetListParsingError",n.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.ATTACH_MEDIA_ERROR="attachMediaError",n.UNKNOWN="unknown",n}({}),F=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.MEDIA_ENDED="hlsMediaEnded",n.STALL_RESOLVED="hlsStallResolved",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFERED_TO_END="hlsBufferedToEnd",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n.ASSET_LIST_LOADING="hlsAssetListLoading",n.ASSET_LIST_LOADED="hlsAssetListLoaded",n.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",n.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",n.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",n.INTERSTITIAL_STARTED="hlsInterstitialStarted",n.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",n.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",n.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",n.INTERSTITIAL_ENDED="hlsInterstitialEnded",n.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",n.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",n.EVENT_CUE_ENTER="hlsEventCueEnter",n}({});var Zt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},lt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class qu{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class XY{constructor(e,t,i,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new qu(e),this.fast_=new qu(t),this.defaultTTFB_=s,this.ttfb_=new qu(e)}update(e,t){const{slow_:i,fast_:s,ttfb_:r}=this;i.halfLife!==e&&(this.slow_=new qu(e,i.getEstimate(),i.getTotalWeight())),s.halfLife!==t&&(this.fast_=new qu(t,s.getEstimate(),s.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new qu(e,r.getEstimate(),r.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,s=e/1e3,r=i/s;this.fast_.sample(s,r),this.slow_.sample(s,r)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function QY(n,e,t){return(e=ZY(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function In(){return In=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},In.apply(null,arguments)}function gA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function vn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gA(Object(t),!0).forEach(function(i){QY(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gA(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function JY(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ZY(n){var e=JY(n,"string");return typeof e=="symbol"?e:e+""}class Xo{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const i=`[${e}]:`;this.trace=bl,this.debug=t.debug.bind(null,i),this.log=t.log.bind(null,i),this.warn=t.warn.bind(null,i),this.info=t.info.bind(null,i),this.error=t.error.bind(null,i)}}const bl=function(){},eq={trace:bl,debug:bl,log:bl,warn:bl,info:bl,error:bl};function h2(){return In({},eq)}function tq(n,e){const t=self.console[n];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${n}] >`):bl}function mA(n,e,t){return e[n]?e[n].bind(e):tq(n,t)}const f2=h2();function nq(n,e,t){const i=h2();if(typeof console=="object"&&n===!0||typeof n=="object"){const s=["debug","log","info","warn","error"];s.forEach(r=>{i[r]=mA(r,n,t)});try{i.log(`Debug logs enabled for "${e}" in hls.js version 1.6.2`)}catch{return h2()}s.forEach(r=>{f2[r]=mA(r,n)})}else In(f2,i);return i}const an=f2;function ec(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function iq(n){return typeof self<"u"&&n===self.ManagedMediaSource}function CN(n,e){const t=Object.keys(n),i=Object.keys(e),s=t.length,r=i.length;return!s||!r||s===r&&!t.some(a=>i.indexOf(a)===-1)}function _r(n,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(n);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const t=n.length;let i,s,r,a="",o=0;for(;o<t;){if(i=n[o++],i===0&&e)return a;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:s=n[o++],a+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=n[o++],r=n[o++],a+=String.fromCharCode((i&15)<<12|(s&63)<<6|(r&63)<<0);break}}return a}const Fa={hexDump:function(n){let e="";for(let t=0;t<n.length;t++){let i=n[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e}};function sq(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var X1={exports:{}},yA;function rq(){return yA||(yA=1,function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):c;var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var p=s.exec(f.path);f.netLoc=p[1],f.path=p[2]}f.netLoc&&!f.path&&(f.path="/");var m={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(m.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)m.path=f.path,h.params||(m.params=f.params,h.query||(m.query=f.query));else{var v=f.path,y=v.substring(0,v.lastIndexOf("/")+1)+h.path;m.path=o.normalizePath(y)}return m.path===null&&(m.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(m)},parseURL:function(l){var c=i.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(r,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=o})()}(X1)),X1.exports}var kw=rq();class Cw{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Ln={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class IN{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,oq(this,"stats")}setByteRange(e,t){const i=e.split("@",2);let s;i.length===1?s=(t==null?void 0:t.byteRangeEndOffset)||0:s=parseInt(i[1]),this._byteRange=[s,parseInt(i[0])+s]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Ln.AUDIO]:null,[Ln.VIDEO]:null,[Ln.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Cw),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=kw.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Ln.AUDIO]=null,e[Ln.VIDEO]=null,e[Ln.AUDIOVIDEO]=null}}function is(n){return n.sn!=="initSegment"}class Q1 extends IN{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],t=this.byteRange[1];if(Je(e)&&Je(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const i=Object.keys(this.levelkeys);if(i.length===1)return this._decryptdata=this.levelkeys[i[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Je(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),i=t.length;if(i>1||i===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Je(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return is(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,i,s,r,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:i,startDTS:s,endDTS:r,partial:a};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,i),l.startDTS=Math.min(l.startDTS,s),l.endDTS=Math.max(l.endDTS,r)}}class aq extends IN{constructor(e,t,i,s,r){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=s;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function RN(n,e){const t=Object.getPrototypeOf(n);if(t){const i=Object.getOwnPropertyDescriptor(t,e);return i||RN(t,e)}}function oq(n,e){const t=RN(n,e);t&&(t.enumerable=!0,Object.defineProperty(n,e,t))}const K0=Math.pow(2,32)-1,lq=[].push,PN={video:1,audio:2,id3:3,text:4};function zi(n){return String.fromCharCode.apply(null,n)}function NN(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function At(n,e){const t=DN(n,e);return t<0?4294967296+t:t}function vA(n,e){let t=At(n,e);return t*=Math.pow(2,32),t+=At(n,e+4),t}function DN(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function J1(n,e,t){n[e]=t>>24,n[e+1]=t>>16&255,n[e+2]=t>>8&255,n[e+3]=t&255}function cq(n){const e=n.byteLength;for(let t=0;t<e;){const i=At(n,t);if(i>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=i>1?t+i:e}return!1}function Ot(n,e){const t=[];if(!e.length)return t;const i=n.byteLength;for(let s=0;s<i;){const r=At(n,s),a=zi(n.subarray(s+4,s+8)),o=r>1?s+r:i;if(a===e[0])if(e.length===1)t.push(n.subarray(s+8,o));else{const l=Ot(n.subarray(s+8,o),e.slice(1));l.length&&lq.apply(t,l)}s=o}return t}function uq(n){const e=[],t=n[0];let i=8;const s=At(n,i);i+=4;let r=0,a=0;t===0?(r=At(n,i),a=At(n,i+4),i+=8):(r=vA(n,i),a=vA(n,i+8),i+=16),i+=2;let o=n.length+a;const l=NN(n,i);i+=2;for(let c=0;c<l;c++){let u=i;const d=At(n,u);u+=4;const h=d&2147483647;if((d&2147483648)>>>31===1)return an.warn("SIDX has hierarchical references (not supported)"),null;const p=At(n,u);u+=4,e.push({referenceSize:h,subsegmentDuration:p,info:{duration:p/s,start:o,end:o+h-1}}),o+=h,u+=4,i=u}return{earliestPresentationTime:r,timescale:s,version:t,referencesCount:l,references:e}}function ON(n){const e=[],t=Ot(n,["moov","trak"]);for(let s=0;s<t.length;s++){const r=t[s],a=Ot(r,["tkhd"])[0];if(a){let o=a[0];const l=At(a,o===0?12:20),c=Ot(r,["mdia","mdhd"])[0];if(c){o=c[0];const u=At(c,o===0?12:20),d=Ot(r,["mdia","hdlr"])[0];if(d){const h=zi(d.subarray(8,12)),f={soun:Ln.AUDIO,vide:Ln.VIDEO}[h],p=Ot(r,["mdia","minf","stbl","stsd"])[0],m=dq(p);f?(e[l]={timescale:u,type:f,stsd:m},e[f]=vn({timescale:u,id:l},m)):e[l]={timescale:u,type:h,stsd:m}}}}}return Ot(n,["moov","mvex","trex"]).forEach(s=>{const r=At(s,4),a=e[r];a&&(a.default={duration:At(s,12),flags:At(s,20)})}),e}function dq(n){const e=n.subarray(8),t=e.subarray(86),i=zi(e.subarray(4,8));let s=i,r;const a=i==="enca"||i==="encv";if(a){const c=Ot(e,[i])[0].subarray(i==="enca"?28:78);Ot(c,["sinf"]).forEach(d=>{const h=Ot(d,["schm"])[0];if(h){const f=zi(h.subarray(4,8));if(f==="cbcs"||f==="cenc"){const p=Ot(d,["frma"])[0];p&&(s=zi(p))}}})}const o=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const l=Ot(t,["avcC"])[0];l&&l.length>3&&(s+="."+fm(l[1])+fm(l[2])+fm(l[3]),r=hm(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const l=Ot(e,[i])[0],c=Ot(l.subarray(28),["esds"])[0];if(c&&c.length>7){let u=4;if(c[u++]!==3)break;u=Z1(c,u),u+=2;const d=c[u++];if(d&128&&(u+=2),d&64&&(u+=c[u++]),c[u++]!==4)break;u=Z1(c,u);const h=c[u++];if(h===64)s+="."+fm(h);else break;if(u+=12,c[u++]!==5)break;u=Z1(c,u);const f=c[u++];let p=(f&248)>>3;p===31&&(p+=1+((f&7)<<3)+((c[u]&224)>>5)),s+="."+p}break}case"hvc1":case"hev1":{const l=Ot(t,["hvcC"])[0];if(l&&l.length>12){const c=l[1],u=["","A","B","C"][c>>6],d=c&31,h=At(l,2),f=(c&32)>>5?"H":"L",p=l[12],m=l.subarray(6,12);s+="."+u+d,s+="."+h.toString(16).toUpperCase(),s+="."+f+p;let v="";for(let y=m.length;y--;){const b=m[y];(b||v)&&(v="."+b.toString(16).toUpperCase()+v)}s+=v}r=hm(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{s=hm(s,t)||s;break}case"vp09":{const l=Ot(t,["vpcC"])[0];if(l&&l.length>6){const c=l[4],u=l[5],d=l[6]>>4&15;s+="."+Ma(c)+"."+Ma(u)+"."+Ma(d)}break}case"av01":{const l=Ot(t,["av1C"])[0];if(l&&l.length>2){const c=l[1]>>>5,u=l[1]&31,d=l[2]>>>7?"H":"M",h=(l[2]&64)>>6,f=(l[2]&32)>>5,p=c===2&&h?f?12:10:h?10:8,m=(l[2]&16)>>4,v=(l[2]&8)>>3,y=(l[2]&4)>>2,b=l[2]&3;s+="."+c+"."+Ma(u)+d+"."+Ma(p)+"."+m+"."+v+y+b+"."+Ma(1)+"."+Ma(1)+"."+Ma(1)+"."+0,r=hm("dav1",t)}break}}return{codec:s,encrypted:a,supplemental:r}}function hm(n,e){const t=Ot(e,["dvvC"]),i=t.length?t[0]:Ot(e,["dvcC"])[0];if(i){const s=i[2]>>1&127,r=i[2]<<5&32|i[3]>>3&31;return n+"."+Ma(s)+"."+Ma(r)}}function Z1(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function fm(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function Ma(n){return(n<10?"0":"")+n}function hq(n,e){if(!n||!e)return n;const t=e.keyId;return t&&e.isCommonEncryption&&Ot(n,["moov","trak"]).forEach(s=>{const a=Ot(s,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=Ot(a,["enca"]);const l=o.length>0;l||(o=Ot(a,["encv"])),o.forEach(c=>{const u=l?c.subarray(28):c.subarray(78);Ot(u,["sinf"]).forEach(h=>{const f=MN(h);if(f){const p=f.subarray(8,24);p.some(m=>m!==0)||(an.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${Fa.hexDump(p)} -> ${Fa.hexDump(t)}`),f.set(t,8))}})})}),n}function MN(n){const e=Ot(n,["schm"])[0];if(e){const t=zi(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return Ot(n,["schi","tenc"])[0]}return null}function fq(n,e){return Ot(e,["moof","traf"]).reduce((t,i)=>{const s=Ot(i,["tfdt"])[0],r=s[0],a=Ot(i,["tfhd"]).reduce((o,l)=>{const c=At(l,4),u=n[c];if(u){let d=At(s,4);if(r===1){if(d===K0)return an.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),o;d*=K0+1,d+=At(s,8)}const h=u.timescale||9e4,f=d/h;if(Je(f)&&(o===null||f<o))return f}return o},null);return a!==null&&Je(a)&&(t===null||a<t)?a:t},null)}function pq(n,e){let t=0,i=0,s=0;const r=Ot(n,["moof","traf"]);for(let a=0;a<r.length;a++){const o=r[a],l=Ot(o,["tfhd"])[0],c=At(l,4),u=e[c];if(!u)continue;const d=u.default,h=At(l,0)|(d==null?void 0:d.flags);let f=d==null?void 0:d.duration;h&8&&(h&2?f=At(l,12):f=At(l,8));const p=u.timescale||9e4,m=Ot(o,["trun"]);for(let v=0;v<m.length;v++){if(t=gq(m[v]),!t&&f){const y=At(m[v],4);t=f*y}u.type===Ln.VIDEO?i+=t/p:u.type===Ln.AUDIO&&(s+=t/p)}}if(i===0&&s===0){let a=1/0,o=0,l=0;const c=Ot(n,["sidx"]);for(let u=0;u<c.length;u++){const d=uq(c[u]);if(d!=null&&d.references){a=Math.min(a,d.earliestPresentationTime/d.timescale);const h=d.references.reduce((f,p)=>f+p.info.duration||0,0);o=Math.max(o,h+d.earliestPresentationTime/d.timescale),l=o-a}}if(l&&Je(l))return l}return i||s}function gq(n){const e=At(n,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let i=0;const s=At(n,4);for(let r=0;r<s;r++){if(e&256){const a=At(n,t);i+=a,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return i}function mq(n,e,t){Ot(e,["moof","traf"]).forEach(i=>{Ot(i,["tfhd"]).forEach(s=>{const r=At(s,4),a=n[r];if(!a)return;const o=a.timescale||9e4;Ot(i,["tfdt"]).forEach(l=>{const c=l[0],u=t*o;if(u){let d=At(l,4);if(c===0)d-=u,d=Math.max(d,0),J1(l,4,d);else{d*=Math.pow(2,32),d+=At(l,8),d-=u,d=Math.max(d,0);const h=Math.floor(d/(K0+1)),f=Math.floor(d%(K0+1));J1(l,4,h),J1(l,8,f)}}})})})}function yq(n){const e={valid:null,remainder:null},t=Ot(n,["moof"]);if(t.length<2)return e.remainder=n,e;const i=t[t.length-1];return e.valid=n.slice(0,i.byteOffset-8),e.remainder=n.slice(i.byteOffset-8),e}function Yr(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function xA(n,e){const t=[],i=e.samples,s=e.timescale,r=e.id;let a=!1;return Ot(i,["moof"]).map(l=>{const c=l.byteOffset-8;Ot(l,["traf"]).map(d=>{const h=Ot(d,["tfdt"]).map(f=>{const p=f[0];let m=At(f,4);return p===1&&(m*=Math.pow(2,32),m+=At(f,8)),m/s})[0];return h!==void 0&&(n=h),Ot(d,["tfhd"]).map(f=>{const p=At(f,4),m=At(f,0)&16777215,v=(m&1)!==0,y=(m&2)!==0,b=(m&8)!==0;let x=0;const _=(m&16)!==0;let T=0;const C=(m&32)!==0;let L=8;p===r&&(v&&(L+=8),y&&(L+=4),b&&(x=At(f,L),L+=4),_&&(T=At(f,L),L+=4),C&&(L+=4),e.type==="video"&&(a=rv(e.codec)),Ot(d,["trun"]).map(k=>{const M=k[0],D=At(k,0)&16777215,I=(D&1)!==0;let R=0;const q=(D&4)!==0,Y=(D&256)!==0;let ee=0;const j=(D&512)!==0;let z=0;const B=(D&1024)!==0,U=(D&2048)!==0;let Q=0;const re=At(k,4);let N=8;I&&(R=At(k,N),N+=4),q&&(N+=4);let W=R+c;for(let K=0;K<re;K++){if(Y?(ee=At(k,N),N+=4):ee=x,j?(z=At(k,N),N+=4):z=T,B&&(N+=4),U&&(M===0?Q=At(k,N):Q=DN(k,N),N+=4),e.type===Ln.VIDEO){let Z=0;for(;Z<z;){const te=At(i,W);if(W+=4,vq(a,i[W])){const oe=i.subarray(W,W+te);Iw(oe,a?2:1,n+Q/s,t)}W+=te,Z+=te+4}}n+=ee/s}}))})})}),t}function rv(n){if(!n)return!1;const e=n.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function vq(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Iw(n,e,t,i){const s=FN(n);let r=0;r+=e;let a=0,o=0,l=0;for(;r<s.length;){a=0;do{if(r>=s.length)break;l=s[r++],a+=l}while(l===255);o=0;do{if(r>=s.length)break;l=s[r++],o+=l}while(l===255);const c=s.length-r;let u=r;if(o<c)r+=o;else if(o>c){an.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(a===4){if(s[u++]===181){const h=NN(s,u);if(u+=2,h===49){const f=At(s,u);if(u+=4,f===1195456820){const p=s[u++];if(p===3){const m=s[u++],v=31&m,y=64&m,b=y?2+v*3:0,x=new Uint8Array(b);if(y){x[0]=m;for(let _=1;_<b;_++)x[_]=s[u++]}i.push({type:p,payloadType:a,pts:t,bytes:x})}}}}}else if(a===5&&o>16){const d=[];for(let p=0;p<16;p++){const m=s[u++].toString(16);d.push(m.length==1?"0"+m:m),(p===3||p===5||p===7||p===9)&&d.push("-")}const h=o-16,f=new Uint8Array(h);for(let p=0;p<h;p++)f[p]=s[u++];i.push({payloadType:a,pts:t,uuid:d.join(""),userData:_r(f),userDataBytes:f})}}}function FN(n){const e=n.byteLength,t=[];let i=1;for(;i<e-2;)n[i]===0&&n[i+1]===0&&n[i+2]===3?(t.push(i+2),i+=2):i++;if(t.length===0)return n;const s=e-t.length,r=new Uint8Array(s);let a=0;for(i=0;i<s;a++,i++)a===t[0]&&(a++,t.shift()),r[i]=n[a];return r}function xq(n){const e=n[0];let t="",i="",s=0,r=0,a=0,o=0,l=0,c=0;if(e===0){for(;zi(n.subarray(c,c+1))!=="\0";)t+=zi(n.subarray(c,c+1)),c+=1;for(t+=zi(n.subarray(c,c+1)),c+=1;zi(n.subarray(c,c+1))!=="\0";)i+=zi(n.subarray(c,c+1)),c+=1;i+=zi(n.subarray(c,c+1)),c+=1,s=At(n,12),r=At(n,16),o=At(n,20),l=At(n,24),c=28}else if(e===1){c+=4,s=At(n,c),c+=4;const d=At(n,c);c+=4;const h=At(n,c);for(c+=4,a=2**32*d+h,qY(a)||(a=Number.MAX_SAFE_INTEGER,an.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=At(n,c),c+=4,l=At(n,c),c+=4;zi(n.subarray(c,c+1))!=="\0";)t+=zi(n.subarray(c,c+1)),c+=1;for(t+=zi(n.subarray(c,c+1)),c+=1;zi(n.subarray(c,c+1))!=="\0";)i+=zi(n.subarray(c,c+1)),c+=1;i+=zi(n.subarray(c,c+1)),c+=1}const u=n.subarray(c,n.byteLength);return{schemeIdUri:t,value:i,timeScale:s,presentationTime:a,presentationTimeDelta:r,eventDuration:o,id:l,payload:u}}function bq(n,...e){const t=e.length;let i=8,s=t;for(;s--;)i+=e[s].byteLength;const r=new Uint8Array(i);for(r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),s=0,i=8;s<t;s++)r.set(e[s],i),i+=e[s].byteLength;return r}function Sq(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let i,s;i=0,s=new Uint8Array;let r;i>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),bq([112,115,115,104],new Uint8Array([i,0,0,0]),n,r,s,a,t||new Uint8Array)}function wq(n){const e=[];if(n instanceof ArrayBuffer){const t=n.byteLength;let i=0;for(;i+32<t;){const s=new DataView(n,i),r=_q(s);e.push(r),i+=r.size}}return e}function _q(n){const e=n.getUint32(0),t=n.byteOffset,i=n.byteLength;if(i<e)return{offset:t,size:i};if(n.getUint32(4)!==1886614376)return{offset:t,size:e};const r=n.getUint32(8)>>>24;if(r!==0&&r!==1)return{offset:t,size:e};const a=n.buffer,o=Fa.hexDump(new Uint8Array(a,t+12,16)),l=n.getUint32(28);let c=null,u=null;if(r===0){if(e-32<l||l<22)return{offset:t,size:e};u=new Uint8Array(a,t+32,l)}else if(r===1){if(!l||i<t+32+l*16+16)return{offset:t,size:e};c=[];for(let d=0;d<l;d++)c.push(new Uint8Array(a,t+32+d*16,16))}return{version:r,systemId:o,kids:c,data:u,offset:t,size:e}}const jN=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Ud={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function BN(n,e){const t=Ud[e];return!!t&&!!t[n.slice(0,4)]}function p2(n,e,t=!0){return!n.split(",").some(i=>!UN(i,e,t))}function UN(n,e,t=!0){var i;const s=ec(t);return(i=s==null?void 0:s.isTypeSupported(gp(n,e)))!=null?i:!1}function gp(n,e){return`${e}/mp4;codecs=${n}`}function bA(n){if(n){const e=n.substring(0,4);return Ud.video[e]}return 2}function X0(n){const e=jN();return n.split(",").reduce((t,i)=>{const r=e&&rv(i)?9:Ud.video[i];return r?(r*2+t)/(t?3:2):(Ud.audio[i]+t)/(t?2:1)},0)}const ex={};function Eq(n,e=!0){if(ex[n])return ex[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[n];for(let s=0;s<t.length;s++){var i;if(UN(t[s],"audio",e))return ex[n]=t[s],t[s];if(t[s]==="mp3"&&(i=ec(e))!=null&&i.isTypeSupported("audio/mpeg"))return""}return n}const Tq=/flac|opus|mp4a\.40\.34/i;function Q0(n,e=!0){return n.replace(Tq,t=>Eq(t.toLowerCase(),e))}function Aq(n,e){const t=[];if(n){const i=n.split(",");for(let s=0;s<i.length;s++)BN(i[s],"video")||t.push(i[s])}return e&&t.push(e),t.join(",")}function Xm(n,e){if(n&&(n.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(n)!==-1))return n;if(e){const t=e.split(",");if(t.length>1){if(n){for(let i=t.length;i--;)if(t[i].substring(0,4)===n.substring(0,4))return t[i]}return t[0]}}return e||n}function Lq(n){const e=n.split(",");for(let t=0;t<e.length;t++){const i=e[t].split(".");if(i.length>2){let s=i.shift()+".";s+=parseInt(i.shift()).toString(16),s+=("000"+parseInt(i.shift()).toString(16)).slice(-4),e[t]=s}}return e.join(",")}function kq(n){if(n.startsWith("av01.")){const e=n.split("."),t=["0","111","01","01","01","0"];for(let i=e.length;i>4&&i<10;i++)e[i]=t[i-4];return e.join(".")}return n}function SA(n){const e=ec(n)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function $N(n){return n.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const HN={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function zN(n,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:n}}const wA={};function Cq(n,e,t,i,s,r){const a=n.audioCodec?n.audioGroups:null,o=r==null?void 0:r.audioCodec,l=r==null?void 0:r.channels,c=l?parseInt(l):o?1/0:2;let u=null;if(a!=null&&a.length)try{a.length===1&&a[0]?u=e.groups[a[0]].channels:u=a.reduce((d,h)=>{if(h){const f=e.groups[h];if(!f)throw new Error(`Audio track group ${h} not found`);Object.keys(f.channels).forEach(p=>{d[p]=(d[p]||0)+f.channels[p]})}return d},{2:0})}catch{return!0}return n.videoCodec!==void 0&&(n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(i,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(s,8e6))||!!u&&Je(c)&&Object.keys(u).some(d=>parseInt(d)>c)}function WN(n,e,t){const i=n.videoCodec,s=n.audioCodec;if(!i&&!s||!t)return Promise.resolve(HN);const r=[];if(i){const a={width:n.width,height:n.height,bitrate:Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)),framerate:n.frameRate||30},o=n.videoRange;o!=="SDR"&&(a.transferFunction=o.toLowerCase());const l=i.split(","),c=navigator.userAgent;if(l.some(u=>rv(u))&&jN())return Promise.resolve(zN(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent sting: (${c})`),r));r.push.apply(r,l.map(u=>({type:"media-source",video:vn(vn({},a),{},{contentType:gp(kq(u),"video")})})))}return s&&n.audioGroups&&n.audioGroups.forEach(a=>{var o;a&&((o=e.groups[a])==null||o.tracks.forEach(l=>{if(l.groupId===a){const c=l.channels||"",u=parseFloat(c);Je(u)&&u>2&&r.push.apply(r,s.split(",").map(d=>({type:"media-source",audio:{contentType:gp(d,"audio"),channels:""+u}})))}}))}),Promise.all(r.map(a=>{const o=Iq(a);return wA[o]||(wA[o]=t.decodingInfo(a))})).then(a=>({supported:!a.some(o=>!o.supported),configurations:r,decodingInfoResults:a})).catch(a=>({supported:!1,configurations:r,decodingInfoResults:[],error:a}))}function Iq(n){const{audio:e,video:t}=n,i=t||e;if(i){const s=$N(i.contentType);if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${s}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${s}`}return""}const g2=["NONE","TYPE-0","TYPE-1",null];function Rq(n){return g2.indexOf(n)>-1}const J0=["SDR","PQ","HLG"];function Pq(n){return!!n&&J0.indexOf(n)>-1}var Qm={No:"",Yes:"YES",v2:"v2"};function _A(n){const{canSkipUntil:e,canSkipDateRanges:t,age:i}=n,s=i<e/2;return e&&s?t?Qm.v2:Qm.Yes:Qm.No}class EA{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class mp{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(i=>!!i).map(i=>i.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const i=(t=e.supplemental)==null?void 0:t.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return TA(this._audioGroups,e)}hasSubtitleGroup(e){return TA(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(t)===-1&&i.push(t)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(t)===-1&&i.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function TA(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function Nq(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function Dq(n,e){let t=!1,i=[];if(n&&(t=n!=="SDR",i=[n]),e){i=e.allowedVideoRanges||J0.slice(0);const s=i.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:s&&Nq(),t||(i=["SDR"])}return{preferHDR:t,allowedVideoRanges:i}}const Oq=n=>{const e=new WeakSet;return(t,i)=>{if(n&&(i=n(t,i)),typeof i=="object"&&i!==null){if(e.has(i))return;e.add(i)}return i}},ni=(n,e)=>JSON.stringify(n,Oq(e));function Mq(n,e,t,i,s){const r=Object.keys(n),a=i==null?void 0:i.channels,o=i==null?void 0:i.audioCodec,l=s==null?void 0:s.videoCodec,c=a&&parseInt(a)===2;let u=!1,d=!1,h=1/0,f=1/0,p=1/0,m=1/0,v=0,y=[];const{preferHDR:b,allowedVideoRanges:x}=Dq(e,s);for(let k=r.length;k--;){const M=n[r[k]];u||(u=M.channels[2]>0),h=Math.min(h,M.minHeight),f=Math.min(f,M.minFramerate),p=Math.min(p,M.minBitrate),x.filter(I=>M.videoRanges[I]>0).length>0&&(d=!0)}h=Je(h)?h:0,f=Je(f)?f:0;const _=Math.max(1080,h),T=Math.max(30,f);p=Je(p)?p:t,t=Math.max(p,t),d||(e=void 0);const C=r.length>1;return{codecSet:r.reduce((k,M)=>{const D=n[M];if(M===k)return k;if(y=d?x.filter(I=>D.videoRanges[I]>0):[],C){if(D.minBitrate>t)return Ra(M,`min bitrate of ${D.minBitrate} > current estimate of ${t}`),k;if(!D.hasDefaultAudio)return Ra(M,"no renditions with default or auto-select sound found"),k;if(o&&M.indexOf(o.substring(0,4))%5!==0)return Ra(M,`audio codec preference "${o}" not found`),k;if(a&&!c){if(!D.channels[a])return Ra(M,`no renditions with ${a} channel sound found (channels options: ${Object.keys(D.channels)})`),k}else if((!o||c)&&u&&D.channels[2]===0)return Ra(M,"no renditions with stereo sound found"),k;if(D.minHeight>_)return Ra(M,`min resolution of ${D.minHeight} > maximum of ${_}`),k;if(D.minFramerate>T)return Ra(M,`min framerate of ${D.minFramerate} > maximum of ${T}`),k;if(!y.some(I=>D.videoRanges[I]>0))return Ra(M,`no variants with VIDEO-RANGE of ${ni(y)} found`),k;if(l&&M.indexOf(l.substring(0,4))%5!==0)return Ra(M,`video codec preference "${l}" not found`),k;if(D.maxScore<v)return Ra(M,`max score of ${D.maxScore} < selected max of ${v}`),k}return k&&(X0(M)>=X0(k)||D.fragmentError>n[k].fragmentError)?k:(m=D.minIndex,v=D.maxScore,M)},void 0),videoRanges:y,preferHDR:b,minFramerate:f,minBitrate:p,minIndex:m}}function Ra(n,e){an.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function VN(n){return n.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const s=t.channels||"2";return i.channels[s]=(i.channels[s]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Fq(n,e,t,i){return n.slice(t,i+1).reduce((s,r,a)=>{if(!r.codecSet)return s;const o=r.audioGroups;let l=s[r.codecSet];l||(s[r.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,r.bitrate);const c=Math.min(r.height,r.width);return l.minHeight=Math.min(l.minHeight,c),l.minFramerate=Math.min(l.minFramerate,r.frameRate),l.minIndex=Math.min(l.minIndex,a),l.maxScore=Math.max(l.maxScore,r.score),l.fragmentError+=r.fragmentError,l.videoRanges[r.videoRange]=(l.videoRanges[r.videoRange]||0)+1,o&&o.forEach(u=>{if(!u)return;const d=e.groups[u];d&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(h=>{l.channels[h]=(l.channels[h]||0)+d.channels[h]}))}),s},{})}function AA(n){if(!n)return n;const{lang:e,assocLang:t,characteristics:i,channels:s,audioCodec:r}=n;return{lang:e,assocLang:t,characteristics:i,channels:s,audioCodec:r}}function Ha(n,e,t){if("attrs"in n){const i=e.indexOf(n);if(i!==-1)return i}for(let i=0;i<e.length;i++){const s=e[i];if(tu(n,s,t))return i}return-1}function tu(n,e,t){const{groupId:i,name:s,lang:r,assocLang:a,default:o}=n,l=n.forced;return(i===void 0||e.groupId===i)&&(s===void 0||e.name===s)&&(r===void 0||jq(r,e.lang))&&(r===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in n)||Bq(n.characteristics||"",e.characteristics))&&(t===void 0||t(n,e))}function jq(n,e="--"){return n.length===e.length?n===e:n.startsWith(e)||e.startsWith(n)}function Bq(n,e=""){const t=n.split(","),i=e.split(",");return t.length===i.length&&!t.some(s=>i.indexOf(s)===-1)}function Nc(n,e){const{audioCodec:t,channels:i}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function Uq(n,e,t,i,s){const r=e[i],o=e.reduce((h,f,p)=>{const m=f.uri;return(h[m]||(h[m]=[])).push(p),h},{})[r.uri];o.length>1&&(i=Math.max.apply(Math,o));const l=r.videoRange,c=r.frameRate,u=r.codecSet.substring(0,4),d=LA(e,i,h=>{if(h.videoRange!==l||h.frameRate!==c||h.codecSet.substring(0,4)!==u)return!1;const f=h.audioGroups,p=t.filter(m=>!f||f.indexOf(m.groupId)!==-1);return Ha(n,p,s)>-1});return d>-1?d:LA(e,i,h=>{const f=h.audioGroups,p=t.filter(m=>!f||f.indexOf(m.groupId)!==-1);return Ha(n,p,s)>-1})}function LA(n,e,t){for(let i=e;i>-1;i--)if(t(n[i]))return i;for(let i=e+1;i<n.length;i++)if(t(n[i]))return i;return-1}function Z0(n,e){var t;return!!n&&n!==((t=e.loadLevelObj)==null?void 0:t.uri)}class $q extends Xo{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var i;const{fragCurrent:s,partCurrent:r,hls:a}=this,{autoLevelEnabled:o,media:l}=a;if(!s||!l)return;const c=performance.now(),u=r?r.stats:s.stats,d=r?r.duration:s.duration,h=c-u.loading.start,f=a.minAutoLevel,p=s.level,m=this._nextAutoLevel;if(u.aborted||u.loaded&&u.loaded===u.total||p<=f){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const v=m>-1&&m!==p,y=!!t||v;if(!y&&(l.paused||!l.playbackRate||!l.readyState))return;const b=a.mainForwardBufferInfo;if(!y&&b===null)return;const x=this.bwEstimator.getEstimateTTFB(),_=Math.abs(l.playbackRate);if(h<=Math.max(x,1e3*(d/(_*2))))return;const T=b?b.len/_:0,C=u.loading.first?u.loading.first-u.loading.start:-1,L=u.loaded&&C>-1,k=this.getBwEstimate(),M=a.levels,D=M[p],I=Math.max(u.loaded,Math.round(d*(s.bitrate||D.averageBitrate)/8));let R=L?h-C:h;R<1&&L&&(R=Math.min(h,u.loaded*8/k));const q=L?u.loaded*1e3/R:0,Y=x/1e3,ee=q?(I-u.loaded)/q:I*8/k+Y;if(ee<=T)return;const j=q?q*8:k,z=((i=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:i.live)===!0,B=this.hls.config.abrBandWidthUpFactor;let U=Number.POSITIVE_INFINITY,Q;for(Q=p-1;Q>f;Q--){const K=M[Q].maxBitrate,Z=!M[Q].details||z;if(U=this.getTimeToLoadFrag(Y,j,d*K,Z),U<Math.min(T,d+Y))break}if(U>=ee||U>d*10)return;L?this.bwEstimator.sample(h-Math.min(x,C),u.loaded):this.bwEstimator.sampleTTFB(h);const re=M[Q].maxBitrate;this.getBwEstimate()*B>re&&this.resetEstimator(re);const N=this.findBestLevel(re,f,Q,0,T,1,1);N>-1&&(Q=N),this.warn(`Fragment ${s.sn}${r?" part "+r.index:""} of level ${p} is loading too slowly;
      Fragment duration: ${s.duration.toFixed(3)}
      Time to underbuffer: ${T.toFixed(3)} s
      Estimated load time for current fragment: ${ee.toFixed(3)} s
      Estimated load time for down switch fragment: ${U.toFixed(3)} s
      TTFB estimate: ${C|0} ms
      Current BW estimate: ${Je(k)?k|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Q} @ ${re|0} bps`),a.nextLoadLevel=a.nextAutoLevel=Q,this.clearTimer();const W=()=>{if(this.clearTimer(),this.fragCurrent===s&&this.hls.loadLevel===Q&&Q>0){const K=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Q>0?"and switching down":""}
      Fragment duration: ${s.duration.toFixed(3)} s
      Time to underbuffer: ${K.toFixed(3)} s`),s.abortRequests(),this.fragCurrent=this.partCurrent=null,Q>f){let Z=this.findBestLevel(this.hls.levels[f].bitrate,f,Q,0,K,1,1);Z===-1&&(Z=f),this.hls.nextLoadLevel=this.hls.nextAutoLevel=Z,this.resetEstimator(this.hls.levels[Z].bitrate)}}};v||ee>U*2?W():this.timer=self.setInterval(W,U*1e3),a.trigger(F.FRAG_LOAD_EMERGENCY_ABORTED,{frag:s,part:r,stats:u})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new XY(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.FRAG_LOADING,this.onFragLoading,this),e.on(F.FRAG_LOADED,this.onFragLoaded,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this),e.on(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(F.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.FRAG_LOADING,this.onFragLoading,this),e.off(F.FRAG_LOADED,this.onFragLoaded,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this),e.off(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(F.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(F.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var s;this.fragCurrent=i,this.partCurrent=(s=t.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case xe.BUFFER_ADD_CODEC_ERROR:case xe.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case xe.FRAG_LOAD_TIMEOUT:{const i=t.frag,{fragCurrent:s,partCurrent:r}=this;if(i&&s&&i.sn===s.sn&&i.level===s.level){const a=performance.now(),o=r?r.stats:i.stats,l=a-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,c),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,i,s){const r=e+i/t,a=s?e+this.lastLevelLoadSec:0;return r+a}onLevelLoaded(e,t){const i=this.hls.config,{loading:s}=t.stats,r=s.end-s.first;Je(r)&&(this.lastLevelLoadSec=r/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:i}){const s=i?i.stats:t.stats;if(t.type===lt.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const r=i?i.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+s.loaded,l=(a.loaded?a.loaded.duration:0)+r;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){const r={stats:s,frag:t,part:i,id:t.type};this.onFragBuffered(F.FRAG_BUFFERED,r),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:s}=t,r=s!=null&&s.stats.loaded?s.stats:i.stats;if(r.aborted||this.ignoreFragment(i))return;const a=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==lt.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,r=this.findBestLevel(i,t,e,0,s,1,1);if(r>-1)return r;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=i&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,r)&&a[e].loadError<=a[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;const{maxAutoLevel:s,config:r,minAutoLevel:a}=i,o=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=r.abrBandWidthFactor,d=r.abrBandWidthUpFactor;if(c){const v=this.findBestLevel(l,a,s,c,0,u,d);if(v>=0)return this.rebufferNotice=-1,v}let h=o?Math.min(o,r.maxStarvationDelay):r.maxStarvationDelay;if(!c){const v=this.bitrateTestDelay;v&&(h=(o?Math.min(o,r.maxLoadingDelay):r.maxLoadingDelay)-v,this.info(`bitrate test took ${Math.round(1e3*v)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),u=d=1)}const f=this.findBestLevel(l,a,s,c,h,u,d);if(this.rebufferNotice!==f&&(this.rebufferNotice=f,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${f}`)),f>-1)return f;const p=i.levels[a],m=i.loadLevelObj;return m&&(p==null?void 0:p.bitrate)<m.bitrate?a:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,s,r,a,o){var l;const c=s+r,u=this.lastLoadedFragLevel,d=u===-1?this.hls.firstLevel:u,{fragCurrent:h,partCurrent:f}=this,{levels:p,allAudioTracks:m,loadLevel:v,config:y}=this.hls;if(p.length===1)return 0;const b=p[d],x=!!((l=this.hls.latestLevelDetails)!=null&&l.live),_=v===-1||u===-1;let T,C="SDR",L=(b==null?void 0:b.frameRate)||0;const{audioPreference:k,videoPreference:M}=y,D=this.audioTracksByGroup||(this.audioTracksByGroup=VN(m));let I=-1;if(_){if(this.firstSelection!==-1)return this.firstSelection;const j=this.codecTiers||(this.codecTiers=Fq(p,D,t,i)),z=Mq(j,C,e,k,M),{codecSet:B,videoRanges:U,minFramerate:Q,minBitrate:re,minIndex:N,preferHDR:W}=z;I=N,T=B,C=W?U[U.length-1]:U[0],L=Q,e=Math.max(e,re),this.log(`picked start tier ${ni(z)}`)}else T=b==null?void 0:b.codecSet,C=b==null?void 0:b.videoRange;const R=f?f.duration:h?h.duration:0,q=this.bwEstimator.getEstimateTTFB()/1e3,Y=[];for(let j=i;j>=t;j--){var ee;const z=p[j],B=j>d;if(!z)continue;if(y.useMediaCapabilities&&!z.supportedResult&&!z.supportedPromise){const Z=navigator.mediaCapabilities;typeof(Z==null?void 0:Z.decodingInfo)=="function"&&(Cq(z,D,C,L,e,k)||rv(z.videoCodec))?(z.supportedPromise=WN(z,D,Z),z.supportedPromise.then(te=>{if(!this.hls)return;z.supportedResult=te;const oe=this.hls.levels,de=oe.indexOf(z);te.error?this.warn(`MediaCapabilities decodingInfo error: "${te.error}" for level ${de} ${ni(te)}`):te.supported||(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${de} ${ni(te)}`),de>-1&&oe.length>1&&(this.log(`Removing unsupported level ${de}`),this.hls.removeLevel(de),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):z.supportedResult=HN}if((T&&z.codecSet!==T||C&&z.videoRange!==C||B&&L>z.frameRate||!B&&L>0&&L<z.frameRate||z.supportedResult&&!((ee=z.supportedResult.decodingInfoResults)!=null&&ee[0].smooth))&&(!_||j!==I)){Y.push(j);continue}const U=z.details,Q=(f?U==null?void 0:U.partTarget:U==null?void 0:U.averagetargetduration)||R;let re;B?re=o*e:re=a*e;const N=R&&s>=R*2&&r===0?z.averageBitrate:z.maxBitrate,W=this.getTimeToLoadFrag(q,re,N*Q,U===void 0);if(re>=N&&(j===u||z.loadError===0&&z.fragmentError===0)&&(W<=q||!Je(W)||x&&!this.bitrateTestDelay||W<c)){const Z=this.forcedAutoLevel;return j!==v&&(Z===-1||Z!==v)&&(Y.length&&this.trace(`Skipped level(s) ${Y.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${p[Y[0]].codecs}" ${p[Y[0]].videoRange}; not compatible with "${T}" ${C}`),this.info(`switch candidate:${d}->${j} adjustedbw(${Math.round(re)})-bitrate=${Math.round(re-N)} ttfb:${q.toFixed(1)} avgDuration:${Q.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${W.toFixed(1)} firstSelection:${_} codecSet:${z.codecSet} videoRange:${z.videoRange} hls.loadLevel:${v}`)),_&&(this.firstSelection=j),j}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),t)}}const Rw={search:function(n,e){let t=0,i=n.length-1,s=null,r=null;for(;t<=i;){s=(t+i)/2|0,r=n[s];const a=e(r);if(a>0)t=s+1;else if(a<0)i=s-1;else return r}return null}};function Hq(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!Je(e))return null;const i=n[0].programDateTime;if(e<(i||0))return null;const s=n[n.length-1].endProgramDateTime;if(e>=(s||0))return null;t=t||0;for(let r=0;r<n.length;++r){const a=n[r];if(Wq(e,t,a))return a}return null}function uu(n,e,t=0,i=0,s=.005){let r=null;if(n){r=e[1+n.sn-e[0].sn]||null;const o=n.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),r&&n.level!==r.level&&r.end<=n.end&&(r=e[2+n.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(r=e[0]);if(r&&((!n||n.level===r.level)&&kA(t,i,r)===0||zq(r,n,Math.min(s,i))))return r;const a=Rw.search(e,kA.bind(null,t,i));return a&&(a!==n||!r)?a:r}function zq(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((s,r)=>(r[0]==="INF"&&(s+=parseFloat(r[1])),s),t);return n.start<=i}return!1}function kA(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=n?1:t.start-i>n&&t.start?-1:0}function Wq(n,e,t){const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-i>n}function GN(n,e){return Rw.search(n,t=>t.cc<e?1:t.cc>e?-1:0)}function Vq(n,e,t){if(n&&n.startCC<=e&&n.endCC>=e){const i=t.start,s=t.end;let r=n.fragments;if(!t.relurl){const{fragmentHint:a}=n;a&&(r=r.concat(a))}return Rw.search(r,a=>a.cc<e||a.end<=i?1:a.cc>e||a.start>=s?-1:0)}return null}function ey(n){switch(n.details){case xe.FRAG_LOAD_TIMEOUT:case xe.KEY_LOAD_TIMEOUT:case xe.LEVEL_LOAD_TIMEOUT:case xe.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function CA(n,e){const t=ey(e);return n.default[`${t?"timeout":"error"}Retry`]}function Pw(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function IA(n){return vn(vn({},n),{errorRetry:null,timeoutRetry:null})}function ty(n,e,t,i){if(!n)return!1;const s=i==null?void 0:i.code,r=e<n.maxNumRetry&&(Gq(s)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,i,r):r}function Gq(n){return n===0&&navigator.onLine===!1||!!n&&(n<400||n>499)}var Ts={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},oa={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class Yq extends Xo{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(F.ERROR,this.onError,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(F.ERROR,this.onError,this),e.off(F.ERROR,this.onErrorOut,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===lt.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var i;if(t.fatal)return;const s=this.hls,r=t.context;switch(t.details){case xe.FRAG_LOAD_ERROR:case xe.FRAG_LOAD_TIMEOUT:case xe.KEY_LOAD_ERROR:case xe.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case xe.FRAG_PARSING_ERROR:if((i=t.frag)!=null&&i.gap){t.errorAction=yp();return}case xe.FRAG_GAP:case xe.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Ts.SendAlternateToPenaltyBox;return}case xe.LEVEL_EMPTY_ERROR:case xe.LEVEL_PARSING_ERROR:{var a,o;const c=t.parent===lt.MAIN?t.level:s.loadLevel;t.details===xe.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(o=a.levelDetails)!=null&&o.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case xe.LEVEL_LOAD_ERROR:case xe.LEVEL_LOAD_TIMEOUT:typeof(r==null?void 0:r.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.level));return;case xe.AUDIO_TRACK_LOAD_ERROR:case xe.AUDIO_TRACK_LOAD_TIMEOUT:case xe.SUBTITLE_LOAD_ERROR:case xe.SUBTITLE_TRACK_LOAD_TIMEOUT:if(r){const c=s.loadLevelObj;if(c&&(r.type===Zt.AUDIO_TRACK&&c.hasAudioGroup(r.groupId)||r.type===Zt.SUBTITLE_TRACK&&c.hasSubtitleGroup(r.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=Ts.SendAlternateToPenaltyBox,t.errorAction.flags=oa.MoveAllAlternatesMatchingHost;return}}return;case xe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=s.loadLevelObj,u=c==null?void 0:c.attrs["HDCP-LEVEL"];u?t.errorAction={action:Ts.SendAlternateToPenaltyBox,flags:oa.MoveAllAlternatesMatchingHDCP,hdcpLevel:u}:this.keySystemError(t)}return;case xe.BUFFER_ADD_CODEC_ERROR:case xe.REMUX_ALLOC_ERROR:case xe.BUFFER_APPEND_ERROR:if(!t.errorAction){var l;t.errorAction=this.getLevelSwitchAction(t,(l=t.level)!=null?l:s.loadLevel)}return;case xe.INTERNAL_EXCEPTION:case xe.BUFFER_APPENDING_ERROR:case xe.BUFFER_FULL_ERROR:case xe.LEVEL_SWITCH_ERROR:case xe.BUFFER_STALLED_ERROR:case xe.BUFFER_SEEK_OVER_HOLE:case xe.BUFFER_NUDGE_ON_STALL:t.errorAction=yp();return}t.type===ut.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,s=CA(i.config.playlistLoadPolicy,e),r=this.playlistError++;if(ty(s,r,ey(e),e.response))return{action:Ts.RetryRequest,flags:oa.None,retryConfig:s,retryCount:r};const o=this.getLevelSwitchAction(e,t);return s&&(o.retryConfig=s,o.retryCount=r),o}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),s=t.levels[i],{fragLoadPolicy:r,keyLoadPolicy:a}=t.config,o=CA(e.details.startsWith("key")?a:r,e),l=t.levels.reduce((u,d)=>u+d.fragmentError,0);if(s&&(e.details!==xe.FRAG_GAP&&s.fragmentError++,ty(o,l,ey(e),e.response)))return{action:Ts.RetryRequest,flags:oa.None,retryConfig:o,retryCount:l};const c=this.getLevelSwitchAction(e,i);return o&&(c.retryConfig=o,c.retryCount=l),c}getLevelSwitchAction(e,t){const i=this.hls;t==null&&(t=i.loadLevel);const s=this.hls.levels[t];if(s){var r,a;const c=e.details;s.loadError++,c===xe.BUFFER_APPEND_ERROR&&s.fragmentError++;let u=-1;const{levels:d,loadLevel:h,minAutoLevel:f,maxAutoLevel:p}=i;i.autoLevelEnabled||(i.loadLevel=-1);const m=(r=e.frag)==null?void 0:r.type,y=(m===lt.AUDIO&&c===xe.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===xe.BUFFER_ADD_CODEC_ERROR||c===xe.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:C})=>s.audioCodec!==C),x=e.sourceBufferName==="video"&&(c===xe.BUFFER_ADD_CODEC_ERROR||c===xe.BUFFER_APPEND_ERROR)&&d.some(({codecSet:C,audioCodec:L})=>s.codecSet!==C&&s.audioCodec===L),{type:_,groupId:T}=(a=e.context)!=null?a:{};for(let C=d.length;C--;){const L=(C+h)%d.length;if(L!==h&&L>=f&&L<=p&&d[L].loadError===0){var o,l;const k=d[L];if(c===xe.FRAG_GAP&&m===lt.MAIN&&e.frag){const M=d[L].details;if(M){const D=uu(e.frag,M.fragments,e.frag.start);if(D!=null&&D.gap)continue}}else{if(_===Zt.AUDIO_TRACK&&k.hasAudioGroup(T)||_===Zt.SUBTITLE_TRACK&&k.hasSubtitleGroup(T))continue;if(m===lt.AUDIO&&(o=s.audioGroups)!=null&&o.some(M=>k.hasAudioGroup(M))||m===lt.SUBTITLE&&(l=s.subtitleGroups)!=null&&l.some(M=>k.hasSubtitleGroup(M))||y&&s.audioCodec===k.audioCodec||!y&&s.audioCodec!==k.audioCodec||x&&s.codecSet===k.codecSet)continue}u=L;break}}if(u>-1&&i.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:Ts.SendAlternateToPenaltyBox,flags:oa.None,nextAutoLevel:u}}return{action:Ts.SendAlternateToPenaltyBox,flags:oa.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch((i=t.errorAction)==null?void 0:i.action){case Ts.DoNothing:break;case Ts.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==xe.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:s,hdcpLevel:r,nextAutoLevel:a}=i;switch(s){case oa.None:this.switchLevel(e,a);break;case oa.MoveAllAlternatesMatchingHDCP:r&&(t.maxHdcpLevel=g2[g2.indexOf(r)-1],i.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}i.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===xe.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const i=$N(e.mimeType),s=this.hls.levels;for(let r=s.length;r--;)s[r][`${e.sourceBufferName}Codec`]===i&&this.hls.removeLevel(r)}}}function yp(n){const e={action:Ts.DoNothing,flags:oa.None};return n&&(e.resolved=!0),e}var Gi={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class qq{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.BUFFER_APPENDED,this.onBufferAppended,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this),e.on(F.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.BUFFER_APPENDED,this.onBufferAppended,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this),e.off(F.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let s=i.length;s--;){const r=i[s];if(!r)break;const a=r.end;if(r.start<=e&&a!==null&&e<=a)return r}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,i){const{fragments:s}=this,r=Object.keys(s);for(let a=r.length;a--;){const o=s[r[a]];if((o==null?void 0:o.body.type)===t&&(!i||o.buffered)){const l=o.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,t,i,s,r){this.timeRanges&&(this.timeRanges[e]=t);const a=(s==null?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const l=this.fragments[o];if(!l||a>=l.body.sn)return;if(!l.buffered&&(!l.loaded||r)){l.body.type===i&&this.removeFragment(l.body);return}const c=l.range[e];if(c){if(c.time.length===0){this.removeFragment(l.body);return}c.time.some(u=>{const d=!this.isTimeBuffered(u.startPTS,u.endPTS,t);return d&&this.removeFragment(l.body),d})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const i=e.frag,s=Ku(i),r=this.fragments[s];if(!r||r.buffered&&i.gap)return;const a=!i.relurl;Object.keys(t).forEach(o=>{const l=i.elementaryStreams[o];if(!l)return;const c=t[o],u=a||l.partial===!0;r.range[o]=this.getBufferedTimes(i,e.part,u,c)}),r.loaded=null,Object.keys(r.range).length?(r.buffered=!0,(r.body.endList=i.endList||r.body.endList)&&(this.endListFragments[r.body.type]=r),pm(r)||this.removeParts(i.sn-1,i.type)):this.removeFragment(r.body)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=RA(i,s=>s.fragment.sn>=e))}fragBuffered(e,t){const i=Ku(e);let s=this.fragments[i];!s&&t&&(s=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,t,i,s){const r={time:[],partial:i},a=e.start,o=e.end,l=e.minEndPTS||o,c=e.maxStartPTS||a;for(let u=0;u<s.length;u++){const d=s.start(u)-this.bufferPadding,h=s.end(u)+this.bufferPadding;if(c>=d&&l<=h){r.time.push({startPTS:Math.max(a,s.start(u)),endPTS:Math.min(o,s.end(u))});break}else if(a<h&&o>d){const f=Math.max(a,s.start(u)),p=Math.min(o,s.end(u));p>f&&(r.partial=!0,r.time.push({startPTS:f,endPTS:p}))}else if(o<=d)break}return r}getPartialFragment(e){let t=null,i,s,r,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&pm(u)&&(s=u.body.start-o,r=u.body.end+o,e>=s&&e<=r&&(i=Math.min(e-s,r-e),a<=i&&(t=u.body,a=i)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||pm(t))}getState(e){const t=Ku(e),i=this.fragments[t];return i?i.buffered?pm(i)?Gi.PARTIAL:Gi.OK:Gi.APPENDING:Gi.NOT_LOADED}isTimeBuffered(e,t,i){let s,r;for(let a=0;a<i.length;a++){if(s=i.start(a)-this.bufferPadding,r=i.end(a)+this.bufferPadding,e>=s&&t<=r)return!0;if(t<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const i=t.frag,s=t.part?null:t,r=Ku(i);this.fragments[r]={body:i,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:s,timeRanges:r,type:a}=t;if(i.sn==="initSegment")return;const o=i.type;if(s){let c=this.activePartLists[o];c||(this.activePartLists[o]=c=[]),c.push(s)}this.timeRanges=r;const l=r[a];this.detectEvictedFragments(a,l,o,s)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Ku(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,i=Object.keys(t);if(!e)return i.length>0;for(let s=i.length;s--;){const r=t[i[s]];if((r==null?void 0:r.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,i,s,r){s&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==i||s&&!l.gap||l.start<t&&l.end>e&&(o.buffered||r)&&this.removeFragment(l)})}removeFragment(e){const t=Ku(e);e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const s=e.sn;this.activePartLists[e.type]=RA(i,r=>r.fragment.sn!==s)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const i=(e=this.hls)==null||(t=e.latestLevelDetails)==null?void 0:t.partList;i&&i.forEach(s=>s.clearElementaryStreamInfo())}}function pm(n){var e,t,i;return n.buffered&&(n.body.gap||((e=n.range.video)==null?void 0:e.partial)||((t=n.range.audio)==null?void 0:t.partial)||((i=n.range.audiovideo)==null?void 0:i.partial))}function Ku(n){return`${n.type}_${n.level}_${n.sn}`}function RA(n,e){return n.filter(t=>{const i=e(t);return i||t.clearElementaryStreamInfo(),i})}var tc={cbc:0,ctr:1};class Kq{constructor(e,t,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=i}decrypt(e,t){switch(this.aesMode){case tc.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case tc.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Xq(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?n.slice(0,e-t):n}class Qq{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let s=0;s<4;s++)i[s]=t.getUint32(s*4);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,s=i[0],r=i[1],a=i[2],o=i[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],h=l[3],f=new Uint32Array(256);let p=0,m=0,v=0;for(v=0;v<256;v++)v<128?f[v]=v<<1:f[v]=v<<1^283;for(v=0;v<256;v++){let y=m^m<<1^m<<2^m<<3^m<<4;y=y>>>8^y&255^99,e[p]=y,t[y]=p;const b=f[p],x=f[b],_=f[x];let T=f[y]*257^y*16843008;s[p]=T<<24|T>>>8,r[p]=T<<16|T>>>16,a[p]=T<<8|T>>>24,o[p]=T,T=_*16843009^x*65537^b*257^p*16843008,c[y]=T<<24|T>>>8,u[y]=T<<16|T>>>16,d[y]=T<<8|T>>>24,h[y]=T,p?(p=b^f[f[f[_^b]]],m^=f[f[m]]):p=m=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,s=0;for(;s<t.length&&i;)i=t[s]===this.key[s],s++;if(i)return;this.key=t;const r=this.keySize=t.length;if(r!==4&&r!==6&&r!==8)throw new Error("Invalid aes key size="+r);const a=this.ksRows=(r+6+1)*4;let o,l;const c=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),d=this.sBox,h=this.rcon,f=this.invSubMix,p=f[0],m=f[1],v=f[2],y=f[3];let b,x;for(o=0;o<a;o++){if(o<r){b=c[o]=t[o];continue}x=b,o%r===0?(x=x<<8|x>>>24,x=d[x>>>24]<<24|d[x>>>16&255]<<16|d[x>>>8&255]<<8|d[x&255],x^=h[o/r|0]<<24):r>6&&o%r===4&&(x=d[x>>>24]<<24|d[x>>>16&255]<<16|d[x>>>8&255]<<8|d[x&255]),c[o]=b=(c[o-r]^x)>>>0}for(l=0;l<a;l++)o=a-l,l&3?x=c[o]:x=c[o-4],l<4||o<=4?u[l]=x:u[l]=p[d[x>>>24]]^m[d[x>>>16&255]]^v[d[x>>>8&255]]^y[d[x&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,i){const s=this.keySize+6,r=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=this.uint8ArrayToUint32Array_(i);let f=h[0],p=h[1],m=h[2],v=h[3];const y=new Int32Array(e),b=new Int32Array(y.length);let x,_,T,C,L,k,M,D,I,R,q,Y,ee,j;const z=this.networkToHostOrderSwap;for(;t<y.length;){for(I=z(y[t]),R=z(y[t+1]),q=z(y[t+2]),Y=z(y[t+3]),L=I^r[0],k=Y^r[1],M=q^r[2],D=R^r[3],ee=4,j=1;j<s;j++)x=l[L>>>24]^c[k>>16&255]^u[M>>8&255]^d[D&255]^r[ee],_=l[k>>>24]^c[M>>16&255]^u[D>>8&255]^d[L&255]^r[ee+1],T=l[M>>>24]^c[D>>16&255]^u[L>>8&255]^d[k&255]^r[ee+2],C=l[D>>>24]^c[L>>16&255]^u[k>>8&255]^d[M&255]^r[ee+3],L=x,k=_,M=T,D=C,ee=ee+4;x=a[L>>>24]<<24^a[k>>16&255]<<16^a[M>>8&255]<<8^a[D&255]^r[ee],_=a[k>>>24]<<24^a[M>>16&255]<<16^a[D>>8&255]<<8^a[L&255]^r[ee+1],T=a[M>>>24]<<24^a[D>>16&255]<<16^a[L>>8&255]<<8^a[k&255]^r[ee+2],C=a[D>>>24]<<24^a[L>>16&255]<<16^a[k>>8&255]<<8^a[M&255]^r[ee+3],b[t]=z(x^f),b[t+1]=z(C^p),b[t+2]=z(T^m),b[t+3]=z(_^v),f=I,p=R,m=q,v=Y,t=t+4}return b.buffer}}class Jq{constructor(e,t,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=i}expandKey(){const e=Zq(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Zq(n){switch(n){case tc.cbc:return"AES-CBC";case tc.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${n}`)}}const eK=16;class Nw{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Xq(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i,s){return this.useSoftware?new Promise((r,a)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,i,s);const l=this.flush();l?r(l.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i,s)}softwareDecrypt(e,t,i,s){const{currentIV:r,currentResult:a,remainderData:o}=this;if(s!==tc.cbc||t.byteLength!==16)return an.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=Yr(o,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;r&&(i=r);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new Qq),c.expandKey(t);const u=a;return this.currentResult=c.decrypt(l.buffer,0,i),this.currentIV=l.slice(-16).buffer,u||null}webCryptoDecrypt(e,t,i,s){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i,s));this.key=t,this.fastAesKey=new Jq(this.subtle,t,s)}return this.fastAesKey.expandKey().then(r=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Kq(this.subtle,new Uint8Array(i),s).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(an.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,t,i,s)))}onWebCryptoError(e,t,i,s){const r=this.enableSoftwareAES;if(r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i,s);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(r?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%eK;return i!==e.length&&(t=e.slice(0,i),this.remainderData=e.slice(i)),t}logOnce(e){this.logEnabled&&(an.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const PA=Math.pow(2,17);class tK{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new So({type:ut.NETWORK_ERROR,details:xe.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,r=s.fLoader,a=s.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(p=>p[0]==="GAP")){l(DA(e));return}else e.gap=!1;const c=this.loader=r?new r(s):new a(s),u=NA(e);e.loader=c;const d=IA(s.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:PA};e.stats=c.stats;const f={onSuccess:(p,m,v,y)=>{this.resetLoader(e,c);let b=p.data;v.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(b.slice(0,16)),b=b.slice(16)),o({frag:e,part:null,payload:b,networkDetails:y})},onError:(p,m,v,y)=>{this.resetLoader(e,c),l(new So({type:ut.NETWORK_ERROR,details:xe.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:vn({url:i,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:v,stats:y}))},onAbort:(p,m,v)=>{this.resetLoader(e,c),l(new So({type:ut.NETWORK_ERROR,details:xe.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:v,stats:p}))},onTimeout:(p,m,v)=>{this.resetLoader(e,c),l(new So({type:ut.NETWORK_ERROR,details:xe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:v,stats:p}))}};t&&(f.onProgress=(p,m,v,y)=>t({frag:e,part:null,payload:v,networkDetails:y})),c.load(u,h,f)})}loadPart(e,t,i){this.abort();const s=this.config,r=s.fLoader,a=s.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(DA(e,t));return}const c=this.loader=r?new r(s):new a(s),u=NA(e,t);e.loader=c;const d=IA(s.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:PA};t.stats=c.stats,c.load(u,h,{onSuccess:(f,p,m,v)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const y={frag:e,part:t,payload:f.data,networkDetails:v};i(y),o(y)},onError:(f,p,m,v)=>{this.resetLoader(e,c),l(new So({type:ut.NETWORK_ERROR,details:xe.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:vn({url:u.url,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:m,stats:v}))},onAbort:(f,p,m)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new So({type:ut.NETWORK_ERROR,details:xe.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:m,stats:f}))},onTimeout:(f,p,m)=>{this.resetLoader(e,c),l(new So({type:ut.NETWORK_ERROR,details:xe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:m,stats:f}))}})})}updateStatsFromPart(e,t){const i=e.stats,s=t.stats,r=s.total;if(i.loaded+=s.loaded,r){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(i.loaded/r),l),d=(l-c)*Math.round(i.loaded/c);i.total=i.loaded+d}else i.total=Math.max(i.loaded,i.total);const a=i.loading,o=s.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function NA(n,e=null){const t=e||n,i={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},s=t.byteRangeStartOffset,r=t.byteRangeEndOffset;if(Je(s)&&Je(r)){var a;let o=s,l=r;if(n.sn==="initSegment"&&nK((a=n.decryptdata)==null?void 0:a.method)){const c=r-s;c%16&&(l=r+(16-c%16)),s!==0&&(i.resetIV=!0,o=s-16)}i.rangeStart=o,i.rangeEnd=l}return i}function DA(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),i={type:ut.MEDIA_ERROR,details:xe.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(i.part=e),(e||n).stats.aborted=!0,new So(i)}function nK(n){return n==="AES-128"||n==="AES-256"}class So extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class YN extends Xo{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Dw{constructor(e,t,i,s=0,r=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=gm(),this.buffering={audio:gm(),video:gm(),audiovideo:gm()},this.level=e,this.sn=t,this.id=i,this.size=s,this.part=r,this.partial=a}}function gm(){return{start:0,executeStart:0,executeEnd:0,end:0}}const OA={length:0,start:()=>0,end:()=>0};class Vt{static isBuffered(e,t){if(e){const i=Vt.getBuffered(e);for(let s=i.length;s--;)if(t>=i.start(s)&&t<=i.end(s))return!0}return!1}static bufferedRanges(e){if(e){const t=Vt.getBuffered(e);return Vt.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}static bufferInfo(e,t,i){if(e){const s=Vt.bufferedRanges(e);if(s.length)return Vt.bufferedInfo(s,t,i)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.length>1&&e.sort((u,d)=>u.start-d.start||d.end-u.end);let s=-1,r=[];if(i)for(let u=0;u<e.length;u++){t>=e[u].start&&t<=e[u].end&&(s=u);const d=r.length;if(d){const h=r[d-1].end;e[u].start-h<i?e[u].end>h&&(r[d-1].end=e[u].end):r.push(e[u])}else r.push(e[u])}else r=e;let a=0,o,l=t,c=t;for(let u=0;u<r.length;u++){const d=r[u].start,h=r[u].end;if(s===-1&&t>=d&&t<=h&&(s=u),t+i>=d&&t<h)l=d,c=h,a=c-t;else if(t+i<d){o=d;break}}return{len:a,start:l||0,end:c||0,nextStart:o,buffered:e,bufferedIndex:s}}static getBuffered(e){try{return e.buffered||OA}catch(t){return an.log("failed to get media.buffered",t),OA}}}const qN=/\{\$([a-zA-Z0-9-_]+)\}/g;function MA(n){return qN.test(n)}function m2(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(qN,i=>{const s=i.substring(2,i.length-1),r=t==null?void 0:t[s];return r===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),i):r})}return e}function FA(n,e,t){let i=n.variableList;i||(n.variableList=i={});let s,r;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(s))r=a.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${t}"`)}catch(a){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else s=e.NAME,r=e.VALUE;s in i?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):i[s]=r||""}function iK(n,e,t){const i=e.IMPORT;if(t&&i in t){let s=n.variableList;s||(n.variableList=s={}),s[i]=t[i]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}const sK=/^(\d+)x(\d+)$/,jA=/(.+?)=(".*?"|.*?)(?:,|$)/g;class ai{constructor(e,t){typeof e=="string"&&(e=ai.parseAttrList(e,t)),In(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const i=new Uint8Array(t.length/2);for(let s=0;s<t.length/2;s++)i[s]=parseInt(t.slice(s*2,s*2+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const i=this[e];return(i?i.split(/[ ,]+/):[]).reduce((s,r)=>(s[r.toLowerCase()]=!0,s),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=sK.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let i;const s={},r='"';for(jA.lastIndex=0;(i=jA.exec(e))!==null;){const a=i[1].trim();let o=i[2];const l=o.indexOf(r)===0&&o.lastIndexOf(r)===o.length-1;let c=!1;if(l)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(t&&(l||c))o=m2(t,o);else if(!c&&!l)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":an.warn(`${e}: attribute ${a} is missing quotes`)}s[a]=o}return s}}const rK="com.apple.hls.interstitial";function aK(n){return n!=="ID"&&n!=="CLASS"&&n!=="CUE"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function oK(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"||n==="SCTE35-CMD"}class KN{constructor(e,t,i=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(s=t==null?void 0:t.tagOrder)!=null?s:i,t){const r=t.attr;for(const a in r)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==r[a]){an.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=In(new ai({}),r,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);Je(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(an.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Je(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===rK}get isValid(){return!!this.id&&!this._badValueForSameId&&Je(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const lK=10;class cK{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?Je(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||lK}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let i=e.length;i--;)if(e[i].index>t)return e[i].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Ad(n){return n==="AES-128"||n==="AES-256"||n==="AES-256-CTR"}function Ow(n){switch(n){case"AES-128":case"AES-256":return tc.cbc;case"AES-256-CTR":return tc.ctr;default:throw new Error(`invalid full segment method ${n}`)}}function Mw(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function y2(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}function uK(n){const e=y2(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function dK(n){const e=function(i,s,r){const a=i[s];i[s]=i[r],i[r]=a};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function hK(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),s=i[i.length-1].split(",");if(s.length===2){const r=s[0]==="base64",a=s[1];r?(i.splice(-1,1),t=Mw(a)):t=uK(a)}}return t}const ny=typeof self<"u"?self:void 0;var bn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},er={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function tx(n){switch(n){case er.FAIRPLAY:return bn.FAIRPLAY;case er.PLAYREADY:return bn.PLAYREADY;case er.WIDEVINE:return bn.WIDEVINE;case er.CLEARKEY:return bn.CLEARKEY}}var mm={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function nx(n){if(n===mm.WIDEVINE)return bn.WIDEVINE;if(n===mm.PLAYREADY)return bn.PLAYREADY;if(n===mm.CENC||n===mm.CLEARKEY)return bn.CLEARKEY}function ix(n){switch(n){case bn.FAIRPLAY:return er.FAIRPLAY;case bn.PLAYREADY:return er.PLAYREADY;case bn.WIDEVINE:return er.WIDEVINE;case bn.CLEARKEY:return er.CLEARKEY}}function ym(n){const{drmSystems:e,widevineLicenseUrl:t}=n,i=e?[bn.FAIRPLAY,bn.WIDEVINE,bn.PLAYREADY,bn.CLEARKEY].filter(s=>!!e[s]):[];return!i[bn.WIDEVINE]&&t&&i.push(bn.WIDEVINE),i}const XN=function(n){return ny!=null&&(n=ny.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function fK(n,e,t,i){let s;switch(n){case bn.FAIRPLAY:s=["cenc","sinf"];break;case bn.WIDEVINE:case bn.PLAYREADY:s=["cenc"];break;case bn.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return pK(s,e,t,i)}function pK(n,e,t,i){return[{initDataTypes:n,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(r=>({contentType:`audio/mp4; codecs=${r}`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(r=>({contentType:`video/mp4; codecs=${r}`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function gK(n){var e;return n.sessionType==="persistent-license"||!!((e=n.sessionTypes)!=null&&e.some(t=>t==="persistent-license"))}function QN(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),i=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const l=Mw(o).subarray(0,16);return dK(l),l}}return null}let vm={};class vp{static clearKeyUriToKeyIdMap(){vm={}}constructor(e,t,i,s=[1],r=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=s,this.iv=r,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Ad(e)}isSupported(){if(this.method){if(Ad(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case er.FAIRPLAY:case er.WIDEVINE:case er.PLAYREADY:case er.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(Ad(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(an.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const i=mK(e);return new vp(this.method,this.uri,"identity",this.keyFormatVersions,i)}const t=hK(this.uri);if(t)switch(this.keyFormat){case er.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case er.PLAYREADY:{const i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Sq(i,null,t),this.keyId=QN(t);break}default:{let i=t.subarray(0,16);if(i.length!==16){const s=new Uint8Array(16);s.set(i,16-i.length),i=s}this.keyId=i;break}}if(!this.keyId||this.keyId.byteLength!==16){let i=vm[this.uri];if(!i){const s=Object.keys(vm).length%Number.MAX_SAFE_INTEGER;i=new Uint8Array(16),new DataView(i.buffer,12,4).setUint32(0,s),vm[this.uri]=i}this.keyId=i}return this}}function mK(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const BA=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,UA=/#EXT-X-MEDIA:(.*)/g,yK=/^#EXT(?:INF|-X-TARGETDURATION):/m,sx=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),vK=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class za{static findGroup(e,t){for(let i=0;i<e.length;i++){const s=e[i];if(s.id===t)return s}}static resolve(e,t){return kw.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return yK.test(e)}static parseMasterPlaylist(e,t){const i=MA(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},r=[];BA.lastIndex=0;let a;for(;(a=BA.exec(e))!=null;)if(a[1]){var o;const c=new ai(a[1],s),u=m2(s,a[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:za.resolve(u,t)},h=c.decimalResolution("RESOLUTION");h&&(d.width=h.width,d.height=h.height),zA(c.CODECS,d);const f=c["SUPPLEMENTAL-CODECS"];f&&(d.supplemental={},zA(f,d.supplemental)),(o=d.unknownCodecs)!=null&&o.length||r.push(d),s.levels.push(d)}else if(a[3]){const c=a[3],u=a[4];switch(c){case"SESSION-DATA":{const d=new ai(u,s),h=d["DATA-ID"];h&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[h]=d);break}case"SESSION-KEY":{const d=$A(u,t,s);d.encrypted&&d.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(d)):an.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new ai(u,s);FA(s,d,t)}break}case"CONTENT-STEERING":{const d=new ai(u,s);s.contentSteering={uri:za.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=HA(u);break}}}const l=r.length>0&&r.length<s.levels.length;return s.levels=l?r:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,t,i){let s;const r={},a=i.levels,o={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(UA.lastIndex=0;(s=UA.exec(e))!==null;){const c=new ai(s[1],i),u=c.TYPE;if(u){const d=o[u],h=r[u]||[];r[u]=h;const f=c.LANGUAGE,p=c["ASSOC-LANGUAGE"],m=c.CHANNELS,v=c.CHARACTERISTICS,y=c["INSTREAM-ID"],b={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||f||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:f,url:c.URI?za.resolve(c.URI,t):""};if(p&&(b.assocLang=p),m&&(b.channels=m),v&&(b.characteristics=v),y&&(b.instreamId=y),d!=null&&d.length){const x=za.findGroup(d,b.groupId)||d[0];WA(b,x,"audioCodec"),WA(b,x,"textCodec")}h.push(b)}}return r}static parseLevelPlaylist(e,t,i,s,r,a){var o;const l={url:t},c=new cK(t),u=c.fragments,d=[];let h=null,f=0,p=0,m=0,v=0,y=0,b=null,x=new Q1(s,l),_,T,C,L=-1,k=!1,M=null,D;if(sx.lastIndex=0,c.m3u8=e,c.hasVariableRefs=MA(e),((o=sx.exec(e))==null?void 0:o[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(_=sx.exec(e))!==null;){k&&(k=!1,x=new Q1(s,l),x.playlistOffset=m,x.start=m,x.sn=f,x.cc=v,y&&(x.bitrate=y),x.level=i,h&&(x.initSegment=h,h.rawProgramDateTime&&(x.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null),M&&(x.setByteRange(M),M=null)));const Y=_[1];if(Y){x.duration=parseFloat(Y);const ee=(" "+_[2]).slice(1);x.title=ee||null,x.tagList.push(ee?["INF",Y,ee]:["INF",Y])}else if(_[3]){if(Je(x.duration)){x.playlistOffset=m,x.start=m,C&&GA(x,C,c),x.sn=f,x.level=i,x.cc=v,u.push(x);const ee=(" "+_[3]).slice(1);x.relurl=m2(c,ee),v2(x,b,d),b=x,m+=x.duration,f++,p=0,k=!0}}else{if(_=_[0].match(vK),!_){an.warn("No matches on slow regex match for level playlist!");continue}for(T=1;T<_.length&&_[T]===void 0;T++);const ee=(" "+_[T]).slice(1),j=(" "+_[T+1]).slice(1),z=_[T+2]?(" "+_[T+2]).slice(1):null;switch(ee){case"BYTERANGE":b?x.setByteRange(j,b):x.setByteRange(j);break;case"PROGRAM-DATE-TIME":x.rawProgramDateTime=j,x.tagList.push(["PROGRAM-DATE-TIME",j]),L===-1&&(L=u.length);break;case"PLAYLIST-TYPE":c.type&&go(c,ee,_),c.type=j.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?go(c,ee,_):u.length>0&&YA(c,ee,_),f=c.startSN=parseInt(j);break;case"SKIP":{c.skippedSegments&&go(c,ee,_);const B=new ai(j,c),U=B.decimalInteger("SKIPPED-SEGMENTS");if(Je(U)){c.skippedSegments+=U;for(let re=U;re--;)u.push(null);f+=U}const Q=B.enumeratedString("RECENTLY-REMOVED-DATERANGES");Q&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(Q.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&go(c,ee,_),c.targetduration=Math.max(parseInt(j),1);break;case"VERSION":c.version!==null&&go(c,ee,_),c.version=parseInt(j);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||go(c,ee,_),c.live=!1;break;case"#":(j||z)&&x.tagList.push(z?[j,z]:[j]);break;case"DISCONTINUITY":v++,x.tagList.push(["DIS"]);break;case"GAP":x.gap=!0,x.tagList.push([ee]);break;case"BITRATE":x.tagList.push([ee,j]),y=parseInt(j)*1e3,Je(y)?x.bitrate=y:y=0;break;case"DATERANGE":{const B=new ai(j,c),U=new KN(B,c.dateRanges[B.ID],c.dateRangeTagCount);c.dateRangeTagCount++,U.isValid||c.skippedSegments?c.dateRanges[U.id]=U:an.warn(`Ignoring invalid DATERANGE tag: "${j}"`),x.tagList.push(["EXT-X-DATERANGE",j]);break}case"DEFINE":{{const B=new ai(j,c);"IMPORT"in B?iK(c,B,a):FA(c,B,t)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?go(c,ee,_):u.length>0&&YA(c,ee,_),c.startCC=v=parseInt(j);break;case"KEY":{const B=$A(j,t,c);if(B.isSupported()){if(B.method==="NONE"){C=void 0;break}C||(C={}),C[B.keyFormat]&&(C=In({},C)),C[B.keyFormat]=B}else an.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${j}"`);break}case"START":c.startTimeOffset=HA(j);break;case"MAP":{const B=new ai(j,c);if(x.duration){const U=new Q1(s,l);VA(U,B,i,C),h=U,x.initSegment=h,h.rawProgramDateTime&&!x.rawProgramDateTime&&(x.rawProgramDateTime=h.rawProgramDateTime)}else{const U=x.byteRangeEndOffset;if(U){const Q=x.byteRangeStartOffset;M=`${U-Q}@${Q}`}else M=null;VA(x,B,i,C),h=x,k=!0}h.cc=v;break}case"SERVER-CONTROL":{D&&go(c,ee,_),D=new ai(j),c.canBlockReload=D.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=D.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&D.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=D.optionalFloat("PART-HOLD-BACK",0),c.holdBack=D.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&go(c,ee,_);const B=new ai(j);c.partTarget=B.decimalFloatingPoint("PART-TARGET");break}case"PART":{let B=c.partList;B||(B=c.partList=[]);const U=p>0?B[B.length-1]:void 0,Q=p++,re=new ai(j,c),N=new aq(re,x,l,Q,U);B.push(N),x.duration+=N.duration;break}case"PRELOAD-HINT":{const B=new ai(j,c);c.preloadHint=B;break}case"RENDITION-REPORT":{const B=new ai(j,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(B);break}default:an.warn(`line parsed but not handled: ${_}`);break}}}b&&!b.relurl?(u.pop(),m-=b.duration,c.partList&&(c.fragmentHint=b)):c.partList&&(v2(x,b,d),x.cc=v,c.fragmentHint=x,C&&GA(x,C,c)),c.targetduration||(c.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const I=u.length,R=u[0],q=u[I-1];if(m+=c.skippedSegments*c.targetduration,m>0&&I&&q){c.averagetargetduration=m/I;const Y=q.sn;c.endSN=Y!=="initSegment"?Y:0,c.live||(q.endList=!0),R&&c.startCC===void 0&&(c.startCC=R.cc),L>0&&(bK(u,L),R&&d.unshift(R))}else c.endSN=0,c.startCC=0;return c.fragmentHint&&(m+=c.fragmentHint.duration),c.totalduration=m,d.length&&c.dateRangeTagCount&&R&&JN(d,c),c.endCC=v,c}}function JN(n,e){const t=n.length,i=n[t-1],s=e.live?1/0:e.totalduration,r=Object.keys(e.dateRanges);for(let a=r.length;a--;){const o=e.dateRanges[r[a]],l=o.startDate.getTime();o.tagAnchor=i.ref;for(let c=t;c--;){const u=xK(e,l,n,c,s);if(u!==-1){o.tagAnchor=e.fragments[u].ref;break}}}}function xK(n,e,t,i,s){const r=t[i];if(r){const o=r.programDateTime;if(e>=o||i===0){var a;const l=(((a=t[i+1])==null?void 0:a.start)||s)-r.start;if(e<=o+l*1e3){const c=t[i].sn-n.startSN,u=n.fragments;if(u.length>t.length){const h=(t[i+1]||u[u.length-1]).sn-n.startSN;for(let f=h;f>c;f--){const p=u[f].programDateTime;if(e>=p&&e<p+u[f].duration*1e3)return f}}return c}}}return-1}function $A(n,e,t){var i,s;const r=new ai(n,t),a=(i=r.METHOD)!=null?i:"",o=r.URI,l=r.hexadecimalInteger("IV"),c=r.KEYFORMATVERSIONS,u=(s=r.KEYFORMAT)!=null?s:"identity";o&&r.IV&&!l&&an.error(`Invalid IV: ${r.IV}`);const d=o?za.resolve(o,e):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new vp(a,d,u,h,l)}function HA(n){const t=new ai(n).decimalFloatingPoint("TIME-OFFSET");return Je(t)?t:null}function zA(n,e){let t=(n||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const s=t.filter(r=>BN(r,i));s.length&&(e[`${i}Codec`]=s.map(r=>r.split("/")[0]).join(","),t=t.filter(r=>s.indexOf(r)===-1))}),e.unknownCodecs=t}function WA(n,e,t){const i=e[t];i&&(n[t]=i)}function bK(n,e){let t=n[e];for(let i=e;i--;){const s=n[i];if(!s)return;s.programDateTime=t.programDateTime-s.duration*1e3,t=s}}function v2(n,e,t){n.rawProgramDateTime?t.push(n):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime)}function VA(n,e,t,i){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",i&&(n.levelkeys=i),n.initSegment=null}function GA(n,e,t){n.levelkeys=e;const{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&i.push(n)}function go(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function YA(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function rx(n,e){const t=e.startPTS;if(Je(t)){let i=0,s;e.sn>n.sn?(i=t-n.start,s=n):(i=n.start-t,s=e),s.duration!==i&&s.setDuration(i)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.setStart(n.start+(n.minEndPTS-n.start)):e.setStart(n.start+n.duration):e.setStart(Math.max(n.start-e.duration,0))}function ZN(n,e,t,i,s,r){i-t<=0&&(an.warn("Fragment should have a positive duration",e),i=t+e.duration,r=s+e.duration);let o=t,l=i;const c=e.startPTS,u=e.endPTS;if(Je(c)){const v=Math.abs(c-t);Je(e.deltaPTS)?e.deltaPTS=Math.max(v,e.deltaPTS):e.deltaPTS=v,o=Math.max(t,c),t=Math.min(t,c),s=Math.min(s,e.startDTS),l=Math.min(i,u),i=Math.max(i,u),r=Math.max(r,e.endDTS)}const d=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(i-e.start),e.startPTS=t,e.maxStartPTS=o,e.startDTS=s,e.endPTS=i,e.minEndPTS=l,e.endDTS=r;const h=e.sn;if(!n||h<n.startSN||h>n.endSN)return 0;let f;const p=h-n.startSN,m=n.fragments;for(m[p]=e,f=p;f>0;f--)rx(m[f],m[f-1]);for(f=p;f<m.length-1;f++)rx(m[f],m[f+1]);return n.fragmentHint&&rx(m[m.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,d}function SK(n,e){if(n===e)return;let t=null;const i=n.fragments;for(let l=i.length-1;l>=0;l--){const c=i[l].initSegment;if(c){t=c;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let s;EK(n,e,(l,c,u,d)=>{if(!e.startCC&&c.cc!==l.cc){var h,f;const p=l.cc-c.cc;for(let m=u;m<d.length;m++)d[m].cc+=p;e.startCC=(h=(f=nD(n,e.startSN-1))==null?void 0:f.cc)!=null?h:d[0].cc,e.endCC=d[d.length-1].cc}Je(l.startPTS)&&Je(l.endPTS)&&(c.setStart(c.startPTS=l.startPTS),c.startDTS=l.startDTS,c.maxStartPTS=l.maxStartPTS,c.endPTS=l.endPTS,c.endDTS=l.endDTS,c.minEndPTS=l.minEndPTS,c.setDuration(l.endPTS-l.startPTS),c.duration&&(s=c),e.PTSKnown=e.alignedSliding=!0),l.hasStreams&&(c.elementaryStreams=l.elementaryStreams),c.loader=l.loader,l.hasStats&&(c.stats=l.stats),l.initSegment&&(c.initSegment=l.initSegment,t=l.initSegment)});const r=e.fragments,a=e.fragmentHint?r.concat(e.fragmentHint):r;if(t&&a.forEach(l=>{var c;l&&(!l.initSegment||l.initSegment.relurl===((c=t)==null?void 0:c.relurl))&&(l.initSegment=t)}),e.skippedSegments)if(e.deltaUpdateFailed=r.some(l=>!l),e.deltaUpdateFailed){an.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)r.shift();e.startSN=r[0].sn}else{e.endCC=r[r.length-1].cc,e.canSkipDateRanges&&(e.dateRanges=wK(n.dateRanges,e));const l=n.fragments.filter(c=>c.rawProgramDateTime);if(n.hasProgramDateTime&&!e.hasProgramDateTime)for(let c=1;c<a.length;c++)a[c].programDateTime===null&&v2(a[c],a[c-1],l);JN(l,e)}_K(n.partList,e.partList,(l,c)=>{c.elementaryStreams=l.elementaryStreams,c.stats=l.stats}),s?ZN(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):eD(n,e),r.length&&(e.totalduration=e.edge-r[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const l=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=l),e.driftEndTime=o,e.driftEnd=l}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=n.requestScheduled)}function wK(n,e){const{dateRanges:t,recentlyRemovedDateranges:i}=e,s=In({},n);i&&i.forEach(o=>{delete s[o]});const a=Object.keys(s).length;return a&&Object.keys(t).forEach(o=>{const l=s[o],c=new KN(t[o].attr,l);c.isValid?(s[o]=c,l||(c.tagOrder+=a)):an.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${ni(t[o].attr)}"`)}),s}function _K(n,e,t){if(n&&e){let i=0;for(let s=0,r=n.length;s<=r;s++){const a=n[s],o=e[s+i];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):i--}}}function EK(n,e,t){const i=e.skippedSegments,s=Math.max(n.startSN,e.startSN)-e.startSN,r=(n.fragmentHint?1:0)+(i?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,a=e.startSN-n.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let c=s;c<=r;c++){const u=l[a+c];let d=o[c];if(i&&!d&&u&&(d=e.fragments[c]=u),u&&d){if(t(u,d,c,o),u.url&&u.url!==d.url){e.playlistParsingError=qA(`media sequence mismatch ${d.sn}:`,n,e,u,d);return}else if(u.cc!==d.cc){e.playlistParsingError=qA(`discontinuity sequence mismatch (${u.cc}!=${d.cc})`,n,e,u,d);return}}}}function qA(n,e,t,i,s){return new Error(`${n} ${s.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function eD(n,e,t=!0){const i=e.startSN+e.skippedSegments-n.startSN,s=n.fragments,r=i>=0;let a=0;if(r&&i<s.length)a=s[i].start;else if(r&&e.startSN===n.endSN+1)a=n.fragmentEnd;else if(r&&t)a=n.fragmentStart+i*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=n.fragmentStart;else return;x2(e,a)}function x2(n,e){if(e){const t=n.fragments;for(let i=n.skippedSegments;i<t.length;i++)t[i].addStart(e);n.fragmentHint&&n.fragmentHint.addStart(e)}}function tD(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const i=n.fragments;if(i.length&&t*4>e){const r=i[i.length-1].duration*1e3;r<t&&(t=r)}}else t/=2;return Math.round(t)}function nD(n,e,t){if(!n)return null;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&t&&t.sn===e?t:null}function KA(n,e,t){return n?iD(n.partList,e,t):null}function iD(n,e,t){if(n)for(let i=n.length;i--;){const s=n[i];if(s.index===t&&s.fragment.sn===e)return s}return null}function sD(n){n.forEach((e,t)=>{var i;(i=e.details)==null||i.fragments.forEach(s=>{s.level=t,s.initSegment&&(s.initSegment.level=t)})})}function If(n,e){for(let i=0,s=n.length;i<s;i++){var t;if(((t=n[i])==null?void 0:t.cc)===e)return n[i]}return null}function TK(n,e){return!!(n&&e.startCC<n.endCC&&e.endCC>n.startCC)}function XA(n,e){if(n){const t=n.start+e;n.start=n.startPTS=t,n.endPTS=t+n.duration}}function rD(n,e){const t=e.fragments;for(let i=0,s=t.length;i<s;i++)XA(t[i],n);e.fragmentHint&&XA(e.fragmentHint,n),e.alignedSliding=!0}function AK(n,e){n&&(aD(e,n),!e.alignedSliding&&n&&iy(e,n),!e.alignedSliding&&n&&!e.skippedSegments&&eD(n,e,!1))}function aD(n,e){if(!TK(e,n))return;const t=Math.min(e.endCC,n.endCC),i=If(e.fragments,t),s=If(n.fragments,t);if(!i||!s)return;an.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const r=i.start-s.start;rD(r,n)}function iy(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,i=e.fragments;if(!t.length||!i.length)return;let s,r;const a=Math.min(e.endCC,n.endCC);e.startCC<a&&n.startCC<a&&(s=If(i,a),r=If(t,a)),(!s||!r)&&(s=i[Math.floor(i.length/2)],r=If(t,s.cc)||t[Math.floor(t.length/2)]);const o=s.programDateTime,l=r.programDateTime;if(!o||!l)return;const c=(l-o)/1e3-(r.start-s.start);rD(c,n)}const LK={toString:function(n){let e="";const t=n.length;for(let i=0;i<t;i++)e+=`[${n.start(i).toFixed(3)}-${n.end(i).toFixed(3)}]`;return e}},Le={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Fw extends YN{constructor(e,t,i,s,r){super(s,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Le.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:o,media:l,mediaBuffer:c,state:u}=this,d=l?l.currentTime:0,h=Vt.bufferInfo(c||l,d,a.maxBufferHole);if(this.log(`media seeking to ${Je(d)?d.toFixed(3):d}, state: ${u}`),this.state===Le.ENDED)this.resetLoadingState();else if(o){const f=a.maxFragLookUpTolerance,p=o.start-f,m=o.start+o.duration+f;if(!h.len||m<h.start||p>h.end){const v=d>m;(d<p||v)&&(v&&o.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const f=this.lastCurrentTime;if(d>f&&(this.lastCurrentTime=d),!this.loadingParts){const p=Math.max(h.end,d),m=this.shouldLoadParts(this.getLevelDetails(),p);m&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${p.toFixed(2)}`),this.loadingParts=m)}}!this.hls.hasEnoughToStart&&!h.len&&(this.log(`setting startPosition to ${d} because of seek before start`),this.nextLoadPosition=this.startPosition=d),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=r,this.hls=e,this.fragmentLoader=new tK(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Nw(e.config)}registerListeners(){const{hls:e}=this;e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(F.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Le.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Le.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const i=e.end||0,s=this.config.timelineOffset||0;if(i<=s)return!1;const r=e.nextStart;if(r&&r>s&&r<t.edge||this.media.currentTime<e.start)return!1;const o=t.partList;if(o!=null&&o.length){const c=o[o.length-1];return Vt.isBuffered(this.media,c.start+c.duration/2)}const l=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(l)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),i.addEventListener("seeking",this.onMediaSeeking),i.addEventListener("ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===Le.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(s!==null){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),s.removeEventListener("seeking",this.onMediaSeeking),s.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Le.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this.startFragRequested=!0,this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const s=r=>{const a=r.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${r.part?" part: "+r.part.index:""} of ${this.fragInfo(a,!1,r.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(r)};this._doFragLoad(e,t,i,s).then(r=>{if(!r)return;const a=this.state,o=r.frag;if(this.fragContextChanged(o)){(a===Le.FRAG_LOADING||!this.fragCurrent&&a===Le.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=Le.IDLE);return}"payload"in r&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(F.FRAG_LOADED,r)),this._handleFragmentLoadComplete(r)}).catch(r=>{this.state===Le.STOPPED||this.state===Le.ERROR||(this.warn(`Frag error: ${(r==null?void 0:r.message)||r}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===Gi.APPENDING){const r=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,r),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&i.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===Gi.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const s={startOffset:e,endOffset:t,type:i};this.hls.trigger(F.BUFFER_FLUSHING,s)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{const s=i==null?void 0:i.frag;if(!s||this.fragContextChanged(s)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:s}=this,{frag:r,payload:a}=i,o=r.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&Ad(o.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,Ow(o.method)).catch(c=>{throw s.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:r}),c}).then(c=>{const u=self.performance.now();return s.trigger(F.FRAG_DECRYPTED,{frag:r,payload:c,stats:{tstart:l,tdecrypt:u}}),i.payload=c,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===Le.STOPPED||this.state===Le.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state!==Le.STOPPED&&(this.state=Le.IDLE),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${i?LK.toString(Vt.getBuffered(i)):"(detached)"})`),is(e)){var s;if(e.type!==lt.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=Le.IDLE;return}}const r=(s=this.levels)==null?void 0:s[e.level];r!=null&&r.fragmentError&&(this.log(`Resetting level fragment error count of ${r.fragmentError} on frag buffered`),r.fragmentError=0)}this.state=Le.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:s,partsLoaded:r}=e,a=!r||r.length===0||r.some(l=>!l),o=new Dw(i.level,i.sn,i.stats.chunkCount+1,0,s?s.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,s){var r;this.fragCurrent=e;const a=t==null?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;e.encrypted&&!((r=e.decryptdata)!=null&&r.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=Le.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(d=>{if(!this.fragContextChanged(d.frag))return this.hls.trigger(F.KEY_LOADED,d),this.state===Le.KEY_LOADING&&(this.state=Le.IDLE),d}),this.hls.trigger(F.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments);const l=this.fragPrevious;if(is(e)&&(!l||e.sn!==l.sn)){const d=this.shouldLoadParts(t.details,e.end);d!==this.loadingParts&&(this.log(`LL-Part loading ${d?"ON":"OFF"} loading sn ${l==null?void 0:l.sn}->${e.sn}`),this.loadingParts=d)}if(i=Math.max(e.start,i||0),this.loadingParts&&is(e)){const d=a.partList;if(d&&s){i>e.end&&a.fragmentHint&&(e=a.fragmentHint);const h=this.getNextPart(d,e,i);if(h>-1){const f=d[h];e=this.fragCurrent=f.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${f.index} (${h}/${d.length-1}) of ${this.fragInfo(e,!1,f)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=Le.FRAG_LOADING;let p;return o?p=o.then(m=>!m||this.fragContextChanged(m.frag)?null:this.doFragPartsLoad(e,f,t,s)).catch(m=>this.handleFragLoadError(m)):p=this.doFragPartsLoad(e,f,t,s).catch(m=>this.handleFragLoadError(m)),this.hls.trigger(F.FRAG_LOADING,{frag:e,part:f,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):p}else if(!e.url||this.loadedEndOfParts(d,i))return Promise.resolve(null)}}if(is(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${a?"["+a.startSN+"-"+a.endSN+"]":""}, target: ${parseFloat(i.toFixed(3))}`),Je(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Le.FRAG_LOADING;const c=this.config.progressive;let u;return c&&o?u=o.then(d=>!d||this.fragContextChanged(d==null?void 0:d.frag)?null:this.fragmentLoader.load(e,s)).catch(d=>this.handleFragLoadError(d)):u=Promise.all([this.fragmentLoader.load(e,c?s:void 0),o]).then(([d])=>(!c&&d&&s&&s(d),d)).catch(d=>this.handleFragLoadError(d)),this.hls.trigger(F.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,t,i,s){return new Promise((r,a)=>{var o;const l=[],c=(o=i.details)==null?void 0:o.partList,u=d=>{this.fragmentLoader.loadPart(e,d,s).then(h=>{l[d.index]=h;const f=h.part;this.hls.trigger(F.FRAG_LOADED,h);const p=KA(i.details,e.sn,d.index+1)||iD(c,e.sn,d.index+1);if(p)u(p);else return r({frag:e,part:f,partsLoaded:l})}).catch(a)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===xe.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(F.ERROR,t)}else this.hls.trigger(F.ERROR,{type:ut.OTHER_ERROR,details:xe.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Le.PARSING){!this.fragCurrent&&this.state!==Le.STOPPED&&this.state!==Le.ERROR&&(this.state=Le.IDLE);return}const{frag:i,part:s,level:r}=t,a=self.performance.now();i.stats.parsing.end=a,s&&(s.stats.parsing.end=a);const o=this.getLevelDetails(),c=o&&i.sn>o.endSN||this.shouldLoadParts(o,i.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(i,s,r,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var i;const r=e.partList[0],a=r.end+(((i=e.fragmentHint)==null?void 0:i.duration)||0);if(t>=a){var s;if((this.hls.hasEnoughToStart?((s=this.media)==null?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition())>r.start-r.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:s,sn:r,part:a}=e;if(!(t!=null&&t[s]))return this.warn(`Levels object was unset while buffering fragment ${r} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const o=t[s],l=o.details,c=a>-1?KA(l,r,a):null,u=c?c.fragment:nD(l,r,i);return u?(i&&i!==u&&(u.stats=i.stats),{frag:u,part:c,level:o}):null}bufferFragmentData(e,t,i,s,r){var a;if(!e||this.state!==Le.PARSING)return;const{data1:o,data2:l}=e;let c=o;if(o&&l&&(c=Yr(o,l)),!((a=c)!=null&&a.length))return;const u={type:e.type,frag:t,part:i,chunkMeta:s,parent:t.type,data:c};if(this.hls.trigger(F.BUFFER_APPENDING,u),e.dropped&&e.independent&&!i){if(r)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!Vt.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const i=t.currentTime,s=Vt.bufferInfo(t,i,0),r=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,r*.25),o=Math.max(Math.min(e.start-a,s.end-a),i+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var i;const s=this.getLoadPosition();if(!Je(s))return null;const a=this.lastCurrentTime>s||(i=this.media)!=null&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,s,t,a)}getFwdBufferInfoAtPos(e,t,i,s){const r=Vt.bufferInfo(e,t,s);if(r.len===0&&r.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,i);if(a&&(r.nextStart<=a.end||a.gap)){const o=Math.max(Math.min(r.nextStart,a.end)-t,s);return Vt.bufferInfo(e,t,o)}}return r}getMaxBufferLength(e){const{config:t}=this;let i;return e?i=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):i=t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,s=Math.max(Math.min(e-t,i.maxBufferLength),t),r=Math.max(e-t*3,i.maxMaxBufferLength/2,s);return r>=s?(i.maxMaxBufferLength=r,this.warn(`Reduce max buffer length to ${r}s`),!0):!1}getAppendedFrag(e,t=lt.MAIN){var i;const s=(i=this.fragmentTracker)==null?void 0:i.getAppendedFrag(e,t);return s&&"fragment"in s?s.fragment:s}getNextFragment(e,t){const i=t.fragments,s=i.length;if(!s)return null;const{config:r}=this,a=i[0].start,o=r.lowLatencyMode&&!!t.partList;let l=null;if(t.live){const d=r.initialLiveManifestSize;if(s<d)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${d})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var c;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(t,i);const h=this.hls.startPosition,f=this.hls.liveSyncPosition,p=l?(h!==-1&&h>=a?h:f)||l.start:e;this.log(`Setting startPosition to ${p} to match start frag at live edge. mainStart: ${h} liveSyncPosition: ${f} frag.start: ${(c=l)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=p}}else e<=a&&(l=i[0]);if(!l){const d=this.loadingParts?t.partEnd:t.fragmentEnd;l=this.getFragmentAtPosition(e,d,t)}let u=this.filterReplacedPrimary(l,t);if(!u&&l){const d=l.sn-t.startSN;u=this.filterReplacedPrimary(i[d+1]||null,t)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===Gi.OK||i===Gi.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,s,r){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&i.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,s,0);if(o!==null&&i.len+o.len>=r){const l=a.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(QA(this.hls.config)){var e,t;if((e=this.hls.interstitialsManager)==null||(t=e.playingItem)==null?void 0:t.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(QA(this.hls.config)&&e.type!==lt.SUBTITLE){const i=this.hls.interstitialsManager,s=i==null?void 0:i.bufferingItem;if(s){const a=s.event;if(a){if(a.appendInPlace||Math.abs(e.start-s.start)>1||s.start===0)return null}else if(e.end<=s.start&&(t==null?void 0:t.live)===!1||e.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||e.start-s.end>1))return null}const r=i==null?void 0:i.playerQueue;if(r)for(let a=r.length;a--;){const o=r[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,i){let s=-1,r=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const c=e[o];if(a=a&&!c.independent,s>-1&&i<c.start)break;const u=c.loaded;u?s=-1:(r||c.independent||a)&&c.fragment===t&&(s=o),r=u}return s}loadedEndOfParts(e,t){const i=e[e.length-1];return i&&t>i.start&&i.loaded}getInitialLiveFragment(e,t){const i=this.fragPrevious;let s=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),s=Hq(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){const a=t[r-e.startSN];i.cc===a.cc&&(s=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=GN(t,i.cc),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const r=this.hls.liveSyncPosition;r!==null&&(s=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,t,i){const{config:s}=this;let{fragPrevious:r}=this,{fragments:a,endSN:o}=i;const{fragmentHint:l}=i,{maxFragLookUpTolerance:c}=s,u=i.partList,d=!!(this.loadingParts&&u!=null&&u.length&&l);d&&l&&!this.bitrateTest&&u[u.length-1].fragment.sn===l.sn&&(a=a.concat(l),o=l.sn);let h;if(e<t){var f;const m=e<this.lastCurrentTime||e>t-c||(f=this.media)!=null&&f.paused||!this.startFragRequested?0:c;h=uu(r,a,e,m)}else h=a[a.length-1];if(h){const p=h.sn-i.startSN,m=this.fragmentTracker.getState(h);if((m===Gi.OK||m===Gi.PARTIAL&&h.gap)&&(r=h),r&&h.sn===r.sn&&(!d||u[0].fragment.sn>h.sn||!i.live&&!d)&&r&&h.level===r.level){const y=a[p+1];h.sn<o&&this.fragmentTracker.getState(y)!==Gi.OK?h=y:h=null}}return h}alignPlaylists(e,t,i){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const r=e.fragmentStart,a=!t,o=e.alignedSliding&&Je(r);if(a||!o&&!r){AK(i,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${s}`),l}return r}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let i=this.startPosition;i<t&&(i=-1);const s=this.timelineOffset;if(i===-1){const r=this.startTimeOffset!==null,a=r?this.startTimeOffset:e.startTimeOffset;a!==null&&Je(a)?(i=t+a,a<0&&(i+=e.edge),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${a} found in ${r?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+s}this.nextLoadPosition=i+s}getLoadPosition(){var e;const{media:t}=this;let i=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?i=t.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&is(e)&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==Le.FRAG_LOADING_WAITING_RETRY)&&(this.state=Le.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const p=this.getCurrentContext(t.chunkMeta);p&&(t.frag=p.frag)}const i=t.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var s;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const r=t.details===xe.FRAG_GAP;r&&this.fragmentTracker.fragBuffered(i,!0);const a=t.errorAction,{action:o,flags:l,retryCount:c=0,retryConfig:u}=a||{},d=!!a&&!!u,h=d&&o===Ts.RetryRequest,f=d&&!a.resolved&&l===oa.MoveAllAlternatesMatchingHost;if(!h&&f&&is(i)&&!i.endList)this.resetFragmentErrors(e),this.treatAsGap(i),a.resolved=!0;else if((h||f)&&c<u.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const p=Pw(u,c);this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${t.details}, retrying loading ${c+1}/${u.maxNumRetry} in ${p}ms`),a.resolved=!0,this.retryDate=self.performance.now()+p,this.state=Le.FRAG_LOADING_WAITING_RETRY}else if(u&&a)if(this.resetFragmentErrors(e),c<u.maxNumRetry)!r&&o!==Ts.RemoveAlternatePermanently&&(a.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${c})`);return}else o===Ts.SendAlternateToPenaltyBox?this.state=Le.WAITING_LEVEL:this.state=Le.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===Le.PARSING||this.state===Le.PARSED){const t=e.frag,i=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,i),r=s&&s.len>.5;r&&this.reduceMaxBufferLength(s.len,(t==null?void 0:t.duration)||10);const a=!r;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===lt.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Le.STOPPED&&(this.state=Le.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const s=Vt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,s,i),this.state===Le.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Le.STOPPED&&(this.state=Le.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,s){const r=i.details;if(!r){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const d=u.endPTS-u.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${d})`),l||!1;const h=s?0:ZN(r,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS);return this.hls.trigger(F.LEVEL_PTS_UPDATED,{details:r,level:i,drift:h,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)){var o;if(i.fragmentError===0&&this.treatAsGap(e,i),((o=this.transmuxer)==null?void 0:o.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Le.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(F.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===lt.MAIN?"level":"track"}fragInfo(e,t=!0,i){var s,r;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${((s=t&&!i?e.startPTS:(i||e).start)!=null?s:NaN).toFixed(3)}-${((r=t&&!i?e.endPTS:(i||e).end)!=null?r:NaN).toFixed(3)}]${i&&e.type==="main"?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function QA(n){return!!n.interstitialsController&&n.enableInterstitialPlayback!==!1}class oD{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;if(e.length)e.length===1?i=e[0]:i=kK(e,t);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function kK(n,e){const t=new Uint8Array(e);let i=0;for(let s=0;s<n.length;s++){const r=n[s];t.set(r,i),i+=r.length}return t}var ax={exports:{}},JA;function CK(){return JA||(JA=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function r(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||l,h),p=t?t+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},o.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,f,p){var m=t?t+c:c;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,b,x;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,d),!0;case 4:return v.fn.call(v.context,u,d,h),!0;case 5:return v.fn.call(v.context,u,d,h,f),!0;case 6:return v.fn.call(v.context,u,d,h,f,p),!0}for(x=1,b=new Array(y-1);x<y;x++)b[x-1]=arguments[x];v.fn.apply(v.context,b)}else{var _=v.length,T;for(x=0;x<_;x++)switch(v[x].once&&this.removeListener(c,v[x].fn,void 0,!0),y){case 1:v[x].fn.call(v[x].context);break;case 2:v[x].fn.call(v[x].context,u);break;case 3:v[x].fn.call(v[x].context,u,d);break;case 4:v[x].fn.call(v[x].context,u,d,h);break;default:if(!b)for(T=1,b=new Array(y-1);T<y;T++)b[T-1]=arguments[T];v[x].fn.apply(v[x].context,b)}}return!0},o.prototype.on=function(c,u,d){return r(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return r(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return a(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&a(this,f);else{for(var m=0,v=[],y=p.length;m<y;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&v.push(p[m]);v.length?this._events[f]=v.length===1?v[0]:v:a(this,f)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o}(ax)),ax.exports}var IK=CK(),jw=sq(IK);const xp="1.6.2",$d={};function RK(){return typeof __HLS_WORKER_BUNDLE__=="function"}function PK(){const n=$d[xp];if(n)return n.clientCount++,n;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),s={worker:new self.Worker(t),objectURL:t,clientCount:1};return $d[xp]=s,s}function NK(n){const e=$d[n];if(e)return e.clientCount++,e;const t=new self.URL(n,self.location.href).href,s={worker:new self.Worker(t),scriptURL:t,clientCount:1};return $d[n]=s,s}function DK(n){const e=$d[n||xp];if(e&&e.clientCount--===1){const{worker:i,objectURL:s}=e;delete $d[n||xp],s&&self.URL.revokeObjectURL(s),i.terminate()}}function lD(n,e){return e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function Bw(n,e){return e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function av(n,e){let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t}function bp(n,e){const t=e;let i=0;for(;Bw(n,e);){i+=10;const s=av(n,e+6);i+=s,lD(n,e+10)&&(i+=10),e+=i}if(i>0)return n.subarray(t,t+i)}function OK(n,e,t,i){const s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=e[t+2],a=r>>2&15;if(a>12){const f=new Error(`invalid ADTS sampling index:${a}`);n.emit(F.ERROR,F.ERROR,{type:ut.MEDIA_ERROR,details:xe.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}const o=(r>>6&3)+1,l=e[t+3]>>6&3|(r&1)<<2,c="mp4a.40."+o,u=s[a];let d=a;(o===5||o===29)&&(d-=3);const h=[o<<3|(d&14)>>1,(d&1)<<7|l<<3];return an.log(`manifest codec:${i}, parsed codec:${c}, channels:${l}, rate:${u} (ADTS object type:${o} sampling index:${a})`),{config:h,samplerate:u,channelCount:l,codec:c,parsedCodec:c,manifestCodec:i}}function cD(n,e){return n[e]===255&&(n[e+1]&246)===240}function uD(n,e){return n[e+1]&1?7:9}function Uw(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function MK(n,e){return e+5<n.length}function sy(n,e){return e+1<n.length&&cD(n,e)}function FK(n,e){return MK(n,e)&&cD(n,e)&&Uw(n,e)<=n.length-e}function jK(n,e){if(sy(n,e)){const t=uD(n,e);if(e+t>=n.length)return!1;const i=Uw(n,e);if(i<=t)return!1;const s=e+i;return s===n.length||sy(n,s)}return!1}function dD(n,e,t,i,s){if(!n.samplerate){const r=OK(e,t,i,s);if(!r)return;In(n,r)}}function hD(n){return 1024*9e4/n}function BK(n,e){const t=uD(n,e);if(e+t<=n.length){const i=Uw(n,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}function fD(n,e,t,i,s){const r=hD(n.samplerate),a=i+s*r,o=BK(e,t);let l;if(o){const{frameLength:d,headerLength:h}=o,f=h+d,p=Math.max(0,t+f-e.length);p?(l=new Uint8Array(f-h),l.set(e.subarray(t+h,e.length),0)):l=e.subarray(t+h,t+f);const m={unit:l,pts:a};return p||n.samples.push(m),{sample:m,length:f,missing:p}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:a},length:c,missing:-1}}function UK(n,e){return Bw(n,e)&&av(n,e+6)+10<=n.length-e}function $K(n){if(n.size<2)return;const e=_r(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}}function HK(n){if(n.size<2)return;if(n.type==="TXXX"){let t=1;const i=_r(n.data.subarray(t),!0);t+=i.length+1;const s=_r(n.data.subarray(t));return{key:n.type,info:i,data:s}}const e=_r(n.data.subarray(1));return{key:n.type,info:"",data:e}}function zK(n){if(n.type==="WXXX"){if(n.size<2)return;let t=1;const i=_r(n.data.subarray(t),!0);t+=i.length+1;const s=_r(n.data.subarray(t));return{key:n.type,info:i,data:s}}const e=_r(n.data);return{key:n.type,info:"",data:e}}function WK(n){return btoa(String.fromCharCode(...n))}function pD(n,e){if(n<0)return-pD(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const s=Math.floor(n*t);return(s%2===0?s:s+1)/t}else return Math.round(n*t)/t}function VK(n,e){const t=new URL(n),i=new URL(e);if(t.origin!==i.origin)return n;const s=t.pathname.split("/").slice(1),r=i.pathname.split("/").slice(1,-1);for(;s[0]===r[0];)s.shift(),r.shift();for(;r.length;)r.shift(),s.unshift("..");return s.join("/")}function GK(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(s=="x"?r:r&3|8).toString(16)})}}}function YK(n){return n instanceof ArrayBuffer?n:n.byteOffset==0&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function ox(n,e=0,t=1/0){return qK(n,e,t,Uint8Array)}function qK(n,e,t,i){const s=KK(n);let r=1;"BYTES_PER_ELEMENT"in i&&(r=i.BYTES_PER_ELEMENT);const a=XK(n)?n.byteOffset:0,o=(a+n.byteLength)/r,l=(a+e)/r,c=Math.floor(Math.max(0,Math.min(l,o))),u=Math.floor(Math.min(c+Math.max(t,0),o));return new i(s,c,u-c)}function KK(n){return n instanceof ArrayBuffer?n:n.buffer}function XK(n){return n&&n.buffer instanceof ArrayBuffer&&n.byteLength!==void 0&&n.byteOffset!==void 0}function QK(n){const e={key:n.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(n.size<2)return;if(n.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const i=n.data.subarray(1).indexOf(0);if(i===-1)return;const s=_r(ox(n.data,1,i)),r=n.data[2+i],a=n.data.subarray(3+i).indexOf(0);if(a===-1)return;const o=_r(ox(n.data,3+i,a));let l;return s==="-->"?l=_r(ox(n.data,4+i+a)):l=YK(n.data.subarray(4+i+a)),e.mimeType=s,e.pictureType=r,e.description=o,e.data=l,e}function JK(n){return n.type==="PRIV"?$K(n):n.type[0]==="W"?zK(n):n.type==="APIC"?QK(n):HK(n)}function ZK(n){const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=av(n,4),i=10;return{type:e,size:t,data:n.subarray(i,i+t)}}const xm=10,eX=10;function gD(n){let e=0;const t=[];for(;Bw(n,e);){const i=av(n,e+6);n[e+5]>>6&1&&(e+=xm),e+=xm;const s=e+i;for(;e+eX<s;){const r=ZK(n.subarray(e)),a=JK(r);a&&t.push(a),e+=r.size+xm}lD(n,e)&&(e+=xm)}return t}function mD(n){return n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp"}function tX(n){if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,t&&(i+=4772185884e-2),Math.round(i)}}function $w(n){const e=gD(n);for(let t=0;t<e.length;t++){const i=e[t];if(mD(i))return tX(i)}}let vr=function(n){return n.audioId3="org.id3",n.dateRange="com.apple.quicktime.HLS",n.emsg="https://aomedia.org/emsg/ID3",n.misbklv="urn:misb:KLV:bin:1910.1",n}({});function ja(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Hw{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=Yr(this.cachedData,e),this.cachedData=null);let i=bp(e,0),s=i?i.length:0,r;const a=this._audioTrack,o=this._id3Track,l=i?$w(i):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Je(l))&&(this.basePTS=nX(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:vr.audioId3,duration:Number.POSITIVE_INFINITY});s<c;){if(this.canParse(e,s)){const u=this.appendFrame(a,e,s);u?(this.frameIndex++,this.lastPTS=u.sample.pts,s+=u.length,r=s):s=c}else UK(e,s)?(i=bp(e,s),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:vr.audioId3,duration:Number.POSITIVE_INFINITY}),s+=i.length,r=s):s++;if(s===c&&r!==c){const u=e.slice(r);this.cachedData?this.cachedData=Yr(this.cachedData,u):this.cachedData=u}}return{audioTrack:a,videoTrack:ja(),id3Track:o,textTrack:ja()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:ja(),id3Track:this._id3Track,textTrack:ja()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const nX=(n,e,t)=>{if(Je(n))return n*90;const i=t?t.baseTime*9e4/t.timescale:0;return e*9e4+i};let bm=null;const iX=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],sX=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],rX=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],aX=[0,1,1,4];function yD(n,e,t,i,s){if(t+24>e.length)return;const r=vD(e,t);if(r&&t+r.frameLength<=e.length){const a=r.samplesPerFrame*9e4/r.sampleRate,o=i+s*a,l={unit:e.subarray(t,t+r.frameLength),pts:o,dts:o};return n.config=[],n.channelCount=r.channelCount,n.samplerate=r.sampleRate,n.samples.push(l),{sample:l,length:r.frameLength,missing:0}}}function vD(n,e){const t=n[e+1]>>3&3,i=n[e+1]>>1&3,s=n[e+2]>>4&15,r=n[e+2]>>2&3;if(t!==1&&s!==0&&s!==15&&r!==3){const a=n[e+2]>>1&1,o=n[e+3]>>6,l=t===3?3-i:i===3?3:4,c=iX[l*14+s-1]*1e3,d=sX[(t===3?0:t===2?1:2)*3+r],h=o===3?1:2,f=rX[t][i],p=aX[i],m=f*8*p,v=Math.floor(f*c/d+a)*p;if(bm===null){const x=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);bm=x?parseInt(x[1]):0}return!!bm&&bm<=87&&i===2&&c>=224e3&&o===0&&(n[e+3]=n[e+3]|128),{sampleRate:d,channelCount:h,frameLength:v,samplesPerFrame:m}}}function zw(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function xD(n,e){return e+1<n.length&&zw(n,e)}function oX(n,e){return zw(n,e)&&4<=n.length-e}function bD(n,e){if(e+1<n.length&&zw(n,e)){const i=vD(n,e);let s=4;i!=null&&i.frameLength&&(s=i.frameLength);const r=e+s;return r===n.length||xD(n,r)}return!1}class lX extends Hw{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const i=bp(e,0);let s=(i==null?void 0:i.length)||0;if(bD(e,s))return!1;for(let r=e.length;s<r;s++)if(jK(e,s))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return FK(e,t)}appendFrame(e,t,i){dD(e,this.observer,t,i,e.manifestCodec);const s=fD(e,t,i,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const SD=(n,e)=>{let t=0,i=5;e+=i;const s=new Uint32Array(1),r=new Uint32Array(1),a=new Uint8Array(1);for(;i>0;){a[0]=n[e];const o=Math.min(i,8),l=8-o;r[0]=4278190080>>>24+l<<l,s[0]=(a[0]&r[0])>>l,t=t?t<<o|s[0]:s[0],e+=1,i-=o}return t};class cX extends Hw{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const s=wD(e,t,i,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const t=bp(e,0);if(!t)return!1;const i=t.length;return e[i]===11&&e[i+1]===119&&$w(t)!==void 0&&SD(e,i)<16}}function wD(n,e,t,i,s){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const r=e[t+4]>>6;if(r>=3)return-1;const o=[48e3,44100,32e3][r],l=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+r]*2;if(t+u>e.length)return-1;const d=e[t+6]>>5;let h=0;d===2?h+=2:(d&1&&d!==1&&(h+=2),d&4&&(h+=2));const f=(e[t+6]<<8|e[t+7])>>12-h&1,m=[2,1,2,3,3,4,4,5][d]+f,v=e[t+5]>>3,y=e[t+5]&7,b=new Uint8Array([r<<6|v<<1|y>>2,(y&3)<<6|d<<3|f<<2|l>>4,l<<4&224]),x=1536/o*9e4,_=i+s*x,T=e.subarray(t,t+u);return n.config=b,n.channelCount=m,n.samplerate=o,n.samples.push({unit:T,pts:_}),u}class uX extends Hw{resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=bp(e,0);let i=(t==null?void 0:t.length)||0;if(t&&e[i]===11&&e[i+1]===119&&$w(t)!==void 0&&SD(e,i)<=16)return!1;for(let s=e.length;i<s;i++)if(bD(e,i))return an.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return oX(e,t)}appendFrame(e,t,i){if(this.basePTS!==null)return yD(e,t,i,this.basePTS,this.frameIndex)}}const dX=/\/emsg[-/]ID3/i;class hX{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,s){const r=this.videoTrack=ja("video",1),a=this.audioTrack=ja("audio",1),o=this.txtTrack=ja("text",1);if(this.id3Track=ja("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=ON(e);if(l.video){const{id:c,timescale:u,codec:d,supplemental:h}=l.video;r.id=c,r.timescale=o.timescale=u,r.codec=d,r.supplemental=h}if(l.audio){const{id:c,timescale:u,codec:d}=l.audio;a.id=c,a.timescale=u,a.codec=d}o.id=PN.text,r.sampleDuration=0,r.duration=a.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return cq(e)}demux(e,t){this.timeOffset=t;let i=e;const s=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=Yr(this.remainderData,e));const o=yq(i);this.remainderData=o.remainder,s.samples=o.valid||new Uint8Array}else s.samples=i;const a=this.extractID3Track(s,t);return r.samples=xA(t,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(t,this.timeOffset);return i.samples=xA(e,t),{videoTrack:t,audioTrack:ja(),id3Track:s,textTrack:ja()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const s=Ot(e.samples,["emsg"]);s&&s.forEach(r=>{const a=xq(r);if(dX.test(a.schemeIdUri)){const o=ZA(a,t);let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=a.payload;i.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:vr.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=ZA(a,t);i.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:vr.misbklv,duration:Number.POSITIVE_INFINITY})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function ZA(n,e){return Je(n.presentationTime)?n.presentationTime/n.timeScale:e+n.presentationTimeDelta/n.timeScale}class fX{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Nw(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,tc.cbc)}decryptAacSample(e,t,i){const s=e[t].unit;if(s.length<=16)return;const r=s.subarray(16,s.length-s.length%16),a=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);s.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)})}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length){i();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)i.set(e.subarray(r,r+16),s);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)e.set(i.subarray(s,s+16),r);return e}decryptAvcSample(e,t,i,s,r){const a=FN(r.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{r.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,s)})}decryptAvcSamples(e,t,i,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length){s();return}const r=e[t].units;for(;!(i>=r.length);i++){const a=r[i];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,i,s,a),!this.decrypter.isSync()))return}}}}class _D{constructor(){this.VideoSample=null}createVideoSample(e,t,i){return{key:e,frame:!1,pts:t,dts:i,units:[],length:0}}getLastNalUnit(e){var t;let i=this.VideoSample,s;if((!i||i.units.length===0)&&(i=e[e.length-1]),(t=i)!=null&&t.units){const r=i.units;s=r[r.length-1]}return s}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const i=t.samples,s=i.length;if(s){const r=i[s-1];e.pts=r.pts,e.dts=r.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,i){const s=t.byteLength;let r=e.naluState||0;const a=r,o=[];let l=0,c,u,d,h=-1,f=0;for(r===-1&&(h=0,f=this.getNALuType(t,0),r=0,l=1);l<s;){if(c=t[l++],!r){r=c?0:1;continue}if(r===1){r=c?0:2;continue}if(!c)r=3;else if(c===1){if(u=l-r-1,h>=0){const p={data:t.subarray(h,u),type:f};o.push(p)}else{const p=this.getLastNalUnit(e.samples);p&&(a&&l<=4-a&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-a)),u>0&&(p.data=Yr(p.data,t.subarray(0,u)),p.state=0))}l<s?(d=this.getNALuType(t,l),h=l,f=d,r=0):r=-1}else r=0}if(h>=0&&r>=0){const p={data:t.subarray(h,s),type:f,state:r};o.push(p)}if(o.length===0){const p=this.getLastNalUnit(e.samples);p&&(p.data=Yr(p.data,t))}return e.naluState=r,o}}class Rf{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,s=new Uint8Array(4),r=Math.min(4,t);if(r===0)throw new Error("no bytes available");s.set(e.subarray(i,i+r)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=r*8,this.bytesAvailable-=r}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&an.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class eL extends _D{parsePES(e,t,i,s){const r=this.parseNALu(e,i.data,s);let a=this.VideoSample,o,l=!1;i.data=null,a&&r.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),r.forEach(c=>{var u,d;switch(c.type){case 1:{let m=!1;o=!0;const v=c.data;if(l&&v.length>4){const y=this.readSliceType(v);(y===2||y===4||y===7||y===9)&&(m=!0)}if(m){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.frame=!0,a.key=m;break}case 5:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,Iw(c.data,1,i.pts,t.samples);break}case 7:{var f,p;o=!0,l=!0;const m=c.data,v=this.readSPS(m);if(!e.sps||e.width!==v.width||e.height!==v.height||((f=e.pixelRatio)==null?void 0:f[0])!==v.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==v.pixelRatio[1]){e.width=v.width,e.height=v.height,e.pixelRatio=v.pixelRatio,e.sps=[m];const y=m.subarray(1,4);let b="avc1.";for(let x=0;x<3;x++){let _=y[x].toString(16);_.length<2&&(_="0"+_),b+=_}e.codec=b}break}case 8:o=!0,e.pps=[c.data];break;case 9:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(c)}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new Rf(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let i=8,s=8,r;for(let a=0;a<e;a++)s!==0&&(r=t.readEG(),s=(i+r+256)%256),i=s===0?i:s}readSPS(e){const t=new Rf(e);let i=0,s=0,r=0,a=0,o,l,c;const u=t.readUByte.bind(t),d=t.readBits.bind(t),h=t.readUEG.bind(t),f=t.readBoolean.bind(t),p=t.skipBits.bind(t),m=t.skipEG.bind(t),v=t.skipUEG.bind(t),y=this.skipScalingList.bind(this);u();const b=u();if(d(5),p(3),u(),v(),b===100||b===110||b===122||b===244||b===44||b===83||b===86||b===118||b===128){const k=h();if(k===3&&p(1),v(),v(),p(1),f())for(l=k!==3?8:12,c=0;c<l;c++)f()&&(c<6?y(16,t):y(64,t))}v();const x=h();if(x===0)h();else if(x===1)for(p(1),m(),m(),o=h(),c=0;c<o;c++)m();v(),p(1);const _=h(),T=h(),C=d(1);C===0&&p(1),p(1),f()&&(i=h(),s=h(),r=h(),a=h());let L=[1,1];if(f()&&f())switch(u()){case 1:L=[1,1];break;case 2:L=[12,11];break;case 3:L=[10,11];break;case 4:L=[16,11];break;case 5:L=[40,33];break;case 6:L=[24,11];break;case 7:L=[20,11];break;case 8:L=[32,11];break;case 9:L=[80,33];break;case 10:L=[18,11];break;case 11:L=[15,11];break;case 12:L=[64,33];break;case 13:L=[160,99];break;case 14:L=[4,3];break;case 15:L=[3,2];break;case 16:L=[2,1];break;case 255:{L=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((_+1)*16-i*2-s*2),height:(2-C)*(T+1)*16-(C?2:4)*(r+a),pixelRatio:L}}}class tL extends _D{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,i,s){const r=this.parseNALu(e,i.data,s);let a=this.VideoSample,o,l=!1;i.data=null,a&&r.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),r.forEach(c=>{var u,d;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,l){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,Iw(c.data,2,i.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=In(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(o=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const f=this.readSPS(c.data);e.width=f.width,e.height=f.height,e.pixelRatio=f.pixelRatio,e.codec=f.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const p in f.params)e.params[p]=f.params[p]}this.pushParameterSet(e.sps,c.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const f=this.readPPS(c.data);for(const p in f)e.params[p]=f[p]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:o=!1;break}a&&o&&a.units.push(c)}),s&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let i=0;for(let s=0;s<e.byteLength;s++)s>=2&&e[s]===3&&e[s-1]===0&&e[s-2]===0||(t[i]=e[s],i++);return new Uint8Array(t.buffer,0,i)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Rf(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const i=t.readBits(3),s=t.readBoolean();return{numTemporalLayers:i+1,temporalIdNested:s}}readSPS(e){const t=new Rf(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const i=t.readBits(3);t.readBoolean();const s=t.readBits(2),r=t.readBoolean(),a=t.readBits(5),o=t.readUByte(),l=t.readUByte(),c=t.readUByte(),u=t.readUByte(),d=t.readUByte(),h=t.readUByte(),f=t.readUByte(),p=t.readUByte(),m=t.readUByte(),v=t.readUByte(),y=t.readUByte(),b=[],x=[];for(let ne=0;ne<i;ne++)b.push(t.readBoolean()),x.push(t.readBoolean());if(i>0)for(let ne=i;ne<8;ne++)t.readBits(2);for(let ne=0;ne<i;ne++)b[ne]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),x[ne]&&t.readUByte();t.readUEG();const _=t.readUEG();_==3&&t.skipBits(1);const T=t.readUEG(),C=t.readUEG(),L=t.readBoolean();let k=0,M=0,D=0,I=0;L&&(k+=t.readUEG(),M+=t.readUEG(),D+=t.readUEG(),I+=t.readUEG());const R=t.readUEG(),q=t.readUEG(),Y=t.readUEG(),ee=t.readBoolean();for(let ne=ee?0:i;ne<=i;ne++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let Qe=0;Qe<4;Qe++)for(let Ye=0;Ye<(Qe===3?2:6);Ye++)if(!t.readBoolean())t.readUEG();else{const Me=Math.min(64,1<<4+(Qe<<1));Qe>1&&t.readEG();for(let Ue=0;Ue<Me;Ue++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const B=t.readUEG();let U=0;for(let ne=0;ne<B;ne++){let Qe=!1;if(ne!==0&&(Qe=t.readBoolean()),Qe){ne===B&&t.readUEG(),t.readBoolean(),t.readUEG();let Ye=0;for(let he=0;he<=U;he++){const Me=t.readBoolean();let Ue=!1;Me||(Ue=t.readBoolean()),(Me||Ue)&&Ye++}U=Ye}else{const Ye=t.readUEG(),he=t.readUEG();U=Ye+he;for(let Me=0;Me<Ye;Me++)t.readUEG(),t.readBoolean();for(let Me=0;Me<he;Me++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const ne=t.readUEG();for(let Qe=0;Qe<ne;Qe++){for(let Ye=0;Ye<Y+4;Ye++)t.readBits(1);t.readBits(1)}}let re=0,N=1,W=1,K=!0,Z=1,te=0;t.readBoolean(),t.readBoolean();let oe=!1;if(t.readBoolean()){if(t.readBoolean()){const $e=t.readUByte(),Fe=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Xe=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];$e>0&&$e<16?(N=Fe[$e-1],W=Xe[$e-1]):$e===255&&(N=t.readBits(16),W=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),oe=t.readBoolean(),oe&&(k+=t.readUEG(),M+=t.readUEG(),D+=t.readUEG(),I+=t.readUEG()),t.readBoolean()&&(Z=t.readBits(32),te=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const Xe=t.readBoolean(),_t=t.readBoolean();let We=!1;(Xe||_t)&&(We=t.readBoolean(),We&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),We&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let Lt=0;Lt<=i;Lt++){K=t.readBoolean();const zt=K||t.readBoolean();let ht=!1;zt?t.readEG():ht=t.readBoolean();const Ct=ht?1:t.readUEG()+1;if(Xe)for(let Ve=0;Ve<Ct;Ve++)t.readUEG(),t.readUEG(),We&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(_t)for(let Ve=0;Ve<Ct;Ve++)t.readUEG(),t.readUEG(),We&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),re=t.readUEG())}let ge=T,De=C;if(L||oe){let ne=1,Qe=1;_===1?ne=Qe=2:_==2&&(ne=2),ge=T-ne*M-ne*k,De=C-Qe*I-Qe*D}const Re=s?["A","B","C"][s]:"",Ce=o<<24|l<<16|c<<8|u;let Be=0;for(let ne=0;ne<32;ne++)Be=(Be|(Ce>>ne&1)<<31-ne)>>>0;let Ze=Be.toString(16);return a===1&&Ze==="2"&&(Ze="6"),{codecString:`hvc1.${Re}${a}.${Ze}.${r?"H":"L"}${y}.B0`,params:{general_tier_flag:r,general_profile_idc:a,general_profile_space:s,general_profile_compatibility_flags:[o,l,c,u],general_constraint_indicator_flags:[d,h,f,p,m,v],general_level_idc:y,bit_depth:R+8,bit_depth_luma_minus8:R,bit_depth_chroma_minus8:q,min_spatial_segmentation_idc:re,chroma_format_idc:_,frame_rate:{fixed:K,fps:te/Z}},width:ge,height:De,pixelRatio:[N,W]}}readPPS(e){const t=new Rf(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const s=t.readBoolean(),r=t.readBoolean();let a=1;return r&&s?a=0:r?a=3:s&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const ts=188;class Sl{constructor(e,t,i,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=s,this.videoParser=null}static probe(e,t){const i=Sl.syncOffset(e);return i>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),i!==-1}static syncOffset(e){const t=e.length;let i=Math.min(ts*5,t-ts)+1,s=0;for(;s<i;){let r=!1,a=-1,o=0;for(let l=s;l<t;l+=ts)if(e[l]===71&&(t-l===ts||e[l+ts]===71)){if(o++,a===-1&&(a=l,a!==0&&(i=Math.min(a+ts*99,e.length-ts)+1)),r||(r=b2(e,l)===0),r&&o>1&&(a===0&&o>2||l+ts>i))return a}else{if(o)return-1;break}s++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:PN[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,i,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Sl.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=Sl.createTrack("audio",s),this._id3Track=Sl.createTrack("id3"),this._txtTrack=Sl.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,s=!1){i||(this.sampleAes=null);let r;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=a.pid,d=a.pesData,h=o.pid,f=l.pid,p=o.pesData,m=l.pesData,v=null,y=this.pmtParsed,b=this._pmtId,x=e.length;if(this.remainderData&&(e=Yr(this.remainderData,e),x=e.length,this.remainderData=null),x<ts&&!s)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};const _=Math.max(0,Sl.syncOffset(e));x-=(x-_)%ts,x<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,x,e.buffer.byteLength-x));let T=0;for(let L=_;L<x;L+=ts)if(e[L]===71){const k=!!(e[L+1]&64),M=b2(e,L),D=(e[L+3]&48)>>4;let I;if(D>1){if(I=L+5+e[L+4],I===L+ts)continue}else I=L+4;switch(M){case u:if(k){if(d&&(r=Xu(d,this.logger))){if(this.videoParser===null)switch(a.segmentCodec){case"avc":this.videoParser=new eL;break;case"hevc":this.videoParser=new tL;break}this.videoParser!==null&&this.videoParser.parsePES(a,c,r,!1)}d={data:[],size:0}}d&&(d.data.push(e.subarray(I,L+ts)),d.size+=L+ts-I);break;case h:if(k){if(p&&(r=Xu(p,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,r);break;case"mp3":this.parseMPEGPES(o,r);break;case"ac3":this.parseAC3PES(o,r);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(I,L+ts)),p.size+=L+ts-I);break;case f:k&&(m&&(r=Xu(m,this.logger))&&this.parseID3PES(l,r),m={data:[],size:0}),m&&(m.data.push(e.subarray(I,L+ts)),m.size+=L+ts-I);break;case 0:k&&(I+=e[I]+1),b=this._pmtId=pX(e,I);break;case b:{k&&(I+=e[I]+1);const R=gX(e,I,this.typeSupported,i,this.observer,this.logger);u=R.videoPid,u>0&&(a.pid=u,a.segmentCodec=R.segmentVideoCodec),h=R.audioPid,h>0&&(o.pid=h,o.segmentCodec=R.segmentAudioCodec),f=R.id3Pid,f>0&&(l.pid=f),v!==null&&!y&&(this.logger.warn(`MPEG-TS PMT found at ${L} after unknown PID '${v}'. Backtracking to sync byte @${_} to parse all TS packets.`),v=null,L=_-188),y=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=M;break}}else T++;T>0&&S2(this.observer,new Error(`Found ${T} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=d,o.pesData=p,l.pesData=m;const C={audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};return s&&this.extractRemainingSamples(C),C}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:s,textTrack:r}=e,a=i.pesData,o=t.pesData,l=s.pesData;let c;if(a&&(c=Xu(a,this.logger))){if(this.videoParser===null)switch(i.segmentCodec){case"avc":this.videoParser=new eL;break;case"hevc":this.videoParser=new tL;break}this.videoParser!==null&&(this.videoParser.parsePES(i,r,c,!0),i.pesData=null)}else i.pesData=a;if(o&&(c=Xu(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(c=Xu(l,this.logger))?(this.parseID3PES(s,c),s.pesData=null):s.pesData=l}demuxSampleAes(e,t,i){const s=this.demux(e,i,!0,!this.config.progressive),r=this.sampleAes=new fX(this.observer,this.config,t);return this.decrypt(s,r)}decrypt(e,t){return new Promise(i=>{const{audioTrack:s,videoTrack:r}=e;s.samples&&s.segmentCodec==="aac"?t.decryptAacSamples(s.samples,0,()=>{r.samples?t.decryptAvcSamples(r.samples,0,0,()=>{i(e)}):i(e)}):r.samples&&t.decryptAvcSamples(r.samples,0,0,()=>{i(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let i=0;const s=this.aacOverFlow;let r=t.data;if(s){this.aacOverFlow=null;const d=s.missing,h=s.sample.unit.byteLength;if(d===-1)r=Yr(s.sample.unit,r);else{const f=h-d;s.sample.unit.set(r.subarray(0,d),f),e.samples.push(s.sample),i=s.missing}}let a,o;for(a=i,o=r.length;a<o-1&&!sy(r,a);a++);if(a!==i){let d;const h=a<o-1;if(h?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",S2(this.observer,new Error(d),h,this.logger),!h)return}dD(e,this.observer,r,a,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(s){const d=hD(e.samplerate);l=s.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;a<o;)if(u=fD(e,r,a,l,c),a+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;a<o-1&&!sy(r,a);a++);}parseMPEGPES(e,t){const i=t.data,s=i.length;let r=0,a=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<s;)if(xD(i,a)){const l=yD(e,i,a,o,r);if(l)a+=l.length,r++;else break}else a++}parseAC3PES(e,t){{const i=t.data,s=t.pts;if(s===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const r=i.length;let a=0,o=0,l;for(;o<r&&(l=wD(e,i,o,s,a++))>0;)o+=l}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=In({},t,{type:this._videoTrack?vr.emsg:vr.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function b2(n,e){return((n[e+1]&31)<<8)+n[e+2]}function pX(n,e){return(n[e+10]&31)<<8|n[e+11]}function gX(n,e,t,i,s,r){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(n[e+1]&15)<<8|n[e+2],l=e+3+o-4,c=(n[e+10]&15)<<8|n[e+11];for(e+=12+c;e<l;){const u=b2(n,e),d=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!i){lx("ADTS AAC",r);break}case 15:a.audioPid===-1&&(a.audioPid=u);break;case 21:a.id3Pid===-1&&(a.id3Pid=u);break;case 219:if(!i){lx("H.264",r);break}case 27:a.videoPid===-1&&(a.videoPid=u);break;case 3:case 4:!t.mpeg&&!t.mp3?r.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="mp3");break;case 193:if(!i){lx("AC-3",r);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="ac3"):r.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&d>0){let h=e+5,f=d;for(;f>2;){switch(n[h]){case 106:t.ac3!==!0?r.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=u,a.segmentAudioCodec="ac3");break}const m=n[h+1]+2;h+=m,f-=m}}break;case 194:case 135:return S2(s,new Error("Unsupported EC-3 in M2TS found"),void 0,r),a;case 36:a.videoPid===-1&&(a.videoPid=u,a.segmentVideoCodec="hevc",r.log("HEVC in M2TS found"));break}e+=d+5}return a}function S2(n,e,t,i){i.warn(`parsing error: ${e.message}`),n.emit(F.ERROR,F.ERROR,{type:ut.MEDIA_ERROR,details:xe.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function lx(n,e){e.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function Xu(n,e){let t=0,i,s,r,a,o;const l=n.data;if(!n||n.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=Yr(l[0],l[1]),l.splice(1,1);if(i=l[0],(i[0]<<16)+(i[1]<<8)+i[2]===1){if(s=(i[4]<<8)+i[5],s&&s>n.size-6)return null;const u=i[7];u&192&&(a=(i[9]&14)*536870912+(i[10]&255)*4194304+(i[11]&254)*16384+(i[12]&255)*128+(i[13]&254)/2,u&64?(o=(i[14]&14)*536870912+(i[15]&255)*4194304+(i[16]&254)*16384+(i[17]&255)*128+(i[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),r=i[8];let d=r+9;if(n.size<=d)return null;n.size-=d;const h=new Uint8Array(n.size);for(let f=0,p=l.length;f<p;f++){i=l[f];let m=i.byteLength;if(d)if(d>m){d-=m;continue}else i=i.subarray(d),m-=d,d=0;h.set(i,t),t+=m}return s&&(s-=r+3),{data:h,pts:a,dts:o,len:s}}return null}class mX{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const pl=Math.pow(2,32)-1;class ye{static init(){ye.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ye.types)ye.types.hasOwnProperty(e)&&(ye.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ye.HDLR_TYPES={video:t,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);ye.STTS=ye.STSC=ye.STCO=r,ye.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ye.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ye.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ye.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);ye.FTYP=ye.box(ye.types.ftyp,a,l,a,o),ye.DINF=ye.box(ye.types.dinf,ye.box(ye.types.dref,s))}static box(e,...t){let i=8,s=t.length;const r=s;for(;s--;)i+=t[s].byteLength;const a=new Uint8Array(i);for(a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=i&255,a.set(e,4),s=0,i=8;s<r;s++)a.set(t[s],i),i+=t[s].byteLength;return a}static hdlr(e){return ye.box(ye.types.hdlr,ye.HDLR_TYPES[e])}static mdat(e){return ye.box(ye.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(pl+1)),s=Math.floor(t%(pl+1));return ye.box(ye.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return ye.box(ye.types.mdia,ye.mdhd(e.timescale||0,e.duration||0),ye.hdlr(e.type),ye.minf(e))}static mfhd(e){return ye.box(ye.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ye.box(ye.types.minf,ye.box(ye.types.smhd,ye.SMHD),ye.DINF,ye.stbl(e)):ye.box(ye.types.minf,ye.box(ye.types.vmhd,ye.VMHD),ye.DINF,ye.stbl(e))}static moof(e,t,i){return ye.box(ye.types.moof,ye.mfhd(e),ye.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=ye.trak(e[t]);return ye.box.apply(null,[ye.types.moov,ye.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(ye.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=ye.trex(e[t]);return ye.box.apply(null,[ye.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(pl+1)),s=Math.floor(t%(pl+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ye.box(ye.types.mvhd,r)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let s,r;for(s=0;s<t.length;s++)r=t[s].flags,i[s+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return ye.box(ye.types.sdtp,i)}static stbl(e){return ye.box(ye.types.stbl,ye.stsd(e),ye.box(ye.types.stts,ye.STTS),ye.box(ye.types.stsc,ye.STSC),ye.box(ye.types.stsz,ye.STSZ),ye.box(ye.types.stco,ye.STCO))}static avc1(e){let t=[],i=[],s,r,a;for(s=0;s<e.sps.length;s++)r=e.sps[s],a=r.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(r));for(s=0;s<e.pps.length;s++)r=e.pps[s],a=r.byteLength,i.push(a>>>8&255),i.push(a&255),i=i.concat(Array.prototype.slice.call(r));const o=ye.box(ye.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return ye.box(ye.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,ye.box(ye.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ye.box(ye.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return ye.box(ye.types.mp4a,ye.audioStsd(e),ye.box(ye.types.esds,ye.esds(e)))}static mp3(e){return ye.box(ye.types[".mp3"],ye.audioStsd(e))}static ac3(e){return ye.box(ye.types["ac-3"],ye.audioStsd(e),ye.box(ye.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return ye.box(ye.types.stsd,ye.STSD,ye.mp4a(e));if(t==="ac3"&&e.config)return ye.box(ye.types.stsd,ye.STSD,ye.ac3(e));if(t==="mp3"&&e.codec==="mp3")return ye.box(ye.types.stsd,ye.STSD,ye.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return ye.box(ye.types.stsd,ye.STSD,ye.avc1(e));if(t==="hevc"&&e.vps)return ye.box(ye.types.stsd,ye.STSD,ye.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,i=(e.duration||0)*(e.timescale||0),s=e.width||0,r=e.height||0,a=Math.floor(i/(pl+1)),o=Math.floor(i%(pl+1));return ye.box(ye.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,r>>8&255,r&255,0,0]))}static traf(e,t){const i=ye.sdtp(e),s=e.id,r=Math.floor(t/(pl+1)),a=Math.floor(t%(pl+1));return ye.box(ye.types.traf,ye.box(ye.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),ye.box(ye.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,a>>24,a>>16&255,a>>8&255,a&255])),ye.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,ye.box(ye.types.trak,ye.tkhd(e),ye.mdia(e))}static trex(e){const t=e.id;return ye.box(ye.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],s=i.length,r=12+16*s,a=new Uint8Array(r);let o,l,c,u,d,h;for(t+=8+r,a.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<s;o++)l=i[o],c=l.duration,u=l.size,d=l.flags,h=l.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*o);return ye.box(ye.types.trun,a)}static initSegment(e){ye.types||ye.init();const t=ye.moov(e);return Yr(ye.FTYP,t)}static hvc1(e){const t=e.params,i=[e.vps,e.sps,e.pps],s=4,r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),s-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),i.length]);let a=r.length;for(let p=0;p<i.length;p+=1){a+=3;for(let m=0;m<i[p].length;m+=1)a+=2+i[p][m].length}const o=new Uint8Array(a);o.set(r,0),a=r.length;const l=i.length-1;for(let p=0;p<i.length;p+=1){o.set(new Uint8Array([32+p|(p===l?128:0),0,i[p].length]),a),a+=3;for(let m=0;m<i[p].length;m+=1)o.set(new Uint8Array([i[p][m].length>>8,i[p][m].length&255]),a),a+=2,o.set(i[p][m],a),a+=i[p][m].length}const c=ye.box(ye.types.hvcC,o),u=e.width,d=e.height,h=e.pixelRatio[0],f=e.pixelRatio[1];return ye.box(ye.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,ye.box(ye.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ye.box(ye.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,f>>24,f>>16&255,f>>8&255,f&255])))}}ye.types=void 0;ye.HDLR_TYPES=void 0;ye.STTS=void 0;ye.STSC=void 0;ye.STCO=void 0;ye.STSZ=void 0;ye.VMHD=void 0;ye.SMHD=void 0;ye.STSD=void 0;ye.FTYP=void 0;ye.DINF=void 0;const ED=9e4;function Ww(n,e,t=1,i=!1){const s=n*e*t;return i?Math.round(s):s}function yX(n,e,t=1,i=!1){return Ww(n,e,1/t,i)}function Vh(n,e=!1){return Ww(n,1e3,1/ED,e)}function vX(n,e=1){return Ww(n,ED,1/e)}const xX=10*1e3,bX=1024,SX=1152,wX=1536;let Qu=null,cx=null;function nL(n,e,t,i){return{duration:e,size:t,cts:i,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:n?2:1,isNonSync:n?0:1}}}class Jm{constructor(e,t,i,s){if(this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=s,this.ISGenerated=!1,Qu===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Qu=a?parseInt(a[1]):0}if(cx===null){const r=navigator.userAgent.match(/Safari\/(\d+)/i);cx=r?parseInt(r[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,s=e.reduce((r,a)=>{let o=a.pts,l=o-r;return l<-4294967296&&(t=!0,o=jr(o,i),l=o-r),l>0?r:o},i);return t&&this.logger.debug("PTS rollover detected"),s}remux(e,t,i,s,r,a,o,l){let c,u,d,h,f,p,m=r,v=r;const y=e.pid>-1,b=t.pid>-1,x=t.samples.length,_=e.samples.length>0,T=o&&x>0||x>1;if((!y||_)&&(!b||T)||this.ISGenerated||o){if(this.ISGenerated){var L,k,M,D;const Y=this.videoTrackConfig;(Y&&(t.width!==Y.width||t.height!==Y.height||((L=t.pixelRatio)==null?void 0:L[0])!==((k=Y.pixelRatio)==null?void 0:k[0])||((M=t.pixelRatio)==null?void 0:M[1])!==((D=Y.pixelRatio)==null?void 0:D[1]))||!Y&&T||this.nextAudioPts===null&&_)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,t,r,a));const I=this.isVideoContiguous;let R=-1,q;if(T&&(R=_X(t.samples),!I&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,R>0){this.logger.warn(`[mp4-remuxer]: Dropped ${R} out of ${x} video samples due to a missing keyframe`);const Y=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(R),t.dropped+=R,v+=(t.samples[0].pts-Y)/t.inputTimeScale,q=v}else R===-1&&(this.logger.warn(`[mp4-remuxer]: No keyframe found out of ${x} video samples`),p=!1);if(this.ISGenerated){if(_&&T){const Y=this.getVideoStartPts(t.samples),j=(jr(e.samples[0].pts,Y)-Y)/t.inputTimeScale;m+=Math.max(0,j),v+=Math.max(0,-j)}if(_){if(e.samplerate||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,r,a)),u=this.remuxAudio(e,m,this.isAudioContiguous,a,b||T||l===lt.AUDIO?v:void 0),T){const Y=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,r,a)),c=this.remuxVideo(t,v,I,Y)}}else T&&(c=this.remuxVideo(t,v,I,0));c&&(c.firstKeyFrame=R,c.independent=R!==-1,c.firstKeyFramePTS=q)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(f=TD(i,r,this._initPTS,this._initDTS)),s.samples.length&&(h=AD(s,r,this._initPTS))),{audio:u,video:c,initSegment:d,independent:p,text:h,id3:f}}generateIS(e,t,i,s){const r=e.samples,a=t.samples,o=this.typeSupported,l={},c=this._initPTS;let u=!c||s,d="audio/mp4",h,f,p;if(u&&(h=f=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):ye.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(p=e.inputTimeScale,!c||p!==c.timescale?h=f=r[0].pts-Math.round(p*i):u=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:ye.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(p=t.inputTimeScale,!c||p!==c.timescale){const m=this.getVideoStartPts(a),v=Math.round(p*i);f=Math.min(f,jr(a[0].dts,m)-v),h=Math.min(h,m-v)}else u=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:h,timescale:p},this._initDTS={baseTime:f,timescale:p}):h=p=void 0,{tracks:l,initPTS:h,timescale:p}}remuxVideo(e,t,i,s){const r=e.inputTimeScale,a=e.samples,o=[],l=a.length,c=this._initPTS;let u=this.nextAvcDts,d=8,h=this.videoSampleDuration,f,p,m=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,y=!1;if(!i||u===null){const U=t*r,Q=a[0].pts-jr(a[0].dts,a[0].pts);Qu&&u!==null&&Math.abs(U-Q-u)<15e3?i=!0:u=U-Q}const b=c.baseTime*r/c.timescale;for(let U=0;U<l;U++){const Q=a[U];Q.pts=jr(Q.pts-b,u),Q.dts=jr(Q.dts-b,u),Q.dts<a[U>0?U-1:U].dts&&(y=!0)}y&&a.sort(function(U,Q){const re=U.dts-Q.dts,N=U.pts-Q.pts;return re||N}),f=a[0].dts,p=a[a.length-1].dts;const x=p-f,_=x?Math.round(x/(l-1)):h||e.inputTimeScale/30;if(i){const U=f-u,Q=U>_,re=U<-1;if((Q||re)&&(Q?this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Vh(U,!0)} ms (${U}dts) hole between fragments detected at ${t.toFixed(3)}`):this.logger.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Vh(-U,!0)} ms (${U}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!re||u>=a[0].pts||Qu)){f=u;const N=a[0].pts-U;if(Q)a[0].dts=f,a[0].pts=N;else{let W=!0;for(let K=0;K<a.length&&!(a[K].dts>N&&W);K++){const Z=a[K].pts;if(a[K].dts-=U,a[K].pts-=U,K<a.length-1){const te=a[K+1].pts,oe=a[K].pts,de=te<=oe,ge=te<=Z;W=de==ge}}}this.logger.log(`Video: Initial PTS/DTS adjusted: ${Vh(N,!0)}/${Vh(f,!0)}, delta: ${Vh(U,!0)} ms`)}}f=Math.max(0,f);let T=0,C=0,L=f;for(let U=0;U<l;U++){const Q=a[U],re=Q.units,N=re.length;let W=0;for(let K=0;K<N;K++)W+=re[K].data.length;C+=W,T+=N,Q.length=W,Q.dts<L?(Q.dts=L,L+=_/4|0||1):L=Q.dts,m=Math.min(Q.pts,m),v=Math.max(Q.pts,v)}p=a[l-1].dts;const k=C+4*T+8;let M;try{M=new Uint8Array(k)}catch(U){this.observer.emit(F.ERROR,F.ERROR,{type:ut.MUX_ERROR,details:xe.REMUX_ALLOC_ERROR,fatal:!1,error:U,bytes:k,reason:`fail allocating video mdat ${k}`});return}const D=new DataView(M.buffer);D.setUint32(0,k),M.set(ye.types.mdat,4);let I=!1,R=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,ee=Number.NEGATIVE_INFINITY;for(let U=0;U<l;U++){const Q=a[U],re=Q.units;let N=0;for(let Z=0,te=re.length;Z<te;Z++){const oe=re[Z],de=oe.data,ge=oe.data.byteLength;D.setUint32(d,ge),d+=4,M.set(de,d),d+=ge,N+=4+ge}let W;if(U<l-1)h=a[U+1].dts-Q.dts,W=a[U+1].pts-Q.pts;else{const Z=this.config,te=U>0?Q.dts-a[U-1].dts:_;if(W=U>0?Q.pts-a[U-1].pts:_,Z.stretchShortVideoTrack&&this.nextAudioPts!==null){const oe=Math.floor(Z.maxBufferHole*r),de=(s?m+s*r:this.nextAudioPts)-Q.pts;de>oe?(h=de-te,h<0?h=te:I=!0,this.logger.log(`[mp4-remuxer]: It is approximately ${de/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=te}else h=te}const K=Math.round(Q.pts-Q.dts);R=Math.min(R,h),Y=Math.max(Y,h),q=Math.min(q,W),ee=Math.max(ee,W),o.push(nL(Q.key,h,N,K))}if(o.length){if(Qu){if(Qu<70){const U=o[0].flags;U.dependsOn=2,U.isNonSync=0}}else if(cx&&ee-q<Y-R&&_/Y<.025&&o[0].cts===0){this.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let U=f;for(let Q=0,re=o.length;Q<re;Q++){const N=U+o[Q].duration,W=U+o[Q].cts;if(Q<re-1){const K=N+o[Q+1].cts;o[Q].duration=K-W}else o[Q].duration=Q?o[Q-1].duration:_;o[Q].cts=0,U=N}}}h=I||!h?_:h,this.nextAvcDts=u=p+h,this.videoSampleDuration=h,this.isVideoContiguous=!0;const B={data1:ye.moof(e.sequenceNumber++,f,In(e,{samples:o})),data2:M,startPTS:m/r,endPTS:(v+h)/r,startDTS:f/r,endDTS:u/r,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,B}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return SX;case"ac3":return wX;default:return bX}}remuxAudio(e,t,i,s,r){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,c=this.getSamplesPerFrame(e),u=c*l,d=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],p=r!==void 0;let m=e.samples,v=h?0:8,y=this.nextAudioPts||-1;const b=t*a,x=d.baseTime*a/d.timescale;if(this.isAudioContiguous=i=i||m.length&&y>0&&(s&&Math.abs(b-y)<9e3||Math.abs(jr(m[0].pts-x,b)-y)<20*u),m.forEach(function(j){j.pts=jr(j.pts-x,b)}),!i||y<0){if(m=m.filter(j=>j.pts>=0),!m.length)return;r===0?y=0:s&&!p?y=Math.max(0,b):y=m[0].pts}if(e.segmentCodec==="aac"){const j=this.config.maxAudioFramesDrift;for(let z=0,B=y;z<m.length;z++){const U=m[z],Q=U.pts,re=Q-B,N=Math.abs(1e3*re/a);if(re<=-j*u&&p)z===0&&(this.logger.warn(`Audio frame @ ${(Q/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*re/a)} ms.`),this.nextAudioPts=y=B=Q);else if(re>=j*u&&N<xX&&p){let W=Math.round(re/u);B=Q-W*u,B<0&&(W--,B+=u),z===0&&(this.nextAudioPts=y=B),this.logger.warn(`[mp4-remuxer]: Injecting ${W} audio frame @ ${(B/a).toFixed(3)}s due to ${Math.round(1e3*re/a)} ms gap.`);for(let K=0;K<W;K++){const Z=Math.max(B,0);let te=mX.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);te||(this.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),te=U.unit.subarray()),m.splice(z,0,{unit:te,pts:Z}),B+=u,z++}}U.pts=B,B+=u}}let _=null,T=null,C,L=0,k=m.length;for(;k--;)L+=m[k].unit.byteLength;for(let j=0,z=m.length;j<z;j++){const B=m[j],U=B.unit;let Q=B.pts;if(T!==null){const N=f[j-1];N.duration=Math.round((Q-T)/l)}else if(i&&e.segmentCodec==="aac"&&(Q=y),_=Q,L>0){L+=v;try{C=new Uint8Array(L)}catch(N){this.observer.emit(F.ERROR,F.ERROR,{type:ut.MUX_ERROR,details:xe.REMUX_ALLOC_ERROR,fatal:!1,error:N,bytes:L,reason:`fail allocating audio mdat ${L}`});return}h||(new DataView(C.buffer).setUint32(0,L),C.set(ye.types.mdat,4))}else return;C.set(U,v);const re=U.byteLength;v+=re,f.push(nL(!0,c,re,0)),T=Q}const M=f.length;if(!M)return;const D=f[f.length-1];this.nextAudioPts=y=T+l*D.duration;const I=h?new Uint8Array(0):ye.moof(e.sequenceNumber++,_/l,In({},e,{samples:f}));e.samples=[];const R=_/a,q=y/a,ee={data1:I,data2:C,startPTS:R,endPTS:q,startDTS:R,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:M};return this.isAudioContiguous=!0,ee}}function jr(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function _X(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function TD(n,e,t,i){const s=n.samples.length;if(!s)return;const r=n.inputTimeScale;for(let o=0;o<s;o++){const l=n.samples[o];l.pts=jr(l.pts-t.baseTime*r/t.timescale,e*r)/r,l.dts=jr(l.dts-i.baseTime*r/i.timescale,e*r)/r}const a=n.samples;return n.samples=[],{samples:a}}function AD(n,e,t){const i=n.samples.length;if(!i)return;const s=n.inputTimeScale;for(let a=0;a<i;a++){const o=n.samples[a];o.pts=jr(o.pts-t.baseTime*s/t.timescale,e*s)/s}n.samples.sort((a,o)=>a.pts-o.pts);const r=n.samples;return n.samples=[],{samples:r}}class EX{constructor(e,t,i,s){this.logger=void 0,this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.logger=s}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,i,s){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(hq(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const s=this.initData=ON(e);s.audio&&(t=iL(s.audio,Ln.AUDIO)),s.video&&(i=iL(s.video,Ln.VIDEO));const r={};s.audio&&s.video?r.audiovideo={container:"video/mp4",codec:t+","+i,supplemental:s.video.supplemental,initSegment:e,id:"main"}:s.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:s.video?r.video={container:"video/mp4",codec:i,supplemental:s.video.supplemental,initSegment:e,id:"main"}:this.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r}remux(e,t,i,s,r,a){var o,l;let{initPTS:c,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};Je(u)||(u=this.lastEndTime=r||0);const h=t.samples;if(!(h!=null&&h.length))return d;const f={initPTS:void 0,timescale:1};let p=this.initData;if((o=p)!=null&&o.length||(this.generateInitSegment(h),p=this.initData),!((l=p)!=null&&l.length))return this.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const m=pq(h,p),v=fq(p,h),y=v===null?r:v;(a||!c)&&(TX(c,y,r,m)||f.timescale!==c.timescale)&&(f.initPTS=y-r,c&&c.timescale===1&&this.logger.warn(`Adjusting initPTS @${r} from ${c.baseTime/c.timescale} to ${f.initPTS}`),this.initPTS=c={baseTime:f.initPTS,timescale:1});const b=e?y-c.baseTime/c.timescale:u,x=b+m;mq(p,h,c.baseTime/c.timescale),m>0?this.lastEndTime=x:(this.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const _=!!p.audio,T=!!p.video;let C="";_&&(C+="audio"),T&&(C+="video");const L={data1:h,startPTS:b,startDTS:b,endPTS:x,endDTS:x,type:C,hasAudio:_,hasVideo:T,nb:1,dropped:0};return d.audio=L.type==="audio"?L:void 0,d.video=L.type!=="audio"?L:void 0,d.initSegment=f,d.id3=TD(i,r,c,c),s.samples.length&&(d.text=AD(s,r,c)),d}}function TX(n,e,t,i){if(n===null)return!0;const s=Math.max(i,1),r=e-n.baseTime/n.timescale;return Math.abs(r-t)>s}function iL(n,e){const t=n==null?void 0:n.codec;return t&&t.length>4?t:e===Ln.AUDIO?t==="ec-3"||t==="ac-3"||t==="alac"?t:t==="fLaC"||t==="Opus"?Q0(t,!1):(an.warn(`Unhandled audio codec "${t}" in mp4 MAP`),t||"mp4a"):(an.warn(`Unhandled video codec "${t}" in mp4 MAP`),t||"avc1")}let wo;try{wo=self.performance.now.bind(self.performance)}catch{wo=Date.now}const Zm=[{demux:hX,remux:EX},{demux:Sl,remux:Jm},{demux:lX,remux:Jm},{demux:uX,remux:Jm}];Zm.splice(2,0,{demux:cX,remux:Jm});class sL{constructor(e,t,i,s,r,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.id=r,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,s){const r=i.transmuxing;r.executeStart=wo();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;s&&(this.currentTransmuxState=s);const{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:h,timeOffset:f,initSegmentChange:p}=s||o,{audioCodec:m,videoCodec:v,defaultInitPts:y,duration:b,initSegmentData:x}=l,_=AX(a,t);if(_&&Ad(_.method)){const k=this.getDecrypter(),M=Ow(_.method);if(k.isSync()){let D=k.softwareDecrypt(a,_.key.buffer,_.iv.buffer,M);if(i.part>-1){const R=k.flush();D=R&&R.buffer}if(!D)return r.executeEnd=wo(),ux(i);a=new Uint8Array(D)}else return this.asyncResult=!0,this.decryptionPromise=k.webCryptoDecrypt(a,_.key.buffer,_.iv.buffer,M).then(D=>{const I=this.push(D,null,i);return this.decryptionPromise=null,I}),this.decryptionPromise}const T=this.needsProbing(u,d);if(T){const k=this.configureTransmuxer(a);if(k)return this.logger.warn(`[transmuxer] ${k.message}`),this.observer.emit(F.ERROR,F.ERROR,{type:ut.MEDIA_ERROR,details:xe.FRAG_PARSING_ERROR,fatal:!1,error:k,reason:k.message}),r.executeEnd=wo(),ux(i)}(u||d||p||T)&&this.resetInitSegment(x,m,v,b,t),(u||p||T)&&this.resetInitialTimestamp(y),c||this.resetContiguity();const C=this.transmux(a,_,f,h,i);this.asyncResult=Sp(C);const L=this.currentTransmuxState;return L.contiguous=!0,L.discontinuity=!1,L.trackSwitch=!1,r.executeEnd=wo(),C}flush(e){const t=e.transmuxing;t.executeStart=wo();const{decrypter:i,currentTransmuxState:s,decryptionPromise:r}=this;if(r)return this.asyncResult=!0,r.then(()=>this.flush(e));const a=[],{timeOffset:o}=s;if(i){const d=i.flush();d&&a.push(this.push(d.buffer,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c){t.executeEnd=wo();const d=[ux(e)];return this.asyncResult?Promise.resolve(d):d}const u=l.flush(o);return Sp(u)?(this.asyncResult=!0,u.then(d=>(this.flushRemux(a,d,e),a))):(this.flushRemux(a,u,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,i){const{audioTrack:s,videoTrack:r,id3Track:a,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===lt.MAIN?"level":"track"} ${i.level}`);const u=this.remuxer.remux(s,r,a,o,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:i}),i.transmuxing.executeEnd=wo()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,s,r){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,i,s),o.resetInitSegment(e,t,i,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,s,r){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,i,s,r):a=this.transmuxUnencrypted(e,i,s,r),a}transmuxUnencrypted(e,t,i,s){const{audioTrack:r,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,a,o,l,t,i,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,t,i,s,r){return this.demuxer.demuxSampleAes(e,t,i).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,i,s,!1,this.id),chunkMeta:r}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:s}=this;let r;for(let d=0,h=Zm.length;d<h;d++){var a;if((a=Zm[d].demux)!=null&&a.probe(e,this.logger)){r=Zm[d];break}}if(!r)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,c=r.remux,u=r.demux;(!l||!(l instanceof c))&&(this.remuxer=new c(i,t,s,this.logger)),(!o||!(o instanceof u))&&(this.demuxer=new u(i,t,s,this.logger),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Nw(this.config)),e}}function AX(n,e){let t=null;return n.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const ux=n=>({remuxResult:{},chunkMeta:n});function Sp(n){return"then"in n&&n.then instanceof Function}class LX{constructor(e,t,i,s,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=s,this.defaultInitPts=r||null}}class kX{constructor(e,t,i,s,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=r,this.initSegmentChange=a}}let rL=0;class LD{constructor(e,t,i,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=rL++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const c=l.data,u=this.hls;if(!(!u||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var d;const h=(d=this.workerContext)==null?void 0:d.objectURL;h&&self.URL.revokeObjectURL(h);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{u.logger[c.data.logType]&&u.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,u.trigger(c.event,c.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const c=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(F.ERROR,{type:ut.OTHER_ERROR,details:xe.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const r=e.config;this.hls=e,this.id=t,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=i,this.onFlush=s;const a=(l,c)=>{c=c||{},c.frag=this.frag||void 0,l===F.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(l,c)};this.observer=new jw,this.observer.on(F.FRAG_DECRYPTED,a),this.observer.on(F.ERROR,a);const o=SA(r.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(r.workerPath||RK()){try{r.workerPath?(l.log(`loading Web Worker ${r.workerPath} for "${t}"`),this.workerContext=NK(r.workerPath)):(l.log(`injecting Web Worker for "${t}"`),this.workerContext=PK());const{worker:u}=this.workerContext;u.addEventListener("message",this.onWorkerMessage),u.addEventListener("error",this.onWorkerError),u.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:ni(r)})}catch(u){l.warn(`Error setting up "${t}" Web Worker, fallback to inline`,u),this.terminateWorker(),this.error=null,this.transmuxer=new sL(this.observer,o,r,"",t,e.logger)}return}}this.transmuxer=new sL(this.observer,o,r,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=rL++;const t=this.hls.config,i=SA(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:ni(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),DK(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,i,s,r,a,o,l,c,u){var d,h;c.transmuxing.start=self.performance.now();const{instanceNo:f,transmuxer:p}=this,m=a?a.start:r.start,v=r.decryptdata,y=this.frag,b=!(y&&r.cc===y.cc),x=!(y&&c.level===y.level),_=y?c.sn-y.sn:-1,T=this.part?c.part-this.part.index:-1,C=_===0&&c.id>1&&c.id===(y==null?void 0:y.stats.chunkCount),L=!x&&(_===1||_===0&&(T===1||C&&T<=0)),k=self.performance.now();(x||_||r.stats.parsing.start===0)&&(r.stats.parsing.start=k),a&&(T||!L)&&(a.stats.parsing.start=k);const M=!(y&&((d=r.initSegment)==null?void 0:d.url)===((h=y.initSegment)==null?void 0:h.url)),D=new kX(b,L,l,x,m,M);if(!L||b||M){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${r.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===lt.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${b}
        trackSwitch: ${x}
        contiguous: ${L}
        accurateTimeOffset: ${l}
        timeOffset: ${m}
        initSegmentChange: ${M}`);const I=new LX(i,s,t,o,u);this.configureTransmuxer(I)}if(this.frag=r,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:f,cmd:"demux",data:e,decryptdata:v,chunkMeta:c,state:D},e instanceof ArrayBuffer?[e]:[]);else if(p){const I=p.push(e,v,c,D);Sp(I)?I.then(R=>{this.handleTransmuxComplete(R)}).catch(R=>{this.transmuxerError(R,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(I)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(i){const s=i.flush(e);Sp(s)?s.then(r=>{this.handleFlushResult(r,e)}).catch(r=>{this.transmuxerError(r,e,"transmuxer-interface flush error")}):this.handleFlushResult(s,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const aL=100;class CX extends Fw{constructor(e,t,i){super(e,t,i,"audio-stream-controller",lt.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(F.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(F.BUFFER_RESET,this.onBufferReset,this),e.on(F.BUFFER_CREATED,this.onBufferCreated,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(F.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(F.FRAG_LOADING,this.onFragLoading,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(F.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(F.BUFFER_RESET,this.onBufferReset,this),e.off(F.BUFFER_CREATED,this.onBufferCreated,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(F.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(F.FRAG_LOADING,this.onFragLoading,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r}){if(i===lt.MAIN){const a=t.cc,o=this.fragCurrent;if(this.initPTS[a]={baseTime:s,timescale:r},this.log(`InitPTS for cc: ${a} found from main: ${s}/${r}`),this.mainAnchor=t,this.state===Le.WAITING_INIT_PTS){const l=this.waitingData;(!l&&!this.loadingParts||l&&l.frag.cc!==a)&&(this.nextLoadPosition=this.findSyncFrag(t).start),this.tick()}else!this.hls.hasEnoughToStart&&o&&o.cc!==a?(this.startFragRequested=!1,this.nextLoadPosition=this.findSyncFrag(t).start,o.abortRequests(),this.resetLoadingState()):this.state===Le.IDLE&&this.tick()}}findSyncFrag(e){const t=this.getLevelDetails(),i=e.cc;return Vq(t,i,e)||t&&GN(t.fragments,i)||e}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=Le.STOPPED;return}const i=this.lastCurrentTime;this.stopLoad(),this.setInterval(aL),i>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=Le.IDLE):this.state=Le.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Le.IDLE:this.doTickIdle();break;case Le.WAITING_TRACK:{const{levels:t,trackId:i}=this,s=t==null?void 0:t[i],r=s==null?void 0:s.details;if(r&&!this.waitForLive(s)){if(this.waitForCdnTuneIn(r))break;this.state=Le.WAITING_INIT_PTS}break}case Le.FRAG_LOADING_WAITING_RETRY:{var e;const t=performance.now(),i=this.retryDate;if(!i||t>=i||(e=this.media)!=null&&e.seeking){const{levels:s,trackId:r}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((s==null?void 0:s[r])||null),this.state=Le.IDLE}break}case Le.WAITING_INIT_PTS:{const t=this.waitingData;if(t){const{frag:i,part:s,cache:r,complete:a}=t,o=this.mainAnchor;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.state=Le.FRAG_LOADING;const l=r.flush().buffer,c={frag:i,part:s,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),a&&super._handleFragmentLoadComplete(c)}else o&&o.cc!==t.frag.cc&&(this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${o.cc}`),this.nextLoadPosition=this.findSyncFrag(o).start,this.clearWaitingFragment())}else this.state=Le.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.state!==Le.STOPPED&&(this.state=Le.IDLE))}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:i,media:s,trackId:r}=this,a=t.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(i!=null&&i[r]))return;const o=i[r],l=o.details;if(!l||this.waitForLive(o)||this.waitForCdnTuneIn(l)){this.state=Le.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,Ln.AUDIO,lt.AUDIO));const u=this.getFwdBufferInfo(c,lt.AUDIO);if(u===null)return;if(!this.switchingTrack&&this._streamEnded(u,l)){t.trigger(F.BUFFER_EOS,{type:"audio"}),this.state=Le.ENDED;return}const d=u.len,h=t.maxBufferLength,f=l.fragments,p=f[0].start,m=this.getLoadPosition(),v=this.flushing?m:u.end;if(this.switchingTrack&&s){const x=m;l.PTSKnown&&x<p&&(u.end>p||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=p+.05)}if(d>=h&&!this.switchingTrack&&v<f[f.length-1].start)return;let y=this.getNextFragment(v,l);if(y&&this.isLoopLoading(y,v)&&(y=this.getNextFragmentLoopLoading(y,l,u,lt.MAIN,h)),!y){this.bufferFlushed=!0;return}let b=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&b&&is(y)&&!y.endList&&(!l.live||!this.loadingParts&&v<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(b)===Gi.OK&&(this.mainFragLoading=b=null),b&&is(b))){if(y.start>b.end){const _=this.fragmentTracker.getFragAtPos(v,lt.MAIN);_&&_.end>b.end&&(b=_,this.mainFragLoading={frag:_,targetBufferTime:null})}if(y.start>b.end)return}this.loadFragment(y,o,v)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new mp(i))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Le.STOPPED&&(this.setInterval(aL),this.state=Le.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(F.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,t){var i;const{levels:s}=this,{details:r,id:a,groupId:o,track:l}=t;if(!s){this.warn(`Audio tracks reset while loading track ${a} "${l.name}" of "${o}"`);return}const c=this.mainDetails;if(!c||r.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=t,this.state!==Le.STOPPED&&(this.state=Le.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${l.name}" of "${o}" loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const u=s[a];let d=0;if(r.live||(i=u.details)!=null&&i.live){if(this.checkLiveUpdate(r),r.deltaUpdateFailed)return;if(u.details){var h;d=this.alignPlaylists(r,u.details,(h=this.levelLastLoaded)==null?void 0:h.details)}r.alignedSliding||(aD(r,c),r.alignedSliding||iy(r,c),d=r.fragmentStart)}u.details=r,this.levelLastLoaded=u,this.startFragRequested||this.setStartPosition(c,d),this.hls.trigger(F.AUDIO_TRACK_UPDATED,{details:r,id:a,groupId:t.groupId}),this.state===Le.WAITING_TRACK&&!this.waitForCdnTuneIn(r)&&(this.state=Le.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:r}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const c=l[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const d=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new LD(this.hls,lt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[i.cc],p=(t=i.initSegment)==null?void 0:t.data;if(f!==void 0){const v=s?s.index:-1,y=v!==-1,b=new Dw(i.level,i.sn,i.stats.chunkCount,r.byteLength,v,y);h.push(r,p,d,"",i,s,u.totalduration,!1,b,f)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${u.startSN} ,${u.endSN}],track ${o}`);const{cache:m}=this.waitingData=this.waitingData||{frag:i,part:s,cache:new oD,complete:!1};m.push(new Uint8Array(r)),this.state!==Le.STOPPED&&(this.state=Le.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===lt.MAIN&&is(t.frag)&&(this.mainFragLoading=t,this.state===Le.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:i,part:s}=t;if(i.type!==lt.AUDIO){!this.audioOnly&&i.type===lt.MAIN&&!i.elementaryStreams.video&&!i.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(is(i)){this.fragPrevious=i;const r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(F.AUDIO_TRACK_SWITCHED,vn({},r)))}this.fragBufferedComplete(i,s),this.media&&this.tick()}onError(e,t){var i;if(t.fatal){this.state=Le.ERROR;return}switch(t.details){case xe.FRAG_GAP:case xe.FRAG_PARSING_ERROR:case xe.FRAG_DECRYPT_ERROR:case xe.FRAG_LOAD_ERROR:case xe.FRAG_LOAD_TIMEOUT:case xe.KEY_LOAD_ERROR:case xe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(lt.AUDIO,t);break;case xe.AUDIO_TRACK_LOAD_ERROR:case xe.AUDIO_TRACK_LOAD_TIMEOUT:case xe.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Le.WAITING_TRACK&&((i=t.context)==null?void 0:i.type)===Zt.AUDIO_TRACK&&(this.state=Le.IDLE);break;case xe.BUFFER_ADD_CODEC_ERROR:case xe.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.resetLoadingState();break;case xe.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case xe.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Ln.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Ln.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Le.ENDED&&(this.state=Le.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,t,lt.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:s}=this,{remuxResult:r,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{details:d}=u,{audio:h,text:f,id3:p,initSegment:m}=r;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=Le.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),m!=null&&m.tracks){const v=l.initSegment||l;this._bufferInitSegment(u,m.tracks,v,a),s.trigger(F.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:i,tracks:m.tracks})}if(h){const{startPTS:v,endPTS:y,startDTS:b,endDTS:x}=h;c&&(c.elementaryStreams[Ln.AUDIO]={startPTS:v,endPTS:y,startDTS:b,endDTS:x}),l.setElementaryStreamInfo(Ln.AUDIO,v,y,b,x),this.bufferFragmentData(h,l,c,a)}if(p!=null&&(t=p.samples)!=null&&t.length){const v=In({id:i,frag:l,details:d},p);s.trigger(F.FRAG_PARSING_METADATA,v)}if(f){const v=In({id:i,frag:l,details:d},f);s.trigger(F.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,t,i,s){if(this.state!==Le.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const r=t.audio;r.id=lt.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${a}/${r.codec}]`),a&&a.split(",").length===1&&(r.levelCodec=a),this.hls.trigger(F.BUFFER_CODECS,t);const o=r.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:i,part:null,chunkMeta:s,parent:i.type,data:o};this.hls.trigger(F.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);if(this.switchingTrack||s===Gi.NOT_LOADED||s===Gi.PARTIAL){var r;if(!is(e))this._loadInitSegment(e,t);else if((r=t.details)!=null&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Le.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&iy(t.details,a)}else super.loadFragment(e,t,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:i,assocLang:s,characteristics:r,audioCodec:a,channels:o}=this.bufferedTrack;tu({name:t,lang:i,assocLang:s,characteristics:r,audioCodec:a,channels:o},e,Nc)||(Z0(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(F.AUDIO_TRACK_SWITCHED,vn({},e))}}class Vw extends Xo{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const s=t==null?void 0:t.renditionReports;if(s){let r=-1;for(let a=0;a<s.length;a++){const o=s[a];let l;try{l=new self.URL(o.URI,t.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),l=o.URI||""}if(l===e){r=a;break}else l===e.substring(0,l.length)&&(r=a)}if(r!==-1){const a=s[r],o=parseInt(a["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let l=parseInt(a["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const u=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&u>t.partTarget&&(l+=1)}const c=i&&_A(i);return new EA(o,l>=0?l:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}return e}playlistLoaded(e,t,i){const{details:s,stats:r}=t,a=self.performance.now(),o=r.loading.first?Math.max(0,a-r.loading.first):0;s.advancedDateTime=Date.now()-o;const l=this.hls.config.timelineOffset;if(l!==s.appliedTimelineOffset){const u=Math.max(l||0,0);s.appliedTimelineOffset=u,s.fragments.forEach(d=>{d.start=d.playlistOffset+u})}if(s.live||i!=null&&i.live){const u="levelInfo"in t?t.levelInfo:t.track;if(s.reloaded(i),i&&s.fragments.length>0){SK(i,s);const b=s.playlistParsingError;if(b){this.warn(b);const x=this.hls;if(!x.config.ignorePlaylistParsingErrors){var c;const{networkDetails:_}=t;x.trigger(F.ERROR,{type:ut.NETWORK_ERROR,details:xe.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:b,reason:b.message,level:t.level||void 0,parent:(c=s.fragments[0])==null?void 0:c.type,networkDetails:_,stats:r});return}s.playlistParsingError=null}}s.requestScheduled===-1&&(s.requestScheduled=r.loading.start);const d=this.hls.mainForwardBufferInfo,h=d?d.end-d.len:0,f=(s.edge-h)*1e3,p=tD(s,f);if(s.requestScheduled+p<a?s.requestScheduled=a:s.requestScheduled+=p,this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let m,v,y;if(s.canBlockReload&&s.endSN&&s.advanced){const b=this.hls.config.lowLatencyMode,x=s.lastPartSn,_=s.endSN,T=s.lastPartIndex,C=T!==-1,L=x===_;C?L?(v=_+1,y=b?0:T):(v=x,y=b?T+1:s.maxPartIndex):v=_+1;const k=s.age,M=k+s.ageHeader;let D=Math.min(M-s.partTarget,s.targetduration*1.5);if(D>0){if(M>s.targetduration*3)this.log(`Playlist last advanced ${k.toFixed(2)}s ago. Omitting segment and part directives.`),v=void 0,y=void 0;else if(i!=null&&i.tuneInGoal&&M-s.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${D} with playlist age: ${s.age}`),D=0;else{const I=Math.floor(D/s.targetduration);if(v+=I,y!==void 0){const R=Math.round(D%s.targetduration/s.partTarget);y+=R}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${k.toFixed(2)}s goal: ${D} skip sn ${I} to part ${y}`)}s.tuneInGoal=D}if(m=this.getDeliveryDirectives(s,t.deliveryDirectives,v,y),b||!L){s.requestScheduled=a,this.loadingPlaylist(u,m);return}}else(s.canBlockReload||s.canSkipUntil)&&(m=this.getDeliveryDirectives(s,t.deliveryDirectives,v,y));m&&v!==void 0&&s.canBlockReload&&(s.requestScheduled=r.loading.first+Math.max(p-o*2,p/2)),this.scheduleLoading(u,m,s)}else this.clearTimer()}scheduleLoading(e,t,i){const s=i||e.details;if(!s){this.loadingPlaylist(e,t);return}const r=self.performance.now(),a=s.requestScheduled;if(r>=a){this.loadingPlaylist(e,t);return}const o=a-r;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,i,s){let r=_A(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,s=t.part,r=Qm.No),new EA(i,s,r)}checkRetry(e){const t=e.details,i=ey(e),s=e.errorAction,{action:r,retryCount:a=0,retryConfig:o}=s||{},l=!!s&&!!o&&(r===Ts.RetryRequest||!s.resolved&&r===Ts.SendAlternateToPenaltyBox);if(l){var c;if(a>=o.maxNumRetry)return!1;if(i&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=Pw(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,s.resolved=!0}return l}}function kD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!wp(n[t].attrs,e[t].attrs))return!1;return!0}function wp(n,e,t){const i=n["STABLE-RENDITION-ID"];return i&&!t?i===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>n[s]!==e[s])}function w2(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}class IX extends Vw{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.LEVEL_LOADING,this.onLevelLoading,this),e.on(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(F.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.LEVEL_LOADING,this.onLevelLoading,this),e.off(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(F.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(F.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,a=this.tracksInGroup[i];if(!a||a.groupId!==s){this.warn(`Audio track with id:${i} and group:${s} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Audio track ${i} "${a.name}" lang:${a.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(s==null?void 0:s.length)!==(i==null?void 0:i.length)||i!=null&&i.some(o=>(s==null?void 0:s.indexOf(o))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(h=>!i||i.indexOf(h.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(h=>h.default)&&(this.selectDefaultTrack=!1),o.forEach((h,f)=>{h.id=f});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!r&&l){const h=Ha(l,o,Nc);if(h>-1)r=o[h];else{const f=Ha(l,this.tracks);r=this.tracks[f]}}let c=this.findTrackId(r);c===-1&&r&&(c=this.findTrackId(null));const u={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${i==null?void 0:i.join(",")}`),this.hls.trigger(F.AUDIO_TRACKS_UPDATED,u);const d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(o.length&&d===-1){var a;const h=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(h.message),this.hls.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}}onError(e,t){t.fatal||!t.context||t.context.type===Zt.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const s=this.currentTrack;if(s&&tu(e,s,Nc))return s;const r=Ha(e,this.tracksInGroup,Nc);if(r>-1){const a=this.tracksInGroup[r];return this.setAudioTrack(r),a}else if(s){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const o=Uq(e,t.levels,i,a,Nc);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=Ha(e,i);if(a>-1)return i[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e],r=s.details&&!s.details.live;if(e===this.trackId&&s===i&&r||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(F.AUDIO_TRACK_SWITCHING,vn({},s)),r))return;const a=this.switchParams(s.url,i==null?void 0:i.details,s.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(!(this.selectDefaultTrack&&!s.default)&&(!e||tu(e,s,Nc)))return i}if(e){const{name:i,lang:s,assocLang:r,characteristics:a,audioCodec:o,channels:l}=e;for(let c=0;c<t.length;c++){const u=t[c];if(tu({name:i,lang:s,assocLang:r,characteristics:a,audioCodec:o,channels:l},u,Nc))return c}for(let c=0;c<t.length;c++){const u=t[c];if(wp(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const u=t[c];if(wp(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&Z0(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,r=this.getUrlWithDirectives(e.url,t),a=e.details,o=a==null?void 0:a.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${s}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${r}`),this.hls.trigger(F.AUDIO_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:t||null,track:e})}}class RX{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,i){if(this.queues===null||this.tracks===null)return;const s=this.queues[t];s.push(e),s.length===1&&!i&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const i={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const i={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const i=(t=e[0])==null?void 0:t.label;(i==="async-blocker"||i==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const s=t[0];try{s.execute()}catch(r){var i;if(s.onError(r),this.queues===null||this.tracks===null)return;const a=(i=this.tracks[e])==null?void 0:i.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,i;return(t=this.queues)!=null&&t[e]||(i=this.tracks)!=null&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const i=(t=this.tracks)==null?void 0:t[e],s=i==null?void 0:i.buffer;return s?`SourceBuffer${s.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(i=>i.label).join(", "))||""}}const oL=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,CD="HlsJsTrackRemovedError";class PX extends Error{constructor(e){super(e),this.name=CD}}class NX extends Xo{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=i=>{var s;this.hls&&((s=this.mediaSource)==null?void 0:s.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=i=>{const{media:s,mediaSource:r}=this;i&&this.log("Media source opened"),!(!s||!r)&&(r.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(F.MEDIA_ATTACHED,{media:s,mediaSource:r}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:s}=this;i!==s&&this.error(`Media element src was set while attaching MediaSource (${s} > ${i})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=iq(ec(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.BUFFER_RESET,this.onBufferReset,this),e.on(F.BUFFER_APPENDING,this.onBufferAppending,this),e.on(F.BUFFER_CODECS,this.onBufferCodecs,this),e.on(F.BUFFER_EOS,this.onBufferEos,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(F.FRAG_PARSED,this.onFragParsed,this),e.on(F.FRAG_CHANGED,this.onFragChanged,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.BUFFER_RESET,this.onBufferReset,this),e.off(F.BUFFER_APPENDING,this.onBufferAppending,this),e.off(F.BUFFER_CODECS,this.onBufferCodecs,this),e.off(F.BUFFER_EOS,this.onBufferEos,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(F.FRAG_PARSED,this.onFragParsed,this),e.off(F.FRAG_CHANGED,this.onFragChanged,this),e.off(F.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const i={};if(this.operationQueue){const r=this.isUpdating();r||this.operationQueue.removeBlockers();const a=this.isQueued();(r||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${r?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===t?In(i,s.tracks):this.sourceBuffers.forEach(r=>{const[a]=r;a&&(i[a]=In({},this.tracks[a]),this.removeBuffer(a)),r[0]=r[1]=null}),{media:e,mediaSource:t,tracks:i}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var i;let s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),(i=this.transferData)!=null&&i.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(e,t){const i=this.media=t.media,s=ec(this.appendSource);if(this.transferData=this.overrides=void 0,i&&s){const r=!!t.mediaSource;(r||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new s;if(this.assignMediaSource(a),r)this._objectUrl=i.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{i.removeAttribute("src");const l=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||l&&a instanceof l,lL(i),DX(i,o),i.load()}catch{i.src=o}else i.src=o}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,i;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(i=e.constructor)==null?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const i=this.tracks,s=t.tracks,r=s?Object.keys(s):null,a=r?r.length:0,o=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(s&&r&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${ni(i,(l,c)=>l==="initSegment"?void 0:c)};
transfer tracks: ${ni(s,(l,c)=>l==="initSegment"?void 0:c)}}`),!CN(s,i)){t.mediaSource=null,t.tracks=void 0;const l=e.currentTime,c=this.details,u=Math.max(l,(c==null?void 0:c.fragments[0].start)||0);if(u-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${u}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(i)}") start time: ${u} currentTime: ${l}`),this.onMediaDetaching(F.MEDIA_DETACHING,{}),this.onMediaAttaching(F.MEDIA_ATTACHING,t),e.currentTime=u;return}this.transferData=void 0,r.forEach(l=>{const c=l,u=s[c];if(u){const d=u.buffer;if(d){const h=this.fragmentTracker,f=u.id;if(h.hasFragments(f)||h.hasParts(f)){const v=Vt.getBuffered(d);h.detectEvictedFragments(c,v,f,null,!0)}const p=dx(c),m=[c,d];this.sourceBuffers[p]=m,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,u)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const i=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:r,_objectUrl:a}=this;if(r){if(this.log(`media source ${i?"transferring":"detaching"}`),i)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=r.readyState==="open";try{const l=r.sourceBuffers;for(let c=l.length;c--;)o&&l[c].abort(),r.removeSourceBuffer(l[c]);o&&r.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(r.removeEventListener("startstreaming",this._onStartStreaming),r.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),i||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(s.removeAttribute("src"),this.appendSource&&lL(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(F.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const i=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),i)try{var s;(s=this.mediaSource)!=null&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(r){this.warn(`onBufferReset ${e}`,r)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[dx(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new RX(this.tracks)}onBufferCodecs(e,t){const i=this.tracks,s=Object.keys(t);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const r="audiovideo"in t&&(i.audio||i.video)||i.audiovideo&&("audio"in t||"video"in t),a=!r&&this.sourceBufferCount&&this.media&&s.some(o=>!i[o]);if(r||a){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${s}" SourceBuffers`);return}s.forEach(o=>{var l,c,u;const d=t[o],{id:h,codec:f,levelCodec:p,container:m,metadata:v,supplemental:y}=d;let b=i[o];const x=(l=this.transferData)==null||(c=l.tracks)==null?void 0:c[o],_=x!=null&&x.buffer?x:b,T=(_==null?void 0:_.pendingCodec)||(_==null?void 0:_.codec),C=_==null?void 0:_.levelCodec;b||(b=i[o]={buffer:void 0,listeners:[],codec:f,supplemental:y,container:m,levelCodec:p,metadata:v,id:h});const L=Xm(T,C),k=L==null?void 0:L.replace(oL,"$1");let M=Xm(f,p);const D=(u=M)==null?void 0:u.replace(oL,"$1");M&&L&&k!==D&&(o.slice(0,5)==="audio"&&(M=Q0(M,this.appendSource)),this.log(`switching codec ${T} to ${M}`),M!==(b.pendingCodec||b.codec)&&(b.pendingCodec=M),b.container=m,this.appendChangeType(o,m,M))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const i=this.tracks[t];return e[t]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e},{})}appendChangeType(e,t,i){const s=`${t};codecs=${i}`,r={label:`change-type=${s}`,execute:()=>{const a=this.tracks[e];if(a){const o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${s}`),o.changeType(s),a.codec=i,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(r,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const i=e.start,s=i+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(i,lt.MAIN))==null?void 0:t.gap)===!0)return;const a={label:"block-audio",execute:()=>{var o;const l=this.tracks.video;(this.lastVideoAppendEnd>s||l!=null&&l.buffer&&Vt.isBuffered(l.buffer,s)||((o=this.fragmentTracker.getAppendedFrag(s,lt.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:i}=this,{data:s,type:r,parent:a,frag:o,part:l,chunkMeta:c}=t,u=c.buffering[r],d=o.sn,h=self.performance.now();u.start=h;const f=o.stats.buffering,p=l?l.stats.buffering:null;f.start===0&&(f.start=h),p&&p.start===0&&(p.start=h);const m=i.audio;let v=!1;r==="audio"&&(m==null?void 0:m.container)==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const y=this.tracks.video,b=y==null?void 0:y.buffer;if(b&&d!=="initSegment"){const T=l||o,C=this.blockedAudioAppend;if(r==="audio"&&a!=="main"&&!this.blockedAudioAppend){const k=T.start+T.duration*.05,M=b.buffered,D=this.currentOp("video");!M.length&&!D?this.blockAudio(T):!D&&!Vt.isBuffered(b,k)&&this.lastVideoAppendEnd<k&&this.blockAudio(T)}else if(r==="video"){const L=T.end;if(C){const k=C.frag.start;(L>k||L<this.lastVideoAppendEnd||Vt.isBuffered(b,k))&&this.unblockAudio()}this.lastVideoAppendEnd=L}}const x=(l||o).start,_={label:`append-${r}`,execute:()=>{if(u.executeStart=self.performance.now(),v){const T=this.tracks[r];if(T){const C=T.buffer;if(C){const L=x-C.timestampOffset;Math.abs(L)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${x} (delta: ${L}) sn: ${d})`),C.timestampOffset=x)}}}this.appendExecutor(s,r)},onStart:()=>{},onComplete:()=>{const T=self.performance.now();u.executeEnd=u.end=T,f.first===0&&(f.first=T),p&&p.first===0&&(p.first=T);const C={};this.sourceBuffers.forEach(([L,k])=>{L&&(C[L]=Vt.getBuffered(k))}),this.appendErrors[r]=0,r==="audio"||r==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(F.BUFFER_APPENDED,{type:r,frag:o,part:l,chunkMeta:c,parent:o.type,timeRanges:C})},onError:T=>{var C;const L={type:ut.MEDIA_ERROR,parent:o.type,details:xe.BUFFER_APPEND_ERROR,sourceBufferName:r,frag:o,part:l,chunkMeta:c,error:T,err:T,fatal:!1},k=(C=this.media)==null?void 0:C.error;if(T.code===DOMException.QUOTA_EXCEEDED_ERR)L.details=xe.BUFFER_FULL_ERROR;else if(T.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!k)L.errorAction=yp(!0);else if(T.name===CD&&this.sourceBufferCount===0)L.errorAction=yp(!0);else{const M=++this.appendErrors[r];this.warn(`Failed ${M}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${r}" sourceBuffer (${k||"no media error"})`),(M>=this.hls.config.appendErrorMaxRetry||k)&&(L.fatal=!0)}this.hls.trigger(F.ERROR,L)}};this.append(_,r,this.isPending(this.tracks[r]))}getFlushOp(e,t,i){return this.log(`queuing "${e}" remove ${t}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger(F.BUFFER_FLUSHED,{type:e})},onError:s=>{this.warn(`Failed to remove ${t}-${i} from "${e}" SourceBuffer`,s)}}}onBufferFlushing(e,t){const{type:i,startOffset:s,endOffset:r}=t;i?this.append(this.getFlushOp(i,s,r),i):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,s,r),a)})}onFragParsed(e,t){const{frag:i,part:s}=t,r=[],a=s?s.elementaryStreams:i.elementaryStreams;a[Ln.AUDIOVIDEO]?r.push("audiovideo"):(a[Ln.AUDIO]&&r.push("audio"),a[Ln.VIDEO]&&r.push("video"));const o=()=>{const l=self.performance.now();i.stats.buffering.end=l,s&&(s.stats.buffering.end=l);const c=s?s.stats:i.stats;this.hls.trigger(F.FRAG_BUFFERED,{frag:i,part:s,stats:c,id:i.type})};r.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(o,r).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t,i;return e&&(!((t=this.tracks[e])!=null&&t.ended)||((i=this.tracks[e])==null?void 0:i.ending))})}onBufferEos(e,t){var i;this.sourceBuffers.forEach(([a])=>{if(a){const o=this.tracks[a];(!t.type||t.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});const s=((i=this.overrides)==null?void 0:i.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})&&(s?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(F.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(F.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){const e=this.getDurationAndRange();e&&this.blockUntilOpen(()=>this.updateMediaSource(e))}onError(e,t){if(t.details===xe.BUFFER_APPEND_ERROR&&t.frag){var i;const s=(i=t.errorAction)==null?void 0:i.nextAutoLevel;Je(s)&&s!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||t===null||!this.sourceBufferCount)return;const s=e.config,r=i.currentTime,a=t.levelTargetDuration,o=t.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(Je(o)&&o>=0){const l=Math.max(o,a),c=Math.floor(r/a)*a-l;this.flushBackBuffer(r,a,c)}if(Je(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const l=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),c=Math.max(l,a),u=Math.floor(r/a)*a+c;this.flushFrontBuffer(r,a,u)}}flushBackBuffer(e,t,i){this.sourceBuffers.forEach(([s,r])=>{if(r){const o=Vt.getBuffered(r);if(o.length>0&&i>o.start(0)){var a;this.hls.trigger(F.BACK_BUFFER_REACHED,{bufferEnd:i});const l=this.tracks[s];if((a=this.details)!=null&&a.live)this.hls.trigger(F.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(l!=null&&l.ended){this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(F.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:s})}}})}flushFrontBuffer(e,t,i){this.sourceBuffers.forEach(([s,r])=>{if(r){const a=Vt.getBuffered(r),o=a.length;if(o<2)return;const l=a.start(o-1),c=a.end(o-1);if(i>l||e>=l&&e<=c)return;this.hls.trigger(F.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:s})}})}getDurationAndRange(){var e;const{details:t,mediaSource:i}=this;if(!t||!this.media||(i==null?void 0:i.readyState)!=="open")return null;const s=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&t.live&&i.setLiveSeekableRange){const c=Math.max(0,t.fragmentStart),u=Math.max(c,s);return{duration:1/0,start:c,end:u}}return{duration:1/0}}const r=(e=this.overrides)==null?void 0:e.duration;if(r)return Je(r)?{duration:r}:null;const a=this.media.duration,o=Je(i.duration)?i.duration:0;return s>o&&s>a||!Je(a)?{duration:s}:null}updateMediaSource({duration:e,start:t,end:i}){const s=this.mediaSource;!this.media||!s||s.readyState!=="open"||(s.duration!==e&&(Je(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),s.duration=e),t!==void 0&&i!==void 0&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${t}-${i}.`),s.setLiveSeekableRange(t,i)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${ni(i)}`),this.tracksReady){var s;const r=(s=this.transferData)==null?void 0:s.tracks;r&&Object.keys(r).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,i])=>{if(t){const s=this.tracks[t];e[t]={buffer:i,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}}),this.hls.trigger(F.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(const r in e){const a=r,o=e[a];if(this.isPending(o)){const l=this.getTrackCodec(o,a),c=`${o.container};codecs=${l}`;o.codec=l,this.log(`creating sourceBuffer(${c})${this.currentOp(a)?" Queued":""} ${ni(o)}`);try{const u=i.addSourceBuffer(c),d=dx(a),h=[a,u];t[d]=h,o.buffer=u}catch(u){var s;this.error(`error while trying to add sourceBuffer: ${u.message}`),this.shiftAndExecuteNext(a),(s=this.operationQueue)==null||s.removeBlockers(),delete this.tracks[a],this.hls.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:a,mimeType:c,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const i=e.supplemental;let s=e.codec;i&&(t==="video"||t==="audiovideo")&&p2(i,"video")&&(s=Aq(s,i));const r=Xm(s,e.levelCodec);return r?t.slice(0,5)==="audio"?Q0(r,this.appendSource):r:""}trackSourceBuffer(e,t){const i=t.buffer;if(!i)return;const s=this.getTrackCodec(t,e);this.tracks[e]={buffer:i,codec:s,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(r,a)=>{const o=a.removedRanges;o!=null&&o.length&&this.hls.trigger(F.BUFFER_FLUSHED,{type:r})})}get mediaSrc(){var e,t;const i=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return i==null?void 0:i.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const i=this.currentOp(e);i&&(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var i;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${s}`,t),this.hls.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const r=this.currentOp(e);r&&r.onError(s)}removeExecutor(e,t,i){const{media:s,mediaSource:r}=this,a=this.tracks[e],o=a==null?void 0:a.buffer;if(!s||!r||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=Je(s.duration)?s.duration:1/0,c=Je(r.duration)?r.duration:1/0,u=Math.max(0,t),d=Math.min(i,l,c);d>u&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${u},${d}] from the ${e} SourceBuffer`),o.remove(u,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.tracks[t],s=i==null?void 0:i.buffer;if(!s)throw new PX(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,s.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:i}=this,s=t.map(a=>this.appendBlocker(a));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(s).then(a=>{i===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var i;const s=(i=this.tracks[t])==null?void 0:i.buffer;!s||s.updating||this.shiftAndExecuteNext(t)})}append(e,t,i){this.operationQueue&&this.operationQueue.append(e,t,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,i){const s=this.tracks[e];if(!s)return;const r=s.buffer;if(!r)return;const a=i.bind(this,e);s.listeners.push({event:t,listener:a}),r.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const i=t.buffer;i&&(t.listeners.forEach(s=>{i.removeEventListener(s.event,s.listener)}),t.listeners.length=0)}}function lL(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function DX(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}function dx(n){return n==="audio"?1:0}class Gw{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(F.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(F.BUFFER_CODECS,this.onBufferCodecs,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(F.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(F.BUFFER_CODECS,this.onBufferCodecs,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Je(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((s,r)=>this.isLevelAllowed(s)&&r<=e);return this.clientRect=null,Gw.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(!(e!=null&&e.length))return-1;const s=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let r=e.length-1;const a=Math.max(t,i);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&s(l,e[o+1])){r=o;break}}return r}}const OX={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Qs=OX,MX={HLS:"h"},FX=MX,jX="CMCD-Object",BX="CMCD-Request",UX="CMCD-Session",$X="CMCD-Status",sf={OBJECT:jX,REQUEST:BX,SESSION:UX,STATUS:$X},HX={[sf.OBJECT]:["br","d","ot","tb"],[sf.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[sf.SESSION]:["cid","pr","sf","sid","st","v"],[sf.STATUS]:["bs","rtp"]};class Hd{constructor(e,t){Array.isArray(e)&&(e=e.map(i=>i instanceof Hd?i:new Hd(i))),this.value=e,this.params=t}}const zX="Dict";function WX(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function VX(n,e,t,i){return new Error(`failed to ${n} "${WX(e)}" as ${t}`,{cause:i})}function Xa(n,e,t){return VX("serialize",n,e,t)}class ID{constructor(e){this.description=e}}const cL="Bare Item",GX="Boolean";function YX(n){if(typeof n!="boolean")throw Xa(n,GX);return n?"?1":"?0"}const qX="Byte Sequence";function KX(n){if(ArrayBuffer.isView(n)===!1)throw Xa(n,qX);return`:${WK(n)}:`}const XX="Integer";function QX(n){return n<-999999999999999||999999999999999<n}function RD(n){if(QX(n))throw Xa(n,XX);return n.toString()}function JX(n){return`@${RD(n.getTime()/1e3)}`}const ZX="Decimal";function eQ(n){const e=pD(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Xa(n,ZX);const t=e.toString();return t.includes(".")?t:`${t}.0`}const tQ="String",nQ=/[\x00-\x1f\x7f]+/;function iQ(n){if(nQ.test(n))throw Xa(n,tQ);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function sQ(n){return n.description||n.toString().slice(7,-1)}const rQ="Token";function uL(n){const e=sQ(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Xa(e,rQ);return e}function _2(n){switch(typeof n){case"number":if(!Je(n))throw Xa(n,cL);return Number.isInteger(n)?RD(n):eQ(n);case"string":return iQ(n);case"symbol":return uL(n);case"boolean":return YX(n);case"object":if(n instanceof Date)return JX(n);if(n instanceof Uint8Array)return KX(n);if(n instanceof ID)return uL(n);default:throw Xa(n,cL)}}const aQ="Key";function E2(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw Xa(n,aQ);return n}function Yw(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${E2(e)}`:`;${E2(e)}=${_2(t)}`).join("")}function PD(n){return n instanceof Hd?`${_2(n.value)}${Yw(n.params)}`:_2(n)}function oQ(n){return`(${n.value.map(PD).join(" ")})${Yw(n.params)}`}function lQ(n,e={whitespace:!0}){if(typeof n!="object")throw Xa(n,zX);const t=n instanceof Map?n.entries():Object.entries(n),i=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([s,r])=>{r instanceof Hd||(r=new Hd(r));let a=E2(s);return r.value===!0?a+=Yw(r.params):(a+="=",Array.isArray(r.value)?a+=oQ(r):a+=PD(r)),a}).join(`,${i}`)}function cQ(n,e){return lQ(n,e)}function uQ(n){return n==="ot"||n==="sf"||n==="st"}function dQ(n){return typeof n=="number"?Je(n):n!=null&&n!==""&&n!==!1}const e0=n=>Math.round(n),hQ=(n,e)=>(e!=null&&e.baseUrl&&(n=VK(n,e.baseUrl)),encodeURIComponent(n)),Sm=n=>e0(n/100)*100,fQ={br:e0,d:e0,bl:Sm,dl:Sm,mtp:Sm,nor:hQ,rtp:Sm,tb:e0};function pQ(n,e){const t={};if(n==null||typeof n!="object")return t;const i=Object.keys(n).sort(),s=In({},fQ,e==null?void 0:e.formatters),r=e==null?void 0:e.filter;return i.forEach(a=>{if(r!=null&&r(a))return;let o=n[a];const l=s[a];l&&(o=l(o,e)),!(a==="v"&&o===1)&&(a=="pr"&&o===1||dQ(o)&&(uQ(a)&&typeof o=="string"&&(o=new ID(o)),t[a]=o))}),t}function ND(n,e={}){return n?cQ(pQ(n,e),In({whitespace:!1},e)):""}function gQ(n,e={}){const t={};if(!n)return t;const i=Object.entries(n),s=Object.entries(HX).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),r=i.reduce((a,o)=>{var l,c;const[u,d]=o,h=((l=s.find(f=>f[1].includes(u)))===null||l===void 0?void 0:l[0])||sf.REQUEST;return(c=a[h])!==null&&c!==void 0||(a[h]={}),a[h][u]=d,a},{});return Object.entries(r).reduce((a,[o,l])=>(a[o]=ND(l,e),a),t)}function mQ(n,e,t){return In(n,gQ(e,t))}const yQ="CMCD";function vQ(n,e={}){if(!n)return"";const t=ND(n,e);return`${yQ}=${encodeURIComponent(t)}`}const dL=/CMCD=[^&#]+/;function xQ(n,e,t){const i=vQ(e,t);if(!i)return n;if(dL.test(n))return n.replace(dL,i);const s=n.includes("?")?"&":"?";return`${n}${s}${i}`}class bQ{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:Qs.MANIFEST,su:!this.initialized})}catch(r){this.hls.logger.warn("Could not generate manifest CMCD data.",r)}},this.applyFragmentData=s=>{try{const{frag:r,part:a}=s,o=this.hls.levels[r.level],l=this.getObjectType(r),c={d:(a||r).duration*1e3,ot:l};(l===Qs.VIDEO||l===Qs.AUDIO||l==Qs.MUXED)&&(c.br=o.bitrate/1e3,c.tb=this.getTopBandwidth(l)/1e3,c.bl=this.getBufferLength(l));const u=a?this.getNextPart(a):this.getNextFrag(r);u!=null&&u.url&&u.url!==r.url&&(c.nor=u.url),this.apply(s,c)}catch(r){this.hls.logger.warn("Could not generate segment CMCD data.",r)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;i!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHED,this.onMediaDetached,this),e.on(F.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHED,this.onMediaDetached,this),e.off(F.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,s;this.audioBuffer=(i=t.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(s=t.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:FX.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){In(t,this.createData());const i=t.ot===Qs.INIT||t.ot===Qs.VIDEO||t.ot===Qs.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:s}=this;s&&(t=Object.keys(t).reduce((a,o)=>(s.includes(o)&&(a[o]=t[o]),a),{}));const r={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),mQ(e.headers,t,r)):e.url=xQ(e.url,t,r)}getNextFrag(e){var t;const i=(t=this.hls.levels[e.level])==null?void 0:t.details;if(i){const s=e.sn-i.startSN;return i.fragments[s+1]}}getNextPart(e){var t,i;const{index:s,fragment:r}=e,a=(t=this.hls.levels[r.level])==null||(i=t.details)==null?void 0:i.partList;if(a){const{sn:o}=r;for(let l=a.length-1;l>=0;l--){const c=a[l];if(c.index===s&&c.fragment.sn===o)return a[l+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Qs.TIMED_TEXT;if(e.sn==="initSegment")return Qs.INIT;if(t==="audio")return Qs.AUDIO;if(t==="main")return this.hls.audioTracks.length?Qs.VIDEO:Qs.MUXED}getTopBandwidth(e){let t=0,i;const s=this.hls;if(e===Qs.AUDIO)i=s.audioTracks;else{const r=s.maxAutoLevel,a=r>-1?r+1:s.levels.length;i=s.levels.slice(0,a)}for(const r of i)r.bitrate>t&&(t=r.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.media,i=e===Qs.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!t?NaN:Vt.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,o){t(r),this.loader.load(r,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new i(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,a,o){t(r),this.loader.load(r,a,o)}}}}const SQ=3e5;class wQ extends Xo{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if((i==null?void 0:i.action)===Ts.SendAlternateToPenaltyBox&&i.flags===oa.MoveAllAlternatesMatchingHost){const s=this.levels;let r=this._pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:o,pathwayId:l,type:c}=t.context;o&&s?a=this.getPathwayForGroupId(o,c,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!r&&s&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),i.resolved=this.pathwayId!==a),i.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${s&&s.length} priorities: ${ni(r)} penalized: ${ni(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const i=this.penalizedPathways,s=performance.now();Object.keys(i).forEach(r=>{s-i[r]>SQ&&delete i[r]});for(let r=0;r<e.length;r++){const a=e[r];if(a in i)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,sD(t),this.hls.trigger(F.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,i){const s=this.getLevelsForPathway(i).concat(this.levels||[]);for(let r=0;r<s.length;r++)if(t===Zt.AUDIO_TRACK&&s[r].hasAudioGroup(e)||t===Zt.SUBTITLE_TRACK&&s[r].hasSubtitleGroup(e))return s[r].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},s={};e.forEach(r=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=r;if(t.some(u=>u.pathwayId===a))return;const c=this.getLevelsForPathway(o).map(u=>{const d=new ai(u.attrs);d["PATHWAY-ID"]=a;const h=d.AUDIO&&`${d.AUDIO}_clone_${a}`,f=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;h&&(i[d.AUDIO]=h,d.AUDIO=h),f&&(s[d.SUBTITLES]=f,d.SUBTITLES=f);const p=DD(u.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),m=new mp({attrs:d,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:p,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let v=1;v<u.audioGroups.length;v++)m.addGroupId("audio",`${u.audioGroups[v]}_clone_${a}`);if(u.subtitleGroups)for(let v=1;v<u.subtitleGroups.length;v++)m.addGroupId("text",`${u.subtitleGroups[v]}_clone_${a}`);return m});t.push(...c),hL(this.audioTracks,i,l,a),hL(this.subtitleTracks,s,l,a)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+u)}const r={responseType:"json",url:s.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(u,d,h,f)=>{this.log(`Loaded steering manifest: "${s}"`);const p=u.data;if((p==null?void 0:p.VERSION)!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":m,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":y}=p;if(m)try{this.uri=new self.URL(m,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${m}`);return}this.scheduleRefresh(this.uri||h.url),v&&this.clonePathways(v);const b={steeringManifest:p,url:s.toString()};this.hls.trigger(F.STEERING_MANIFEST_LOADED,b),y&&this.updatePathwayPriority(y)},onError:(u,d,h,f)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(u.code===429){const m=this.loader;if(typeof(m==null?void 0:m.getResponseHeader)=="function"){const v=m.getResponseHeader("Retry-After");v&&(p=parseFloat(v)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(u,d,h)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(r,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const s=(i=this.hls)==null?void 0:i.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function hL(n,e,t,i){n&&Object.keys(e).forEach(s=>{const r=n.filter(a=>a.groupId===s).map(a=>{const o=In({},a);return o.details=void 0,o.attrs=new ai(o.attrs),o.url=o.attrs.URI=DD(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[s],o.attrs["PATHWAY-ID"]=i,o});n.push(...r)})}function DD(n,e,t,i){const{HOST:s,PARAMS:r,[t]:a}=i;let o;e&&(o=a==null?void 0:a[e],o&&(n=o));const l=new self.URL(n);return s&&!o&&(l.host=s),r&&Object.keys(r).sort().forEach(c=>{c&&l.searchParams.set(c,r[c])}),l.href}class Ld extends Xo{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Ld.CDMCleanupPromise?[Ld.CDMCleanupPromise]:[],this.onMediaEncrypted=t=>{const{initDataType:i,initData:s}=t,r=`"${t.type}" event: init data type: "${i}"`;if(this.debug(r),s!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=ym(this.config));const o=a.map(ix).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{const o=tx(a);let l,c;if(i==="sinf"){if(o!==bn.FAIRPLAY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${i}" for selected key-system ${o}`);return}const p=zi(new Uint8Array(s));try{const m=Mw(JSON.parse(p).sinf),v=MN(m);if(!v)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(v.subarray(8,24)),c=bn.FAIRPLAY}catch(m){this.warn(`${r} Failed to parse sinf: ${m}`);return}}else{if(o!==bn.WIDEVINE&&o!==bn.PLAYREADY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${i}" for selected key-system ${o}`);return}const p=wq(s),m=p.filter(y=>!!y.systemId&&nx(y.systemId)===o);m.length>1&&this.warn(`${r} Using first of ${m.length} pssh found for selected key-system ${o}`);const v=m[0];if(!v){p.length===0||p.some(y=>!y.systemId)?this.warn(`${r} contains incomplete or invalid pssh data`):this.log(`ignoring ${r} for ${p.map(y=>nx(y.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(c=nx(v.systemId),v.version===0&&v.data)if(c===bn.WIDEVINE){const y=v.data.length-22;l=new Uint8Array(v.data.subarray(y,y+16))}else c===bn.PLAYREADY&&(l=QN(v.data))}if(!c||!l)return;const u=Fa.hexDump(l),{keyIdToKeySessionPromise:d,mediaKeySessions:h}=this;let f=d[u];for(let p=0;p<h.length;p++){const m=h[p],v=m.decryptdata;if(!v.keyId)continue;const y=Fa.hexDump(v.keyId);if(u===y||v.uri.replace(/-/g,"").indexOf(u)!==-1){if(f=d[y],v.pssh)break;delete d[y],v.pssh=new Uint8Array(s),v.keyId=l,f=d[u]=f.then(()=>this.generateRequestWithPreferredKeySession(m,i,s,"encrypted-event-key-match")),f.catch(b=>this.handleError(b));break}}if(!f){if(c!==o){this.log(`Ignoring "${t.type}" event with ${c} init data for selected key-system ${o}`);return}f=d[u]=this.getKeySystemSelectionPromise([c]).then(({keySystem:p,mediaKeys:m})=>{var v;this.throwIfDestroyed();const y=new vp("ISO-23001-7",u,(v=ix(p))!=null?v:"");return y.pssh=new Uint8Array(s),y.keyId=l,this.attemptSetMediaKeys(p,m).then(()=>{this.throwIfDestroyed();const b=this.createMediaKeySessionContext({decryptdata:y,keySystem:p,mediaKeys:m});return this.generateRequestWithPreferredKeySession(b,i,s,"encrypted-event-no-match")})}),f.catch(p=>this.handleError(p))}})}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){const e=this.media;this.unregisterListeners(),this.onMediaDetached(),this._clear(e);const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(F.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(F.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(F.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(F.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(F.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(F.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,s=t[e];if(s)return s.licenseUrl;if(e===bn.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(a,o,l)=>!!a&&l.indexOf(a)===o,s=t.map(a=>a.audioCodec).filter(i),r=t.map(a=>a.videoCodec).filter(i);return s.length+r.length===0&&r.push("avc1.42e01e"),new Promise((a,o)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,s,r).then(d=>a({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof Fr?o(d):o(new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${i}`;return XN===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return i(e,t)}getMediaKeysPromise(e,t,i){const s=fK(e,t,i,this.config.drmSystemOptions),r=this.keySystemAccessPromises[e];let a=r==null?void 0:r.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${ni(s)}`),a=this.requestMediaKeySystemAccess(e,s);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),a.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(d=>d?this.setMediaKeysServerCertificate(u,e,d):u))),o.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),o.mediaKeys})}return a.then(()=>r.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${Fa.hexDump(e.keyId||[])}`);const s=i.createSession(),r={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),s=this.getKeyIdString(t),r="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(i,r,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Fa.hexDump(e.keyId)}updateKeySession(e,t){var i;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${Fa.hexDump(((i=e.decryptdata)==null?void 0:i.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),s.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,i)=>{const s=ym(this.config),r=e.map(tx).filter(a=>!!a&&s.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(r).then(({keySystem:a})=>{const o=ix(a);o?t(o):i(new Error(`Unable to find format for key-system "${a}"`))}).catch(i)})}loadKey(e){const t=e.keyInfo.decryptdata,i=this.getKeyIdString(t),s=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${s}`);let r=this.keyIdToKeySessionPromise[i];return r||(r=this.getKeySystemForKeyPromise(t).then(({keySystem:o,mediaKeys:l})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(o,l).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:o,mediaKeys:l,decryptdata:t}))))),(this.keyIdToKeySessionPromise[i]=r.then(o=>{const l="cenc",c=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(o,l,c,"playlist-key")})).catch(o=>this.handleError(o))),r}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Fr?this.hls.trigger(F.ERROR,e.data):this.hls.trigger(F.ERROR,{type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),i=this.keyIdToKeySessionPromise[t];if(!i){const s=tx(e.keyFormat),r=s?[s]:ym(this.config);return this.attemptKeySystemAccess(r)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=ym(this.config)),e.length===0)throw new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${ni({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(i).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(r=>i.indexOf(r)===-1)})}generateRequestWithPreferredKeySession(e,t,i,s){var r,a;const o=(r=this.config.drmSystems)==null||(a=r[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const p=o.call(this.hls,t,i,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");t=p.initDataType,i=p.initData?p.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(p){var l;if(this.warn(p.message),(l=this.hls)!=null&&l.config.debug)throw p}if(i===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${c} (init data type: ${t} length: ${i?i.byteLength:null})`);const u=new jw,d=e._onmessage=p=>{const m=e.mediaKeysSession;if(!m){u.emit("error",new Error("invalid state"));return}const{messageType:v,message:y}=p;this.log(`"${v}" message event for session "${m.sessionId}" message size: ${y.byteLength}`),v==="license-request"||v==="license-renewal"?this.renewLicense(e,y).catch(b=>{u.eventNames().length?u.emit("error",b):this.handleError(b)}):v==="license-release"?e.keySystem===bn.FAIRPLAY&&(this.updateKeySession(e,y2("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${v}"`)},h=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const v=e.keyStatus;u.emit("keyStatus",v),v==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",h);const f=new Promise((p,m)=>{u.on("error",m),u.on("keyStatus",v=>{v.startsWith("usable")?p():v==="output-restricted"?m(new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):v==="internal-error"?m(new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${v}"`)):v==="expired"?m(new Error("key expired while generating request")):this.warn(`unhandled key status change "${v}"`)})});return e.mediaKeysSession.generateRequest(t,i).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${c}`)}).catch(p=>{throw new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>f).catch(p=>{throw u.removeAllListeners(),this.removeSession(e),p}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,i)=>{if(typeof i=="string"&&typeof t=="object"){const s=i;i=t,t=s}this.log(`key status change "${t}" for keyStatuses keyId: ${Fa.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))} session keyId: ${Fa.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,i=t.loader,s=new i(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:r},c=t.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{a(h.data)},onError:(h,f,p,m)=>{o(new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:vn({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${r}). Status: ${h.code} (${h.text})`))},onTimeout:(h,f,p)=>{o(new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(h,f,p)=>{o(new Error("aborted"))}};s.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((s,r)=>{e.setServerCertificate(i).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${i==null?void 0:i.byteLength}) on "${t}"`),s(e)}).catch(a=>{r(new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(s=>{throw new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const s=new DOMParser().parseFromString(i,"application/xml"),r=s.querySelectorAll("HttpHeader");if(r.length>0){let u;for(let d=0,h=r.length;d<h;d++){var a,o;u=r[d];const f=(a=u.querySelector("name"))==null?void 0:a.textContent,p=(o=u.querySelector("value"))==null?void 0:o.textContent;f&&p&&e.setRequestHeader(f,p)}}const l=s.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return y2(atob(c))}setupLicenseXHR(e,t,i,s){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,t,i,s)}).catch(a=>{if(!i.decryptdata)throw a;return e.open("POST",t,!0),r.call(this.hls,e,t,i,s)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||s})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise((s,r)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,o,a,e)}catch(u){this.error(u)}s(l)}else{const l=i.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)r(new Fr({type:ut.KEY_SYSTEM_ERROR,details:xe.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(s,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==bn.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,i.removeEventListener("encrypted",this.onMediaEncrypted),i.removeEventListener("waitingforkey",this.onWaitingForKey),i.addEventListener("encrypted",this.onMediaEncrypted),i.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null)}_clear(e){var t;const i=this.mediaKeySessions;this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},vp.clearKeyUriToKeyIdMap();const s=i.length;Ld.CDMCleanupPromise=Promise.all(i.map(r=>this.removeSession(r)).concat(e==null||(t=e.setMediaKeys(null))==null?void 0:t.catch(r=>{var a;this.log(`Could not clear media keys: ${r}`),(a=this.hls)==null||a.trigger(F.ERROR,{type:ut.OTHER_ERROR,details:xe.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${r}`)})}))).then(()=>{s&&(this.log("finished closing key sessions and clearing media keys"),i.length=0)}).catch(r=>{var a;this.log(`Could not close sessions and clear media keys: ${r}`),(a=this.hls)==null||a.trigger(F.ERROR,{type:ut.OTHER_ERROR,details:xe.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${r}`)})})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=t.reduce((s,r)=>(s.indexOf(r.keyFormat)===-1&&s.push(r.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{drmSystemOptions:r}=this.config;return(gK(r)?new Promise((o,l)=>{self.setTimeout(()=>l(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(o)}):Promise.resolve()).catch(o=>{var l;this.log(`Could not remove session: ${o}`),(l=this.hls)==null||l.trigger(F.ERROR,{type:ut.OTHER_ERROR,details:xe.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${o}`)})}).then(()=>t.close()).catch(o=>{var l;this.log(`Could not close session: ${o}`),(l=this.hls)==null||l.trigger(F.ERROR,{type:ut.OTHER_ERROR,details:xe.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${o}`)})})}}}Ld.CDMCleanupPromise=void 0;class Fr extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class _Q{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(F.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(F.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const s=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,i){const s=performance.now();if(t){if(this.lastTime){const r=s-this.lastTime,a=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*a/r,c=this.hls;if(c.trigger(F.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:i}),l>0&&a>c.config.fpsDroppedMonitoringThreshold*o){let u=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(F.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function OD(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function MD(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){an.debug(`[texttrack-utils]: ${i}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,n.addCue(s)}catch(s){an.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}t==="disabled"&&(n.mode=t)}function gd(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues)for(let i=n.cues.length;i--;)e&&n.cues[i].removeEventListener("enter",e),n.removeCue(n.cues[i]);t==="disabled"&&(n.mode=t)}function T2(n,e,t,i){const s=n.mode;if(s==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const r=TQ(n.cues,e,t);for(let a=0;a<r.length;a++)(!i||i(r[a]))&&n.removeCue(r[a])}s==="disabled"&&(n.mode=s)}function EQ(n,e){if(e<=n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let i=0,s=t,r;for(;i<=s;)if(r=Math.floor((s+i)/2),e<n[r].startTime)s=r-1;else if(e>n[r].startTime&&i<t)i=r+1;else return r;return n[i].startTime-e<e-n[s].startTime?i:s}function TQ(n,e,t){const i=[],s=EQ(n,e);if(s>-1)for(let r=s,a=n.length;r<a;r++){const o=n[r];if(o.startTime>=e&&o.endTime<=t)i.push(o);else if(o.startTime>t)return i}return i}function t0(n){const e=[];for(let t=0;t<n.length;t++){const i=n[t];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(n[t])}return e}class AQ extends Vw{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const i=t0(this.media.textTracks);for(let r=0;r<i.length;r++)if(i[r].mode==="hidden")t=i[r];else if(i[r].mode==="showing"){t=i[r];break}const s=this.findTrackForTextTrack(t);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.LEVEL_LOADING,this.onLevelLoading,this),e.on(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(F.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.LEVEL_LOADING,this.onLevelLoading,this),e.off(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(F.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(F.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const i=this.media;if(!i)return;const s=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s)return;t0(i.textTracks).forEach(a=>{gd(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:s,details:r}=t,a=this.tracksInGroup[i];if(!a||a.groupId!==s){this.warn(`Subtitle track with id:${i} and group:${s} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Subtitle track ${i} "${a.name}" lang:${a.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,s=this.groupIds;let r=this.currentTrack;if(!i||(s==null?void 0:s.length)!==(i==null?void 0:i.length)||i!=null&&i.some(a=>(s==null?void 0:s.indexOf(a))===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(u=>!i||i.indexOf(u.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(u=>u.default)&&(this.selectDefaultTrack=!1),a.forEach((u,d)=>{u.id=d});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!r&&o){this.selectDefaultTrack=!1;const u=Ha(o,a);if(u>-1)r=a[u];else{const d=Ha(o,this.tracks);r=this.tracks[d]}}let l=this.findTrackId(r);l===-1&&r&&(l=this.findTrackId(null));const c={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${i==null?void 0:i.join(",")}" group-id`),this.hls.trigger(F.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let s=0;s<t.length;s++){const r=t[s];if(!(i&&!r.default||!i&&!e)&&(!e||tu(r,e)))return s}if(e){for(let s=0;s<t.length;s++){const r=t[s];if(wp(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<t.length;s++){const r=t[s];if(wp(e.attrs,r.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(w2(s,e))return i}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Zt.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&tu(e,i))return i;const s=Ha(e,this.tracksInGroup);if(s>-1){const r=this.tracksInGroup[s];return this.setSubtitleTrack(s),r}else{if(i)return null;{const r=Ha(e,t);if(r>-1)return t[r]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,r=this.getUrlWithDirectives(e.url,t),a=e.details,o=a==null?void 0:a.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${s}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${r}`),this.hls.trigger(F.SUBTITLE_TRACK_LOADING,{url:r,id:i,groupId:s,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=t0(e.textTracks),i=this.currentTrack;let s;if(i&&(s=t.filter(r=>w2(i,r))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach(r=>{r.mode!=="disabled"&&r!==s&&(r.mode="disabled")}),s){const r=this.subtitleDisplay?"showing":"hidden";s.mode!==r&&(s.mode=r)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Je(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(F.SUBTITLE_TRACK_SWITCH,{id:e});return}const r=!!s.details&&!s.details.live;if(e===this.trackId&&s===i&&r)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:a,groupId:o="",name:l,type:c,url:u}=s;this.hls.trigger(F.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:c,url:u});const d=this.switchParams(s.url,i==null?void 0:i.details,s.details);this.loadPlaylist(d)}}function Pf(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString()}const kd=.025;let ry=function(n){return n[n.Point=0]="Point",n[n.Range=1]="Range",n}({});function LQ(n,e,t){return`${n.identifier}-${t+1}-${Pf(e)}`}class kQ{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){if(e>=this.assetList.length)return!0;const t=this.playoutLimit;return e<=0||isNaN(t)?!1:this.assetList[e].startOffset>t}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return hx(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,i=hx(t,e);return t-i<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Je(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return hx(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<kd))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?ry.Range:ry.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return CQ(this)}}function hx(n,e){return n-e.start<e.duration/2&&!(Math.abs(n-(e.start+e.duration))<kd)?e.start:e.start+e.duration}function FD(n,e,t){const i=new self.URL(n,t);return i.protocol!=="data:"&&i.searchParams.set("_HLS_primary_id",e),i}function CQ(n){return`["${n.identifier}" ${n.cue.pre?"<pre>":n.cue.post?"<post>":""}${n.timelineStart.toFixed(2)}-${n.resumeTime.toFixed(2)}]`}function A2(n){const e=n.timelineStart,t=n.duration||0;return`["${n.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class IQ{constructor(e,t,i,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{const c=this.interstitial.playoutLimit,u=this.currentTime;this.startOffset+u>=c&&this.hls.trigger(F.PLAYOUT_LIMIT_REACHED,{})};const r=this.hls=new e(t);this.interstitial=i,this.assetItem=s;let a=s.uri;try{a=FD(a,r.sessionId).href}catch{}r.loadSource(a);const o=()=>{this.hasDetails=!0};r.once(F.LEVEL_LOADED,o),r.once(F.AUDIO_TRACK_LOADED,o),r.once(F.SUBTITLE_TRACK_LOADED,o),r.on(F.MEDIA_ATTACHING,(l,{media:c})=>{this.removeMediaListeners(),this.mediaAttached=c,this.interstitial.playoutLimit&&c.addEventListener("timeupdate",this.checkPlayout)})}bufferedInPlaceToEnd(e){var t;if(!this.interstitial.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const i=this.timelineOffset,s=Vt.bufferInfo(e,i,0);return this.getAssetTime(s.end)>=this._bufferedEosTime-.02}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=Vt.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const i=e-t;if(Math.abs(i)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-t),i)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}on(e,t,i){this.hls.on(e,t)}once(e,t,i){this.hls.once(e,t)}off(e,t,i){this.hls.off(e,t)}toString(){var e,t;return`HlsAssetPlayer: ${A2(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${(t=this.interstitial)!=null&&t.appendInPlace?"append-in-place":""}`}}const fL=.033;class RQ extends Xo{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((i,s)=>e<=s.startOffset&&t>s.startOffset?(delete s.error,i+1):i,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);const s=this.items;if(s)for(s[i]||(t===void 0&&(t=e.start),i=this.findItemIndexAtTime(t));i>=0&&(r=s[i])!=null&&r.event;){var r;i--}return i}findItemIndexAtTime(e,t){const i=this.items;if(i)for(let s=0;s<i.length;s++){let r=i[s];if(t&&t!=="primary"&&(r=r[t]),e===r.start||e>r.start&&e<r.end)return s}return-1}findJumpRestrictedIndex(e,t){const i=this.items;if(i)for(let s=e;s<=t&&i[s];s++){const r=i[s].event;if(r!=null&&r.restrictions.jump&&!r.appendInPlace)return s}return-1}findEventIndex(e){const t=this.items;if(t)for(let s=t.length;s--;){var i;if(((i=t[s].event)==null?void 0:i.identifier)===e)return s}return-1}findAssetIndex(e,t){const i=e.assetList,s=i.length;if(s>1)for(let r=0;r<s;r++){const a=i[r];if(!a.error){const o=a.timelineStart;if(t===o||t>o&&t<o+(a.duration||0))return r}}return 0}get assetIdAtEnd(){var e,t;const i=(e=this.items)==null||(t=e[this.length-1])==null?void 0:t.event;if(i){const s=i.assetList,r=s[s.length-1];if(r)return r.identifier}return null}parseInterstitialDateRanges(e,t){const i=e.main.details,{dateRanges:s}=i,r=this.events,a=this.parseDateRanges(s,{url:i.url},t),o=Object.keys(s),l=r?r.filter(c=>!o.includes(c.identifier)):[];a.length&&a.sort((c,u)=>{const d=c.cue.pre,h=c.cue.post,f=u.cue.pre,p=u.cue.post;if(d&&!f)return-1;if(f&&!d||h&&!p)return 1;if(p&&!h)return-1;if(!d&&!f&&!h&&!p){const m=c.startTime,v=u.startTime;if(m!==v)return m-v}return c.dateRange.tagOrder-u.dateRange.tagOrder}),this.events=a,l.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,l)}updateSchedule(e,t=[]){const i=this.events||[];if(i.length||t.length||this.length<2){const s=this.items,r=this.parseSchedule(i,e);(t.length||(s==null?void 0:s.length)!==r.length||r.some((o,l)=>Math.abs(o.playout.start-s[l].playout.start)>.005||Math.abs(o.playout.end-s[l].playout.end)>.005))&&(this.items=r,this.onScheduleUpdate(t,s))}}parseDateRanges(e,t,i){const s=[],r=Object.keys(e);for(let a=0;a<r.length;a++){const o=r[a],l=e[o];if(l.isInterstitial){let c=this.eventMap[o];c?c.setDateRange(l):(c=new kQ(l,t),this.eventMap[o]=c,i===!1&&(c.appendInPlace=i)),s.push(c)}}return s}parseSchedule(e,t){const i=[],s=t.main.details,r=s.live?1/0:s.edge;let a=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,t);let l=0,c=0;if(e.forEach((u,d)=>{const h=u.cue.pre,f=u.cue.post,p=e[d-1]||null,m=u.appendInPlace,v=f?r:u.startOffset,y=u.duration,b=u.timelineOccupancy===ry.Range?y:0,x=u.resumptionOffset,_=(p==null?void 0:p.startTime)===v,T=v+u.cumulativeDuration;let C=m?T+y:v+x;if(h||!f&&v<=0){const k=c;c+=b,u.timelineStart=T;const M=a;a+=y,i.push({event:u,start:T,end:C,playout:{start:M,end:a},integrated:{start:k,end:c}})}else if(v<=r){if(!_){const D=v-l;if(D>fL){const I=l,R=c;c+=D;const q=a;a+=D;const Y={previousEvent:e[d-1]||null,nextEvent:u,start:I,end:I+D,playout:{start:q,end:a},integrated:{start:R,end:c}};i.push(Y)}else D>0&&p&&(p.cumulativeDuration+=D,i[i.length-1].end=v)}f&&(C=T),u.timelineStart=T;const k=c;c+=b;const M=a;a+=y,i.push({event:u,start:T,end:C,playout:{start:M,end:a},integrated:{start:k,end:c}})}else return;const L=u.resumeTime;f||L>r?l=r:l=L}),l<r){var o;const u=l,d=c,h=r-l;c+=h;const f=a;a+=h,i.push({previousEvent:((o=i[i.length-1])==null?void 0:o.event)||null,nextEvent:null,start:l,end:u+h,playout:{start:f,end:a},integrated:{start:d,end:c}})}this.setDurations(r,a,c)}else i.push({previousEvent:null,nextEvent:null,start:0,end:r,playout:{start:0,end:r},integrated:{start:0,end:r}}),this.setDurations(r,r,r);return i}setDurations(e,t,i){this.durations={primary:e,playout:t,integrated:i}}resolveOffsets(e,t){const i=t.main.details,s=i.live?1/0:i.edge;let r=0,a=-1;e.forEach((o,l)=>{const c=o.cue.pre,u=o.cue.post,d=c?0:u?s:o.startTime;this.updateAssetDurations(o),a===d?o.cumulativeDuration=r:(r=0,a=d),!u&&o.snapOptions.in&&(o.resumeAnchor=uu(null,i.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<fL&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const f=Je(o.resumeOffset)?o.resumeOffset:o.duration;r+=f})}primaryCanResumeInPlaceAt(e,t){const i=e.resumeTime,s=e.startTime+e.resumptionOffset;return Math.abs(i-s)>kd?(this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${s}`),!1):t?!Object.keys(t).some(a=>{const o=t[a].details,l=o.edge;if(i>=l)return this.log(`"${e.identifier}" resumption ${i} past ${a} playlist end ${l}`),!1;const c=uu(null,o.fragments,i);if(!c)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const u=a==="audio"?.175:0;return Math.abs(c.start-i)<kd+u||Math.abs(c.end-i)<kd+u?!1:(this.log(`"${e.identifier}" resumption ${i} not aligned with ${a} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${i} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let i=0,s=!1,r=!1;e.assetList.forEach((a,o)=>{const l=t+i;a.startOffset=i,a.timelineStart=l,s||(s=a.duration===null),r||(r=!!a.error);const c=a.error?0:a.duration||0;i+=c}),s&&!r?e.duration=Math.max(i,e.duration):e.duration=i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function gl(n){return`[${n.event?'"'+n.event.identifier+'"':"primary"}: ${n.start.toFixed(2)}-${n.end.toFixed(2)}]`}class PQ{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const i=e.assetListUrl;let s;try{s=FD(i,this.hls.sessionId,e.baseUrl)}catch(h){const f=this.assignAssetListError(e,xe.ASSET_LIST_LOAD_ERROR,h,i);this.hls.trigger(F.ERROR,f);return}t&&s.protocol!=="data:"&&s.searchParams.set("_HLS_start_offset",""+t);const r=this.hls.config,a=r.loader,o=new a(r),l={responseType:"json",url:s.href},c=r.interstitialAssetListLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{const v=h.data,y=v==null?void 0:v.ASSETS;if(!Array.isArray(y)){const b=this.assignAssetListError(e,xe.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),p.url,f,m);this.hls.trigger(F.ERROR,b);return}e.assetListResponse=v,this.hls.trigger(F.ASSET_LIST_LOADED,{event:e,assetListResponse:v,networkDetails:m})},onError:(h,f,p,m)=>{const v=this.assignAssetListError(e,xe.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${h.code} ${h.text} (${f.url})`),f.url,m,p);this.hls.trigger(F.ERROR,v)},onTimeout:(h,f,p)=>{const m=this.assignAssetListError(e,xe.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${f.url})`),f.url,h,p);this.hls.trigger(F.ERROR,m)}};return o.load(l,u,d),this.hls.trigger(F.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,i,s,r,a){return e.error=i,{type:ut.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:s,error:i,networkDetails:a,stats:r}}}function Do(n,e,t){Wa(n,e,t),n.addEventListener(e,t)}function Wa(n,e,t){n.removeEventListener(e,t)}function pL(n){n==null||n.play().catch(()=>{})}class NQ extends Xo{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;const s=i-this.timelinePos;if(Math.abs(s)<1/7056e5)return;const a=s<=-.01;this.timelinePos=i,this.bufferedPos=i;const o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(i,i-s)&&this.updateSchedule(),this.checkBuffer(),a&&i<o.start||i>=o.end){var l;const h=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(o)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!a){const f=this.findItemIndex(o);if(h>f){const p=this.schedule.findJumpRestrictedIndex(f+1,h);if(p>f){this.setSchedulePosition(p);return}}}this.setSchedulePosition(h);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(o)){const h=o.event.assetList[0];h&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(i,h))}return}const u=c.timelineStart,d=c.duration||0;(a&&i<u||i>=u+d)&&this.setScheduleToAssetAtTime(i,c)},this.onTimeupdate=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;if(i>this.timelinePos)this.timelinePos=i,i>this.bufferedPos&&this.checkBuffer();else return;const s=this.playingItem;if(!s||this.playingLastItem)return;if(i>=s.end){this.timelinePos=s.end;const o=this.findItemIndex(s);this.setSchedulePosition(o+1)}const r=this.playingAsset;if(!r)return;const a=r.timelineStart+(r.duration||0);i>=a&&this.setScheduleToAssetAtTime(i,r)},this.onScheduleUpdate=(i,s)=>{const r=this.schedule,a=this.playingItem,o=r.events||[],l=r.items||[],c=r.durations,u=i.map(f=>f.identifier),d=!!(o.length||u.length);if(d&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${l.map(f=>gl(f))}`),u.length&&this.log(`Removed events ${u}`),this.playerQueue.forEach(f=>{if(f.interstitial.appendInPlace){const p=f.assetItem.timelineStart,m=f.timelineOffset-p;if(m)try{f.timelineOffset=p}catch(v){Math.abs(m)>kd&&this.warn(`${v} ("${f.assetId}" ${f.timelineOffset}->${p})`)}}}),a){const f=this.updateItem(a,this.timelinePos);this.itemsMatch(a,f)&&(this.playingItem=f,this.waitingItem=this.endedItem=null)}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const h=this.bufferingItem;if(h){const f=this.updateItem(h,this.bufferedPos);this.itemsMatch(h,f)?this.bufferingItem=f:h.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(h.event,null))}if(i.forEach(f=>{f.assetList.forEach(p=>{this.clearAssetPlayer(p.identifier,null)})}),d||s){if(this.hls.trigger(F.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:l.slice(0),durations:c,removedIds:u}),this.isInterstitial(a)&&u.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new PQ(e),this.schedule=new RQ(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(F.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(F.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(F.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(F.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(F.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(F.BUFFER_APPENDED,this.onBufferAppended,this),e.on(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(F.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(F.MEDIA_ENDED,this.onMediaEnded,this),e.on(F.ERROR,this.onError,this),e.on(F.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(F.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(F.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(F.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(F.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(F.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(F.BUFFER_CODECS,this.onBufferCodecs,this),e.off(F.BUFFER_APPENDED,this.onBufferAppended,this),e.off(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(F.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(F.MEDIA_ENDED,this.onMediaEnded,this),e.off(F.ERROR,this.onError,this),e.off(F.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Wa(e,"play",this.onPlay),Wa(e,"pause",this.onPause),Wa(e,"seeking",this.onSeeking),Wa(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const i=this.media=t.media;Do(i,"seeking",this.onSeeking),Do(i,"timeupdate",this.onTimeupdate),Do(i,"play",this.onPlay),Do(i,"pause",this.onPause)}onMediaAttached(e,t){const i=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,i===null)this.checkStart();else if(!s){this.clearScheduleState();const r=this.findItemIndex(i);this.setSchedulePosition(r)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(this.media=null,!i&&(s&&this.removeMediaListeners(s),this.detachedData)){const r=this.getBufferingPlayer();r&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,r.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,t=()=>e.bufferingItem||e.waitingItem,i=d=>d&&e.getAssetPlayer(d.identifier),s=(d,h,f,p,m)=>{if(d){let v=d[h].start;const y=d.event;if(y){if(h==="playout"||y.timelineOccupancy!==ry.Point){const b=i(f);(b==null?void 0:b.interstitial)===y&&(v+=b.assetItem.startOffset+b[m])}}else{const b=p==="bufferedPos"?a():e[p];v+=b-d.start}return v}return 0},r=(d,h)=>{if(d!==0&&h!=="primary"&&e.schedule.length){var f;const p=e.schedule.findItemIndexAtTime(d),m=(f=e.schedule.items)==null?void 0:f[p];if(m){const v=m[h].start-m.start;return d+v}}return d},a=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?o("primary"):Math.max(d,0)},o=d=>{var h;return(h=e.primaryDetails)!=null&&h.live?e.primaryDetails.edge:e.schedule.durations[d]},l=(d,h)=>{var f,p;const m=e.effectivePlayingItem;if(m!=null&&(f=m.event)!=null&&f.restrictions.skip)return;e.log(`seek to ${d} "${h}"`);const v=e.effectivePlayingItem,y=e.schedule.findItemIndexAtTime(d,h),b=(p=e.schedule.items)==null?void 0:p[y],x=e.getBufferingPlayer(),_=x==null?void 0:x.interstitial,T=_==null?void 0:_.appendInPlace,C=v&&e.itemsMatch(v,b);if(v&&(T||C)){const k=i(e.playingAsset),M=(k==null?void 0:k.media)||e.primaryMedia;if(M){const D=h==="primary"?M.currentTime:s(v,h,e.playingAsset,"timelinePos","currentTime"),I=d-D,R=(T?D:M.currentTime)+I;if(R>=0&&(!k||T||R<=k.duration)){M.currentTime=R;return}}}if(b){let k=d;if(h!=="primary"){const D=b[h].start,I=d-D;k=b.start+I}const M=!e.isInterstitial(b);if((!e.isInterstitial(v)||v.event.appendInPlace)&&(M||b.event.appendInPlace)){const D=e.media||(T?x==null?void 0:x.media:null);D&&(D.currentTime=k)}else if(v){const D=e.findItemIndex(v);if(y>D){const R=e.schedule.findJumpRestrictedIndex(D+1,y);if(R>D){e.setSchedulePosition(R);return}}let I=0;if(M)e.timelinePos=k,e.checkBuffer();else{var L;const R=b==null||(L=b.event)==null?void 0:L.assetList;if(R){const q=d-(b[h]||b).start;for(let Y=R.length;Y--;){const ee=R[Y];if(ee.duration&&q>=ee.startOffset&&q<ee.startOffset+ee.duration){I=Y;break}}}}e.setSchedulePosition(y,I)}}},c=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const h=t();return e.isInterstitial(h)?h:null},u={get currentTime(){const d=c(),h=e.effectivePlayingItem;return h&&h===d?s(h,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-h.playout.start:0},set currentTime(d){const h=c(),f=e.effectivePlayingItem;f&&f===h&&l(d+f.playout.start,"playout")},get duration(){const d=c();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const h=(d=c())==null?void 0:d.event.assetList;return h?h.map(f=>e.getAssetPlayer(f.identifier)):[]},get playingIndex(){var d;const h=(d=c())==null?void 0:d.event;return h&&e.effectivePlayingAsset?h.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};this.manager={get events(){var d,h;return((d=e.schedule)==null||(h=d.events)==null?void 0:h.slice(0))||[]},get schedule(){var d,h;return((d=e.schedule)==null||(h=d.items)==null?void 0:h.slice(0))||[]},get interstitialPlayer(){return c()?u:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const d=t();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return a()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){l(d,"primary")},get duration(){return o("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){l(d,"integrated")},get duration(){return o("integrated")},get seekableStart(){var d;return r(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,h=d==null?void 0:d.event;if(h&&!h.restrictions.skip){const f=e.findItemIndex(d);if(h.appendInPlace){const p=d.playout.start+d.event.duration;l(p+.001,"playout")}else e.advanceAfterAssetEnded(h,f,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,i=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!i?!1:this.findItemIndex(t)===i.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t,i;if(this.mediaSelection===null)return;const s=this.waitingItem||this.playingItem;if(this.isInterstitial(s)&&!s.event.appendInPlace)return;let r=this.media;!r&&(e=this.bufferingItem)!=null&&(t=e.event)!=null&&t.appendInPlace&&(r=this.primaryMedia);const a=(i=r)==null?void 0:i.currentTime;if(!(a===void 0||!Je(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,t)}transferMediaFromPlayer(e,t){const i=e.interstitial.appendInPlace,s=e.media;if(i&&s===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&s){this.detachedData={media:s};return}const r=e.transferMedia();this.log(`transfer MediaSource from ${e} ${ni(r)}`),this.detachedData=r}else t&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(e,t){var i,s;if(e.media===t)return;let r=null;const a=this.hls,o=e!==a,l=o&&e.interstitial.appendInPlace,c=(i=this.detachedData)==null?void 0:i.mediaSource;let u;if(a.media)l&&(r=a.transferMedia(),this.detachedData=r),u="Primary";else if(c){const f=this.getBufferingPlayer();f?(r=f.transferMedia(),u=`${f}`):u="detached MediaSource"}else u="detached media";if(!r){if(c)r=this.detachedData,this.log(`using detachedData: MediaSource ${ni(r)}`);else if(!this.detachedData||a.media===t){const f=this.playerQueue;f.length>1&&f.forEach(p=>{if(o&&p.interstitial.appendInPlace!==l){const m=p.interstitial;this.clearInterstitial(p.interstitial,null),m.appendInPlace=!1,m.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${m}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const d=r&&"mediaSource"in r&&((s=r.mediaSource)==null?void 0:s.readyState)!=="closed",h=d&&r?r:t;if(this.log(`${d?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${u}`),h===r){const f=o&&e.assetId===this.schedule.assetIdAtEnd;h.overrides={duration:this.schedule.duration,endOfStream:!o||f,cueRemoval:!o}}e.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const i=this.timelinePos,s=this.effectivePlayingItem;if(i===-1){const r=this.hls.startPosition;if(this.timelinePos=r,t.length&&t[0].cue.pre){const a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(r>=0||!this.primaryLive){const a=this.timelinePos=r>0?r:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(s&&!this.playingItem){const r=e.findItemIndex(s);this.setSchedulePosition(r)}}advanceAfterAssetEnded(e,t,i){const s=i+1;if(!e.isAssetPastPlayoutLimit(s)&&!e.assetList[s].error)this.setSchedulePosition(t,s);else{const r=this.schedule.items;if(r){const a=t+1,o=r.length;if(a>=o){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.timelinePos=l,this.checkBuffer()),this.setSchedulePosition(a)}}}setScheduleToAssetAtTime(e,t){const i=this.schedule,s=t.parentIdentifier,r=i.getEvent(s);if(r){const a=i.findEventIndex(s),o=i.findAssetIndex(r,e);this.setSchedulePosition(a,o)}}setSchedulePosition(e,t){const i=this.schedule.items;if(!i||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${t}`);const s=e>=0?i[e]:null,r=this.playingItem,a=this.playingLastItem;if(this.isInterstitial(r)){var o;const c=r.event,u=this.playingAsset,d=u==null?void 0:u.identifier,h=d?this.getAssetPlayer(d):null;if(h&&d&&(!this.eventItemsMatch(r,s)||t!==void 0&&d!==((o=c.assetList)==null?void 0:o[t].identifier))){var l;const f=c.findAssetIndex(u);this.log(`INTERSTITIAL_ASSET_ENDED ${f+1}/${c.assetList.length} ${A2(u)}`),this.endedAsset=u,this.playingAsset=null,this.hls.trigger(F.INTERSTITIAL_ASSET_ENDED,{asset:u,assetListIndex:f,event:c,schedule:i.slice(0),scheduleIndex:e,player:h}),this.retreiveMediaSource(d,s),h.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&h.detachMedia()}if(!this.eventItemsMatch(r,s)&&(this.endedItem=r,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${c} ${gl(r)}`),c.hasPlayed=!0,this.hls.trigger(F.INTERSTITIAL_ENDED,{event:c,schedule:i.slice(0),scheduleIndex:e}),c.cue.once)){this.updateSchedule();const f=this.schedule.items;if(s&&f){const p=this.schedule.findItemIndex(s);this.advanceSchedule(p,f,t,r,a)}return}}this.advanceSchedule(e,i,t,r,a)}advanceSchedule(e,t,i,s,r){const a=e>=0?t[e]:null,o=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(c=>{const u=c.interstitial,d=this.schedule.findEventIndex(u.identifier);(d<e||d>e+1)&&this.clearInterstitial(u,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const c=a.event;i===void 0&&(i=this.schedule.findAssetIndex(c,this.timelinePos));const u=this.waitingItem;this.assetsBuffered(a,o)||this.setBufferingItem(a);let d=this.preloadAssets(c,i);if(this.eventItemsMatch(a,u||s)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${gl(a)} ${c.appendInPlace?"append in place":""}`),this.hls.trigger(F.INTERSTITIAL_STARTED,{event:c,schedule:t.slice(0),scheduleIndex:e})),!c.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${c}`);return}if(c.assetListLoader&&(c.assetListLoader.destroy(),c.assetListLoader=void 0),!o){this.log(`Waiting for attachMedia to start Interstitial ${c}`);return}this.waitingItem=this.endedItem=null,this.playingItem=a;const h=c.assetList[i];if(!h){const f=t[e+1],p=this.media;f&&p&&!this.isInterstitial(f)&&p.currentTime<f.start&&(p.currentTime=this.timelinePos=f.start),this.advanceAfterAssetEnded(c,e,i||0);return}if(d||(d=this.getAssetPlayer(h.identifier)),d===null||d.destroyed){const f=c.assetList.length;this.warn(`asset ${i+1}/${f} player destroyed ${c}`),d=this.createAssetPlayer(c,h,i)}if(!this.eventItemsMatch(a,this.bufferingItem)&&c.appendInPlace&&this.isAssetBuffered(h))return;this.startAssetPlayer(d,i,t,e,o),this.shouldPlay&&pL(d.media)}else a!==null?(this.resumePrimary(a,e,s),this.shouldPlay&&pL(this.hls.media)):r&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e,t;return(e=this.mediaSelection)==null||(t=e.main)==null?void 0:t.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,i){var s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${gl(e)}`),!((s=this.detachedData)!=null&&s.mediaSource)){let a=this.timelinePos;(a<e.start||a>=e.end)&&(a=this.getPrimaryResumption(e,t),this.timelinePos=a),this.attachPrimary(a,e)}if(!i)return;const r=this.schedule.items;r&&(this.log(`resumed ${gl(e)}`),this.hls.trigger(F.INTERSTITIALS_PRIMARY_RESUMED,{schedule:r.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const i=e.start;if(this.primaryLive){const s=this.primaryDetails;if(t===0)return this.hls.startPosition;if(s&&(i<s.fragmentStart||i>s.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:Vt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,i){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const r=this.hls;r.media?this.checkBuffer():(this.transferMediaTo(r,s),i&&this.startLoadingPrimaryAt(e,i)),i||(this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,t){var i;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs((((i=s.mainForwardBufferInfo)==null?void 0:i.start)||s.media.currentTime)-e)>.5?s.startLoad(e,t):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(F.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(F.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1)return;const i=this.hls.levels[t.level],s=vn(vn({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const i=this.hls.audioTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=vn(vn({},this.altSelection),{},{audio:i});return}const r=vn(vn({},s),{},{audio:i});this.mediaSelection=r}onSubtitleTrackUpdated(e,t){const i=this.hls.subtitleTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=vn(vn({},this.altSelection),{},{subtitles:i});return}const r=vn(vn({},s),{},{subtitles:i});this.mediaSelection=r}onAudioTrackSwitching(e,t){const i=AA(t);this.playerQueue.forEach(s=>s.hls.setAudioOption(t)||s.hls.setAudioOption(i))}onSubtitleTrackSwitch(e,t){const i=AA(t);this.playerQueue.forEach(s=>s.hls.setSubtitleOption(t)||t.id!==-1&&s.hls.setSubtitleOption(i))}onBufferCodecs(e,t){const i=t.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){const s=this.timelinePos;this.bufferedPos=s,this.checkBuffer()}}onBufferedToEnd(e){const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let s=0;s<t.length;s++){const r=t[s];if(r.cue.post){var i;const a=this.schedule.findEventIndex(r.identifier),o=(i=this.schedule.items)==null?void 0:i[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const i=this.findItemIndex(t);this.setSchedulePosition(i+1)}else this.shouldPlay=!1}updateItem(e,t){const i=this.schedule.items;if(e&&i){const s=this.findItemIndex(e,t);return i[s]||null}return null}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var i;return!!t&&(e===t||e.event.identifier===((i=t.event)==null?void 0:i.identifier))}findItemIndex(e,t){return e?this.schedule.findItemIndex(e,t):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const t=this.schedule.items;if(!t)return;const i=Vt.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,t,e)}updateBufferedPos(e,t,i){const s=this.schedule,r=this.bufferingItem;if(this.bufferedPos>e)return;if(t.length===1&&this.itemsMatch(t[0],r)){this.bufferedPos=e;return}const a=this.playingItem,o=this.findItemIndex(a);let l=s.findItemIndexAtTime(e);if(this.bufferedPos<e){var c,u;const d=this.findItemIndex(r),h=Math.min(d+1,t.length-1),f=t[h];if((l===-1&&r&&e>=r.end||(c=f.event)!=null&&c.appendInPlace&&e+.01>=f.start)&&(l=h),h-o>1&&(r==null||(u=r.event)==null?void 0:u.appendInPlace)===!1)return;if(this.bufferedPos=e,l>d&&l>o)this.bufferedToItem(f);else{const p=this.primaryDetails;this.primaryLive&&p&&e>p.edge-p.targetduration&&f.start<p.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(f)&&this.preloadAssets(f.event,0)}}else i&&a&&!this.itemsMatch(a,r)&&(l===o?this.bufferedToItem(a):l===o+1&&this.bufferedToItem(t[l]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(s=>{const r=this.getAssetPlayer(s.identifier);return!(r!=null&&r.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,i=this.schedule;if(this.itemsMatch(e,t))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:s,events:r}=i;if(!s||!r)return t;const a=this.isInterstitial(e),o=this.getBufferingPlayer();if(this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos)),!this.playbackDisabled){const l=o?o.remaining:t?t.end-this.timelinePos:0;this.log(`buffered to boundary ${gl(e)}`+(t?` (${l.toFixed(2)} remaining)`:"")),a?e.event.assetList.forEach(c=>{const u=this.getAssetPlayer(c.identifier);u&&u.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering()))}this.hls.trigger(F.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:r.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return t}bufferedToItem(e,t=0){const i=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(i!==null){this.bufferingAsset=null;const s=this.detachedData;s?s.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),i=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,t){const i=e.event,s=i.assetList.length===0&&!i.assetListLoader,r=i.cue.once;if(s||!r){const a=this.preloadAssets(i,t);if(a!=null&&a.interstitial.appendInPlace){const o=i.assetList[t],l=this.primaryMedia;o&&l&&this.bufferAssetPlayer(a,l)}}}preloadAssets(e,t){const i=e.assetUrl,s=e.assetList.length,r=s===0&&!e.assetListLoader,a=e.cue.once;if(r){const l=e.timelineStart;if(e.appendInPlace){var o;const h=this.playingItem;!this.isInterstitial(h)&&(h==null||(o=h.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let c,u=0;if(!this.playingItem&&this.primaryLive&&(u=this.hls.startPosition,u===-1&&(u=this.hls.liveSyncPosition||0)),u&&!(e.cue.pre||e.cue.post)){const h=u-l;h>0&&(c=Math.round(h*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${i?1:s} ${e}${c?` live-start: ${u} start-offset: ${c}`:""}`),i)return this.createAsset(e,0,0,l,e.duration,i);const d=this.assetListLoader.loadAssetList(e,c);d&&(e.assetListLoader=d)}else if(!a&&s){for(let l=t;l<s;l++){const c=e.assetList[l],u=this.getAssetPlayerQueueIndex(c.identifier);(u===-1||this.playerQueue[u].destroyed)&&!c.error&&this.createAssetPlayer(e,c,l)}return this.getAssetPlayer(e.assetList[t].identifier)}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(s=>{this.hls.trigger(F.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:s})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let i=0;i<t.length;i++)if(e===t[i].assetId)return i;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let i=0;i<e.length;i++)if(e[i].media===t)return e[i]}return null}createAsset(e,t,i,s,r,a){const o={parentIdentifier:e.identifier,identifier:LQ(e,a,t),duration:r,startOffset:i,timelineStart:s,uri:a};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,i){this.log(`create HLSAssetPlayer for ${A2(t)}`);const s=this.hls,r=s.userConfig;let a=r.videoPreference;const o=s.loadLevelObj||s.levels[s.currentLevel];(a||o)&&(a=In({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));const l=s.audioTracks[s.audioTrack],c=s.subtitleTracks[s.subtitleTrack];let u=0;if(this.primaryLive||e.appendInPlace){const x=this.timelinePos-t.timelineStart;if(x>1){const _=t.duration;_&&x<_&&(u=x)}}const d=t.identifier,h=vn(vn({},r),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:u,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:l||r.audioPreference,subtitlePreference:c||r.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(h.timelineOffset=t.timelineStart));const f=h.cmcd;f!=null&&f.sessionId&&f.contentId&&(h.cmcd=In({},f,{contentId:Pf(t.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const p=new IQ(this.HlsPlayerClass,h,e,t);this.playerQueue.push(p),e.assetList[i]=t;const m=x=>{if(x.live){const C=new Error(`Interstitials MUST be VOD assets ${e}`),L={fatal:!0,type:ut.OTHER_ERROR,details:xe.INTERSTITIAL_ASSET_ITEM_ERROR,error:C};this.handleAssetItemError(L,e,this.schedule.findEventIndex(e.identifier),i,C.message);return}const _=x.edge-x.fragmentStart,T=t.duration;(T===null||_>T)&&(this.log(`Interstitial asset "${d}" duration change ${T} > ${_}`),t.duration=_,this.updateSchedule())};p.on(F.LEVEL_UPDATED,(x,{details:_})=>m(_)),p.on(F.LEVEL_PTS_UPDATED,(x,{details:_})=>m(_));const v=(x,_)=>{const T=this.getAssetPlayer(d);if(T&&_.tracks){T.off(F.BUFFER_CODECS,v),T.tracks=_.tracks;const C=this.primaryMedia;this.bufferingAsset===T.assetItem&&C&&!T.media&&this.bufferAssetPlayer(T,C)}};p.on(F.BUFFER_CODECS,v);const y=()=>{var x;const _=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${_}`),!_)return;const T=this.schedule.findEventIndex(e.identifier),C=e.findAssetIndex(t),L=C+1,k=(x=this.schedule.items)==null?void 0:x[T];if(this.isInterstitial(k))if(C!==-1&&!e.isAssetPastPlayoutLimit(L)&&!e.assetList[L].error)this.bufferedToItem(k,L);else{var M;const D=(M=this.schedule.items)==null?void 0:M[T+1];D&&this.bufferedToItem(D)}};p.on(F.BUFFERED_TO_END,y);const b=x=>()=>{if(!this.getAssetPlayer(d))return;this.shouldPlay=!0;const T=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,T,x)};return p.once(F.MEDIA_ENDED,b(i)),p.once(F.PLAYOUT_LIMIT_REACHED,b(1/0)),p.on(F.ERROR,(x,_)=>{const T=this.getAssetPlayer(d);if(_.details===xe.BUFFER_STALLED_ERROR){if(T!=null&&T.media){const C=T.currentTime,L=T.duration-C;C&&e.appendInPlace&&L/T.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${d} ${e} at ${T.media.currentTime}`),y()):(this.warn(`Stalled at ${C} of ${C+L} in asset ${d} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(_,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${_.error} ${e}`)}),p.on(F.DESTROYING,()=>{if(!this.getAssetPlayer(d))return;const _=new Error(`Asset player destroyed unexpectedly ${d}`),T={fatal:!0,type:ut.OTHER_ERROR,details:xe.INTERSTITIAL_ASSET_ITEM_ERROR,error:_};this.handleAssetItemError(T,e,this.schedule.findEventIndex(e.identifier),i,_.message)}),this.hls.trigger(F.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:i,event:e,player:p}),p}clearInterstitial(e,t){e.assetList.forEach(i=>{this.clearAssetPlayer(i.identifier,t)}),e.reset()}clearAssetPlayer(e,t){const i=this.getAssetPlayerQueueIndex(e);if(i!==-1){this.log(`clearAssetPlayer "${e}" toSegment: ${t&&gl(t)}`);const s=this.playerQueue[i];this.transferMediaFromPlayer(s,t),this.playerQueue.splice(i,1),s.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,i,s,r){const{interstitial:a,assetItem:o,assetId:l}=e,c=a.assetList.length,u=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!u||u.identifier!==l)&&(u&&(this.clearAssetPlayer(u.identifier,i[s]),delete u.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${c} ${e}`),this.hls.trigger(F.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:a,schedule:i.slice(0),scheduleIndex:s,player:e})),this.bufferAssetPlayer(e,r)}bufferAssetPlayer(e,t){var i,s;const{interstitial:r,assetItem:a,assetId:o}=e,l=this.schedule.findEventIndex(r.identifier),c=(i=this.schedule.items)==null?void 0:i[l];if(!c)return;this.setBufferingItem(c),this.bufferingAsset=a;const u=this.getBufferingPlayer();if(u===e)return;const d=r.appendInPlace;if(d&&(u==null?void 0:u.interstitial.appendInPlace)===!1)return;const h=(u==null?void 0:u.tracks)||((s=this.detachedData)==null?void 0:s.tracks)||this.requiredTracks;if(d&&a!==this.playingAsset){if(!e.tracks)return;if(h&&!CN(h,e.tracks)){const f=new Error(`Asset "${o}" SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),p={fatal:!0,type:ut.OTHER_ERROR,details:xe.INTERSTITIAL_ASSET_ITEM_ERROR,error:f},m=r.findAssetIndex(a);this.handleAssetItemError(p,r,l,m,f.message);return}}this.transferMediaTo(e,t)}handleAssetItemError(e,t,i,s,r){if(e.details===xe.BUFFER_STALLED_ERROR)return;const a=t.assetList[s]||null;let o=null;if(a){const d=this.getAssetPlayerQueueIndex(a.identifier);o=this.playerQueue[d]||null}const l=this.schedule.items,c=In({},e,{fatal:!1,errorAction:yp(!0),asset:a,assetListIndex:s,event:t,schedule:l,scheduleIndex:i,player:o});if(this.warn(`Asset item error: ${e.error}`),this.hls.trigger(F.INTERSTITIAL_ASSET_ERROR,c),!e.fatal)return;const u=new Error(r);a&&(this.playingAsset!==a&&this.clearAssetPlayer(a.identifier,null),a.error=u),t.assetList.some(d=>!d.error)?t.appendInPlace&&(t.error=u):t.error=u,this.primaryFallback(t)}primaryFallback(e){const t=e.timelineStart,i=this.effectivePlayingItem;if(this.updateSchedule(),i){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${i?gl(i):"<none>"} error: ${e.error}`),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t));let s=this.timelinePos;s===-1&&(s=this.hls.startPosition);const r=this.updateItem(i,s);if(this.itemsMatch(i,r))this.clearInterstitial(e,null);else{const a=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(a)}}else this.checkStart()}onAssetListLoaded(e,t){var i;const s=t.event,r=s.identifier,a=t.assetListResponse.ASSETS;if(!this.schedule.hasEvent(r))return;const o=s.timelineStart,l=s.duration;let c=0;a.forEach((p,m)=>{const v=parseFloat(p.DURATION);this.createAsset(s,m,c,o+c,v,p.URI),c+=v}),s.duration=c,this.log(`Loaded asset-list with duration: ${c} (was: ${l}) ${s}`);const u=this.waitingItem,d=(u==null?void 0:u.event.identifier)===r;this.updateSchedule();const h=(i=this.bufferingItem)==null?void 0:i.event;if(d){var f;const p=this.schedule.findEventIndex(r),m=(f=this.schedule.items)==null?void 0:f[p];if(m){if(!this.playingItem&&this.timelinePos>m.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==p){s.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${s}`),this.primaryFallback(s);return}this.setBufferingItem(m)}this.setSchedulePosition(p)}else if((h==null?void 0:h.identifier)===r&&h.appendInPlace){const p=s.assetList[0],m=this.getAssetPlayer(p.identifier),v=this.primaryMedia;p&&m&&v&&this.bufferAssetPlayer(m,v)}}onError(e,t){switch(t.details){case xe.ASSET_LIST_PARSING_ERROR:case xe.ASSET_LIST_LOAD_ERROR:case xe.ASSET_LIST_LOAD_TIMEOUT:{const i=t.interstitial;i&&this.primaryFallback(i);break}case xe.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const gL=500;class DQ extends Fw{constructor(e,t,i){super(e,t,i,"subtitle-stream-controller",lt.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(F.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(F.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(F.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(F.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(F.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(F.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Le.IDLE,this.setInterval(gL),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:s}=t;if(is(i)&&(this.fragPrevious=i),this.state=Le.IDLE,!s)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let a;const o=i.start;for(let c=0;c<r.length;c++)if(o>=r[c].start&&o<=r[c].end){a=r[c];break}const l=i.start+i.duration;a?a.end=l:(a={start:o,end:l},r.push(a)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:i,endOffset:s}=t;if(i===0&&s!==Number.POSITIVE_INFINITY){const r=s-1;if(r<=0)return;t.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=r){a.shift();continue}else if(a[o].start<r)a[o].start=r;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(i,r,lt.SUBTITLE)}}onError(e,t){const i=t.frag;(i==null?void 0:i.type)===lt.SUBTITLE&&(t.details===xe.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Le.STOPPED&&(this.state=Le.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&kD(this.levels,t)){this.levels=t.map(i=>new mp(i));return}this.tracksBuffered=[],this.levels=t.map(i=>{const s=new mp(i);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,lt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==Le.STOPPED&&this.setInterval(gL)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:s,levels:r}=this,{details:a,id:o}=t;if(!r){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=r[o];if(o>=r.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(a.live||(i=l.details)!=null&&i.live){const d=this.mainDetails;if(a.deltaUpdateFailed||!d)return;const h=d.fragments[0];if(!l.details)a.hasProgramDateTime&&d.hasProgramDateTime?(iy(a,d),c=a.fragmentStart):h&&(c=h.start,x2(a,c));else{var u;c=this.alignPlaylists(a,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&h&&(c=h.start,x2(a,c))}}l.details=a,this.levelLastLoaded=l,o===s&&(this.hls.trigger(F.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Le.IDLE&&(uu(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,s=t.decryptdata,r=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&s!=null&&s.key&&s.iv&&Ad(s.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(i),s.key.buffer,s.iv.buffer,Ow(s.method)).catch(o=>{throw r.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const l=performance.now();r.trigger(F.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=Le.IDLE})}}doTick(){if(!this.media){this.state=Le.IDLE;return}if(this.state===Le.IDLE){const{currentTrackId:e,levels:t}=this,i=t==null?void 0:t[e];if(!i||!t.length||!i.details||this.waitForLive(i))return;const{config:s}=this,r=this.getLoadPosition(),a=Vt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,s.maxBufferHole),{end:o,len:l}=a,c=i.details,u=this.hls.maxBufferLength+c.levelTargetDuration;if(l>u)return;const d=c.fragments,h=d.length,f=c.edge;let p=null;const m=this.fragPrevious;if(o<f){const b=s.maxFragLookUpTolerance,x=o>f-b?0:b;p=uu(m,d,Math.max(d[0].start,o),x),!p&&m&&m.start<d[0].start&&(p=d[0])}else p=d[h-1];if(p=this.filterReplacedPrimary(p,i.details),!p)return;const v=p.sn-c.startSN,y=d[v-1];if(y&&y.cc===p.cc&&this.fragmentTracker.getState(y)===Gi.NOT_LOADED&&(p=y),this.fragmentTracker.getState(p)===Gi.NOT_LOADED){const b=this.mapToInitFragWhenRequired(p);b&&this.loadFragment(b,i,o)}}}loadFragment(e,t,i){is(e)?super.loadFragment(e,t,i):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new OQ(this.tracksBuffered[this.currentTrackId]||[])}}class OQ{constructor(e){this.buffered=void 0;const t=(i,s,r)=>{if(s=s>>>0,s>r-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${r})`);return e[s][i]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}const MQ={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},jD=n=>String.fromCharCode(MQ[n]||n),sa=15,mo=100,FQ={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},jQ={17:2,18:4,21:6,22:8,23:10,19:13,20:15},BQ={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},UQ={25:2,26:4,29:6,30:8,31:10,27:13,28:15},$Q=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class HQ{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i=typeof t=="function"?t():t;an.log(`${this.time} [${e}] ${i}`)}}}const Tc=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class BD{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const s=t[i];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class zQ{constructor(){this.uchar=" ",this.penState=new BD}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class WQ{constructor(e){this.chars=[],this.pos=0,this.currPenState=new BD,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<mo;t++)this.chars.push(new zQ);this.logger=e}equals(e){for(let t=0;t<mo;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<mo;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<mo;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>mo&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=mo)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=jD(e);if(this.pos>=mo){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<mo;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<mo;i++){const s=this.chars[i].uchar;s!==" "&&(t=!1),e.push(s)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class fx{constructor(e){this.rows=[],this.currRow=sa-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<sa;t++)this.rows.push(new WQ(e));this.logger=e}reset(){for(let e=0;e<sa;e++)this.rows[e].clear();this.currRow=sa-1}equals(e){let t=!0;for(let i=0;i<sa;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<sa;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<sa;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+ni(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<sa;o++)this.rows[o].clear();const r=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[r].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(a.rows[r+c])}}this.currRow=t;const i=this.rows[this.currRow];if(e.indent!==null){const r=e.indent,a=Math.max(r-1,0);i.setCursor(e.indent),e.color=i.chars[a].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+ni(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",s=-1;for(let r=0;r<sa;r++){const a=this.rows[r].getTextString();a&&(s=r+1,e?t.push("Row "+s+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?i="["+t.join(" | ")+"]":i=t.join(`
`)),i}getTextAndFormat(){return this.rows}}class mL{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new fx(i),this.nonDisplayedMemory=new fx(i),this.lastOutputScreen=new fx(i),this.currRollUpRow=this.displayedMemory.rows[sa-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[sa-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=s[i]}this.logger.log(2,"MIDROW: "+ni(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class yL{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=GQ(),this.logger=void 0;const s=this.logger=new HQ;this.channels=[null,new mL(e,t,s),new mL(e+1,i,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const s=t[i]&127,r=t[i+1]&127;let a=!1,o=null;if(s===0&&r===0)continue;this.logger.log(3,()=>"["+Tc([t[i],t[i+1]])+"] -> ("+Tc([s,r])+")");const l=this.cmdHistory;if(s>=16&&s<=31){if(VQ(s,r,l)){wm(null,null,l),this.logger.log(3,()=>"Repeated command ("+Tc([s,r])+") is dropped");continue}wm(s,r,this.cmdHistory),a=this.parseCmd(s,r),a||(a=this.parseMidrow(s,r)),a||(a=this.parsePAC(s,r)),a||(a=this.parseBackgroundAttributes(s,r))}else wm(null,null,l);if(!a&&(o=this.parseChars(s,r),o)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Tc([s,r])+" orig: "+Tc([t[i],t[i+1]]))}}parseCmd(e,t){const i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=33&&t<=35;if(!(i||s))return!1;const r=e===20||e===21||e===23?1:2,a=this.channels[r];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=r,!0}parseMidrow(e,t){let i=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[i];return s?(s.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+Tc([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let i;const s=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,r=(e===16||e===24)&&t>=64&&t<=95;if(!(s||r))return!1;const a=e<=23?1:2;t>=64&&t<=95?i=a===1?FQ[e]:BQ[e]:i=a===1?jQ[e]:UQ[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(i,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let i;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?i=t-96:i=t-64,s.underline=(i&1)===1,i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((i-16)/2)*4,s}parseChars(e,t){let i,s=null,r=null;if(e>=25?(i=2,r=e-8):(i=1,r=e),r>=17&&r<=19){let a;r===17?a=t+80:r===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+jD(a)+"' in channel "+i),s=[a]}else e>=32&&e<=127&&(s=t===0?[e]:[e,t]);return s&&this.logger.log(3,()=>"Char codes =  "+Tc(s).join(",")),s}parseBackgroundAttributes(e,t){const i=(e===16||e===24)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=45&&t<=47;if(!(i||s))return!1;let r;const a={};e===16||e===24?(r=Math.floor((t-32)/2),a.background=$Q[r],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}wm(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function wm(n,e,t){t.a=n,t.b=e}function VQ(n,e,t){return t.a===n&&t.b===e}function GQ(){return{a:null,b:null}}var qw=function(){if(ny!=null&&ny.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const c=l.toLowerCase();return~o.indexOf(c)?c:!1}function i(o){return t(n,o)}function s(o){return t(e,o)}function r(o,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const d in u)o[d]=u[d]}return o}function a(o,l,c){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let h="",f=!1,p=o,m=l,v=c,y=null,b="",x=!0,_="auto",T="start",C=50,L="middle",k=50,M="middle";Object.defineProperty(u,"id",r({},d,{get:function(){return h},set:function(D){h=""+D}})),Object.defineProperty(u,"pauseOnExit",r({},d,{get:function(){return f},set:function(D){f=!!D}})),Object.defineProperty(u,"startTime",r({},d,{get:function(){return p},set:function(D){if(typeof D!="number")throw new TypeError("Start time must be set to a number.");p=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",r({},d,{get:function(){return m},set:function(D){if(typeof D!="number")throw new TypeError("End time must be set to a number.");m=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",r({},d,{get:function(){return v},set:function(D){v=""+D,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",r({},d,{get:function(){return y},set:function(D){y=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",r({},d,{get:function(){return b},set:function(D){const I=i(D);if(I===!1)throw new SyntaxError("An invalid or illegal string was specified.");b=I,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",r({},d,{get:function(){return x},set:function(D){x=!!D,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",r({},d,{get:function(){return _},set:function(D){if(typeof D!="number"&&D!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");_=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",r({},d,{get:function(){return T},set:function(D){const I=s(D);if(!I)throw new SyntaxError("An invalid or illegal string was specified.");T=I,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",r({},d,{get:function(){return C},set:function(D){if(D<0||D>100)throw new Error("Position must be between 0 and 100.");C=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",r({},d,{get:function(){return L},set:function(D){const I=s(D);if(!I)throw new SyntaxError("An invalid or illegal string was specified.");L=I,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",r({},d,{get:function(){return k},set:function(D){if(D<0||D>100)throw new Error("Size must be between 0 and 100.");k=D,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",r({},d,{get:function(){return M},set:function(D){const I=s(D);if(!I)throw new SyntaxError("An invalid or illegal string was specified.");M=I,this.hasBeenReset=!0}})),u.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class YQ{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function UD(n){function e(i,s,r,a){return(i|0)*3600+(s|0)*60+(r|0)+parseFloat(a||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class qQ{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let s=0;s<i.length;++s)if(t===i[s]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function $D(n,e,t,i){const s=i?n.split(i):[n];for(const r in s){if(typeof s[r]!="string")continue;const a=s[r].split(t);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const L2=new qw(0,0,""),_m=L2.align==="middle"?"middle":"center";function KQ(n,e,t){const i=n;function s(){const o=UD(n);if(o===null)throw new Error("Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function r(o,l){const c=new qQ;$D(o,function(h,f){let p;switch(h){case"region":for(let m=t.length-1;m>=0;m--)if(t[m].id===f){c.set(h,t[m].region);break}break;case"vertical":c.alt(h,f,["rl","lr"]);break;case"line":p=f.split(","),c.integer(h,p[0]),c.percent(h,p[0])&&c.set("snapToLines",!1),c.alt(h,p[0],["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start",_m,"end"]);break;case"position":p=f.split(","),c.percent(h,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start",_m,"end","line-left","line-right","auto"]);break;case"size":c.percent(h,f);break;case"align":c.alt(h,f,["start",_m,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&L2.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",_m);let d=c.get("position","auto");d==="auto"&&L2.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=s(),a(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.slice(3),a(),e.endTime=s(),a(),r(n,e)}function HD(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class XQ{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new YQ,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function i(){let r=t.buffer,a=0;for(r=HD(r);a<r.length&&r[a]!=="\r"&&r[a]!==`
`;)++a;const o=r.slice(0,a);return r[a]==="\r"&&++a,r[a]===`
`&&++a,t.buffer=r.slice(a),o}function s(r){$D(r,function(a,o){},/:/)}try{let r="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;r=i();const o=r.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:r=i(),t.state){case"HEADER":/:/.test(r)?s(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new qw(0,0,""),t.state="CUE",r.indexOf("-->")===-1){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{KQ(r,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=r.indexOf("-->")!==-1;if(!r||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=r}continue;case"BADCUE":r||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const QQ=/\r\n|\n\r|\n|\r/g,px=function(e,t,i=0){return e.slice(i,i+t.length)===t},JQ=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Je(t)||!Je(i)||!Je(s)||!Je(r))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=60*1e3*s,t+=60*60*1e3*r,t};function Kw(n,e,t){return Pf(n.toString())+Pf(e.toString())+Pf(t)}const ZQ=function(e,t,i){let s=e[t],r=e[s.prevCC];if(!r||!r.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(a=r)!=null&&a.new;){var a;e.ccOffset+=s.start-r.start,s.new=!1,s=r,r=e[s.prevCC]}e.presentationOffset=i};function eJ(n,e,t,i,s,r,a){const o=new XQ,l=_r(new Uint8Array(n)).trim().replace(QQ,`
`).split(`
`),c=[],u=e?vX(e.baseTime,e.timescale):0;let d="00:00.000",h=0,f=0,p,m=!0;o.oncue=function(v){const y=t[i];let b=t.ccOffset;const x=(h-u)/9e4;if(y!=null&&y.new&&(f!==void 0?b=t.ccOffset=y.start:ZQ(t,i,x)),x){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}b=x-t.presentationOffset}const _=v.endTime-v.startTime,T=jr((v.startTime+b-f)*9e4,s*9e4)/9e4;v.startTime=Math.max(T,0),v.endTime=Math.max(T+_,0);const C=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(C)),v.id||(v.id=Kw(v.startTime,v.endTime,C)),v.endTime>0&&c.push(v)},o.onparsingerror=function(v){p=v},o.onflush=function(){if(p){a(p);return}r(c)},l.forEach(v=>{if(m)if(px(v,"X-TIMESTAMP-MAP=")){m=!1,v.slice(16).split(",").forEach(y=>{px(y,"LOCAL:")?d=y.slice(6):px(y,"MPEGTS:")&&(h=parseInt(y.slice(7)))});try{f=JQ(d)/1e3}catch(y){p=y}return}else v===""&&(m=!1);o.parse(v+`
`)}),o.flush()}const gx="stpp.ttml.im1t",zD=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,WD=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,tJ={left:"start",center:"center",right:"end",start:"start",end:"end"};function vL(n,e,t,i){const s=Ot(new Uint8Array(n),["mdat"]);if(s.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const r=s.map(o=>_r(o)),a=yX(e.baseTime,1,e.timescale);try{r.forEach(o=>t(nJ(o,a)))}catch(o){i(o)}}function nJ(n,e){const s=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(r).reduce((d,h)=>(d[h]=s.getAttribute(`ttp:${h}`)||r[h],d),{}),o=s.getAttribute("xml:space")!=="preserve",l=xL(mx(s,"styling","style")),c=xL(mx(s,"layout","region")),u=mx(s,"body","[begin]");return[].map.call(u,d=>{const h=VD(d,o);if(!h||!d.hasAttribute("begin"))return null;const f=vx(d.getAttribute("begin"),a),p=vx(d.getAttribute("dur"),a);let m=vx(d.getAttribute("end"),a);if(f===null)throw bL(d);if(m===null){if(p===null)throw bL(d);m=f+p}const v=new qw(f-e,m-e,h);v.id=Kw(v.startTime,v.endTime,v.text);const y=c[d.getAttribute("region")],b=l[d.getAttribute("style")],x=iJ(y,b,l),{textAlign:_}=x;if(_){const T=tJ[_];T&&(v.lineAlign=T),v.align=_}return In(v,x),v}).filter(d=>d!==null)}function mx(n,e,t){const i=n.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function xL(n){return n.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function VD(n,e){return[].slice.call(n.childNodes).reduce((t,i,s)=>{var r;return i.nodeName==="br"&&s?t+`
`:(r=i.childNodes)!=null&&r.length?VD(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function iJ(n,e,t){const i="http://www.w3.org/ns/ttml#styling";let s=null;const r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(s=t[a]),r.reduce((o,l)=>{const c=yx(e,i,l)||yx(n,i,l)||yx(s,i,l);return c&&(o[l]=c),o},{})}function yx(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function bL(n){return new Error(`Could not parse ttml timestamp ${n}`)}function vx(n,e){if(!n)return null;let t=UD(n);return t===null&&(zD.test(n)?t=sJ(n,e):WD.test(n)&&(t=rJ(n,e))),t}function sJ(n,e){const t=zD.exec(n),i=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+i/e.frameRate}function rJ(n,e){const t=WD.exec(n),i=Number(t[1]);switch(t[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class Em{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class aJ{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=wL(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(F.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(F.FRAG_LOADING,this.onFragLoading,this),e.on(F.FRAG_LOADED,this.onFragLoaded,this),e.on(F.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(F.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(F.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(F.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(F.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(F.FRAG_LOADING,this.onFragLoading,this),e.off(F.FRAG_LOADED,this.onFragLoaded,this),e.off(F.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(F.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(F.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(F.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Em(this,"textTrack1"),t=new Em(this,"textTrack2"),i=new Em(this,"textTrack3"),s=new Em(this,"textTrack4");this.cea608Parser1=new yL(1,e,t),this.cea608Parser2=new yL(3,i,s)}addCues(e,t,i,s,r){let a=!1;for(let o=r.length;o--;){const l=r[o],c=oJ(l[0],l[1],t,i);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],i),a=!0,c/(i-t)>.5))return}if(a||r.push([t,i]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,i,s)}else{const o=this.Cues.newCue(null,t,i,s);this.hls.trigger(F.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:r}){const{unparsedVttFrags:a}=this;i===lt.MAIN&&(this.initPTS[t.cc]={baseTime:s,timescale:r}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.onFragLoaded(F.FRAG_LOADED,o)}))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let s=0;s<i.textTracks.length;s++){const r=i.textTracks[s];if(SL(r,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:s}=this,{label:r,languageCode:a}=t[e],o=this.getExistingTrack(r,a);if(o)i[e]=o,gd(i[e]),OD(i[e],s);else{const l=this.createTextTrack("captions",r,a);l&&(l[e]=!0,i[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,s={_id:e,label:i,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(F.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,t,i){const s=this.media;if(s)return s.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const i=!!t.transferMedia;if(this.media=null,i)return;const{captionsTracks:s}=this;Object.keys(s).forEach(r=>{gd(s[r]),delete s[r]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=wL(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)gd(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],s=i.some(r=>r.textCodec===gx);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(kD(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const a=this.media,o=a?t0(a.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(o){let d=null;for(let h=0;h<o.length;h++)if(o[h]&&SL(o[h],l)){d=o[h],o[h]=null;break}d&&(u=d)}if(u)gd(u);else{const d=GD(l);u=this.createTextTrack(d,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),o!=null&&o.length){const l=o.filter(c=>c!==null).map(c=>c.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(F.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{const s=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!s)return;const r=`textTrack${s[1]}`,a=this.captionsProperties[r];a&&(a.label=i.name,i.lang&&(a.languageCode=i.lang),a.media=i)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===lt.MAIN){var i,s;const{cea608Parser1:r,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:c}=t.frag,u=(i=(s=t.part)==null?void 0:s.index)!=null?i:-1;r&&a&&(c!==o+1||c===o&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(r.reset(),a.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,t){const{frag:i,payload:s}=t;if(i.type===lt.SUBTITLE)if(s.byteLength){const r=i.decryptdata,a="stats"in t;if(r==null||!r.encrypted||a){const o=this.tracks[i.level],l=this.vttCCs;l[i.cc]||(l[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),o&&o.textCodec===gx?this._parseIMSC1(i,s):this._parseVTTs(t)}}else this.hls.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;vL(t,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),i.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{i.logger.log(`Failed to parse IMSC1: ${s}`),i.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var t;const{frag:i,payload:s}=e,{initPTS:r,unparsedVttFrags:a}=this,o=r.length-1;if(!r[i.cc]&&o===-1){a.push(e);return}const l=this.hls,c=(t=i.initSegment)!=null&&t.data?Yr(i.initSegment.data,new Uint8Array(s)).buffer:s;eJ(c,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,u=>{this._appendCues(u,i.level),l.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(i,s),l.logger.log(`Failed to parse VTT cue: ${u}`),!(d&&o>i.cc)&&l.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:u})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||vL(t,this.initPTS[e.cc],()=>{i.textCodec=gx,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[t];if(!s||s.mode==="disabled")return;e.forEach(r=>MD(s,r))}else{const s=this.tracks[t];if(!s)return;const r=s.default?"default":"subtitles"+t;i.trigger(F.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===lt.SUBTITLE&&this.onFragLoaded(F.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:i,samples:s}=t;if(!(i.type===lt.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let r=0;r<s.length;r++){const a=s[r].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(a);this.cea608Parser1.addData(s[r].pts,o[0]),this.cea608Parser2.addData(s[r].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:s,type:r}){const{media:a}=this;if(!(!a||a.currentTime<i)){if(!r||r==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>T2(o[l],t,i))}if(this.config.renderTextTracksNatively&&t===0&&s!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>T2(o[l],t,s))}}}extractCea608Data(e){const t=[[],[]],i=e[0]&31;let s=2;for(let r=0;r<i;r++){const a=e[s++],o=127&e[s++],l=127&e[s++];if(o===0&&l===0)continue;if((4&a)!==0){const u=3&a;(u===0||u===1)&&(t[u].push(o),t[u].push(l))}}return t}}function GD(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function SL(n,e){return!!n&&n.kind===GD(e)&&w2(e,n)}function oJ(n,e,t,i){return Math.min(e,i)-Math.max(n,t)}function wL(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const lJ=/\s/,cJ={newCue(n,e,t,i){const s=[];let r,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<i.rows.length;h++)if(r=i.rows[h],o=!0,l=0,c="",!r.isEmpty()){var d;for(let m=0;m<r.chars.length;m++)lJ.test(r.chars[m].uchar)&&o?l++:(c+=r.chars[m].uchar,o=!1);r.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const f=HD(c.trim()),p=Kw(e,t,f);n!=null&&(d=n.cues)!=null&&d.getCueById(p)||(a=new u(e,t,f),a.id=p,a.line=h+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),s.push(a))}return n&&s.length&&(s.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),s.forEach(h=>MD(n,h))),s}};function uJ(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const dJ=/(\d+)-(\d+)\/(\d+)/;class _L{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||gJ,this.controller=new self.AbortController,this.stats=new Cw}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const r=hJ(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),t.timeout=l&&Je(l)?l:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},t.timeout),(Sp(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var h;this.response=this.loader=d;const f=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},c-(f-s.loading.start)),!d.ok){const{status:m,statusText:v}=d;throw new mJ(v||"fetch, bad network response",m,d)}s.loading.first=f,s.total=pJ(d.headers)||s.total;const p=(h=this.callbacks)==null?void 0:h.onProgress;return p&&Je(t.highWaterMark)?this.loadProgressively(d,s,e,t.highWaterMark,p):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var h,f;const p=this.response;if(!p)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const m=d[o];m&&(s.loaded=s.total=m);const v={url:p.url,data:d,code:p.status},y=(h=this.callbacks)==null?void 0:h.onProgress;y&&!Je(t.highWaterMark)&&y(s,e,d,p),(f=this.callbacks)==null||f.onSuccess(v,s,e,p)}).catch(d=>{var h;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const f=d&&d.code||0,p=d?d.message:null;(h=this.callbacks)==null||h.onError({code:f,text:p},e,d?d.details:null,s)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,s=0,r){const a=new oD,o=e.body.getReader(),l=()=>o.read().then(c=>{if(c.done)return a.dataLength&&r(t,i,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const u=c.value,d=u.length;return t.loaded+=d,d<s||a.dataLength?(a.push(u),a.dataLength>=s&&r(t,i,a.flush().buffer,e)):r(t,i,u.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function hJ(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(In({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function fJ(n){const e=dJ.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function pJ(n){const e=n.get("Content-Range");if(e){const i=fJ(e);if(Je(i))return i}const t=n.get("Content-Length");if(t)return parseInt(t)}function gJ(n,e){return new self.Request(n.url,e)}class mJ extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const yJ=/^age:\s*[\d.]+\s*$/im;class YD{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Cw,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return r(i,t.url)}).catch(a=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",t.url,!0),r(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:i.status,text:a.message},t,i,s)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const s=t.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:a}=i.loadPolicy;if(s)for(const o in s)e.setRequestHeader(o,s[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=r&&Je(r)?r:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const s=t.readyState,r=this.config;if(!i.aborted&&s>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const c=t.status,u=t.responseType==="text"?t.responseText:null;if(c>=200&&c<300){const p=u??t.response;if(p!=null){var a,o;i.loading.end=Math.max(self.performance.now(),i.loading.first);const m=t.responseType==="arraybuffer"?p.byteLength:p.length;i.loaded=i.total=m,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first);const v=(a=this.callbacks)==null?void 0:a.onProgress;v&&v(i,e,p,t);const y={url:t.responseURL,data:p,code:c};(o=this.callbacks)==null||o.onSuccess(y,i,e,t);return}}const d=r.loadPolicy.errorRetry,h=i.retry,f={url:e.url,data:void 0,code:c};if(ty(d,h,!1,f))this.retry(d);else{var l;an.error(`${c} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:c,text:t.statusText},e,t,i)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(ty(e,t,!0))this.retry(e);else{var i;an.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=Pw(e,i.retry),i.retry++,an.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&yJ.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const vJ={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},xJ=vn(vn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:YD,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:$q,bufferController:NX,capLevelController:Gw,errorController:Yq,fpsController:_Q,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:XN,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,certLoadPolicy:{default:vJ},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},bJ()),{},{subtitleStreamController:DQ,subtitleTrackController:AQ,timelineController:aJ,audioStreamController:CX,audioTrackController:IX,emeController:Ld,cmcdController:bQ,contentSteeringController:wQ,interstitialsController:NQ});function bJ(){return{cueHandler:cJ,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function SJ(n,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=k2(n),s=["manifest","level","frag"],r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(a=>{const o=`${a==="level"?"playlist":a}LoadPolicy`,l=e[o]===void 0,c=[];r.forEach(u=>{const d=`${a}Loading${u}`,h=e[d];if(h!==void 0&&l){c.push(d);const f=i[o].default;switch(e[o]={default:f},u){case"TimeOut":f.maxLoadTimeMs=h,f.maxTimeToFirstByteMs=h;break;case"MaxRetry":f.errorRetry.maxNumRetry=h,f.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":f.errorRetry.retryDelayMs=h,f.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=h,f.timeoutRetry.maxRetryDelayMs=h;break}}}),c.length&&t.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${o}": ${ni(e[o])}`)}),vn(vn({},i),e)}function k2(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(k2):Object.keys(n).reduce((e,t)=>(e[t]=k2(n[t]),e),{}):n}function wJ(n,e){const t=n.loader;t!==_L&&t!==YD?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):uJ()&&(n.loader=_L,n.progressive=!0,n.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const n0=2,_J=.1,EJ=.05,TJ=100;class AJ extends YN{constructor(e,t){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var i;(i=this.media)!=null&&i.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var i;this.ended=((i=this.media)==null?void 0:i.currentTime)||1,this.hls.trigger(F.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(TJ),this.mediaSource=t.mediaSource;const i=this.media=t.media;Do(i,"playing",this.onMediaPlaying),Do(i,"waiting",this.onMediaWaiting),Do(i,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:i}=this;i&&(Wa(i,"playing",this.onMediaPlaying),Wa(i,"waiting",this.onMediaWaiting),Wa(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var i,s;const r=(i=this.hls)==null?void 0:i.config;if(!r)return;const{media:a,stalled:o}=this;if(!a)return;const{seeking:l}=a,c=this.seeking&&!l,u=!this.seeking&&l,d=a.paused&&!l||a.ended||a.playbackRate===0;if(this.seeking=l,e!==t){t&&(this.ended=0),this.moved=!0,l||(this.nudgeRetry=0,r.nudgeOnVideoHole&&!d&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(u||c){c&&this.stallResolved(e);return}if(d){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(F.MEDIA_ENDED,{stalled:!1}));return}if(!Vt.getBuffered(a).length){this.nudgeRetry=0;return}const h=Vt.bufferInfo(a,e,0),f=h.nextStart||0,p=this.fragmentTracker;if(l&&p&&this.hls){const C=EL(this.hls.inFlightFragments,e),L=h.len>n0,k=!f||C||f-e>n0&&!p.getPartialFragment(e);if(L||k)return;this.moved=!1}const m=(s=this.hls)==null?void 0:s.latestLevelDetails;if(!this.moved&&this.stalled!==null&&p){if(!(h.len>0)&&!f)return;const L=Math.max(f,h.start||0)-e,M=!!(m!=null&&m.live)?m.targetduration*2:n0,D=p.getPartialFragment(e);if(L>0&&(L<=M||D)){a.paused||this._trySkipBufferHole(D);return}}const v=r.detectStallWithCurrentTimeMs,y=self.performance.now(),b=this.waiting;if(o===null){b>0&&y-b<v?this.stalled=b:this.stalled=y;return}const x=y-o;if(!l&&(x>=v||b)&&this.hls){var _;if(((_=this.mediaSource)==null?void 0:_.readyState)==="ended"&&!(m!=null&&m.live)&&Math.abs(e-((m==null?void 0:m.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(F.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(h),!this.media||!this.hls)return}const T=Vt.bufferInfo(a,e,r.maxBufferHole);this._tryFixBufferStall(T,x)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const i=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(F.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var i;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(i=this.buffered.audio)!=null&&i.length&&s&&s.length>1&&e>s.end(0)){const r=Vt.bufferedInfo(Vt.timeRangesToArray(this.buffered.audio),e,0);if(r.len>1&&t>=r.start){const a=Vt.timeRangesToArray(s),o=Vt.bufferedInfo(a,t,0).bufferedIndex;if(o>-1&&o<a.length-1){const l=Vt.bufferedInfo(a,e,0).bufferedIndex,c=a[o].end,u=a[o+1].start;if((l===-1||l>o)&&u-c<1&&e-c<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${u} buffered index: ${l}`);this.warn(d.message),this.media.currentTime+=1e-6;const h=this.fragmentTracker.getPartialFragment(e)||void 0,f=Vt.bufferInfo(this.media,e,0);this.hls.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:h,buffer:f.len,bufferInfo:f})}}}}}_tryFixBufferStall(e,t){var i,s;const{fragmentTracker:r,media:a}=this,o=(i=this.hls)==null?void 0:i.config;if(!a||!r||!o)return;const l=a.currentTime,c=(s=this.hls)==null?void 0:s.latestLevelDetails,u=r.getPartialFragment(l);if((u||c!=null&&c.live&&l<c.fragmentStart)&&(this._trySkipBufferHole(u)||!this.media))return;const d=e.buffered;(d&&d.length>1&&e.len>o.maxBufferHole||e.nextStart&&e.nextStart-l<o.maxBufferHole)&&(t>o.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}_reportStall(e){const{hls:t,media:i,stallReported:s,stalled:r}=this;if(!s&&r!==null&&i&&t){this.stallReported=!0;const a=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${ni(e)})`);this.warn(a.message),t.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:r}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:i,media:s}=this,r=(t=this.hls)==null?void 0:t.config;if(!s||!i||!r)return 0;const a=s.currentTime,o=Vt.bufferInfo(s,a,0),l=a<o.start?o.start:o.nextStart;if(l&&this.hls){const u=o.len<=r.maxBufferHole,d=o.len>0&&o.len<1&&s.readyState<3,h=l-a;if(h>0&&(u||d)){if(h>r.maxBufferHole){let p=!1;if(a===0){const m=i.getAppendedFrag(0,lt.MAIN);m&&l<m.end&&(p=!0)}if(!p){const m=e||i.getAppendedFrag(a,lt.MAIN);if(m){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||EL(this.hls.inFlightFragments,l))return 0;let y=!1,b=m.end;for(;b<l;){const x=i.getPartialFragment(b);if(x)b+=x.duration;else{y=!0;break}}if(y)return 0}}}const f=Math.max(l+EJ,a+_J);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${f}`),this.moved=!0,s.currentTime=f,!(e!=null&&e.gap)){const p=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${f}`);this.hls.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,frag:e||void 0,buffer:o.len,bufferInfo:o})}return f}}return 0}_tryNudgeBuffer(e){const{hls:t,media:i,nudgeRetry:s}=this,r=t==null?void 0:t.config;if(!i||!r)return 0;const a=i.currentTime;if(this.nudgeRetry++,s<r.nudgeMaxRetry){const o=a+(s+1)*r.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(l.message),i.currentTime=o,t.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${a} after ${r.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function EL(n,e){const t=TL(n.main);if(t&&t.start<=e)return t;const i=TL(n.audio);return i&&i.start<=e?i:null}function TL(n){if(!n)return null;switch(n.state){case Le.IDLE:case Le.STOPPED:case Le.ENDED:case Le.ERROR:return null}return n.frag}const LJ=.25;function C2(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function AL(n,e,t,i,s){let r=new n(e,t,"");try{r.value=i,s&&(r.type=s)}catch{r=new n(e,t,ni(s?vn({type:s},i):i))}return r}const Tm=(()=>{const n=C2();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function kJ(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class CJ{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(F.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(F.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(F.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,t){var i;this.media=t.media,((i=t.overrides)==null?void 0:i.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&gd(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if(i.kind==="metadata"&&i.label==="id3")return OD(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:i,enableID3MetadataCues:s}}}=this;if(!i&&!s)return;const{samples:r}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=C2();if(a)for(let o=0;o<r.length;o++){const l=r[o].type;if(l===vr.emsg&&!i||!s)continue;const c=gD(r[o].data);if(c){const u=r[o].pts;let d=u+r[o].duration;d>Tm&&(d=Tm),d-u<=0&&(d=u+LJ);for(let f=0;f<c.length;f++){const p=c[f];if(!mD(p)){this.updateId3CueEnds(u,l);const m=AL(a,u,d,p,l);m&&this.id3Track.addCue(m)}}}}}updateId3CueEnds(e,t){var i;const s=(i=this.id3Track)==null?void 0:i.cues;if(s)for(let r=s.length;r--;){const a=s[r];a.type===t&&a.startTime<e&&a.endTime===Tm&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:s}){const{id3Track:r,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(r&&(o||l)){let c;s==="audio"?c=u=>u.type===vr.audioId3&&l:s==="video"?c=u=>u.type===vr.emsg&&o:c=u=>u.type===vr.audioId3&&l||u.type===vr.emsg&&o,T2(r,t,i,c)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:i}=this,{dateRanges:s}=e,r=Object.keys(s);let a=this.dateRangeCuesAppended;if(i&&t){var o;if((o=i.cues)!=null&&o.length){const u=Object.keys(a).filter(d=>!r.includes(d));for(let d=u.length;d--;){const h=u[d],f=a[h].cues;delete a[h],Object.keys(f).forEach(p=>{try{const m=f[p];m.removeEventListener("enter",this.onEventCueEnter),i.removeCue(m)}catch{}})}}else a=this.dateRangeCuesAppended={}}const l=e.fragments[e.fragments.length-1];if(r.length===0||!Je(l==null?void 0:l.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const c=C2();for(let u=0;u<r.length;u++){const d=r[u],h=s[d],f=h.startTime,p=a[d],m=(p==null?void 0:p.cues)||{};let v=(p==null?void 0:p.durationKnown)||!1,y=Tm;const{duration:b,endDate:x}=h;if(x&&b!==null)y=f+b,v=!0;else if(h.endOnNext&&!v){const T=r.reduce((C,L)=>{if(L!==h.id){const k=s[L];if(k.class===h.class&&k.startDate>h.startDate&&(!C||h.startDate<C.startDate))return k}return C},null);T&&(y=T.startTime,v=!0)}const _=Object.keys(h.attr);for(let T=0;T<_.length;T++){const C=_[T];if(!aK(C))continue;const L=m[C];if(L)v&&!p.durationKnown?L.endTime=y:Math.abs(L.startTime-f)>.01&&(L.startTime=f,L.endTime=y);else if(c){let k=h.attr[C];oK(C)&&(k=kJ(k));const D=AL(c,f,y,{key:C,data:k},vr.dateRange);D&&(D.id=d,this.id3Track.addCue(D),m[C]=D,this.hls.config.interstitialsController&&(C==="X-ASSET-LIST"||C==="X-ASSET-URL")&&D.addEventListener("enter",this.onEventCueEnter))}}a[d]={cues:m,dateRange:h,durationKnown:v}}}}class IJ{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,i=this.levelDetails;if(!t||!i)return;this.currentTime=t.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:a}=this.config;if(!r||a===1||!i.live)return;const o=this.targetLatency;if(o===null)return;const l=s-o,c=Math.min(this.maxLatency,o+i.targetduration);if(l<c&&l>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,a)),h=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,f=Math.min(d,Math.max(1,h));this.changeMediaPlaybackRate(t,f)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:i,targetduration:s}=e,{liveSyncDuration:r,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let c=o&&i||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=r!==void 0?r:a*s);const u=s;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,u)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const i=this.levelDetails;if(i===null)return null;const s=i.edge,r=e-t-this.edgeStalled,a=s-i.totalduration,o=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(a,r),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(F.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(F.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var i;t.details===xe.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(i=this.levelDetails)!=null&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var i,s;e.playbackRate!==t&&((i=this.hls)==null||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(s=this.targetLatency)==null?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class RJ extends Vw{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this),e.on(F.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this),e.off(F.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,s=[],r={},a={};let o=!1,l=!1,c=!1;t.levels.forEach(u=>{var d;const h=u.attrs;let{audioCodec:f,videoCodec:p}=u;f&&(u.audioCodec=f=Q0(f,i)||void 0),((d=p)==null?void 0:d.indexOf("avc1"))===0&&(p=u.videoCodec=Lq(p));const{width:m,height:v,unknownCodecs:y}=u;let b=y?y.length:0;if(y)for(let I=b;I--;){const R=y[I];this.isAudioSupported(R)?(u.audioCodec=f=f?`${f},${R}`:R,b--,Ud.audio[f.substring(0,4)]=2):this.isVideoSupported(R)&&(u.videoCodec=p=p?`${p},${R}`:R,b--,Ud.video[p.substring(0,4)]=2)}if(o||(o=!!(m&&v)),l||(l=!!p),c||(c=!!f),b||f&&!this.isAudioSupported(f)||p&&!this.isVideoSupported(p)){this.log(`Some or all CODECS not supported "${h.CODECS}"`);return}const{CODECS:x,"FRAME-RATE":_,"HDCP-LEVEL":T,"PATHWAY-ID":C,RESOLUTION:L,"VIDEO-RANGE":k}=h,D=`${`${C||"."}-`}${u.bitrate}-${L}-${_}-${x}-${k}-${T}`;if(r[D])if(r[D].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const I=a[D]+=1;u.attrs["PATHWAY-ID"]=new Array(I+1).join(".");const R=this.createLevel(u);r[D]=R,s.push(R)}else r[D].addGroupId("audio",h.AUDIO),r[D].addGroupId("text",h.SUBTITLES);else{const I=this.createLevel(u);r[D]=I,a[D]=1,s.push(I)}}),this.filterAndSortMediaOptions(s,t,o,l,c)}createLevel(e){const t=new mp(e),i=e.supplemental;if(i!=null&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){const s=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(s.message),t.supportedResult=zN(s,[])}return t}isAudioSupported(e){return p2(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return p2(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,i,s,r){let a=[],o=[],l=e;if((i||s)&&r&&(l=l.filter(({videoCodec:v,videoRange:y,width:b,height:x})=>(!!v||!!(b&&x))&&Pq(y))),l.length===0){Promise.resolve().then(()=>{if(this.hls){let v="no level with compatible codecs found in manifest",y=v;t.levels.length&&(y=`one or more CODECS in variant not supported: ${ni(t.levels.map(x=>x.attrs.CODECS).filter((x,_,T)=>T.indexOf(x)===_))}`,this.warn(y),v+=` (${y})`);const b=new Error(v);this.hls.trigger(F.ERROR,{type:ut.MEDIA_ERROR,details:xe.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:b,reason:y})}});return}t.audioTracks&&(a=t.audioTracks.filter(v=>!v.audioCodec||this.isAudioSupported(v.audioCodec)),LL(a)),t.subtitles&&(o=t.subtitles,LL(o));const c=l.slice(0);l.sort((v,y)=>{if(v.attrs["HDCP-LEVEL"]!==y.attrs["HDCP-LEVEL"])return(v.attrs["HDCP-LEVEL"]||"")>(y.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&v.height!==y.height)return v.height-y.height;if(v.frameRate!==y.frameRate)return v.frameRate-y.frameRate;if(v.videoRange!==y.videoRange)return J0.indexOf(v.videoRange)-J0.indexOf(y.videoRange);if(v.videoCodec!==y.videoCodec){const b=bA(v.videoCodec),x=bA(y.videoCodec);if(b!==x)return x-b}if(v.uri===y.uri&&v.codecSet!==y.codecSet){const b=X0(v.codecSet),x=X0(y.codecSet);if(b!==x)return x-b}return v.averageBitrate!==y.averageBitrate?v.averageBitrate-y.averageBitrate:0});let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let v=0;v<c.length;v++)if(c[v].pathwayId===l[0].pathwayId){u=c[v];break}}this._levels=l;for(let v=0;v<l.length;v++)if(l[v]===u){var d;this._firstLevel=v;const y=u.bitrate,b=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${y}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const x=Math.min(y,this.hls.config.abrEwmaDefaultEstimateMax);x>b&&b===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=x)}break}const h=r&&!s,f=this.hls.config,p=!!(f.audioStreamController&&f.audioTrackController),m={levels:l,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:r,video:s,altAudio:p&&!h&&a.some(v=>!!v.url)};this.hls.trigger(F.MANIFEST_PARSED,m)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(F.ERROR,{type:ut.OTHER_ERROR,details:xe.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,s=this.currentLevel,r=s?s.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,i===e&&s&&r===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${i}${r?" with Pathway "+r:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(F.LEVEL_SWITCHING,l);const c=a.details;if(!c||c.live){const u=this.switchParams(a.uri,s==null?void 0:s.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),i=e.filter(s=>t.indexOf(s)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=i}}onError(e,t){t.fatal||!t.context||t.context.type===Zt.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===lt.MAIN){const i=t.elementaryStreams;if(!Object.keys(i).some(r=>!!i[r]))return;const s=this._levels[t.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,t){var i;const{level:s,details:r}=t,a=t.levelInfo;if(!a){var o;this.warn(`Invalid level index ${s}`),(o=t.deliveryDirectives)!=null&&o.skip&&(r.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let l=a.details;l===t.details&&l.advanced&&(l=void 0),this.playlistLoaded(s,t,l)}else(i=t.deliveryDirectives)!=null&&i.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=this.getUrlWithDirectives(e.uri,t),s=this.currentLevelIndex,r=e.attrs["PATHWAY-ID"],a=e.details,o=a==null?void 0:a.age;this.log(`Loading level index ${s}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${r?" Pathway "+r:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${i}`),this.hls.trigger(F.LEVEL_LOADING,{url:i,level:s,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const i=this._levels.filter((r,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(r),r===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,r.details&&r.details.fragments.forEach(o=>o.level=-1)),!1));sD(i),this._levels=i,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=i.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(F.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(F.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function LL(n){const e={};n.forEach(t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}function qD(){return self.SourceBuffer||self.WebKitSourceBuffer}function KD(){if(!ec())return!1;const e=qD();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function PJ(){if(!KD())return!1;const n=ec();return typeof(n==null?void 0:n.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(gp(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(gp(e,"audio"))))}function NJ(){var n;const e=qD();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const DJ=100;class OJ extends Fw{constructor(e,t,i){super(e,t,i,"stream-controller",lt.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const s=this.media,r=s?s.currentTime:null;if(r===null||!Je(r)||(this.log(`Media seeked to ${r.toFixed(3)}`),!this.getBufferedFrag(r)))return;const a=this.getFwdBufferInfoAtPos(s,r,lt.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${r} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.LEVEL_LOADING,this.onLevelLoading,this),e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(F.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(F.BUFFER_CREATED,this.onBufferCreated,this),e.on(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(F.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(F.BUFFER_CREATED,this.onBufferCreated,this),e.off(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:i,hls:s}=this;if(this.stopLoad(),this.setInterval(DJ),this.level=-1,!this.startFragRequested){let r=s.startLevel;r===-1&&(s.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=s.firstAutoLevel),s.nextLoadLevel=r,this.level=s.loadLevel,this._hasEnoughToStart=!!t}i>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=Le.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Le.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Le.WAITING_LEVEL:{const{levels:t,level:i}=this,s=t==null?void 0:t[i],r=s==null?void 0:s.details;if(r&&(!r.live||this.levelLastLoaded===s&&!this.waitForLive(s))){if(this.waitForCdnTuneIn(r))break;this.state=Le.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Le.IDLE;break}break}case Le.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),i=this.retryDate;if(!i||t>=i||(e=this.media)!=null&&e.seeking){const{levels:s,level:r}=this,a=s==null?void 0:s[r];this.resetStartWhenNotLoaded(a||null),this.state=Le.IDLE}}break}this.state===Le.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:s}=this;if(t===null||!s&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const r=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[r]))return;const a=i[r],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const m={};this.altAudio===2&&(m.type="video"),this.hls.trigger(F.BUFFER_EOS,m),this.state=Le.ENDED;return}if(!this.buffering)return;e.loadLevel!==r&&e.manualLevel===-1&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;const c=a.details;if(!c||this.state===Le.WAITING_LEVEL||this.waitForLive(a)){this.level=r,this.state=Le.WAITING_LEVEL,this.startFragRequested=!1;return}const u=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let f=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&f&&is(f)&&this.fragmentTracker.getState(f)!==Gi.OK){var p;const v=((p=this.backtrackFragment)!=null?p:f).sn-c.startSN,y=c.fragments[v-1];y&&f.cc===y.cc&&(f=y,this.fragmentTracker.removeFragment(y))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const v=this.audioOnly&&!this.altAudio?Ln.AUDIO:Ln.VIDEO,y=(v===Ln.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,v,lt.MAIN)}f=this.getNextFragmentLoopLoading(f,c,o,lt.MAIN,d)}f&&(f.initSegment&&!f.initSegment.data&&!this.bitrateTest&&(f=f.initSegment),this.loadFragment(f,a,h))}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);s===Gi.NOT_LOADED||s===Gi.PARTIAL?is(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,i):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,lt.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let i;const s=this.getAppendedFrag(t.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const r=this.getLevelDetails();if(r!=null&&r.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<r.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],c=this.fragLastKbps;c&&this.fragCurrent?i=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:i=0}else i=0;const a=this.getBufferedFrag(t.currentTime+i);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,u=Math.max(a.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case Le.KEY_LOADING:case Le.FRAG_LOADING:case Le.FRAG_LOADING_WAITING_RETRY:case Le.PARSING:case Le.PARSED:this.state=Le.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;Do(i,"playing",this.onMediaPlaying),Do(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:i}=this;i&&(Wa(i,"playing",this.onMediaPlaying),Wa(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(F.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let i=!1,s=!1;t.levels.forEach(r=>{const a=r.audioCodec;a&&(i=i||a.indexOf("mp4a.40.2")!==-1,s=s||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=i&&s&&!NJ(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==Le.IDLE)return;const s=t.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=Le.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:s,startFragRequested:r}=this,a=t.level,o=t.details,l=o.totalduration;if(!s){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${l}`);const c=t.levelInfo,u=this.fragCurrent;u&&(this.state===Le.FRAG_LOADING||this.state===Le.FRAG_LOADING_WAITING_RETRY)&&u.level!==t.level&&u.loader&&this.abortCurrentFrag();let d=0;if(o.live||(i=c.details)!=null&&i.live){var h;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,c.details,(h=this.levelLastLoaded)==null?void 0:h.details)}if(c.details=o,this.levelLastLoaded=c,r||this.setStartPosition(o,d),this.hls.trigger(F.LEVEL_UPDATED,{details:o,level:a}),this.state===Le.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=Le.IDLE}r&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const s=this.hls.liveSyncPosition,r=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,l=r>=a-t.maxFragLookUpTolerance&&r<=o;if(s!==null&&i.duration>s&&(r<s||!l)){const c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!l&&i.readyState<4||r<o-c)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),i.readyState&&(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${s.toFixed(3)}`),i.currentTime=s))}}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:r}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const o=a[i.level];if(!o){this.warn(`Level ${i.level} not found on progress`);return}const l=o.details;if(!l){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const c=o.videoCodec,u=l.PTSKnown||!l.live,d=(t=i.initSegment)==null?void 0:t.data,h=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new LD(this.hls,lt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,m=p!==-1,v=new Dw(i.level,i.sn,i.stats.chunkCount,r.byteLength,p,m),y=this.initPTS[i.cc];f.push(r,d,h,c,i,s,l.totalduration,u,v,y)}onAudioTrackSwitching(e,t){const i=this.hls,s=this.altAudio===2;if(Z0(t.url,i))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s){this.fragmentTracker.removeAllFragments(),i.once(F.BUFFER_FLUSHED,()=>{var a;(a=this.hls)==null||a.trigger(F.AUDIO_TRACK_SWITCHED,t)}),i.trigger(F.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}i.trigger(F.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=Z0(t.url,this.hls);if(i){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,t){const i=t.tracks;let s,r,a=!1;for(const o in i){const l=i[o];if(l.id==="main"){if(r=o,s=l,o==="video"){const c=i[o];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&s?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:s}=t,r=i.type===lt.MAIN;if(r){if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Le.PARSED&&(this.state=Le.IDLE);return}const o=s?s.stats:i.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),is(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}const a=this.media;a&&(!this._hasEnoughToStart&&Vt.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),r&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var i;if(t.fatal){this.state=Le.ERROR;return}switch(t.details){case xe.FRAG_GAP:case xe.FRAG_PARSING_ERROR:case xe.FRAG_DECRYPT_ERROR:case xe.FRAG_LOAD_ERROR:case xe.FRAG_LOAD_TIMEOUT:case xe.KEY_LOAD_ERROR:case xe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(lt.MAIN,t);break;case xe.LEVEL_LOAD_ERROR:case xe.LEVEL_LOAD_TIMEOUT:case xe.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===Le.WAITING_LEVEL&&((i=t.context)==null?void 0:i.type)===Zt.LEVEL&&(this.state=Le.IDLE);break;case xe.BUFFER_ADD_CODEC_ERROR:case xe.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.resetLoadingState();break;case xe.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case xe.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=Le.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Ln.AUDIO||!this.altAudio){const i=(t===Ln.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;i&&(this.afterBufferFlushed(i,t,lt.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${t}`);return}const s=this.timelineOffset;s&&i&&(i+=s);const r=this.getLevelDetails(),a=Vt.getBuffered(e),o=a.length?a.start(0):0,l=o-i,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);l>0&&(l<c||this.loadingParts&&l<2*((r==null?void 0:r.partTarget)||0))&&(this.log(`adjusting start position by ${l} to match buffer start`),i+=l,this.startPosition=i),t<i&&(this.log(`seek to target start position ${i} from current time ${t} buffer start ${o}`),e.currentTime=i)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{const{hls:s}=this,r=i==null?void 0:i.frag;if(!r||this.fragContextChanged(r))return;t.fragmentError=0,this.state=Le.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=r.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),s.trigger(F.FRAG_LOADED,i),r.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const i=this.playlistType,{hls:s}=this,{remuxResult:r,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{video:d,text:h,id3:f,initSegment:p}=r,{details:m}=u,v=this.altAudio?void 0:r.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=Le.PARSING,p){if(p!=null&&p.tracks){const x=l.initSegment||l;this._bufferInitSegment(u,p.tracks,x,a),s.trigger(F.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:i,tracks:p.tracks})}const y=p.initPTS,b=p.timescale;Je(y)&&(this.initPTS[l.cc]={baseTime:y,timescale:b},s.trigger(F.INIT_PTS_FOUND,{frag:l,id:i,initPTS:y,timescale:b}))}if(d&&m){v&&d.type==="audiovideo"&&this.logMuxedErr(l);const y=m.fragments[l.sn-1-m.startSN],b=l.sn===m.startSN,x=!y||l.cc>y.cc;if(r.independent!==!1){const{startPTS:_,endPTS:T,startDTS:C,endDTS:L}=d;if(c)c.elementaryStreams[d.type]={startPTS:_,endPTS:T,startDTS:C,endDTS:L};else if(d.firstKeyFrame&&d.independent&&a.id===1&&!x&&(this.couldBacktrack=!0),d.dropped&&d.independent){const k=this.getMainFwdBufferInfo(),M=(k?k.end:this.getLoadPosition())+this.config.maxBufferHole,D=d.firstKeyFramePTS?d.firstKeyFramePTS:_;if(!b&&M<D-this.config.maxBufferHole&&!x){this.backtrack(l);return}else x&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,T,l.start,L,!0)}else b&&_-(m.appliedTimelineOffset||0)>n0&&(l.gap=!0);l.setElementaryStreamInfo(d.type,_,T,C,L),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,c,a,b||x)}else if(b||x)l.gap=!0;else{this.backtrack(l);return}}if(v){const{startPTS:y,endPTS:b,startDTS:x,endDTS:_}=v;c&&(c.elementaryStreams[Ln.AUDIO]={startPTS:y,endPTS:b,startDTS:x,endDTS:_}),l.setElementaryStreamInfo(Ln.AUDIO,y,b,x,_),this.bufferFragmentData(v,l,c,a)}if(m&&f!=null&&(t=f.samples)!=null&&t.length){const y={id:i,frag:l,details:m,samples:f.samples};s.trigger(F.FRAG_PARSING_METADATA,y)}if(m&&h){const y={id:i,frag:l,details:m,samples:h.samples};s.trigger(F.FRAG_PARSING_USERDATA,y)}}logMuxedErr(e){this.warn(`${is(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,i,s){if(this.state!==Le.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(i));const{audio:r,video:a,audiovideo:o}=t;if(r){let c=Xm(r.codec,e.audioCodec);c==="mp4a"&&(c="mp4a.40.5");const u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5");const d=r.metadata;d&&"channelCount"in d&&(d.channelCount||1)!==1&&u.indexOf("firefox")===-1&&(c="mp4a.40.5")}c&&c.indexOf("mp4a.40.5")!==-1&&u.indexOf("android")!==-1&&r.container!=="audio/mpeg"&&(c="mp4a.40.2",this.log(`Android: force audio codec to ${c}`)),e.audioCodec&&e.audioCodec!==c&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${c}"`),r.levelCodec=c,r.id=lt.MAIN,this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${c||""}/${e.audioCodec||""}/${r.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=lt.MAIN;const c=a.codec;if((c==null?void 0:c.length)===4)switch(c){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${a.codec!==c?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const l=Object.keys(t);if(l.length){if(this.hls.trigger(F.BUFFER_CODECS,t),!this.hls)return;l.forEach(c=>{const d=t[c].initSegment;d!=null&&d.byteLength&&this.hls.trigger(F.BUFFER_APPENDING,{type:c,data:d,frag:i,part:null,chunkMeta:s,parent:i.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,lt.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,i=e==null?void 0:e[t];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Le.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(Vt.isBuffered(e,i)?t=this.getAppendedFrag(i):Vt.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const s=this.fragPlaying,r=t.level;(!s||t.sn!==s.sn||s.level!==r)&&(this.fragPlaying=t,this.hls.trigger(F.FRAG_CHANGED,{frag:t}),(!s||s.level!==r)&&this.hls.trigger(F.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Je(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Je(t)){const i=this.getLevelDetails(),s=this.currentFrag||(i?uu(null,i.fragments,t):null);if(s){const r=s.programDateTime;if(r!==null){const a=r+(t-s.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class MJ{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyUriToKeyInfo){const s=this.keyUriToKeyInfo[i].loader;if(s){var t;if(e&&e!==((t=s.context)==null?void 0:t.frag.type))return;s.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=xe.KEY_LOAD_ERROR,i,s,r){return new So({type:ut.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:r,error:i,networkDetails:s})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:i,cc:s}=e;for(let r=0;r<t.length;r++){const a=t[r];if(s<=a.cc&&(i==="initSegment"||a.sn==="initSegment"||i<a.sn)){this.emeController.selectKeySystemFormat(a).then(o=>{a.setKeyFormat(o)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,s;t&&e.setKeyFormat(t);const r=e.decryptdata;if(!r){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,xe.KEY_LOAD_ERROR,c))}const a=r.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,xe.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((i=o)!=null&&i.decryptdata.key)return r.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((s=o)!=null&&s.keyLoadPromise){var l;switch((l=o.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(c=>(r.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return r.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,xe.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(i);if(s)return(e.keyLoadPromise=s.then(r=>(e.mediaKeySessionContext=r,i))).catch(r=>{throw e.keyLoadPromise=null,r})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,s=i.loader,r=new s(i);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=i.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{const{frag:v,keyInfo:y,url:b}=p;if(!v.decryptdata||y!==this.keyUriToKeyInfo[b])return o(this.createKeyLoadError(v,xe.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),m));y.decryptdata.key=v.decryptdata.key=new Uint8Array(h.data),v.keyLoader=null,y.loader=null,a({frag:v,keyInfo:y})},onError:(h,f,p,m)=>{this.resetLoader(f),o(this.createKeyLoadError(t,xe.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),p,vn({url:l.url,data:void 0},h)))},onTimeout:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(t,xe.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(t,xe.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};r.load(l,u,d)})}resetLoader(e){const{frag:t,keyInfo:i,url:s}=e,r=i.loader;t.keyLoader===r&&(t.keyLoader=null,i.loader=null),delete this.keyUriToKeyInfo[s],r&&r.destroy()}}function kL(n){const{type:e}=n;switch(e){case Zt.AUDIO_TRACK:return lt.AUDIO;case Zt.SUBTITLE_TRACK:return lt.SUBTITLE;default:return lt.MAIN}}function xx(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class FJ{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.LEVEL_LOADING,this.onLevelLoading,this),e.on(F.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(F.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.LEVEL_LOADING,this.onLevelLoading,this),e.off(F.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(F.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,s=t.loader,r=i||s,a=new r(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Zt.MANIFEST,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:i,level:s,pathwayId:r,url:a,deliveryDirectives:o,levelInfo:l}=t;this.load({id:i,level:s,pathwayId:r,responseType:"text",type:Zt.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:l})}onAudioTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:a,track:o}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:Zt.AUDIO_TRACK,url:r,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:i,groupId:s,url:r,deliveryDirectives:a,track:o}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:Zt.SUBTITLE_TRACK,url:r,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,t){const i=this.loaders[Zt.LEVEL];if(i){const s=i.context;s&&!t.levels.some(r=>r===s.levelOrTrack)&&(i.abort(),delete this.loaders[Zt.LEVEL])}}load(e){var t;const i=this.hls.config;let s=this.getInternalLoader(e);if(s){const c=this.hls.logger,u=s.context;if(u&&u.levelOrTrack===e.levelOrTrack&&(u.url===e.url||u.deliveryDirectives&&!e.deliveryDirectives)){u.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${u.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let r;if(e.type===Zt.MANIFEST?r=i.manifestLoadPolicy.default:r=In({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),Je((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===Zt.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Zt.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Zt.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,d=c.targetduration;if(u&&d){const h=Math.max(u*3,d*.8)*1e3;r=In({},r,{maxTimeToFirstByteMs:Math.min(h,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,r.maxTimeToFirstByteMs)})}}}const a=r.errorRetry||r.timeoutRetry||{},o={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(c,u,d,h)=>{const f=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=c.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,d,new Error("no EXTM3U delimiter"),h||null,u);return}u.parsing.start=performance.now(),za.isMediaPlaylist(p)||d.type!==Zt.MANIFEST?this.handleTrackOrLevelPlaylist(c,u,d,h||null,f):this.handleMasterPlaylist(c,u,d,h)},onError:(c,u,d,h)=>{this.handleNetworkError(u,d,!1,c,h)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};s.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,i,s){const r=this.hls,a=e.data,o=xx(e,i),l=za.parseMasterPlaylist(a,o);if(l.playlistParsingError){this.handleManifestParsingError(e,i,l.playlistParsingError,s,t);return}const{contentSteering:c,levels:u,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p}=l;this.variableList=p;const{AUDIO:m=[],SUBTITLES:v,"CLOSED-CAPTIONS":y}=za.parseMasterPlaylistMedia(a,o,l);m.length&&!m.some(x=>!x.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ai({}),bitrate:0,url:""})),r.trigger(F.MANIFEST_LOADED,{levels:u,audioTracks:m,subtitles:v,captions:y,contentSteering:c,url:o,stats:t,networkDetails:s,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p})}handleTrackOrLevelPlaylist(e,t,i,s,r){const a=this.hls,{id:o,level:l,type:c}=i,u=xx(e,i),d=Je(l)?l:Je(o)?o:0,h=kL(i),f=za.parseLevelPlaylist(e.data,u,d,h,0,this.variableList);if(c===Zt.MANIFEST){const p={attrs:new ai({}),bitrate:0,details:f,name:"",url:u};f.requestScheduled=t.loading.start+tD(f,0),a.trigger(F.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:u,stats:t,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=f,this.handlePlaylistLoaded(f,e,t,i,s,r)}handleManifestParsingError(e,t,i,s,r){this.hls.trigger(F.ERROR,{type:ut.NETWORK_ERROR,details:xe.MANIFEST_PARSING_ERROR,fatal:t.type===Zt.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:s,stats:r})}handleNetworkError(e,t,i=!1,s,r){let a=`A network ${i?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===Zt.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Zt.AUDIO_TRACK||e.type===Zt.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let l=xe.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case Zt.MANIFEST:l=i?xe.MANIFEST_LOAD_TIMEOUT:xe.MANIFEST_LOAD_ERROR,c=!0;break;case Zt.LEVEL:l=i?xe.LEVEL_LOAD_TIMEOUT:xe.LEVEL_LOAD_ERROR,c=!1;break;case Zt.AUDIO_TRACK:l=i?xe.AUDIO_TRACK_LOAD_TIMEOUT:xe.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Zt.SUBTITLE_TRACK:l=i?xe.SUBTITLE_TRACK_LOAD_TIMEOUT:xe.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const d={type:ut.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:o,networkDetails:t,stats:r};if(s){const h=(t==null?void 0:t.url)||e.url;d.response=vn({url:h,data:void 0},s)}this.hls.trigger(F.ERROR,d)}handlePlaylistLoaded(e,t,i,s,r,a){const o=this.hls,{type:l,level:c,id:u,groupId:d,deliveryDirectives:h}=s,f=xx(t,s),p=kL(s),m=typeof s.level=="number"&&p===lt.MAIN?c:void 0;if(!e.fragments.length){const y=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(F.ERROR,{type:ut.NETWORK_ERROR,details:xe.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:y,reason:y.message,response:t,context:s,level:m,parent:p,networkDetails:r,stats:i});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const v=e.playlistParsingError;if(v){if(this.hls.logger.warn(v),!o.config.ignorePlaylistParsingErrors){o.trigger(F.ERROR,{type:ut.NETWORK_ERROR,details:xe.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:v,reason:v.message,response:t,context:s,level:m,parent:p,networkDetails:r,stats:i});return}e.playlistParsingError=null}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Zt.MANIFEST:case Zt.LEVEL:o.trigger(F.LEVEL_LOADED,{details:e,levelInfo:s.levelOrTrack||o.levels[0],level:m||0,id:u||0,stats:i,networkDetails:r,deliveryDirectives:h,withoutMultiVariant:l===Zt.MANIFEST});break;case Zt.AUDIO_TRACK:o.trigger(F.AUDIO_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:u||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:h});break;case Zt.SUBTITLE_TRACK:o.trigger(F.SUBTITLE_TRACK_LOADED,{details:e,track:s.levelOrTrack,id:u||0,groupId:d||"",stats:i,networkDetails:r,deliveryDirectives:h});break}}}class Hr{static get version(){return xp}static isMSESupported(){return KD()}static isSupported(){return PJ()}static getMediaSource(){return ec()}static get Events(){return F}static get MetadataSchema(){return vr}static get ErrorTypes(){return ut}static get ErrorDetails(){return xe}static get DefaultConfig(){return Hr.defaultConfig?Hr.defaultConfig:xJ}static set DefaultConfig(e){Hr.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new jw,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=nq(e.debug||!1,"Hls instance",e.assetPlayerId),i=this.config=SJ(Hr.DefaultConfig,e,t);this.userConfig=e,i.progressive&&wJ(i,t);const{abrController:s,bufferController:r,capLevelController:a,errorController:o,fpsController:l}=i,c=new o(this),u=this.abrController=new s(this),d=new qq(this),h=i.interstitialsController,f=h?this.interstitialsController=new h(this,Hr):null,p=this.bufferController=new r(this,d),m=this.capLevelController=new a(this),v=new l(this),y=new FJ(this),b=i.contentSteeringController,x=b?new b(this):null,_=this.levelController=new RJ(this,x),T=new CJ(this),C=new MJ(this.config),L=this.streamController=new OJ(this,d,C),k=this.gapController=new AJ(this,d);m.setStreamController(L),v.setStreamController(L);const M=[y,_,L];f&&M.splice(1,0,f),x&&M.splice(1,0,x),this.networkControllers=M;const D=[u,p,k,m,v,T,d];this.audioTrackController=this.createController(i.audioTrackController,M);const I=i.audioStreamController;I&&M.push(this.audioStreamController=new I(this,d,C)),this.subtitleTrackController=this.createController(i.subtitleTrackController,M);const R=i.subtitleStreamController;R&&M.push(this.subtititleStreamController=new R(this,d,C)),this.createController(i.timelineController,D),C.emeController=this.emeController=this.createController(i.emeController,D),this.cmcdController=this.createController(i.cmcdController,D),this.latencyController=this.createController(IJ,D),this.coreComponents=D,M.push(c);const q=c.onErrorOut;typeof q=="function"&&this.on(F.ERROR,q,c),this.on(F.MANIFEST_LOADED,y.onManifestLoaded,y)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,s){this._emitter.off(e,t,i,s)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const s=e===F.ERROR;this.trigger(F.ERROR,{type:ut.OTHER_ERROR,details:xe.INTERNAL_EXCEPTION,fatal:s,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(F.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const r=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(F.ERROR,{type:ut.OTHER_ERROR,details:xe.ATTACH_MEDIA_ERROR,fatal:!0,error:r});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,i=t?e.media:e,s=t?e:{media:i};this._media=i,this.trigger(F.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(F.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(F.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,i=this._url,s=this._url=kw.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),t&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(F.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length&&(this.networkControllers[i].startLoad(e,t),!(!this.started||!this.networkControllers));i++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[lt.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[lt.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[lt.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=GK()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Rq(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let s=0;s<i;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let s;if(t===-1&&e!=null&&e.length?s=e.length-1:s=t,i)for(let r=s;r--;){const a=e[r].attrs["HDCP-LEVEL"];if(a&&a<=i)return r}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const i=VN(t);return WN(e,i,navigator.mediaCapabilities)}}Hr.defaultConfig=void 0;const jJ=()=>{const n=O.useRef(null),e=O.useRef(null),t="https://9da07970fb41.ngrok.app/hls/stream.m3u8",[i,s]=O.useState(!1),r=()=>{const a=n.current;if(e.current&&(e.current.destroy(),e.current=null),Hr.isSupported()){const o=new Hr;e.current=o,o.loadSource(t),o.attachMedia(a),o.on(Hr.Events.MANIFEST_PARSED,()=>{a.muted=!0,a.play().catch(()=>{})}),o.on(Hr.Events.FRAG_LOADED,()=>{i||(s(!0),console.log(" Stream connected."))}),o.on(Hr.Events.ERROR,(l,c)=>{c.fatal&&(console.warn(" Fatal HLS error, retrying in 2s..."),s(!1),setTimeout(()=>r(),2e3))})}else a.canPlayType("application/vnd.apple.mpegurl")&&(a.src=t,a.muted=!0,a.play().catch(()=>{}))};return O.useEffect(()=>(r(),()=>{e.current&&e.current.destroy()}),[]),S.jsxs("div",{style:{backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",width:"100vw",height:"100vh",overflow:"hidden",position:"relative"},children:[S.jsxs("div",{style:{position:"absolute",top:0,width:"100%",backgroundColor:"rgba(0, 0, 0, 0.6)",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",zIndex:1},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[S.jsx("div",{style:{width:"12px",height:"12px",backgroundColor:"red",borderRadius:"50%"}}),S.jsx("h4",{style:{margin:0},children:"Live Camera"})]}),S.jsx(xr,{children:S.jsx(xr.Link,{to:"/",as:Cl,className:"btn btn-primary text-white px-3 py-2",style:{borderRadius:"8px"},children:"Exit"})})]}),S.jsx("video",{ref:n,controls:!0,autoPlay:!0,muted:!0,style:{width:"99%",height:"99%",backgroundColor:"#000"}})]})};function BJ(){const[n,e]=O.useState(""),[t,i]=O.useState(""),[s,r]=O.useState(!1),a=async o=>{if(o.preventDefault(),!n){xn.error("Se requiere poner un nombre");return}if(!/^[a-zA-Z\s]+$/.test(n)){xn.error("Item name must be letters and spaces only");return}i(""),r(!0);try{localStorage.setItem("selfName",JSON.stringify(n)),setTimeout(()=>{window.location.href="/product"},500)}catch(l){console.error(l),i("Failed to submit name"),xn.error("Failed to submit name"),r(!1)}};return S.jsxs("div",{className:"name-form",children:[S.jsx(jy,{position:"bottom-center"}),S.jsx("nav",{className:"nave navbar navbar-expand navbar-dark bg-black w-100 d-flex align-items-center justify-content-center",children:S.jsx("img",{className:"logo",src:"/logo1.png",alt:"Logo"})}),S.jsx("div",{className:"container conta d-flex justify-content-center align-items-center ",children:S.jsx("div",{className:"row welcome mt-5 rounded-4 d-flex flex-column ",children:S.jsxs("div",{className:"col d-flex flex-column align-items-center justify-content-center ",children:[S.jsx("h1",{className:"display-1",style:{fontWeight:"bold"},children:"Bienvenido"}),S.jsx("p",{className:"fs-2",children:"Introduce tu nombre"}),S.jsxs("form",{onSubmit:a,className:"d-flex flex-column justify-content-center gap-3",children:[S.jsx("div",{className:"form-group w-100 d-flex flex-row justify-content-center",children:S.jsx("input",{type:"text",className:"form-control w-100 p-3 fs-2 justify-content-center align-items-center",placeholder:"Juan del Pueblo",value:n,onChange:o=>e(o.target.value),disabled:s})}),t&&S.jsx("div",{className:"text-light bg-danger p-1 mt-2",children:t}),S.jsx("button",{className:`btn w-100 fs-2 d-flex justify-content-center align-items-center
                  ${s?"btn-loading":"btn-outline-light text-white"}`,type:"submit",disabled:s,children:s?S.jsxs(S.Fragment,{children:["Cargando",S.jsx("span",{className:"spinner-border spinner-border-sm ms-2",role:"status","aria-hidden":"true"})]}):S.jsxs(S.Fragment,{children:["Continuar",S.jsx("i",{className:"bi bi-chevron-right fs-2 ms-3"})]})})]})]})})})]})}function UJ(){const[n,e]=O.useState([]),[t,i]=O.useState([]),[s,r]=O.useState(!1),[a,o]=O.useState(!1),[l,c]=O.useState(""),[u,d]=O.useState(!1),[h,f]=O.useState(!1),[p,m]=O.useState(null),v=5;O.useEffect(()=>{const T=localStorage.getItem("selfItems");if(T)try{const L=JSON.parse(T).map(k=>({...k,price:v.toFixed(2),qty:1,idname:k.ingredients.join(" + ")}));e(L)}catch(C){console.error("Error parsing localStorage data:",C)}},[]),O.useEffect(()=>{const T=C=>{C.key==="paymentConfirmed"&&C.newValue==="true"&&f(!0)};return window.addEventListener("storage",T),()=>window.removeEventListener("storage",T)},[]),O.useEffect(()=>{let T;return u&&p&&(T=setInterval(async()=>{try{if((await nt.get(`/orders/pending_orders/${p}`)).data.paymentConfirmed){f(!0),clearInterval(T);const L=n.map(k=>({...k,ings:k.ingredients,tops:k.toppings,item_id:Math.floor(Math.random()*1e5)})).map(({ingredients:k,toppings:M,price:D,...I})=>I);await nt.post("/orders",{name:JSON.parse(localStorage.getItem("selfName")),items:L,payment_method:l,total:_}),localStorage.removeItem("selfItems"),localStorage.removeItem("selfName")}}catch(C){console.error("Error polling order status:",C)}},3e3)),()=>clearInterval(T)},[u,p]);const y=T=>{const C=n.filter((L,k)=>k!==T);e(C),localStorage.setItem("selfItems",JSON.stringify(C))},b=async()=>{d(!0);try{const C=(await nt.post("/orders/pending_order",{name:JSON.parse(localStorage.getItem("selfName")),items:n,payment_method:l,total:_})).data._id;m(C),localStorage.setItem("currentOrderId",C)}catch(T){console.error("Error",T)}},x=()=>{d(!1),window.location.href="/customer"},_=n.reduce((T,C)=>T+parseFloat(C.price),0);return S.jsxs("div",{className:"text-secondary",children:[S.jsxs("nav",{className:"navbar navbar-expand navbar-dark bg-black w-100 d-flex align-items-center justify-content-between px-3",children:[S.jsx("a",{href:"#",onClick:()=>window.history.back(),className:"text-white fs-3",children:S.jsx("i",{className:"bi bi-chevron-left"})}),S.jsx("img",{className:"logo",src:"/logo.png",alt:"Logo"}),S.jsx("div",{className:"me-3"})]}),S.jsx("div",{className:"container py-5 px-3",children:a?S.jsxs("div",{className:"text-center py-5",children:[S.jsx("img",{src:"./img/check.png",alt:"Check",className:"mb-4",style:{maxHeight:"120px"}}),S.jsx("h2",{children:"Pago Completado"})]}):S.jsxs("div",{className:"bg-white rounded-4 p-4 shadow",children:[S.jsx("div",{className:"table-responsive mb-4",children:S.jsxs("table",{className:"table table-bordered table-hover table-striped text-center align-middle fs-4",children:[S.jsx("thead",{className:"table-dark",children:S.jsxs("tr",{children:[S.jsx("th",{children:"Item"}),S.jsx("th",{children:"Qty"}),S.jsx("th",{children:"Price"}),S.jsx("th",{children:"Remove"})]})}),S.jsx("tbody",{children:n.map((T,C)=>S.jsxs("tr",{children:[S.jsx("td",{className:"fw-semibold",children:T.combination}),S.jsx("td",{children:T.qty}),S.jsxs("td",{children:["$",T.price]}),S.jsx("td",{children:S.jsx("button",{className:"btn btn-danger btn-lg px-4 py-2",onClick:()=>y(C),children:""})})]},C))})]})}),S.jsx("div",{className:"text-end pe-2 mb-4",children:S.jsxs("h3",{className:"text-dark fw-bold",children:["Total: $",_.toFixed(2)]})}),S.jsx("div",{className:"mb-4",children:S.jsx("button",{className:"btn btn-dark btn-lg fs-4 w-100 py-3",onClick:()=>r(!s),children:"Proceed to Checkout"})}),s&&S.jsxs("div",{children:[S.jsx("p",{className:"fs-4 mb-3",children:"Choose payment method:"}),S.jsxs("div",{className:"d-flex flex-column flex-md-row gap-3 mb-4",children:[S.jsx("button",{className:`btn ${l==="ATH"?"btn-dark":"btn-outline-dark"} btn-lg w-100 py-3 fs-4`,onClick:()=>c("ATH"),children:"ATH Mvil"}),S.jsx("button",{className:`btn ${l==="CASH"?"btn-dark":"btn-outline-dark"} btn-lg w-100 py-3 fs-4`,onClick:()=>c("CASH"),children:"Efectivo"})]}),S.jsxs("p",{className:"fs-5 mb-3",children:["Mtodo seleccionado: ",S.jsx("strong",{children:l})]}),S.jsx("button",{id:"ATHMovil_Checkout_Button",className:"btn btn-dark btn-lg w-100 py-3 fs-4",onClick:b,disabled:!l,children:"Pay"})]}),S.jsxs(yt,{show:u,onHide:x,centered:!0,children:[S.jsx(yt.Header,{closeButton:!0,className:"border-0",children:S.jsx(yt.Title,{className:"fs-3 fw-bold",children:"Order Pending"})}),S.jsxs(yt.Body,{className:"text-center py-5",children:[h?S.jsx("i",{className:"bi bi-check-circle-fill text-success display-1 d-block mb-3"}):S.jsx("i",{className:"bi bi-clock-history display-1 d-block mb-3"}),S.jsx("p",{className:"fs-5",children:h?"Payment confirmed by cashier!":"Waiting for cashier to confirm payment..."})]}),S.jsx(yt.Footer,{className:"border-0 justify-content-center",children:S.jsx("button",{className:"btn btn-dark btn-lg fs-5 px-5 py-3",onClick:x,children:"Back to Home Page"})})]})]})})]})}function $J(){O.useEffect(()=>{if(document.referrer.includes("/customer")){const d=JSON.parse(localStorage.getItem("selfName")||'""');xn.success(`Bienvenido ${d}! `)}},[]);const[n,e]=O.useState(""),[t,i]=O.useState(""),[s,r]=O.useState(!1),[a,o]=O.useState(!1),l={"Ice Cream Rolls":"Helado artesanal, 8 onzas preparado al momento. Escoge entre nuestras combinaciones favoritas (siguiente pgina) y toppings para el mismo."},c=d=>{const h=d.target.value;e(h),i("")},u=d=>{if(d.preventDefault(),!n){i("Debe seleccionar un producto");return}if(!l[n]){i("Producto no disponible");return}window.location.href="/icrform"};return O.useEffect(()=>{n&&r(!0)},[n]),S.jsxs("div",{className:"prod-selector",children:[S.jsx(jy,{position:"bottom-center"}),S.jsxs("nav",{className:"nave navbar navbar-expand navbar-dark bg-black w-100 d-flex align-items-center justify-content-between",children:[S.jsx("a",{href:"/customer",className:"ms-3",children:S.jsx("i",{className:"bi bi-chevron-left fs-2 nav-icon"})}),S.jsx("img",{className:"logo",src:"/logo.png",alt:"Logo"}),S.jsx("a",{href:"/shopping",className:"me-3",children:S.jsx("i",{className:"bi bi-cart fs-2 nav-icon"})})]}),S.jsx("div",{className:"conta container mt-3 rounded-3",children:S.jsxs("div",{className:"row d-flex flex-column justify-content-center align-items-center",children:[S.jsx("div",{className:"col d-flex justify-content-center align-item-center gy-3",children:S.jsx("button",{type:"button",className:"rosa btn  text-light rounded-3 btn-lg boton-nuevo",onClick:()=>o(!a),children:"Nuevo +"})}),a?S.jsxs("div",{className:"col bg-white contenido rounded-3 p-3 d-flex align-items-center flex-column text-secondary gy-4",children:[S.jsxs("section",{className:"card shadow-sm p-4 mt-3 w-100",children:[S.jsx("h5",{className:"text-secondary mb-3",children:"Tipo de Producto"}),S.jsxs("select",{className:"form-select fs-4",onChange:c,value:n||"0","aria-label":"Selecciona tipo de producto",children:[S.jsx("option",{value:"0",disabled:!0,children:"Selecciona el producto"}),Object.keys(l).map((d,h)=>S.jsx("option",{value:d,children:d},h))]})]}),S.jsxs("section",{className:"card shadow-sm p-4 mt-3 w-100",children:[S.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[S.jsx("h5",{className:"text-secondary",children:"Informacin del Producto"}),S.jsx("button",{className:"btn",onClick:()=>r(d=>!d),children:S.jsx("i",{className:`bi ${s?"bi-chevron-up":"bi-chevron-down"}`})})]}),s&&n&&S.jsxs("div",{className:"mt-4",children:[S.jsx("h5",{className:"fw-bold",children:n}),S.jsx("p",{className:"text-secondary",children:l[n]})]})]}),S.jsxs("section",{className:"mt-4 w-100",children:[t&&S.jsx("div",{className:"alert alert-danger text-center",role:"alert",children:t}),S.jsx("form",{onSubmit:u,className:"d-flex justify-content-center",children:S.jsx("button",{className:"btn btn-dark btn-lg fs-4 py-3 w-100 mt-4 rounded-4",type:"submit",children:"Continuar"})})]})]}):S.jsx("div",{id:"d",className:"nuevo col d-flex justify-content-center gy-5 mt-4",children:S.jsxs("p",{className:"lead presiona-nuevo",children:["Presiona ",S.jsx("strong",{className:"fw-bold",children:"Nuevo"})," para comenzar."]})})]})})]})}function HJ(){const[n,e]=O.useState({ingredients:["","",""],quantity:0,toppings:{}}),[t,i]=O.useState(""),s=["I Love Coffee","Strawberry Shortcake","Cookies & Cream","CocoNut","Smores","Cinammon And Cannot"],r=["Whipped Cream","Oreo","Man"];O.useEffect(()=>{const c=n.quantity;e(u=>{const d={...u.toppings};for(let h=1;h<=c;h++)d[h]||(d[h]=[]);return Object.keys(d).forEach(h=>{parseInt(h)>c&&delete d[h]}),{...u,toppings:d}})},[n.quantity]);const a=(c,u,d)=>{{let h=[];d==="I Love Coffee"?h=["Caf","Caramelo","Almendra"]:d==="Strawberry Shortcake"?h=["Fresa","Cheesecake","Almendra"]:d==="Cookies & Cream"?h=["Oreo","Queso","Chips"]:d==="CocoNut"?h=["Coco","Almendra","Nutella"]:d==="Smores"?h=["Marshmellow","Crackers","Chocolate"]:d==="Cinammon And Cannot"&&(h=["Bizcocho de Zanahoria","Queso","Canela"]),e(f=>t===d?{...f,ingredients:["","",""]}:{...f,ingredients:h}),i(f=>f===d?"":d)}},o=c=>{e(u=>({...u,quantity:parseInt(c)}))},l=c=>{c.preventDefault();const u=localStorage.getItem("selfItems");let d=u?JSON.parse(u):[];for(let h=1;h<=n.quantity;h++)d.push({combination:t,ingredients:n.ingredients,toppings:n.toppings[h]||[]});localStorage.setItem("selfItems",JSON.stringify(d)),e({ingredients:["","",""],quantity:0,toppings:{}}),i(""),window.location.href="/product"};return S.jsxs("div",{children:[S.jsxs("nav",{className:"navbar navbar-dark bg-black w-100 d-flex flex-column py-2",children:[S.jsxs("div",{className:"container-fluid d-flex justify-content-between align-items-center",children:[S.jsx("a",{href:"#",onClick:()=>window.history.back(),className:"text-white fs-3",children:S.jsx("i",{className:"bi bi-chevron-left"})}),S.jsx("img",{src:"/logo.png",alt:"Logo"}),S.jsx("a",{href:"/shopping",className:"text-white fs-3",children:S.jsx("i",{className:"bi bi-cart"})})]}),S.jsx("div",{className:"text-white text-center mt-2 fs-4 fw-semibold",children:"Producto: Ice Cream Rolls"})]}),S.jsx("div",{className:"container mt-4",children:S.jsxs("form",{onSubmit:l,className:"bg-white p-4 rounded-4 shadow-lg",children:[S.jsx("h4",{className:"text-secondary mb-3",children:"Ice Cream"}),S.jsx("div",{className:"d-flex flex-wrap gap-3 mb-4",children:s.map((c,u)=>S.jsx("button",{type:"button",className:`btn btn-outline-primary fw-bold px-4 py-3 fs-4 rounded-3 ${t===c?"active":""}`,onClick:()=>a("ingredients",u,c),children:c},u))}),t&&S.jsxs(S.Fragment,{children:[S.jsx("h4",{className:"text-secondary mb-2",children:"Cantidad"}),S.jsx("select",{className:"form-select form-select-lg mb-4 fs-4",value:n.quantity,onChange:c=>o(c.target.value),children:[0,1,2,3,4,5,6].map(c=>S.jsx("option",{value:c,children:c},c))})]}),n.quantity>=1&&S.jsxs(S.Fragment,{children:[S.jsx("h4",{className:"text-secondary mb-3",children:"Toppings por helado"}),Array.from({length:n.quantity},(c,u)=>{const d=u+1,h=n.toppings[d]||[];return S.jsxs("div",{className:"mb-4",children:[S.jsxs("h5",{children:["Helado #",d]}),S.jsx("div",{className:"d-flex flex-wrap gap-3 mt-2",children:r.map((f,p)=>S.jsx("button",{type:"button",className:`btn btn-outline-primary fw-bold px-4 py-3 fs-5 rounded-3 ${h.includes(f)?"active":""}`,onClick:()=>{const m=[...h],v=m.indexOf(f);v>-1?m.splice(v,1):m.length<3&&m.push(f),e(y=>({...y,toppings:{...y.toppings,[d]:m}}))},children:f},p))})]},d)})]}),n.quantity>0&&S.jsxs("div",{className:"mt-4 bg-light p-4 rounded-4 shadow-sm",children:[S.jsx("h4",{className:"text-secondary",children:"Tu seleccin"}),S.jsxs("ul",{className:"list-group mt-3",children:[S.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center fs-5",children:[S.jsx("strong",{children:"Ice Cream:"})," ",t,S.jsx("button",{type:"button",className:"btn btn-danger btn-lg fs-5 px-4 py-2 rounded-3",onClick:()=>{i(""),e(c=>({...c,ingredients:["","",""]}))},children:"Quitar"})]}),Object.entries(n.toppings).map(([c,u])=>S.jsxs("li",{className:"list-group-item fs-5",children:[S.jsxs("strong",{children:["Toppings Helado #",c,":"]}),S.jsx("div",{className:"d-flex flex-wrap gap-2 mt-2",children:u.length>0?u.map((d,h)=>S.jsxs("span",{className:"badge bg-primary fs-5 p-3 rounded-pill",children:[d,S.jsx("button",{type:"button",className:"btn btn-sm btn-light ms-2 py-0 px-2",onClick:()=>{e(f=>{const p=[...f.toppings[c]];return p.splice(h,1),{...f,toppings:{...f.toppings,[c]:p}}})},children:""})]},h)):S.jsx("span",{className:"text-muted",children:"Ninguno"})})]},c)),S.jsxs("li",{className:"list-group-item fs-5",children:[S.jsx("strong",{children:"Cantidad:"})," ",n.quantity]})]})]}),t&&S.jsx("button",{type:"submit",className:"btn btn-dark btn-lg fs-4 py-3 w-100 mt-4 rounded-4",children:"Add to cart"})]})})]})}function zJ(){return S.jsxs("div",{className:"container mt-4",children:[S.jsx("h2",{className:"mb-4",children:"Elige Ingredientes"}),S.jsx("div",{className:"d-flex flex-wrap gap-3 justify-content-center"})]})}function WJ(){return S.jsxs("div",{className:"container mt-4",children:[S.jsx("h2",{className:"mb-4",children:"Elige Toppings"}),S.jsx("div",{className:"d-flex flex-wrap gap-3 justify-content-center"})]})}function VJ(){return S.jsxs("div",{className:"container mt-4",children:[S.jsx("h2",{className:"mb-4",children:"Escribe un Comentario"}),S.jsx("div",{className:"d-flex flex-wrap gap-3 justify-content-center"})]})}function GJ(){return S.jsxs("div",{className:"container mt-4",children:[S.jsx("h2",{className:"mb-4",children:"Elige un Cantidad"}),S.jsx("div",{className:"d-flex flex-wrap gap-3 justify-content-center"})]})}function YJ(){const[n,e]=O.useState({name:"",items:[],metodo:""}),[t,i]=O.useState(""),[s,r]=O.useState(1),[a,o]=O.useState(0),[l,c]=O.useState(0),[u,d]=O.useState(""),[h,f]=O.useState({}),[p,m]=O.useState(0),[v,y]=O.useState(0),[b,x]=O.useState(0),[_,T]=O.useState(0),[C,L]=O.useState(!1),[k,M]=O.useState(0);return S.jsx(yn.Provider,{value:{newOrderCounter:k,increaseNewOrderCounter:M,hideOrders:C,toggleHideOrders:L,sumToSubstract:_,setSumtoSubstract:T,typeCounter:b,setTypeCounter:x,favCounter:l,setFavCounter:c,type:v,setType:y,totalToPay:p,setTotalToPay:m,order:n,setOrder:e,name:t,setName:i,renderOrdersKey:s,setRenderOrdersKey:r,itemCounter:a,setItemCounter:o,metodo:u,setMetodo:d,newItem:h,setNewItem:f},children:S.jsxs(mj,{children:[S.jsx(Bs,{path:"/",element:S.jsx(IB,{})}),S.jsx(Bs,{path:"/terminal",element:S.jsx(TB,{})}),S.jsx(Bs,{path:"/queue",element:S.jsx(RB,{})}),S.jsx(Bs,{path:"/ventas",element:S.jsx(YY,{})}),S.jsx(Bs,{path:"/cameras",element:S.jsx(jJ,{})}),S.jsx(Bs,{path:"/customer",element:S.jsx(BJ,{})}),S.jsx(Bs,{path:"/shopping",element:S.jsx(UJ,{})}),S.jsx(Bs,{path:"/product",element:S.jsx($J,{})}),S.jsx(Bs,{path:"/icrform",element:S.jsx(HJ,{})}),S.jsx(Bs,{path:"/tipo",element:S.jsx(_B,{})}),S.jsx(Bs,{path:"/ingredientes",element:S.jsx(zJ,{})}),S.jsx(Bs,{path:"/toppings",element:S.jsx(WJ,{})}),S.jsx(Bs,{path:"/cantidad",element:S.jsx(GJ,{})}),S.jsx(Bs,{path:"/comentarios",element:S.jsx(VJ,{})})]})})}bx.createRoot(document.getElementById("root")).render(S.jsx(ua.StrictMode,{children:S.jsx(Ej,{children:S.jsx(YJ,{})})}));export{kn as _,Bv as c,_p as g};
